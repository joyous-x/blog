### DDMS
* 打开DDMS，选中"Start Method Profiling"，操作App需要分析性能的部分（时间最好控制在5s以内，方便分析），选中"Stop Method Profiling"。DDMS 会自动保存为trace文件并打开。

### CPU Monitor
* 在android studio的Monitor中有cpu监控，其中有个时间按钮，点击开始方法分析，再点击停止分析，并且显示抓取数据。

### Dmtracedump
* dmtracedump 可以把前面生成的trace文件生成图片或html文件更具可读性。
```
dmtracedump [-ho] [-s sortable] [-d trace-base-name] [-g outfile] <trace-base-name>
Option                      Description
    -d <trace-base-name>        Diff with this trace name
    -g <outfile>                Generate output to <outfile>
    -h                          Turn on HTML output
    -o                          Dump the trace file instead of profiling
    -d <trace-base-name>        URL base to the location of the sortable javascript file
    -t <percent>                Minimum threshold for including child nodes in the graph (child's inclusive time as a percentage of parent inclusive time). If this option is not used, the default threshold is 20%.
```
* 生成方法树图片：
    ```
    dmtracedump -g method.png ddms.trace
    注：生成图片需要安装Graphviz
    ```
* 生成html文件
    ```
    dmtracedump -h  ddms.trace > trace.html
    ```

### Systrace
Systrace 是 Android 4.1 中新增的性能数据采样和分析工具。它可帮助开发者收集 Android 关键子系统（如 surfaceflinger、WindowManagerService 等 Framework 部分关键模块、服务，View系统等）的运行信息，从而帮助开发者更直观的分析系统瓶颈，改进性能。
```
systrace 命令格式:
    $ python systrace.py [options] [category1] [category2] ... [categoryN]
    
    
参数：
    Option                  Description
    -h, --help              Show the help message.
    -o <FILE>               Write the HTML trace report to the specified file.
    -t N, --time=N          Trace activity for N seconds. The default value is 5 seconds.
    -b N, --buf-size=N      Use a trace buffer size of N kilobytes. This option lets you limit the total size of the data collected during a trace.
    -k <KFUNCS>
    --ktrace=<KFUNCS>       Trace the activity of specific kernel functions, specified in a comma-separated list.
    -l, --list-categories   List the available tracing category tags. The available tags are:
                            gfx - Graphics
                            input - Input
                            view - View
                            ...
    -a <APP_NAME>
    --app=<APP_NAME>        Enable tracing for applications, specified as a comma-separated list of package names. The apps must contain tracing instrumentation calls from the Trace class. For more information, see Analyzing UI Performance with Systrace.
    --from-file=<FROM_FILE> Create the interactive Systrace report from a file, instead of running a live trace.
    -e <DEVICE_SERIAL>
    --serial=<DEVICE_SERIAL>Conduct the trace on a specific connected device, identified by its device serial number.
    
    
实例:
    $ cd android-sdk/platform-tools/systrace
    $ python systrace.py --time=10 -o mynewtrace.html sched gfx view wm
生成的html文件可以使用chrome打开，点开右上角的Alerts，有工具根据trace文件分析出来的问题点以及解决方案建议。
```
