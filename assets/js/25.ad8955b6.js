(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{475:function(t,e,l){t.exports=l.p+"assets/img/linux_perfermance_tools_by_BrendanGregg.b1512ffe.png"},676:function(t,e,l){"use strict";l.r(e);var i=l(15),a=Object(i.a)({},(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[i("h2",{attrs:{id:"common"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#common"}},[t._v("#")]),t._v(" Common")]),t._v(" "),i("table",[i("thead",[i("tr",[i("th",{staticStyle:{"text-align":"center"}},[t._v("Category")]),t._v(" "),i("th",{staticStyle:{"text-align":"left"}},[t._v("Command")]),t._v(" "),i("th",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),i("th",{staticStyle:{"text-align":"center"}},[t._v("Example")]),t._v(" "),i("th",{staticStyle:{"text-align":"left"}},[t._v("Note")])])]),t._v(" "),i("tbody",[i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v(".")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("grep")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("grep 查找")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[i("code",[t._v('grep -ar "select" ./conf')])]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v(".")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("sed")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("sed 编辑")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}}),t._v(" "),i("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v(".")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("awk")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("awk 分析")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[i("code",[t._v("awk '{arr[$3]++}END{for(i in arr) print substr(i,0,length(i)-1)}'")])]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v(".")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("xargs")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("将标准输入作为命令的参数")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[i("code",[t._v("ps -ef | pgrep %s | xargs -I {} kill -9 {}")])]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("管道是将前面的标准输出作为后面的标准输入")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v(".")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("lsof")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}}),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[i("code",[t._v("lsof | grep -i delete")])]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v(".")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("nohup")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}}),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[i("code",[t._v("sudo nohup xxx &")])]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v(".")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("top")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}}),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[i("code",[t._v("内存排序 : top -a -n 1 -c")]),t._v(" "),i("code",[t._v("CPU排序 : top -n 1 -c")])]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v(".")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("tcpdump")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}}),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[i("code",[t._v("tcpdump -i any -Xxns0 -c 100 host xx.xx.xx.xx and port xxxx")])]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v(".")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("perf")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}}),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[i("code",[t._v("perf top -p {pid}")])]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v(".")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("iftop")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}}),t._v(" "),i("td",{staticStyle:{"text-align":"center"}}),t._v(" "),i("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v(".")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("dos2unix")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}}),t._v(" "),i("td",{staticStyle:{"text-align":"center"}}),t._v(" "),i("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v(".")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("pstree")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}}),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[i("code",[t._v("pstree -c -a > pstree.log")])]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v(".")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("ulimit")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}}),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[i("code",[t._v("ulimit [type: -H/-S] [cmd: -a/...] [arg: 0/unlimited/...]")])]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v(".")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("strace")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}}),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[i("code",[t._v("strace -p 34542 -s 128 -T")])]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("truss、strace 以及 ltrace")])])])]),t._v(" "),i("ul",[i("li",[t._v("pig\n"),i("ul",[i("li",[t._v("本地执行：pig -x local xxx.pig")])])]),t._v(" "),i("li",[t._v("gdb\n"),i("ul",[i("li",[t._v("gdb [bin] core_dump")]),t._v(" "),i("li",[t._v("gdb attach [pid]\n"),i("ul",[i("li",[t._v("c : continue")])])])])]),t._v(" "),i("li",[t._v("memcache"),i("div",{staticClass:"language- line-numbers-mode"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[t._v("memcache:\n    telnet host port\n        强制退出：ctrl + ']'\n    stats\n    stats cachedump slabs_id limit_num\n")])]),t._v(" "),i("div",{staticClass:"line-numbers-wrapper"},[i("span",{staticClass:"line-number"},[t._v("1")]),i("br"),i("span",{staticClass:"line-number"},[t._v("2")]),i("br"),i("span",{staticClass:"line-number"},[t._v("3")]),i("br"),i("span",{staticClass:"line-number"},[t._v("4")]),i("br"),i("span",{staticClass:"line-number"},[t._v("5")]),i("br")])])]),t._v(" "),i("li",[t._v("自启动"),i("div",{staticClass:"language- line-numbers-mode"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[t._v("# 下面任务可以在 chkconfig 配置自启动\n/etc/init.d/*    \n# 直接写到脚本里面\n/etc/rc.local    \n# 查看某个服务（下面以redis为例）是否自启动\nchkconfig --list|grep redis\n# 如果 3，4，5为 off则不会自启动\n")])]),t._v(" "),i("div",{staticClass:"line-numbers-wrapper"},[i("span",{staticClass:"line-number"},[t._v("1")]),i("br"),i("span",{staticClass:"line-number"},[t._v("2")]),i("br"),i("span",{staticClass:"line-number"},[t._v("3")]),i("br"),i("span",{staticClass:"line-number"},[t._v("4")]),i("br"),i("span",{staticClass:"line-number"},[t._v("5")]),i("br"),i("span",{staticClass:"line-number"},[t._v("6")]),i("br"),i("span",{staticClass:"line-number"},[t._v("7")]),i("br")])])]),t._v(" "),i("li",[t._v("没有配置host时，函数 gethostbyname 会返回空：\n"),i("ul",[i("li",[t._v("修改：/etc/hosts")]),t._v(" "),i("li",[t._v("修改(重启后依然生效)：/etc/sysconfig/network")]),t._v(" "),i("li",[t._v("执行(当次生效)：hostname xxx")])])]),t._v(" "),i("li",[t._v("Makefile\n"),i("ul",[i("li",[t._v("静态库：-L[lib_dir] -l[lib(libname)] ：注意，gcc在查找库的时候会自动添加式lib前缀再查找")]),t._v(" "),i("li",[t._v("多线程：-lpthread ：注意，编译多线程时，需要链接pthread")])])]),t._v(" "),i("li",[t._v("条件变量是 GNU/Linux 提供的第三种同步工具(第一互斥体、第二这信号量)")]),t._v(" "),i("li",[t._v("crontab\n"),i("ul",[i("li",[t._v("用户 : /var/spool/cron/*")]),t._v(" "),i("li",[t._v("系统 : /etc/crontab、/etc/cron.d")]),t._v(" "),i("li",[t._v("不常用 : /etc/[cron.hourly、cron.daily、cron.weekly、cron.monthly]")])])]),t._v(" "),i("li",[t._v("hadoop\n"),i("ul",[i("li",[t._v("HADOOP_USER_NAME=hdfs hdfs dfs -rmr")])])]),t._v(" "),i("li",[t._v("pyspark\n"),i("ul",[i("li",[t._v("提交任务 &"),i("div",{staticClass:"language- line-numbers-mode"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[t._v("sudo -u news_db spark-submit --master local[*] --conf spark.ui.port=12399 --queue offline --py-files pyspark_dashboard_util.py pyspark_dashboard.py\n")])]),t._v(" "),i("div",{staticClass:"line-numbers-wrapper"},[i("span",{staticClass:"line-number"},[t._v("1")]),i("br")])])]),t._v(" "),i("li",[t._v("打开文件\n"),i("ul",[i("li",[t._v('sc.textFile("file://[absolute path]")')]),t._v(" "),i("li",[t._v('sc.textFile("hdfs://url:port/[path]")')])])])])])]),t._v(" "),i("h2",{attrs:{id:"systemctl"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#systemctl"}},[t._v("#")]),t._v(" systemctl")]),t._v(" "),i("ul",[i("li",[t._v("CentOS 7\n"),i("ul",[i("li",[t._v("位置：服务systemctl脚本存放在：(配置文件优先级依次从低到高)\n"),i("ul",[i("li",[t._v("/usr/lib/systemd/，有系统 system 和用户 user 之分，即：/usr/lib/systemd/system 和 /usr/lib/systemd/user")]),t._v(" "),i("li",[t._v("/run/systemd/system")]),t._v(" "),i("li",[t._v("/etc/systemd/system")])])]),t._v(" "),i("li",[t._v("开机启动\n"),i("ul",[i("li",[t._v("systemctl enable [service, 如：nginx.service]")])])]),t._v(" "),i("li",[t._v("关机/重启\n"),i("ul",[i("li",[t._v("systemctl poweroff")]),t._v(" "),i("li",[t._v("systemctl reboot")])])])])])]),t._v(" "),i("h2",{attrs:{id:"git"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#git"}},[t._v("#")]),t._v(" Git")]),t._v(" "),i("ul",[i("li",[t._v("create\n"),i("ul",[i("li",[t._v("local\n"),i("ul",[i("li",[t._v("git checkout -b "),i("branch",[t._v(" [origin/"),i("branch",[t._v("]\n"),i("ul",[i("li",[t._v("默认是基于本地HEAD创建分支")])])])],1)],1)])]),t._v(" "),i("li",[t._v("remote\n"),i("ul",[i("li",[t._v("git push A B:C\n"),i("ul",[i("li",[i("em",[t._v("其中A和C是分别remote端的一个repository的名字和branch的名字，B是本地端branch的名字")])]),t._v(" "),i("li",[t._v("意思是把本地的B推送到remotes/A/C下")]),t._v(" "),i("li",[t._v("当B==C时可以直接省略为：git push A B")])])])])])])]),t._v(" "),i("li",[t._v("delete\n"),i("ul",[i("li",[t._v("remote\n"),i("ul",[i("li",[t._v("git push origin :A\n"),i("ul",[i("li",[t._v("推送一个空分支到远程分支，就相当于删除远程分支")])])]),t._v(" "),i("li",[t._v("git push origin --delete A")])])]),t._v(" "),i("li",[t._v("local\n"),i("ul",[i("li",[t._v("git branch -D dev")])])])])]),t._v(" "),i("li",[t._v("tag\n"),i("ul",[i("li",[t._v("git tag -a v0.0.1 -m 'tag message to describe this version'")]),t._v(" "),i("li",[t._v("git push origin v0.0.1")])])])]),t._v(" "),i("h2",{attrs:{id:"problems"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#problems"}},[t._v("#")]),t._v(" Problems")]),t._v(" "),i("ol",[i("li",[t._v("在 ubuntu 中移动 50000 张图片的图片的时候遇到如下问题："),i("em",[t._v("-bash: /bin/mv: Argument list too long")]),t._v(" "),i("ul",[i("li",[t._v("使用 "),i("code",[t._v('find sourcePath/ -type f -name "*.*" -exec mv {} targetPath/ \\;')]),t._v(" 可以解决，注意不能缺少结尾的 "),i("strong",[t._v(";")])])])])]),t._v(" "),i("h2",{attrs:{id:"centos创建ssh密钥"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#centos创建ssh密钥"}},[t._v("#")]),t._v(" CentOS创建SSH密钥")]),t._v(" "),i("ol",[i("li",[t._v("输入以下命令以创建 rsa 秘钥：ssh-keygen -t rsa")]),t._v(" "),i("li",[t._v("查看产生两个文件：id_rsa、id_rsa.pub (一般在 ~/.ssh/ 目录下)")]),t._v(" "),i("li",[t._v("重命名 id_rsa.pub 为 authorized_key:  "),i("code",[t._v("cp ~/.ssh/id_rsa.pub ~/.ssh/authorized_keys")])]),t._v(" "),i("li",[t._v("执行 "),i("code",[t._v("ssh localhost")]),t._v(" 进行验证")])]),t._v(" "),i("h2",{attrs:{id:"linux-性能领域大师布伦丹·格雷格的工具图谱"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#linux-性能领域大师布伦丹·格雷格的工具图谱"}},[t._v("#")]),t._v(" Linux 性能领域大师布伦丹·格雷格的工具图谱")]),t._v(" "),i("p",[i("img",{attrs:{src:l(475),alt:"Linux工具图谱"}})])])}),[],!1,null,null,null);e.default=a.exports}}]);