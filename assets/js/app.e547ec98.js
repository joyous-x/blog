(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[]]);!function(n){function e(e){for(var r,i,s=e[0],l=e[1],c=e[2],p=0,u=[];p<s.length;p++)i=s[p],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&u.push(o[i][0]),o[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(n[r]=l[r]);for(d&&d(e);u.length;)u.shift()();return a.push.apply(a,c||[]),t()}function t(){for(var n,e=0;e<a.length;e++){for(var t=a[e],r=!0,s=1;s<t.length;s++){var l=t[s];0!==o[l]&&(r=!1)}r&&(a.splice(e--,1),n=i(i.s=t[0]))}return n}var r={},o={1:0},a=[];function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.e=function(n){var e=[],t=o[n];if(0!==t)if(t)e.push(t[2]);else{var r=new Promise((function(e,r){t=o[n]=[e,r]}));e.push(t[2]=r);var a,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=function(n){return i.p+"assets/js/"+({}[n]||n)+"."+{2:"28675651",3:"43c8fac8",4:"2601732b",5:"51de14ae",6:"e4c709ef",7:"681cd789",8:"2cadde1b",9:"11d27c1c",10:"aebb1a9d",11:"bdb676ad",12:"9450141c",13:"ec96994d",14:"8a40b7ae",15:"14324128",16:"ffe9b698",17:"57d71aa3",18:"414462aa",19:"340f2415",20:"9bead936",21:"99388ba3",22:"8add7339",23:"4a244f91",24:"4182fce2",25:"aa828b7a",26:"f6f7f1ca",27:"9ebdd156",28:"8c759ea2",29:"ee6fa1e0",30:"26552b07",31:"eb3fce00",32:"3d5f5948",33:"2c46ca70",34:"2b3a2cc6",35:"fbbcd62d",36:"375ab7ea",37:"f18da370",38:"93cdea6a",39:"fa6a2de4",40:"68d5acb3",41:"735a32f6",42:"2dcfb427",43:"d1d1c767",44:"8374d8a6",45:"f3b5663a",46:"dffbcf73",47:"8af1db5b",48:"a14ca5ac",49:"77471881",50:"833ba9c6",51:"565e7811",52:"a00a1ea2",53:"f026bc0d",54:"26bb1b5c",55:"19c9c3b1",56:"e45cc4fa",57:"7541d446",58:"29ddc7c0",59:"c66016a6",60:"80f30ca2",61:"196d3936",62:"a8191475",63:"1d11e7ae",64:"af88a7ea",65:"23d9093e",66:"700efe50",67:"aa1afb45",68:"c3093474",69:"46bc4c32",70:"53a9893c",71:"6d27c9a8",72:"371c02d5",73:"6f41f3d6",74:"e6aeb90b",75:"3b999111",76:"888c5f54",77:"36e1ab88",78:"d94ab9be",79:"88baeb00",80:"9d9ca817",81:"d783cd89",82:"93b3bcbe",83:"279e2d4a",84:"d5f1c016",85:"7e2ec985",86:"f02cbda5",87:"e3c549cd",88:"ade652b2",89:"14ffa288",90:"2bc06a43",91:"ec70111c",92:"935af665",93:"d605f686",94:"aadbe865",95:"4b68d679",96:"1add5eb0",97:"06b6b1d1",98:"af4e0cb1",99:"4f6e22c1",100:"c2ffbde4",101:"f896fa45",102:"c4e2f559",103:"81568839",104:"fafbf0fb",105:"127ec06c"}[n]+".js"}(n);var l=new Error;a=function(e){s.onerror=s.onload=null,clearTimeout(c);var t=o[n];if(0!==t){if(t){var r=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;l.message="Loading chunk "+n+" failed.\n("+r+": "+a+")",l.name="ChunkLoadError",l.type=r,l.request=a,t[1](l)}o[n]=void 0}};var c=setTimeout((function(){a({type:"timeout",target:s})}),12e4);s.onerror=s.onload=a,document.head.appendChild(s)}return Promise.all(e)},i.m=n,i.c=r,i.d=function(n,e,t){i.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},i.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,e){if(1&e&&(n=i(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var r in n)i.d(t,r,function(e){return n[e]}.bind(null,r));return t},i.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(e,"a",e),e},i.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},i.p="/blog/",i.oe=function(n){throw console.error(n),n};var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var d=l;a.push([229,0]),t()}([function(n,e){var t=function(n){return n&&n.Math==Math&&n};n.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof global&&global)||function(){return this}()||Function("return this")()},function(n,e,t){var r=t(0),o=t(37).f,a=t(25),i=t(14),s=t(105),l=t(112),c=t(102);n.exports=function(n,e){var t,d,p,u,m,f=n.target,h=n.global,g=n.stat;if(t=h?r:g?r[f]||s(f,{}):(r[f]||{}).prototype)for(d in e){if(u=e[d],p=n.noTargetGet?(m=o(t,d))&&m.value:t[d],!c(h?d:f+(g?".":"#")+d,n.forced)&&void 0!==p){if(typeof u==typeof p)continue;l(u,p)}(n.sham||p&&p.sham)&&a(u,"sham",!0),i(t,d,u,n)}}},function(n,e,t){var r=t(58),o=Function.prototype,a=o.bind,i=o.call,s=r&&a.bind(i,i);n.exports=r?function(n){return n&&s(n)}:function(n){return n&&function(){return i.apply(n,arguments)}}},function(n,e){n.exports=function(n){try{return!!n()}catch(n){return!0}}},function(n,e,t){var r=t(117),o=t(14),a=t(248);r||o(Object.prototype,"toString",a,{unsafe:!0})},function(n,e){n.exports=function(n){return"function"==typeof n}},function(n,e,t){var r=t(0),o=t(77),a=t(10),i=t(78),s=t(106),l=t(146),c=o("wks"),d=r.Symbol,p=d&&d.for,u=l?d:d&&d.withoutSetter||i;n.exports=function(n){if(!a(c,n)||!s&&"string"!=typeof c[n]){var e="Symbol."+n;s&&a(d,n)?c[n]=d[n]:c[n]=l&&p?p(e):u(e)}return c[n]}},function(n,e,t){var r=t(3);n.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(n,e,t){var r=t(0),o=t(9),a=r.String,i=r.TypeError;n.exports=function(n){if(o(n))return n;throw i(a(n)+" is not an object")}},function(n,e,t){var r=t(5);n.exports=function(n){return"object"==typeof n?null!==n:r(n)}},function(n,e,t){var r=t(2),o=t(16),a=r({}.hasOwnProperty);n.exports=Object.hasOwn||function(n,e){return a(o(n),e)}},function(n,e,t){var r=t(58),o=Function.prototype.call;n.exports=r?o.bind(o):function(){return o.apply(o,arguments)}},function(n,e,t){var r=t(0),o=t(86),a=r.String;n.exports=function(n){if("Symbol"===o(n))throw TypeError("Cannot convert a Symbol value to a string");return a(n)}},function(n,e,t){var r=t(0),o=t(7),a=t(148),i=t(147),s=t(8),l=t(80),c=r.TypeError,d=Object.defineProperty,p=Object.getOwnPropertyDescriptor;e.f=o?i?function(n,e,t){if(s(n),e=l(e),s(t),"function"==typeof n&&"prototype"===e&&"value"in t&&"writable"in t&&!t.writable){var r=p(n,e);r&&r.writable&&(n[e]=t.value,t={configurable:"configurable"in t?t.configurable:r.configurable,enumerable:"enumerable"in t?t.enumerable:r.enumerable,writable:!1})}return d(n,e,t)}:d:function(n,e,t){if(s(n),e=l(e),s(t),a)try{return d(n,e,t)}catch(n){}if("get"in t||"set"in t)throw c("Accessors not supported");return"value"in t&&(n[e]=t.value),n}},function(n,e,t){var r=t(0),o=t(5),a=t(10),i=t(25),s=t(105),l=t(85),c=t(40),d=t(75).CONFIGURABLE,p=c.get,u=c.enforce,m=String(String).split("String");(n.exports=function(n,e,t,l){var c,p=!!l&&!!l.unsafe,f=!!l&&!!l.enumerable,h=!!l&&!!l.noTargetGet,g=l&&void 0!==l.name?l.name:e;o(t)&&("Symbol("===String(g).slice(0,7)&&(g="["+String(g).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!a(t,"name")||d&&t.name!==g)&&i(t,"name",g),(c=u(t)).source||(c.source=m.join("string"==typeof g?g:""))),n!==r?(p?!h&&n[e]&&(f=!0):delete n[e],f?n[e]=t:i(n,e,t)):f?n[e]=t:s(e,t)})(Function.prototype,"toString",(function(){return o(this)&&p(this).source||l(this)}))},function(n,e,t){"use strict";function r(n,e,t,r,o,a,i,s){var l,c="function"==typeof n?n.options:n;if(e&&(c.render=e,c.staticRenderFns=t,c._compiled=!0),r&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),i?(l=function(n){(n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(n=__VUE_SSR_CONTEXT__),o&&o.call(this,n),n&&n._registeredComponents&&n._registeredComponents.add(i)},c._ssrRegister=l):o&&(l=s?function(){o.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:o),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(n,e){return l.call(e),d(n,e)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,l):[l]}return{exports:n,options:c}}t.d(e,"a",(function(){return r}))},function(n,e,t){var r=t(0),o=t(18),a=r.Object;n.exports=function(n){return a(o(n))}},function(n,e,t){var r=t(0),o=t(5),a=function(n){return o(n)?n:void 0};n.exports=function(n,e){return arguments.length<2?a(r[n]):r[n]&&r[n][e]}},function(n,e,t){var r=t(0).TypeError;n.exports=function(n){if(null==n)throw r("Can't call method on "+n);return n}},function(n,e,t){var r=t(57),o=t(18);n.exports=function(n){return r(o(n))}},function(n,e,t){"use strict";var r=t(167).charAt,o=t(12),a=t(40),i=t(152),s=a.set,l=a.getterFor("String Iterator");i(String,"String",(function(n){s(this,{type:"String Iterator",string:o(n),index:0})}),(function(){var n,e=l(this),t=e.string,o=e.index;return o>=t.length?{value:void 0,done:!0}:(n=r(t,o),e.index+=n.length,{value:n,done:!1})}))},function(n,e,t){"use strict";var r=t(1),o=t(91);r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},function(n,e,t){var r=t(0),o=t(168),a=t(169),i=t(145),s=t(25),l=t(6),c=l("iterator"),d=l("toStringTag"),p=i.values,u=function(n,e){if(n){if(n[c]!==p)try{s(n,c,p)}catch(e){n[c]=p}if(n[d]||s(n,d,e),o[e])for(var t in i)if(n[t]!==i[t])try{s(n,t,i[t])}catch(e){n[t]=i[t]}}};for(var m in o)u(r[m]&&r[m].prototype,m);u(a,"DOMTokenList")},function(n,e,t){"use strict";var r=t(1),o=t(54).filter;r({target:"Array",proto:!0,forced:!t(89)("filter")},{filter:function(n){return o(this,n,arguments.length>1?arguments[1]:void 0)}})},function(n,e,t){var r=t(2),o=r({}.toString),a=r("".slice);n.exports=function(n){return a(o(n),8,-1)}},function(n,e,t){var r=t(7),o=t(13),a=t(49);n.exports=r?function(n,e,t){return o.f(n,e,a(1,t))}:function(n,e,t){return n[e]=t,n}},function(n,e){var t=Array.isArray;n.exports=t},function(n,e){n.exports=!1},function(n,e,t){var r=t(17);n.exports=r("navigator","userAgent")||""},function(n,e,t){var r=t(48);n.exports=function(n){return r(n.length)}},function(n,e,t){var r=t(14),o=t(263),a=Error.prototype;a.toString!==o&&r(a,"toString",o)},function(n,e,t){var r=t(186),o="object"==typeof self&&self&&self.Object===Object&&self,a=r||o||Function("return this")();n.exports=a},function(n,e,t){"use strict";var r=t(1),o=t(176);r({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},function(n,e,t){var r=t(0),o=t(168),a=t(169),i=t(176),s=t(25),l=function(n){if(n&&n.forEach!==i)try{s(n,"forEach",i)}catch(e){n.forEach=i}};for(var c in o)o[c]&&l(r[c]&&r[c].prototype);l(a)},function(n,e,t){var r=t(2);n.exports=r({}.isPrototypeOf)},function(n,e,t){var r,o=t(8),a=t(107),i=t(110),s=t(60),l=t(151),c=t(79),d=t(84),p=d("IE_PROTO"),u=function(){},m=function(n){return"<script>"+n+"<\/script>"},f=function(n){n.write(m("")),n.close();var e=n.parentWindow.Object;return n=null,e},h=function(){try{r=new ActiveXObject("htmlfile")}catch(n){}var n,e;h="undefined"!=typeof document?document.domain&&r?f(r):((e=c("iframe")).style.display="none",l.appendChild(e),e.src=String("javascript:"),(n=e.contentWindow.document).open(),n.write(m("document.F=Object")),n.close(),n.F):f(r);for(var t=i.length;t--;)delete h.prototype[i[t]];return h()};s[p]=!0,n.exports=Object.create||function(n,e){var t;return null!==n?(u.prototype=o(n),t=new u,u.prototype=null,t[p]=n):t=h(),void 0===e?t:a.f(t,e)}},function(n,e,t){var r=t(0),o=t(5),a=t(82),i=r.TypeError;n.exports=function(n){if(o(n))return n;throw i(a(n)+" is not a function")}},function(n,e,t){var r=t(7),o=t(11),a=t(111),i=t(49),s=t(19),l=t(80),c=t(10),d=t(148),p=Object.getOwnPropertyDescriptor;e.f=r?p:function(n,e){if(n=s(n),e=l(e),d)try{return p(n,e)}catch(n){}if(c(n,e))return i(!o(a.f,n,e),n[e])}},function(n,e,t){var r=t(58),o=Function.prototype,a=o.apply,i=o.call;n.exports="object"==typeof Reflect&&Reflect.apply||(r?i.bind(a):function(){return i.apply(a,arguments)})},function(n,e,t){"use strict";t.d(e,"a",(function(){return a}));t(101),t(68),t(23),t(4),t(377),t(32),t(33),t(171),t(378),t(97);function r(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function o(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function a(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?o(Object(t),!0).forEach((function(e){r(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}},function(n,e,t){var r,o,a,i=t(231),s=t(0),l=t(2),c=t(9),d=t(25),p=t(10),u=t(104),m=t(84),f=t(60),h=s.TypeError,g=s.WeakMap;if(i||u.state){var v=u.state||(u.state=new g),b=l(v.get),y=l(v.has),x=l(v.set);r=function(n,e){if(y(v,n))throw new h("Object already initialized");return e.facade=n,x(v,n,e),e},o=function(n){return b(v,n)||{}},a=function(n){return y(v,n)}}else{var _=m("state");f[_]=!0,r=function(n,e){if(p(n,_))throw new h("Object already initialized");return e.facade=n,d(n,_,e),e},o=function(n){return p(n,_)?n[_]:{}},a=function(n){return p(n,_)}}n.exports={set:r,get:o,has:a,enforce:function(n){return a(n)?o(n):r(n,{})},getterFor:function(n){return function(e){var t;if(!c(e)||(t=o(e)).type!==n)throw h("Incompatible receiver, "+n+" required");return t}}}},function(n,e,t){var r=t(1),o=t(0),a=t(38),i=t(259),s=o.WebAssembly,l=7!==Error("e",{cause:7}).cause,c=function(n,e){var t={};t[n]=i(n,e,l),r({global:!0,forced:l},t)},d=function(n,e){if(s&&s[n]){var t={};t[n]=i("WebAssembly."+n,e,l),r({target:"WebAssembly",stat:!0,forced:l},t)}};c("Error",(function(n){return function(e){return a(n,this,arguments)}})),c("EvalError",(function(n){return function(e){return a(n,this,arguments)}})),c("RangeError",(function(n){return function(e){return a(n,this,arguments)}})),c("ReferenceError",(function(n){return function(e){return a(n,this,arguments)}})),c("SyntaxError",(function(n){return function(e){return a(n,this,arguments)}})),c("TypeError",(function(n){return function(e){return a(n,this,arguments)}})),c("URIError",(function(n){return function(e){return a(n,this,arguments)}})),d("CompileError",(function(n){return function(e){return a(n,this,arguments)}})),d("LinkError",(function(n){return function(e){return a(n,this,arguments)}})),d("RuntimeError",(function(n){return function(e){return a(n,this,arguments)}}))},function(n,e,t){var r=t(284),o=t(287);n.exports=function(n,e){var t=o(n,e);return r(t)?t:void 0}},function(n,e,t){"use strict";t.d(e,"e",(function(){return r})),t.d(e,"b",(function(){return a})),t.d(e,"j",(function(){return i})),t.d(e,"g",(function(){return l})),t.d(e,"h",(function(){return c})),t.d(e,"i",(function(){return d})),t.d(e,"c",(function(){return p})),t.d(e,"f",(function(){return u})),t.d(e,"l",(function(){return m})),t.d(e,"m",(function(){return f})),t.d(e,"d",(function(){return g})),t.d(e,"k",(function(){return v})),t.d(e,"n",(function(){return b})),t.d(e,"a",(function(){return x}));t(21),t(52),t(219),t(74),t(136),t(184),t(44),t(32),t(4),t(33),t(23),t(76),t(137),t(133),t(72),t(205),t(30),t(144);var r=/#.*$/,o=/\.(md|html)$/,a=/\/$/,i=/^[a-z]+:/i;function s(n){return decodeURI(n).replace(r,"").replace(o,"")}function l(n){return i.test(n)}function c(n){return/^mailto:/.test(n)}function d(n){return/^tel:/.test(n)}function p(n){if(l(n))return n;var e=n.match(r),t=e?e[0]:"",o=s(n);return a.test(o)?n:o+".html"+t}function u(n,e){var t=n.hash,o=function(n){var e=n.match(r);if(e)return e[0]}(e);return(!o||t===o)&&s(n.path)===s(e)}function m(n,e,t){if(l(e))return{type:"external",path:e};t&&(e=function(n,e,t){var r=n.charAt(0);if("/"===r)return n;if("?"===r||"#"===r)return e+n;var o=e.split("/");t&&o[o.length-1]||o.pop();for(var a=n.replace(/^\//,"").split("/"),i=0;i<a.length;i++){var s=a[i];".."===s?o.pop():"."!==s&&o.push(s)}""!==o[0]&&o.unshift("");return o.join("/")}(e,t));for(var r=s(e),o=0;o<n.length;o++)if(s(n[o].regularPath)===r)return Object.assign({},n[o],{type:"page",path:p(n[o].path)});return console.error('[vuepress] No matching page found for sidebar item "'.concat(e,'"')),{}}function f(n,e,t,r){var o=t.pages,a=t.themeConfig,i=r&&a.locales&&a.locales[r]||a;if("auto"===(n.frontmatter.sidebar||i.sidebar||a.sidebar))return h(n);var s=i.sidebar||a.sidebar;if(s){var l=function(n,e){if(Array.isArray(e))return{base:"/",config:e};for(var t in e)if(0===(r=n,/(\.html|\/)$/.test(r)?r:r+"/").indexOf(encodeURI(t)))return{base:t,config:e[t]};var r;return{}}(e,s),c=l.base,d=l.config;return"auto"===d?h(n):d?d.map((function(n){return function n(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if("string"==typeof e)return m(t,e,r);if(Array.isArray(e))return Object.assign(m(t,e[0],r),{title:e[1]});o>3&&console.error("[vuepress] detected a too deep nested sidebar group.");var a=e.children||[];return 0===a.length&&e.path?Object.assign(m(t,e.path,r),{title:e.title}):{type:"group",path:e.path,title:e.title,sidebarDepth:e.sidebarDepth,initialOpenGroupIndex:e.initialOpenGroupIndex,children:a.map((function(e){return n(e,t,r,o+1)})),collapsable:!1!==e.collapsable}}(n,o,c)})):[]}return[]}function h(n){var e=g(n.headers||[]);return[{type:"group",collapsable:!1,title:n.title,path:null,children:e.map((function(e){return{type:"auto",title:e.title,basePath:n.path,path:n.path+"#"+e.slug,children:e.children||[]}}))}]}function g(n){var e;return(n=n.map((function(n){return Object.assign({},n)}))).forEach((function(n){2===n.level?e=n:e&&(e.children||(e.children=[])).push(n)})),n.filter((function(n){return 2===n.level}))}function v(n){return Object.assign(n,{type:n.items&&n.items.length?"links":"link"})}function b(n){return Object.prototype.toString.call(n).match(/\[object (.*?)\]/)[1].toLowerCase()}function y(n){var e=n.frontmatter.date||n.lastUpdated||new Date,t=new Date(e);return"Invalid Date"==t&&e&&(t=new Date(e.replace(/-/g,"/"))),t.getTime()}function x(n,e){return y(e)-y(n)}},function(n,e,t){"use strict";var r=t(1),o=t(54).map;r({target:"Array",proto:!0,forced:!t(89)("map")},{map:function(n){return o(this,n,arguments.length>1?arguments[1]:void 0)}})},function(n,e){n.exports=function(n){return null!=n&&"object"==typeof n}},function(n,e,t){var r,o,a=t(0),i=t(28),s=a.process,l=a.Deno,c=s&&s.versions||l&&l.version,d=c&&c.v8;d&&(o=(r=d.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!o&&i&&(!(r=i.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=i.match(/Chrome\/(\d+)/))&&(o=+r[1]),n.exports=o},function(n,e,t){var r=t(36);n.exports=function(n,e){var t=n[e];return null==t?void 0:r(t)}},function(n,e,t){var r=t(59),o=Math.min;n.exports=function(n){return n>0?o(r(n),9007199254740991):0}},function(n,e){n.exports=function(n,e){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:e}}},function(n,e,t){"use strict";var r=t(3);n.exports=function(n,e){var t=[][n];return!!t&&r((function(){t.call(null,e||function(){return 1},1)}))}},function(n,e,t){"use strict";var r=t(1),o=t(0),a=t(66),i=t(87),s=t(9),l=t(109),c=t(29),d=t(19),p=t(67),u=t(6),m=t(89),f=t(65),h=m("slice"),g=u("species"),v=o.Array,b=Math.max;r({target:"Array",proto:!0,forced:!h},{slice:function(n,e){var t,r,o,u=d(this),m=c(u),h=l(n,m),y=l(void 0===e?m:e,m);if(a(u)&&(t=u.constructor,(i(t)&&(t===v||a(t.prototype))||s(t)&&null===(t=t[g]))&&(t=void 0),t===v||void 0===t))return f(u,h,y);for(r=new(void 0===t?v:t)(b(y-h,0)),o=0;h<y;h++,o++)h in u&&p(r,o,u[h]);return r.length=o,r}})},function(n,e,t){"use strict";var r=t(38),o=t(11),a=t(2),i=t(121),s=t(3),l=t(8),c=t(5),d=t(59),p=t(48),u=t(12),m=t(18),f=t(122),h=t(47),g=t(264),v=t(123),b=t(6)("replace"),y=Math.max,x=Math.min,_=a([].concat),k=a([].push),w=a("".indexOf),T=a("".slice),S="$0"==="a".replace(/./,"$0"),P=!!/./[b]&&""===/./[b]("a","$0");i("replace",(function(n,e,t){var a=P?"$":"$0";return[function(n,t){var r=m(this),a=null==n?void 0:h(n,b);return a?o(a,n,r,t):o(e,u(r),n,t)},function(n,o){var i=l(this),s=u(n);if("string"==typeof o&&-1===w(o,a)&&-1===w(o,"$<")){var m=t(e,i,s,o);if(m.done)return m.value}var h=c(o);h||(o=u(o));var b=i.global;if(b){var S=i.unicode;i.lastIndex=0}for(var P=[];;){var C=v(i,s);if(null===C)break;if(k(P,C),!b)break;""===u(C[0])&&(i.lastIndex=f(s,p(i.lastIndex),S))}for(var I,E="",A=0,D=0;D<P.length;D++){for(var O=u((C=P[D])[0]),L=y(x(d(C.index),s.length),0),j=[],R=1;R<C.length;R++)k(j,void 0===(I=C[R])?I:String(I));var z=C.groups;if(h){var M=_([O],j,L,s);void 0!==z&&k(M,z);var N=u(r(o,void 0,M))}else N=g(O,s,L,j,z,o);L>=A&&(E+=T(s,A,L)+N,A=L+O.length)}return E+T(s,A)}]}),!!s((function(){var n=/./;return n.exec=function(){var n=[];return n.groups={a:"7"},n},"7"!=="".replace(n,"$<a>")}))||!S||P)},function(n,e,t){var r=t(150),o=t(110).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(n){return r(n,o)}},function(n,e,t){var r=t(64),o=t(2),a=t(57),i=t(16),s=t(29),l=t(170),c=o([].push),d=function(n){var e=1==n,t=2==n,o=3==n,d=4==n,p=6==n,u=7==n,m=5==n||p;return function(f,h,g,v){for(var b,y,x=i(f),_=a(x),k=r(h,g),w=s(_),T=0,S=v||l,P=e?S(f,w):t||u?S(f,0):void 0;w>T;T++)if((m||T in _)&&(y=k(b=_[T],T,x),n))if(e)P[T]=y;else if(y)switch(n){case 3:return!0;case 5:return b;case 6:return T;case 2:c(P,b)}else switch(n){case 4:return!1;case 7:c(P,b)}return p?-1:o||d?d:P}};n.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6),filterReject:d(7)}},function(n,e,t){var r=t(7),o=t(75).EXISTS,a=t(2),i=t(13).f,s=Function.prototype,l=a(s.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=a(c.exec);r&&!o&&i(s,"name",{configurable:!0,get:function(){try{return d(c,l(this))[1]}catch(n){return""}}})},function(n,e,t){var r=t(69),o=t(269),a=t(270),i=r?r.toStringTag:void 0;n.exports=function(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":i&&i in Object(n)?o(n):a(n)}},function(n,e,t){var r=t(0),o=t(2),a=t(3),i=t(24),s=r.Object,l=o("".split);n.exports=a((function(){return!s("z").propertyIsEnumerable(0)}))?function(n){return"String"==i(n)?l(n,""):s(n)}:s},function(n,e,t){var r=t(3);n.exports=!r((function(){var n=function(){}.bind();return"function"!=typeof n||n.hasOwnProperty("prototype")}))},function(n,e){var t=Math.ceil,r=Math.floor;n.exports=function(n){var e=+n;return e!=e||0===e?0:(e>0?r:t)(e)}},function(n,e){n.exports={}},function(n,e){n.exports={}},function(n,e,t){var r=t(13).f,o=t(10),a=t(6)("toStringTag");n.exports=function(n,e,t){n&&!t&&(n=n.prototype),n&&!o(n,a)&&r(n,a,{configurable:!0,value:e})}},function(n,e,t){var r=t(2),o=t(8),a=t(233);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var n,e=!1,t={};try{(n=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(t,[]),e=t instanceof Array}catch(n){}return function(t,r){return o(t),a(r),e?n(t,r):t.__proto__=r,t}}():void 0)},function(n,e,t){var r=t(2),o=t(36),a=t(58),i=r(r.bind);n.exports=function(n,e){return o(n),void 0===e?n:a?i(n,e):function(){return n.apply(e,arguments)}}},function(n,e,t){var r=t(2);n.exports=r([].slice)},function(n,e,t){var r=t(24);n.exports=Array.isArray||function(n){return"Array"==r(n)}},function(n,e,t){"use strict";var r=t(80),o=t(13),a=t(49);n.exports=function(n,e,t){var i=r(e);i in n?o.f(n,i,a(0,t)):n[i]=t}},function(n,e,t){"use strict";var r=t(1),o=t(0),a=t(17),i=t(38),s=t(11),l=t(2),c=t(27),d=t(7),p=t(106),u=t(3),m=t(10),f=t(66),h=t(5),g=t(9),v=t(34),b=t(81),y=t(8),x=t(16),_=t(19),k=t(80),w=t(12),T=t(49),S=t(35),P=t(83),C=t(53),I=t(178),E=t(114),A=t(37),D=t(13),O=t(107),L=t(111),j=t(65),R=t(14),z=t(77),M=t(84),N=t(60),F=t(78),q=t(6),U=t(179),B=t(180),G=t(62),H=t(40),V=t(54).forEach,$=M("hidden"),W=q("toPrimitive"),K=H.set,X=H.getterFor("Symbol"),Q=Object.prototype,Y=o.Symbol,Z=Y&&Y.prototype,J=o.TypeError,nn=o.QObject,en=a("JSON","stringify"),tn=A.f,rn=D.f,on=I.f,an=L.f,sn=l([].push),ln=z("symbols"),cn=z("op-symbols"),dn=z("string-to-symbol-registry"),pn=z("symbol-to-string-registry"),un=z("wks"),mn=!nn||!nn.prototype||!nn.prototype.findChild,fn=d&&u((function(){return 7!=S(rn({},"a",{get:function(){return rn(this,"a",{value:7}).a}})).a}))?function(n,e,t){var r=tn(Q,e);r&&delete Q[e],rn(n,e,t),r&&n!==Q&&rn(Q,e,r)}:rn,hn=function(n,e){var t=ln[n]=S(Z);return K(t,{type:"Symbol",tag:n,description:e}),d||(t.description=e),t},gn=function(n,e,t){n===Q&&gn(cn,e,t),y(n);var r=k(e);return y(t),m(ln,r)?(t.enumerable?(m(n,$)&&n[$][r]&&(n[$][r]=!1),t=S(t,{enumerable:T(0,!1)})):(m(n,$)||rn(n,$,T(1,{})),n[$][r]=!0),fn(n,r,t)):rn(n,r,t)},vn=function(n,e){y(n);var t=_(e),r=P(t).concat(_n(t));return V(r,(function(e){d&&!s(bn,t,e)||gn(n,e,t[e])})),n},bn=function(n){var e=k(n),t=s(an,this,e);return!(this===Q&&m(ln,e)&&!m(cn,e))&&(!(t||!m(this,e)||!m(ln,e)||m(this,$)&&this[$][e])||t)},yn=function(n,e){var t=_(n),r=k(e);if(t!==Q||!m(ln,r)||m(cn,r)){var o=tn(t,r);return!o||!m(ln,r)||m(t,$)&&t[$][r]||(o.enumerable=!0),o}},xn=function(n){var e=on(_(n)),t=[];return V(e,(function(n){m(ln,n)||m(N,n)||sn(t,n)})),t},_n=function(n){var e=n===Q,t=on(e?cn:_(n)),r=[];return V(t,(function(n){!m(ln,n)||e&&!m(Q,n)||sn(r,ln[n])})),r};(p||(R(Z=(Y=function(){if(v(Z,this))throw J("Symbol is not a constructor");var n=arguments.length&&void 0!==arguments[0]?w(arguments[0]):void 0,e=F(n),t=function(n){this===Q&&s(t,cn,n),m(this,$)&&m(this[$],e)&&(this[$][e]=!1),fn(this,e,T(1,n))};return d&&mn&&fn(Q,e,{configurable:!0,set:t}),hn(e,n)}).prototype,"toString",(function(){return X(this).tag})),R(Y,"withoutSetter",(function(n){return hn(F(n),n)})),L.f=bn,D.f=gn,O.f=vn,A.f=yn,C.f=I.f=xn,E.f=_n,U.f=function(n){return hn(q(n),n)},d&&(rn(Z,"description",{configurable:!0,get:function(){return X(this).description}}),c||R(Q,"propertyIsEnumerable",bn,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!p,sham:!p},{Symbol:Y}),V(P(un),(function(n){B(n)})),r({target:"Symbol",stat:!0,forced:!p},{for:function(n){var e=w(n);if(m(dn,e))return dn[e];var t=Y(e);return dn[e]=t,pn[t]=e,t},keyFor:function(n){if(!b(n))throw J(n+" is not a symbol");if(m(pn,n))return pn[n]},useSetter:function(){mn=!0},useSimple:function(){mn=!1}}),r({target:"Object",stat:!0,forced:!p,sham:!d},{create:function(n,e){return void 0===e?S(n):vn(S(n),e)},defineProperty:gn,defineProperties:vn,getOwnPropertyDescriptor:yn}),r({target:"Object",stat:!0,forced:!p},{getOwnPropertyNames:xn,getOwnPropertySymbols:_n}),r({target:"Object",stat:!0,forced:u((function(){E.f(1)}))},{getOwnPropertySymbols:function(n){return E.f(x(n))}}),en)&&r({target:"JSON",stat:!0,forced:!p||u((function(){var n=Y();return"[null]"!=en([n])||"{}"!=en({a:n})||"{}"!=en(Object(n))}))},{stringify:function(n,e,t){var r=j(arguments),o=e;if((g(e)||void 0!==n)&&!b(n))return f(e)||(e=function(n,e){if(h(o)&&(e=s(o,this,n,e)),!b(e))return e}),r[1]=e,i(en,null,r)}});if(!Z[W]){var kn=Z.valueOf;R(Z,W,(function(n){return s(kn,this)}))}G(Y,"Symbol"),N[$]=!0},function(n,e,t){var r=t(31).Symbol;n.exports=r},function(n,e,t){"use strict";t.d(e,"a",(function(){return a}));t(76);var r=t(71);t(68),t(90),t(4),t(120),t(20),t(22),t(181);var o=t(98);t(41),t(30);function a(n){return function(n){if(Array.isArray(n))return Object(r.a)(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||Object(o.a)(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(n,e,t){"use strict";function r(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}t.d(e,"a",(function(){return r}))},function(n,e,t){"use strict";var r=t(1),o=t(0),a=t(3),i=t(66),s=t(9),l=t(16),c=t(29),d=t(67),p=t(170),u=t(89),m=t(6),f=t(46),h=m("isConcatSpreadable"),g=o.TypeError,v=f>=51||!a((function(){var n=[];return n[h]=!1,n.concat()[0]!==n})),b=u("concat"),y=function(n){if(!s(n))return!1;var e=n[h];return void 0!==e?!!e:i(n)};r({target:"Array",proto:!0,forced:!v||!b},{concat:function(n){var e,t,r,o,a,i=l(this),s=p(i,0),u=0;for(e=-1,r=arguments.length;e<r;e++)if(y(a=-1===e?i:arguments[e])){if(u+(o=c(a))>9007199254740991)throw g("Maximum allowed index exceeded");for(t=0;t<o;t++,u++)t in a&&d(s,u,a[t])}else{if(u>=9007199254740991)throw g("Maximum allowed index exceeded");d(s,u++,a)}return s.length=u,s}})},function(n,e,t){var r=t(1),o=t(0),a=t(38),i=t(5),s=t(28),l=t(65),c=t(162),d=/MSIE .\./.test(s),p=o.Function,u=function(n){return function(e,t){var r=c(arguments.length,1)>2,o=i(e)?e:p(e),s=r?l(arguments,2):void 0;return n(r?function(){a(o,this,s)}:o,t)}};r({global:!0,bind:!0,forced:d},{setTimeout:u(o.setTimeout),setInterval:u(o.setInterval)})},function(n,e,t){"use strict";t(21);var r,o,a=t(1),i=t(0),s=t(11),l=t(2),c=t(5),d=t(9),p=(r=!1,(o=/[ac]/).exec=function(){return r=!0,/./.exec.apply(this,arguments)},!0===o.test("abc")&&r),u=i.Error,m=l(/./.test);a({target:"RegExp",proto:!0,forced:!p},{test:function(n){var e=this.exec;if(!c(e))return m(this,n);var t=s(e,this,n);if(null!==t&&!d(t))throw new u("RegExp exec method returned something other than an Object or null");return!!t}})},function(n,e,t){var r=t(7),o=t(10),a=Function.prototype,i=r&&Object.getOwnPropertyDescriptor,s=o(a,"name"),l=s&&"something"===function(){}.name,c=s&&(!r||r&&i(a,"name").configurable);n.exports={EXISTS:s,PROPER:l,CONFIGURABLE:c}},function(n,e,t){t(1)({target:"Array",stat:!0},{isArray:t(66)})},function(n,e,t){var r=t(27),o=t(104);(n.exports=function(n,e){return o[n]||(o[n]=void 0!==e?e:{})})("versions",[]).push({version:"3.21.1",mode:r?"pure":"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})},function(n,e,t){var r=t(2),o=0,a=Math.random(),i=r(1..toString);n.exports=function(n){return"Symbol("+(void 0===n?"":n)+")_"+i(++o+a,36)}},function(n,e,t){var r=t(0),o=t(9),a=r.document,i=o(a)&&o(a.createElement);n.exports=function(n){return i?a.createElement(n):{}}},function(n,e,t){var r=t(149),o=t(81);n.exports=function(n){var e=r(n,"string");return o(e)?e:e+""}},function(n,e,t){var r=t(0),o=t(17),a=t(5),i=t(34),s=t(146),l=r.Object;n.exports=s?function(n){return"symbol"==typeof n}:function(n){var e=o("Symbol");return a(e)&&i(e.prototype,l(n))}},function(n,e,t){var r=t(0).String;n.exports=function(n){try{return r(n)}catch(n){return"Object"}}},function(n,e,t){var r=t(150),o=t(110);n.exports=Object.keys||function(n){return r(n,o)}},function(n,e,t){var r=t(77),o=t(78),a=r("keys");n.exports=function(n){return a[n]||(a[n]=o(n))}},function(n,e,t){var r=t(2),o=t(5),a=t(104),i=r(Function.toString);o(a.inspectSource)||(a.inspectSource=function(n){return i(n)}),n.exports=a.inspectSource},function(n,e,t){var r=t(0),o=t(117),a=t(5),i=t(24),s=t(6)("toStringTag"),l=r.Object,c="Arguments"==i(function(){return arguments}());n.exports=o?i:function(n){var e,t,r;return void 0===n?"Undefined":null===n?"Null":"string"==typeof(t=function(n,e){try{return n[e]}catch(n){}}(e=l(n),s))?t:c?i(e):"Object"==(r=i(e))&&a(e.callee)?"Arguments":r}},function(n,e,t){var r=t(2),o=t(3),a=t(5),i=t(86),s=t(17),l=t(85),c=function(){},d=[],p=s("Reflect","construct"),u=/^\s*(?:class|function)\b/,m=r(u.exec),f=!u.exec(c),h=function(n){if(!a(n))return!1;try{return p(c,d,n),!0}catch(n){return!1}},g=function(n){if(!a(n))return!1;switch(i(n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!m(u,l(n))}catch(n){return!0}};g.sham=!0,n.exports=!p||o((function(){var n;return h(h.call)||!h(Object)||!h((function(){n=!0}))||n}))?g:h},function(n,e,t){var r=t(24),o=t(0);n.exports="process"==r(o.process)},function(n,e,t){var r=t(3),o=t(6),a=t(46),i=o("species");n.exports=function(n){return a>=51||!r((function(){var e=[];return(e.constructor={})[i]=function(){return{foo:1}},1!==e[n](Boolean).foo}))}},function(n,e,t){"use strict";var r=t(1),o=t(7),a=t(0),i=t(2),s=t(10),l=t(5),c=t(34),d=t(12),p=t(13).f,u=t(112),m=a.Symbol,f=m&&m.prototype;if(o&&l(m)&&(!("description"in f)||void 0!==m().description)){var h={},g=function(){var n=arguments.length<1||void 0===arguments[0]?void 0:d(arguments[0]),e=c(f,this)?new m(n):void 0===n?m():m(n);return""===n&&(h[e]=!0),e};u(g,m),g.prototype=f,f.constructor=g;var v="Symbol(test)"==String(m("test")),b=i(f.toString),y=i(f.valueOf),x=/^Symbol\((.*)\)[^)]+$/,_=i("".replace),k=i("".slice);p(f,"description",{configurable:!0,get:function(){var n=y(this),e=b(n);if(s(h,n))return"";var t=v?k(e,7,-1):_(e,x,"$1");return""===t?void 0:t}}),r({global:!0,forced:!0},{Symbol:g})}},function(n,e,t){"use strict";var r,o,a=t(11),i=t(2),s=t(12),l=t(140),c=t(103),d=t(77),p=t(35),u=t(40).get,m=t(220),f=t(224),h=d("native-string-replace",String.prototype.replace),g=RegExp.prototype.exec,v=g,b=i("".charAt),y=i("".indexOf),x=i("".replace),_=i("".slice),k=(o=/b*/g,a(g,r=/a/,"a"),a(g,o,"a"),0!==r.lastIndex||0!==o.lastIndex),w=c.BROKEN_CARET,T=void 0!==/()??/.exec("")[1];(k||T||w||m||f)&&(v=function(n){var e,t,r,o,i,c,d,m=this,f=u(m),S=s(n),P=f.raw;if(P)return P.lastIndex=m.lastIndex,e=a(v,P,S),m.lastIndex=P.lastIndex,e;var C=f.groups,I=w&&m.sticky,E=a(l,m),A=m.source,D=0,O=S;if(I&&(E=x(E,"y",""),-1===y(E,"g")&&(E+="g"),O=_(S,m.lastIndex),m.lastIndex>0&&(!m.multiline||m.multiline&&"\n"!==b(S,m.lastIndex-1))&&(A="(?: "+A+")",O=" "+O,D++),t=new RegExp("^(?:"+A+")",E)),T&&(t=new RegExp("^"+A+"$(?!\\s)",E)),k&&(r=m.lastIndex),o=a(g,I?t:m,O),I?o?(o.input=_(o.input,D),o[0]=_(o[0],D),o.index=m.lastIndex,m.lastIndex+=o[0].length):m.lastIndex=0:k&&o&&(m.lastIndex=m.global?o.index+o[0].length:r),T&&o&&o.length>1&&a(h,o[0],t,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&C)for(o.groups=c=p(null),i=0;i<C.length;i++)c[(d=C[i])[0]]=o[d[1]];return o}),n.exports=v},function(n,e,t){var r=t(274),o=t(275),a=t(276),i=t(277),s=t(278);function l(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=i,l.prototype.set=s,n.exports=l},function(n,e,t){var r=t(188);n.exports=function(n,e){for(var t=n.length;t--;)if(r(n[t][0],e))return t;return-1}},function(n,e,t){var r=t(42)(Object,"create");n.exports=r},function(n,e,t){var r=t(296);n.exports=function(n,e){var t=n.__data__;return r(e)?t["string"==typeof e?"string":"hash"]:t.map}},function(n,e,t){var r=t(131);n.exports=function(n){if("string"==typeof n||r(n))return n;var e=n+"";return"0"==e&&1/n==-1/0?"-0":e}},function(n,e,t){var r=t(1),o=t(7),a=t(13).f;r({target:"Object",stat:!0,forced:Object.defineProperty!==a,sham:!o},{defineProperty:a})},function(n,e,t){"use strict";t.d(e,"a",(function(){return o}));t(51),t(4),t(55),t(181),t(20),t(21),t(74);var r=t(71);function o(n,e){if(n){if("string"==typeof n)return Object(r.a)(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Object(r.a)(n,e):void 0}}},function(n,e,t){var r,o;
/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */void 0===(o="function"==typeof(r=function(){var n,e,t={version:"0.2.0"},r=t.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function o(n,e,t){return n<e?e:n>t?t:n}function a(n){return 100*(-1+n)}t.configure=function(n){var e,t;for(e in n)void 0!==(t=n[e])&&n.hasOwnProperty(e)&&(r[e]=t);return this},t.status=null,t.set=function(n){var e=t.isStarted();n=o(n,r.minimum,1),t.status=1===n?null:n;var l=t.render(!e),c=l.querySelector(r.barSelector),d=r.speed,p=r.easing;return l.offsetWidth,i((function(e){""===r.positionUsing&&(r.positionUsing=t.getPositioningCSS()),s(c,function(n,e,t){var o;return(o="translate3d"===r.positionUsing?{transform:"translate3d("+a(n)+"%,0,0)"}:"translate"===r.positionUsing?{transform:"translate("+a(n)+"%,0)"}:{"margin-left":a(n)+"%"}).transition="all "+e+"ms "+t,o}(n,d,p)),1===n?(s(l,{transition:"none",opacity:1}),l.offsetWidth,setTimeout((function(){s(l,{transition:"all "+d+"ms linear",opacity:0}),setTimeout((function(){t.remove(),e()}),d)}),d)):setTimeout(e,d)})),this},t.isStarted=function(){return"number"==typeof t.status},t.start=function(){t.status||t.set(0);var n=function(){setTimeout((function(){t.status&&(t.trickle(),n())}),r.trickleSpeed)};return r.trickle&&n(),this},t.done=function(n){return n||t.status?t.inc(.3+.5*Math.random()).set(1):this},t.inc=function(n){var e=t.status;return e?("number"!=typeof n&&(n=(1-e)*o(Math.random()*e,.1,.95)),e=o(e+n,0,.994),t.set(e)):t.start()},t.trickle=function(){return t.inc(Math.random()*r.trickleRate)},n=0,e=0,t.promise=function(r){return r&&"resolved"!==r.state()?(0===e&&t.start(),n++,e++,r.always((function(){0==--e?(n=0,t.done()):t.set((n-e)/n)})),this):this},t.render=function(n){if(t.isRendered())return document.getElementById("nprogress");c(document.documentElement,"nprogress-busy");var e=document.createElement("div");e.id="nprogress",e.innerHTML=r.template;var o,i=e.querySelector(r.barSelector),l=n?"-100":a(t.status||0),d=document.querySelector(r.parent);return s(i,{transition:"all 0 linear",transform:"translate3d("+l+"%,0,0)"}),r.showSpinner||(o=e.querySelector(r.spinnerSelector))&&u(o),d!=document.body&&c(d,"nprogress-custom-parent"),d.appendChild(e),e},t.remove=function(){d(document.documentElement,"nprogress-busy"),d(document.querySelector(r.parent),"nprogress-custom-parent");var n=document.getElementById("nprogress");n&&u(n)},t.isRendered=function(){return!!document.getElementById("nprogress")},t.getPositioningCSS=function(){var n=document.body.style,e="WebkitTransform"in n?"Webkit":"MozTransform"in n?"Moz":"msTransform"in n?"ms":"OTransform"in n?"O":"";return e+"Perspective"in n?"translate3d":e+"Transform"in n?"translate":"margin"};var i=function(){var n=[];function e(){var t=n.shift();t&&t(e)}return function(t){n.push(t),1==n.length&&e()}}(),s=function(){var n=["Webkit","O","Moz","ms"],e={};function t(t){return t=t.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,(function(n,e){return e.toUpperCase()})),e[t]||(e[t]=function(e){var t=document.body.style;if(e in t)return e;for(var r,o=n.length,a=e.charAt(0).toUpperCase()+e.slice(1);o--;)if((r=n[o]+a)in t)return r;return e}(t))}function r(n,e,r){e=t(e),n.style[e]=r}return function(n,e){var t,o,a=arguments;if(2==a.length)for(t in e)void 0!==(o=e[t])&&e.hasOwnProperty(t)&&r(n,t,o);else r(n,a[1],a[2])}}();function l(n,e){return("string"==typeof n?n:p(n)).indexOf(" "+e+" ")>=0}function c(n,e){var t=p(n),r=t+e;l(t,e)||(n.className=r.substring(1))}function d(n,e){var t,r=p(n);l(n,e)&&(t=r.replace(" "+e+" "," "),n.className=t.substring(1,t.length-1))}function p(n){return(" "+(n.className||"")+" ").replace(/\s+/gi," ")}function u(n){n&&n.parentNode&&n.parentNode.removeChild(n)}return t})?r.call(e,t,e,n):r)||(n.exports=o)},function(n){n.exports=JSON.parse('{"name":"vuepress-plugin-comment","version":"0.7.3","description":"Comment plugin in vuepress, such as Gitalk, Valine...","main":"index.js","scripts":{"test":"echo \\"Error: no test specified\\" && exit 1"},"repository":{"type":"git","url":"git+ssh://git@github.com/dongyuanxin/vuepress-plugin-comment.git"},"keywords":["vuepress","comment","plugin","vue","gitalk","valine"],"author":"dongyuanxin","license":"MIT","bugs":{"url":"https://github.com/dongyuanxin/vuepress-plugin-comment/issues"},"homepage":"https://github.com/dongyuanxin/vuepress-plugin-comment#readme","dependencies":{"ejs":"^2.6.1","gitalk":"^1.5.0","gitalk-fix":"^1.5.2","i":"^0.3.6","npm":"^6.9.0","valine":"^1.3.9"}}')},function(n,e,t){var r=t(1),o=t(16),a=t(83);r({target:"Object",stat:!0,forced:t(3)((function(){a(1)}))},{keys:function(n){return a(o(n))}})},function(n,e,t){var r=t(3),o=t(5),a=/#|\.prototype\./,i=function(n,e){var t=l[s(n)];return t==d||t!=c&&(o(e)?r(e):!!e)},s=i.normalize=function(n){return String(n).replace(a,".").toLowerCase()},l=i.data={},c=i.NATIVE="N",d=i.POLYFILL="P";n.exports=i},function(n,e,t){var r=t(3),o=t(0).RegExp,a=r((function(){var n=o("a","y");return n.lastIndex=2,null!=n.exec("abcd")})),i=a||r((function(){return!o("a","y").sticky})),s=a||r((function(){var n=o("^r","gy");return n.lastIndex=2,null!=n.exec("str")}));n.exports={BROKEN_CARET:s,MISSED_STICKY:i,UNSUPPORTED_Y:a}},function(n,e,t){var r=t(0),o=t(105),a=r["__core-js_shared__"]||o("__core-js_shared__",{});n.exports=a},function(n,e,t){var r=t(0),o=Object.defineProperty;n.exports=function(n,e){try{o(r,n,{value:e,configurable:!0,writable:!0})}catch(t){r[n]=e}return e}},function(n,e,t){var r=t(46),o=t(3);n.exports=!!Object.getOwnPropertySymbols&&!o((function(){var n=Symbol();return!String(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},function(n,e,t){var r=t(7),o=t(147),a=t(13),i=t(8),s=t(19),l=t(83);e.f=r&&!o?Object.defineProperties:function(n,e){i(n);for(var t,r=s(e),o=l(e),c=o.length,d=0;c>d;)a.f(n,t=o[d++],r[t]);return n}},function(n,e,t){var r=t(19),o=t(109),a=t(29),i=function(n){return function(e,t,i){var s,l=r(e),c=a(l),d=o(i,c);if(n&&t!=t){for(;c>d;)if((s=l[d++])!=s)return!0}else for(;c>d;d++)if((n||d in l)&&l[d]===t)return n||d||0;return!n&&-1}};n.exports={includes:i(!0),indexOf:i(!1)}},function(n,e,t){var r=t(59),o=Math.max,a=Math.min;n.exports=function(n,e){var t=r(n);return t<0?o(t+e,0):a(t,e)}},function(n,e){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(n,e,t){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,a=o&&!r.call({1:2},1);e.f=a?function(n){var e=o(this,n);return!!e&&e.enumerable}:r},function(n,e,t){var r=t(10),o=t(113),a=t(37),i=t(13);n.exports=function(n,e,t){for(var s=o(e),l=i.f,c=a.f,d=0;d<s.length;d++){var p=s[d];r(n,p)||t&&r(t,p)||l(n,p,c(e,p))}}},function(n,e,t){var r=t(17),o=t(2),a=t(53),i=t(114),s=t(8),l=o([].concat);n.exports=r("Reflect","ownKeys")||function(n){var e=a.f(s(n)),t=i.f;return t?l(e,t(n)):e}},function(n,e){e.f=Object.getOwnPropertySymbols},function(n,e,t){var r=t(0),o=t(10),a=t(5),i=t(16),s=t(84),l=t(154),c=s("IE_PROTO"),d=r.Object,p=d.prototype;n.exports=l?d.getPrototypeOf:function(n){var e=i(n);if(o(e,c))return e[c];var t=e.constructor;return a(t)&&e instanceof t?t.prototype:e instanceof d?p:null}},function(n,e,t){var r=t(86),o=t(47),a=t(61),i=t(6)("iterator");n.exports=function(n){if(null!=n)return o(n,i)||o(n,"@@iterator")||a[r(n)]}},function(n,e,t){var r={};r[t(6)("toStringTag")]="z",n.exports="[object z]"===String(r)},function(n,e,t){var r=t(8),o=t(160),a=t(6)("species");n.exports=function(n,e){var t,i=r(n).constructor;return void 0===i||null==(t=r(i)[a])?e:o(t)}},function(n,e,t){var r=t(0),o=t(109),a=t(29),i=t(67),s=r.Array,l=Math.max;n.exports=function(n,e,t){for(var r=a(n),c=o(e,r),d=o(void 0===t?r:t,r),p=s(l(d-c,0)),u=0;c<d;c++,u++)i(p,u,n[c]);return p.length=u,p}},function(n,e,t){t(180)("iterator")},function(n,e,t){"use strict";t(21);var r=t(2),o=t(14),a=t(91),i=t(3),s=t(6),l=t(25),c=s("species"),d=RegExp.prototype;n.exports=function(n,e,t,p){var u=s(n),m=!i((function(){var e={};return e[u]=function(){return 7},7!=""[n](e)})),f=m&&!i((function(){var e=!1,t=/a/;return"split"===n&&((t={}).constructor={},t.constructor[c]=function(){return t},t.flags="",t[u]=/./[u]),t.exec=function(){return e=!0,null},t[u](""),!e}));if(!m||!f||t){var h=r(/./[u]),g=e(u,""[n],(function(n,e,t,o,i){var s=r(n),l=e.exec;return l===a||l===d.exec?m&&!i?{done:!0,value:h(e,t,o)}:{done:!0,value:s(t,e,o)}:{done:!1}}));o(String.prototype,n,g[0]),o(d,u,g[1])}p&&l(d[u],"sham",!0)}},function(n,e,t){"use strict";var r=t(167).charAt;n.exports=function(n,e,t){return e+(t?r(n,e).length:1)}},function(n,e,t){var r=t(0),o=t(11),a=t(8),i=t(5),s=t(24),l=t(91),c=r.TypeError;n.exports=function(n,e){var t=n.exec;if(i(t)){var r=o(t,n,e);return null!==r&&a(r),r}if("RegExp"===s(n))return o(l,n,e);throw c("RegExp#exec called on incompatible receiver")}},function(n,e,t){var r=t(268),o=t(45),a=Object.prototype,i=a.hasOwnProperty,s=a.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(n){return o(n)&&i.call(n,"callee")&&!s.call(n,"callee")};n.exports=l},function(n,e,t){var r=t(42)(t(31),"Map");n.exports=r},function(n,e){n.exports=function(n){var e=typeof n;return null!=n&&("object"==e||"function"==e)}},function(n,e,t){var r=t(288),o=t(295),a=t(297),i=t(298),s=t(299);function l(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=i,l.prototype.set=s,n.exports=l},function(n,e){n.exports=function(n){var e=-1,t=Array(n.size);return n.forEach((function(n){t[++e]=n})),t}},function(n,e){n.exports=function(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991}},function(n,e,t){var r=t(26),o=t(131),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;n.exports=function(n,e){if(r(n))return!1;var t=typeof n;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=n&&!o(n))||(i.test(n)||!a.test(n)||null!=e&&n in Object(e))}},function(n,e,t){var r=t(56),o=t(45);n.exports=function(n){return"symbol"==typeof n||o(n)&&"[object Symbol]"==r(n)}},function(n,e){n.exports=function(n){return n}},function(n,e,t){var r=t(2),o=t(14),a=Date.prototype,i=r(a.toString),s=r(a.getTime);"Invalid Date"!=String(new Date(NaN))&&o(a,"toString",(function(){var n=s(this);return n==n?i(this):"Invalid Date"}))},function(n,e,t){var r=t(1),o=t(0),a=t(62);r({global:!0},{Reflect:{}}),a(o.Reflect,"Reflect",!0)},function(n,e,t){"use strict";var r=t(1),o=t(54).some;r({target:"Array",proto:!0,forced:!t(50)("some")},{some:function(n){return o(this,n,arguments.length>1?arguments[1]:void 0)}})},function(n,e,t){"use strict";var r=t(38),o=t(11),a=t(2),i=t(121),s=t(139),l=t(8),c=t(18),d=t(118),p=t(122),u=t(48),m=t(12),f=t(47),h=t(119),g=t(123),v=t(91),b=t(103),y=t(3),x=b.UNSUPPORTED_Y,_=Math.min,k=[].push,w=a(/./.exec),T=a(k),S=a("".slice);i("split",(function(n,e,t){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(n,t){var a=m(c(this)),i=void 0===t?4294967295:t>>>0;if(0===i)return[];if(void 0===n)return[a];if(!s(n))return o(e,a,n,i);for(var l,d,p,u=[],f=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(n.sticky?"y":""),g=0,b=new RegExp(n.source,f+"g");(l=o(v,b,a))&&!((d=b.lastIndex)>g&&(T(u,S(a,g,l.index)),l.length>1&&l.index<a.length&&r(k,u,h(l,1)),p=l[0].length,g=d,u.length>=i));)b.lastIndex===l.index&&b.lastIndex++;return g===a.length?!p&&w(b,"")||T(u,""):T(u,S(a,g)),u.length>i?h(u,0,i):u}:"0".split(void 0,0).length?function(n,t){return void 0===n&&0===t?[]:o(e,this,n,t)}:e,[function(e,t){var r=c(this),i=null==e?void 0:f(e,n);return i?o(i,e,r,t):o(a,m(r),e,t)},function(n,r){var o=l(this),i=m(n),s=t(a,o,i,r,a!==e);if(s.done)return s.value;var c=d(o,RegExp),f=o.unicode,h=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(x?"g":"y"),v=new c(x?"^(?:"+o.source+")":o,h),b=void 0===r?4294967295:r>>>0;if(0===b)return[];if(0===i.length)return null===g(v,i)?[i]:[];for(var y=0,k=0,w=[];k<i.length;){v.lastIndex=x?0:k;var P,C=g(v,x?S(i,k):i);if(null===C||(P=_(u(v.lastIndex+(x?k:0)),i.length))===y)k=p(i,k,f);else{if(T(w,S(i,y,k)),w.length===b)return w;for(var I=1;I<=C.length-1;I++)if(T(w,C[I]),w.length===b)return w;k=y=P}}return T(w,S(i,y)),w}]}),!!y((function(){var n=/(?:)/,e=n.exec;n.exec=function(){return e.apply(this,arguments)};var t="ab".split(n);return 2!==t.length||"a"!==t[0]||"b"!==t[1]})),x)},function(n,e,t){"use strict";var r=t(1),o=t(2),a=t(108).indexOf,i=t(50),s=o([].indexOf),l=!!s&&1/s([1],1,-0)<0,c=i("indexOf");r({target:"Array",proto:!0,forced:l||!c},{indexOf:function(n){var e=arguments.length>1?arguments[1]:void 0;return l?s(this,n,e)||0:a(this,n,e)}})},function(n,e,t){var r=t(6),o=t(35),a=t(13),i=r("unscopables"),s=Array.prototype;null==s[i]&&a.f(s,i,{configurable:!0,value:o(null)}),n.exports=function(n){s[i][n]=!0}},function(n,e,t){var r=t(9),o=t(24),a=t(6)("match");n.exports=function(n){var e;return r(n)&&(void 0!==(e=n[a])?!!e:"RegExp"==o(n))}},function(n,e,t){"use strict";var r=t(8);n.exports=function(){var n=r(this),e="";return n.global&&(e+="g"),n.ignoreCase&&(e+="i"),n.multiline&&(e+="m"),n.dotAll&&(e+="s"),n.unicode&&(e+="u"),n.sticky&&(e+="y"),e}},function(n,e,t){var r=t(5),o=t(9),a=t(63);n.exports=function(n,e,t){var i,s;return a&&r(i=e.constructor)&&i!==t&&o(s=i.prototype)&&s!==t.prototype&&a(n,s),n}},function(n,e){n.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children||(n.children=[]),Object.defineProperty(n,"loaded",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(n,"id",{enumerable:!0,get:function(){return n.i}}),n.webpackPolyfill=1),n}},function(n,e){var t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,i=parseInt,s="object"==typeof global&&global&&global.Object===Object&&global,l="object"==typeof self&&self&&self.Object===Object&&self,c=s||l||Function("return this")(),d=Object.prototype.toString,p=Math.max,u=Math.min,m=function(){return c.Date.now()};function f(n){var e=typeof n;return!!n&&("object"==e||"function"==e)}function h(n){if("number"==typeof n)return n;if(function(n){return"symbol"==typeof n||function(n){return!!n&&"object"==typeof n}(n)&&"[object Symbol]"==d.call(n)}(n))return NaN;if(f(n)){var e="function"==typeof n.valueOf?n.valueOf():n;n=f(e)?e+"":e}if("string"!=typeof n)return 0===n?n:+n;n=n.replace(t,"");var s=o.test(n);return s||a.test(n)?i(n.slice(2),s?2:8):r.test(n)?NaN:+n}n.exports=function(n,e,t){var r,o,a,i,s,l,c=0,d=!1,g=!1,v=!0;if("function"!=typeof n)throw new TypeError("Expected a function");function b(e){var t=r,a=o;return r=o=void 0,c=e,i=n.apply(a,t)}function y(n){return c=n,s=setTimeout(_,e),d?b(n):i}function x(n){var t=n-l;return void 0===l||t>=e||t<0||g&&n-c>=a}function _(){var n=m();if(x(n))return k(n);s=setTimeout(_,function(n){var t=e-(n-l);return g?u(t,a-(n-c)):t}(n))}function k(n){return s=void 0,v&&r?b(n):(r=o=void 0,i)}function w(){var n=m(),t=x(n);if(r=arguments,o=this,l=n,t){if(void 0===s)return y(l);if(g)return s=setTimeout(_,e),b(l)}return void 0===s&&(s=setTimeout(_,e)),i}return e=h(e)||0,f(t)&&(d=!!t.leading,a=(g="maxWait"in t)?p(h(t.maxWait)||0,e):a,v="trailing"in t?!!t.trailing:v),w.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=o=s=void 0},w.flush=function(){return void 0===s?i:k(m())},w}},function(n,e,t){"use strict";var r=t(2),o=t(75).PROPER,a=t(14),i=t(8),s=t(34),l=t(12),c=t(3),d=t(140),p=RegExp.prototype,u=p.toString,m=r(d),f=c((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),h=o&&"toString"!=u.name;(f||h)&&a(RegExp.prototype,"toString",(function(){var n=i(this),e=l(n.source),t=n.flags;return"/"+e+"/"+l(void 0===t&&s(p,n)&&!("flags"in p)?m(n):t)}),{unsafe:!0})},function(n,e,t){"use strict";var r=t(19),o=t(138),a=t(61),i=t(40),s=t(13).f,l=t(152),c=t(27),d=t(7),p=i.set,u=i.getterFor("Array Iterator");n.exports=l(Array,"Array",(function(n,e){p(this,{type:"Array Iterator",target:r(n),index:0,kind:e})}),(function(){var n=u(this),e=n.target,t=n.kind,r=n.index++;return!e||r>=e.length?(n.target=void 0,{value:void 0,done:!0}):"keys"==t?{value:r,done:!1}:"values"==t?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");var m=a.Arguments=a.Array;if(o("keys"),o("values"),o("entries"),!c&&d&&"values"!==m.name)try{s(m,"name",{value:"values"})}catch(n){}},function(n,e,t){var r=t(106);n.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(n,e,t){var r=t(7),o=t(3);n.exports=r&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},function(n,e,t){var r=t(7),o=t(3),a=t(79);n.exports=!r&&!o((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},function(n,e,t){var r=t(0),o=t(11),a=t(9),i=t(81),s=t(47),l=t(230),c=t(6),d=r.TypeError,p=c("toPrimitive");n.exports=function(n,e){if(!a(n)||i(n))return n;var t,r=s(n,p);if(r){if(void 0===e&&(e="default"),t=o(r,n,e),!a(t)||i(t))return t;throw d("Can't convert object to primitive value")}return void 0===e&&(e="number"),l(n,e)}},function(n,e,t){var r=t(2),o=t(10),a=t(19),i=t(108).indexOf,s=t(60),l=r([].push);n.exports=function(n,e){var t,r=a(n),c=0,d=[];for(t in r)!o(s,t)&&o(r,t)&&l(d,t);for(;e.length>c;)o(r,t=e[c++])&&(~i(d,t)||l(d,t));return d}},function(n,e,t){var r=t(17);n.exports=r("document","documentElement")},function(n,e,t){"use strict";var r=t(1),o=t(11),a=t(27),i=t(75),s=t(5),l=t(232),c=t(115),d=t(63),p=t(62),u=t(25),m=t(14),f=t(6),h=t(61),g=t(153),v=i.PROPER,b=i.CONFIGURABLE,y=g.IteratorPrototype,x=g.BUGGY_SAFARI_ITERATORS,_=f("iterator"),k=function(){return this};n.exports=function(n,e,t,i,f,g,w){l(t,e,i);var T,S,P,C=function(n){if(n===f&&O)return O;if(!x&&n in A)return A[n];switch(n){case"keys":case"values":case"entries":return function(){return new t(this,n)}}return function(){return new t(this)}},I=e+" Iterator",E=!1,A=n.prototype,D=A[_]||A["@@iterator"]||f&&A[f],O=!x&&D||C(f),L="Array"==e&&A.entries||D;if(L&&(T=c(L.call(new n)))!==Object.prototype&&T.next&&(a||c(T)===y||(d?d(T,y):s(T[_])||m(T,_,k)),p(T,I,!0,!0),a&&(h[I]=k)),v&&"values"==f&&D&&"values"!==D.name&&(!a&&b?u(A,"name","values"):(E=!0,O=function(){return o(D,this)})),f)if(S={values:C("values"),keys:g?O:C("keys"),entries:C("entries")},w)for(P in S)(x||E||!(P in A))&&m(A,P,S[P]);else r({target:e,proto:!0,forced:x||E},S);return a&&!w||A[_]===O||m(A,_,O,{name:f}),h[e]=O,S}},function(n,e,t){"use strict";var r,o,a,i=t(3),s=t(5),l=t(35),c=t(115),d=t(14),p=t(6),u=t(27),m=p("iterator"),f=!1;[].keys&&("next"in(a=[].keys())?(o=c(c(a)))!==Object.prototype&&(r=o):f=!0),null==r||i((function(){var n={};return r[m].call(n)!==n}))?r={}:u&&(r=l(r)),s(r[m])||d(r,m,(function(){return this})),n.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:f}},function(n,e,t){var r=t(3);n.exports=!r((function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype}))},function(n,e,t){var r=t(0);n.exports=r.Promise},function(n,e,t){var r=t(6),o=t(61),a=r("iterator"),i=Array.prototype;n.exports=function(n){return void 0!==n&&(o.Array===n||i[a]===n)}},function(n,e,t){var r=t(0),o=t(11),a=t(36),i=t(8),s=t(82),l=t(116),c=r.TypeError;n.exports=function(n,e){var t=arguments.length<2?l(n):e;if(a(t))return i(o(t,n));throw c(s(n)+" is not iterable")}},function(n,e,t){var r=t(11),o=t(8),a=t(47);n.exports=function(n,e,t){var i,s;o(n);try{if(!(i=a(n,"return"))){if("throw"===e)throw t;return t}i=r(i,n)}catch(n){s=!0,i=n}if("throw"===e)throw t;if(s)throw i;return o(i),t}},function(n,e,t){var r=t(6)("iterator"),o=!1;try{var a=0,i={next:function(){return{done:!!a++}},return:function(){o=!0}};i[r]=function(){return this},Array.from(i,(function(){throw 2}))}catch(n){}n.exports=function(n,e){if(!e&&!o)return!1;var t=!1;try{var a={};a[r]=function(){return{next:function(){return{done:t=!0}}}},n(a)}catch(n){}return t}},function(n,e,t){var r=t(0),o=t(87),a=t(82),i=r.TypeError;n.exports=function(n){if(o(n))return n;throw i(a(n)+" is not a constructor")}},function(n,e,t){var r,o,a,i,s=t(0),l=t(38),c=t(64),d=t(5),p=t(10),u=t(3),m=t(151),f=t(65),h=t(79),g=t(162),v=t(163),b=t(88),y=s.setImmediate,x=s.clearImmediate,_=s.process,k=s.Dispatch,w=s.Function,T=s.MessageChannel,S=s.String,P=0,C={};try{r=s.location}catch(n){}var I=function(n){if(p(C,n)){var e=C[n];delete C[n],e()}},E=function(n){return function(){I(n)}},A=function(n){I(n.data)},D=function(n){s.postMessage(S(n),r.protocol+"//"+r.host)};y&&x||(y=function(n){g(arguments.length,1);var e=d(n)?n:w(n),t=f(arguments,1);return C[++P]=function(){l(e,void 0,t)},o(P),P},x=function(n){delete C[n]},b?o=function(n){_.nextTick(E(n))}:k&&k.now?o=function(n){k.now(E(n))}:T&&!v?(i=(a=new T).port2,a.port1.onmessage=A,o=c(i.postMessage,i)):s.addEventListener&&d(s.postMessage)&&!s.importScripts&&r&&"file:"!==r.protocol&&!u(D)?(o=D,s.addEventListener("message",A,!1)):o="onreadystatechange"in h("script")?function(n){m.appendChild(h("script")).onreadystatechange=function(){m.removeChild(this),I(n)}}:function(n){setTimeout(E(n),0)}),n.exports={set:y,clear:x}},function(n,e,t){var r=t(0).TypeError;n.exports=function(n,e){if(n<e)throw r("Not enough arguments");return n}},function(n,e,t){var r=t(28);n.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},function(n,e,t){var r=t(8),o=t(9),a=t(165);n.exports=function(n,e){if(r(n),o(e)&&e.constructor===n)return e;var t=a.f(n);return(0,t.resolve)(e),t.promise}},function(n,e,t){"use strict";var r=t(36),o=function(n){var e,t;this.promise=new n((function(n,r){if(void 0!==e||void 0!==t)throw TypeError("Bad Promise constructor");e=n,t=r})),this.resolve=r(e),this.reject=r(t)};n.exports.f=function(n){return new o(n)}},function(n,e,t){var r=function(n){"use strict";var e=Object.prototype,t=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(n,e,t){return Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}),n[e]}try{s({},"")}catch(n){s=function(n,e,t){return n[e]=t}}function l(n,e,t,r){var o=e&&e.prototype instanceof p?e:p,a=Object.create(o.prototype),i=new w(r||[]);return a._invoke=function(n,e,t){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(t.method=o,t.arg=a;;){var i=t.delegate;if(i){var s=x(i,t);if(s){if(s===d)continue;return s}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===r)throw r="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);r="executing";var l=c(n,e,t);if("normal"===l.type){if(r=t.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:t.done}}"throw"===l.type&&(r="completed",t.method="throw",t.arg=l.arg)}}}(n,t,i),a}function c(n,e,t){try{return{type:"normal",arg:n.call(e,t)}}catch(n){return{type:"throw",arg:n}}}n.wrap=l;var d={};function p(){}function u(){}function m(){}var f={};s(f,o,(function(){return this}));var h=Object.getPrototypeOf,g=h&&h(h(T([])));g&&g!==e&&t.call(g,o)&&(f=g);var v=m.prototype=p.prototype=Object.create(f);function b(n){["next","throw","return"].forEach((function(e){s(n,e,(function(n){return this._invoke(e,n)}))}))}function y(n,e){var r;this._invoke=function(o,a){function i(){return new e((function(r,i){!function r(o,a,i,s){var l=c(n[o],n,a);if("throw"!==l.type){var d=l.arg,p=d.value;return p&&"object"==typeof p&&t.call(p,"__await")?e.resolve(p.__await).then((function(n){r("next",n,i,s)}),(function(n){r("throw",n,i,s)})):e.resolve(p).then((function(n){d.value=n,i(d)}),(function(n){return r("throw",n,i,s)}))}s(l.arg)}(o,a,r,i)}))}return r=r?r.then(i,i):i()}}function x(n,e){var t=n.iterator[e.method];if(void 0===t){if(e.delegate=null,"throw"===e.method){if(n.iterator.return&&(e.method="return",e.arg=void 0,x(n,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=c(t,n.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[n.resultName]=o.value,e.next=n.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function _(n){var e={tryLoc:n[0]};1 in n&&(e.catchLoc=n[1]),2 in n&&(e.finallyLoc=n[2],e.afterLoc=n[3]),this.tryEntries.push(e)}function k(n){var e=n.completion||{};e.type="normal",delete e.arg,n.completion=e}function w(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(_,this),this.reset(!0)}function T(n){if(n){var e=n[o];if(e)return e.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,a=function e(){for(;++r<n.length;)if(t.call(n,r))return e.value=n[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return u.prototype=m,s(v,"constructor",m),s(m,"constructor",u),u.displayName=s(m,i,"GeneratorFunction"),n.isGeneratorFunction=function(n){var e="function"==typeof n&&n.constructor;return!!e&&(e===u||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,m):(n.__proto__=m,s(n,i,"GeneratorFunction")),n.prototype=Object.create(v),n},n.awrap=function(n){return{__await:n}},b(y.prototype),s(y.prototype,a,(function(){return this})),n.AsyncIterator=y,n.async=function(e,t,r,o,a){void 0===a&&(a=Promise);var i=new y(l(e,t,r,o),a);return n.isGeneratorFunction(t)?i:i.next().then((function(n){return n.done?n.value:i.next()}))},b(v),s(v,i,"Generator"),s(v,o,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),n.keys=function(n){var e=[];for(var t in n)e.push(t);return e.reverse(),function t(){for(;e.length;){var r=e.pop();if(r in n)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=T,w.prototype={constructor:w,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!n)for(var e in this)"t"===e.charAt(0)&&t.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var e=this;function r(t,r){return i.type="throw",i.arg=n,e.next=t,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=t.call(a,"catchLoc"),l=t.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(n,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&t.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===n||"continue"===n)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=n,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(n,e){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&e&&(this.next=e),d},finish:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.finallyLoc===n)return this.complete(t.completion,t.afterLoc),k(t),d}},catch:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===n){var r=t.completion;if("throw"===r.type){var o=r.arg;k(t)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(n,e,t){return this.delegate={iterator:T(n),resultName:e,nextLoc:t},"next"===this.method&&(this.arg=void 0),d}},n}(n.exports);try{regeneratorRuntime=r}catch(n){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(n,e,t){var r=t(2),o=t(59),a=t(12),i=t(18),s=r("".charAt),l=r("".charCodeAt),c=r("".slice),d=function(n){return function(e,t){var r,d,p=a(i(e)),u=o(t),m=p.length;return u<0||u>=m?n?"":void 0:(r=l(p,u))<55296||r>56319||u+1===m||(d=l(p,u+1))<56320||d>57343?n?s(p,u):r:n?c(p,u,u+2):d-56320+(r-55296<<10)+65536}};n.exports={codeAt:d(!1),charAt:d(!0)}},function(n,e){n.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(n,e,t){var r=t(79)("span").classList,o=r&&r.constructor&&r.constructor.prototype;n.exports=o===Object.prototype?void 0:o},function(n,e,t){var r=t(249);n.exports=function(n,e){return new(r(n))(0===e?0:e)}},function(n,e,t){var r=t(1),o=t(7),a=t(113),i=t(19),s=t(37),l=t(67);r({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(n){for(var e,t,r=i(n),o=s.f,c=a(r),d={},p=0;c.length>p;)void 0!==(t=o(r,e=c[p++]))&&l(d,e,t);return d}})},function(n,e,t){var r=t(1),o=t(3),a=t(16),i=t(115),s=t(154);r({target:"Object",stat:!0,forced:o((function(){i(1)})),sham:!s},{getPrototypeOf:function(n){return i(a(n))}})},function(n,e,t){"use strict";var r,o=t(1),a=t(2),i=t(37).f,s=t(48),l=t(12),c=t(174),d=t(18),p=t(175),u=t(27),m=a("".startsWith),f=a("".slice),h=Math.min,g=p("startsWith");o({target:"String",proto:!0,forced:!!(u||g||(r=i(String.prototype,"startsWith"),!r||r.writable))&&!g},{startsWith:function(n){var e=l(d(this));c(n);var t=s(h(arguments.length>1?arguments[1]:void 0,e.length)),r=l(n);return m?m(e,r,t):f(e,t,t+r.length)===r}})},function(n,e,t){var r=t(0),o=t(139),a=r.TypeError;n.exports=function(n){if(o(n))throw a("The method doesn't accept regular expressions");return n}},function(n,e,t){var r=t(6)("match");n.exports=function(n){var e=/./;try{"/./"[n](e)}catch(t){try{return e[r]=!1,"/./"[n](e)}catch(n){}}return!1}},function(n,e,t){"use strict";var r=t(54).forEach,o=t(50)("forEach");n.exports=o?[].forEach:function(n){return r(this,n,arguments.length>1?arguments[1]:void 0)}},function(n,e,t){var r=t(3);n.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(n,e,t){var r=t(24),o=t(19),a=t(53).f,i=t(119),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(n){return s&&"Window"==r(n)?function(n){try{return a(n)}catch(n){return i(s)}}(n):a(o(n))}},function(n,e,t){var r=t(6);e.f=r},function(n,e,t){var r=t(256),o=t(10),a=t(179),i=t(13).f;n.exports=function(n){var e=r.Symbol||(r.Symbol={});o(e,n)||i(e,n,{value:a.f(n)})}},function(n,e,t){var r=t(1),o=t(257);r({target:"Array",stat:!0,forced:!t(159)((function(n){Array.from(n)}))},{from:o})},function(n,e,t){var r=t(12);n.exports=function(n,e){return void 0===n?arguments.length<2?"":e:r(n)}},function(n,e,t){t(1)({target:"Object",stat:!0,sham:!t(7)},{create:t(35)})},function(n,e,t){"use strict";var r=t(1),o=t(2),a=t(57),i=t(19),s=t(50),l=o([].join),c=a!=Object,d=s("join",",");r({target:"Array",proto:!0,forced:c||!d},{join:function(n){return l(i(this),void 0===n?",":n)}})},function(n,e){n.exports=function(n,e){for(var t=-1,r=e.length,o=n.length;++t<r;)n[o+t]=e[t];return n}},function(n,e){var t="object"==typeof global&&global&&global.Object===Object&&global;n.exports=t},function(n,e,t){var r=t(92),o=t(279),a=t(280),i=t(281),s=t(282),l=t(283);function c(n){var e=this.__data__=new r(n);this.size=e.size}c.prototype.clear=o,c.prototype.delete=a,c.prototype.get=i,c.prototype.has=s,c.prototype.set=l,n.exports=c},function(n,e){n.exports=function(n,e){return n===e||n!=n&&e!=e}},function(n,e,t){var r=t(56),o=t(126);n.exports=function(n){if(!o(n))return!1;var e=r(n);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(n,e){var t=Function.prototype.toString;n.exports=function(n){if(null!=n){try{return t.call(n)}catch(n){}try{return n+""}catch(n){}}return""}},function(n,e,t){var r=t(300),o=t(45);n.exports=function n(e,t,a,i,s){return e===t||(null==e||null==t||!o(e)&&!o(t)?e!=e&&t!=t:r(e,t,a,i,n,s))}},function(n,e,t){var r=t(193),o=t(303),a=t(194);n.exports=function(n,e,t,i,s,l){var c=1&t,d=n.length,p=e.length;if(d!=p&&!(c&&p>d))return!1;var u=l.get(n),m=l.get(e);if(u&&m)return u==e&&m==n;var f=-1,h=!0,g=2&t?new r:void 0;for(l.set(n,e),l.set(e,n);++f<d;){var v=n[f],b=e[f];if(i)var y=c?i(b,v,f,e,n,l):i(v,b,f,n,e,l);if(void 0!==y){if(y)continue;h=!1;break}if(g){if(!o(e,(function(n,e){if(!a(g,e)&&(v===n||s(v,n,t,i,l)))return g.push(e)}))){h=!1;break}}else if(v!==b&&!s(v,b,t,i,l)){h=!1;break}}return l.delete(n),l.delete(e),h}},function(n,e,t){var r=t(127),o=t(301),a=t(302);function i(n){var e=-1,t=null==n?0:n.length;for(this.__data__=new r;++e<t;)this.add(n[e])}i.prototype.add=i.prototype.push=o,i.prototype.has=a,n.exports=i},function(n,e){n.exports=function(n,e){return n.has(e)}},function(n,e,t){var r=t(313),o=t(319),a=t(199);n.exports=function(n){return a(n)?r(n):o(n)}},function(n,e,t){(function(n){var r=t(31),o=t(315),a=e&&!e.nodeType&&e,i=a&&"object"==typeof n&&n&&!n.nodeType&&n,s=i&&i.exports===a?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||o;n.exports=l}).call(this,t(142)(n))},function(n,e){var t=/^(?:0|[1-9]\d*)$/;n.exports=function(n,e){var r=typeof n;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&t.test(n))&&n>-1&&n%1==0&&n<e}},function(n,e,t){var r=t(316),o=t(317),a=t(318),i=a&&a.isTypedArray,s=i?o(i):r;n.exports=s},function(n,e,t){var r=t(189),o=t(129);n.exports=function(n){return null!=n&&o(n.length)&&!r(n)}},function(n,e,t){var r=t(42)(t(31),"Set");n.exports=r},function(n,e,t){var r=t(126);n.exports=function(n){return n==n&&!r(n)}},function(n,e){n.exports=function(n,e){return function(t){return null!=t&&(t[n]===e&&(void 0!==e||n in Object(t)))}}},function(n,e,t){var r=t(204),o=t(96);n.exports=function(n,e){for(var t=0,a=(e=r(e,n)).length;null!=n&&t<a;)n=n[o(e[t++])];return t&&t==a?n:void 0}},function(n,e,t){var r=t(26),o=t(130),a=t(330),i=t(333);n.exports=function(n,e){return r(n)?n:o(n,e)?[n]:a(i(n))}},function(n,e,t){"use strict";var r=t(1),o=t(363).start;r({target:"String",proto:!0,forced:t(365)},{padStart:function(n){return o(this,n,arguments.length>1?arguments[1]:void 0)}})},function(n,e,t){},function(n,e,t){},function(n,e,t){},function(n,e,t){t(1)({target:"Object",stat:!0},{setPrototypeOf:t(63)})},function(n,e,t){var r=t(1),o=t(17),a=t(38),i=t(386),s=t(160),l=t(8),c=t(9),d=t(35),p=t(3),u=o("Reflect","construct"),m=Object.prototype,f=[].push,h=p((function(){function n(){}return!(u((function(){}),[],n)instanceof n)})),g=!p((function(){u((function(){}))})),v=h||g;r({target:"Reflect",stat:!0,forced:v,sham:v},{construct:function(n,e){s(n),l(e);var t=arguments.length<3?n:s(arguments[2]);if(g&&!h)return u(n,e,t);if(n==t){switch(e.length){case 0:return new n;case 1:return new n(e[0]);case 2:return new n(e[0],e[1]);case 3:return new n(e[0],e[1],e[2]);case 4:return new n(e[0],e[1],e[2],e[3])}var r=[null];return a(f,r,e),new(a(i,n,r))}var o=t.prototype,p=d(c(o)?o:m),v=a(n,p,e);return c(v)?v:p}})},function(n,e,t){},function(n,e,t){},function(n,e,t){var r=t(266),o=t(271),a=t(342),i=t(350),s=t(359),l=t(227),c=a((function(n){var e=l(n);return s(e)&&(e=void 0),i(r(n,1,s,!0),o(e,2))}));n.exports=c},function(n,e,t){"use strict";
/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var r=/["'&<>]/;n.exports=function(n){var e,t=""+n,o=r.exec(t);if(!o)return t;var a="",i=0,s=0;for(i=o.index;i<t.length;i++){switch(t.charCodeAt(i)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#39;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}s!==i&&(a+=t.substring(s,i)),s=i+1,a+=e}return s!==i?a+t.substring(s,i):a}},function(n,e,t){"use strict";
/**
 * @file Embedded JavaScript templating engine. {@link http://ejs.co}
 * @author Matthew Eernisse <mde@fleegix.org>
 * @author Tiancheng "Timothy" Gu <timothygu99@gmail.com>
 * @project EJS
 * @license {@link http://www.apache.org/licenses/LICENSE-2.0 Apache License, Version 2.0}
 */var r=t(380),o=t(381),a=t(382),i=!1,s=t(383).version,l=["delimiter","scope","context","debug","compileDebug","client","_with","rmWhitespace","strict","filename","async"],c=l.concat("cache"),d=/^\uFEFF/;function p(n,t){var o,a,i=t.views,s=/^[A-Za-z]+:\\|^\//.exec(n);if(s&&s.length)o=e.resolveInclude(n.replace(/^\/*/,""),t.root||"/",!0);else if(t.filename&&(a=e.resolveInclude(n,t.filename),r.existsSync(a)&&(o=a)),o||Array.isArray(i)&&i.some((function(t){return a=e.resolveInclude(n,t,!0),r.existsSync(a)}))&&(o=a),!o)throw new Error('Could not find the include file "'+t.escapeFunction(n)+'"');return o}function u(n,t){var r,o=n.filename,a=arguments.length>1;if(n.cache){if(!o)throw new Error("cache option requires a filename");if(r=e.cache.get(o))return r;a||(t=f(o).toString().replace(d,""))}else if(!a){if(!o)throw new Error("Internal EJS error: no file name or template provided");t=f(o).toString().replace(d,"")}return r=e.compile(t,n),n.cache&&e.cache.set(o,r),r}function m(n,t,r){var o;if(!r){if("function"==typeof e.promiseImpl)return new e.promiseImpl((function(e,r){try{e(o=u(n)(t))}catch(n){r(n)}}));throw new Error("Please provide a callback function")}try{o=u(n)(t)}catch(n){return r(n)}r(null,o)}function f(n){return e.fileLoader(n)}function h(n,e,t,r,o){var a=e.split("\n"),i=Math.max(r-3,0),s=Math.min(a.length,r+3),l=o(t),c=a.slice(i,s).map((function(n,e){var t=e+i+1;return(t==r?" >> ":"    ")+t+"| "+n})).join("\n");throw n.path=l,n.message=(l||"ejs")+":"+r+"\n"+c+"\n\n"+n.message,n}function g(n){return n.replace(/;(\s*$)/,"$1")}function v(n,t){t=t||{};var r={};this.templateText=n,this.mode=null,this.truncate=!1,this.currentLine=1,this.source="",this.dependencies=[],r.client=t.client||!1,r.escapeFunction=t.escape||t.escapeFunction||a.escapeXML,r.compileDebug=!1!==t.compileDebug,r.debug=!!t.debug,r.filename=t.filename,r.openDelimiter=t.openDelimiter||e.openDelimiter||"<",r.closeDelimiter=t.closeDelimiter||e.closeDelimiter||">",r.delimiter=t.delimiter||e.delimiter||"%",r.strict=t.strict||!1,r.context=t.context,r.cache=t.cache||!1,r.rmWhitespace=t.rmWhitespace,r.root=t.root,r.outputFunctionName=t.outputFunctionName,r.localsName=t.localsName||e.localsName||"locals",r.views=t.views,r.async=t.async,r.destructuredLocals=t.destructuredLocals,r.legacyInclude=void 0===t.legacyInclude||!!t.legacyInclude,r.strict?r._with=!1:r._with=void 0===t._with||t._with,this.opts=r,this.regex=this.createRegex()}e.cache=a.cache,e.fileLoader=r.readFileSync,e.localsName="locals",e.promiseImpl=new Function("return this;")().Promise,e.resolveInclude=function(n,e,t){var r=o.dirname,a=o.extname,i=(0,o.resolve)(t?e:r(e),n);return a(n)||(i+=".ejs"),i},e.compile=function(n,e){return e&&e.scope&&(i||(console.warn("`scope` option is deprecated and will be removed in EJS 3"),i=!0),e.context||(e.context=e.scope),delete e.scope),new v(n,e).compile()},e.render=function(n,e,t){var r=e||{},o=t||{};return 2==arguments.length&&a.shallowCopyFromList(o,r,l),u(o,n)(r)},e.renderFile=function(){var n,e,t,r=Array.prototype.slice.call(arguments),o=r.shift(),i={filename:o};return"function"==typeof arguments[arguments.length-1]&&(n=r.pop()),r.length?(e=r.shift(),r.length?a.shallowCopy(i,r.pop()):(e.settings&&(e.settings.views&&(i.views=e.settings.views),e.settings["view cache"]&&(i.cache=!0),(t=e.settings["view options"])&&a.shallowCopy(i,t)),a.shallowCopyFromList(i,e,c)),i.filename=o):e={},m(i,e,n)},e.Template=v,e.clearCache=function(){e.cache.reset()},v.modes={EVAL:"eval",ESCAPED:"escaped",RAW:"raw",COMMENT:"comment",LITERAL:"literal"},v.prototype={createRegex:function(){var n="(<%%|%%>|<%=|<%-|<%_|<%#|<%|%>|-%>|_%>)",e=a.escapeRegExpChars(this.opts.delimiter),t=a.escapeRegExpChars(this.opts.openDelimiter),r=a.escapeRegExpChars(this.opts.closeDelimiter);return n=n.replace(/%/g,e).replace(/</g,t).replace(/>/g,r),new RegExp(n)},compile:function(){var n,e,t,r=this.opts,i="",s="",l=r.escapeFunction;if(!this.source){if(this.generateSource(),i+='  var __output = "";\n  function __append(s) { if (s !== undefined && s !== null) __output += s }\n',r.outputFunctionName&&(i+="  var "+r.outputFunctionName+" = __append;\n"),r.destructuredLocals&&r.destructuredLocals.length){for(var c="  var __locals = ("+r.localsName+" || {}),\n",d=0;d<r.destructuredLocals.length;d++){var m=r.destructuredLocals[d];d>0&&(c+=",\n  "),c+=m+" = __locals."+m}i+=c+";\n"}!1!==r._with&&(i+="  with ("+r.localsName+" || {}) {\n",s+="  }\n"),s+="  return __output;\n",this.source=i+this.source+s}n=r.compileDebug?"var __line = 1\n  , __lines = "+JSON.stringify(this.templateText)+"\n  , __filename = "+(r.filename?JSON.stringify(r.filename):"undefined")+";\ntry {\n"+this.source+"} catch (e) {\n  rethrow(e, __lines, __filename, __line, escapeFn);\n}\n":this.source,r.client&&(n="escapeFn = escapeFn || "+l.toString()+";\n"+n,r.compileDebug&&(n="rethrow = rethrow || "+h.toString()+";\n"+n)),r.strict&&(n='"use strict";\n'+n),r.debug&&console.log(n),r.compileDebug&&r.filename&&(n=n+"\n//# sourceURL="+r.filename+"\n");try{if(r.async)try{t=new Function("return (async function(){}).constructor;")()}catch(n){throw n instanceof SyntaxError?new Error("This environment does not support async/await"):n}else t=Function;e=new t(r.localsName+", escapeFn, include, rethrow",n)}catch(n){throw n instanceof SyntaxError&&(r.filename&&(n.message+=" in "+r.filename),n.message+=" while compiling ejs\n\n",n.message+="If the above error is not helpful, you may want to try EJS-Lint:\n",n.message+="https://github.com/RyanZim/EJS-Lint",r.async||(n.message+="\n",n.message+="Or, if you meant to create an async function, pass `async: true` as an option.")),n}var f=r.client?e:function(n){return e.apply(r.context,[n||{},l,function(e,t){var o=a.shallowCopy({},n);return t&&(o=a.shallowCopy(o,t)),function(n,e){var t=a.shallowCopy({},e);return t.filename=p(n,t),u(t)}(e,r)(o)},h])};if(f.dependencies=this.dependencies,r.filename&&"function"==typeof Object.defineProperty){var g=r.filename,v=o.basename(g,o.extname(g));try{Object.defineProperty(f,"name",{value:v,writable:!1,enumerable:!1,configurable:!0})}catch(n){}}return f},generateSource:function(){var n=this.opts;n.rmWhitespace&&(this.templateText=this.templateText.replace(/[\r\n]+/g,"\n").replace(/^\s+|\s+$/gm,"")),this.templateText=this.templateText.replace(/[ \t]*<%_/gm,"<%_").replace(/_%>[ \t]*/gm,"_%>");var t=this,r=this.parseTemplateText(),o=this.opts.delimiter,i=this.opts.openDelimiter,s=this.opts.closeDelimiter;r&&r.length&&r.forEach((function(l,c){var u,m,h,g,b,y;if(0===l.indexOf(i+o)&&0!==l.indexOf(i+o+o)&&(m=r[c+2])!=o+s&&m!="-"+o+s&&m!="_"+o+s)throw new Error('Could not find matching close tag for "'+l+'".');if(n.legacyInclude&&(h=l.match(/^\s*include\s+(\S+)/))&&(u=r[c-1])&&(u==i+o||u==i+o+"-"||u==i+o+"_"))return g=a.shallowCopy({},t.opts),b=function(n,e){var t,r,o=a.shallowCopy({},e);r=f(t=p(n,o)).toString().replace(d,""),o.filename=t;var i=new v(r,o);return i.generateSource(),{source:i.source,filename:t,template:r}}(h[1],g),y=t.opts.compileDebug?"    ; (function(){\n      var __line = 1\n      , __lines = "+JSON.stringify(b.template)+"\n      , __filename = "+JSON.stringify(b.filename)+";\n      try {\n"+b.source+"      } catch (e) {\n        rethrow(e, __lines, __filename, __line, escapeFn);\n      }\n    ; }).call(this)\n":"    ; (function(){\n"+b.source+"    ; }).call(this)\n",t.source+=y,void t.dependencies.push(e.resolveInclude(h[1],g.filename));t.scanLine(l)}))},parseTemplateText:function(){for(var n,e=this.templateText,t=this.regex,r=t.exec(e),o=[];r;)0!==(n=r.index)&&(o.push(e.substring(0,n)),e=e.slice(n)),o.push(r[0]),e=e.slice(r[0].length),r=t.exec(e);return e&&o.push(e),o},_addOutput:function(n){if(this.truncate&&(n=n.replace(/^(?:\r\n|\r|\n)/,""),this.truncate=!1),!n)return n;n=(n=(n=(n=n.replace(/\\/g,"\\\\")).replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace(/"/g,'\\"'),this.source+='    ; __append("'+n+'")\n'},scanLine:function(n){var e,t=this.opts.delimiter,r=this.opts.openDelimiter,o=this.opts.closeDelimiter;switch(e=n.split("\n").length-1,n){case r+t:case r+t+"_":this.mode=v.modes.EVAL;break;case r+t+"=":this.mode=v.modes.ESCAPED;break;case r+t+"-":this.mode=v.modes.RAW;break;case r+t+"#":this.mode=v.modes.COMMENT;break;case r+t+t:this.mode=v.modes.LITERAL,this.source+='    ; __append("'+n.replace(r+t+t,r+t)+'")\n';break;case t+t+o:this.mode=v.modes.LITERAL,this.source+='    ; __append("'+n.replace(t+t+o,t+o)+'")\n';break;case t+o:case"-"+t+o:case"_"+t+o:this.mode==v.modes.LITERAL&&this._addOutput(n),this.mode=null,this.truncate=0===n.indexOf("-")||0===n.indexOf("_");break;default:if(this.mode){switch(this.mode){case v.modes.EVAL:case v.modes.ESCAPED:case v.modes.RAW:n.lastIndexOf("//")>n.lastIndexOf("\n")&&(n+="\n")}switch(this.mode){case v.modes.EVAL:this.source+="    ; "+n+"\n";break;case v.modes.ESCAPED:this.source+="    ; __append(escapeFn("+g(n)+"))\n";break;case v.modes.RAW:this.source+="    ; __append("+g(n)+")\n";break;case v.modes.COMMENT:break;case v.modes.LITERAL:this._addOutput(n)}}else this._addOutput(n)}this.opts.compileDebug&&e&&(this.currentLine+=e,this.source+="    ; __line = "+this.currentLine+"\n")}},e.escapeXML=a.escapeXML,e.__express=e.renderFile,e.VERSION=s,e.name="ejs","undefined"!=typeof window&&(window.ejs=e)},function(n,e,t){"use strict";t.r(e);var r={name:"CodeBlock",props:{title:{type:String,required:!0},active:{type:Boolean,default:!1}}},o=(t(366),t(15)),a=Object(o.a)(r,(function(){var n=this.$createElement;return(this._self._c||n)("div",{staticClass:"theme-code-block",class:{"theme-code-block__active":this.active}},[this._t("default")],2)}),[],!1,null,"4f1e9d0c",null);e.default=a.exports},function(n,e,t){"use strict";t.r(e);t(32),t(4),t(33),t(44),t(23);var r={name:"CodeGroup",data:function(){return{codeTabs:[],activeCodeTabIndex:-1}},watch:{activeCodeTabIndex:function(n){this.codeTabs.forEach((function(n){n.elm.classList.remove("theme-code-block__active")})),this.codeTabs[n].elm.classList.add("theme-code-block__active")}},mounted:function(){var n=this;this.codeTabs=(this.$slots.default||[]).filter((function(n){return Boolean(n.componentOptions)})).map((function(e,t){return""===e.componentOptions.propsData.active&&(n.activeCodeTabIndex=t),{title:e.componentOptions.propsData.title,elm:e.elm}})),-1===this.activeCodeTabIndex&&this.codeTabs.length>0&&(this.activeCodeTabIndex=0)},methods:{changeCodeTab:function(n){this.activeCodeTabIndex=n}}},o=(t(367),t(15)),a=Object(o.a)(r,(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"theme-code-group"},[t("div",{staticClass:"theme-code-group__nav"},[t("ul",{staticClass:"theme-code-group__ul"},n._l(n.codeTabs,(function(e,r){return t("li",{key:e.title,staticClass:"theme-code-group__li"},[t("button",{staticClass:"theme-code-group__nav-tab",class:{"theme-code-group__nav-tab-active":r===n.activeCodeTabIndex},on:{click:function(e){return n.changeCodeTab(r)}}},[n._v("\n            "+n._s(e.title)+"\n          ")])])})),0)]),n._v(" "),n._t("default"),n._v(" "),n.codeTabs.length<1?t("pre",{staticClass:"pre-blank"},[n._v("// Make sure to add code blocks to your code group")]):n._e()],2)}),[],!1,null,"2f5f1757",null);e.default=a.exports},function(n,e,t){"use strict";var r=t(7),o=t(0),a=t(2),i=t(102),s=t(14),l=t(10),c=t(141),d=t(34),p=t(81),u=t(149),m=t(3),f=t(53).f,h=t(37).f,g=t(13).f,v=t(362),b=t(221).trim,y=o.Number,x=y.prototype,_=o.TypeError,k=a("".slice),w=a("".charCodeAt),T=function(n){var e=u(n,"number");return"bigint"==typeof e?e:S(e)},S=function(n){var e,t,r,o,a,i,s,l,c=u(n,"number");if(p(c))throw _("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=b(c),43===(e=w(c,0))||45===e){if(88===(t=w(c,2))||120===t)return NaN}else if(48===e){switch(w(c,1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+c}for(i=(a=k(c,2)).length,s=0;s<i;s++)if((l=w(a,s))<48||l>o)return NaN;return parseInt(a,r)}return+c};if(i("Number",!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var P,C=function(n){var e=arguments.length<1?0:y(T(n)),t=this;return d(x,t)&&m((function(){v(t)}))?c(Object(e),t,C):e},I=r?f(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),E=0;I.length>E;E++)l(y,P=I[E])&&!l(C,P)&&g(C,P,h(y,P));C.prototype=x,x.constructor=C,s(o,"Number",C)}},function(n,e,t){"use strict";var r=t(11),o=t(121),a=t(8),i=t(48),s=t(12),l=t(18),c=t(47),d=t(122),p=t(123);o("match",(function(n,e,t){return[function(e){var t=l(this),o=null==e?void 0:c(e,n);return o?r(o,e,t):new RegExp(e)[n](s(t))},function(n){var r=a(this),o=s(n),l=t(e,r,o);if(l.done)return l.value;if(!r.global)return p(r,o);var c=r.unicode;r.lastIndex=0;for(var u,m=[],f=0;null!==(u=p(r,o));){var h=s(u[0]);m[f]=h,""===h&&(r.lastIndex=d(o,i(r.lastIndex),c)),f++}return 0===f?null:m}]}))},function(n,e,t){var r=t(3),o=t(0).RegExp;n.exports=r((function(){var n=o(".","s");return!(n.dotAll&&n.exec("\n")&&"s"===n.flags)}))},function(n,e,t){var r=t(2),o=t(18),a=t(12),i=t(222),s=r("".replace),l="["+i+"]",c=RegExp("^"+l+l+"*"),d=RegExp(l+l+"*$"),p=function(n){return function(e){var t=a(o(e));return 1&n&&(t=s(t,c,"")),2&n&&(t=s(t,d,"")),t}};n.exports={start:p(1),end:p(2),trim:p(3)}},function(n,e){n.exports="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff"},function(n,e,t){"use strict";var r=t(17),o=t(13),a=t(6),i=t(7),s=a("species");n.exports=function(n){var e=r(n),t=o.f;i&&e&&!e[s]&&t(e,s,{configurable:!0,get:function(){return this}})}},function(n,e,t){var r=t(3),o=t(0).RegExp;n.exports=r((function(){var n=o("(?<a>b)","g");return"b"!==n.exec("b").groups.a||"bc"!=="b".replace(n,"$<a>c")}))},function(n,e,t){"use strict";var r=t(1),o=t(108).includes,a=t(138);r({target:"Array",proto:!0},{includes:function(n){return o(this,n,arguments.length>1?arguments[1]:void 0)}}),a("includes")},function(n,e,t){"use strict";var r=t(1),o=t(2),a=t(174),i=t(18),s=t(12),l=t(175),c=o("".indexOf);r({target:"String",proto:!0,forced:!l("includes")},{includes:function(n){return!!~c(s(i(this)),s(a(n)),arguments.length>1?arguments[1]:void 0)}})},function(n,e){n.exports=function(n){var e=null==n?0:n.length;return e?n[e-1]:void 0}},function(n,e,t){var r=t(0),o=t(7),a=t(103).MISSED_STICKY,i=t(24),s=t(13).f,l=t(40).get,c=RegExp.prototype,d=r.TypeError;o&&a&&s(c,"sticky",{configurable:!0,get:function(){if(this!==c){if("RegExp"===i(this))return!!l(this).sticky;throw d("Incompatible receiver, RegExp required")}}})},function(n,e,t){n.exports=t(389)},function(n,e,t){var r=t(0),o=t(11),a=t(5),i=t(9),s=r.TypeError;n.exports=function(n,e){var t,r;if("string"===e&&a(t=n.toString)&&!i(r=o(t,n)))return r;if(a(t=n.valueOf)&&!i(r=o(t,n)))return r;if("string"!==e&&a(t=n.toString)&&!i(r=o(t,n)))return r;throw s("Can't convert object to primitive value")}},function(n,e,t){var r=t(0),o=t(5),a=t(85),i=r.WeakMap;n.exports=o(i)&&/native code/.test(a(i))},function(n,e,t){"use strict";var r=t(153).IteratorPrototype,o=t(35),a=t(49),i=t(62),s=t(61),l=function(){return this};n.exports=function(n,e,t,c){var d=e+" Iterator";return n.prototype=o(r,{next:a(+!c,t)}),i(n,d,!1,!0),s[d]=l,n}},function(n,e,t){var r=t(0),o=t(5),a=r.String,i=r.TypeError;n.exports=function(n){if("object"==typeof n||o(n))return n;throw i("Can't set "+a(n)+" as a prototype")}},function(n,e,t){"use strict";var r,o,a,i,s=t(1),l=t(27),c=t(0),d=t(17),p=t(11),u=t(155),m=t(14),f=t(235),h=t(63),g=t(62),v=t(223),b=t(36),y=t(5),x=t(9),_=t(236),k=t(85),w=t(237),T=t(159),S=t(118),P=t(161).set,C=t(238),I=t(164),E=t(241),A=t(165),D=t(242),O=t(243),L=t(40),j=t(102),R=t(6),z=t(244),M=t(88),N=t(46),F=R("species"),q="Promise",U=L.getterFor(q),B=L.set,G=L.getterFor(q),H=u&&u.prototype,V=u,$=H,W=c.TypeError,K=c.document,X=c.process,Q=A.f,Y=Q,Z=!!(K&&K.createEvent&&c.dispatchEvent),J=y(c.PromiseRejectionEvent),nn=!1,en=j(q,(function(){var n=k(V),e=n!==String(V);if(!e&&66===N)return!0;if(l&&!$.finally)return!0;if(N>=51&&/native code/.test(n))return!1;var t=new V((function(n){n(1)})),r=function(n){n((function(){}),(function(){}))};return(t.constructor={})[F]=r,!(nn=t.then((function(){}))instanceof r)||!e&&z&&!J})),tn=en||!T((function(n){V.all(n).catch((function(){}))})),rn=function(n){var e;return!(!x(n)||!y(e=n.then))&&e},on=function(n,e){var t,r,o,a=e.value,i=1==e.state,s=i?n.ok:n.fail,l=n.resolve,c=n.reject,d=n.domain;try{s?(i||(2===e.rejection&&dn(e),e.rejection=1),!0===s?t=a:(d&&d.enter(),t=s(a),d&&(d.exit(),o=!0)),t===n.promise?c(W("Promise-chain cycle")):(r=rn(t))?p(r,t,l,c):l(t)):c(a)}catch(n){d&&!o&&d.exit(),c(n)}},an=function(n,e){n.notified||(n.notified=!0,C((function(){for(var t,r=n.reactions;t=r.get();)on(t,n);n.notified=!1,e&&!n.rejection&&ln(n)})))},sn=function(n,e,t){var r,o;Z?((r=K.createEvent("Event")).promise=e,r.reason=t,r.initEvent(n,!1,!0),c.dispatchEvent(r)):r={promise:e,reason:t},!J&&(o=c["on"+n])?o(r):"unhandledrejection"===n&&E("Unhandled promise rejection",t)},ln=function(n){p(P,c,(function(){var e,t=n.facade,r=n.value;if(cn(n)&&(e=D((function(){M?X.emit("unhandledRejection",r,t):sn("unhandledrejection",t,r)})),n.rejection=M||cn(n)?2:1,e.error))throw e.value}))},cn=function(n){return 1!==n.rejection&&!n.parent},dn=function(n){p(P,c,(function(){var e=n.facade;M?X.emit("rejectionHandled",e):sn("rejectionhandled",e,n.value)}))},pn=function(n,e,t){return function(r){n(e,r,t)}},un=function(n,e,t){n.done||(n.done=!0,t&&(n=t),n.value=e,n.state=2,an(n,!0))},mn=function(n,e,t){if(!n.done){n.done=!0,t&&(n=t);try{if(n.facade===e)throw W("Promise can't be resolved itself");var r=rn(e);r?C((function(){var t={done:!1};try{p(r,e,pn(mn,t,n),pn(un,t,n))}catch(e){un(t,e,n)}})):(n.value=e,n.state=1,an(n,!1))}catch(e){un({done:!1},e,n)}}};if(en&&($=(V=function(n){_(this,$),b(n),p(r,this);var e=U(this);try{n(pn(mn,e),pn(un,e))}catch(n){un(e,n)}}).prototype,(r=function(n){B(this,{type:q,done:!1,notified:!1,parent:!1,reactions:new O,rejection:!1,state:0,value:void 0})}).prototype=f($,{then:function(n,e){var t=G(this),r=Q(S(this,V));return t.parent=!0,r.ok=!y(n)||n,r.fail=y(e)&&e,r.domain=M?X.domain:void 0,0==t.state?t.reactions.add(r):C((function(){on(r,t)})),r.promise},catch:function(n){return this.then(void 0,n)}}),o=function(){var n=new r,e=U(n);this.promise=n,this.resolve=pn(mn,e),this.reject=pn(un,e)},A.f=Q=function(n){return n===V||n===a?new o(n):Y(n)},!l&&y(u)&&H!==Object.prototype)){i=H.then,nn||(m(H,"then",(function(n,e){var t=this;return new V((function(n,e){p(i,t,n,e)})).then(n,e)}),{unsafe:!0}),m(H,"catch",$.catch,{unsafe:!0}));try{delete H.constructor}catch(n){}h&&h(H,$)}s({global:!0,wrap:!0,forced:en},{Promise:V}),g(V,q,!1,!0),v(q),a=d(q),s({target:q,stat:!0,forced:en},{reject:function(n){var e=Q(this);return p(e.reject,void 0,n),e.promise}}),s({target:q,stat:!0,forced:l||en},{resolve:function(n){return I(l&&this===a?V:this,n)}}),s({target:q,stat:!0,forced:tn},{all:function(n){var e=this,t=Q(e),r=t.resolve,o=t.reject,a=D((function(){var t=b(e.resolve),a=[],i=0,s=1;w(n,(function(n){var l=i++,c=!1;s++,p(t,e,n).then((function(n){c||(c=!0,a[l]=n,--s||r(a))}),o)})),--s||r(a)}));return a.error&&o(a.value),t.promise},race:function(n){var e=this,t=Q(e),r=t.reject,o=D((function(){var o=b(e.resolve);w(n,(function(n){p(o,e,n).then(t.resolve,r)}))}));return o.error&&r(o.value),t.promise}})},function(n,e,t){var r=t(14);n.exports=function(n,e,t){for(var o in e)r(n,o,e[o],t);return n}},function(n,e,t){var r=t(0),o=t(34),a=r.TypeError;n.exports=function(n,e){if(o(e,n))return n;throw a("Incorrect invocation")}},function(n,e,t){var r=t(0),o=t(64),a=t(11),i=t(8),s=t(82),l=t(156),c=t(29),d=t(34),p=t(157),u=t(116),m=t(158),f=r.TypeError,h=function(n,e){this.stopped=n,this.result=e},g=h.prototype;n.exports=function(n,e,t){var r,v,b,y,x,_,k,w=t&&t.that,T=!(!t||!t.AS_ENTRIES),S=!(!t||!t.IS_ITERATOR),P=!(!t||!t.INTERRUPTED),C=o(e,w),I=function(n){return r&&m(r,"normal",n),new h(!0,n)},E=function(n){return T?(i(n),P?C(n[0],n[1],I):C(n[0],n[1])):P?C(n,I):C(n)};if(S)r=n;else{if(!(v=u(n)))throw f(s(n)+" is not iterable");if(l(v)){for(b=0,y=c(n);y>b;b++)if((x=E(n[b]))&&d(g,x))return x;return new h(!1)}r=p(n,v)}for(_=r.next;!(k=a(_,r)).done;){try{x=E(k.value)}catch(n){m(r,"throw",n)}if("object"==typeof x&&x&&d(g,x))return x}return new h(!1)}},function(n,e,t){var r,o,a,i,s,l,c,d,p=t(0),u=t(64),m=t(37).f,f=t(161).set,h=t(163),g=t(239),v=t(240),b=t(88),y=p.MutationObserver||p.WebKitMutationObserver,x=p.document,_=p.process,k=p.Promise,w=m(p,"queueMicrotask"),T=w&&w.value;T||(r=function(){var n,e;for(b&&(n=_.domain)&&n.exit();o;){e=o.fn,o=o.next;try{e()}catch(n){throw o?i():a=void 0,n}}a=void 0,n&&n.enter()},h||b||v||!y||!x?!g&&k&&k.resolve?((c=k.resolve(void 0)).constructor=k,d=u(c.then,c),i=function(){d(r)}):b?i=function(){_.nextTick(r)}:(f=u(f,p),i=function(){f(r)}):(s=!0,l=x.createTextNode(""),new y(r).observe(l,{characterData:!0}),i=function(){l.data=s=!s})),n.exports=T||function(n){var e={fn:n,next:void 0};a&&(a.next=e),o||(o=e,i()),a=e}},function(n,e,t){var r=t(28),o=t(0);n.exports=/ipad|iphone|ipod/i.test(r)&&void 0!==o.Pebble},function(n,e,t){var r=t(28);n.exports=/web0s(?!.*chrome)/i.test(r)},function(n,e,t){var r=t(0);n.exports=function(n,e){var t=r.console;t&&t.error&&(1==arguments.length?t.error(n):t.error(n,e))}},function(n,e){n.exports=function(n){try{return{error:!1,value:n()}}catch(n){return{error:!0,value:n}}}},function(n,e){var t=function(){this.head=null,this.tail=null};t.prototype={add:function(n){var e={item:n,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var n=this.head;if(n)return this.head=n.next,this.tail===n&&(this.tail=null),n.item}},n.exports=t},function(n,e){n.exports="object"==typeof window},function(n,e,t){var r=t(1),o=t(246);r({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},function(n,e,t){"use strict";var r=t(7),o=t(2),a=t(11),i=t(3),s=t(83),l=t(114),c=t(111),d=t(16),p=t(57),u=Object.assign,m=Object.defineProperty,f=o([].concat);n.exports=!u||i((function(){if(r&&1!==u({b:1},u(m({},"a",{enumerable:!0,get:function(){m(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var n={},e={},t=Symbol();return n[t]=7,"abcdefghijklmnopqrst".split("").forEach((function(n){e[n]=n})),7!=u({},n)[t]||"abcdefghijklmnopqrst"!=s(u({},e)).join("")}))?function(n,e){for(var t=d(n),o=arguments.length,i=1,u=l.f,m=c.f;o>i;)for(var h,g=p(arguments[i++]),v=u?f(s(g),u(g)):s(g),b=v.length,y=0;b>y;)h=v[y++],r&&!a(m,g,h)||(t[h]=g[h]);return t}:u},function(n,e,t){"use strict";var r=t(1),o=t(27),a=t(155),i=t(3),s=t(17),l=t(5),c=t(118),d=t(164),p=t(14);if(r({target:"Promise",proto:!0,real:!0,forced:!!a&&i((function(){a.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(n){var e=c(this,s("Promise")),t=l(n);return this.then(t?function(t){return d(e,n()).then((function(){return t}))}:n,t?function(t){return d(e,n()).then((function(){throw t}))}:n)}}),!o&&l(a)){var u=s("Promise").prototype.finally;a.prototype.finally!==u&&p(a.prototype,"finally",u,{unsafe:!0})}},function(n,e,t){"use strict";var r=t(117),o=t(86);n.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},function(n,e,t){var r=t(0),o=t(66),a=t(87),i=t(9),s=t(6)("species"),l=r.Array;n.exports=function(n){var e;return o(n)&&(e=n.constructor,(a(e)&&(e===l||o(e.prototype))||i(e)&&null===(e=e[s]))&&(e=void 0)),void 0===e?l:e}},function(n,e,t){"use strict";var r=t(1),o=t(251).left,a=t(50),i=t(46),s=t(88);r({target:"Array",proto:!0,forced:!a("reduce")||!s&&i>79&&i<83},{reduce:function(n){var e=arguments.length;return o(this,n,e,e>1?arguments[1]:void 0)}})},function(n,e,t){var r=t(0),o=t(36),a=t(16),i=t(57),s=t(29),l=r.TypeError,c=function(n){return function(e,t,r,c){o(t);var d=a(e),p=i(d),u=s(d),m=n?u-1:0,f=n?-1:1;if(r<2)for(;;){if(m in p){c=p[m],m+=f;break}if(m+=f,n?m<0:u<=m)throw l("Reduce of empty array with no initial value")}for(;n?m>=0:u>m;m+=f)m in p&&(c=t(c,p[m],m,d));return c}};n.exports={left:c(!1),right:c(!0)}},function(n,e,t){var r=t(1),o=t(177),a=t(3),i=t(9),s=t(253).onFreeze,l=Object.freeze;r({target:"Object",stat:!0,forced:a((function(){l(1)})),sham:!o},{freeze:function(n){return l&&i(n)?l(s(n)):n}})},function(n,e,t){var r=t(1),o=t(2),a=t(60),i=t(9),s=t(10),l=t(13).f,c=t(53),d=t(178),p=t(254),u=t(78),m=t(177),f=!1,h=u("meta"),g=0,v=function(n){l(n,h,{value:{objectID:"O"+g++,weakData:{}}})},b=n.exports={enable:function(){b.enable=function(){},f=!0;var n=c.f,e=o([].splice),t={};t[h]=1,n(t).length&&(c.f=function(t){for(var r=n(t),o=0,a=r.length;o<a;o++)if(r[o]===h){e(r,o,1);break}return r},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:d.f}))},fastKey:function(n,e){if(!i(n))return"symbol"==typeof n?n:("string"==typeof n?"S":"P")+n;if(!s(n,h)){if(!p(n))return"F";if(!e)return"E";v(n)}return n[h].objectID},getWeakData:function(n,e){if(!s(n,h)){if(!p(n))return!0;if(!e)return!1;v(n)}return n[h].weakData},onFreeze:function(n){return m&&f&&p(n)&&!s(n,h)&&v(n),n}};a[h]=!0},function(n,e,t){var r=t(3),o=t(9),a=t(24),i=t(255),s=Object.isExtensible,l=r((function(){s(1)}));n.exports=l||i?function(n){return!!o(n)&&((!i||"ArrayBuffer"!=a(n))&&(!s||s(n)))}:s},function(n,e,t){var r=t(3);n.exports=r((function(){if("function"==typeof ArrayBuffer){var n=new ArrayBuffer(8);Object.isExtensible(n)&&Object.defineProperty(n,"a",{value:8})}}))},function(n,e,t){var r=t(0);n.exports=r},function(n,e,t){"use strict";var r=t(0),o=t(64),a=t(11),i=t(16),s=t(258),l=t(156),c=t(87),d=t(29),p=t(67),u=t(157),m=t(116),f=r.Array;n.exports=function(n){var e=i(n),t=c(this),r=arguments.length,h=r>1?arguments[1]:void 0,g=void 0!==h;g&&(h=o(h,r>2?arguments[2]:void 0));var v,b,y,x,_,k,w=m(e),T=0;if(!w||this==f&&l(w))for(v=d(e),b=t?new this(v):f(v);v>T;T++)k=g?h(e[T],T):e[T],p(b,T,k);else for(_=(x=u(e,w)).next,b=t?new this:[];!(y=a(_,x)).done;T++)k=g?s(x,h,[y.value,T],!0):y.value,p(b,T,k);return b.length=T,b}},function(n,e,t){var r=t(8),o=t(158);n.exports=function(n,e,t,a){try{return a?e(r(t)[0],t[1]):e(t)}catch(e){o(n,"throw",e)}}},function(n,e,t){"use strict";var r=t(17),o=t(10),a=t(25),i=t(34),s=t(63),l=t(112),c=t(141),d=t(182),p=t(260),u=t(261),m=t(262),f=t(27);n.exports=function(n,e,t,h){var g=h?2:1,v=n.split("."),b=v[v.length-1],y=r.apply(null,v);if(y){var x=y.prototype;if(!f&&o(x,"cause")&&delete x.cause,!t)return y;var _=r("Error"),k=e((function(n,e){var t=d(h?e:n,void 0),r=h?new y(n):new y;return void 0!==t&&a(r,"message",t),m&&a(r,"stack",u(r.stack,2)),this&&i(x,this)&&c(r,this,k),arguments.length>g&&p(r,arguments[g]),r}));if(k.prototype=x,"Error"!==b&&(s?s(k,_):l(k,_,{name:!0})),l(k,y),!f)try{x.name!==b&&a(x,"name",b),x.constructor=k}catch(n){}return k}}},function(n,e,t){var r=t(9),o=t(25);n.exports=function(n,e){r(e)&&"cause"in e&&o(n,"cause",e.cause)}},function(n,e,t){var r=t(2)("".replace),o=String(Error("zxcasd").stack),a=/\n\s*at [^:]*:[^\n]*/,i=a.test(o);n.exports=function(n,e){if(i&&"string"==typeof n)for(;e--;)n=r(n,a,"");return n}},function(n,e,t){var r=t(3),o=t(49);n.exports=!r((function(){var n=Error("a");return!("stack"in n)||(Object.defineProperty(n,"stack",o(1,7)),7!==n.stack)}))},function(n,e,t){"use strict";var r=t(7),o=t(3),a=t(8),i=t(35),s=t(182),l=Error.prototype.toString,c=o((function(){if(r){var n=i(Object.defineProperty({},"name",{get:function(){return this===n}}));if("true"!==l.call(n))return!0}return"2: 1"!==l.call({message:1,name:2})||"Error"!==l.call({})}));n.exports=c?function(){var n=a(this),e=s(n.name,"Error"),t=s(n.message);return e?t?e+": "+t:e:t}:l},function(n,e,t){var r=t(2),o=t(16),a=Math.floor,i=r("".charAt),s=r("".replace),l=r("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,d=/\$([$&'`]|\d{1,2})/g;n.exports=function(n,e,t,r,p,u){var m=t+n.length,f=r.length,h=d;return void 0!==p&&(p=o(p),h=c),s(u,h,(function(o,s){var c;switch(i(s,0)){case"$":return"$";case"&":return n;case"`":return l(e,0,t);case"'":return l(e,m);case"<":c=p[l(s,1,-1)];break;default:var d=+s;if(0===d)return o;if(d>f){var u=a(d/10);return 0===u?o:u<=f?void 0===r[u-1]?i(s,1):r[u-1]+i(s,1):o}c=r[d-1]}return void 0===c?"":c}))}},function(n,e,t){var r=t(1),o=t(0),a=t(17),i=t(38),s=t(2),l=t(3),c=o.Array,d=a("JSON","stringify"),p=s(/./.exec),u=s("".charAt),m=s("".charCodeAt),f=s("".replace),h=s(1..toString),g=/[\uD800-\uDFFF]/g,v=/^[\uD800-\uDBFF]$/,b=/^[\uDC00-\uDFFF]$/,y=function(n,e,t){var r=u(t,e-1),o=u(t,e+1);return p(v,n)&&!p(b,o)||p(b,n)&&!p(v,r)?"\\u"+h(m(n,0),16):n},x=l((function(){return'"\\udf06\\ud834"'!==d("\udf06\ud834")||'"\\udead"'!==d("\udead")}));d&&r({target:"JSON",stat:!0,forced:x},{stringify:function(n,e,t){for(var r=0,o=arguments.length,a=c(o);r<o;r++)a[r]=arguments[r];var s=i(d,null,a);return"string"==typeof s?f(s,g,y):s}})},function(n,e,t){var r=t(185),o=t(267);n.exports=function n(e,t,a,i,s){var l=-1,c=e.length;for(a||(a=o),s||(s=[]);++l<c;){var d=e[l];t>0&&a(d)?t>1?n(d,t-1,a,i,s):r(s,d):i||(s[s.length]=d)}return s}},function(n,e,t){var r=t(69),o=t(124),a=t(26),i=r?r.isConcatSpreadable:void 0;n.exports=function(n){return a(n)||o(n)||!!(i&&n&&n[i])}},function(n,e,t){var r=t(56),o=t(45);n.exports=function(n){return o(n)&&"[object Arguments]"==r(n)}},function(n,e,t){var r=t(69),o=Object.prototype,a=o.hasOwnProperty,i=o.toString,s=r?r.toStringTag:void 0;n.exports=function(n){var e=a.call(n,s),t=n[s];try{n[s]=void 0;var r=!0}catch(n){}var o=i.call(n);return r&&(e?n[s]=t:delete n[s]),o}},function(n,e){var t=Object.prototype.toString;n.exports=function(n){return t.call(n)}},function(n,e,t){var r=t(272),o=t(328),a=t(132),i=t(26),s=t(339);n.exports=function(n){return"function"==typeof n?n:null==n?a:"object"==typeof n?i(n)?o(n[0],n[1]):r(n):s(n)}},function(n,e,t){var r=t(273),o=t(327),a=t(202);n.exports=function(n){var e=o(n);return 1==e.length&&e[0][2]?a(e[0][0],e[0][1]):function(t){return t===n||r(t,n,e)}}},function(n,e,t){var r=t(187),o=t(191);n.exports=function(n,e,t,a){var i=t.length,s=i,l=!a;if(null==n)return!s;for(n=Object(n);i--;){var c=t[i];if(l&&c[2]?c[1]!==n[c[0]]:!(c[0]in n))return!1}for(;++i<s;){var d=(c=t[i])[0],p=n[d],u=c[1];if(l&&c[2]){if(void 0===p&&!(d in n))return!1}else{var m=new r;if(a)var f=a(p,u,d,n,e,m);if(!(void 0===f?o(u,p,3,a,m):f))return!1}}return!0}},function(n,e){n.exports=function(){this.__data__=[],this.size=0}},function(n,e,t){var r=t(93),o=Array.prototype.splice;n.exports=function(n){var e=this.__data__,t=r(e,n);return!(t<0)&&(t==e.length-1?e.pop():o.call(e,t,1),--this.size,!0)}},function(n,e,t){var r=t(93);n.exports=function(n){var e=this.__data__,t=r(e,n);return t<0?void 0:e[t][1]}},function(n,e,t){var r=t(93);n.exports=function(n){return r(this.__data__,n)>-1}},function(n,e,t){var r=t(93);n.exports=function(n,e){var t=this.__data__,o=r(t,n);return o<0?(++this.size,t.push([n,e])):t[o][1]=e,this}},function(n,e,t){var r=t(92);n.exports=function(){this.__data__=new r,this.size=0}},function(n,e){n.exports=function(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}},function(n,e){n.exports=function(n){return this.__data__.get(n)}},function(n,e){n.exports=function(n){return this.__data__.has(n)}},function(n,e,t){var r=t(92),o=t(125),a=t(127);n.exports=function(n,e){var t=this.__data__;if(t instanceof r){var i=t.__data__;if(!o||i.length<199)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new a(i)}return t.set(n,e),this.size=t.size,this}},function(n,e,t){var r=t(189),o=t(285),a=t(126),i=t(190),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,d=l.toString,p=c.hasOwnProperty,u=RegExp("^"+d.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");n.exports=function(n){return!(!a(n)||o(n))&&(r(n)?u:s).test(i(n))}},function(n,e,t){var r,o=t(286),a=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";n.exports=function(n){return!!a&&a in n}},function(n,e,t){var r=t(31)["__core-js_shared__"];n.exports=r},function(n,e){n.exports=function(n,e){return null==n?void 0:n[e]}},function(n,e,t){var r=t(289),o=t(92),a=t(125);n.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||o),string:new r}}},function(n,e,t){var r=t(290),o=t(291),a=t(292),i=t(293),s=t(294);function l(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=i,l.prototype.set=s,n.exports=l},function(n,e,t){var r=t(94);n.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(n,e){n.exports=function(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}},function(n,e,t){var r=t(94),o=Object.prototype.hasOwnProperty;n.exports=function(n){var e=this.__data__;if(r){var t=e[n];return"__lodash_hash_undefined__"===t?void 0:t}return o.call(e,n)?e[n]:void 0}},function(n,e,t){var r=t(94),o=Object.prototype.hasOwnProperty;n.exports=function(n){var e=this.__data__;return r?void 0!==e[n]:o.call(e,n)}},function(n,e,t){var r=t(94);n.exports=function(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(n,e,t){var r=t(95);n.exports=function(n){var e=r(this,n).delete(n);return this.size-=e?1:0,e}},function(n,e){n.exports=function(n){var e=typeof n;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n}},function(n,e,t){var r=t(95);n.exports=function(n){return r(this,n).get(n)}},function(n,e,t){var r=t(95);n.exports=function(n){return r(this,n).has(n)}},function(n,e,t){var r=t(95);n.exports=function(n,e){var t=r(this,n),o=t.size;return t.set(n,e),this.size+=t.size==o?0:1,this}},function(n,e,t){var r=t(187),o=t(192),a=t(304),i=t(307),s=t(323),l=t(26),c=t(196),d=t(198),p="[object Object]",u=Object.prototype.hasOwnProperty;n.exports=function(n,e,t,m,f,h){var g=l(n),v=l(e),b=g?"[object Array]":s(n),y=v?"[object Array]":s(e),x=(b="[object Arguments]"==b?p:b)==p,_=(y="[object Arguments]"==y?p:y)==p,k=b==y;if(k&&c(n)){if(!c(e))return!1;g=!0,x=!1}if(k&&!x)return h||(h=new r),g||d(n)?o(n,e,t,m,f,h):a(n,e,b,t,m,f,h);if(!(1&t)){var w=x&&u.call(n,"__wrapped__"),T=_&&u.call(e,"__wrapped__");if(w||T){var S=w?n.value():n,P=T?e.value():e;return h||(h=new r),f(S,P,t,m,h)}}return!!k&&(h||(h=new r),i(n,e,t,m,f,h))}},function(n,e){n.exports=function(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this}},function(n,e){n.exports=function(n){return this.__data__.has(n)}},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}},function(n,e,t){var r=t(69),o=t(305),a=t(188),i=t(192),s=t(306),l=t(128),c=r?r.prototype:void 0,d=c?c.valueOf:void 0;n.exports=function(n,e,t,r,c,p,u){switch(t){case"[object DataView]":if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=e.byteLength||!p(new o(n),new o(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+n,+e);case"[object Error]":return n.name==e.name&&n.message==e.message;case"[object RegExp]":case"[object String]":return n==e+"";case"[object Map]":var m=s;case"[object Set]":var f=1&r;if(m||(m=l),n.size!=e.size&&!f)return!1;var h=u.get(n);if(h)return h==e;r|=2,u.set(n,e);var g=i(m(n),m(e),r,c,p,u);return u.delete(n),g;case"[object Symbol]":if(d)return d.call(n)==d.call(e)}return!1}},function(n,e,t){var r=t(31).Uint8Array;n.exports=r},function(n,e){n.exports=function(n){var e=-1,t=Array(n.size);return n.forEach((function(n,r){t[++e]=[r,n]})),t}},function(n,e,t){var r=t(308),o=Object.prototype.hasOwnProperty;n.exports=function(n,e,t,a,i,s){var l=1&t,c=r(n),d=c.length;if(d!=r(e).length&&!l)return!1;for(var p=d;p--;){var u=c[p];if(!(l?u in e:o.call(e,u)))return!1}var m=s.get(n),f=s.get(e);if(m&&f)return m==e&&f==n;var h=!0;s.set(n,e),s.set(e,n);for(var g=l;++p<d;){var v=n[u=c[p]],b=e[u];if(a)var y=l?a(b,v,u,e,n,s):a(v,b,u,n,e,s);if(!(void 0===y?v===b||i(v,b,t,a,s):y)){h=!1;break}g||(g="constructor"==u)}if(h&&!g){var x=n.constructor,_=e.constructor;x==_||!("constructor"in n)||!("constructor"in e)||"function"==typeof x&&x instanceof x&&"function"==typeof _&&_ instanceof _||(h=!1)}return s.delete(n),s.delete(e),h}},function(n,e,t){var r=t(309),o=t(310),a=t(195);n.exports=function(n){return r(n,a,o)}},function(n,e,t){var r=t(185),o=t(26);n.exports=function(n,e,t){var a=e(n);return o(n)?a:r(a,t(n))}},function(n,e,t){var r=t(311),o=t(312),a=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(n){return null==n?[]:(n=Object(n),r(i(n),(function(e){return a.call(n,e)})))}:o;n.exports=s},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length,o=0,a=[];++t<r;){var i=n[t];e(i,t,n)&&(a[o++]=i)}return a}},function(n,e){n.exports=function(){return[]}},function(n,e,t){var r=t(314),o=t(124),a=t(26),i=t(196),s=t(197),l=t(198),c=Object.prototype.hasOwnProperty;n.exports=function(n,e){var t=a(n),d=!t&&o(n),p=!t&&!d&&i(n),u=!t&&!d&&!p&&l(n),m=t||d||p||u,f=m?r(n.length,String):[],h=f.length;for(var g in n)!e&&!c.call(n,g)||m&&("length"==g||p&&("offset"==g||"parent"==g)||u&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,h))||f.push(g);return f}},function(n,e){n.exports=function(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}},function(n,e){n.exports=function(){return!1}},function(n,e,t){var r=t(56),o=t(129),a=t(45),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,n.exports=function(n){return a(n)&&o(n.length)&&!!i[r(n)]}},function(n,e){n.exports=function(n){return function(e){return n(e)}}},function(n,e,t){(function(n){var r=t(186),o=e&&!e.nodeType&&e,a=o&&"object"==typeof n&&n&&!n.nodeType&&n,i=a&&a.exports===o&&r.process,s=function(){try{var n=a&&a.require&&a.require("util").types;return n||i&&i.binding&&i.binding("util")}catch(n){}}();n.exports=s}).call(this,t(142)(n))},function(n,e,t){var r=t(320),o=t(321),a=Object.prototype.hasOwnProperty;n.exports=function(n){if(!r(n))return o(n);var e=[];for(var t in Object(n))a.call(n,t)&&"constructor"!=t&&e.push(t);return e}},function(n,e){var t=Object.prototype;n.exports=function(n){var e=n&&n.constructor;return n===("function"==typeof e&&e.prototype||t)}},function(n,e,t){var r=t(322)(Object.keys,Object);n.exports=r},function(n,e){n.exports=function(n,e){return function(t){return n(e(t))}}},function(n,e,t){var r=t(324),o=t(125),a=t(325),i=t(200),s=t(326),l=t(56),c=t(190),d=c(r),p=c(o),u=c(a),m=c(i),f=c(s),h=l;(r&&"[object DataView]"!=h(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=h(new o)||a&&"[object Promise]"!=h(a.resolve())||i&&"[object Set]"!=h(new i)||s&&"[object WeakMap]"!=h(new s))&&(h=function(n){var e=l(n),t="[object Object]"==e?n.constructor:void 0,r=t?c(t):"";if(r)switch(r){case d:return"[object DataView]";case p:return"[object Map]";case u:return"[object Promise]";case m:return"[object Set]";case f:return"[object WeakMap]"}return e}),n.exports=h},function(n,e,t){var r=t(42)(t(31),"DataView");n.exports=r},function(n,e,t){var r=t(42)(t(31),"Promise");n.exports=r},function(n,e,t){var r=t(42)(t(31),"WeakMap");n.exports=r},function(n,e,t){var r=t(201),o=t(195);n.exports=function(n){for(var e=o(n),t=e.length;t--;){var a=e[t],i=n[a];e[t]=[a,i,r(i)]}return e}},function(n,e,t){var r=t(191),o=t(329),a=t(336),i=t(130),s=t(201),l=t(202),c=t(96);n.exports=function(n,e){return i(n)&&s(e)?l(c(n),e):function(t){var i=o(t,n);return void 0===i&&i===e?a(t,n):r(e,i,3)}}},function(n,e,t){var r=t(203);n.exports=function(n,e,t){var o=null==n?void 0:r(n,e);return void 0===o?t:o}},function(n,e,t){var r=t(331),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,i=r((function(n){var e=[];return 46===n.charCodeAt(0)&&e.push(""),n.replace(o,(function(n,t,r,o){e.push(r?o.replace(a,"$1"):t||n)})),e}));n.exports=i},function(n,e,t){var r=t(332);n.exports=function(n){var e=r(n,(function(n){return 500===t.size&&t.clear(),n})),t=e.cache;return e}},function(n,e,t){var r=t(127);function o(n,e){if("function"!=typeof n||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var t=function(){var r=arguments,o=e?e.apply(this,r):r[0],a=t.cache;if(a.has(o))return a.get(o);var i=n.apply(this,r);return t.cache=a.set(o,i)||a,i};return t.cache=new(o.Cache||r),t}o.Cache=r,n.exports=o},function(n,e,t){var r=t(334);n.exports=function(n){return null==n?"":r(n)}},function(n,e,t){var r=t(69),o=t(335),a=t(26),i=t(131),s=r?r.prototype:void 0,l=s?s.toString:void 0;n.exports=function n(e){if("string"==typeof e)return e;if(a(e))return o(e,n)+"";if(i(e))return l?l.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length,o=Array(r);++t<r;)o[t]=e(n[t],t,n);return o}},function(n,e,t){var r=t(337),o=t(338);n.exports=function(n,e){return null!=n&&o(n,e,r)}},function(n,e){n.exports=function(n,e){return null!=n&&e in Object(n)}},function(n,e,t){var r=t(204),o=t(124),a=t(26),i=t(197),s=t(129),l=t(96);n.exports=function(n,e,t){for(var c=-1,d=(e=r(e,n)).length,p=!1;++c<d;){var u=l(e[c]);if(!(p=null!=n&&t(n,u)))break;n=n[u]}return p||++c!=d?p:!!(d=null==n?0:n.length)&&s(d)&&i(u,d)&&(a(n)||o(n))}},function(n,e,t){var r=t(340),o=t(341),a=t(130),i=t(96);n.exports=function(n){return a(n)?r(i(n)):o(n)}},function(n,e){n.exports=function(n){return function(e){return null==e?void 0:e[n]}}},function(n,e,t){var r=t(203);n.exports=function(n){return function(e){return r(e,n)}}},function(n,e,t){var r=t(132),o=t(343),a=t(345);n.exports=function(n,e){return a(o(n,e,r),n+"")}},function(n,e,t){var r=t(344),o=Math.max;n.exports=function(n,e,t){return e=o(void 0===e?n.length-1:e,0),function(){for(var a=arguments,i=-1,s=o(a.length-e,0),l=Array(s);++i<s;)l[i]=a[e+i];i=-1;for(var c=Array(e+1);++i<e;)c[i]=a[i];return c[e]=t(l),r(n,this,c)}}},function(n,e){n.exports=function(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}},function(n,e,t){var r=t(346),o=t(349)(r);n.exports=o},function(n,e,t){var r=t(347),o=t(348),a=t(132),i=o?function(n,e){return o(n,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:a;n.exports=i},function(n,e){n.exports=function(n){return function(){return n}}},function(n,e,t){var r=t(42),o=function(){try{var n=r(Object,"defineProperty");return n({},"",{}),n}catch(n){}}();n.exports=o},function(n,e){var t=Date.now;n.exports=function(n){var e=0,r=0;return function(){var o=t(),a=16-(o-r);if(r=o,a>0){if(++e>=800)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}},function(n,e,t){var r=t(193),o=t(351),a=t(356),i=t(194),s=t(357),l=t(128);n.exports=function(n,e,t){var c=-1,d=o,p=n.length,u=!0,m=[],f=m;if(t)u=!1,d=a;else if(p>=200){var h=e?null:s(n);if(h)return l(h);u=!1,d=i,f=new r}else f=e?[]:m;n:for(;++c<p;){var g=n[c],v=e?e(g):g;if(g=t||0!==g?g:0,u&&v==v){for(var b=f.length;b--;)if(f[b]===v)continue n;e&&f.push(v),m.push(g)}else d(f,v,t)||(f!==m&&f.push(v),m.push(g))}return m}},function(n,e,t){var r=t(352);n.exports=function(n,e){return!!(null==n?0:n.length)&&r(n,e,0)>-1}},function(n,e,t){var r=t(353),o=t(354),a=t(355);n.exports=function(n,e,t){return e==e?a(n,e,t):r(n,o,t)}},function(n,e){n.exports=function(n,e,t,r){for(var o=n.length,a=t+(r?1:-1);r?a--:++a<o;)if(e(n[a],a,n))return a;return-1}},function(n,e){n.exports=function(n){return n!=n}},function(n,e){n.exports=function(n,e,t){for(var r=t-1,o=n.length;++r<o;)if(n[r]===e)return r;return-1}},function(n,e){n.exports=function(n,e,t){for(var r=-1,o=null==n?0:n.length;++r<o;)if(t(e,n[r]))return!0;return!1}},function(n,e,t){var r=t(200),o=t(358),a=t(128),i=r&&1/a(new r([,-0]))[1]==1/0?function(n){return new r(n)}:o;n.exports=i},function(n,e){n.exports=function(){}},function(n,e,t){var r=t(199),o=t(45);n.exports=function(n){return o(n)&&r(n)}},function(n,e,t){},function(n,e,t){},function(n,e,t){var r=t(2);n.exports=r(1..valueOf)},function(n,e,t){var r=t(2),o=t(48),a=t(12),i=t(364),s=t(18),l=r(i),c=r("".slice),d=Math.ceil,p=function(n){return function(e,t,r){var i,p,u=a(s(e)),m=o(t),f=u.length,h=void 0===r?" ":a(r);return m<=f||""==h?u:((p=l(h,d((i=m-f)/h.length))).length>i&&(p=c(p,0,i)),n?u+p:p+u)}};n.exports={start:p(!1),end:p(!0)}},function(n,e,t){"use strict";var r=t(0),o=t(59),a=t(12),i=t(18),s=r.RangeError;n.exports=function(n){var e=a(i(this)),t="",r=o(n);if(r<0||r==1/0)throw s("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(t+=e);return t}},function(n,e,t){var r=t(28);n.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},function(n,e,t){"use strict";t(206)},function(n,e,t){"use strict";t(207)},function(n,e,t){"use strict";var r=t(1),o=t(2),a=t(36),i=t(16),s=t(29),l=t(12),c=t(3),d=t(369),p=t(50),u=t(370),m=t(371),f=t(46),h=t(372),g=[],v=o(g.sort),b=o(g.push),y=c((function(){g.sort(void 0)})),x=c((function(){g.sort(null)})),_=p("sort"),k=!c((function(){if(f)return f<70;if(!(u&&u>3)){if(m)return!0;if(h)return h<603;var n,e,t,r,o="";for(n=65;n<76;n++){switch(e=String.fromCharCode(n),n){case 66:case 69:case 70:case 72:t=3;break;case 68:case 71:t=4;break;default:t=2}for(r=0;r<47;r++)g.push({k:e+r,v:t})}for(g.sort((function(n,e){return e.v-n.v})),r=0;r<g.length;r++)e=g[r].k.charAt(0),o.charAt(o.length-1)!==e&&(o+=e);return"DGBEFHACIJK"!==o}}));r({target:"Array",proto:!0,forced:y||!x||!_||!k},{sort:function(n){void 0!==n&&a(n);var e=i(this);if(k)return void 0===n?v(e):v(e,n);var t,r,o=[],c=s(e);for(r=0;r<c;r++)r in e&&b(o,e[r]);for(d(o,function(n){return function(e,t){return void 0===t?-1:void 0===e?1:void 0!==n?+n(e,t)||0:l(e)>l(t)?1:-1}}(n)),t=o.length,r=0;r<t;)e[r]=o[r++];for(;r<c;)delete e[r++];return e}})},function(n,e,t){var r=t(119),o=Math.floor,a=function(n,e){var t=n.length,l=o(t/2);return t<8?i(n,e):s(n,a(r(n,0,l),e),a(r(n,l),e),e)},i=function(n,e){for(var t,r,o=n.length,a=1;a<o;){for(r=a,t=n[a];r&&e(n[r-1],t)>0;)n[r]=n[--r];r!==a++&&(n[r]=t)}return n},s=function(n,e,t,r){for(var o=e.length,a=t.length,i=0,s=0;i<o||s<a;)n[i+s]=i<o&&s<a?r(e[i],t[s])<=0?e[i++]:t[s++]:i<o?e[i++]:t[s++];return n};n.exports=a},function(n,e,t){var r=t(28).match(/firefox\/(\d+)/i);n.exports=!!r&&+r[1]},function(n,e,t){var r=t(28);n.exports=/MSIE|Trident/.test(r)},function(n,e,t){var r=t(28).match(/AppleWebKit\/(\d+)\./);n.exports=!!r&&+r[1]},function(n,e,t){},function(n,e,t){},function(n,e,t){},function(n,e,t){},function(n,e,t){var r=t(1),o=t(3),a=t(19),i=t(37).f,s=t(7),l=o((function(){i(1)}));r({target:"Object",stat:!0,forced:!s||l,sham:!s},{getOwnPropertyDescriptor:function(n,e){return i(a(n),e)}})},function(n,e,t){var r=t(1),o=t(7),a=t(107).f;r({target:"Object",stat:!0,forced:Object.defineProperties!==a,sham:!o},{defineProperties:a})},function(n,e,t){t(1)({target:"Reflect",stat:!0},{ownKeys:t(113)})},function(n,e){},function(n,e){function t(n,e){for(var t=0,r=n.length-1;r>=0;r--){var o=n[r];"."===o?n.splice(r,1):".."===o?(n.splice(r,1),t++):t&&(n.splice(r,1),t--)}if(e)for(;t--;t)n.unshift("..");return n}function r(n,e){if(n.filter)return n.filter(e);for(var t=[],r=0;r<n.length;r++)e(n[r],r,n)&&t.push(n[r]);return t}e.resolve=function(){for(var n="",e=!1,o=arguments.length-1;o>=-1&&!e;o--){var a=o>=0?arguments[o]:process.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(n=a+"/"+n,e="/"===a.charAt(0))}return(e?"/":"")+(n=t(r(n.split("/"),(function(n){return!!n})),!e).join("/"))||"."},e.normalize=function(n){var a=e.isAbsolute(n),i="/"===o(n,-1);return(n=t(r(n.split("/"),(function(n){return!!n})),!a).join("/"))||a||(n="."),n&&i&&(n+="/"),(a?"/":"")+n},e.isAbsolute=function(n){return"/"===n.charAt(0)},e.join=function(){var n=Array.prototype.slice.call(arguments,0);return e.normalize(r(n,(function(n,e){if("string"!=typeof n)throw new TypeError("Arguments to path.join must be strings");return n})).join("/"))},e.relative=function(n,t){function r(n){for(var e=0;e<n.length&&""===n[e];e++);for(var t=n.length-1;t>=0&&""===n[t];t--);return e>t?[]:n.slice(e,t-e+1)}n=e.resolve(n).substr(1),t=e.resolve(t).substr(1);for(var o=r(n.split("/")),a=r(t.split("/")),i=Math.min(o.length,a.length),s=i,l=0;l<i;l++)if(o[l]!==a[l]){s=l;break}var c=[];for(l=s;l<o.length;l++)c.push("..");return(c=c.concat(a.slice(s))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(n){if("string"!=typeof n&&(n+=""),0===n.length)return".";for(var e=n.charCodeAt(0),t=47===e,r=-1,o=!0,a=n.length-1;a>=1;--a)if(47===(e=n.charCodeAt(a))){if(!o){r=a;break}}else o=!1;return-1===r?t?"/":".":t&&1===r?"/":n.slice(0,r)},e.basename=function(n,e){var t=function(n){"string"!=typeof n&&(n+="");var e,t=0,r=-1,o=!0;for(e=n.length-1;e>=0;--e)if(47===n.charCodeAt(e)){if(!o){t=e+1;break}}else-1===r&&(o=!1,r=e+1);return-1===r?"":n.slice(t,r)}(n);return e&&t.substr(-1*e.length)===e&&(t=t.substr(0,t.length-e.length)),t},e.extname=function(n){"string"!=typeof n&&(n+="");for(var e=-1,t=0,r=-1,o=!0,a=0,i=n.length-1;i>=0;--i){var s=n.charCodeAt(i);if(47!==s)-1===r&&(o=!1,r=i+1),46===s?-1===e?e=i:1!==a&&(a=1):-1!==e&&(a=-1);else if(!o){t=i+1;break}}return-1===e||-1===r||0===a||1===a&&e===r-1&&e===t+1?"":n.slice(e,r)};var o="b"==="ab".substr(-1)?function(n,e,t){return n.substr(e,t)}:function(n,e,t){return e<0&&(e=n.length+e),n.substr(e,t)}},function(n,e,t){"use strict";var r=/[|\\{}()[\]^$+*?.]/g;e.escapeRegExpChars=function(n){return n?String(n).replace(r,"\\$&"):""};var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},a=/[&<>'"]/g;function i(n){return o[n]||n}e.escapeXML=function(n){return null==n?"":String(n).replace(a,i)},e.escapeXML.toString=function(){return Function.prototype.toString.call(this)+';\nvar _ENCODE_HTML_RULES = {\n      "&": "&amp;"\n    , "<": "&lt;"\n    , ">": "&gt;"\n    , \'"\': "&#34;"\n    , "\'": "&#39;"\n    }\n  , _MATCH_HTML = /[&<>\'"]/g;\nfunction encode_char(c) {\n  return _ENCODE_HTML_RULES[c] || c;\n};\n'},e.shallowCopy=function(n,e){for(var t in e=e||{})n[t]=e[t];return n},e.shallowCopyFromList=function(n,e,t){for(var r=0;r<t.length;r++){var o=t[r];void 0!==e[o]&&(n[o]=e[o])}return n},e.cache={_data:{},set:function(n,e){this._data[n]=e},get:function(n){return this._data[n]},remove:function(n){delete this._data[n]},reset:function(){this._data={}}}},function(n){n.exports=JSON.parse('{"name":"ejs","description":"Embedded JavaScript templates","keywords":["template","engine","ejs"],"version":"2.7.4","author":"Matthew Eernisse <mde@fleegix.org> (http://fleegix.org)","license":"Apache-2.0","main":"./lib/ejs.js","repository":{"type":"git","url":"git://github.com/mde/ejs.git"},"bugs":"https://github.com/mde/ejs/issues","homepage":"https://github.com/mde/ejs","dependencies":{},"devDependencies":{"browserify":"^13.1.1","eslint":"^4.14.0","git-directory-deploy":"^1.5.1","jake":"^10.3.1","jsdoc":"^3.4.0","lru-cache":"^4.0.1","mocha":"^5.0.5","uglify-js":"^3.3.16"},"engines":{"node":">=0.10.0"},"scripts":{"test":"mocha","postinstall":"node ./postinstall.js"}}')},function(n,e,t){var r=t(1),o=t(0),a=t(2),i=o.Date,s=a(i.prototype.getTime);r({target:"Date",stat:!0},{now:function(){return s(new i)}})},function(n,e,t){"use strict";t(208)},function(n,e,t){"use strict";var r=t(0),o=t(2),a=t(36),i=t(9),s=t(10),l=t(65),c=t(58),d=r.Function,p=o([].concat),u=o([].join),m={},f=function(n,e,t){if(!s(m,e)){for(var r=[],o=0;o<e;o++)r[o]="a["+o+"]";m[e]=d("C,a","return new C("+u(r,",")+")")}return m[e](n,t)};n.exports=c?d.bind:function(n){var e=a(this),t=e.prototype,r=l(arguments,1),o=function(){var t=p(r,l(arguments));return this instanceof o?f(e,t.length,t):e.apply(n,t)};return i(t)&&(o.prototype=t),o}},function(n,e,t){"use strict";t(211)},function(n,e,t){"use strict";t(212)},function(n,e,t){"use strict";t.r(e);t(145),t(234),t(245),t(247),t(4);function r(n,e,t,r,o,a,i){try{var s=n[a](i),l=s.value}catch(n){return void t(n)}s.done?e(l):Promise.resolve(l).then(r,o)}function o(n){return function(){var e=this,t=arguments;return new Promise((function(o,a){var i=n.apply(e,t);function s(n){r(i,o,a,s,l,"next",n)}function l(n){r(i,o,a,s,l,"throw",n)}s(void 0)}))}}t(166),t(51),t(20),t(22),t(44),t(23);var a=Object.freeze({});function i(n){return null==n}function s(n){return null!=n}function l(n){return!0===n}function c(n){return"string"==typeof n||"number"==typeof n||"symbol"==typeof n||"boolean"==typeof n}function d(n){return null!==n&&"object"==typeof n}var p=Object.prototype.toString;function u(n){return"[object Object]"===p.call(n)}function m(n){return"[object RegExp]"===p.call(n)}function f(n){var e=parseFloat(String(n));return e>=0&&Math.floor(e)===e&&isFinite(n)}function h(n){return s(n)&&"function"==typeof n.then&&"function"==typeof n.catch}function g(n){return null==n?"":Array.isArray(n)||u(n)&&n.toString===p?JSON.stringify(n,null,2):String(n)}function v(n){var e=parseFloat(n);return isNaN(e)?n:e}function b(n,e){for(var t=Object.create(null),r=n.split(","),o=0;o<r.length;o++)t[r[o]]=!0;return e?function(n){return t[n.toLowerCase()]}:function(n){return t[n]}}b("slot,component",!0);var y=b("key,ref,slot,slot-scope,is");function x(n,e){if(n.length){var t=n.indexOf(e);if(t>-1)return n.splice(t,1)}}var _=Object.prototype.hasOwnProperty;function k(n,e){return _.call(n,e)}function w(n){var e=Object.create(null);return function(t){return e[t]||(e[t]=n(t))}}var T=/-(\w)/g,S=w((function(n){return n.replace(T,(function(n,e){return e?e.toUpperCase():""}))})),P=w((function(n){return n.charAt(0).toUpperCase()+n.slice(1)})),C=/\B([A-Z])/g,I=w((function(n){return n.replace(C,"-$1").toLowerCase()}));var E=Function.prototype.bind?function(n,e){return n.bind(e)}:function(n,e){function t(t){var r=arguments.length;return r?r>1?n.apply(e,arguments):n.call(e,t):n.call(e)}return t._length=n.length,t};function A(n,e){e=e||0;for(var t=n.length-e,r=new Array(t);t--;)r[t]=n[t+e];return r}function D(n,e){for(var t in e)n[t]=e[t];return n}function O(n){for(var e={},t=0;t<n.length;t++)n[t]&&D(e,n[t]);return e}function L(n,e,t){}var j=function(n,e,t){return!1},R=function(n){return n};function z(n,e){if(n===e)return!0;var t=d(n),r=d(e);if(!t||!r)return!t&&!r&&String(n)===String(e);try{var o=Array.isArray(n),a=Array.isArray(e);if(o&&a)return n.length===e.length&&n.every((function(n,t){return z(n,e[t])}));if(n instanceof Date&&e instanceof Date)return n.getTime()===e.getTime();if(o||a)return!1;var i=Object.keys(n),s=Object.keys(e);return i.length===s.length&&i.every((function(t){return z(n[t],e[t])}))}catch(n){return!1}}function M(n,e){for(var t=0;t<n.length;t++)if(z(n[t],e))return t;return-1}function N(n){var e=!1;return function(){e||(e=!0,n.apply(this,arguments))}}var F=["component","directive","filter"],q=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],U={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:j,isReservedAttr:j,isUnknownElement:j,getTagNamespace:L,parsePlatformTagName:R,mustUseProp:j,async:!0,_lifecycleHooks:q},B=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function G(n,e,t,r){Object.defineProperty(n,e,{value:t,enumerable:!!r,writable:!0,configurable:!0})}var H=new RegExp("[^"+B.source+".$_\\d]");var V,$="__proto__"in{},W="undefined"!=typeof window,K="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,X=K&&WXEnvironment.platform.toLowerCase(),Q=W&&window.navigator.userAgent.toLowerCase(),Y=Q&&/msie|trident/.test(Q),Z=Q&&Q.indexOf("msie 9.0")>0,J=Q&&Q.indexOf("edge/")>0,nn=(Q&&Q.indexOf("android"),Q&&/iphone|ipad|ipod|ios/.test(Q)||"ios"===X),en=(Q&&/chrome\/\d+/.test(Q),Q&&/phantomjs/.test(Q),Q&&Q.match(/firefox\/(\d+)/)),tn={}.watch,rn=!1;if(W)try{var on={};Object.defineProperty(on,"passive",{get:function(){rn=!0}}),window.addEventListener("test-passive",null,on)}catch(n){}var an=function(){return void 0===V&&(V=!W&&!K&&"undefined"!=typeof global&&(global.process&&"server"===global.process.env.VUE_ENV)),V},sn=W&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ln(n){return"function"==typeof n&&/native code/.test(n.toString())}var cn,dn="undefined"!=typeof Symbol&&ln(Symbol)&&"undefined"!=typeof Reflect&&ln(Reflect.ownKeys);cn="undefined"!=typeof Set&&ln(Set)?Set:function(){function n(){this.set=Object.create(null)}return n.prototype.has=function(n){return!0===this.set[n]},n.prototype.add=function(n){this.set[n]=!0},n.prototype.clear=function(){this.set=Object.create(null)},n}();var pn=L,un=0,mn=function(){this.id=un++,this.subs=[]};mn.prototype.addSub=function(n){this.subs.push(n)},mn.prototype.removeSub=function(n){x(this.subs,n)},mn.prototype.depend=function(){mn.target&&mn.target.addDep(this)},mn.prototype.notify=function(){var n=this.subs.slice();for(var e=0,t=n.length;e<t;e++)n[e].update()},mn.target=null;var fn=[];function hn(n){fn.push(n),mn.target=n}function gn(){fn.pop(),mn.target=fn[fn.length-1]}var vn=function(n,e,t,r,o,a,i,s){this.tag=n,this.data=e,this.children=t,this.text=r,this.elm=o,this.ns=void 0,this.context=a,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=i,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},bn={child:{configurable:!0}};bn.child.get=function(){return this.componentInstance},Object.defineProperties(vn.prototype,bn);var yn=function(n){void 0===n&&(n="");var e=new vn;return e.text=n,e.isComment=!0,e};function xn(n){return new vn(void 0,void 0,void 0,String(n))}function _n(n){var e=new vn(n.tag,n.data,n.children&&n.children.slice(),n.text,n.elm,n.context,n.componentOptions,n.asyncFactory);return e.ns=n.ns,e.isStatic=n.isStatic,e.key=n.key,e.isComment=n.isComment,e.fnContext=n.fnContext,e.fnOptions=n.fnOptions,e.fnScopeId=n.fnScopeId,e.asyncMeta=n.asyncMeta,e.isCloned=!0,e}var kn=Array.prototype,wn=Object.create(kn);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(n){var e=kn[n];G(wn,n,(function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var o,a=e.apply(this,t),i=this.__ob__;switch(n){case"push":case"unshift":o=t;break;case"splice":o=t.slice(2)}return o&&i.observeArray(o),i.dep.notify(),a}))}));var Tn=Object.getOwnPropertyNames(wn),Sn=!0;function Pn(n){Sn=n}var Cn=function(n){this.value=n,this.dep=new mn,this.vmCount=0,G(n,"__ob__",this),Array.isArray(n)?($?function(n,e){n.__proto__=e}(n,wn):function(n,e,t){for(var r=0,o=t.length;r<o;r++){var a=t[r];G(n,a,e[a])}}(n,wn,Tn),this.observeArray(n)):this.walk(n)};function In(n,e){var t;if(d(n)&&!(n instanceof vn))return k(n,"__ob__")&&n.__ob__ instanceof Cn?t=n.__ob__:Sn&&!an()&&(Array.isArray(n)||u(n))&&Object.isExtensible(n)&&!n._isVue&&(t=new Cn(n)),e&&t&&t.vmCount++,t}function En(n,e,t,r,o){var a=new mn,i=Object.getOwnPropertyDescriptor(n,e);if(!i||!1!==i.configurable){var s=i&&i.get,l=i&&i.set;s&&!l||2!==arguments.length||(t=n[e]);var c=!o&&In(t);Object.defineProperty(n,e,{enumerable:!0,configurable:!0,get:function(){var e=s?s.call(n):t;return mn.target&&(a.depend(),c&&(c.dep.depend(),Array.isArray(e)&&On(e))),e},set:function(e){var r=s?s.call(n):t;e===r||e!=e&&r!=r||s&&!l||(l?l.call(n,e):t=e,c=!o&&In(e),a.notify())}})}}function An(n,e,t){if(Array.isArray(n)&&f(e))return n.length=Math.max(n.length,e),n.splice(e,1,t),t;if(e in n&&!(e in Object.prototype))return n[e]=t,t;var r=n.__ob__;return n._isVue||r&&r.vmCount?t:r?(En(r.value,e,t),r.dep.notify(),t):(n[e]=t,t)}function Dn(n,e){if(Array.isArray(n)&&f(e))n.splice(e,1);else{var t=n.__ob__;n._isVue||t&&t.vmCount||k(n,e)&&(delete n[e],t&&t.dep.notify())}}function On(n){for(var e=void 0,t=0,r=n.length;t<r;t++)(e=n[t])&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&On(e)}Cn.prototype.walk=function(n){for(var e=Object.keys(n),t=0;t<e.length;t++)En(n,e[t])},Cn.prototype.observeArray=function(n){for(var e=0,t=n.length;e<t;e++)In(n[e])};var Ln=U.optionMergeStrategies;function jn(n,e){if(!e)return n;for(var t,r,o,a=dn?Reflect.ownKeys(e):Object.keys(e),i=0;i<a.length;i++)"__ob__"!==(t=a[i])&&(r=n[t],o=e[t],k(n,t)?r!==o&&u(r)&&u(o)&&jn(r,o):An(n,t,o));return n}function Rn(n,e,t){return t?function(){var r="function"==typeof e?e.call(t,t):e,o="function"==typeof n?n.call(t,t):n;return r?jn(r,o):o}:e?n?function(){return jn("function"==typeof e?e.call(this,this):e,"function"==typeof n?n.call(this,this):n)}:e:n}function zn(n,e){var t=e?n?n.concat(e):Array.isArray(e)?e:[e]:n;return t?function(n){for(var e=[],t=0;t<n.length;t++)-1===e.indexOf(n[t])&&e.push(n[t]);return e}(t):t}function Mn(n,e,t,r){var o=Object.create(n||null);return e?D(o,e):o}Ln.data=function(n,e,t){return t?Rn(n,e,t):e&&"function"!=typeof e?n:Rn(n,e)},q.forEach((function(n){Ln[n]=zn})),F.forEach((function(n){Ln[n+"s"]=Mn})),Ln.watch=function(n,e,t,r){if(n===tn&&(n=void 0),e===tn&&(e=void 0),!e)return Object.create(n||null);if(!n)return e;var o={};for(var a in D(o,n),e){var i=o[a],s=e[a];i&&!Array.isArray(i)&&(i=[i]),o[a]=i?i.concat(s):Array.isArray(s)?s:[s]}return o},Ln.props=Ln.methods=Ln.inject=Ln.computed=function(n,e,t,r){if(!n)return e;var o=Object.create(null);return D(o,n),e&&D(o,e),o},Ln.provide=Rn;var Nn=function(n,e){return void 0===e?n:e};function Fn(n,e,t){if("function"==typeof e&&(e=e.options),function(n,e){var t=n.props;if(t){var r,o,a={};if(Array.isArray(t))for(r=t.length;r--;)"string"==typeof(o=t[r])&&(a[S(o)]={type:null});else if(u(t))for(var i in t)o=t[i],a[S(i)]=u(o)?o:{type:o};else 0;n.props=a}}(e),function(n,e){var t=n.inject;if(t){var r=n.inject={};if(Array.isArray(t))for(var o=0;o<t.length;o++)r[t[o]]={from:t[o]};else if(u(t))for(var a in t){var i=t[a];r[a]=u(i)?D({from:a},i):{from:i}}else 0}}(e),function(n){var e=n.directives;if(e)for(var t in e){var r=e[t];"function"==typeof r&&(e[t]={bind:r,update:r})}}(e),!e._base&&(e.extends&&(n=Fn(n,e.extends,t)),e.mixins))for(var r=0,o=e.mixins.length;r<o;r++)n=Fn(n,e.mixins[r],t);var a,i={};for(a in n)s(a);for(a in e)k(n,a)||s(a);function s(r){var o=Ln[r]||Nn;i[r]=o(n[r],e[r],t,r)}return i}function qn(n,e,t,r){if("string"==typeof t){var o=n[e];if(k(o,t))return o[t];var a=S(t);if(k(o,a))return o[a];var i=P(a);return k(o,i)?o[i]:o[t]||o[a]||o[i]}}function Un(n,e,t,r){var o=e[n],a=!k(t,n),i=t[n],s=Vn(Boolean,o.type);if(s>-1)if(a&&!k(o,"default"))i=!1;else if(""===i||i===I(n)){var l=Vn(String,o.type);(l<0||s<l)&&(i=!0)}if(void 0===i){i=function(n,e,t){if(!k(e,"default"))return;var r=e.default;0;if(n&&n.$options.propsData&&void 0===n.$options.propsData[t]&&void 0!==n._props[t])return n._props[t];return"function"==typeof r&&"Function"!==Gn(e.type)?r.call(n):r}(r,o,n);var c=Sn;Pn(!0),In(i),Pn(c)}return i}var Bn=/^\s*function (\w+)/;function Gn(n){var e=n&&n.toString().match(Bn);return e?e[1]:""}function Hn(n,e){return Gn(n)===Gn(e)}function Vn(n,e){if(!Array.isArray(e))return Hn(e,n)?0:-1;for(var t=0,r=e.length;t<r;t++)if(Hn(e[t],n))return t;return-1}function $n(n,e,t){hn();try{if(e)for(var r=e;r=r.$parent;){var o=r.$options.errorCaptured;if(o)for(var a=0;a<o.length;a++)try{if(!1===o[a].call(r,n,e,t))return}catch(n){Kn(n,r,"errorCaptured hook")}}Kn(n,e,t)}finally{gn()}}function Wn(n,e,t,r,o){var a;try{(a=t?n.apply(e,t):n.call(e))&&!a._isVue&&h(a)&&!a._handled&&(a.catch((function(n){return $n(n,r,o+" (Promise/async)")})),a._handled=!0)}catch(n){$n(n,r,o)}return a}function Kn(n,e,t){if(U.errorHandler)try{return U.errorHandler.call(null,n,e,t)}catch(e){e!==n&&Xn(e,null,"config.errorHandler")}Xn(n,e,t)}function Xn(n,e,t){if(!W&&!K||"undefined"==typeof console)throw n;console.error(n)}var Qn,Yn=!1,Zn=[],Jn=!1;function ne(){Jn=!1;var n=Zn.slice(0);Zn.length=0;for(var e=0;e<n.length;e++)n[e]()}if("undefined"!=typeof Promise&&ln(Promise)){var ee=Promise.resolve();Qn=function(){ee.then(ne),nn&&setTimeout(L)},Yn=!0}else if(Y||"undefined"==typeof MutationObserver||!ln(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Qn="undefined"!=typeof setImmediate&&ln(setImmediate)?function(){setImmediate(ne)}:function(){setTimeout(ne,0)};else{var te=1,re=new MutationObserver(ne),oe=document.createTextNode(String(te));re.observe(oe,{characterData:!0}),Qn=function(){te=(te+1)%2,oe.data=String(te)},Yn=!0}function ae(n,e){var t;if(Zn.push((function(){if(n)try{n.call(e)}catch(n){$n(n,e,"nextTick")}else t&&t(e)})),Jn||(Jn=!0,Qn()),!n&&"undefined"!=typeof Promise)return new Promise((function(n){t=n}))}var ie=new cn;function se(n){!function n(e,t){var r,o,a=Array.isArray(e);if(!a&&!d(e)||Object.isFrozen(e)||e instanceof vn)return;if(e.__ob__){var i=e.__ob__.dep.id;if(t.has(i))return;t.add(i)}if(a)for(r=e.length;r--;)n(e[r],t);else for(o=Object.keys(e),r=o.length;r--;)n(e[o[r]],t)}(n,ie),ie.clear()}var le=w((function(n){var e="&"===n.charAt(0),t="~"===(n=e?n.slice(1):n).charAt(0),r="!"===(n=t?n.slice(1):n).charAt(0);return{name:n=r?n.slice(1):n,once:t,capture:r,passive:e}}));function ce(n,e){function t(){var n=arguments,r=t.fns;if(!Array.isArray(r))return Wn(r,null,arguments,e,"v-on handler");for(var o=r.slice(),a=0;a<o.length;a++)Wn(o[a],null,n,e,"v-on handler")}return t.fns=n,t}function de(n,e,t,r,o,a){var s,c,d,p;for(s in n)c=n[s],d=e[s],p=le(s),i(c)||(i(d)?(i(c.fns)&&(c=n[s]=ce(c,a)),l(p.once)&&(c=n[s]=o(p.name,c,p.capture)),t(p.name,c,p.capture,p.passive,p.params)):c!==d&&(d.fns=c,n[s]=d));for(s in e)i(n[s])&&r((p=le(s)).name,e[s],p.capture)}function pe(n,e,t){var r;n instanceof vn&&(n=n.data.hook||(n.data.hook={}));var o=n[e];function a(){t.apply(this,arguments),x(r.fns,a)}i(o)?r=ce([a]):s(o.fns)&&l(o.merged)?(r=o).fns.push(a):r=ce([o,a]),r.merged=!0,n[e]=r}function ue(n,e,t,r,o){if(s(e)){if(k(e,t))return n[t]=e[t],o||delete e[t],!0;if(k(e,r))return n[t]=e[r],o||delete e[r],!0}return!1}function me(n){return c(n)?[xn(n)]:Array.isArray(n)?function n(e,t){var r,o,a,d,p=[];for(r=0;r<e.length;r++)i(o=e[r])||"boolean"==typeof o||(a=p.length-1,d=p[a],Array.isArray(o)?o.length>0&&(fe((o=n(o,(t||"")+"_"+r))[0])&&fe(d)&&(p[a]=xn(d.text+o[0].text),o.shift()),p.push.apply(p,o)):c(o)?fe(d)?p[a]=xn(d.text+o):""!==o&&p.push(xn(o)):fe(o)&&fe(d)?p[a]=xn(d.text+o.text):(l(e._isVList)&&s(o.tag)&&i(o.key)&&s(t)&&(o.key="__vlist"+t+"_"+r+"__"),p.push(o)));return p}(n):void 0}function fe(n){return s(n)&&s(n.text)&&!1===n.isComment}function he(n,e){if(n){for(var t=Object.create(null),r=dn?Reflect.ownKeys(n):Object.keys(n),o=0;o<r.length;o++){var a=r[o];if("__ob__"!==a){for(var i=n[a].from,s=e;s;){if(s._provided&&k(s._provided,i)){t[a]=s._provided[i];break}s=s.$parent}if(!s)if("default"in n[a]){var l=n[a].default;t[a]="function"==typeof l?l.call(e):l}else 0}}return t}}function ge(n,e){if(!n||!n.length)return{};for(var t={},r=0,o=n.length;r<o;r++){var a=n[r],i=a.data;if(i&&i.attrs&&i.attrs.slot&&delete i.attrs.slot,a.context!==e&&a.fnContext!==e||!i||null==i.slot)(t.default||(t.default=[])).push(a);else{var s=i.slot,l=t[s]||(t[s]=[]);"template"===a.tag?l.push.apply(l,a.children||[]):l.push(a)}}for(var c in t)t[c].every(ve)&&delete t[c];return t}function ve(n){return n.isComment&&!n.asyncFactory||" "===n.text}function be(n){return n.isComment&&n.asyncFactory}function ye(n,e,t){var r,o=Object.keys(e).length>0,i=n?!!n.$stable:!o,s=n&&n.$key;if(n){if(n._normalized)return n._normalized;if(i&&t&&t!==a&&s===t.$key&&!o&&!t.$hasNormal)return t;for(var l in r={},n)n[l]&&"$"!==l[0]&&(r[l]=xe(e,l,n[l]))}else r={};for(var c in e)c in r||(r[c]=_e(e,c));return n&&Object.isExtensible(n)&&(n._normalized=r),G(r,"$stable",i),G(r,"$key",s),G(r,"$hasNormal",o),r}function xe(n,e,t){var r=function(){var n=arguments.length?t.apply(null,arguments):t({}),e=(n=n&&"object"==typeof n&&!Array.isArray(n)?[n]:me(n))&&n[0];return n&&(!e||1===n.length&&e.isComment&&!be(e))?void 0:n};return t.proxy&&Object.defineProperty(n,e,{get:r,enumerable:!0,configurable:!0}),r}function _e(n,e){return function(){return n[e]}}function ke(n,e){var t,r,o,a,i;if(Array.isArray(n)||"string"==typeof n)for(t=new Array(n.length),r=0,o=n.length;r<o;r++)t[r]=e(n[r],r);else if("number"==typeof n)for(t=new Array(n),r=0;r<n;r++)t[r]=e(r+1,r);else if(d(n))if(dn&&n[Symbol.iterator]){t=[];for(var l=n[Symbol.iterator](),c=l.next();!c.done;)t.push(e(c.value,t.length)),c=l.next()}else for(a=Object.keys(n),t=new Array(a.length),r=0,o=a.length;r<o;r++)i=a[r],t[r]=e(n[i],i,r);return s(t)||(t=[]),t._isVList=!0,t}function we(n,e,t,r){var o,a=this.$scopedSlots[n];a?(t=t||{},r&&(t=D(D({},r),t)),o=a(t)||("function"==typeof e?e():e)):o=this.$slots[n]||("function"==typeof e?e():e);var i=t&&t.slot;return i?this.$createElement("template",{slot:i},o):o}function Te(n){return qn(this.$options,"filters",n)||R}function Se(n,e){return Array.isArray(n)?-1===n.indexOf(e):n!==e}function Pe(n,e,t,r,o){var a=U.keyCodes[e]||t;return o&&r&&!U.keyCodes[e]?Se(o,r):a?Se(a,n):r?I(r)!==e:void 0===n}function Ce(n,e,t,r,o){if(t)if(d(t)){var a;Array.isArray(t)&&(t=O(t));var i=function(i){if("class"===i||"style"===i||y(i))a=n;else{var s=n.attrs&&n.attrs.type;a=r||U.mustUseProp(e,s,i)?n.domProps||(n.domProps={}):n.attrs||(n.attrs={})}var l=S(i),c=I(i);l in a||c in a||(a[i]=t[i],o&&((n.on||(n.on={}))["update:"+i]=function(n){t[i]=n}))};for(var s in t)i(s)}else;return n}function Ie(n,e){var t=this._staticTrees||(this._staticTrees=[]),r=t[n];return r&&!e||Ae(r=t[n]=this.$options.staticRenderFns[n].call(this._renderProxy,null,this),"__static__"+n,!1),r}function Ee(n,e,t){return Ae(n,"__once__"+e+(t?"_"+t:""),!0),n}function Ae(n,e,t){if(Array.isArray(n))for(var r=0;r<n.length;r++)n[r]&&"string"!=typeof n[r]&&De(n[r],e+"_"+r,t);else De(n,e,t)}function De(n,e,t){n.isStatic=!0,n.key=e,n.isOnce=t}function Oe(n,e){if(e)if(u(e)){var t=n.on=n.on?D({},n.on):{};for(var r in e){var o=t[r],a=e[r];t[r]=o?[].concat(o,a):a}}else;return n}function Le(n,e,t,r){e=e||{$stable:!t};for(var o=0;o<n.length;o++){var a=n[o];Array.isArray(a)?Le(a,e,t):a&&(a.proxy&&(a.fn.proxy=!0),e[a.key]=a.fn)}return r&&(e.$key=r),e}function je(n,e){for(var t=0;t<e.length;t+=2){var r=e[t];"string"==typeof r&&r&&(n[e[t]]=e[t+1])}return n}function Re(n,e){return"string"==typeof n?e+n:n}function ze(n){n._o=Ee,n._n=v,n._s=g,n._l=ke,n._t=we,n._q=z,n._i=M,n._m=Ie,n._f=Te,n._k=Pe,n._b=Ce,n._v=xn,n._e=yn,n._u=Le,n._g=Oe,n._d=je,n._p=Re}function Me(n,e,t,r,o){var i,s=this,c=o.options;k(r,"_uid")?(i=Object.create(r))._original=r:(i=r,r=r._original);var d=l(c._compiled),p=!d;this.data=n,this.props=e,this.children=t,this.parent=r,this.listeners=n.on||a,this.injections=he(c.inject,r),this.slots=function(){return s.$slots||ye(n.scopedSlots,s.$slots=ge(t,r)),s.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return ye(n.scopedSlots,this.slots())}}),d&&(this.$options=c,this.$slots=this.slots(),this.$scopedSlots=ye(n.scopedSlots,this.$slots)),c._scopeId?this._c=function(n,e,t,o){var a=He(i,n,e,t,o,p);return a&&!Array.isArray(a)&&(a.fnScopeId=c._scopeId,a.fnContext=r),a}:this._c=function(n,e,t,r){return He(i,n,e,t,r,p)}}function Ne(n,e,t,r,o){var a=_n(n);return a.fnContext=t,a.fnOptions=r,e.slot&&((a.data||(a.data={})).slot=e.slot),a}function Fe(n,e){for(var t in e)n[S(t)]=e[t]}ze(Me.prototype);var qe={init:function(n,e){if(n.componentInstance&&!n.componentInstance._isDestroyed&&n.data.keepAlive){var t=n;qe.prepatch(t,t)}else{(n.componentInstance=function(n,e){var t={_isComponent:!0,_parentVnode:n,parent:e},r=n.data.inlineTemplate;s(r)&&(t.render=r.render,t.staticRenderFns=r.staticRenderFns);return new n.componentOptions.Ctor(t)}(n,Je)).$mount(e?n.elm:void 0,e)}},prepatch:function(n,e){var t=e.componentOptions;!function(n,e,t,r,o){0;var i=r.data.scopedSlots,s=n.$scopedSlots,l=!!(i&&!i.$stable||s!==a&&!s.$stable||i&&n.$scopedSlots.$key!==i.$key||!i&&n.$scopedSlots.$key),c=!!(o||n.$options._renderChildren||l);n.$options._parentVnode=r,n.$vnode=r,n._vnode&&(n._vnode.parent=r);if(n.$options._renderChildren=o,n.$attrs=r.data.attrs||a,n.$listeners=t||a,e&&n.$options.props){Pn(!1);for(var d=n._props,p=n.$options._propKeys||[],u=0;u<p.length;u++){var m=p[u],f=n.$options.props;d[m]=Un(m,f,e,n)}Pn(!0),n.$options.propsData=e}t=t||a;var h=n.$options._parentListeners;n.$options._parentListeners=t,Ze(n,t,h),c&&(n.$slots=ge(o,r.context),n.$forceUpdate());0}(e.componentInstance=n.componentInstance,t.propsData,t.listeners,e,t.children)},insert:function(n){var e,t=n.context,r=n.componentInstance;r._isMounted||(r._isMounted=!0,rt(r,"mounted")),n.data.keepAlive&&(t._isMounted?((e=r)._inactive=!1,at.push(e)):tt(r,!0))},destroy:function(n){var e=n.componentInstance;e._isDestroyed||(n.data.keepAlive?function n(e,t){if(t&&(e._directInactive=!0,et(e)))return;if(!e._inactive){e._inactive=!0;for(var r=0;r<e.$children.length;r++)n(e.$children[r]);rt(e,"deactivated")}}(e,!0):e.$destroy())}},Ue=Object.keys(qe);function Be(n,e,t,r,o){if(!i(n)){var c=t.$options._base;if(d(n)&&(n=c.extend(n)),"function"==typeof n){var p;if(i(n.cid)&&void 0===(n=function(n,e){if(l(n.error)&&s(n.errorComp))return n.errorComp;if(s(n.resolved))return n.resolved;var t=$e;t&&s(n.owners)&&-1===n.owners.indexOf(t)&&n.owners.push(t);if(l(n.loading)&&s(n.loadingComp))return n.loadingComp;if(t&&!s(n.owners)){var r=n.owners=[t],o=!0,a=null,c=null;t.$on("hook:destroyed",(function(){return x(r,t)}));var p=function(n){for(var e=0,t=r.length;e<t;e++)r[e].$forceUpdate();n&&(r.length=0,null!==a&&(clearTimeout(a),a=null),null!==c&&(clearTimeout(c),c=null))},u=N((function(t){n.resolved=We(t,e),o?r.length=0:p(!0)})),m=N((function(e){s(n.errorComp)&&(n.error=!0,p(!0))})),f=n(u,m);return d(f)&&(h(f)?i(n.resolved)&&f.then(u,m):h(f.component)&&(f.component.then(u,m),s(f.error)&&(n.errorComp=We(f.error,e)),s(f.loading)&&(n.loadingComp=We(f.loading,e),0===f.delay?n.loading=!0:a=setTimeout((function(){a=null,i(n.resolved)&&i(n.error)&&(n.loading=!0,p(!1))}),f.delay||200)),s(f.timeout)&&(c=setTimeout((function(){c=null,i(n.resolved)&&m(null)}),f.timeout)))),o=!1,n.loading?n.loadingComp:n.resolved}}(p=n,c)))return function(n,e,t,r,o){var a=yn();return a.asyncFactory=n,a.asyncMeta={data:e,context:t,children:r,tag:o},a}(p,e,t,r,o);e=e||{},St(n),s(e.model)&&function(n,e){var t=n.model&&n.model.prop||"value",r=n.model&&n.model.event||"input";(e.attrs||(e.attrs={}))[t]=e.model.value;var o=e.on||(e.on={}),a=o[r],i=e.model.callback;s(a)?(Array.isArray(a)?-1===a.indexOf(i):a!==i)&&(o[r]=[i].concat(a)):o[r]=i}(n.options,e);var u=function(n,e,t){var r=e.options.props;if(!i(r)){var o={},a=n.attrs,l=n.props;if(s(a)||s(l))for(var c in r){var d=I(c);ue(o,l,c,d,!0)||ue(o,a,c,d,!1)}return o}}(e,n);if(l(n.options.functional))return function(n,e,t,r,o){var i=n.options,l={},c=i.props;if(s(c))for(var d in c)l[d]=Un(d,c,e||a);else s(t.attrs)&&Fe(l,t.attrs),s(t.props)&&Fe(l,t.props);var p=new Me(t,l,o,r,n),u=i.render.call(null,p._c,p);if(u instanceof vn)return Ne(u,t,p.parent,i,p);if(Array.isArray(u)){for(var m=me(u)||[],f=new Array(m.length),h=0;h<m.length;h++)f[h]=Ne(m[h],t,p.parent,i,p);return f}}(n,u,e,t,r);var m=e.on;if(e.on=e.nativeOn,l(n.options.abstract)){var f=e.slot;e={},f&&(e.slot=f)}!function(n){for(var e=n.hook||(n.hook={}),t=0;t<Ue.length;t++){var r=Ue[t],o=e[r],a=qe[r];o===a||o&&o._merged||(e[r]=o?Ge(a,o):a)}}(e);var g=n.options.name||o;return new vn("vue-component-"+n.cid+(g?"-"+g:""),e,void 0,void 0,void 0,t,{Ctor:n,propsData:u,listeners:m,tag:o,children:r},p)}}}function Ge(n,e){var t=function(t,r){n(t,r),e(t,r)};return t._merged=!0,t}function He(n,e,t,r,o,a){return(Array.isArray(t)||c(t))&&(o=r,r=t,t=void 0),l(a)&&(o=2),function(n,e,t,r,o){if(s(t)&&s(t.__ob__))return yn();s(t)&&s(t.is)&&(e=t.is);if(!e)return yn();0;Array.isArray(r)&&"function"==typeof r[0]&&((t=t||{}).scopedSlots={default:r[0]},r.length=0);2===o?r=me(r):1===o&&(r=function(n){for(var e=0;e<n.length;e++)if(Array.isArray(n[e]))return Array.prototype.concat.apply([],n);return n}(r));var a,c;if("string"==typeof e){var p;c=n.$vnode&&n.$vnode.ns||U.getTagNamespace(e),a=U.isReservedTag(e)?new vn(U.parsePlatformTagName(e),t,r,void 0,void 0,n):t&&t.pre||!s(p=qn(n.$options,"components",e))?new vn(e,t,r,void 0,void 0,n):Be(p,t,n,r,e)}else a=Be(e,t,n,r);return Array.isArray(a)?a:s(a)?(s(c)&&function n(e,t,r){e.ns=t,"foreignObject"===e.tag&&(t=void 0,r=!0);if(s(e.children))for(var o=0,a=e.children.length;o<a;o++){var c=e.children[o];s(c.tag)&&(i(c.ns)||l(r)&&"svg"!==c.tag)&&n(c,t,r)}}(a,c),s(t)&&function(n){d(n.style)&&se(n.style);d(n.class)&&se(n.class)}(t),a):yn()}(n,e,t,r,o)}var Ve,$e=null;function We(n,e){return(n.__esModule||dn&&"Module"===n[Symbol.toStringTag])&&(n=n.default),d(n)?e.extend(n):n}function Ke(n){if(Array.isArray(n))for(var e=0;e<n.length;e++){var t=n[e];if(s(t)&&(s(t.componentOptions)||be(t)))return t}}function Xe(n,e){Ve.$on(n,e)}function Qe(n,e){Ve.$off(n,e)}function Ye(n,e){var t=Ve;return function r(){var o=e.apply(null,arguments);null!==o&&t.$off(n,r)}}function Ze(n,e,t){Ve=n,de(e,t||{},Xe,Qe,Ye,n),Ve=void 0}var Je=null;function nt(n){var e=Je;return Je=n,function(){Je=e}}function et(n){for(;n&&(n=n.$parent);)if(n._inactive)return!0;return!1}function tt(n,e){if(e){if(n._directInactive=!1,et(n))return}else if(n._directInactive)return;if(n._inactive||null===n._inactive){n._inactive=!1;for(var t=0;t<n.$children.length;t++)tt(n.$children[t]);rt(n,"activated")}}function rt(n,e){hn();var t=n.$options[e],r=e+" hook";if(t)for(var o=0,a=t.length;o<a;o++)Wn(t[o],n,null,n,r);n._hasHookEvent&&n.$emit("hook:"+e),gn()}var ot=[],at=[],it={},st=!1,lt=!1,ct=0;var dt=0,pt=Date.now;if(W&&!Y){var ut=window.performance;ut&&"function"==typeof ut.now&&pt()>document.createEvent("Event").timeStamp&&(pt=function(){return ut.now()})}function mt(){var n,e;for(dt=pt(),lt=!0,ot.sort((function(n,e){return n.id-e.id})),ct=0;ct<ot.length;ct++)(n=ot[ct]).before&&n.before(),e=n.id,it[e]=null,n.run();var t=at.slice(),r=ot.slice();ct=ot.length=at.length=0,it={},st=lt=!1,function(n){for(var e=0;e<n.length;e++)n[e]._inactive=!0,tt(n[e],!0)}(t),function(n){var e=n.length;for(;e--;){var t=n[e],r=t.vm;r._watcher===t&&r._isMounted&&!r._isDestroyed&&rt(r,"updated")}}(r),sn&&U.devtools&&sn.emit("flush")}var ft=0,ht=function(n,e,t,r,o){this.vm=n,o&&(n._watcher=this),n._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=t,this.id=++ft,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new cn,this.newDepIds=new cn,this.expression="","function"==typeof e?this.getter=e:(this.getter=function(n){if(!H.test(n)){var e=n.split(".");return function(n){for(var t=0;t<e.length;t++){if(!n)return;n=n[e[t]]}return n}}}(e),this.getter||(this.getter=L)),this.value=this.lazy?void 0:this.get()};ht.prototype.get=function(){var n;hn(this);var e=this.vm;try{n=this.getter.call(e,e)}catch(n){if(!this.user)throw n;$n(n,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&se(n),gn(),this.cleanupDeps()}return n},ht.prototype.addDep=function(n){var e=n.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(n),this.depIds.has(e)||n.addSub(this))},ht.prototype.cleanupDeps=function(){for(var n=this.deps.length;n--;){var e=this.deps[n];this.newDepIds.has(e.id)||e.removeSub(this)}var t=this.depIds;this.depIds=this.newDepIds,this.newDepIds=t,this.newDepIds.clear(),t=this.deps,this.deps=this.newDeps,this.newDeps=t,this.newDeps.length=0},ht.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(n){var e=n.id;if(null==it[e]){if(it[e]=!0,lt){for(var t=ot.length-1;t>ct&&ot[t].id>n.id;)t--;ot.splice(t+1,0,n)}else ot.push(n);st||(st=!0,ae(mt))}}(this)},ht.prototype.run=function(){if(this.active){var n=this.get();if(n!==this.value||d(n)||this.deep){var e=this.value;if(this.value=n,this.user){var t='callback for watcher "'+this.expression+'"';Wn(this.cb,this.vm,[n,e],this.vm,t)}else this.cb.call(this.vm,n,e)}}},ht.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},ht.prototype.depend=function(){for(var n=this.deps.length;n--;)this.deps[n].depend()},ht.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||x(this.vm._watchers,this);for(var n=this.deps.length;n--;)this.deps[n].removeSub(this);this.active=!1}};var gt={enumerable:!0,configurable:!0,get:L,set:L};function vt(n,e,t){gt.get=function(){return this[e][t]},gt.set=function(n){this[e][t]=n},Object.defineProperty(n,t,gt)}function bt(n){n._watchers=[];var e=n.$options;e.props&&function(n,e){var t=n.$options.propsData||{},r=n._props={},o=n.$options._propKeys=[];n.$parent&&Pn(!1);var a=function(a){o.push(a);var i=Un(a,e,t,n);En(r,a,i),a in n||vt(n,"_props",a)};for(var i in e)a(i);Pn(!0)}(n,e.props),e.methods&&function(n,e){n.$options.props;for(var t in e)n[t]="function"!=typeof e[t]?L:E(e[t],n)}(n,e.methods),e.data?function(n){var e=n.$options.data;u(e=n._data="function"==typeof e?function(n,e){hn();try{return n.call(e,e)}catch(n){return $n(n,e,"data()"),{}}finally{gn()}}(e,n):e||{})||(e={});var t=Object.keys(e),r=n.$options.props,o=(n.$options.methods,t.length);for(;o--;){var a=t[o];0,r&&k(r,a)||(i=void 0,36!==(i=(a+"").charCodeAt(0))&&95!==i&&vt(n,"_data",a))}var i;In(e,!0)}(n):In(n._data={},!0),e.computed&&function(n,e){var t=n._computedWatchers=Object.create(null),r=an();for(var o in e){var a=e[o],i="function"==typeof a?a:a.get;0,r||(t[o]=new ht(n,i||L,L,yt)),o in n||xt(n,o,a)}}(n,e.computed),e.watch&&e.watch!==tn&&function(n,e){for(var t in e){var r=e[t];if(Array.isArray(r))for(var o=0;o<r.length;o++)wt(n,t,r[o]);else wt(n,t,r)}}(n,e.watch)}var yt={lazy:!0};function xt(n,e,t){var r=!an();"function"==typeof t?(gt.get=r?_t(e):kt(t),gt.set=L):(gt.get=t.get?r&&!1!==t.cache?_t(e):kt(t.get):L,gt.set=t.set||L),Object.defineProperty(n,e,gt)}function _t(n){return function(){var e=this._computedWatchers&&this._computedWatchers[n];if(e)return e.dirty&&e.evaluate(),mn.target&&e.depend(),e.value}}function kt(n){return function(){return n.call(this,this)}}function wt(n,e,t,r){return u(t)&&(r=t,t=t.handler),"string"==typeof t&&(t=n[t]),n.$watch(e,t,r)}var Tt=0;function St(n){var e=n.options;if(n.super){var t=St(n.super);if(t!==n.superOptions){n.superOptions=t;var r=function(n){var e,t=n.options,r=n.sealedOptions;for(var o in t)t[o]!==r[o]&&(e||(e={}),e[o]=t[o]);return e}(n);r&&D(n.extendOptions,r),(e=n.options=Fn(t,n.extendOptions)).name&&(e.components[e.name]=n)}}return e}function Pt(n){this._init(n)}function Ct(n){n.cid=0;var e=1;n.extend=function(n){n=n||{};var t=this,r=t.cid,o=n._Ctor||(n._Ctor={});if(o[r])return o[r];var a=n.name||t.options.name;var i=function(n){this._init(n)};return(i.prototype=Object.create(t.prototype)).constructor=i,i.cid=e++,i.options=Fn(t.options,n),i.super=t,i.options.props&&function(n){var e=n.options.props;for(var t in e)vt(n.prototype,"_props",t)}(i),i.options.computed&&function(n){var e=n.options.computed;for(var t in e)xt(n.prototype,t,e[t])}(i),i.extend=t.extend,i.mixin=t.mixin,i.use=t.use,F.forEach((function(n){i[n]=t[n]})),a&&(i.options.components[a]=i),i.superOptions=t.options,i.extendOptions=n,i.sealedOptions=D({},i.options),o[r]=i,i}}function It(n){return n&&(n.Ctor.options.name||n.tag)}function Et(n,e){return Array.isArray(n)?n.indexOf(e)>-1:"string"==typeof n?n.split(",").indexOf(e)>-1:!!m(n)&&n.test(e)}function At(n,e){var t=n.cache,r=n.keys,o=n._vnode;for(var a in t){var i=t[a];if(i){var s=i.name;s&&!e(s)&&Dt(t,a,r,o)}}}function Dt(n,e,t,r){var o=n[e];!o||r&&o.tag===r.tag||o.componentInstance.$destroy(),n[e]=null,x(t,e)}Pt.prototype._init=function(n){var e=this;e._uid=Tt++,e._isVue=!0,n&&n._isComponent?function(n,e){var t=n.$options=Object.create(n.constructor.options),r=e._parentVnode;t.parent=e.parent,t._parentVnode=r;var o=r.componentOptions;t.propsData=o.propsData,t._parentListeners=o.listeners,t._renderChildren=o.children,t._componentTag=o.tag,e.render&&(t.render=e.render,t.staticRenderFns=e.staticRenderFns)}(e,n):e.$options=Fn(St(e.constructor),n||{},e),e._renderProxy=e,e._self=e,function(n){var e=n.$options,t=e.parent;if(t&&!e.abstract){for(;t.$options.abstract&&t.$parent;)t=t.$parent;t.$children.push(n)}n.$parent=t,n.$root=t?t.$root:n,n.$children=[],n.$refs={},n._watcher=null,n._inactive=null,n._directInactive=!1,n._isMounted=!1,n._isDestroyed=!1,n._isBeingDestroyed=!1}(e),function(n){n._events=Object.create(null),n._hasHookEvent=!1;var e=n.$options._parentListeners;e&&Ze(n,e)}(e),function(n){n._vnode=null,n._staticTrees=null;var e=n.$options,t=n.$vnode=e._parentVnode,r=t&&t.context;n.$slots=ge(e._renderChildren,r),n.$scopedSlots=a,n._c=function(e,t,r,o){return He(n,e,t,r,o,!1)},n.$createElement=function(e,t,r,o){return He(n,e,t,r,o,!0)};var o=t&&t.data;En(n,"$attrs",o&&o.attrs||a,null,!0),En(n,"$listeners",e._parentListeners||a,null,!0)}(e),rt(e,"beforeCreate"),function(n){var e=he(n.$options.inject,n);e&&(Pn(!1),Object.keys(e).forEach((function(t){En(n,t,e[t])})),Pn(!0))}(e),bt(e),function(n){var e=n.$options.provide;e&&(n._provided="function"==typeof e?e.call(n):e)}(e),rt(e,"created"),e.$options.el&&e.$mount(e.$options.el)},function(n){var e={get:function(){return this._data}},t={get:function(){return this._props}};Object.defineProperty(n.prototype,"$data",e),Object.defineProperty(n.prototype,"$props",t),n.prototype.$set=An,n.prototype.$delete=Dn,n.prototype.$watch=function(n,e,t){if(u(e))return wt(this,n,e,t);(t=t||{}).user=!0;var r=new ht(this,n,e,t);if(t.immediate){var o='callback for immediate watcher "'+r.expression+'"';hn(),Wn(e,this,[r.value],this,o),gn()}return function(){r.teardown()}}}(Pt),function(n){var e=/^hook:/;n.prototype.$on=function(n,t){var r=this;if(Array.isArray(n))for(var o=0,a=n.length;o<a;o++)r.$on(n[o],t);else(r._events[n]||(r._events[n]=[])).push(t),e.test(n)&&(r._hasHookEvent=!0);return r},n.prototype.$once=function(n,e){var t=this;function r(){t.$off(n,r),e.apply(t,arguments)}return r.fn=e,t.$on(n,r),t},n.prototype.$off=function(n,e){var t=this;if(!arguments.length)return t._events=Object.create(null),t;if(Array.isArray(n)){for(var r=0,o=n.length;r<o;r++)t.$off(n[r],e);return t}var a,i=t._events[n];if(!i)return t;if(!e)return t._events[n]=null,t;for(var s=i.length;s--;)if((a=i[s])===e||a.fn===e){i.splice(s,1);break}return t},n.prototype.$emit=function(n){var e=this,t=e._events[n];if(t){t=t.length>1?A(t):t;for(var r=A(arguments,1),o='event handler for "'+n+'"',a=0,i=t.length;a<i;a++)Wn(t[a],e,r,e,o)}return e}}(Pt),function(n){n.prototype._update=function(n,e){var t=this,r=t.$el,o=t._vnode,a=nt(t);t._vnode=n,t.$el=o?t.__patch__(o,n):t.__patch__(t.$el,n,e,!1),a(),r&&(r.__vue__=null),t.$el&&(t.$el.__vue__=t),t.$vnode&&t.$parent&&t.$vnode===t.$parent._vnode&&(t.$parent.$el=t.$el)},n.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},n.prototype.$destroy=function(){var n=this;if(!n._isBeingDestroyed){rt(n,"beforeDestroy"),n._isBeingDestroyed=!0;var e=n.$parent;!e||e._isBeingDestroyed||n.$options.abstract||x(e.$children,n),n._watcher&&n._watcher.teardown();for(var t=n._watchers.length;t--;)n._watchers[t].teardown();n._data.__ob__&&n._data.__ob__.vmCount--,n._isDestroyed=!0,n.__patch__(n._vnode,null),rt(n,"destroyed"),n.$off(),n.$el&&(n.$el.__vue__=null),n.$vnode&&(n.$vnode.parent=null)}}}(Pt),function(n){ze(n.prototype),n.prototype.$nextTick=function(n){return ae(n,this)},n.prototype._render=function(){var n,e=this,t=e.$options,r=t.render,o=t._parentVnode;o&&(e.$scopedSlots=ye(o.data.scopedSlots,e.$slots,e.$scopedSlots)),e.$vnode=o;try{$e=e,n=r.call(e._renderProxy,e.$createElement)}catch(t){$n(t,e,"render"),n=e._vnode}finally{$e=null}return Array.isArray(n)&&1===n.length&&(n=n[0]),n instanceof vn||(n=yn()),n.parent=o,n}}(Pt);var Ot=[String,RegExp,Array],Lt={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Ot,exclude:Ot,max:[String,Number]},methods:{cacheVNode:function(){var n=this.cache,e=this.keys,t=this.vnodeToCache,r=this.keyToCache;if(t){var o=t.tag,a=t.componentInstance,i=t.componentOptions;n[r]={name:It(i),tag:o,componentInstance:a},e.push(r),this.max&&e.length>parseInt(this.max)&&Dt(n,e[0],e,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var n in this.cache)Dt(this.cache,n,this.keys)},mounted:function(){var n=this;this.cacheVNode(),this.$watch("include",(function(e){At(n,(function(n){return Et(e,n)}))})),this.$watch("exclude",(function(e){At(n,(function(n){return!Et(e,n)}))}))},updated:function(){this.cacheVNode()},render:function(){var n=this.$slots.default,e=Ke(n),t=e&&e.componentOptions;if(t){var r=It(t),o=this.include,a=this.exclude;if(o&&(!r||!Et(o,r))||a&&r&&Et(a,r))return e;var i=this.cache,s=this.keys,l=null==e.key?t.Ctor.cid+(t.tag?"::"+t.tag:""):e.key;i[l]?(e.componentInstance=i[l].componentInstance,x(s,l),s.push(l)):(this.vnodeToCache=e,this.keyToCache=l),e.data.keepAlive=!0}return e||n&&n[0]}}};!function(n){var e={get:function(){return U}};Object.defineProperty(n,"config",e),n.util={warn:pn,extend:D,mergeOptions:Fn,defineReactive:En},n.set=An,n.delete=Dn,n.nextTick=ae,n.observable=function(n){return In(n),n},n.options=Object.create(null),F.forEach((function(e){n.options[e+"s"]=Object.create(null)})),n.options._base=n,D(n.options.components,Lt),function(n){n.use=function(n){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(n)>-1)return this;var t=A(arguments,1);return t.unshift(this),"function"==typeof n.install?n.install.apply(n,t):"function"==typeof n&&n.apply(null,t),e.push(n),this}}(n),function(n){n.mixin=function(n){return this.options=Fn(this.options,n),this}}(n),Ct(n),function(n){F.forEach((function(e){n[e]=function(n,t){return t?("component"===e&&u(t)&&(t.name=t.name||n,t=this.options._base.extend(t)),"directive"===e&&"function"==typeof t&&(t={bind:t,update:t}),this.options[e+"s"][n]=t,t):this.options[e+"s"][n]}}))}(n)}(Pt),Object.defineProperty(Pt.prototype,"$isServer",{get:an}),Object.defineProperty(Pt.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Pt,"FunctionalRenderContext",{value:Me}),Pt.version="2.6.14";var jt=b("style,class"),Rt=b("input,textarea,option,select,progress"),zt=b("contenteditable,draggable,spellcheck"),Mt=b("events,caret,typing,plaintext-only"),Nt=b("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),Ft="http://www.w3.org/1999/xlink",qt=function(n){return":"===n.charAt(5)&&"xlink"===n.slice(0,5)},Ut=function(n){return qt(n)?n.slice(6,n.length):""},Bt=function(n){return null==n||!1===n};function Gt(n){for(var e=n.data,t=n,r=n;s(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(e=Ht(r.data,e));for(;s(t=t.parent);)t&&t.data&&(e=Ht(e,t.data));return function(n,e){if(s(n)||s(e))return Vt(n,$t(e));return""}(e.staticClass,e.class)}function Ht(n,e){return{staticClass:Vt(n.staticClass,e.staticClass),class:s(n.class)?[n.class,e.class]:e.class}}function Vt(n,e){return n?e?n+" "+e:n:e||""}function $t(n){return Array.isArray(n)?function(n){for(var e,t="",r=0,o=n.length;r<o;r++)s(e=$t(n[r]))&&""!==e&&(t&&(t+=" "),t+=e);return t}(n):d(n)?function(n){var e="";for(var t in n)n[t]&&(e&&(e+=" "),e+=t);return e}(n):"string"==typeof n?n:""}var Wt={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Kt=b("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Xt=b("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Qt=function(n){return Kt(n)||Xt(n)};var Yt=Object.create(null);var Zt=b("text,number,password,search,email,tel,url");var Jt=Object.freeze({createElement:function(n,e){var t=document.createElement(n);return"select"!==n||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&t.setAttribute("multiple","multiple"),t},createElementNS:function(n,e){return document.createElementNS(Wt[n],e)},createTextNode:function(n){return document.createTextNode(n)},createComment:function(n){return document.createComment(n)},insertBefore:function(n,e,t){n.insertBefore(e,t)},removeChild:function(n,e){n.removeChild(e)},appendChild:function(n,e){n.appendChild(e)},parentNode:function(n){return n.parentNode},nextSibling:function(n){return n.nextSibling},tagName:function(n){return n.tagName},setTextContent:function(n,e){n.textContent=e},setStyleScope:function(n,e){n.setAttribute(e,"")}}),nr={create:function(n,e){er(e)},update:function(n,e){n.data.ref!==e.data.ref&&(er(n,!0),er(e))},destroy:function(n){er(n,!0)}};function er(n,e){var t=n.data.ref;if(s(t)){var r=n.context,o=n.componentInstance||n.elm,a=r.$refs;e?Array.isArray(a[t])?x(a[t],o):a[t]===o&&(a[t]=void 0):n.data.refInFor?Array.isArray(a[t])?a[t].indexOf(o)<0&&a[t].push(o):a[t]=[o]:a[t]=o}}var tr=new vn("",{},[]),rr=["create","activate","update","remove","destroy"];function or(n,e){return n.key===e.key&&n.asyncFactory===e.asyncFactory&&(n.tag===e.tag&&n.isComment===e.isComment&&s(n.data)===s(e.data)&&function(n,e){if("input"!==n.tag)return!0;var t,r=s(t=n.data)&&s(t=t.attrs)&&t.type,o=s(t=e.data)&&s(t=t.attrs)&&t.type;return r===o||Zt(r)&&Zt(o)}(n,e)||l(n.isAsyncPlaceholder)&&i(e.asyncFactory.error))}function ar(n,e,t){var r,o,a={};for(r=e;r<=t;++r)s(o=n[r].key)&&(a[o]=r);return a}var ir={create:sr,update:sr,destroy:function(n){sr(n,tr)}};function sr(n,e){(n.data.directives||e.data.directives)&&function(n,e){var t,r,o,a=n===tr,i=e===tr,s=cr(n.data.directives,n.context),l=cr(e.data.directives,e.context),c=[],d=[];for(t in l)r=s[t],o=l[t],r?(o.oldValue=r.value,o.oldArg=r.arg,pr(o,"update",e,n),o.def&&o.def.componentUpdated&&d.push(o)):(pr(o,"bind",e,n),o.def&&o.def.inserted&&c.push(o));if(c.length){var p=function(){for(var t=0;t<c.length;t++)pr(c[t],"inserted",e,n)};a?pe(e,"insert",p):p()}d.length&&pe(e,"postpatch",(function(){for(var t=0;t<d.length;t++)pr(d[t],"componentUpdated",e,n)}));if(!a)for(t in s)l[t]||pr(s[t],"unbind",n,n,i)}(n,e)}var lr=Object.create(null);function cr(n,e){var t,r,o=Object.create(null);if(!n)return o;for(t=0;t<n.length;t++)(r=n[t]).modifiers||(r.modifiers=lr),o[dr(r)]=r,r.def=qn(e.$options,"directives",r.name);return o}function dr(n){return n.rawName||n.name+"."+Object.keys(n.modifiers||{}).join(".")}function pr(n,e,t,r,o){var a=n.def&&n.def[e];if(a)try{a(t.elm,n,t,r,o)}catch(r){$n(r,t.context,"directive "+n.name+" "+e+" hook")}}var ur=[nr,ir];function mr(n,e){var t=e.componentOptions;if(!(s(t)&&!1===t.Ctor.options.inheritAttrs||i(n.data.attrs)&&i(e.data.attrs))){var r,o,a=e.elm,l=n.data.attrs||{},c=e.data.attrs||{};for(r in s(c.__ob__)&&(c=e.data.attrs=D({},c)),c)o=c[r],l[r]!==o&&fr(a,r,o,e.data.pre);for(r in(Y||J)&&c.value!==l.value&&fr(a,"value",c.value),l)i(c[r])&&(qt(r)?a.removeAttributeNS(Ft,Ut(r)):zt(r)||a.removeAttribute(r))}}function fr(n,e,t,r){r||n.tagName.indexOf("-")>-1?hr(n,e,t):Nt(e)?Bt(t)?n.removeAttribute(e):(t="allowfullscreen"===e&&"EMBED"===n.tagName?"true":e,n.setAttribute(e,t)):zt(e)?n.setAttribute(e,function(n,e){return Bt(e)||"false"===e?"false":"contenteditable"===n&&Mt(e)?e:"true"}(e,t)):qt(e)?Bt(t)?n.removeAttributeNS(Ft,Ut(e)):n.setAttributeNS(Ft,e,t):hr(n,e,t)}function hr(n,e,t){if(Bt(t))n.removeAttribute(e);else{if(Y&&!Z&&"TEXTAREA"===n.tagName&&"placeholder"===e&&""!==t&&!n.__ieph){var r=function(e){e.stopImmediatePropagation(),n.removeEventListener("input",r)};n.addEventListener("input",r),n.__ieph=!0}n.setAttribute(e,t)}}var gr={create:mr,update:mr};function vr(n,e){var t=e.elm,r=e.data,o=n.data;if(!(i(r.staticClass)&&i(r.class)&&(i(o)||i(o.staticClass)&&i(o.class)))){var a=Gt(e),l=t._transitionClasses;s(l)&&(a=Vt(a,$t(l))),a!==t._prevClass&&(t.setAttribute("class",a),t._prevClass=a)}}var br,yr={create:vr,update:vr};function xr(n,e,t){var r=br;return function o(){var a=e.apply(null,arguments);null!==a&&wr(n,o,t,r)}}var _r=Yn&&!(en&&Number(en[1])<=53);function kr(n,e,t,r){if(_r){var o=dt,a=e;e=a._wrapper=function(n){if(n.target===n.currentTarget||n.timeStamp>=o||n.timeStamp<=0||n.target.ownerDocument!==document)return a.apply(this,arguments)}}br.addEventListener(n,e,rn?{capture:t,passive:r}:t)}function wr(n,e,t,r){(r||br).removeEventListener(n,e._wrapper||e,t)}function Tr(n,e){if(!i(n.data.on)||!i(e.data.on)){var t=e.data.on||{},r=n.data.on||{};br=e.elm,function(n){if(s(n.__r)){var e=Y?"change":"input";n[e]=[].concat(n.__r,n[e]||[]),delete n.__r}s(n.__c)&&(n.change=[].concat(n.__c,n.change||[]),delete n.__c)}(t),de(t,r,kr,wr,xr,e.context),br=void 0}}var Sr,Pr={create:Tr,update:Tr};function Cr(n,e){if(!i(n.data.domProps)||!i(e.data.domProps)){var t,r,o=e.elm,a=n.data.domProps||{},l=e.data.domProps||{};for(t in s(l.__ob__)&&(l=e.data.domProps=D({},l)),a)t in l||(o[t]="");for(t in l){if(r=l[t],"textContent"===t||"innerHTML"===t){if(e.children&&(e.children.length=0),r===a[t])continue;1===o.childNodes.length&&o.removeChild(o.childNodes[0])}if("value"===t&&"PROGRESS"!==o.tagName){o._value=r;var c=i(r)?"":String(r);Ir(o,c)&&(o.value=c)}else if("innerHTML"===t&&Xt(o.tagName)&&i(o.innerHTML)){(Sr=Sr||document.createElement("div")).innerHTML="<svg>"+r+"</svg>";for(var d=Sr.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;d.firstChild;)o.appendChild(d.firstChild)}else if(r!==a[t])try{o[t]=r}catch(n){}}}}function Ir(n,e){return!n.composing&&("OPTION"===n.tagName||function(n,e){var t=!0;try{t=document.activeElement!==n}catch(n){}return t&&n.value!==e}(n,e)||function(n,e){var t=n.value,r=n._vModifiers;if(s(r)){if(r.number)return v(t)!==v(e);if(r.trim)return t.trim()!==e.trim()}return t!==e}(n,e))}var Er={create:Cr,update:Cr},Ar=w((function(n){var e={},t=/:(.+)/;return n.split(/;(?![^(]*\))/g).forEach((function(n){if(n){var r=n.split(t);r.length>1&&(e[r[0].trim()]=r[1].trim())}})),e}));function Dr(n){var e=Or(n.style);return n.staticStyle?D(n.staticStyle,e):e}function Or(n){return Array.isArray(n)?O(n):"string"==typeof n?Ar(n):n}var Lr,jr=/^--/,Rr=/\s*!important$/,zr=function(n,e,t){if(jr.test(e))n.style.setProperty(e,t);else if(Rr.test(t))n.style.setProperty(I(e),t.replace(Rr,""),"important");else{var r=Nr(e);if(Array.isArray(t))for(var o=0,a=t.length;o<a;o++)n.style[r]=t[o];else n.style[r]=t}},Mr=["Webkit","Moz","ms"],Nr=w((function(n){if(Lr=Lr||document.createElement("div").style,"filter"!==(n=S(n))&&n in Lr)return n;for(var e=n.charAt(0).toUpperCase()+n.slice(1),t=0;t<Mr.length;t++){var r=Mr[t]+e;if(r in Lr)return r}}));function Fr(n,e){var t=e.data,r=n.data;if(!(i(t.staticStyle)&&i(t.style)&&i(r.staticStyle)&&i(r.style))){var o,a,l=e.elm,c=r.staticStyle,d=r.normalizedStyle||r.style||{},p=c||d,u=Or(e.data.style)||{};e.data.normalizedStyle=s(u.__ob__)?D({},u):u;var m=function(n,e){var t,r={};if(e)for(var o=n;o.componentInstance;)(o=o.componentInstance._vnode)&&o.data&&(t=Dr(o.data))&&D(r,t);(t=Dr(n.data))&&D(r,t);for(var a=n;a=a.parent;)a.data&&(t=Dr(a.data))&&D(r,t);return r}(e,!0);for(a in p)i(m[a])&&zr(l,a,"");for(a in m)(o=m[a])!==p[a]&&zr(l,a,null==o?"":o)}}var qr={create:Fr,update:Fr},Ur=/\s+/;function Br(n,e){if(e&&(e=e.trim()))if(n.classList)e.indexOf(" ")>-1?e.split(Ur).forEach((function(e){return n.classList.add(e)})):n.classList.add(e);else{var t=" "+(n.getAttribute("class")||"")+" ";t.indexOf(" "+e+" ")<0&&n.setAttribute("class",(t+e).trim())}}function Gr(n,e){if(e&&(e=e.trim()))if(n.classList)e.indexOf(" ")>-1?e.split(Ur).forEach((function(e){return n.classList.remove(e)})):n.classList.remove(e),n.classList.length||n.removeAttribute("class");else{for(var t=" "+(n.getAttribute("class")||"")+" ",r=" "+e+" ";t.indexOf(r)>=0;)t=t.replace(r," ");(t=t.trim())?n.setAttribute("class",t):n.removeAttribute("class")}}function Hr(n){if(n){if("object"==typeof n){var e={};return!1!==n.css&&D(e,Vr(n.name||"v")),D(e,n),e}return"string"==typeof n?Vr(n):void 0}}var Vr=w((function(n){return{enterClass:n+"-enter",enterToClass:n+"-enter-to",enterActiveClass:n+"-enter-active",leaveClass:n+"-leave",leaveToClass:n+"-leave-to",leaveActiveClass:n+"-leave-active"}})),$r=W&&!Z,Wr="transition",Kr="transitionend",Xr="animation",Qr="animationend";$r&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Wr="WebkitTransition",Kr="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Xr="WebkitAnimation",Qr="webkitAnimationEnd"));var Yr=W?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(n){return n()};function Zr(n){Yr((function(){Yr(n)}))}function Jr(n,e){var t=n._transitionClasses||(n._transitionClasses=[]);t.indexOf(e)<0&&(t.push(e),Br(n,e))}function no(n,e){n._transitionClasses&&x(n._transitionClasses,e),Gr(n,e)}function eo(n,e,t){var r=ro(n,e),o=r.type,a=r.timeout,i=r.propCount;if(!o)return t();var s="transition"===o?Kr:Qr,l=0,c=function(){n.removeEventListener(s,d),t()},d=function(e){e.target===n&&++l>=i&&c()};setTimeout((function(){l<i&&c()}),a+1),n.addEventListener(s,d)}var to=/\b(transform|all)(,|$)/;function ro(n,e){var t,r=window.getComputedStyle(n),o=(r[Wr+"Delay"]||"").split(", "),a=(r[Wr+"Duration"]||"").split(", "),i=oo(o,a),s=(r[Xr+"Delay"]||"").split(", "),l=(r[Xr+"Duration"]||"").split(", "),c=oo(s,l),d=0,p=0;return"transition"===e?i>0&&(t="transition",d=i,p=a.length):"animation"===e?c>0&&(t="animation",d=c,p=l.length):p=(t=(d=Math.max(i,c))>0?i>c?"transition":"animation":null)?"transition"===t?a.length:l.length:0,{type:t,timeout:d,propCount:p,hasTransform:"transition"===t&&to.test(r[Wr+"Property"])}}function oo(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max.apply(null,e.map((function(e,t){return ao(e)+ao(n[t])})))}function ao(n){return 1e3*Number(n.slice(0,-1).replace(",","."))}function io(n,e){var t=n.elm;s(t._leaveCb)&&(t._leaveCb.cancelled=!0,t._leaveCb());var r=Hr(n.data.transition);if(!i(r)&&!s(t._enterCb)&&1===t.nodeType){for(var o=r.css,a=r.type,l=r.enterClass,c=r.enterToClass,p=r.enterActiveClass,u=r.appearClass,m=r.appearToClass,f=r.appearActiveClass,h=r.beforeEnter,g=r.enter,b=r.afterEnter,y=r.enterCancelled,x=r.beforeAppear,_=r.appear,k=r.afterAppear,w=r.appearCancelled,T=r.duration,S=Je,P=Je.$vnode;P&&P.parent;)S=P.context,P=P.parent;var C=!S._isMounted||!n.isRootInsert;if(!C||_||""===_){var I=C&&u?u:l,E=C&&f?f:p,A=C&&m?m:c,D=C&&x||h,O=C&&"function"==typeof _?_:g,L=C&&k||b,j=C&&w||y,R=v(d(T)?T.enter:T);0;var z=!1!==o&&!Z,M=co(O),F=t._enterCb=N((function(){z&&(no(t,A),no(t,E)),F.cancelled?(z&&no(t,I),j&&j(t)):L&&L(t),t._enterCb=null}));n.data.show||pe(n,"insert",(function(){var e=t.parentNode,r=e&&e._pending&&e._pending[n.key];r&&r.tag===n.tag&&r.elm._leaveCb&&r.elm._leaveCb(),O&&O(t,F)})),D&&D(t),z&&(Jr(t,I),Jr(t,E),Zr((function(){no(t,I),F.cancelled||(Jr(t,A),M||(lo(R)?setTimeout(F,R):eo(t,a,F)))}))),n.data.show&&(e&&e(),O&&O(t,F)),z||M||F()}}}function so(n,e){var t=n.elm;s(t._enterCb)&&(t._enterCb.cancelled=!0,t._enterCb());var r=Hr(n.data.transition);if(i(r)||1!==t.nodeType)return e();if(!s(t._leaveCb)){var o=r.css,a=r.type,l=r.leaveClass,c=r.leaveToClass,p=r.leaveActiveClass,u=r.beforeLeave,m=r.leave,f=r.afterLeave,h=r.leaveCancelled,g=r.delayLeave,b=r.duration,y=!1!==o&&!Z,x=co(m),_=v(d(b)?b.leave:b);0;var k=t._leaveCb=N((function(){t.parentNode&&t.parentNode._pending&&(t.parentNode._pending[n.key]=null),y&&(no(t,c),no(t,p)),k.cancelled?(y&&no(t,l),h&&h(t)):(e(),f&&f(t)),t._leaveCb=null}));g?g(w):w()}function w(){k.cancelled||(!n.data.show&&t.parentNode&&((t.parentNode._pending||(t.parentNode._pending={}))[n.key]=n),u&&u(t),y&&(Jr(t,l),Jr(t,p),Zr((function(){no(t,l),k.cancelled||(Jr(t,c),x||(lo(_)?setTimeout(k,_):eo(t,a,k)))}))),m&&m(t,k),y||x||k())}}function lo(n){return"number"==typeof n&&!isNaN(n)}function co(n){if(i(n))return!1;var e=n.fns;return s(e)?co(Array.isArray(e)?e[0]:e):(n._length||n.length)>1}function po(n,e){!0!==e.data.show&&io(e)}var uo=function(n){var e,t,r={},o=n.modules,a=n.nodeOps;for(e=0;e<rr.length;++e)for(r[rr[e]]=[],t=0;t<o.length;++t)s(o[t][rr[e]])&&r[rr[e]].push(o[t][rr[e]]);function d(n){var e=a.parentNode(n);s(e)&&a.removeChild(e,n)}function p(n,e,t,o,i,c,d){if(s(n.elm)&&s(c)&&(n=c[d]=_n(n)),n.isRootInsert=!i,!function(n,e,t,o){var a=n.data;if(s(a)){var i=s(n.componentInstance)&&a.keepAlive;if(s(a=a.hook)&&s(a=a.init)&&a(n,!1),s(n.componentInstance))return u(n,e),m(t,n.elm,o),l(i)&&function(n,e,t,o){var a,i=n;for(;i.componentInstance;)if(i=i.componentInstance._vnode,s(a=i.data)&&s(a=a.transition)){for(a=0;a<r.activate.length;++a)r.activate[a](tr,i);e.push(i);break}m(t,n.elm,o)}(n,e,t,o),!0}}(n,e,t,o)){var p=n.data,h=n.children,b=n.tag;s(b)?(n.elm=n.ns?a.createElementNS(n.ns,b):a.createElement(b,n),v(n),f(n,h,e),s(p)&&g(n,e),m(t,n.elm,o)):l(n.isComment)?(n.elm=a.createComment(n.text),m(t,n.elm,o)):(n.elm=a.createTextNode(n.text),m(t,n.elm,o))}}function u(n,e){s(n.data.pendingInsert)&&(e.push.apply(e,n.data.pendingInsert),n.data.pendingInsert=null),n.elm=n.componentInstance.$el,h(n)?(g(n,e),v(n)):(er(n),e.push(n))}function m(n,e,t){s(n)&&(s(t)?a.parentNode(t)===n&&a.insertBefore(n,e,t):a.appendChild(n,e))}function f(n,e,t){if(Array.isArray(e)){0;for(var r=0;r<e.length;++r)p(e[r],t,n.elm,null,!0,e,r)}else c(n.text)&&a.appendChild(n.elm,a.createTextNode(String(n.text)))}function h(n){for(;n.componentInstance;)n=n.componentInstance._vnode;return s(n.tag)}function g(n,t){for(var o=0;o<r.create.length;++o)r.create[o](tr,n);s(e=n.data.hook)&&(s(e.create)&&e.create(tr,n),s(e.insert)&&t.push(n))}function v(n){var e;if(s(e=n.fnScopeId))a.setStyleScope(n.elm,e);else for(var t=n;t;)s(e=t.context)&&s(e=e.$options._scopeId)&&a.setStyleScope(n.elm,e),t=t.parent;s(e=Je)&&e!==n.context&&e!==n.fnContext&&s(e=e.$options._scopeId)&&a.setStyleScope(n.elm,e)}function y(n,e,t,r,o,a){for(;r<=o;++r)p(t[r],a,n,e,!1,t,r)}function x(n){var e,t,o=n.data;if(s(o))for(s(e=o.hook)&&s(e=e.destroy)&&e(n),e=0;e<r.destroy.length;++e)r.destroy[e](n);if(s(e=n.children))for(t=0;t<n.children.length;++t)x(n.children[t])}function _(n,e,t){for(;e<=t;++e){var r=n[e];s(r)&&(s(r.tag)?(k(r),x(r)):d(r.elm))}}function k(n,e){if(s(e)||s(n.data)){var t,o=r.remove.length+1;for(s(e)?e.listeners+=o:e=function(n,e){function t(){0==--t.listeners&&d(n)}return t.listeners=e,t}(n.elm,o),s(t=n.componentInstance)&&s(t=t._vnode)&&s(t.data)&&k(t,e),t=0;t<r.remove.length;++t)r.remove[t](n,e);s(t=n.data.hook)&&s(t=t.remove)?t(n,e):e()}else d(n.elm)}function w(n,e,t,r){for(var o=t;o<r;o++){var a=e[o];if(s(a)&&or(n,a))return o}}function T(n,e,t,o,c,d){if(n!==e){s(e.elm)&&s(o)&&(e=o[c]=_n(e));var u=e.elm=n.elm;if(l(n.isAsyncPlaceholder))s(e.asyncFactory.resolved)?C(n.elm,e,t):e.isAsyncPlaceholder=!0;else if(l(e.isStatic)&&l(n.isStatic)&&e.key===n.key&&(l(e.isCloned)||l(e.isOnce)))e.componentInstance=n.componentInstance;else{var m,f=e.data;s(f)&&s(m=f.hook)&&s(m=m.prepatch)&&m(n,e);var g=n.children,v=e.children;if(s(f)&&h(e)){for(m=0;m<r.update.length;++m)r.update[m](n,e);s(m=f.hook)&&s(m=m.update)&&m(n,e)}i(e.text)?s(g)&&s(v)?g!==v&&function(n,e,t,r,o){var l,c,d,u=0,m=0,f=e.length-1,h=e[0],g=e[f],v=t.length-1,b=t[0],x=t[v],k=!o;for(0;u<=f&&m<=v;)i(h)?h=e[++u]:i(g)?g=e[--f]:or(h,b)?(T(h,b,r,t,m),h=e[++u],b=t[++m]):or(g,x)?(T(g,x,r,t,v),g=e[--f],x=t[--v]):or(h,x)?(T(h,x,r,t,v),k&&a.insertBefore(n,h.elm,a.nextSibling(g.elm)),h=e[++u],x=t[--v]):or(g,b)?(T(g,b,r,t,m),k&&a.insertBefore(n,g.elm,h.elm),g=e[--f],b=t[++m]):(i(l)&&(l=ar(e,u,f)),i(c=s(b.key)?l[b.key]:w(b,e,u,f))?p(b,r,n,h.elm,!1,t,m):or(d=e[c],b)?(T(d,b,r,t,m),e[c]=void 0,k&&a.insertBefore(n,d.elm,h.elm)):p(b,r,n,h.elm,!1,t,m),b=t[++m]);u>f?y(n,i(t[v+1])?null:t[v+1].elm,t,m,v,r):m>v&&_(e,u,f)}(u,g,v,t,d):s(v)?(s(n.text)&&a.setTextContent(u,""),y(u,null,v,0,v.length-1,t)):s(g)?_(g,0,g.length-1):s(n.text)&&a.setTextContent(u,""):n.text!==e.text&&a.setTextContent(u,e.text),s(f)&&s(m=f.hook)&&s(m=m.postpatch)&&m(n,e)}}}function S(n,e,t){if(l(t)&&s(n.parent))n.parent.data.pendingInsert=e;else for(var r=0;r<e.length;++r)e[r].data.hook.insert(e[r])}var P=b("attrs,class,staticClass,staticStyle,key");function C(n,e,t,r){var o,a=e.tag,i=e.data,c=e.children;if(r=r||i&&i.pre,e.elm=n,l(e.isComment)&&s(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(s(i)&&(s(o=i.hook)&&s(o=o.init)&&o(e,!0),s(o=e.componentInstance)))return u(e,t),!0;if(s(a)){if(s(c))if(n.hasChildNodes())if(s(o=i)&&s(o=o.domProps)&&s(o=o.innerHTML)){if(o!==n.innerHTML)return!1}else{for(var d=!0,p=n.firstChild,m=0;m<c.length;m++){if(!p||!C(p,c[m],t,r)){d=!1;break}p=p.nextSibling}if(!d||p)return!1}else f(e,c,t);if(s(i)){var h=!1;for(var v in i)if(!P(v)){h=!0,g(e,t);break}!h&&i.class&&se(i.class)}}else n.data!==e.text&&(n.data=e.text);return!0}return function(n,e,t,o){if(!i(e)){var c,d=!1,u=[];if(i(n))d=!0,p(e,u);else{var m=s(n.nodeType);if(!m&&or(n,e))T(n,e,u,null,null,o);else{if(m){if(1===n.nodeType&&n.hasAttribute("data-server-rendered")&&(n.removeAttribute("data-server-rendered"),t=!0),l(t)&&C(n,e,u))return S(e,u,!0),n;c=n,n=new vn(a.tagName(c).toLowerCase(),{},[],void 0,c)}var f=n.elm,g=a.parentNode(f);if(p(e,u,f._leaveCb?null:g,a.nextSibling(f)),s(e.parent))for(var v=e.parent,b=h(e);v;){for(var y=0;y<r.destroy.length;++y)r.destroy[y](v);if(v.elm=e.elm,b){for(var k=0;k<r.create.length;++k)r.create[k](tr,v);var w=v.data.hook.insert;if(w.merged)for(var P=1;P<w.fns.length;P++)w.fns[P]()}else er(v);v=v.parent}s(g)?_([n],0,0):s(n.tag)&&x(n)}}return S(e,u,d),e.elm}s(n)&&x(n)}}({nodeOps:Jt,modules:[gr,yr,Pr,Er,qr,W?{create:po,activate:po,remove:function(n,e){!0!==n.data.show?so(n,e):e()}}:{}].concat(ur)});Z&&document.addEventListener("selectionchange",(function(){var n=document.activeElement;n&&n.vmodel&&xo(n,"input")}));var mo={inserted:function(n,e,t,r){"select"===t.tag?(r.elm&&!r.elm._vOptions?pe(t,"postpatch",(function(){mo.componentUpdated(n,e,t)})):fo(n,e,t.context),n._vOptions=[].map.call(n.options,vo)):("textarea"===t.tag||Zt(n.type))&&(n._vModifiers=e.modifiers,e.modifiers.lazy||(n.addEventListener("compositionstart",bo),n.addEventListener("compositionend",yo),n.addEventListener("change",yo),Z&&(n.vmodel=!0)))},componentUpdated:function(n,e,t){if("select"===t.tag){fo(n,e,t.context);var r=n._vOptions,o=n._vOptions=[].map.call(n.options,vo);if(o.some((function(n,e){return!z(n,r[e])})))(n.multiple?e.value.some((function(n){return go(n,o)})):e.value!==e.oldValue&&go(e.value,o))&&xo(n,"change")}}};function fo(n,e,t){ho(n,e,t),(Y||J)&&setTimeout((function(){ho(n,e,t)}),0)}function ho(n,e,t){var r=e.value,o=n.multiple;if(!o||Array.isArray(r)){for(var a,i,s=0,l=n.options.length;s<l;s++)if(i=n.options[s],o)a=M(r,vo(i))>-1,i.selected!==a&&(i.selected=a);else if(z(vo(i),r))return void(n.selectedIndex!==s&&(n.selectedIndex=s));o||(n.selectedIndex=-1)}}function go(n,e){return e.every((function(e){return!z(e,n)}))}function vo(n){return"_value"in n?n._value:n.value}function bo(n){n.target.composing=!0}function yo(n){n.target.composing&&(n.target.composing=!1,xo(n.target,"input"))}function xo(n,e){var t=document.createEvent("HTMLEvents");t.initEvent(e,!0,!0),n.dispatchEvent(t)}function _o(n){return!n.componentInstance||n.data&&n.data.transition?n:_o(n.componentInstance._vnode)}var ko={model:mo,show:{bind:function(n,e,t){var r=e.value,o=(t=_o(t)).data&&t.data.transition,a=n.__vOriginalDisplay="none"===n.style.display?"":n.style.display;r&&o?(t.data.show=!0,io(t,(function(){n.style.display=a}))):n.style.display=r?a:"none"},update:function(n,e,t){var r=e.value;!r!=!e.oldValue&&((t=_o(t)).data&&t.data.transition?(t.data.show=!0,r?io(t,(function(){n.style.display=n.__vOriginalDisplay})):so(t,(function(){n.style.display="none"}))):n.style.display=r?n.__vOriginalDisplay:"none")},unbind:function(n,e,t,r,o){o||(n.style.display=n.__vOriginalDisplay)}}},wo={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function To(n){var e=n&&n.componentOptions;return e&&e.Ctor.options.abstract?To(Ke(e.children)):n}function So(n){var e={},t=n.$options;for(var r in t.propsData)e[r]=n[r];var o=t._parentListeners;for(var a in o)e[S(a)]=o[a];return e}function Po(n,e){if(/\d-keep-alive$/.test(e.tag))return n("keep-alive",{props:e.componentOptions.propsData})}var Co=function(n){return n.tag||be(n)},Io=function(n){return"show"===n.name},Eo={name:"transition",props:wo,abstract:!0,render:function(n){var e=this,t=this.$slots.default;if(t&&(t=t.filter(Co)).length){0;var r=this.mode;0;var o=t[0];if(function(n){for(;n=n.parent;)if(n.data.transition)return!0}(this.$vnode))return o;var a=To(o);if(!a)return o;if(this._leaving)return Po(n,o);var i="__transition-"+this._uid+"-";a.key=null==a.key?a.isComment?i+"comment":i+a.tag:c(a.key)?0===String(a.key).indexOf(i)?a.key:i+a.key:a.key;var s=(a.data||(a.data={})).transition=So(this),l=this._vnode,d=To(l);if(a.data.directives&&a.data.directives.some(Io)&&(a.data.show=!0),d&&d.data&&!function(n,e){return e.key===n.key&&e.tag===n.tag}(a,d)&&!be(d)&&(!d.componentInstance||!d.componentInstance._vnode.isComment)){var p=d.data.transition=D({},s);if("out-in"===r)return this._leaving=!0,pe(p,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),Po(n,o);if("in-out"===r){if(be(a))return l;var u,m=function(){u()};pe(s,"afterEnter",m),pe(s,"enterCancelled",m),pe(p,"delayLeave",(function(n){u=n}))}}return o}}},Ao=D({tag:String,moveClass:String},wo);function Do(n){n.elm._moveCb&&n.elm._moveCb(),n.elm._enterCb&&n.elm._enterCb()}function Oo(n){n.data.newPos=n.elm.getBoundingClientRect()}function Lo(n){var e=n.data.pos,t=n.data.newPos,r=e.left-t.left,o=e.top-t.top;if(r||o){n.data.moved=!0;var a=n.elm.style;a.transform=a.WebkitTransform="translate("+r+"px,"+o+"px)",a.transitionDuration="0s"}}delete Ao.mode;var jo={Transition:Eo,TransitionGroup:{props:Ao,beforeMount:function(){var n=this,e=this._update;this._update=function(t,r){var o=nt(n);n.__patch__(n._vnode,n.kept,!1,!0),n._vnode=n.kept,o(),e.call(n,t,r)}},render:function(n){for(var e=this.tag||this.$vnode.data.tag||"span",t=Object.create(null),r=this.prevChildren=this.children,o=this.$slots.default||[],a=this.children=[],i=So(this),s=0;s<o.length;s++){var l=o[s];if(l.tag)if(null!=l.key&&0!==String(l.key).indexOf("__vlist"))a.push(l),t[l.key]=l,(l.data||(l.data={})).transition=i;else;}if(r){for(var c=[],d=[],p=0;p<r.length;p++){var u=r[p];u.data.transition=i,u.data.pos=u.elm.getBoundingClientRect(),t[u.key]?c.push(u):d.push(u)}this.kept=n(e,null,c),this.removed=d}return n(e,null,a)},updated:function(){var n=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";n.length&&this.hasMove(n[0].elm,e)&&(n.forEach(Do),n.forEach(Oo),n.forEach(Lo),this._reflow=document.body.offsetHeight,n.forEach((function(n){if(n.data.moved){var t=n.elm,r=t.style;Jr(t,e),r.transform=r.WebkitTransform=r.transitionDuration="",t.addEventListener(Kr,t._moveCb=function n(r){r&&r.target!==t||r&&!/transform$/.test(r.propertyName)||(t.removeEventListener(Kr,n),t._moveCb=null,no(t,e))})}})))},methods:{hasMove:function(n,e){if(!$r)return!1;if(this._hasMove)return this._hasMove;var t=n.cloneNode();n._transitionClasses&&n._transitionClasses.forEach((function(n){Gr(t,n)})),Br(t,e),t.style.display="none",this.$el.appendChild(t);var r=ro(t);return this.$el.removeChild(t),this._hasMove=r.hasTransform}}}};Pt.config.mustUseProp=function(n,e,t){return"value"===t&&Rt(n)&&"button"!==e||"selected"===t&&"option"===n||"checked"===t&&"input"===n||"muted"===t&&"video"===n},Pt.config.isReservedTag=Qt,Pt.config.isReservedAttr=jt,Pt.config.getTagNamespace=function(n){return Xt(n)?"svg":"math"===n?"math":void 0},Pt.config.isUnknownElement=function(n){if(!W)return!0;if(Qt(n))return!1;if(n=n.toLowerCase(),null!=Yt[n])return Yt[n];var e=document.createElement(n);return n.indexOf("-")>-1?Yt[n]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:Yt[n]=/HTMLUnknownElement/.test(e.toString())},D(Pt.options.directives,ko),D(Pt.options.components,jo),Pt.prototype.__patch__=W?uo:L,Pt.prototype.$mount=function(n,e){return function(n,e,t){var r;return n.$el=e,n.$options.render||(n.$options.render=yn),rt(n,"beforeMount"),r=function(){n._update(n._render(),t)},new ht(n,r,L,{before:function(){n._isMounted&&!n._isDestroyed&&rt(n,"beforeUpdate")}},!0),t=!1,null==n.$vnode&&(n._isMounted=!0,rt(n,"mounted")),n}(this,n=n&&W?function(n){if("string"==typeof n){var e=document.querySelector(n);return e||document.createElement("div")}return n}(n):void 0,e)},W&&setTimeout((function(){U.devtools&&sn&&sn.emit("init",Pt)}),0);var Ro=Pt;
/*!
  * vue-router v3.5.3
  * (c) 2021 Evan You
  * @license MIT
  */function zo(n,e){for(var t in e)n[t]=e[t];return n}var Mo=/[!'()*]/g,No=function(n){return"%"+n.charCodeAt(0).toString(16)},Fo=/%2C/g,qo=function(n){return encodeURIComponent(n).replace(Mo,No).replace(Fo,",")};function Uo(n){try{return decodeURIComponent(n)}catch(n){0}return n}var Bo=function(n){return null==n||"object"==typeof n?n:String(n)};function Go(n){var e={};return(n=n.trim().replace(/^(\?|#|&)/,""))?(n.split("&").forEach((function(n){var t=n.replace(/\+/g," ").split("="),r=Uo(t.shift()),o=t.length>0?Uo(t.join("=")):null;void 0===e[r]?e[r]=o:Array.isArray(e[r])?e[r].push(o):e[r]=[e[r],o]})),e):e}function Ho(n){var e=n?Object.keys(n).map((function(e){var t=n[e];if(void 0===t)return"";if(null===t)return qo(e);if(Array.isArray(t)){var r=[];return t.forEach((function(n){void 0!==n&&(null===n?r.push(qo(e)):r.push(qo(e)+"="+qo(n)))})),r.join("&")}return qo(e)+"="+qo(t)})).filter((function(n){return n.length>0})).join("&"):null;return e?"?"+e:""}var Vo=/\/?$/;function $o(n,e,t,r){var o=r&&r.options.stringifyQuery,a=e.query||{};try{a=Wo(a)}catch(n){}var i={name:e.name||n&&n.name,meta:n&&n.meta||{},path:e.path||"/",hash:e.hash||"",query:a,params:e.params||{},fullPath:Qo(e,o),matched:n?Xo(n):[]};return t&&(i.redirectedFrom=Qo(t,o)),Object.freeze(i)}function Wo(n){if(Array.isArray(n))return n.map(Wo);if(n&&"object"==typeof n){var e={};for(var t in n)e[t]=Wo(n[t]);return e}return n}var Ko=$o(null,{path:"/"});function Xo(n){for(var e=[];n;)e.unshift(n),n=n.parent;return e}function Qo(n,e){var t=n.path,r=n.query;void 0===r&&(r={});var o=n.hash;return void 0===o&&(o=""),(t||"/")+(e||Ho)(r)+o}function Yo(n,e,t){return e===Ko?n===e:!!e&&(n.path&&e.path?n.path.replace(Vo,"")===e.path.replace(Vo,"")&&(t||n.hash===e.hash&&Zo(n.query,e.query)):!(!n.name||!e.name)&&(n.name===e.name&&(t||n.hash===e.hash&&Zo(n.query,e.query)&&Zo(n.params,e.params))))}function Zo(n,e){if(void 0===n&&(n={}),void 0===e&&(e={}),!n||!e)return n===e;var t=Object.keys(n).sort(),r=Object.keys(e).sort();return t.length===r.length&&t.every((function(t,o){var a=n[t];if(r[o]!==t)return!1;var i=e[t];return null==a||null==i?a===i:"object"==typeof a&&"object"==typeof i?Zo(a,i):String(a)===String(i)}))}function Jo(n){for(var e=0;e<n.matched.length;e++){var t=n.matched[e];for(var r in t.instances){var o=t.instances[r],a=t.enteredCbs[r];if(o&&a){delete t.enteredCbs[r];for(var i=0;i<a.length;i++)o._isBeingDestroyed||a[i](o)}}}}var na={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(n,e){var t=e.props,r=e.children,o=e.parent,a=e.data;a.routerView=!0;for(var i=o.$createElement,s=t.name,l=o.$route,c=o._routerViewCache||(o._routerViewCache={}),d=0,p=!1;o&&o._routerRoot!==o;){var u=o.$vnode?o.$vnode.data:{};u.routerView&&d++,u.keepAlive&&o._directInactive&&o._inactive&&(p=!0),o=o.$parent}if(a.routerViewDepth=d,p){var m=c[s],f=m&&m.component;return f?(m.configProps&&ea(f,a,m.route,m.configProps),i(f,a,r)):i()}var h=l.matched[d],g=h&&h.components[s];if(!h||!g)return c[s]=null,i();c[s]={component:g},a.registerRouteInstance=function(n,e){var t=h.instances[s];(e&&t!==n||!e&&t===n)&&(h.instances[s]=e)},(a.hook||(a.hook={})).prepatch=function(n,e){h.instances[s]=e.componentInstance},a.hook.init=function(n){n.data.keepAlive&&n.componentInstance&&n.componentInstance!==h.instances[s]&&(h.instances[s]=n.componentInstance),Jo(l)};var v=h.props&&h.props[s];return v&&(zo(c[s],{route:l,configProps:v}),ea(g,a,l,v)),i(g,a,r)}};function ea(n,e,t,r){var o=e.props=function(n,e){switch(typeof e){case"undefined":return;case"object":return e;case"function":return e(n);case"boolean":return e?n.params:void 0;default:0}}(t,r);if(o){o=e.props=zo({},o);var a=e.attrs=e.attrs||{};for(var i in o)n.props&&i in n.props||(a[i]=o[i],delete o[i])}}function ta(n,e,t){var r=n.charAt(0);if("/"===r)return n;if("?"===r||"#"===r)return e+n;var o=e.split("/");t&&o[o.length-1]||o.pop();for(var a=n.replace(/^\//,"").split("/"),i=0;i<a.length;i++){var s=a[i];".."===s?o.pop():"."!==s&&o.push(s)}return""!==o[0]&&o.unshift(""),o.join("/")}function ra(n){return n.replace(/\/+/g,"/")}var oa=Array.isArray||function(n){return"[object Array]"==Object.prototype.toString.call(n)},aa=ya,ia=pa,sa=function(n,e){return ma(pa(n,e),e)},la=ma,ca=ba,da=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function pa(n,e){for(var t,r=[],o=0,a=0,i="",s=e&&e.delimiter||"/";null!=(t=da.exec(n));){var l=t[0],c=t[1],d=t.index;if(i+=n.slice(a,d),a=d+l.length,c)i+=c[1];else{var p=n[a],u=t[2],m=t[3],f=t[4],h=t[5],g=t[6],v=t[7];i&&(r.push(i),i="");var b=null!=u&&null!=p&&p!==u,y="+"===g||"*"===g,x="?"===g||"*"===g,_=t[2]||s,k=f||h;r.push({name:m||o++,prefix:u||"",delimiter:_,optional:x,repeat:y,partial:b,asterisk:!!v,pattern:k?ha(k):v?".*":"[^"+fa(_)+"]+?"})}}return a<n.length&&(i+=n.substr(a)),i&&r.push(i),r}function ua(n){return encodeURI(n).replace(/[\/?#]/g,(function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()}))}function ma(n,e){for(var t=new Array(n.length),r=0;r<n.length;r++)"object"==typeof n[r]&&(t[r]=new RegExp("^(?:"+n[r].pattern+")$",va(e)));return function(e,r){for(var o="",a=e||{},i=(r||{}).pretty?ua:encodeURIComponent,s=0;s<n.length;s++){var l=n[s];if("string"!=typeof l){var c,d=a[l.name];if(null==d){if(l.optional){l.partial&&(o+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(oa(d)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var p=0;p<d.length;p++){if(c=i(d[p]),!t[s].test(c))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(c)+"`");o+=(0===p?l.prefix:l.delimiter)+c}}else{if(c=l.asterisk?encodeURI(d).replace(/[?#]/g,(function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()})):i(d),!t[s].test(c))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+c+'"');o+=l.prefix+c}}else o+=l}return o}}function fa(n){return n.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function ha(n){return n.replace(/([=!:$\/()])/g,"\\$1")}function ga(n,e){return n.keys=e,n}function va(n){return n&&n.sensitive?"":"i"}function ba(n,e,t){oa(e)||(t=e||t,e=[]);for(var r=(t=t||{}).strict,o=!1!==t.end,a="",i=0;i<n.length;i++){var s=n[i];if("string"==typeof s)a+=fa(s);else{var l=fa(s.prefix),c="(?:"+s.pattern+")";e.push(s),s.repeat&&(c+="(?:"+l+c+")*"),a+=c=s.optional?s.partial?l+"("+c+")?":"(?:"+l+"("+c+"))?":l+"("+c+")"}}var d=fa(t.delimiter||"/"),p=a.slice(-d.length)===d;return r||(a=(p?a.slice(0,-d.length):a)+"(?:"+d+"(?=$))?"),a+=o?"$":r&&p?"":"(?="+d+"|$)",ga(new RegExp("^"+a,va(t)),e)}function ya(n,e,t){return oa(e)||(t=e||t,e=[]),t=t||{},n instanceof RegExp?function(n,e){var t=n.source.match(/\((?!\?)/g);if(t)for(var r=0;r<t.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return ga(n,e)}(n,e):oa(n)?function(n,e,t){for(var r=[],o=0;o<n.length;o++)r.push(ya(n[o],e,t).source);return ga(new RegExp("(?:"+r.join("|")+")",va(t)),e)}(n,e,t):function(n,e,t){return ba(pa(n,t),e,t)}(n,e,t)}aa.parse=ia,aa.compile=sa,aa.tokensToFunction=la,aa.tokensToRegExp=ca;var xa=Object.create(null);function _a(n,e,t){e=e||{};try{var r=xa[n]||(xa[n]=aa.compile(n));return"string"==typeof e.pathMatch&&(e[0]=e.pathMatch),r(e,{pretty:!0})}catch(n){return""}finally{delete e[0]}}function ka(n,e,t,r){var o="string"==typeof n?{path:n}:n;if(o._normalized)return o;if(o.name){var a=(o=zo({},n)).params;return a&&"object"==typeof a&&(o.params=zo({},a)),o}if(!o.path&&o.params&&e){(o=zo({},o))._normalized=!0;var i=zo(zo({},e.params),o.params);if(e.name)o.name=e.name,o.params=i;else if(e.matched.length){var s=e.matched[e.matched.length-1].path;o.path=_a(s,i,e.path)}else 0;return o}var l=function(n){var e="",t="",r=n.indexOf("#");r>=0&&(e=n.slice(r),n=n.slice(0,r));var o=n.indexOf("?");return o>=0&&(t=n.slice(o+1),n=n.slice(0,o)),{path:n,query:t,hash:e}}(o.path||""),c=e&&e.path||"/",d=l.path?ta(l.path,c,t||o.append):c,p=function(n,e,t){void 0===e&&(e={});var r,o=t||Go;try{r=o(n||"")}catch(n){r={}}for(var a in e){var i=e[a];r[a]=Array.isArray(i)?i.map(Bo):Bo(i)}return r}(l.query,o.query,r&&r.options.parseQuery),u=o.hash||l.hash;return u&&"#"!==u.charAt(0)&&(u="#"+u),{_normalized:!0,path:d,query:p,hash:u}}var wa,Ta=function(){},Sa={name:"RouterLink",props:{to:{type:[String,Object],required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:[String,Array],default:"click"}},render:function(n){var e=this,t=this.$router,r=this.$route,o=t.resolve(this.to,r,this.append),a=o.location,i=o.route,s=o.href,l={},c=t.options.linkActiveClass,d=t.options.linkExactActiveClass,p=null==c?"router-link-active":c,u=null==d?"router-link-exact-active":d,m=null==this.activeClass?p:this.activeClass,f=null==this.exactActiveClass?u:this.exactActiveClass,h=i.redirectedFrom?$o(null,ka(i.redirectedFrom),null,t):i;l[f]=Yo(r,h,this.exactPath),l[m]=this.exact||this.exactPath?l[f]:function(n,e){return 0===n.path.replace(Vo,"/").indexOf(e.path.replace(Vo,"/"))&&(!e.hash||n.hash===e.hash)&&function(n,e){for(var t in e)if(!(t in n))return!1;return!0}(n.query,e.query)}(r,h);var g=l[f]?this.ariaCurrentValue:null,v=function(n){Pa(n)&&(e.replace?t.replace(a,Ta):t.push(a,Ta))},b={click:Pa};Array.isArray(this.event)?this.event.forEach((function(n){b[n]=v})):b[this.event]=v;var y={class:l},x=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:s,route:i,navigate:v,isActive:l[m],isExactActive:l[f]});if(x){if(1===x.length)return x[0];if(x.length>1||!x.length)return 0===x.length?n():n("span",{},x)}if("a"===this.tag)y.on=b,y.attrs={href:s,"aria-current":g};else{var _=function n(e){var t;if(e)for(var r=0;r<e.length;r++){if("a"===(t=e[r]).tag)return t;if(t.children&&(t=n(t.children)))return t}}(this.$slots.default);if(_){_.isStatic=!1;var k=_.data=zo({},_.data);for(var w in k.on=k.on||{},k.on){var T=k.on[w];w in b&&(k.on[w]=Array.isArray(T)?T:[T])}for(var S in b)S in k.on?k.on[S].push(b[S]):k.on[S]=v;var P=_.data.attrs=zo({},_.data.attrs);P.href=s,P["aria-current"]=g}else y.on=b}return n(this.tag,y,this.$slots.default)}};function Pa(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey||n.defaultPrevented||void 0!==n.button&&0!==n.button)){if(n.currentTarget&&n.currentTarget.getAttribute){var e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}var Ca="undefined"!=typeof window;function Ia(n,e,t,r,o){var a=e||[],i=t||Object.create(null),s=r||Object.create(null);n.forEach((function(n){!function n(e,t,r,o,a,i){var s=o.path,l=o.name;0;var c=o.pathToRegexpOptions||{},d=function(n,e,t){t||(n=n.replace(/\/$/,""));if("/"===n[0])return n;if(null==e)return n;return ra(e.path+"/"+n)}(s,a,c.strict);"boolean"==typeof o.caseSensitive&&(c.sensitive=o.caseSensitive);var p={path:d,regex:Ea(d,c),components:o.components||{default:o.component},alias:o.alias?"string"==typeof o.alias?[o.alias]:o.alias:[],instances:{},enteredCbs:{},name:l,parent:a,matchAs:i,redirect:o.redirect,beforeEnter:o.beforeEnter,meta:o.meta||{},props:null==o.props?{}:o.components?o.props:{default:o.props}};o.children&&o.children.forEach((function(o){var a=i?ra(i+"/"+o.path):void 0;n(e,t,r,o,p,a)}));t[p.path]||(e.push(p.path),t[p.path]=p);if(void 0!==o.alias)for(var u=Array.isArray(o.alias)?o.alias:[o.alias],m=0;m<u.length;++m){0;var f={path:u[m],children:o.children};n(e,t,r,f,a,p.path||"/")}l&&(r[l]||(r[l]=p))}(a,i,s,n,o)}));for(var l=0,c=a.length;l<c;l++)"*"===a[l]&&(a.push(a.splice(l,1)[0]),c--,l--);return{pathList:a,pathMap:i,nameMap:s}}function Ea(n,e){return aa(n,[],e)}function Aa(n,e){var t=Ia(n),r=t.pathList,o=t.pathMap,a=t.nameMap;function i(n,t,i){var s=ka(n,t,!1,e),c=s.name;if(c){var d=a[c];if(!d)return l(null,s);var p=d.regex.keys.filter((function(n){return!n.optional})).map((function(n){return n.name}));if("object"!=typeof s.params&&(s.params={}),t&&"object"==typeof t.params)for(var u in t.params)!(u in s.params)&&p.indexOf(u)>-1&&(s.params[u]=t.params[u]);return s.path=_a(d.path,s.params),l(d,s,i)}if(s.path){s.params={};for(var m=0;m<r.length;m++){var f=r[m],h=o[f];if(Da(h.regex,s.path,s.params))return l(h,s,i)}}return l(null,s)}function s(n,t){var r=n.redirect,o="function"==typeof r?r($o(n,t,null,e)):r;if("string"==typeof o&&(o={path:o}),!o||"object"!=typeof o)return l(null,t);var s=o,c=s.name,d=s.path,p=t.query,u=t.hash,m=t.params;if(p=s.hasOwnProperty("query")?s.query:p,u=s.hasOwnProperty("hash")?s.hash:u,m=s.hasOwnProperty("params")?s.params:m,c){a[c];return i({_normalized:!0,name:c,query:p,hash:u,params:m},void 0,t)}if(d){var f=function(n,e){return ta(n,e.parent?e.parent.path:"/",!0)}(d,n);return i({_normalized:!0,path:_a(f,m),query:p,hash:u},void 0,t)}return l(null,t)}function l(n,t,r){return n&&n.redirect?s(n,r||t):n&&n.matchAs?function(n,e,t){var r=i({_normalized:!0,path:_a(t,e.params)});if(r){var o=r.matched,a=o[o.length-1];return e.params=r.params,l(a,e)}return l(null,e)}(0,t,n.matchAs):$o(n,t,r,e)}return{match:i,addRoute:function(n,e){var t="object"!=typeof n?a[n]:void 0;Ia([e||n],r,o,a,t),t&&t.alias.length&&Ia(t.alias.map((function(n){return{path:n,children:[e]}})),r,o,a,t)},getRoutes:function(){return r.map((function(n){return o[n]}))},addRoutes:function(n){Ia(n,r,o,a)}}}function Da(n,e,t){var r=e.match(n);if(!r)return!1;if(!t)return!0;for(var o=1,a=r.length;o<a;++o){var i=n.keys[o-1];i&&(t[i.name||"pathMatch"]="string"==typeof r[o]?Uo(r[o]):r[o])}return!0}var Oa=Ca&&window.performance&&window.performance.now?window.performance:Date;function La(){return Oa.now().toFixed(3)}var ja=La();function Ra(){return ja}function za(n){return ja=n}var Ma=Object.create(null);function Na(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var n=window.location.protocol+"//"+window.location.host,e=window.location.href.replace(n,""),t=zo({},window.history.state);return t.key=Ra(),window.history.replaceState(t,"",e),window.addEventListener("popstate",Ua),function(){window.removeEventListener("popstate",Ua)}}function Fa(n,e,t,r){if(n.app){var o=n.options.scrollBehavior;o&&n.app.$nextTick((function(){var a=function(){var n=Ra();if(n)return Ma[n]}(),i=o.call(n,e,t,r?a:null);i&&("function"==typeof i.then?i.then((function(n){$a(n,a)})).catch((function(n){0})):$a(i,a))}))}}function qa(){var n=Ra();n&&(Ma[n]={x:window.pageXOffset,y:window.pageYOffset})}function Ua(n){qa(),n.state&&n.state.key&&za(n.state.key)}function Ba(n){return Ha(n.x)||Ha(n.y)}function Ga(n){return{x:Ha(n.x)?n.x:window.pageXOffset,y:Ha(n.y)?n.y:window.pageYOffset}}function Ha(n){return"number"==typeof n}var Va=/^#\d/;function $a(n,e){var t,r="object"==typeof n;if(r&&"string"==typeof n.selector){var o=Va.test(n.selector)?document.getElementById(n.selector.slice(1)):document.querySelector(n.selector);if(o){var a=n.offset&&"object"==typeof n.offset?n.offset:{};e=function(n,e){var t=document.documentElement.getBoundingClientRect(),r=n.getBoundingClientRect();return{x:r.left-t.left-e.x,y:r.top-t.top-e.y}}(o,a={x:Ha((t=a).x)?t.x:0,y:Ha(t.y)?t.y:0})}else Ba(n)&&(e=Ga(n))}else r&&Ba(n)&&(e=Ga(n));e&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:e.x,top:e.y,behavior:n.behavior}):window.scrollTo(e.x,e.y))}var Wa,Ka=Ca&&((-1===(Wa=window.navigator.userAgent).indexOf("Android 2.")&&-1===Wa.indexOf("Android 4.0")||-1===Wa.indexOf("Mobile Safari")||-1!==Wa.indexOf("Chrome")||-1!==Wa.indexOf("Windows Phone"))&&window.history&&"function"==typeof window.history.pushState);function Xa(n,e){qa();var t=window.history;try{if(e){var r=zo({},t.state);r.key=Ra(),t.replaceState(r,"",n)}else t.pushState({key:za(La())},"",n)}catch(t){window.location[e?"replace":"assign"](n)}}function Qa(n){Xa(n,!0)}function Ya(n,e,t){var r=function(o){o>=n.length?t():n[o]?e(n[o],(function(){r(o+1)})):r(o+1)};r(0)}var Za={redirected:2,aborted:4,cancelled:8,duplicated:16};function Ja(n,e){return ei(n,e,Za.redirected,'Redirected when going from "'+n.fullPath+'" to "'+function(n){if("string"==typeof n)return n;if("path"in n)return n.path;var e={};return ti.forEach((function(t){t in n&&(e[t]=n[t])})),JSON.stringify(e,null,2)}(e)+'" via a navigation guard.')}function ni(n,e){return ei(n,e,Za.cancelled,'Navigation cancelled from "'+n.fullPath+'" to "'+e.fullPath+'" with a new navigation.')}function ei(n,e,t,r){var o=new Error(r);return o._isRouter=!0,o.from=n,o.to=e,o.type=t,o}var ti=["params","query","hash"];function ri(n){return Object.prototype.toString.call(n).indexOf("Error")>-1}function oi(n,e){return ri(n)&&n._isRouter&&(null==e||n.type===e)}function ai(n){return function(e,t,r){var o=!1,a=0,i=null;ii(n,(function(n,e,t,s){if("function"==typeof n&&void 0===n.cid){o=!0,a++;var l,c=ci((function(e){var o;((o=e).__esModule||li&&"Module"===o[Symbol.toStringTag])&&(e=e.default),n.resolved="function"==typeof e?e:wa.extend(e),t.components[s]=e,--a<=0&&r()})),d=ci((function(n){var e="Failed to resolve async component "+s+": "+n;i||(i=ri(n)?n:new Error(e),r(i))}));try{l=n(c,d)}catch(n){d(n)}if(l)if("function"==typeof l.then)l.then(c,d);else{var p=l.component;p&&"function"==typeof p.then&&p.then(c,d)}}})),o||r()}}function ii(n,e){return si(n.map((function(n){return Object.keys(n.components).map((function(t){return e(n.components[t],n.instances[t],n,t)}))})))}function si(n){return Array.prototype.concat.apply([],n)}var li="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;function ci(n){var e=!1;return function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(!e)return e=!0,n.apply(this,t)}}var di=function(n,e){this.router=n,this.base=function(n){if(!n)if(Ca){var e=document.querySelector("base");n=(n=e&&e.getAttribute("href")||"/").replace(/^https?:\/\/[^\/]+/,"")}else n="/";"/"!==n.charAt(0)&&(n="/"+n);return n.replace(/\/$/,"")}(e),this.current=Ko,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function pi(n,e,t,r){var o=ii(n,(function(n,r,o,a){var i=function(n,e){"function"!=typeof n&&(n=wa.extend(n));return n.options[e]}(n,e);if(i)return Array.isArray(i)?i.map((function(n){return t(n,r,o,a)})):t(i,r,o,a)}));return si(r?o.reverse():o)}function ui(n,e){if(e)return function(){return n.apply(e,arguments)}}di.prototype.listen=function(n){this.cb=n},di.prototype.onReady=function(n,e){this.ready?n():(this.readyCbs.push(n),e&&this.readyErrorCbs.push(e))},di.prototype.onError=function(n){this.errorCbs.push(n)},di.prototype.transitionTo=function(n,e,t){var r,o=this;try{r=this.router.match(n,this.current)}catch(n){throw this.errorCbs.forEach((function(e){e(n)})),n}var a=this.current;this.confirmTransition(r,(function(){o.updateRoute(r),e&&e(r),o.ensureURL(),o.router.afterHooks.forEach((function(n){n&&n(r,a)})),o.ready||(o.ready=!0,o.readyCbs.forEach((function(n){n(r)})))}),(function(n){t&&t(n),n&&!o.ready&&(oi(n,Za.redirected)&&a===Ko||(o.ready=!0,o.readyErrorCbs.forEach((function(e){e(n)}))))}))},di.prototype.confirmTransition=function(n,e,t){var r=this,o=this.current;this.pending=n;var a,i,s=function(n){!oi(n)&&ri(n)&&(r.errorCbs.length?r.errorCbs.forEach((function(e){e(n)})):console.error(n)),t&&t(n)},l=n.matched.length-1,c=o.matched.length-1;if(Yo(n,o)&&l===c&&n.matched[l]===o.matched[c])return this.ensureURL(),n.hash&&Fa(this.router,o,n,!1),s(((i=ei(a=o,n,Za.duplicated,'Avoided redundant navigation to current location: "'+a.fullPath+'".')).name="NavigationDuplicated",i));var d=function(n,e){var t,r=Math.max(n.length,e.length);for(t=0;t<r&&n[t]===e[t];t++);return{updated:e.slice(0,t),activated:e.slice(t),deactivated:n.slice(t)}}(this.current.matched,n.matched),p=d.updated,u=d.deactivated,m=d.activated,f=[].concat(function(n){return pi(n,"beforeRouteLeave",ui,!0)}(u),this.router.beforeHooks,function(n){return pi(n,"beforeRouteUpdate",ui)}(p),m.map((function(n){return n.beforeEnter})),ai(m)),h=function(e,t){if(r.pending!==n)return s(ni(o,n));try{e(n,o,(function(e){!1===e?(r.ensureURL(!0),s(function(n,e){return ei(n,e,Za.aborted,'Navigation aborted from "'+n.fullPath+'" to "'+e.fullPath+'" via a navigation guard.')}(o,n))):ri(e)?(r.ensureURL(!0),s(e)):"string"==typeof e||"object"==typeof e&&("string"==typeof e.path||"string"==typeof e.name)?(s(Ja(o,n)),"object"==typeof e&&e.replace?r.replace(e):r.push(e)):t(e)}))}catch(n){s(n)}};Ya(f,h,(function(){Ya(function(n){return pi(n,"beforeRouteEnter",(function(n,e,t,r){return function(n,e,t){return function(r,o,a){return n(r,o,(function(n){"function"==typeof n&&(e.enteredCbs[t]||(e.enteredCbs[t]=[]),e.enteredCbs[t].push(n)),a(n)}))}}(n,t,r)}))}(m).concat(r.router.resolveHooks),h,(function(){if(r.pending!==n)return s(ni(o,n));r.pending=null,e(n),r.router.app&&r.router.app.$nextTick((function(){Jo(n)}))}))}))},di.prototype.updateRoute=function(n){this.current=n,this.cb&&this.cb(n)},di.prototype.setupListeners=function(){},di.prototype.teardown=function(){this.listeners.forEach((function(n){n()})),this.listeners=[],this.current=Ko,this.pending=null};var mi=function(n){function e(e,t){n.call(this,e,t),this._startLocation=fi(this.base)}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var n=this;if(!(this.listeners.length>0)){var e=this.router,t=e.options.scrollBehavior,r=Ka&&t;r&&this.listeners.push(Na());var o=function(){var t=n.current,o=fi(n.base);n.current===Ko&&o===n._startLocation||n.transitionTo(o,(function(n){r&&Fa(e,n,t,!0)}))};window.addEventListener("popstate",o),this.listeners.push((function(){window.removeEventListener("popstate",o)}))}},e.prototype.go=function(n){window.history.go(n)},e.prototype.push=function(n,e,t){var r=this,o=this.current;this.transitionTo(n,(function(n){Xa(ra(r.base+n.fullPath)),Fa(r.router,n,o,!1),e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var r=this,o=this.current;this.transitionTo(n,(function(n){Qa(ra(r.base+n.fullPath)),Fa(r.router,n,o,!1),e&&e(n)}),t)},e.prototype.ensureURL=function(n){if(fi(this.base)!==this.current.fullPath){var e=ra(this.base+this.current.fullPath);n?Xa(e):Qa(e)}},e.prototype.getCurrentLocation=function(){return fi(this.base)},e}(di);function fi(n){var e=window.location.pathname,t=e.toLowerCase(),r=n.toLowerCase();return!n||t!==r&&0!==t.indexOf(ra(r+"/"))||(e=e.slice(n.length)),(e||"/")+window.location.search+window.location.hash}var hi=function(n){function e(e,t,r){n.call(this,e,t),r&&function(n){var e=fi(n);if(!/^\/#/.test(e))return window.location.replace(ra(n+"/#"+e)),!0}(this.base)||gi()}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var n=this;if(!(this.listeners.length>0)){var e=this.router.options.scrollBehavior,t=Ka&&e;t&&this.listeners.push(Na());var r=function(){var e=n.current;gi()&&n.transitionTo(vi(),(function(r){t&&Fa(n.router,r,e,!0),Ka||xi(r.fullPath)}))},o=Ka?"popstate":"hashchange";window.addEventListener(o,r),this.listeners.push((function(){window.removeEventListener(o,r)}))}},e.prototype.push=function(n,e,t){var r=this,o=this.current;this.transitionTo(n,(function(n){yi(n.fullPath),Fa(r.router,n,o,!1),e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var r=this,o=this.current;this.transitionTo(n,(function(n){xi(n.fullPath),Fa(r.router,n,o,!1),e&&e(n)}),t)},e.prototype.go=function(n){window.history.go(n)},e.prototype.ensureURL=function(n){var e=this.current.fullPath;vi()!==e&&(n?yi(e):xi(e))},e.prototype.getCurrentLocation=function(){return vi()},e}(di);function gi(){var n=vi();return"/"===n.charAt(0)||(xi("/"+n),!1)}function vi(){var n=window.location.href,e=n.indexOf("#");return e<0?"":n=n.slice(e+1)}function bi(n){var e=window.location.href,t=e.indexOf("#");return(t>=0?e.slice(0,t):e)+"#"+n}function yi(n){Ka?Xa(bi(n)):window.location.hash=n}function xi(n){Ka?Qa(bi(n)):window.location.replace(bi(n))}var _i=function(n){function e(e,t){n.call(this,e,t),this.stack=[],this.index=-1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.push=function(n,e,t){var r=this;this.transitionTo(n,(function(n){r.stack=r.stack.slice(0,r.index+1).concat(n),r.index++,e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var r=this;this.transitionTo(n,(function(n){r.stack=r.stack.slice(0,r.index).concat(n),e&&e(n)}),t)},e.prototype.go=function(n){var e=this,t=this.index+n;if(!(t<0||t>=this.stack.length)){var r=this.stack[t];this.confirmTransition(r,(function(){var n=e.current;e.index=t,e.updateRoute(r),e.router.afterHooks.forEach((function(e){e&&e(r,n)}))}),(function(n){oi(n,Za.duplicated)&&(e.index=t)}))}},e.prototype.getCurrentLocation=function(){var n=this.stack[this.stack.length-1];return n?n.fullPath:"/"},e.prototype.ensureURL=function(){},e}(di),ki=function(n){void 0===n&&(n={}),this.app=null,this.apps=[],this.options=n,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=Aa(n.routes||[],this);var e=n.mode||"hash";switch(this.fallback="history"===e&&!Ka&&!1!==n.fallback,this.fallback&&(e="hash"),Ca||(e="abstract"),this.mode=e,e){case"history":this.history=new mi(this,n.base);break;case"hash":this.history=new hi(this,n.base,this.fallback);break;case"abstract":this.history=new _i(this,n.base);break;default:0}},wi={currentRoute:{configurable:!0}};function Ti(n,e){return n.push(e),function(){var t=n.indexOf(e);t>-1&&n.splice(t,1)}}ki.prototype.match=function(n,e,t){return this.matcher.match(n,e,t)},wi.currentRoute.get=function(){return this.history&&this.history.current},ki.prototype.init=function(n){var e=this;if(this.apps.push(n),n.$once("hook:destroyed",(function(){var t=e.apps.indexOf(n);t>-1&&e.apps.splice(t,1),e.app===n&&(e.app=e.apps[0]||null),e.app||e.history.teardown()})),!this.app){this.app=n;var t=this.history;if(t instanceof mi||t instanceof hi){var r=function(n){t.setupListeners(),function(n){var r=t.current,o=e.options.scrollBehavior;Ka&&o&&"fullPath"in n&&Fa(e,n,r,!1)}(n)};t.transitionTo(t.getCurrentLocation(),r,r)}t.listen((function(n){e.apps.forEach((function(e){e._route=n}))}))}},ki.prototype.beforeEach=function(n){return Ti(this.beforeHooks,n)},ki.prototype.beforeResolve=function(n){return Ti(this.resolveHooks,n)},ki.prototype.afterEach=function(n){return Ti(this.afterHooks,n)},ki.prototype.onReady=function(n,e){this.history.onReady(n,e)},ki.prototype.onError=function(n){this.history.onError(n)},ki.prototype.push=function(n,e,t){var r=this;if(!e&&!t&&"undefined"!=typeof Promise)return new Promise((function(e,t){r.history.push(n,e,t)}));this.history.push(n,e,t)},ki.prototype.replace=function(n,e,t){var r=this;if(!e&&!t&&"undefined"!=typeof Promise)return new Promise((function(e,t){r.history.replace(n,e,t)}));this.history.replace(n,e,t)},ki.prototype.go=function(n){this.history.go(n)},ki.prototype.back=function(){this.go(-1)},ki.prototype.forward=function(){this.go(1)},ki.prototype.getMatchedComponents=function(n){var e=n?n.matched?n:this.resolve(n).route:this.currentRoute;return e?[].concat.apply([],e.matched.map((function(n){return Object.keys(n.components).map((function(e){return n.components[e]}))}))):[]},ki.prototype.resolve=function(n,e,t){var r=ka(n,e=e||this.history.current,t,this),o=this.match(r,e),a=o.redirectedFrom||o.fullPath;return{location:r,route:o,href:function(n,e,t){var r="hash"===t?"#"+e:e;return n?ra(n+"/"+r):r}(this.history.base,a,this.mode),normalizedTo:r,resolved:o}},ki.prototype.getRoutes=function(){return this.matcher.getRoutes()},ki.prototype.addRoute=function(n,e){this.matcher.addRoute(n,e),this.history.current!==Ko&&this.history.transitionTo(this.history.getCurrentLocation())},ki.prototype.addRoutes=function(n){this.matcher.addRoutes(n),this.history.current!==Ko&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(ki.prototype,wi),ki.install=function n(e){if(!n.installed||wa!==e){n.installed=!0,wa=e;var t=function(n){return void 0!==n},r=function(n,e){var r=n.$options._parentVnode;t(r)&&t(r=r.data)&&t(r=r.registerRouteInstance)&&r(n,e)};e.mixin({beforeCreate:function(){t(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),e.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,r(this,this)},destroyed:function(){r(this)}}),Object.defineProperty(e.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(e.prototype,"$route",{get:function(){return this._routerRoot._route}}),e.component("RouterView",na),e.component("RouterLink",Sa);var o=e.config.optionMergeStrategies;o.beforeRouteEnter=o.beforeRouteLeave=o.beforeRouteUpdate=o.created}},ki.version="3.5.3",ki.isNavigationFailure=oi,ki.NavigationFailureType=Za,ki.START_LOCATION=Ko,Ca&&window.Vue&&window.Vue.use(ki);var Si=ki;t(171),t(172),t(250),t(101),t(173),t(32),t(33),t(252);function Pi(n){n.locales&&Object.keys(n.locales).forEach((function(e){n.locales[e].path=e})),Object.freeze(n)}t(68),t(90),t(120);function Ci(n){return(Ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}var Ii=t(70),Ei=(t(183),t(21),t(52),t(225),t(226),t(41),t(30),{NotFound:function(){return Promise.all([t.e(0),t.e(13)]).then(t.bind(null,630))},Layout:function(){return Promise.all([t.e(0),t.e(3)]).then(t.bind(null,629))}}),Ai={"v-a395e182":function(){return t.e(29).then(t.bind(null,634))},"v-61e6c4c2":function(){return t.e(30).then(t.bind(null,635))},"v-690ecebf":function(){return t.e(31).then(t.bind(null,636))},"v-0e1d1ba8":function(){return t.e(32).then(t.bind(null,637))},"v-600665ec":function(){return t.e(33).then(t.bind(null,638))},"v-95764dbe":function(){return t.e(34).then(t.bind(null,639))},"v-61aeda36":function(){return t.e(35).then(t.bind(null,640))},"v-f89e89de":function(){return t.e(14).then(t.bind(null,641))},"v-303c02c2":function(){return t.e(15).then(t.bind(null,642))},"v-e117a336":function(){return t.e(36).then(t.bind(null,643))},"v-46965d82":function(){return t.e(37).then(t.bind(null,644))},"v-2c4fb4ae":function(){return t.e(38).then(t.bind(null,645))},"v-742c98c4":function(){return t.e(39).then(t.bind(null,646))},"v-f1ab1866":function(){return t.e(40).then(t.bind(null,647))},"v-5180c0ff":function(){return t.e(41).then(t.bind(null,648))},"v-31e2af82":function(){return t.e(42).then(t.bind(null,649))},"v-92792e82":function(){return t.e(16).then(t.bind(null,650))},"v-53f7dee4":function(){return t.e(43).then(t.bind(null,651))},"v-d7f39702":function(){return t.e(44).then(t.bind(null,652))},"v-3a68b8c2":function(){return t.e(45).then(t.bind(null,653))},"v-16fdda93":function(){return t.e(46).then(t.bind(null,654))},"v-52f58a7d":function(){return t.e(47).then(t.bind(null,655))},"v-65f07e87":function(){return t.e(48).then(t.bind(null,656))},"v-6a7f071f":function(){return t.e(49).then(t.bind(null,657))},"v-2c04e47f":function(){return t.e(50).then(t.bind(null,658))},"v-0c0b8bdf":function(){return t.e(51).then(t.bind(null,659))},"v-95a0b5de":function(){return t.e(52).then(t.bind(null,660))},"v-d3589f42":function(){return t.e(53).then(t.bind(null,661))},"v-90b5b0c2":function(){return t.e(54).then(t.bind(null,662))},"v-50b53767":function(){return t.e(55).then(t.bind(null,663))},"v-718753e8":function(){return t.e(56).then(t.bind(null,664))},"v-570d3d9f":function(){return t.e(57).then(t.bind(null,665))},"v-b9611c0e":function(){return t.e(58).then(t.bind(null,666))},"v-e4b92d82":function(){return t.e(59).then(t.bind(null,667))},"v-75d8bb3f":function(){return t.e(60).then(t.bind(null,668))},"v-32fca817":function(){return t.e(61).then(t.bind(null,669))},"v-398f0321":function(){return t.e(62).then(t.bind(null,670))},"v-319db75f":function(){return t.e(24).then(t.bind(null,671))},"v-5354451a":function(){return t.e(63).then(t.bind(null,672))},"v-48032f1f":function(){return t.e(64).then(t.bind(null,673))},"v-485139ef":function(){return t.e(25).then(t.bind(null,674))},"v-29d661ff":function(){return t.e(65).then(t.bind(null,675))},"v-4976d5df":function(){return t.e(9).then(t.bind(null,676))},"v-6a62161f":function(){return t.e(66).then(t.bind(null,677))},"v-de8bce82":function(){return t.e(67).then(t.bind(null,678))},"v-3682497f":function(){return t.e(68).then(t.bind(null,631))},"v-1d6a5088":function(){return t.e(69).then(t.bind(null,679))},"v-091c8f7f":function(){return t.e(70).then(t.bind(null,680))},"v-7103a3ed":function(){return t.e(71).then(t.bind(null,681))},"v-5240d527":function(){return t.e(72).then(t.bind(null,682))},"v-5e7e6c7d":function(){return t.e(73).then(t.bind(null,683))},"v-633581c2":function(){return t.e(26).then(t.bind(null,684))},"v-4b4d8c9f":function(){return t.e(74).then(t.bind(null,685))},"v-cc5c4542":function(){return t.e(17).then(t.bind(null,686))},"v-386d6b3f":function(){return t.e(75).then(t.bind(null,687))},"v-0e5e6773":function(){return t.e(76).then(t.bind(null,688))},"v-35163721":function(){return t.e(8).then(t.bind(null,689))},"v-75c42f42":function(){return t.e(18).then(t.bind(null,690))},"v-897ab682":function(){return t.e(10).then(t.bind(null,691))},"v-41809442":function(){return t.e(11).then(t.bind(null,692))},"v-66696d37":function(){return t.e(77).then(t.bind(null,693))},"v-71519a9f":function(){return t.e(78).then(t.bind(null,694))},"v-6ca7651f":function(){return t.e(19).then(t.bind(null,695))},"v-15864453":function(){return t.e(79).then(t.bind(null,696))},"v-a254d0c2":function(){return t.e(4).then(t.bind(null,697))},"v-76ece9bf":function(){return t.e(20).then(t.bind(null,698))},"v-34bb950d":function(){return t.e(6).then(t.bind(null,699))},"v-03728847":function(){return t.e(80).then(t.bind(null,700))},"v-cf80e5c2":function(){return t.e(2).then(t.bind(null,701))},"v-7d6afdba":function(){return t.e(21).then(t.bind(null,702))},"v-dde8b282":function(){return t.e(81).then(t.bind(null,703))},"v-6cc2a996":function(){return t.e(82).then(t.bind(null,704))},"v-5f9b1d8c":function(){return t.e(83).then(t.bind(null,705))},"v-0dc92f7f":function(){return t.e(84).then(t.bind(null,706))},"v-25c8ca33":function(){return t.e(85).then(t.bind(null,707))},"v-0b34dfc2":function(){return t.e(86).then(t.bind(null,708))},"v-9af6bf82":function(){return t.e(87).then(t.bind(null,709))},"v-ccf5212a":function(){return t.e(88).then(t.bind(null,710))},"v-c6b25e82":function(){return t.e(89).then(t.bind(null,711))},"v-019d6745":function(){return t.e(90).then(t.bind(null,712))},"v-2fe5090c":function(){return t.e(91).then(t.bind(null,713))},"v-a6752c4a":function(){return t.e(22).then(t.bind(null,632))},"v-0dd9b182":function(){return t.e(92).then(t.bind(null,714))},"v-5d28d3ff":function(){return t.e(27).then(t.bind(null,715))},"v-d5db50c2":function(){return t.e(93).then(t.bind(null,716))},"v-f76e517a":function(){return t.e(23).then(t.bind(null,717))},"v-15f1fc67":function(){return t.e(94).then(t.bind(null,718))},"v-8cf30266":function(){return t.e(95).then(t.bind(null,719))},"v-455450db":function(){return t.e(7).then(t.bind(null,720))},"v-162635f9":function(){return t.e(5).then(t.bind(null,721))},"v-680803e5":function(){return t.e(28).then(t.bind(null,722))},"v-155cc502":function(){return t.e(96).then(t.bind(null,723))},"v-16de7e50":function(){return t.e(97).then(t.bind(null,724))},"v-02e3228c":function(){return t.e(98).then(t.bind(null,725))},"v-4bfbd5e5":function(){return t.e(99).then(t.bind(null,633))},"v-19beb85e":function(){return t.e(100).then(t.bind(null,726))},"v-5b31b7d6":function(){return t.e(101).then(t.bind(null,727))}};function Di(n){var e=Object.create(null);return function(t){return e[t]||(e[t]=n(t))}}var Oi=/-(\w)/g,Li=Di((function(n){return n.replace(Oi,(function(n,e){return e?e.toUpperCase():""}))})),ji=/\B([A-Z])/g,Ri=Di((function(n){return n.replace(ji,"-$1").toLowerCase()})),zi=Di((function(n){return n.charAt(0).toUpperCase()+n.slice(1)}));function Mi(n,e){if(e)return n(e)?n(e):e.includes("-")?n(zi(Li(e))):n(zi(e))||n(Ri(e))}var Ni=Object.assign({},Ei,Ai),Fi=function(n){return Ni[n]},qi=function(n){return Ai[n]},Ui=function(n){return Ei[n]},Bi=function(n){return Ro.component(n)};function Gi(n){return Mi(qi,n)}function Hi(n){return Mi(Ui,n)}function Vi(n){return Mi(Fi,n)}function $i(n){return Mi(Bi,n)}function Wi(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return Promise.all(e.filter((function(n){return n})).map(function(){var n=o(regeneratorRuntime.mark((function n(e){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if($i(e)||!Vi(e)){n.next=5;break}return n.next=3,Vi(e)();case 3:t=n.sent,Ro.component(e,t.default);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()))}function Ki(n,e){"undefined"!=typeof window&&window.__VUEPRESS__&&(window.__VUEPRESS__[n]=e)}t(76);var Xi=t(98);function Qi(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,o,a=[],i=!0,s=!1;try{for(t=t.call(n);!(i=(r=t.next()).done)&&(a.push(r.value),!e||a.length!==e);i=!0);}catch(n){s=!0,o=n}finally{try{i||null==t.return||t.return()}finally{if(s)throw o}}return a}}(n,e)||Object(Xi.a)(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t(265),t(184),t(72);var Yi=t(213),Zi=t.n(Yi),Ji=t(214),ns=t.n(Ji),es={created:function(){if(this.siteMeta=this.$site.headTags.filter((function(n){return"meta"===Qi(n,1)[0]})).map((function(n){var e=Qi(n,2);e[0];return e[1]})),this.$ssrContext){var n=this.getMergedMetaTags();this.$ssrContext.title=this.$title,this.$ssrContext.lang=this.$lang,this.$ssrContext.pageMeta=(e=n)?e.map((function(n){var e="<meta";return Object.keys(n).forEach((function(t){e+=" ".concat(t,'="').concat(ns()(n[t]),'"')})),e+">"})).join("\n    "):"",this.$ssrContext.canonicalLink=rs(this.$canonicalUrl)}var e},mounted:function(){this.currentMetaTags=Object(Ii.a)(document.querySelectorAll("meta")),this.updateMeta(),this.updateCanonicalLink()},methods:{updateMeta:function(){document.title=this.$title,document.documentElement.lang=this.$lang;var n=this.getMergedMetaTags();this.currentMetaTags=os(n,this.currentMetaTags)},getMergedMetaTags:function(){var n=this.$page.frontmatter.meta||[];return Zi()([{name:"description",content:this.$description}],n,this.siteMeta,as)},updateCanonicalLink:function(){ts(),this.$canonicalUrl&&document.head.insertAdjacentHTML("beforeend",rs(this.$canonicalUrl))}},watch:{$page:function(){this.updateMeta(),this.updateCanonicalLink()}},beforeDestroy:function(){os(null,this.currentMetaTags),ts()}};function ts(){var n=document.querySelector("link[rel='canonical']");n&&n.remove()}function rs(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n?'<link href="'.concat(n,'" rel="canonical" />'):""}function os(n,e){if(e&&Object(Ii.a)(e).filter((function(n){return n.parentNode===document.head})).forEach((function(n){return document.head.removeChild(n)})),n)return n.map((function(n){var e=document.createElement("meta");return Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),document.head.appendChild(e),e}))}function as(n){for(var e=0,t=["name","property","itemprop"];e<t.length;e++){var r=t[e];if(n.hasOwnProperty(r))return n[r]+r}return JSON.stringify(n)}t(135);var is=t(143),ss={mounted:function(){window.addEventListener("scroll",this.onScroll)},methods:{onScroll:t.n(is)()((function(){this.setActiveHash()}),300),setActiveHash:function(){for(var n=this,e=[].slice.call(document.querySelectorAll(".sidebar-link")),t=[].slice.call(document.querySelectorAll(".header-anchor")).filter((function(n){return e.some((function(e){return e.hash===n.hash}))})),r=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop),o=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),a=window.innerHeight+r,i=0;i<t.length;i++){var s=t[i],l=t[i+1],c=0===i&&0===r||r>=s.parentElement.offsetTop+10&&(!l||r<l.parentElement.offsetTop-10),d=decodeURIComponent(this.$route.hash);if(c&&d!==decodeURIComponent(s.hash)){var p=s;if(a===o)for(var u=i+1;u<t.length;u++)if(d===decodeURIComponent(t[u].hash))return;return this.$vuepress.$set("disableScrollBehavior",!0),void this.$router.replace(decodeURIComponent(p.hash),(function(){n.$nextTick((function(){n.$vuepress.$set("disableScrollBehavior",!1)}))}))}}}},beforeDestroy:function(){window.removeEventListener("scroll",this.onScroll)}},ls=(t(55),t(99)),cs=t.n(ls),ds={mounted:function(){var n=this;cs.a.configure({showSpinner:!1}),this.$router.beforeEach((function(n,e,t){n.path===e.path||Ro.component(n.name)||cs.a.start(),t()})),this.$router.afterEach((function(){cs.a.done(),n.isSidebarOpen=!1}))}};t(74),t(73),t(360);function ps(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}t(97);function us(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function ms(n,e,t){return e&&us(n.prototype,e),t&&us(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}t(361);var fs=function(){function n(){ps(this,n);this.containerEl=document.getElementById("message-container"),this.containerEl||(this.containerEl=document.createElement("div"),this.containerEl.id="message-container",document.body.appendChild(this.containerEl))}return ms(n,[{key:"show",value:function(n){var e=this,t=n.text,r=void 0===t?"":t,o=n.duration,a=void 0===o?3e3:o,i=document.createElement("div");i.className="message move-in",i.innerHTML='\n      <i style="fill: #06a35a;font-size: 14px;display:inline-flex;align-items: center;">\n        <svg style="fill: #06a35a;font-size: 14px;" t="1572421810237" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2323" width="16" height="16"><path d="M822.811993 824.617989c-83.075838 81.99224-188.546032 124.613757-316.049383 127.86455-122.085362-3.250794-223.943563-45.87231-305.935802-127.86455s-124.613757-184.21164-127.86455-305.935802c3.250794-127.503351 45.87231-232.973545 127.86455-316.049383 81.99224-83.075838 184.21164-126.058554 305.935802-129.309347 127.503351 3.250794 232.973545 46.23351 316.049383 129.309347 83.075838 83.075838 126.058554 188.546032 129.309347 316.049383C949.231746 640.406349 905.887831 742.62575 822.811993 824.617989zM432.716755 684.111464c3.973192 3.973192 8.307584 5.779189 13.364374 6.140388 5.05679 0.361199 9.752381-1.444797 13.364374-5.417989l292.571429-287.514638c3.973192-3.973192 5.779189-8.307584 5.779189-13.364374 0-5.05679-1.805996-9.752381-5.779189-13.364374l1.805996 1.805996c-3.973192-3.973192-8.668783-5.779189-14.086772-6.140388-5.417989-0.361199-10.47478 1.444797-14.809171 5.417989l-264.397884 220.33157c-3.973192 3.250794-8.668783 4.695591-14.447972 4.695591-5.779189 0-10.835979-1.444797-15.53157-3.973192l-94.273016-72.962257c-4.334392-3.250794-9.391182-4.334392-14.447972-3.973192s-9.391182 3.250794-12.641975 7.585185l-2.889594 3.973192c-3.250794 4.334392-4.334392 9.391182-3.973192 14.809171 0.722399 5.417989 2.528395 10.11358 5.779189 14.086772L432.716755 684.111464z" p-id="2324"></path></svg>\n      </i>\n      <div class="text">'.concat(r,"</div>\n    "),this.containerEl.appendChild(i),a>0&&setTimeout((function(){e.close(i)}),a)}},{key:"close",value:function(n){n.className=n.className.replace("move-in",""),n.className+="move-out",n.addEventListener("animationend",(function(){n.remove()}))}}]),n}(),hs={mounted:function(){!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||this.updateCopy()},updated:function(){!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||this.updateCopy()},methods:{updateCopy:function(){var n=this;setTimeout((function(){(['div[class*="language-"] pre','div[class*="aside-code"] aside']instanceof Array||Array.isArray(['div[class*="language-"] pre','div[class*="aside-code"] aside']))&&['div[class*="language-"] pre','div[class*="aside-code"] aside'].forEach((function(e){document.querySelectorAll(e).forEach(n.generateCopyButton)}))}),1e3)},generateCopyButton:function(n){var e=this;if(!n.classList.contains("codecopy-enabled")){var t=document.createElement("i");t.className="code-copy",t.innerHTML='<svg  style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg>',t.title="Copy to clipboard",t.addEventListener("click",(function(){e.copyToClipboard(n.innerText)})),n.appendChild(t),n.classList.add("codecopy-enabled")}},copyToClipboard:function(n){var e=document.createElement("textarea");e.value=n,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e);var t=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);e.select(),document.execCommand("copy"),(new fs).show({text:"å¤å¶æå",duration:1e3}),document.body.removeChild(e),t&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(t))}}},gs=(t(218),"auto"),vs="zoom-in",bs="zoom-out",ys="grab",xs="move";function _s(n,e,t){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o={passive:!1};r?n.addEventListener(e,t,o):n.removeEventListener(e,t,o)}function ks(n,e){if(n){var t=new Image;t.onload=function(){e&&e(t)},t.src=n}}function ws(n){return n.dataset.original?n.dataset.original:"A"===n.parentNode.tagName?n.parentNode.getAttribute("href"):null}function Ts(n,e,t){!function(n){var e=Ss,t=Ps;if(n.transition){var r=n.transition;delete n.transition,n[e]=r}if(n.transform){var o=n.transform;delete n.transform,n[t]=o}}(e);var r=n.style,o={};for(var a in e)t&&(o[a]=r[a]||""),r[a]=e[a];return o}var Ss="transition",Ps="transform",Cs="transform",Is="transitionend";var Es=function(){},As={enableGrab:!0,preloadImage:!1,closeOnWindowResize:!0,transitionDuration:.4,transitionTimingFunction:"cubic-bezier(0.4, 0, 0, 1)",bgColor:"rgb(255, 255, 255)",bgOpacity:1,scaleBase:1,scaleExtra:.5,scrollThreshold:40,zIndex:998,customSize:null,onOpen:Es,onClose:Es,onGrab:Es,onMove:Es,onRelease:Es,onBeforeOpen:Es,onBeforeClose:Es,onBeforeGrab:Es,onBeforeRelease:Es,onImageLoading:Es,onImageLoaded:Es},Ds={init:function(n){var e,t;e=this,t=n,Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach((function(n){e[n]=e[n].bind(t)}))},click:function(n){if(n.preventDefault(),Ls(n))return window.open(this.target.srcOriginal||n.currentTarget.src,"_blank");this.shown?this.released?this.close():this.release():this.open(n.currentTarget)},scroll:function(){var n=document.documentElement||document.body.parentNode||document.body,e=window.pageXOffset||n.scrollLeft,t=window.pageYOffset||n.scrollTop;null===this.lastScrollPosition&&(this.lastScrollPosition={x:e,y:t});var r=this.lastScrollPosition.x-e,o=this.lastScrollPosition.y-t,a=this.options.scrollThreshold;(Math.abs(o)>=a||Math.abs(r)>=a)&&(this.lastScrollPosition=null,this.close())},keydown:function(n){(function(n){return"Escape"===(n.key||n.code)||27===n.keyCode})(n)&&(this.released?this.close():this.release(this.close))},mousedown:function(n){if(Os(n)&&!Ls(n)){n.preventDefault();var e=n.clientX,t=n.clientY;this.pressTimer=setTimeout(function(){this.grab(e,t)}.bind(this),200)}},mousemove:function(n){this.released||this.move(n.clientX,n.clientY)},mouseup:function(n){Os(n)&&!Ls(n)&&(clearTimeout(this.pressTimer),this.released?this.close():this.release())},touchstart:function(n){n.preventDefault();var e=n.touches[0],t=e.clientX,r=e.clientY;this.pressTimer=setTimeout(function(){this.grab(t,r)}.bind(this),200)},touchmove:function(n){if(!this.released){var e=n.touches[0],t=e.clientX,r=e.clientY;this.move(t,r)}},touchend:function(n){(function(n){n.targetTouches.length})(n)||(clearTimeout(this.pressTimer),this.released?this.close():this.release())},clickOverlay:function(){this.close()},resizeWindow:function(){this.close()}};function Os(n){return 0===n.button}function Ls(n){return n.metaKey||n.ctrlKey}var js={init:function(n){this.el=document.createElement("div"),this.instance=n,this.parent=document.body,Ts(this.el,{position:"fixed",top:0,left:0,right:0,bottom:0,opacity:0}),this.updateStyle(n.options),_s(this.el,"click",n.handler.clickOverlay.bind(n))},updateStyle:function(n){Ts(this.el,{zIndex:n.zIndex,backgroundColor:n.bgColor,transition:"opacity\n        "+n.transitionDuration+"s\n        "+n.transitionTimingFunction})},insert:function(){this.parent.appendChild(this.el)},remove:function(){this.parent.removeChild(this.el)},fadeIn:function(){this.el.offsetWidth,this.el.style.opacity=this.instance.options.bgOpacity},fadeOut:function(){this.el.style.opacity=0}},Rs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},zs=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),Ms=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ns={init:function(n,e){this.el=n,this.instance=e,this.srcThumbnail=this.el.getAttribute("src"),this.srcset=this.el.getAttribute("srcset"),this.srcOriginal=ws(this.el),this.rect=this.el.getBoundingClientRect(),this.translate=null,this.scale=null,this.styleOpen=null,this.styleClose=null},zoomIn:function(){var n=this.instance.options,e=n.zIndex,t=n.enableGrab,r=n.transitionDuration,o=n.transitionTimingFunction;this.translate=this.calculateTranslate(),this.scale=this.calculateScale(),this.styleOpen={position:"relative",zIndex:e+1,cursor:t?ys:bs,transition:Cs+"\n        "+r+"s\n        "+o,transform:"translate3d("+this.translate.x+"px, "+this.translate.y+"px, 0px)\n        scale("+this.scale.x+","+this.scale.y+")",height:this.rect.height+"px",width:this.rect.width+"px"},this.el.offsetWidth,this.styleClose=Ts(this.el,this.styleOpen,!0)},zoomOut:function(){this.el.offsetWidth,Ts(this.el,{transform:"none"})},grab:function(n,e,t){var r=Fs(),o=r.x-n,a=r.y-e;Ts(this.el,{cursor:xs,transform:"translate3d(\n        "+(this.translate.x+o)+"px, "+(this.translate.y+a)+"px, 0px)\n        scale("+(this.scale.x+t)+","+(this.scale.y+t)+")"})},move:function(n,e,t){var r=Fs(),o=r.x-n,a=r.y-e;Ts(this.el,{transition:Cs,transform:"translate3d(\n        "+(this.translate.x+o)+"px, "+(this.translate.y+a)+"px, 0px)\n        scale("+(this.scale.x+t)+","+(this.scale.y+t)+")"})},restoreCloseStyle:function(){Ts(this.el,this.styleClose)},restoreOpenStyle:function(){Ts(this.el,this.styleOpen)},upgradeSource:function(){if(this.srcOriginal){var n=this.el.parentNode;this.srcset&&this.el.removeAttribute("srcset");var e=this.el.cloneNode(!1);e.setAttribute("src",this.srcOriginal),e.style.position="fixed",e.style.visibility="hidden",n.appendChild(e),setTimeout(function(){this.el.setAttribute("src",this.srcOriginal),n.removeChild(e)}.bind(this),50)}},downgradeSource:function(){this.srcOriginal&&(this.srcset&&this.el.setAttribute("srcset",this.srcset),this.el.setAttribute("src",this.srcThumbnail))},calculateTranslate:function(){var n=Fs(),e=this.rect.left+this.rect.width/2,t=this.rect.top+this.rect.height/2;return{x:n.x-e,y:n.y-t}},calculateScale:function(){var n=this.el.dataset,e=n.zoomingHeight,t=n.zoomingWidth,r=this.instance.options,o=r.customSize,a=r.scaleBase;if(!o&&e&&t)return{x:t/this.rect.width,y:e/this.rect.height};if(o&&"object"===(void 0===o?"undefined":Rs(o)))return{x:o.width/this.rect.width,y:o.height/this.rect.height};var i=this.rect.width/2,s=this.rect.height/2,l=Fs(),c={x:l.x-i,y:l.y-s},d=c.x/i,p=c.y/s,u=a+Math.min(d,p);if(o&&"string"==typeof o){var m=t||this.el.naturalWidth,f=e||this.el.naturalHeight,h=parseFloat(o)*m/(100*this.rect.width),g=parseFloat(o)*f/(100*this.rect.height);if(u>h||u>g)return{x:h,y:g}}return{x:u,y:u}}};function Fs(){var n=document.documentElement;return{x:Math.min(n.clientWidth,window.innerWidth)/2,y:Math.min(n.clientHeight,window.innerHeight)/2}}function qs(n,e,t){["mousedown","mousemove","mouseup","touchstart","touchmove","touchend"].forEach((function(r){_s(n,r,e[r],t)}))}var Us=function(){function n(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.target=Object.create(Ns),this.overlay=Object.create(js),this.handler=Object.create(Ds),this.body=document.body,this.shown=!1,this.lock=!1,this.released=!0,this.lastScrollPosition=null,this.pressTimer=null,this.options=Ms({},As,e),this.overlay.init(this),this.handler.init(this)}return zs(n,[{key:"listen",value:function(n){if("string"==typeof n)for(var e=document.querySelectorAll(n),t=e.length;t--;)this.listen(e[t]);else"IMG"===n.tagName&&(n.style.cursor=vs,_s(n,"click",this.handler.click),this.options.preloadImage&&ks(ws(n)));return this}},{key:"config",value:function(n){return n?(Ms(this.options,n),this.overlay.updateStyle(this.options),this):this.options}},{key:"open",value:function(n){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.onOpen;if(!this.shown&&!this.lock){var r="string"==typeof n?document.querySelector(n):n;if("IMG"===r.tagName){if(this.options.onBeforeOpen(r),this.target.init(r,this),!this.options.preloadImage){var o=this.target.srcOriginal;null!=o&&(this.options.onImageLoading(r),ks(o,this.options.onImageLoaded))}this.shown=!0,this.lock=!0,this.target.zoomIn(),this.overlay.insert(),this.overlay.fadeIn(),_s(document,"scroll",this.handler.scroll),_s(document,"keydown",this.handler.keydown),this.options.closeOnWindowResize&&_s(window,"resize",this.handler.resizeWindow);var a=function n(){_s(r,Is,n,!1),e.lock=!1,e.target.upgradeSource(),e.options.enableGrab&&qs(document,e.handler,!0),t(r)};return _s(r,Is,a),this}}}},{key:"close",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.onClose;if(this.shown&&!this.lock){var t=this.target.el;this.options.onBeforeClose(t),this.lock=!0,this.body.style.cursor=gs,this.overlay.fadeOut(),this.target.zoomOut(),_s(document,"scroll",this.handler.scroll,!1),_s(document,"keydown",this.handler.keydown,!1),this.options.closeOnWindowResize&&_s(window,"resize",this.handler.resizeWindow,!1);var r=function r(){_s(t,Is,r,!1),n.shown=!1,n.lock=!1,n.target.downgradeSource(),n.options.enableGrab&&qs(document,n.handler,!1),n.target.restoreCloseStyle(),n.overlay.remove(),e(t)};return _s(t,Is,r),this}}},{key:"grab",value:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.scaleExtra,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.options.onGrab;if(this.shown&&!this.lock){var o=this.target.el;this.options.onBeforeGrab(o),this.released=!1,this.target.grab(n,e,t);var a=function n(){_s(o,Is,n,!1),r(o)};return _s(o,Is,a),this}}},{key:"move",value:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.scaleExtra,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.options.onMove;if(this.shown&&!this.lock){this.released=!1,this.body.style.cursor=xs,this.target.move(n,e,t);var o=this.target.el,a=function n(){_s(o,Is,n,!1),r(o)};return _s(o,Is,a),this}}},{key:"release",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.onRelease;if(this.shown&&!this.lock){var t=this.target.el;this.options.onBeforeRelease(t),this.lock=!0,this.body.style.cursor=gs,this.target.restoreOpenStyle();var r=function r(){_s(t,Is,r,!1),n.lock=!1,n.released=!0,e(t)};return _s(t,Is,r),this}}}]),n}(),Bs=".theme-vdoing-content img:not(.no-zoom)",Gs=JSON.parse('{"bgColor":"rgba(0,0,0,0.6)"}'),Hs=Number("500"),Vs=function(){function n(){ps(this,n),this.instance=new Us(Gs)}return ms(n,[{key:"update",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bs;"undefined"!=typeof window&&this.instance.listen(n)}},{key:"updateDelay",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bs,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hs;setTimeout((function(){return n.update(e)}),t)}}]),n}(),$s=[es,ss,ds,hs,{watch:{"$page.path":function(){void 0!==this.$vuepress.zooming&&this.$vuepress.zooming.updateDelay()}},mounted:function(){this.$vuepress.zooming=new Vs,this.$vuepress.zooming.updateDelay()}}],Ws={name:"GlobalLayout",computed:{layout:function(){var n=this.getLayout();return Ki("layout",n),Ro.component(n)}},methods:{getLayout:function(){if(this.$page.path){var n=this.$page.frontmatter.layout;return n&&(this.$vuepress.getLayoutAsyncComponent(n)||this.$vuepress.getVueComponent(n))?n:"Layout"}return"NotFound"}}},Ks=t(15),Xs=Object(Ks.a)(Ws,(function(){var n=this.$createElement;return(this._self._c||n)(this.layout,{tag:"component"})}),[],!1,null,null,null).exports;!function(n,e,t){var r;switch(e){case"components":n[e]||(n[e]={}),Object.assign(n[e],t);break;case"mixins":n[e]||(n[e]=[]),(r=n[e]).push.apply(r,Object(Ii.a)(t));break;default:throw new Error("Unknown option name.")}}(Xs,"mixins",$s);var Qs=[{name:"v-a395e182",path:"/archives/",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-a395e182").then(t)}},{path:"/archives/index.html",redirect:"/archives/"},{path:"/@pages/archivesPage.html",redirect:"/archives/"},{name:"v-61e6c4c2",path:"/categories/",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-61e6c4c2").then(t)}},{path:"/categories/index.html",redirect:"/categories/"},{path:"/@pages/categoriesPage.html",redirect:"/categories/"},{name:"v-690ecebf",path:"/tags/",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-690ecebf").then(t)}},{path:"/tags/index.html",redirect:"/tags/"},{path:"/@pages/tagsPage.html",redirect:"/tags/"},{name:"v-0e1d1ba8",path:"/blog/",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-0e1d1ba8").then(t)}},{path:"/blog/index.html",redirect:"/blog/"},{name:"v-600665ec",path:"/blog/database/",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-600665ec").then(t)}},{path:"/blog/database/index.html",redirect:"/blog/database/"},{name:"v-95764dbe",path:"/blog/database/common_details.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-95764dbe").then(t)}},{name:"v-61aeda36",path:"/blog/database/dbs_abstract.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-61aeda36").then(t)}},{name:"v-f89e89de",path:"/blog/database/high_performance_mysql.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-f89e89de").then(t)}},{name:"v-303c02c2",path:"/blog/database/mysql_index.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-303c02c2").then(t)}},{name:"v-e117a336",path:"/blog/database/mysql_runin_docker.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-e117a336").then(t)}},{name:"v-46965d82",path:"/blog/database/problem_with_using_myisam.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-46965d82").then(t)}},{name:"v-2c4fb4ae",path:"/blog/database/redis_manual.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-2c4fb4ae").then(t)}},{name:"v-742c98c4",path:"/blog/design/",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-742c98c4").then(t)}},{path:"/blog/design/index.html",redirect:"/blog/design/"},{name:"v-f1ab1866",path:"/blog/design/algorithm_common.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-f1ab1866").then(t)}},{name:"v-5180c0ff",path:"/blog/design/algorithm_distributed_consensus_protocols.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-5180c0ff").then(t)}},{name:"v-31e2af82",path:"/blog/design/architecture_7principle_in_software.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-31e2af82").then(t)}},{name:"v-92792e82",path:"/blog/design/architecture_mvc_mvp_mvvm.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-92792e82").then(t)}},{name:"v-53f7dee4",path:"/blog/lang/",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-53f7dee4").then(t)}},{path:"/blog/lang/index.html",redirect:"/blog/lang/"},{name:"v-d7f39702",path:"/blog/lang/cxx.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-d7f39702").then(t)}},{name:"v-3a68b8c2",path:"/blog/lang/cxx_traps.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-3a68b8c2").then(t)}},{name:"v-16fdda93",path:"/blog/lang/go.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-16fdda93").then(t)}},{name:"v-52f58a7d",path:"/blog/lang/go/gomod.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-52f58a7d").then(t)}},{name:"v-65f07e87",path:"/blog/lang/go/intrest_blogs.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-65f07e87").then(t)}},{name:"v-6a7f071f",path:"/blog/lang/go/recover&const_desc.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-6a7f071f").then(t)}},{name:"v-2c04e47f",path:"/blog/lang/go/slice_base.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-2c04e47f").then(t)}},{name:"v-0c0b8bdf",path:"/blog/lang/go/somethings_about_nil.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-0c0b8bdf").then(t)}},{name:"v-95a0b5de",path:"/blog/lang/js.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-95a0b5de").then(t)}},{name:"v-d3589f42",path:"/blog/lang/python/py__xx__.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-d3589f42").then(t)}},{name:"v-90b5b0c2",path:"/blog/lang/python/py_env.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-90b5b0c2").then(t)}},{name:"v-50b53767",path:"/blog/lang/python/utils.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-50b53767").then(t)}},{name:"v-718753e8",path:"/blog/network/",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-718753e8").then(t)}},{path:"/blog/network/index.html",redirect:"/blog/network/"},{name:"v-570d3d9f",path:"/blog/network/grpc/grpc_connectivity_semantics_and_api.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-570d3d9f").then(t)}},{name:"v-b9611c0e",path:"/blog/network/grpc/grpc_interceptor_with_go.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-b9611c0e").then(t)}},{name:"v-e4b92d82",path:"/blog/network/grpc/grpc_over_http2.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-e4b92d82").then(t)}},{name:"v-75d8bb3f",path:"/blog/network/grpc/grpc_source_notes.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-75d8bb3f").then(t)}},{name:"v-32fca817",path:"/blog/network/http2/http2_in_go.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-32fca817").then(t)}},{name:"v-398f0321",path:"/blog/network/introduce_tcp_udp.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-398f0321").then(t)}},{name:"v-319db75f",path:"/blog/network/tcpip_mind_map.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-319db75f").then(t)}},{name:"v-5354451a",path:"/blog/platform/",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-5354451a").then(t)}},{path:"/blog/platform/index.html",redirect:"/blog/platform/"},{name:"v-48032f1f",path:"/blog/platform/android/android_utils.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-48032f1f").then(t)}},{name:"v-485139ef",path:"/blog/platform/linux/linux_cmds.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-485139ef").then(t)}},{name:"v-29d661ff",path:"/blog/platform/linux/linux_mem_grows.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-29d661ff").then(t)}},{name:"v-4976d5df",path:"/blog/platform/windows/certificate.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-4976d5df").then(t)}},{name:"v-6a62161f",path:"/blog/platform/windows/make_cert.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-6a62161f").then(t)}},{name:"v-de8bce82",path:"/blog/platform/windows/pdb_structure.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-de8bce82").then(t)}},{name:"v-3682497f",path:"/blog/platform/windows/runtime_lib.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-3682497f").then(t)}},{name:"v-1d6a5088",path:"/blog/skills/",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-1d6a5088").then(t)}},{path:"/blog/skills/index.html",redirect:"/blog/skills/"},{name:"v-091c8f7f",path:"/blog/skills/ai/anime_roam.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-091c8f7f").then(t)}},{name:"v-7103a3ed",path:"/blog/skills/ai/auc_roc.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-7103a3ed").then(t)}},{name:"v-5240d527",path:"/blog/skills/ai/bigdata_arch_theory.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-5240d527").then(t)}},{name:"v-5e7e6c7d",path:"/blog/skills/ai/derivation_of_PCA.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-5e7e6c7d").then(t)}},{name:"v-633581c2",path:"/blog/skills/ai/image_papers.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-633581c2").then(t)}},{name:"v-4b4d8c9f",path:"/blog/skills/ai/imgproc_base.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-4b4d8c9f").then(t)}},{name:"v-cc5c4542",path:"/blog/skills/ai/pytorch_base.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-cc5c4542").then(t)}},{name:"v-386d6b3f",path:"/blog/skills/ai/super_resolution.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-386d6b3f").then(t)}},{name:"v-0e5e6773",path:"/blog/skills/devops/docker-base.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-0e5e6773").then(t)}},{name:"v-35163721",path:"/blog/skills/devops/ipvs_in_k8s.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-35163721").then(t)}},{name:"v-75c42f42",path:"/blog/skills/devops/k8s_base.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-75c42f42").then(t)}},{name:"v-897ab682",path:"/blog/skills/devops/k8s_net_expose.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-897ab682").then(t)}},{name:"v-41809442",path:"/blog/skills/devops/k8s_net_mode.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-41809442").then(t)}},{name:"v-66696d37",path:"/blog/skills/devops/k8s_net_srv.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-66696d37").then(t)}},{name:"v-71519a9f",path:"/blog/skills/devops/k8s_rolling_update.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-71519a9f").then(t)}},{name:"v-6ca7651f",path:"/blog/skills/devops/opentracing_overview.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-6ca7651f").then(t)}},{name:"v-15864453",path:"/blog/skills/office/ms_shellink.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-15864453").then(t)}},{name:"v-a254d0c2",path:"/blog/skills/office/ole_office.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-a254d0c2").then(t)}},{name:"v-76ece9bf",path:"/blog/skills/office/ole_office_msoffcrypto.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-76ece9bf").then(t)}},{name:"v-34bb950d",path:"/blog/skills/pdf/pdf_struct.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-34bb950d").then(t)}},{name:"v-03728847",path:"/blog/skills/ui/inkscape_tutorial.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-03728847").then(t)}},{name:"v-cf80e5c2",path:"/blog/skills/ui/utils.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-cf80e5c2").then(t)}},{name:"v-7d6afdba",path:"/blog/skills/utils/charscter_and_coding.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-7d6afdba").then(t)}},{name:"v-dde8b282",path:"/blog/skills/utils/child_program.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-dde8b282").then(t)}},{name:"v-6cc2a996",path:"/blog/skills/utils/windows_wallpapers.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-6cc2a996").then(t)}},{name:"v-5f9b1d8c",path:"/blog/utilization/",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-5f9b1d8c").then(t)}},{path:"/blog/utilization/index.html",redirect:"/blog/utilization/"},{name:"v-0dc92f7f",path:"/blog/utilization/ch_pinyin_tran.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-0dc92f7f").then(t)}},{name:"v-25c8ca33",path:"/blog/utilization/foo_apk_reverse.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-25c8ca33").then(t)}},{name:"v-0b34dfc2",path:"/blog/utilization/foo_batch_pulls.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-0b34dfc2").then(t)}},{name:"v-9af6bf82",path:"/blog/utilization/foo_consul.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-9af6bf82").then(t)}},{name:"v-ccf5212a",path:"/blog/utilization/foo_docker_jenkins_dind.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-ccf5212a").then(t)}},{name:"v-c6b25e82",path:"/blog/utilization/foo_k8s_downward_api.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-c6b25e82").then(t)}},{name:"v-019d6745",path:"/blog/utilization/foo_redis_cluster.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-019d6745").then(t)}},{name:"v-2fe5090c",path:"/blog/utility/",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-2fe5090c").then(t)}},{path:"/blog/utility/index.html",redirect:"/blog/utility/"},{path:"/blog/xnote/",redirect:"/blog/utility/"},{name:"v-a6752c4a",path:"/blog/xnote/about_acknowledge.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-a6752c4a").then(t)}},{name:"v-0dd9b182",path:"/blog/xnote/about_heart_and_mind.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-0dd9b182").then(t)}},{name:"v-5d28d3ff",path:"/blog/xnote/about_pm.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-5d28d3ff").then(t)}},{name:"v-d5db50c2",path:"/blog/xnote/about_refactor.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-d5db50c2").then(t)}},{name:"v-f76e517a",path:"/blog/xnote/about_skill_communication.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-f76e517a").then(t)}},{name:"v-15f1fc67",path:"/blog/xnote/about_stock.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-15f1fc67").then(t)}},{name:"v-8cf30266",path:"/blog/xnote/interesting_xxx.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-8cf30266").then(t)}},{name:"v-455450db",path:"/blog/xnote/rnote_deep_mind.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-455450db").then(t)}},{name:"v-162635f9",path:"/blog/xnote/rnote_geekbang_architecture.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-162635f9").then(t)}},{name:"v-680803e5",path:"/blog/xnote/rnote_geekbang_devops.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-680803e5").then(t)}},{name:"v-155cc502",path:"/blog/xnote/rnote_google_skill_level.html",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-155cc502").then(t)}},{name:"v-16de7e50",path:"/",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-16de7e50").then(t)}},{path:"/index.html",redirect:"/"},{name:"v-02e3228c",path:"/more/",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-02e3228c").then(t)}},{path:"/more/index.html",redirect:"/more/"},{name:"v-4bfbd5e5",path:"/more/about/",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-4bfbd5e5").then(t)}},{path:"/more/about/index.html",redirect:"/more/about/"},{path:"/more/about.html",redirect:"/more/about/"},{name:"v-19beb85e",path:"/more/favorites/",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-19beb85e").then(t)}},{path:"/more/favorites/index.html",redirect:"/more/favorites/"},{path:"/more/favorites.html",redirect:"/more/favorites/"},{name:"v-5b31b7d6",path:"/more/friends/",component:Xs,beforeEnter:function(n,e,t){Wi("Layout","v-5b31b7d6").then(t)}},{path:"/more/friends/index.html",redirect:"/more/friends/"},{path:"/more/friends.html",redirect:"/more/friends/"},{path:"*",component:Xs}],Ys={title:"",description:"",base:"/blog/",headTags:[["link",{rel:"icon",href:"/blog/img/favicon.ico"}],["meta",{name:"keywords",content:"åå®¢,å¨æ ,ææ¯ææ¡£,å­¦ä¹ ,é¢è¯,Go,C/C++,Python,Markdown"}],["meta",{name:"theme-color",content:"#11a8cd"}]],pages:[{title:"å½æ¡£",frontmatter:{archivesPage:!0,title:"å½æ¡£",permalink:"/archives/",article:!1},regularPath:"/@pages/archivesPage.html",relativePath:"@pages/archivesPage.md",key:"v-a395e182",path:"/archives/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2022/03/31, 13:54:53",lastUpdatedTimestamp:1648734893e3},{title:"åç±»",frontmatter:{categoriesPage:!0,title:"åç±»",permalink:"/categories/",article:!1},regularPath:"/@pages/categoriesPage.html",relativePath:"@pages/categoriesPage.md",key:"v-61e6c4c2",path:"/categories/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2022/03/31, 13:54:53",lastUpdatedTimestamp:1648734893e3},{title:"æ ç­¾",frontmatter:{tagsPage:!0,title:"æ ç­¾",permalink:"/tags/",article:!1},regularPath:"/@pages/tagsPage.html",relativePath:"@pages/tagsPage.md",key:"v-690ecebf",path:"/tags/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2022/03/31, 13:54:53",lastUpdatedTimestamp:1648734893e3},{title:"blog",frontmatter:{published:!0,title:"blog",description:"jiao's blog",keywords:["jiao's blog"],categories:["blog"],permalink:"/blog/",date:"2020-04-13T00:00:00.000Z",tags:[null]},regularPath:"/blog/",relativePath:"blog/README.md",key:"v-0e1d1ba8",path:"/blog/",headers:[{level:2,title:"Part I -  Design",slug:"part-i-design",normalizedTitle:"part i -  design",charIndex:null},{level:2,title:"Part II -  Skills",slug:"part-ii-skills",normalizedTitle:"part ii -  skills",charIndex:null},{level:2,title:"Part III -  Utilization",slug:"part-iii-utilization",normalizedTitle:"part iii -  utilization",charIndex:null},{level:2,title:"Part IV -  Lang",slug:"part-iv-lang",normalizedTitle:"part iv -  lang",charIndex:null},{level:2,title:"Part V -  Platform",slug:"part-v-platform",normalizedTitle:"part v -  platform",charIndex:null},{level:2,title:"Part VI -  Database",slug:"part-vi-database",normalizedTitle:"part vi -  database",charIndex:null},{level:2,title:"Part VII -  Network",slug:"part-vii-network",normalizedTitle:"part vii -  network",charIndex:null},{level:2,title:"Part VIII -  Xnote",slug:"part-viii-xnote",normalizedTitle:"part viii -  xnote",charIndex:null}],headersStr:"Part I -  Design Part II -  Skills Part III -  Utilization Part IV -  Lang Part V -  Platform Part VI -  Database Part VII -  Network Part VIII -  Xnote",content:"# BLOG\n\n\n# Part I - Design\n\n * ç®å½\n\n\n# Part II - Skills\n\n * ç®å½\n * Chapter - Office\n * Chapter - Ui\n * Chapter - Ai\n * Chapter - Utils\n * Chapter - Pdf\n * Chapter - Devops\n\n\n# Part III - Utilization\n\n * ç®å½\n\n\n# Part IV - Lang\n\n * ç®å½\n * Chapter - Python\n * Chapter - Go\n\n\n# Part V - Platform\n\n * ç®å½\n * Chapter - Android\n * Chapter - Linux\n * Chapter - Windows\n\n\n# Part VI - Database\n\n * ç®å½\n\n\n# Part VII - Network\n\n * ç®å½\n * Chapter - Http2\n * Chapter - Grpc\n\n\n# Part VIII - Xnote\n\n * ç®å½",normalizedContent:"# blog\n\n\n# part i - design\n\n * ç®å½\n\n\n# part ii - skills\n\n * ç®å½\n * chapter - office\n * chapter - ui\n * chapter - ai\n * chapter - utils\n * chapter - pdf\n * chapter - devops\n\n\n# part iii - utilization\n\n * ç®å½\n\n\n# part iv - lang\n\n * ç®å½\n * chapter - python\n * chapter - go\n\n\n# part v - platform\n\n * ç®å½\n * chapter - android\n * chapter - linux\n * chapter - windows\n\n\n# part vi - database\n\n * ç®å½\n\n\n# part vii - network\n\n * ç®å½\n * chapter - http2\n * chapter - grpc\n\n\n# part viii - xnote\n\n * ç®å½",charsets:{cjk:!0}},{title:"Database",frontmatter:{published:!0,title:"Database",description:"database ç¸å³ç¥è¯æ±æ»",keywords:[""],categories:["database"],permalink:"/blog/database/",date:"2020-04-14T00:00:00.000Z",tags:[null]},regularPath:"/blog/database/",relativePath:"blog/database/README.md",key:"v-600665ec",path:"/blog/database/",headersStr:null,content:"# DATABASE\n\n * Docker ä¸­è¿è¡ Mysql\n * High Performance Mysql, 3Th Edition éè¯»\n * æ¹éåå¥é æMysqlè®¿é®æ¢é®é¢\n * Mysql ä¸­çç´¢å¼\n * Db æ½è±¡çè§£\n * Redis æå\n * å¸¸è§ Db åºç¡",normalizedContent:"# database\n\n * docker ä¸­è¿è¡ mysql\n * high performance mysql, 3th edition éè¯»\n * æ¹éåå¥é æmysqlè®¿é®æ¢é®é¢\n * mysql ä¸­çç´¢å¼\n * db æ½è±¡çè§£\n * redis æå\n * å¸¸è§ db åºç¡",charsets:{cjk:!0}},{title:"å¸¸è§ DB åºç¡",frontmatter:{title:"å¸¸è§ DB åºç¡",date:"2020-04-21T00:00:00.000Z",description:"å¸¸è§ DB åºç¡ç¥è¯",categories:["blog","database"],tags:[null],permalink:null},regularPath:"/blog/database/common_details.html",relativePath:"blog/database/common_details.md",key:"v-95764dbe",path:"/blog/database/common_details.html",headers:[{level:2,title:"Mongo",slug:"mongo",normalizedTitle:"mongo",charIndex:15},{level:2,title:"Mysql",slug:"mysql",normalizedTitle:"mysql",charIndex:193}],headersStr:"Mongo Mysql",content:"# å¸¸è§ DB åºç¡\n\n\n# Mongo\n\n * cmds\n\n    db.happygame_sdk.test.getIndexes();\n    db.happygame_sdk.test.explain(\"executionStats\").find({'playerid':'ad3e5eb8-a03c-5011-8f2d-ce32c2a7ab31'});\n\n\n1\n2\n\n\n\n# Mysql\n\n * äºè§£æ°æ®åºçä¸äºåºæ¬çè®ºç¥è¯ï¼\n   * æ°æ®çå­å¨æ ¼å¼ (å ç»ç»è¡¨ vs èç°ç´¢å¼è¡¨)\n   * å¹¶åæ§å¶åè®® (MVCC vs Lock-Based CC)\n   * Two-Phase Locking\n   * æ°æ®åºçéç¦»çº§å«å®ä¹ (Isolation Level)\n * äºè§£SQLæ¬èº«çæ§è¡è®¡å\n   * ä¸»é®æ«æ vs å¯ä¸é®æ«æ vs èå´æ«æ vs å¨è¡¨æ«æ\n   * innodb index types\n * äºè§£æ°æ®åºæ¬èº«çä¸äºå®ç°ç»è\n   * è¿æ»¤æ¡ä»¶æå\n     * Index Key/Index Filter/Table Filter\n     * whereæ¡ä»¶æåä¸åºç¨æµæ\n   * Index Condition Pushdown\n   * Semi-Consistent Read\n * æ¥çæ°æ®åºç©ºé´å ç¨ï¼\n\n    SELECT CONCAT(table_schema,'.',table_name) AS 'Table Name', \n        CONCAT(ROUND(table_rows/1000000,4),'M') AS 'Number of Rows', \n        CONCAT(ROUND(data_length/(1024*1024*1024),4),'G') AS 'Data Size', \n        CONCAT(ROUND(index_length/(1024*1024*1024),4),'G') AS 'Index Size',\n        CONCAT(ROUND((data_length+index_length)/(1024*1024*1024),4),'G') AS'Total'\n    FROM information_schema.TABLES WHERE table_schema LIKE 'weixin_game' order by Total desc;\n\n\n1\n2\n3\n4\n5\n6\n\n * é\n   * ä¹è§éãæ²è§é(è¯»éãäºæ¥é)\n   * mysql æ­»éåæ\n     * Mysqlæ¥è¯¢è¯­å¥ä½¿ç¨select.. for updateå¯¼è´çæ°æ®åºæ­»éåæ",normalizedContent:"# å¸¸è§ db åºç¡\n\n\n# mongo\n\n * cmds\n\n    db.happygame_sdk.test.getindexes();\n    db.happygame_sdk.test.explain(\"executionstats\").find({'playerid':'ad3e5eb8-a03c-5011-8f2d-ce32c2a7ab31'});\n\n\n1\n2\n\n\n\n# mysql\n\n * äºè§£æ°æ®åºçä¸äºåºæ¬çè®ºç¥è¯ï¼\n   * æ°æ®çå­å¨æ ¼å¼ (å ç»ç»è¡¨ vs èç°ç´¢å¼è¡¨)\n   * å¹¶åæ§å¶åè®® (mvcc vs lock-based cc)\n   * two-phase locking\n   * æ°æ®åºçéç¦»çº§å«å®ä¹ (isolation level)\n * äºè§£sqlæ¬èº«çæ§è¡è®¡å\n   * ä¸»é®æ«æ vs å¯ä¸é®æ«æ vs èå´æ«æ vs å¨è¡¨æ«æ\n   * innodb index types\n * äºè§£æ°æ®åºæ¬èº«çä¸äºå®ç°ç»è\n   * è¿æ»¤æ¡ä»¶æå\n     * index key/index filter/table filter\n     * whereæ¡ä»¶æåä¸åºç¨æµæ\n   * index condition pushdown\n   * semi-consistent read\n * æ¥çæ°æ®åºç©ºé´å ç¨ï¼\n\n    select concat(table_schema,'.',table_name) as 'table name', \n        concat(round(table_rows/1000000,4),'m') as 'number of rows', \n        concat(round(data_length/(1024*1024*1024),4),'g') as 'data size', \n        concat(round(index_length/(1024*1024*1024),4),'g') as 'index size',\n        concat(round((data_length+index_length)/(1024*1024*1024),4),'g') as'total'\n    from information_schema.tables where table_schema like 'weixin_game' order by total desc;\n\n\n1\n2\n3\n4\n5\n6\n\n * é\n   * ä¹è§éãæ²è§é(è¯»éãäºæ¥é)\n   * mysql æ­»éåæ\n     * mysqlæ¥è¯¢è¯­å¥ä½¿ç¨select.. for updateå¯¼è´çæ°æ®åºæ­»éåæ",charsets:{cjk:!0}},{title:"DB æ½è±¡çè§£",frontmatter:{title:"DB æ½è±¡çè§£",date:"2020-04-21T00:00:00.000Z",description:"å¸¸è§dbçæ½è±¡çè§£",categories:["blog","database"],tags:[null],permalink:null},regularPath:"/blog/database/dbs_abstract.html",relativePath:"blog/database/dbs_abstract.md",key:"v-61aeda36",path:"/blog/database/dbs_abstract.html",headers:[{level:2,title:"db è¯¦è§£",slug:"db-è¯¦è§£",normalizedTitle:"db è¯¦è§£",charIndex:2},{level:2,title:"redis ä½¿ç¨",slug:"redis-ä½¿ç¨",normalizedTitle:"redis ä½¿ç¨",charIndex:2551},{level:2,title:"mysql",slug:"mysql",normalizedTitle:"mysql",charIndex:1306},{level:2,title:"mongo",slug:"mongo",normalizedTitle:"mongo",charIndex:1335},{level:2,title:"END",slug:"end",normalizedTitle:"end",charIndex:9279}],headersStr:"db è¯¦è§£ redis ä½¿ç¨ mysql mongo END",content:"# db è¯¦è§£\n\n * æä¹å\n   * æ°æ®éå(ç©çå¤ä»½) æ ä¿®æ¹è®°å½(é»è¾å¤ä»½)\n   * éç¹\n     * èªå¨æä¹åæ¶ï¼å¶åççæ¶æº: ä¸è¬å¨å¨dbå½ä»¤ä¹å, è¿åè°ç¨æ¹ä¹å\n     * æ­¥éª¤ï¼buffer ---\x3e æä»¶ ---\x3e å·æ°æä»¶å°ç£ç\n       * æ¯ä¸ªç¯èé½å¯ä»¥æèªå·±çç­ç¥éæ©æ¶æºï¼å¹³è¡¡æ§è½åå®æ´æ§\n         * å½ä»¤æ§è¡å®æå¹¶åå¥bufferåè¿åæ¶æºçç­ç¥æ§å¶:\n           * ä¸ä¿è¯åå¥æä»¶\n           * ä¿è¯åå¥æä»¶\n           * ä¿è¯æä»¶å·å¥ç£ç\n         * å·çç­ç¥(linuxçfsyncå½ä»¤)\n           * æ¯æ¬¡ä¿®æ¹å½ä»¤é½å·ç\n           * æ¯Nç§æNä¸ªæä½å·ç\n           * ä¸ä¸»å¨å·çï¼ä¾èµæä½ç³»ç»çå·çç­ç¥\n     * æ³¨æ: æä¹åæ¶æ¯å¦ä¼é»å¡æ°æ®åºæä½\n * é«å¯ç¨\n   * ä¸»ä»ç»æ\n   * éç¹\n     * ä½ç¨\n       * ç­å¤\n       * è¯»ååç¦»ï¼åè¡¡æ°æ®åºè´è½½\n     * åªä»\n       * æä½è®°å½è½çåååæ­¥(æä»¶)\n       * æä½è®°å½ä¸è½çå°±åæ­¥(åå­)\n     * æ¹å¼(å¹³è¡¡æ°æ®ä¸è´æ§åæ§è½)\n       * å¼æ­¥å¤å¶\n         * ä¸»èç¹ç¨æ·å½ä»¤å®ææ¶ï¼åªä¿è¯æ°æ®åå¥åªä»\n         * é«å»¶è¿åé«æ§è½ãéè¦, ä¸»ä»éè¿å¨æäº¤æµå¤å¶è¿åº¦, æ¥ä¿è¯ä¸»ä»æ°æ®ä¸ä¸è´æ§çå¹åº¦\n       * åæ­¥å¤å¶\n         * ä¸»èç¹ç¨æ·å½ä»¤å®ææ¶ï¼ä¿è¯æ°æ®å·²ç»è¢«ææä»åºåæ­¥å®æ\n       * ååæ­¥å¤å¶\n         * ä¸»èç¹ç¨æ·å½ä»¤å®ææ¶ï¼ä¿è¯æ°æ®å·²ç»è¢«é¨åä»åºå­å¨ï¼ä½ä¸ä¿è¯ä»åºå®æåæ­¥\n     * é»è¾\n       * å¨éåæ­¥ãå¢éåæ­¥\n     * ä¸»ä»åæ¢\n       * æå¨\n         * é²æ­¢èè£åçãä¿è¯æ°ä¸»èç¹æ°æ®ææ°\n       * èªå¨\n         * éè¿ä¸è´æ§åè®®è¿è¡å³ç­ï¼ä¸»èç¹å½åç¶æãéä¸»ç»æ\n         * ä¸è¬è¦å¤ç:\n           * æ°éç¾¤æ°æ®ææ°åä¸è´æ§ä¿è¯\n           * çæ§èç¹äºè§£å¶å®ææèç¹çå­æ´»ãçæ§èç¹ä¹é´ä¿¡æ¯åæ­¥ãçæ§èç¹è·å(æææå¡èç¹ç)æå¡ç¶æ\n   * é¾ç¹\n     * ä¸»ä»æ°æ®ä¸è´æ§\n       * ç½ç»å»¶è¿ãä¸»èç¹é«æµéãä»èç¹æ§è½ä¸è¶³(å¯ä»¥èèä»åºå¹¶ååºç¨åæ­¥å°çæ°æ®)ç­ç­\n * é«æ§è½\n   * æ¹å¼\n     * éè¿ä¸»ä»ç»æ, å®ç°è¯»ååç¦»\n     * cluster:\n       * ä¸è´æ§hash æ ååslot\n       * sharding ç»åæ°æ®åæ§å¶åç¦» å½¢æå»ä¸­å¿åéç¾¤\n   * é®é¢\n     * å¦ï¼redis éç¾¤multi-keyæä½ä¸æ¯ææèæ¯æä¸å¤\n   * æ³¨æ\n     * æ§è½æµè¯(å·¥å·)\n     * æ°æ®åºéçé®é¢\n       * redis åçº¿ç¨, æ é\n       * mysql æè¯»åé, ååè¡¨éãè¡é\n       * mongo æè¯»åé, åååºå¨å±éãåºéãéåé\n * ç¼å­\n   * ç¼å­ç©¿é: æ¥è¯¢ä¸å®ä¸å­å¨çæ°æ®æ¶, æ¥è¯¢åæºdbãæµéå¤§(å¤§éçä¸å­å¨æ°æ®è¯·æ±)æ¶dbè¢«åå®\n     * å¸éè¿æ»¤å¨ãç¼å­ç©ºå¼(çå½å¨æç­)\n   * ç¼å­å»ç©¿ï¼ç¼å­ä¸ç§éå¸¸âç­ç¹âçæ°æ®ï¼å¨æä¸ªæ¶é´ç¹è¿æçæ¶åï¼æ°å¥½å¨è¿ä¸ªæ¶é´ç¹å¯¹è¿ä¸ªKeyæå¤§éçå¹¶åè¯·æ±è¿æ¥ï¼ç¬é´æåç«¯DBåå®\n     * äºæ¥é(mutex key)ãä¸è¿æ(ä½åå°å·æ°)\n   * ç¼å­éªå´©ï¼è®¾ç½®ç¼å­æ¶éç¨äºç¸åçè¿ææ¶é´ï¼å¯¼è´ç¼å­å¨æä¸æ¶å»åæ¶å¤±æï¼è¯·æ±å¨é¨è½¬åå°DBï¼DBç¬æ¶ååè¿ééªå´©\n     * å¤å¯æ¬ï¼å¹¶ä¸æ¯ä¸ªå¯æ¬è®¾ç½®ä¸åçè¿ææ¶é´(å¨æå®èå´åéæº)\n * å³ç³»åæ°æ®åº\n   * æ°æ®åºè®¾è®¡ä¸å¤§èå¼ï¼\n     * ç¬¬ä¸èå¼(1NF)ï¼æ°æ®è¡¨ä¸­çæ¯ä¸åå¿é¡»æ¯ä¸å¯æåçæå°ååï¼ä¹å°±æ¯ç¡®ä¿æ¯ä¸åçåå­æ§\n     * ç¬¬äºèå¼(2NF)ï¼æ»¡è¶³1NFåï¼è¦æ±è¡¨ä¸­çææåé½å¿é¡»ä¾èµäºä¸»é®ï¼èä¸è½æä»»ä½ä¸åä¸ä¸»é®æ²¡æå³ç³»ï¼ä¹å°±æ¯è¯´ä¸ä¸ªè¡¨åªæè¿°ä¸ä»¶äºæ\n     * ç¬¬ä¸èå¼(3NF)ï¼å¿é¡»åæ»¡è¶³2NFï¼è¦æ±ï¼è¡¨ä¸­çæ¯ä¸ååªä¸ä¸»é®ç´æ¥ç¸å³èä¸æ¯é´æ¥ç¸å³ï¼(è¡¨ä¸­çæ¯ä¸ååªè½ä¾èµäºä¸»é®)\n   * äºå¡(transaction)\n     * ACID ï¼ä¿è¯äºå¡æ¯æ­£ç¡®å¯é çï¼æå¿é¡»å·å¤çåä¸ªç¹æ§ï¼åå­æ§(atomicityï¼æç§°ä¸å¯åå²æ§)ãä¸è´æ§(consistency)ãéç¦»æ§(isolationï¼åç§°ç¬ç«æ§)ãæä¹æ§(durability)ã\n     * äºå¡çéç¦»çº§å« : å¾è§£èè¯»ãä¸å¯éå¤è¯»ãå¹»è¯»é®é¢\n       * read uncommitted\n         * äºå¡Aä¿®æ¹æ°æ®a, äºå¡Bè¯»åæ°æ®a ,,,,,, B è¯»åå°äºå¡ A å·²ä¿®æ¹ä½æªæäº¤çæ°æ® ,,,,,, èè¯»\n       * read committed\n         * äºå¡Aä¿®æ¹æ°æ®a, äºå¡Bå¨Aæä½ä¹åä¹ååå«è¯»åæ°æ®a ,,,,,, B è¯»å°çä¸¤æ¬¡æ°æ®ä¸ä¸è´ ,,,,,, ä¸å¯éå¤è¯»\n       * repeatable read\n         * äºå¡Aæå¥(æå é¤)æ°æ®a, äºå¡Bå¨Aæä½ä¹åä¹ååå«è¯»åæ°æ®a ,,,,,, B ä¼åç°æ°æ®aå¿½å¨å¿½ä¸å¨ ,,,,,, å¹»è¯»(èè¯»)\n       * serializable\n         * å¯ä»¥é¿åææçé®é¢\n     * note\n       * ä¸è¿°åç§éç¦»çº§å«æ¯ç±å¼±å°å¼º, éç¦»çº§å«è¶å¼ºæ§è½åå°çå½±åè¶å¤§\n       * å¯ä»¥å¨ä½éç¦»çº§å«ä¸ï¼éåéçä½¿ç¨è¾¾å°å ä¹é¿åå¹»è¯»çææ\n       * ä¸è¬çDBMSç³»ç»ï¼é½ä½¿ç¨Read-Comittedä½ä¸ºé»è®¤éç¦»çº§å«ï¼å¦OracleãSQL Serverç­ï¼èMySQLå´ä½¿ç¨Read-Repeatable\n\n\n# redis ä½¿ç¨\n\n# æä¹å\n\n * RDB\n   * ä¸ä¸ªéå¸¸ç´§å(compact)çæä»¶ï¼ä¿å­äº Redis å¨æä¸ªæ¶é´ç¹ä¸çæ°æ®éã\n   * ç¶è¿ç¨å¨ä¿å­RDBæ¶forkä¸ä¸ªå­è¿ç¨ï¼ç¶åç±å­è¿ç¨æ¥å¤çæ¥ä¸æ¥çææä¿å­å·¥ä½ï¼ç¶è¿ç¨æ é¡»æ§è¡ä»»ä½ç£ç I/O æä½ã\n * AOF(append-only file)\n   * AOF æä»¶çä½ç§¯éå¸¸è¦å¤§äº RDB æä»¶çä½ç§¯\n   * åå¥AOFæä»¶: aof_buf ---\x3e AOFæä»¶ ---\x3e å·æ°å°ç£ç\n     * æ¨èçå·çç­ç¥ï¼æ¯ç§ fsync ä¸æ¬¡ï¼è¶³å¤å¿«(åä½¿ç¨ RDB æä¹åå·®ä¸å¤)ï¼å¹¶ä¸å¨æéæ¶åªä¼ä¸¢å¤± 1 ç§éçæ°æ®ã\n * RDB + AOF\n   * redis5.0ä¹åæ°å¢, éè¦å¼å¯ï¼aof-use-rdb-preamble\n\n# é«å¯ç¨\n\n * ä¸»ä»ç»æ(åæ­¥ä½¿ç¨ï¼slaveof å½ä»¤)\n   * Redisä½¿ç¨é»è®¤çå¼æ­¥å¤å¶\n     * æ¯ç»å¤§å¤æ° Redis ç¨ä¾çèªç¶å¤å¶æ¨¡å¼ã\n     * åæ¬ï¼å¨éåæ­¥ å å¢éåæ­¥\n       * å¨Slaveå¯å¨å¹¶è¿æ¥å°Masterä¹åï¼å®å°ä¸»å¨åéä¸ä¸ªSYNCå½ä»¤ï¼è¿è¡å¨éå¤å¶ãåç»­éç¨å¢éåæ­¥ï¼åªå¤å¶ææ°æ°æ®ã\n     * æ³¨æï¼ä» Redis 2.8 å¼å§ï¼ä»æå¡å¨ä¼ä»¥æ¯ç§ä¸æ¬¡çé¢çåä¸»æå¡å¨æ¥åå¤å¶æµ(replication stream)çå¤çè¿åº¦ã\n   * è§£å³æ°æ®ä¸¢å¤±: (å¼æ­¥å¤å¶åèè£å¯¼è´)\n     \n         æ2ä¸ªåæ°ï¼\n         min-slaves-to-write 1\n         min-slaves-max-lag 10\n     \n     \n     1\n     2\n     3\n     \n     * è¦æ±è³å°æ1ä¸ªslaveï¼æ°æ®å¤å¶åACK(åæ­¥)çå»¶è¿ä¸è½è¶è¿10ç§ï¼å¦æè¯´ä¸æ¦ææçslaveï¼æ°æ®å¤å¶åACKçå»¶è¿é½è¶è¿äº10ç§éï¼é£ä¹masterå°±ä¸ä¼åæ¥æ¶ä»»ä½è¯·æ±äºï¼ä¸é¢ä¸¤ä¸ªéç½®å¯ä»¥åå°å¼æ­¥å¤å¶åèè£å¯¼è´çæ°æ®ä¸¢å¤±ã\n       * å¦æä¸»ä»åæ­¥å·®è·è¿å¤§ï¼åmasterå°±åæ­¢æ°æ®æ¥æ¶ï¼æ­¢æ\n       * å¦ææmasterå¤äºèè£ç¶æï¼åå¦æå®è·ä»»ä½ä¸ä¸ªslaveä¸¢äºè¿æ¥ï¼å¨10ç§ååç°æ²¡æslaveç»èªå·±ACKï¼é£ä¹å°±æç»å®¢æ·ç«¯æ°çåè¯·æ±ï¼å æ­¤å¨èè£åºæ¯ä¸ï¼æå¤ä¸¢å¤±10ç§çæ°æ®ã\n * èåå®ç°ï¼sentinel æ¨¡å¼\n   * å®ç°äºèªå¨åçç³»ç»çæ§åæéæ¢å¤åè½ãåªè½ä¿è¯rediséç¾¤çé«å¯ç¨æ§, ä¸ä¼ä¿è¯æ°æ®é¶ä¸¢å¤±ã\n   * éä¸¾é¢å¤´å¨åµçè¿ç¨ä½¿ç¨äº Raftç®æ³\n   * åä¸»åºçè¿æ¥å»ºç«å®æåï¼å¨åµä¼å®æ¶æ§è¡ä¸é¢3ä¸ªæä½ã\n     * æ¯10ç§åä¸»åºåä»åºåéinfoå½ä»¤ï¼\n       * ä»¥è·å¾å½åæ°æ®åºçç¸å³ä¿¡æ¯ãä»èå®ç°æ°èç¹(åæ¬ä»åº)çèªå¨åç°ã\n     * æ¯2ç§åä¸»åºåä»åºç\"sentinel:hello\"é¢éåéèªå·±çä¿¡æ¯\n       * (å°±æ¯è¯´å¨åµä¸ä½è®¢éäºè¯¥é¢éï¼èä¸è¿ä¼åè¯¥é¢éåå¸ä¿¡æ¯ï¼ä»¥ä½¿å¶ä»å¨åµå¾å°èªå·±çä¿¡æ¯)\n     * æ¯1ç§åä¸»åºãä»åºåå¶ä»å¨åµèç¹åépingå½ä»¤ã\n\n * æ³¨æ\n   * redis çä»£ç éæ¯: åæ§è¡å½ä»¤ï¼åaof + syncï¼ç¶ååè¿åå®¢æ·ç«¯\n\n# é«æ§è½\n\n * å®¢æ·ç«¯\n   * åçº¿ç¨ï¼æä»¥éç¹å¨ rtt\n   * pipeline å multi & exec\n * æå¡ç«¯\n   * éç¾¤ï¼\n     * ä¸è´æ§hash\n     * ä¸è´æ§hash+ä»£ç\n     * redis-cluster\n       * é®é¢ï¼redis-clusterå¯¹multi-keyæä½æ¯æä¸å¤ï¼å¶å®æ¹å¼ä¸æ¯æã\n       * redis-cluster é»è®¤å¹¶ä¸æ¯æè¯»ååç¦»\n       * èç¹ä¹é´éè¿gossipåè®®äº¤æ¢ç¶æä¿¡æ¯\n       * æ ä¸­å¿æ¶æ, æ°æ®éè¿å¼æ­¥å¤å¶, ä¸ä¿è¯æ°æ®çå¼ºä¸è´æ§\n * æµè¯å·¥å·\n   * redis-benchmark\n\n----------------------------------------\n\n----------------------------------------\n\n\n# mysql\n\n# æä¹å\n\n * mysqldump\n   * åæ°: --lock-tables, éè¡¨\n   * æ³¨æ: é»è®¤æåµä¸ï¼ä¸ä¼é»å¡æ°æ®åºï¼ä½æ¯ä¼é ææµéçªå¢\n\n# é«å¯ç¨\n\n * åå\n   * æä»¬å¨èèMySQLæ°æ®åºçé«å¯ç¨æ¶ææ¶ï¼ä¸»è¦èèå¦ä¸å æ¹é¢ï¼\n     * å¦ææ°æ®åºåçäºå®æºæèæå¤ä¸­æ­ç­æéï¼å°½å¯è½çåå°åæºæ¶é´ï¼ä¿è¯ä¸å¡ä¸ä¼å ä¸ºæ°æ®åºçæéèä¸­æ­ã\n     * ç¨ä½å¤ä»½ãåªè¯»å¯æ¬ç­åè½çéä¸»èç¹çæ°æ®åºè¯¥åä¸»èç¹çæ°æ®å®æ¶æèæç»ä¿æä¸è´ã\n     * å½ä¸å¡åçæ°æ®åºåæ¢æ¶ï¼åæ¢ååçæ°æ®åºåå®¹åºå½ä¸è´ï¼ä¸ä¼å ä¸ºæ°æ®ç¼ºå¤±æèæ°æ®ä¸ä¸è´èå½±åä¸å¡ã\n   * reference: [https://dbaplus.cn/news-11-1127-1.html]\n * æ°æ®å®æ´æ§\n   * redo log å undo log\n * ä¸»ä»åæ­¥(Master-Slave Replication)\n   * è¦æ±\n     * ä¸»ä»æ°æ®åºçæ¬ä¸è´\n   * åç\n     * ä¸»åºå¼å¯ binlog, å¨ææ°æ®åºä¿®æ¹æä½æ¶(åªè®°å½æ´æ¹æä½)ï¼æ´æ°binlogæä»¶\n       * åbinlogæä»¶ï¼ç¨æ·commitååæ­¥åå¥InnoDB Log Buffer ---\x3e binlogæä»¶ ---\x3e å·æ°å°ç£ç\n     * ä»åºéè¿start slaveå¼å¯å¤å¶åè½ï¼ä»åºå¼æ­¥è¯»åä¸»åºç binlog åå¥èªå·±ç relay log, å¹¶å¦èµ·ä¸çº¿ç¨å°å¶éæ¾å°mysqlæ°æ®åºã\n   * æ¹æ¡\n     * MySQL Replication\n       * MySQLå®æ¹æåºçä¸»ä»åæ­¥æ¹æ¡ãå¼æ­¥å¤å¶: ä¿è¯binlogåå¥æä»¶, ä¸ä¿è¯binlogä¼ è¾ç»ä»åº\n       * é®é¢\n         * ä¸»åºå®æºåï¼æ°æ®å¯è½ä¸¢å¤±\n         * ä¸»ä»å¤å¶å»¶è¿é®é¢\n           * ä¸ä¸ªä¸»åºçä»åºå¤ªå¤ãä»åºç¡¬ä»¶æ¯ä¸»åºå·®ãä¸»ä»åºä¹é´çç½ç»å»¶è¿ï¼å¯¼è´å¤å¶å»¶è¿ã\n           * ä¸»ä»å¤å¶çè®¾è®¡é®é¢ãä¸»åºè¯»åååå¤§ ï¼ä¸»åºæ°æ®å¤ªå¤,ä»åºåªæä¸ä¸ªthreadæ¥ä¸åå¤å¶\n       * æ¹æ¡\n         * ååæ­¥å¤å¶ : è§£å³æ°æ®ä¸¢å¤±çé®é¢\n         * å¹¶è¡å¤å¶ : è§£å³ä»åºå¤å¶å»¶è¿çé®é¢\n           * ç¤¾åºç5.6æ°å¢ãæ¯æä»åºå¤çº¿ç¨å¹¶è¡åºç¨åºçº§å«binlogï¼åä¸ä¸ªåºæ°æ®æ´æ¹è¿æ¯ä¸²è¡(5.7çå¹¶è¡å¤å¶åºäºäºå¡ç»)è®¾ç½®ã\n     * mysql semi-sync(ååæ­¥å¤å¶)\n       * google æåº, 5.5éæå°mysql, ä»¥æä»¶çå½¢å¼å­å¨, éè¦åç¬å®è£\n       * ç¡®ä¿äºå¡æäº¤åbinlogè³å°ä¼ è¾å°ä¸ä¸ªä»åº(åå¥relay log), ä½ä¸ä¿è¯ä»åºåºç¨å®è¿ä¸ªäºå¡çbinlog (åºç¨relay log)\n     * åæ­¥å¤å¶\n       * google æåºãä¸ä»è¦æ±ææSlaveæ¶å°binlogæ°æ®, è¿è¦æ±ææSlaveå°æ°æ®commitå°æ°æ®åºä¸­\n   * ä¸»ä»åæ¢\n     * MySQL Replicationçä¸»ä»åæ¢éè¦äººå·¥ä»å¥å¤æ­ï¼åæ¶éè¦Slaveçreplaylogæäº¤å®æ¯ï¼æéæ¢å¤æ¶é´ä¼æ¯è¾é¿ã\n     * MHA(MySQL-master-ha) : ç®åå¹¿æ³ä½¿ç¨\n       * ç®æ \n         * èªå¨å®ç°ä¸»å®ä¾å®æºåï¼ä»æºåæ¢ä¸ºä¸»ï¼å¹¶å°½ééä½åæ¢æ¶å»¶(éå¸¸å¨10-30sååæ¢å®æ)ã\n       * ç¹æ§\n         * MHAå¯¹MySQLçä¸»ä»å¤å¶éç¾¤éå¸¸åå¥½ï¼æ²¡æå¯¹éç¾¤åä»»ä½ä¾µå¥æ§çä¿®æ¹ã\n         * ä»æºåæ¢ä¸ºä¸»æ¶ï¼ç±MHAä¿è¯å¨åæ¢è¿ç¨ä¸­çæ°æ®ä¸è´æ§ã\n           * å¨ä¸»å®ä¾å®æºåï¼MHAå¯ä»¥èªå¨çå¤æ­ä¸»ä»å¤å¶éç¾¤ä¸­åªä¸ªä»å®ä¾çrelaylogæ¯ææ°çï¼å¹¶å°å¶å·®å¼log\"åºç¨\"å°å¶ä½çä»å®ä¾ä¸­ï¼ä»èä¿è¯æ¯ä¸ªå®ä¾çæ°æ®ä¸è´ã\n           * éå¸¸æåµä¸ï¼MHAéè¦10så·¦å³æ£æµä¸»å®ä¾å¼å¸¸ï¼å¹¶å°ä¸»å®ä¾å³é­ä»èé¿åèè£ãç¶ååç¨10så·¦å³å°å·®å¼çlog eventåæ­¥ï¼å¹¶å¯ç¨æ°çMasterãæ´ä¸ªMHAçRTOæ¶é´å¤§çº¦å¨30sã\n     * MySQL Cluster : å®æ¹æ¹æ¡\n       * ä¸ä¸ªé«åº¦å¯æ©å±çï¼å¼å®¹ACIDäºå¡çå®æ¶æ°æ®åºï¼åºäºåå¸å¼æ¶æä¸å­å¨åç¹æéãæ¯æèªå¨æ°´å¹³æ©å®¹ï¼è½åèªå¨çè¯»åè´è½½åè¡¡\n       * æ§å¶é¢åæ°æ®é¢åç¦»\n         * application ---\x3e mysql server(å­å¨è¡¨ç»æ) ---\x3e NDB Cluster(æ°æ®èç¹, NDBå­å¨æå¡å¨, éè¿ ndb_mgmd ç®¡ç)\n           * MySQL Clusterç Cluster é¨å(å³ NDB Cluster)å¯ç¬ç«äºMySQLæå¡å¨è¿è¡éç½®ã\n\n# é«æ§è½\n\n * é\n   * è¯»éãåé(è¡¨éãè¡é)\n     * åªæå¨ä½¿ç¨ç´¢å¼æ¶æä¼ä½¿ç¨è¡éï¼ä½å½ç¬¦åæ¡ä»¶çæ°æ®æ¯è¾å¤æ¶ä¼ä½¿ç¨è¡¨é\n     * å¨selectæ¶ï¼é½ä¼å ä¸è¯»é\n * æ¢æ¥è¯¢\n   * ç¸å³åæ°\n     \n     åæ°ï¼(å¯ä»¥éè¿éç½®æä»¶æmysqlçå¨å±åéè®¾ç½®)\n       mysql> set global slow_query_log='ON'; # slow_query_log  ï¼æ¯å¦å¼å¯æ¢æ¥è¯¢æ¥å¿åè½(å¿å¡«)\n       mysql> set global long_query_time=1;   # long_query_time ï¼è¶è¿è®¾å®å¼å°è¢«è§ä½æ¢æ¥è¯¢ï¼å¹¶è®°å½è³æ¢æ¥è¯¢æ¥å¿æä»¶ä¸­(å¿å¡«)\n       mysql> set global slow_query_log_file='slow.log'; # log-slow-queries ï¼æ¢æ¥è¯¢æ¥å¿æä»¶(ä¸å¯å¡«)ï¼èªå¨å¨ /data åå»ºä¸ä¸ª [hostname]-slow.log æä»¶\n     æ¥çï¼\n       show variables like 'long%';\n     \n     \n     1\n     2\n     3\n     4\n     5\n     6\n     \n   * æä»¤: EXPLAIN\n     * å¨selectè¯­å¥åå ä¸explainï¼å¯ä»¥äºè§£SQLæ§è¡çè¯¦ç»ç¶æ\n   * æ¢æ¥è¯¢æ¥å¿åæå·¥å·\n     * mysqldumpslow\n     * mysqlsla\n * æµè¯å·¥å·\n   * mysqlslap\n     * åæ°ï¼--only-print æå°æµè¯è¯­,ä¸å®éæ§è¡ã\n     * æ³¨æï¼ä½¿ç¨ -a èªå¨æµè¯æ¶ï¼ä¼drop schemaã\n * reference\n   * <é«æ§è½MySQL>\n   * ç¶ææ¥ç\n   \n       mysql> set global general_log=on; # æå¼general log\n       mysql> show global status;         # ååºMySQLæå¡å¨è¿è¡åç§ç¶æå¼:\n       mysql> show variables;             # æ¥è¯¢MySQLæå¡å¨éç½®ä¿¡æ¯è¯­å¥ï¼\n       mysql> show variables like '%slow%';             # æ¢æ¥è¯¢æåµ\n       mysql> show global status like 'table_locks%';   # è¡¨éæåµ\n       å¯ä»¥æ¥çè®¾ç½®çæå¤§è¿æ¥æ° å å·²ç»ä½¿ç¨çæå¤§è¿æ¥æ°, ä»¥è°ä¼\n       å¯ä»¥æ¥çåæ° table_open_cache, å®æ§å¶ææ mysql æ§è¡çº¿ç¨å¯æå¼è¡¨ç¼å­çæ°é, ä»¥è°ä¼\n       å¯ä»¥æ¥çåæ° thread_cache_size, å®æ§å¶ mysql ç¼å­å®¢æ·ç«¯çº¿ç¨çæ°é, ä»¥è°ä¼ãå¯ä»¥éè¿è®¡ç®çº¿ç¨ cache çå¤±æç threads_created / connections æ¥è¡¡é thread_cahce_size çè®¾ç½®æ¯å¦åéï¼è¯¥å¼è¶æ¥è¿ 1ï¼è¯´æçº¿ç¨ cache å½ä¸­çè¶ä½ã\n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   7\n   8\n   \n   * mysqlè¡¨å¤§æ¶ï¼å¯ä»¥è¿è¡åè¡¨åè¡¨ååºãä»¥åååº\n     * ååºåè¡¨å­å¨ä»¥ä¸é®é¢ï¼\n       * äºå¡é®é¢\n       * è·¨èç¹Join å count,order by,group byä»¥åèåå½æ°é®é¢\n       * æ°æ®è¿ç§»ï¼å®¹éè§åï¼æ©å®¹ç­é®é¢\n\n----------------------------------------\n\n----------------------------------------\n\n\n# mongo\n\n# æä¹å\n\n * mongodump & mongorestore\n * mongoexport & mongoimport\n\n# é«å¯ç¨\n\n * Replica Set\n   * æ¯mongodçå®ä¾éå, åå«ä¸ç±»è§è²: PrimaryãSecondaryãArbiter(ä»²è£è)\n   * ä¸»ä»åæ­¥æ¹å¼\n     * ä¸¤ä¸ªæ­¥éª¤\n       * intial syncï¼å¯ä»¥çè§£ä¸ºå¨éåæ­¥\n       * replicationï¼è¿½åæ­¥æºçoplogï¼å¯ä»¥çè§£ä¸ºå¢éåæ­¥, ä¼ä¸æ­æåä¸»ä¸æ°äº§ççoplogå¹¶éæ¾\n         * ä¸ç±»çº¿ç¨å®æreplicationå·¥ä½\n           * producer threadï¼ä¸æ­çä»åæ­¥æºä¸æåoplogï¼å¹¶å å¥å°ä¸ä¸ªBlockQueueçéåéã\n           * replBatcher threadï¼è´è´£éä¸ªä»producer threadçéåéååºoplogï¼å¹¶æ¾å°èªå·±ç»´æ¤çéåéãè¦ä¿æé¡ºåºæ§ã\n           * syncçº¿ç¨å°replBatcher threadçéåååå°é»è®¤16ä¸ªreplWriterçº¿ç¨ï¼ç±replWriteræ¥æç»éæ¾æ¯æ¡oplogã\n   * æ³¨æï¼mongoçoplogå·æå¹ç­æ§\n\n# é«æ§è½\n\n * Cluster\n   * ä½¿ç¨Shardingåçææ¯: client ---\x3e router(mongos) ---\x3e shard(æ¯ä¸ªshardèç¹é½æ¯ä¸ä¸ªreplica set)\n * é\n   * å¨ 2.2 çæ¬ä»¥åï¼mongod åªæå¨å±éï¼å¨ 2.2 çæ¬å¼å§ï¼åºçº§é;\n     * ç²åº¦ï¼åº ---\x3e collect ---\x3e document\n     * å»ºç´¢å¼å°±æ¯ä¸ä¸ªå®¹æå¼èµ·é¿æ¶é´åéçé®é¢ãå¦æéåçæ°æ®éå¾å¤§ï¼å»ºç´¢å¼éå¸¸è¦è±æ¯è¾é¿æ¶é´ï¼ç¹å«å®¹æå¼èµ·é®é¢ã\n       * MongoDB æä¾äºä¸¤ç§å»ºç´¢å¼çè®¿é®\n         * ä¸ç§æ¯ background æ¹å¼: db.posts.ensureIndex({user_id: 1}, {background: 1})\n         * ä¸ç§æ¯é background æ¹å¼: db.posts.ensureIndex({user_id: 1})\n\n# utility\n\n * Schema Explorer\n   * [https://studio3t.com/knowledge-base/articles/schema-explorer/]\n\n----------------------------------------\n\n----------------------------------------\n\n\n# END\n\n * sharding\n   * å½æ°æ®éæ¯è¾å¤§çæ¶åï¼æä»¬éè¦ææ°æ®åçè¿è¡å¨ä¸åçæºå¨ä¸­ï¼ä»¥éä½CPUãåå­åIOçååï¼Shardingå°±æ¯æ°æ®åºåçææ¯ã\n * ORM(Object-Relational Mapping)\n   * mybatis\n * MYSQLæ§è½ä¼åçæä½³20+æ¡ç»éª]\n   * https://www.cnblogs.com/zhouyusheng/p/8038224.html\n     * EXPLAINãPROCEDURE ANALYSE()\n * MVCC\n   * mysql ç MVCC ï¼æ¯ä¸ç§å¤çæ¬å¹¶åæ§å¶æºå¶",normalizedContent:"# db è¯¦è§£\n\n * æä¹å\n   * æ°æ®éå(ç©çå¤ä»½) æ ä¿®æ¹è®°å½(é»è¾å¤ä»½)\n   * éç¹\n     * èªå¨æä¹åæ¶ï¼å¶åççæ¶æº: ä¸è¬å¨å¨dbå½ä»¤ä¹å, è¿åè°ç¨æ¹ä¹å\n     * æ­¥éª¤ï¼buffer ---\x3e æä»¶ ---\x3e å·æ°æä»¶å°ç£ç\n       * æ¯ä¸ªç¯èé½å¯ä»¥æèªå·±çç­ç¥éæ©æ¶æºï¼å¹³è¡¡æ§è½åå®æ´æ§\n         * å½ä»¤æ§è¡å®æå¹¶åå¥bufferåè¿åæ¶æºçç­ç¥æ§å¶:\n           * ä¸ä¿è¯åå¥æä»¶\n           * ä¿è¯åå¥æä»¶\n           * ä¿è¯æä»¶å·å¥ç£ç\n         * å·çç­ç¥(linuxçfsyncå½ä»¤)\n           * æ¯æ¬¡ä¿®æ¹å½ä»¤é½å·ç\n           * æ¯nç§ænä¸ªæä½å·ç\n           * ä¸ä¸»å¨å·çï¼ä¾èµæä½ç³»ç»çå·çç­ç¥\n     * æ³¨æ: æä¹åæ¶æ¯å¦ä¼é»å¡æ°æ®åºæä½\n * é«å¯ç¨\n   * ä¸»ä»ç»æ\n   * éç¹\n     * ä½ç¨\n       * ç­å¤\n       * è¯»ååç¦»ï¼åè¡¡æ°æ®åºè´è½½\n     * åªä»\n       * æä½è®°å½è½çåååæ­¥(æä»¶)\n       * æä½è®°å½ä¸è½çå°±åæ­¥(åå­)\n     * æ¹å¼(å¹³è¡¡æ°æ®ä¸è´æ§åæ§è½)\n       * å¼æ­¥å¤å¶\n         * ä¸»èç¹ç¨æ·å½ä»¤å®ææ¶ï¼åªä¿è¯æ°æ®åå¥åªä»\n         * é«å»¶è¿åé«æ§è½ãéè¦, ä¸»ä»éè¿å¨æäº¤æµå¤å¶è¿åº¦, æ¥ä¿è¯ä¸»ä»æ°æ®ä¸ä¸è´æ§çå¹åº¦\n       * åæ­¥å¤å¶\n         * ä¸»èç¹ç¨æ·å½ä»¤å®ææ¶ï¼ä¿è¯æ°æ®å·²ç»è¢«ææä»åºåæ­¥å®æ\n       * ååæ­¥å¤å¶\n         * ä¸»èç¹ç¨æ·å½ä»¤å®ææ¶ï¼ä¿è¯æ°æ®å·²ç»è¢«é¨åä»åºå­å¨ï¼ä½ä¸ä¿è¯ä»åºå®æåæ­¥\n     * é»è¾\n       * å¨éåæ­¥ãå¢éåæ­¥\n     * ä¸»ä»åæ¢\n       * æå¨\n         * é²æ­¢èè£åçãä¿è¯æ°ä¸»èç¹æ°æ®ææ°\n       * èªå¨\n         * éè¿ä¸è´æ§åè®®è¿è¡å³ç­ï¼ä¸»èç¹å½åç¶æãéä¸»ç»æ\n         * ä¸è¬è¦å¤ç:\n           * æ°éç¾¤æ°æ®ææ°åä¸è´æ§ä¿è¯\n           * çæ§èç¹äºè§£å¶å®ææèç¹çå­æ´»ãçæ§èç¹ä¹é´ä¿¡æ¯åæ­¥ãçæ§èç¹è·å(æææå¡èç¹ç)æå¡ç¶æ\n   * é¾ç¹\n     * ä¸»ä»æ°æ®ä¸è´æ§\n       * ç½ç»å»¶è¿ãä¸»èç¹é«æµéãä»èç¹æ§è½ä¸è¶³(å¯ä»¥èèä»åºå¹¶ååºç¨åæ­¥å°çæ°æ®)ç­ç­\n * é«æ§è½\n   * æ¹å¼\n     * éè¿ä¸»ä»ç»æ, å®ç°è¯»ååç¦»\n     * cluster:\n       * ä¸è´æ§hash æ ååslot\n       * sharding ç»åæ°æ®åæ§å¶åç¦» å½¢æå»ä¸­å¿åéç¾¤\n   * é®é¢\n     * å¦ï¼redis éç¾¤multi-keyæä½ä¸æ¯ææèæ¯æä¸å¤\n   * æ³¨æ\n     * æ§è½æµè¯(å·¥å·)\n     * æ°æ®åºéçé®é¢\n       * redis åçº¿ç¨, æ é\n       * mysql æè¯»åé, ååè¡¨éãè¡é\n       * mongo æè¯»åé, åååºå¨å±éãåºéãéåé\n * ç¼å­\n   * ç¼å­ç©¿é: æ¥è¯¢ä¸å®ä¸å­å¨çæ°æ®æ¶, æ¥è¯¢åæºdbãæµéå¤§(å¤§éçä¸å­å¨æ°æ®è¯·æ±)æ¶dbè¢«åå®\n     * å¸éè¿æ»¤å¨ãç¼å­ç©ºå¼(çå½å¨æç­)\n   * ç¼å­å»ç©¿ï¼ç¼å­ä¸ç§éå¸¸âç­ç¹âçæ°æ®ï¼å¨æä¸ªæ¶é´ç¹è¿æçæ¶åï¼æ°å¥½å¨è¿ä¸ªæ¶é´ç¹å¯¹è¿ä¸ªkeyæå¤§éçå¹¶åè¯·æ±è¿æ¥ï¼ç¬é´æåç«¯dbåå®\n     * äºæ¥é(mutex key)ãä¸è¿æ(ä½åå°å·æ°)\n   * ç¼å­éªå´©ï¼è®¾ç½®ç¼å­æ¶éç¨äºç¸åçè¿ææ¶é´ï¼å¯¼è´ç¼å­å¨æä¸æ¶å»åæ¶å¤±æï¼è¯·æ±å¨é¨è½¬åå°dbï¼dbç¬æ¶ååè¿ééªå´©\n     * å¤å¯æ¬ï¼å¹¶ä¸æ¯ä¸ªå¯æ¬è®¾ç½®ä¸åçè¿ææ¶é´(å¨æå®èå´åéæº)\n * å³ç³»åæ°æ®åº\n   * æ°æ®åºè®¾è®¡ä¸å¤§èå¼ï¼\n     * ç¬¬ä¸èå¼(1nf)ï¼æ°æ®è¡¨ä¸­çæ¯ä¸åå¿é¡»æ¯ä¸å¯æåçæå°ååï¼ä¹å°±æ¯ç¡®ä¿æ¯ä¸åçåå­æ§\n     * ç¬¬äºèå¼(2nf)ï¼æ»¡è¶³1nfåï¼è¦æ±è¡¨ä¸­çææåé½å¿é¡»ä¾èµäºä¸»é®ï¼èä¸è½æä»»ä½ä¸åä¸ä¸»é®æ²¡æå³ç³»ï¼ä¹å°±æ¯è¯´ä¸ä¸ªè¡¨åªæè¿°ä¸ä»¶äºæ\n     * ç¬¬ä¸èå¼(3nf)ï¼å¿é¡»åæ»¡è¶³2nfï¼è¦æ±ï¼è¡¨ä¸­çæ¯ä¸ååªä¸ä¸»é®ç´æ¥ç¸å³èä¸æ¯é´æ¥ç¸å³ï¼(è¡¨ä¸­çæ¯ä¸ååªè½ä¾èµäºä¸»é®)\n   * äºå¡(transaction)\n     * acid ï¼ä¿è¯äºå¡æ¯æ­£ç¡®å¯é çï¼æå¿é¡»å·å¤çåä¸ªç¹æ§ï¼åå­æ§(atomicityï¼æç§°ä¸å¯åå²æ§)ãä¸è´æ§(consistency)ãéç¦»æ§(isolationï¼åç§°ç¬ç«æ§)ãæä¹æ§(durability)ã\n     * äºå¡çéç¦»çº§å« : å¾è§£èè¯»ãä¸å¯éå¤è¯»ãå¹»è¯»é®é¢\n       * read uncommitted\n         * äºå¡aä¿®æ¹æ°æ®a, äºå¡bè¯»åæ°æ®a ,,,,,, b è¯»åå°äºå¡ a å·²ä¿®æ¹ä½æªæäº¤çæ°æ® ,,,,,, èè¯»\n       * read committed\n         * äºå¡aä¿®æ¹æ°æ®a, äºå¡bå¨aæä½ä¹åä¹ååå«è¯»åæ°æ®a ,,,,,, b è¯»å°çä¸¤æ¬¡æ°æ®ä¸ä¸è´ ,,,,,, ä¸å¯éå¤è¯»\n       * repeatable read\n         * äºå¡aæå¥(æå é¤)æ°æ®a, äºå¡bå¨aæä½ä¹åä¹ååå«è¯»åæ°æ®a ,,,,,, b ä¼åç°æ°æ®aå¿½å¨å¿½ä¸å¨ ,,,,,, å¹»è¯»(èè¯»)\n       * serializable\n         * å¯ä»¥é¿åææçé®é¢\n     * note\n       * ä¸è¿°åç§éç¦»çº§å«æ¯ç±å¼±å°å¼º, éç¦»çº§å«è¶å¼ºæ§è½åå°çå½±åè¶å¤§\n       * å¯ä»¥å¨ä½éç¦»çº§å«ä¸ï¼éåéçä½¿ç¨è¾¾å°å ä¹é¿åå¹»è¯»çææ\n       * ä¸è¬çdbmsç³»ç»ï¼é½ä½¿ç¨read-comittedä½ä¸ºé»è®¤éç¦»çº§å«ï¼å¦oracleãsql serverç­ï¼èmysqlå´ä½¿ç¨read-repeatable\n\n\n# redis ä½¿ç¨\n\n# æä¹å\n\n * rdb\n   * ä¸ä¸ªéå¸¸ç´§å(compact)çæä»¶ï¼ä¿å­äº redis å¨æä¸ªæ¶é´ç¹ä¸çæ°æ®éã\n   * ç¶è¿ç¨å¨ä¿å­rdbæ¶forkä¸ä¸ªå­è¿ç¨ï¼ç¶åç±å­è¿ç¨æ¥å¤çæ¥ä¸æ¥çææä¿å­å·¥ä½ï¼ç¶è¿ç¨æ é¡»æ§è¡ä»»ä½ç£ç i/o æä½ã\n * aof(append-only file)\n   * aof æä»¶çä½ç§¯éå¸¸è¦å¤§äº rdb æä»¶çä½ç§¯\n   * åå¥aofæä»¶: aof_buf ---\x3e aofæä»¶ ---\x3e å·æ°å°ç£ç\n     * æ¨èçå·çç­ç¥ï¼æ¯ç§ fsync ä¸æ¬¡ï¼è¶³å¤å¿«(åä½¿ç¨ rdb æä¹åå·®ä¸å¤)ï¼å¹¶ä¸å¨æéæ¶åªä¼ä¸¢å¤± 1 ç§éçæ°æ®ã\n * rdb + aof\n   * redis5.0ä¹åæ°å¢, éè¦å¼å¯ï¼aof-use-rdb-preamble\n\n# é«å¯ç¨\n\n * ä¸»ä»ç»æ(åæ­¥ä½¿ç¨ï¼slaveof å½ä»¤)\n   * redisä½¿ç¨é»è®¤çå¼æ­¥å¤å¶\n     * æ¯ç»å¤§å¤æ° redis ç¨ä¾çèªç¶å¤å¶æ¨¡å¼ã\n     * åæ¬ï¼å¨éåæ­¥ å å¢éåæ­¥\n       * å¨slaveå¯å¨å¹¶è¿æ¥å°masterä¹åï¼å®å°ä¸»å¨åéä¸ä¸ªsyncå½ä»¤ï¼è¿è¡å¨éå¤å¶ãåç»­éç¨å¢éåæ­¥ï¼åªå¤å¶ææ°æ°æ®ã\n     * æ³¨æï¼ä» redis 2.8 å¼å§ï¼ä»æå¡å¨ä¼ä»¥æ¯ç§ä¸æ¬¡çé¢çåä¸»æå¡å¨æ¥åå¤å¶æµ(replication stream)çå¤çè¿åº¦ã\n   * è§£å³æ°æ®ä¸¢å¤±: (å¼æ­¥å¤å¶åèè£å¯¼è´)\n     \n         æ2ä¸ªåæ°ï¼\n         min-slaves-to-write 1\n         min-slaves-max-lag 10\n     \n     \n     1\n     2\n     3\n     \n     * è¦æ±è³å°æ1ä¸ªslaveï¼æ°æ®å¤å¶åack(åæ­¥)çå»¶è¿ä¸è½è¶è¿10ç§ï¼å¦æè¯´ä¸æ¦ææçslaveï¼æ°æ®å¤å¶åackçå»¶è¿é½è¶è¿äº10ç§éï¼é£ä¹masterå°±ä¸ä¼åæ¥æ¶ä»»ä½è¯·æ±äºï¼ä¸é¢ä¸¤ä¸ªéç½®å¯ä»¥åå°å¼æ­¥å¤å¶åèè£å¯¼è´çæ°æ®ä¸¢å¤±ã\n       * å¦æä¸»ä»åæ­¥å·®è·è¿å¤§ï¼åmasterå°±åæ­¢æ°æ®æ¥æ¶ï¼æ­¢æ\n       * å¦ææmasterå¤äºèè£ç¶æï¼åå¦æå®è·ä»»ä½ä¸ä¸ªslaveä¸¢äºè¿æ¥ï¼å¨10ç§ååç°æ²¡æslaveç»èªå·±ackï¼é£ä¹å°±æç»å®¢æ·ç«¯æ°çåè¯·æ±ï¼å æ­¤å¨èè£åºæ¯ä¸ï¼æå¤ä¸¢å¤±10ç§çæ°æ®ã\n * èåå®ç°ï¼sentinel æ¨¡å¼\n   * å®ç°äºèªå¨åçç³»ç»çæ§åæéæ¢å¤åè½ãåªè½ä¿è¯rediséç¾¤çé«å¯ç¨æ§, ä¸ä¼ä¿è¯æ°æ®é¶ä¸¢å¤±ã\n   * éä¸¾é¢å¤´å¨åµçè¿ç¨ä½¿ç¨äº raftç®æ³\n   * åä¸»åºçè¿æ¥å»ºç«å®æåï¼å¨åµä¼å®æ¶æ§è¡ä¸é¢3ä¸ªæä½ã\n     * æ¯10ç§åä¸»åºåä»åºåéinfoå½ä»¤ï¼\n       * ä»¥è·å¾å½åæ°æ®åºçç¸å³ä¿¡æ¯ãä»èå®ç°æ°èç¹(åæ¬ä»åº)çèªå¨åç°ã\n     * æ¯2ç§åä¸»åºåä»åºç\"sentinel:hello\"é¢éåéèªå·±çä¿¡æ¯\n       * (å°±æ¯è¯´å¨åµä¸ä½è®¢éäºè¯¥é¢éï¼èä¸è¿ä¼åè¯¥é¢éåå¸ä¿¡æ¯ï¼ä»¥ä½¿å¶ä»å¨åµå¾å°èªå·±çä¿¡æ¯)\n     * æ¯1ç§åä¸»åºãä»åºåå¶ä»å¨åµèç¹åépingå½ä»¤ã\n\n * æ³¨æ\n   * redis çä»£ç éæ¯: åæ§è¡å½ä»¤ï¼åaof + syncï¼ç¶ååè¿åå®¢æ·ç«¯\n\n# é«æ§è½\n\n * å®¢æ·ç«¯\n   * åçº¿ç¨ï¼æä»¥éç¹å¨ rtt\n   * pipeline å multi & exec\n * æå¡ç«¯\n   * éç¾¤ï¼\n     * ä¸è´æ§hash\n     * ä¸è´æ§hash+ä»£ç\n     * redis-cluster\n       * é®é¢ï¼redis-clusterå¯¹multi-keyæä½æ¯æä¸å¤ï¼å¶å®æ¹å¼ä¸æ¯æã\n       * redis-cluster é»è®¤å¹¶ä¸æ¯æè¯»ååç¦»\n       * èç¹ä¹é´éè¿gossipåè®®äº¤æ¢ç¶æä¿¡æ¯\n       * æ ä¸­å¿æ¶æ, æ°æ®éè¿å¼æ­¥å¤å¶, ä¸ä¿è¯æ°æ®çå¼ºä¸è´æ§\n * æµè¯å·¥å·\n   * redis-benchmark\n\n----------------------------------------\n\n----------------------------------------\n\n\n# mysql\n\n# æä¹å\n\n * mysqldump\n   * åæ°: --lock-tables, éè¡¨\n   * æ³¨æ: é»è®¤æåµä¸ï¼ä¸ä¼é»å¡æ°æ®åºï¼ä½æ¯ä¼é ææµéçªå¢\n\n# é«å¯ç¨\n\n * åå\n   * æä»¬å¨èèmysqlæ°æ®åºçé«å¯ç¨æ¶ææ¶ï¼ä¸»è¦èèå¦ä¸å æ¹é¢ï¼\n     * å¦ææ°æ®åºåçäºå®æºæèæå¤ä¸­æ­ç­æéï¼å°½å¯è½çåå°åæºæ¶é´ï¼ä¿è¯ä¸å¡ä¸ä¼å ä¸ºæ°æ®åºçæéèä¸­æ­ã\n     * ç¨ä½å¤ä»½ãåªè¯»å¯æ¬ç­åè½çéä¸»èç¹çæ°æ®åºè¯¥åä¸»èç¹çæ°æ®å®æ¶æèæç»ä¿æä¸è´ã\n     * å½ä¸å¡åçæ°æ®åºåæ¢æ¶ï¼åæ¢ååçæ°æ®åºåå®¹åºå½ä¸è´ï¼ä¸ä¼å ä¸ºæ°æ®ç¼ºå¤±æèæ°æ®ä¸ä¸è´èå½±åä¸å¡ã\n   * reference: [https://dbaplus.cn/news-11-1127-1.html]\n * æ°æ®å®æ´æ§\n   * redo log å undo log\n * ä¸»ä»åæ­¥(master-slave replication)\n   * è¦æ±\n     * ä¸»ä»æ°æ®åºçæ¬ä¸è´\n   * åç\n     * ä¸»åºå¼å¯ binlog, å¨ææ°æ®åºä¿®æ¹æä½æ¶(åªè®°å½æ´æ¹æä½)ï¼æ´æ°binlogæä»¶\n       * åbinlogæä»¶ï¼ç¨æ·commitååæ­¥åå¥innodb log buffer ---\x3e binlogæä»¶ ---\x3e å·æ°å°ç£ç\n     * ä»åºéè¿start slaveå¼å¯å¤å¶åè½ï¼ä»åºå¼æ­¥è¯»åä¸»åºç binlog åå¥èªå·±ç relay log, å¹¶å¦èµ·ä¸çº¿ç¨å°å¶éæ¾å°mysqlæ°æ®åºã\n   * æ¹æ¡\n     * mysql replication\n       * mysqlå®æ¹æåºçä¸»ä»åæ­¥æ¹æ¡ãå¼æ­¥å¤å¶: ä¿è¯binlogåå¥æä»¶, ä¸ä¿è¯binlogä¼ è¾ç»ä»åº\n       * é®é¢\n         * ä¸»åºå®æºåï¼æ°æ®å¯è½ä¸¢å¤±\n         * ä¸»ä»å¤å¶å»¶è¿é®é¢\n           * ä¸ä¸ªä¸»åºçä»åºå¤ªå¤ãä»åºç¡¬ä»¶æ¯ä¸»åºå·®ãä¸»ä»åºä¹é´çç½ç»å»¶è¿ï¼å¯¼è´å¤å¶å»¶è¿ã\n           * ä¸»ä»å¤å¶çè®¾è®¡é®é¢ãä¸»åºè¯»åååå¤§ ï¼ä¸»åºæ°æ®å¤ªå¤,ä»åºåªæä¸ä¸ªthreadæ¥ä¸åå¤å¶\n       * æ¹æ¡\n         * ååæ­¥å¤å¶ : è§£å³æ°æ®ä¸¢å¤±çé®é¢\n         * å¹¶è¡å¤å¶ : è§£å³ä»åºå¤å¶å»¶è¿çé®é¢\n           * ç¤¾åºç5.6æ°å¢ãæ¯æä»åºå¤çº¿ç¨å¹¶è¡åºç¨åºçº§å«binlogï¼åä¸ä¸ªåºæ°æ®æ´æ¹è¿æ¯ä¸²è¡(5.7çå¹¶è¡å¤å¶åºäºäºå¡ç»)è®¾ç½®ã\n     * mysql semi-sync(ååæ­¥å¤å¶)\n       * google æåº, 5.5éæå°mysql, ä»¥æä»¶çå½¢å¼å­å¨, éè¦åç¬å®è£\n       * ç¡®ä¿äºå¡æäº¤åbinlogè³å°ä¼ è¾å°ä¸ä¸ªä»åº(åå¥relay log), ä½ä¸ä¿è¯ä»åºåºç¨å®è¿ä¸ªäºå¡çbinlog (åºç¨relay log)\n     * åæ­¥å¤å¶\n       * google æåºãä¸ä»è¦æ±ææslaveæ¶å°binlogæ°æ®, è¿è¦æ±ææslaveå°æ°æ®commitå°æ°æ®åºä¸­\n   * ä¸»ä»åæ¢\n     * mysql replicationçä¸»ä»åæ¢éè¦äººå·¥ä»å¥å¤æ­ï¼åæ¶éè¦slaveçreplaylogæäº¤å®æ¯ï¼æéæ¢å¤æ¶é´ä¼æ¯è¾é¿ã\n     * mha(mysql-master-ha) : ç®åå¹¿æ³ä½¿ç¨\n       * ç®æ \n         * èªå¨å®ç°ä¸»å®ä¾å®æºåï¼ä»æºåæ¢ä¸ºä¸»ï¼å¹¶å°½ééä½åæ¢æ¶å»¶(éå¸¸å¨10-30sååæ¢å®æ)ã\n       * ç¹æ§\n         * mhaå¯¹mysqlçä¸»ä»å¤å¶éç¾¤éå¸¸åå¥½ï¼æ²¡æå¯¹éç¾¤åä»»ä½ä¾µå¥æ§çä¿®æ¹ã\n         * ä»æºåæ¢ä¸ºä¸»æ¶ï¼ç±mhaä¿è¯å¨åæ¢è¿ç¨ä¸­çæ°æ®ä¸è´æ§ã\n           * å¨ä¸»å®ä¾å®æºåï¼mhaå¯ä»¥èªå¨çå¤æ­ä¸»ä»å¤å¶éç¾¤ä¸­åªä¸ªä»å®ä¾çrelaylogæ¯ææ°çï¼å¹¶å°å¶å·®å¼log\"åºç¨\"å°å¶ä½çä»å®ä¾ä¸­ï¼ä»èä¿è¯æ¯ä¸ªå®ä¾çæ°æ®ä¸è´ã\n           * éå¸¸æåµä¸ï¼mhaéè¦10så·¦å³æ£æµä¸»å®ä¾å¼å¸¸ï¼å¹¶å°ä¸»å®ä¾å³é­ä»èé¿åèè£ãç¶ååç¨10så·¦å³å°å·®å¼çlog eventåæ­¥ï¼å¹¶å¯ç¨æ°çmasterãæ´ä¸ªmhaçrtoæ¶é´å¤§çº¦å¨30sã\n     * mysql cluster : å®æ¹æ¹æ¡\n       * ä¸ä¸ªé«åº¦å¯æ©å±çï¼å¼å®¹acidäºå¡çå®æ¶æ°æ®åºï¼åºäºåå¸å¼æ¶æä¸å­å¨åç¹æéãæ¯æèªå¨æ°´å¹³æ©å®¹ï¼è½åèªå¨çè¯»åè´è½½åè¡¡\n       * æ§å¶é¢åæ°æ®é¢åç¦»\n         * application ---\x3e mysql server(å­å¨è¡¨ç»æ) ---\x3e ndb cluster(æ°æ®èç¹, ndbå­å¨æå¡å¨, éè¿ ndb_mgmd ç®¡ç)\n           * mysql clusterç cluster é¨å(å³ ndb cluster)å¯ç¬ç«äºmysqlæå¡å¨è¿è¡éç½®ã\n\n# é«æ§è½\n\n * é\n   * è¯»éãåé(è¡¨éãè¡é)\n     * åªæå¨ä½¿ç¨ç´¢å¼æ¶æä¼ä½¿ç¨è¡éï¼ä½å½ç¬¦åæ¡ä»¶çæ°æ®æ¯è¾å¤æ¶ä¼ä½¿ç¨è¡¨é\n     * å¨selectæ¶ï¼é½ä¼å ä¸è¯»é\n * æ¢æ¥è¯¢\n   * ç¸å³åæ°\n     \n     åæ°ï¼(å¯ä»¥éè¿éç½®æä»¶æmysqlçå¨å±åéè®¾ç½®)\n       mysql> set global slow_query_log='on'; # slow_query_log  ï¼æ¯å¦å¼å¯æ¢æ¥è¯¢æ¥å¿åè½(å¿å¡«)\n       mysql> set global long_query_time=1;   # long_query_time ï¼è¶è¿è®¾å®å¼å°è¢«è§ä½æ¢æ¥è¯¢ï¼å¹¶è®°å½è³æ¢æ¥è¯¢æ¥å¿æä»¶ä¸­(å¿å¡«)\n       mysql> set global slow_query_log_file='slow.log'; # log-slow-queries ï¼æ¢æ¥è¯¢æ¥å¿æä»¶(ä¸å¯å¡«)ï¼èªå¨å¨ /data åå»ºä¸ä¸ª [hostname]-slow.log æä»¶\n     æ¥çï¼\n       show variables like 'long%';\n     \n     \n     1\n     2\n     3\n     4\n     5\n     6\n     \n   * æä»¤: explain\n     * å¨selectè¯­å¥åå ä¸explainï¼å¯ä»¥äºè§£sqlæ§è¡çè¯¦ç»ç¶æ\n   * æ¢æ¥è¯¢æ¥å¿åæå·¥å·\n     * mysqldumpslow\n     * mysqlsla\n * æµè¯å·¥å·\n   * mysqlslap\n     * åæ°ï¼--only-print æå°æµè¯è¯­,ä¸å®éæ§è¡ã\n     * æ³¨æï¼ä½¿ç¨ -a èªå¨æµè¯æ¶ï¼ä¼drop schemaã\n * reference\n   * <é«æ§è½mysql>\n   * ç¶ææ¥ç\n   \n       mysql> set global general_log=on; # æå¼general log\n       mysql> show global status;         # ååºmysqlæå¡å¨è¿è¡åç§ç¶æå¼:\n       mysql> show variables;             # æ¥è¯¢mysqlæå¡å¨éç½®ä¿¡æ¯è¯­å¥ï¼\n       mysql> show variables like '%slow%';             # æ¢æ¥è¯¢æåµ\n       mysql> show global status like 'table_locks%';   # è¡¨éæåµ\n       å¯ä»¥æ¥çè®¾ç½®çæå¤§è¿æ¥æ° å å·²ç»ä½¿ç¨çæå¤§è¿æ¥æ°, ä»¥è°ä¼\n       å¯ä»¥æ¥çåæ° table_open_cache, å®æ§å¶ææ mysql æ§è¡çº¿ç¨å¯æå¼è¡¨ç¼å­çæ°é, ä»¥è°ä¼\n       å¯ä»¥æ¥çåæ° thread_cache_size, å®æ§å¶ mysql ç¼å­å®¢æ·ç«¯çº¿ç¨çæ°é, ä»¥è°ä¼ãå¯ä»¥éè¿è®¡ç®çº¿ç¨ cache çå¤±æç threads_created / connections æ¥è¡¡é thread_cahce_size çè®¾ç½®æ¯å¦åéï¼è¯¥å¼è¶æ¥è¿ 1ï¼è¯´æçº¿ç¨ cache å½ä¸­çè¶ä½ã\n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   7\n   8\n   \n   * mysqlè¡¨å¤§æ¶ï¼å¯ä»¥è¿è¡åè¡¨åè¡¨ååºãä»¥åååº\n     * ååºåè¡¨å­å¨ä»¥ä¸é®é¢ï¼\n       * äºå¡é®é¢\n       * è·¨èç¹join å count,order by,group byä»¥åèåå½æ°é®é¢\n       * æ°æ®è¿ç§»ï¼å®¹éè§åï¼æ©å®¹ç­é®é¢\n\n----------------------------------------\n\n----------------------------------------\n\n\n# mongo\n\n# æä¹å\n\n * mongodump & mongorestore\n * mongoexport & mongoimport\n\n# é«å¯ç¨\n\n * replica set\n   * æ¯mongodçå®ä¾éå, åå«ä¸ç±»è§è²: primaryãsecondaryãarbiter(ä»²è£è)\n   * ä¸»ä»åæ­¥æ¹å¼\n     * ä¸¤ä¸ªæ­¥éª¤\n       * intial syncï¼å¯ä»¥çè§£ä¸ºå¨éåæ­¥\n       * replicationï¼è¿½åæ­¥æºçoplogï¼å¯ä»¥çè§£ä¸ºå¢éåæ­¥, ä¼ä¸æ­æåä¸»ä¸æ°äº§ççoplogå¹¶éæ¾\n         * ä¸ç±»çº¿ç¨å®æreplicationå·¥ä½\n           * producer threadï¼ä¸æ­çä»åæ­¥æºä¸æåoplogï¼å¹¶å å¥å°ä¸ä¸ªblockqueueçéåéã\n           * replbatcher threadï¼è´è´£éä¸ªä»producer threadçéåéååºoplogï¼å¹¶æ¾å°èªå·±ç»´æ¤çéåéãè¦ä¿æé¡ºåºæ§ã\n           * syncçº¿ç¨å°replbatcher threadçéåååå°é»è®¤16ä¸ªreplwriterçº¿ç¨ï¼ç±replwriteræ¥æç»éæ¾æ¯æ¡oplogã\n   * æ³¨æï¼mongoçoplogå·æå¹ç­æ§\n\n# é«æ§è½\n\n * cluster\n   * ä½¿ç¨shardingåçææ¯: client ---\x3e router(mongos) ---\x3e shard(æ¯ä¸ªshardèç¹é½æ¯ä¸ä¸ªreplica set)\n * é\n   * å¨ 2.2 çæ¬ä»¥åï¼mongod åªæå¨å±éï¼å¨ 2.2 çæ¬å¼å§ï¼åºçº§é;\n     * ç²åº¦ï¼åº ---\x3e collect ---\x3e document\n     * å»ºç´¢å¼å°±æ¯ä¸ä¸ªå®¹æå¼èµ·é¿æ¶é´åéçé®é¢ãå¦æéåçæ°æ®éå¾å¤§ï¼å»ºç´¢å¼éå¸¸è¦è±æ¯è¾é¿æ¶é´ï¼ç¹å«å®¹æå¼èµ·é®é¢ã\n       * mongodb æä¾äºä¸¤ç§å»ºç´¢å¼çè®¿é®\n         * ä¸ç§æ¯ background æ¹å¼: db.posts.ensureindex({user_id: 1}, {background: 1})\n         * ä¸ç§æ¯é background æ¹å¼: db.posts.ensureindex({user_id: 1})\n\n# utility\n\n * schema explorer\n   * [https://studio3t.com/knowledge-base/articles/schema-explorer/]\n\n----------------------------------------\n\n----------------------------------------\n\n\n# end\n\n * sharding\n   * å½æ°æ®éæ¯è¾å¤§çæ¶åï¼æä»¬éè¦ææ°æ®åçè¿è¡å¨ä¸åçæºå¨ä¸­ï¼ä»¥éä½cpuãåå­åioçååï¼shardingå°±æ¯æ°æ®åºåçææ¯ã\n * orm(object-relational mapping)\n   * mybatis\n * mysqlæ§è½ä¼åçæä½³20+æ¡ç»éª]\n   * https://www.cnblogs.com/zhouyusheng/p/8038224.html\n     * explainãprocedure analyse()\n * mvcc\n   * mysql ç mvcc ï¼æ¯ä¸ç§å¤çæ¬å¹¶åæ§å¶æºå¶",charsets:{cjk:!0}},{title:"High Performance Mysql, 3th Edition éè¯»",frontmatter:{title:"High Performance Mysql, 3th Edition éè¯»",date:"2020-04-21T00:00:00.000Z",description:"High Performance Mysql, 3th Edition",categories:["blog","database"],tags:[null],permalink:null},regularPath:"/blog/database/high_performance_mysql.html",relativePath:"blog/database/high_performance_mysql.md",key:"v-f89e89de",path:"/blog/database/high_performance_mysql.html",headers:[{level:2,title:"ç¬¬ä¸ç«  MySQLæ¶æä¸åå²",slug:"ç¬¬ä¸ç« -mysqlæ¶æä¸åå²",normalizedTitle:"ç¬¬ä¸ç«  mysqlæ¶æä¸åå²",charIndex:132},{level:2,title:"ç¬¬ä¸ç« ",slug:"ç¬¬ä¸ç« ",normalizedTitle:"ç¬¬ä¸ç« ",charIndex:898},{level:2,title:"ç¬¬äºç«  åå»ºé«æ§è½çç´¢å¼",slug:"ç¬¬äºç« -åå»ºé«æ§è½çç´¢å¼",normalizedTitle:"ç¬¬äºç«  åå»ºé«æ§è½çç´¢å¼",charIndex:1992},{level:2,title:"ç¬¬å­ç«  æ¥è¯¢æ§è½ä¼å",slug:"ç¬¬å­ç« -æ¥è¯¢æ§è½ä¼å",normalizedTitle:"ç¬¬å­ç«  æ¥è¯¢æ§è½ä¼å",charIndex:3019},{level:2,title:"ç¬¬ä¸ç«  MySQLé«çº§ç¹æ§",slug:"ç¬¬ä¸ç« -mysqlé«çº§ç¹æ§",normalizedTitle:"ç¬¬ä¸ç«  mysqlé«çº§ç¹æ§",charIndex:3659},{level:2,title:"ç¬¬å«ç«  ä¼åæå¡å¨è®¾ç½®",slug:"ç¬¬å«ç« -ä¼åæå¡å¨è®¾ç½®",normalizedTitle:"ç¬¬å«ç«  ä¼åæå¡å¨è®¾ç½®",charIndex:4148},{level:2,title:"ç¬¬ä¹ç« ",slug:"ç¬¬ä¹ç« ",normalizedTitle:"ç¬¬ä¹ç« ",charIndex:4164},{level:2,title:"ç¬¬åç«  å¤å¶",slug:"ç¬¬åç« -å¤å¶",normalizedTitle:"ç¬¬åç«  å¤å¶",charIndex:4172},{level:2,title:"ç¬¬åä¸ç«  å¯æ©å±çMySQL",slug:"ç¬¬åä¸ç« -å¯æ©å±çmysql",normalizedTitle:"ç¬¬åä¸ç«  å¯æ©å±çmysql",charIndex:4288},{level:2,title:"ç¬¬åäºç«  é«å¯ç¨çMySQL",slug:"ç¬¬åäºç« -é«å¯ç¨çmysql",normalizedTitle:"ç¬¬åäºç«  é«å¯ç¨çmysql",charIndex:4402},{level:2,title:"ç¬¬åäºç«  å¤ä»½ä¸æ¢å¤",slug:"ç¬¬åäºç« -å¤ä»½ä¸æ¢å¤",normalizedTitle:"ç¬¬åäºç«  å¤ä»½ä¸æ¢å¤",charIndex:4446},{level:2,title:"EXPLAIN",slug:"explain",normalizedTitle:"explain",charIndex:4705},{level:2,title:"éçè°è¯",slug:"éçè°è¯",normalizedTitle:"éçè°è¯",charIndex:7348}],headersStr:"ç¬¬ä¸ç«  MySQLæ¶æä¸åå² ç¬¬ä¸ç«  ç¬¬äºç«  åå»ºé«æ§è½çç´¢å¼ ç¬¬å­ç«  æ¥è¯¢æ§è½ä¼å ç¬¬ä¸ç«  MySQLé«çº§ç¹æ§ ç¬¬å«ç«  ä¼åæå¡å¨è®¾ç½® ç¬¬ä¹ç«  ç¬¬åç«  å¤å¶ ç¬¬åä¸ç«  å¯æ©å±çMySQL ç¬¬åäºç«  é«å¯ç¨çMySQL ç¬¬åäºç«  å¤ä»½ä¸æ¢å¤ EXPLAIN éçè°è¯",content:'# High Performance Mysql, 3th Edition\n\nç¥è¯ç¹ï¼\n    Schemaãæ°æ®ç±»åãé«æ§è½ç´¢å¼ãæ¥è¯¢æ§è½ä¼åãMysqlé«çº§ç¹æ§ãMysqléç½®ã\n    å¤å¶ãå¯æ©å±ãé«å¯ç¨\n    å¤ä»½ä¸æ¢å¤\n\n\n1\n2\n3\n4\n\n\n\n# ç¬¬ä¸ç«  MySQLæ¶æä¸åå²\n\nå±äº«éãæä»é\néçç²åº¦ï¼rowéï¼tableé\nACID\n\n\n1\n2\n3\n\n\næ¯ç§å­å¨å¼æå®ç°çéç¦»çº§å«é½ä¸å°½ç¸åãå¯ä»¥æ ¹æ®éæ©çå­å¨å¼ææ¥æ¥éèµæäºè§£å¯¹åºçéç¦»çº§å«\n\n * READ UNCOMMITED ---\x3e èè¯»\n * READ COMMITED ---\x3e ä¸å¯éå¤åº¦\n * REPEATABLE READ ---\x3e å¹»è¯»(åå¥æ°è®°å½ï¼phantom row)ï¼å¤çæ¬å¹¶åæ§å¶(MVCC)è§£å³å¹»è¯»é®é¢, mysqlé»è®¤éç¦»çº§å«\n * SERIALIZABLE\n\næ­»éåçæ¶ï¼ç®å(mysql5.5ä¸­)Innodbçç­ç¥æ¯ï¼å°æææå°è¡çº§éçäºå¡åæ»\n\näºå¡æ¥å¿\n\n * äºå¡æ¥å¿å¯ä»¥æä¾äºå¡çæçãä½¿ç¨äºå¡æ¥å¿æ¶ï¼å­å¨å¼æå¨ä¿®æ¹è¡¨æ°æ®æ¶åªéè¦ä¿®æ¹å¶åå­æ·è´ï¼åæè¯¥ä¿®æ¹è¡ä¸ºè®°å½å°æä¹å¨ç¡¬ççäºå¡æ¥å¿ä¸­ï¼èä¸ç¨æ¯æ¬¡é½å°ä¿®æ¹çæ°æ®æ¬èº«æä¹å°ç£çãäºå¡æ¥å¿éç¨çæ¯é¡ºåºè¿½å çæ¹å¼ï¼æä»¥éåº¦ç¸å¯¹ä¼å¿«å¾å¤ãäºå¡æ¥å¿æä¹ååï¼åå­ä¸­è¢«ä¿®æ¹çæ°æ®å¯ä»¥å¨åå°æ¢æ¢å·å¥ç£çãè¿ç§æ¹å¼å«é¢åå¼æ¥å¿(Write-Ahead Logging), ä¿®æ¹æ°æ®éè¦åä¸¤æ¬¡ç£çã\n\nInnoDBçmvccæ¯éè¿å¢å ä¸¤ä¸ªéèåå®ç°çï¼ä¸ä¸ªè®°å½è¡çè¿ææ¶é´ï¼ä¸ä¸ªä¿æè¡çåå»ºæ¶é´ãå½ç¶ï¼å­å¨çä¸æ¯å®éæ¶é´èæ¯ä¸ä¸ªç³»ç»çæ¬å·ï¼æ¯å¼å§ä¸ä¸ªæ°äºç©ï¼ç³»ç»çæ¬å·é½ä¼éå¢. InnoDB éè¿ é´éé(next-key lock)è§£å³å¹»è¯»é®é¢ã\n\nMVCC åªå¯¹ READ COMMITED å REPEATABLE READ ä¸¤ä¸ªäºå¡éç¦»çº§å«çæï¼å¶ä»ä¸¤ä¸ªè·MVCCä¸å¼å®¹ï¼å ä¸ºï¼READ UNCOMMITED æ»æ¯è¯»åææ°çæ°æ®è¡ï¼èä¸æ¯ç¬¦åå½åäºå¡çæ¬çæ°æ®è¡ï¼è SERIALIZABLE åä¼å¯¹ææè¯»åçè¡é½å éã\n\n\n# ç¬¬ä¸ç« \n\nå®ä¹æ§è½æææçæ¹æ³æ¯ååºæ¶é´\n\nåç¡®çæ§è½æµééåï¼å¯ä»¥å¾å¥½çå¸®å©åç°ãè§£å³é®é¢\n\næ¢æ¥è¯¢æ¥å¿çè®°å½ï¼å¯¹mysqlçæ§è½å½±åå¾ä½ã\n\nå»ºè®®è¯æ­é®é¢æ¶åä½¿ç¨ä»¥ä¸ä¸¤ç§æ¹æ³ï¼ - show (global) status - show processlist è¿ä¸¤ç§æ¹æ³çå¼éå¾ä½ï¼å¯ä»¥éè¿ç®åçshellèæ¬(ä»¥è¾é«é¢çï¼å¦ï¼æ¬¡/s è¿è¡)æèåå¤æ§è¡çæ¥è¯¢æ¥äº¤äºå¼çæ¶éæ°æ®\n\nå¯¹æ¶éå°çæ°æ®è¿è¡å¯è§åå¤çãå¯è§åçæ°æ®æå·è¯´æå\n\nINFORMATION_SCHEMA.STATISTICS ç»è®¡äºå¾å¤MySQLçç»è®¡ä¿¡æ¯ã\n\nSHOW VARIABLES\n\n\n# ç¬¬åç«  Schemaä¸æ°æ®ç±»åä¼å\n\næ°æ®ç±»åéæ©ååï¼\n\n * æ´å°çéå¸¸æ´å¥½ï¼æ´å°çæ°æ®ç±»åéå¸¸æ´å¿«ï¼å ä¸ºä»ä»¬å¼ åæ´å°çç£çãåå­åcpuç¼å­\n * ç®åå°±å¥½ï¼ç®åæ°æ®ç±»åçæä½éå¸¸éè¦æ´å°çcpuå¨æã\n * å°½éé¿åNULLï¼éå¸¸æåµä¸æå¥½æå®åä¸ºNOT NULL, é¤éççéè¦å­å¨ NULLã\n   * å¦ææ¥è¯¢ä¸­åå«å¯ä¸ºNULLçåï¼å¯¹äºMySQLæ¥è¯´æ´é¾ä¼åï¼å ä¸ºå¯ä¸º NULL çåä½¿å¾ç´¢å¼ãç´¢å¼ç»è®¡åå¼æ¯è¾é½æ´å å¤æã\n   * å¯ä¸º NULL çåä½¿ç¨æ´å¤çå­å¨ç©ºé´ï¼å¨MySQLéä¹éè¦ç¹æ®å¤çã\n   * å½å¯ä¸º NULL çåè¢«ç´¢å¼æ¶ï¼æ¯ä¸ªç´¢å¼è®°å½éè¦ä¸ä¸ªé¢å¤çå­èã ä½æ¯ï¼éå¸¸æå¯ä¸º NULL çåæ¹ä¸º NOT NULL å¸¦æ¥çæ§è½æåæ¯è¾å°ã\n\nDATETIME å TIMESTAMP é½å¯ä»¥å­å¨æ¶é´ï¼ç²¾ç¡®å°ç§ãç¶èï¼TIMESTAMP åªä½¿ç¨ DATETIME ä¸åçå­å¨ç©ºé´ï¼å¹¶ä¸ä¼æ ¹æ®æ¶åºååï¼ä½æ¯ TIMESTAMP åè®¸è¡¨è¾¾çæ¶é´èå´è¦å°å¾å¤ã\n\nMySQL å¯ä»¥ä¸ºæ´æ°ç±»åæå®å®½åº¦ï¼å¦ INT(11)ï¼å®ä¸ä¼éå¶å¼å¾åæ³èå´ï¼åªæ¯è§å®äºMySQLçä¸äºäº¤äºå·¥å·(å¦ï¼MySQLå½ä»¤è¡å®¢æ·ç«¯)ç¨æ¥æ¾ç¤ºå­ç¬¦çä¸ªæ°ã\n\nFLOAT å DOUBLE ä½¿ç¨æ åçæµ®ç¹è¿ç®è¿è¡è¿ä¼¼è®¡ç®ã DECIMAL ç¨äºå­å¨ç²¾ç¡®çå°æ°ã å ä¸º CPU æ¯æåçæµ®ç¹è®¡ç®ä½ä¸æ¯æ DECIMAL è¿ç®ï¼æä»¥æµ®ç¹è¿ç®ææ¾æ´å¿«ã\n\nå½å­å¨ç±»åä¸º CHAR æ¶ï¼MySQL ä¼å é¤ææçæ«å°¾ç©ºæ ¼ã\n\nMySQL ç ALTER TABLE æä½çæ§è½å¯¹å¤§è¡¨æ¥è¯´æ¯ä¸ªå¤§é®é¢ï¼MySQL æ§è¡å¤§é¨åä¿®æ¹è¡¨ç»ææä½çæ¹æ³æ¯ç¨æ°çè¡¨ç»æåå»ºä¸ä¸ªç©ºè¡¨ï¼éæ§è¡¨ï¼ä»æ§è¡¨ä¸­æ¥åºæææ°æ®æå¥æ°è¡¨ï¼ç¶åå é¤æ§è¡¨ãè¿æ ·çæä½å¯è½ä¼è±è´¹å¾é¿æ¶é´ï¼å¦æåå­ä¸è¶³èè¡¨åå¾å¤§ï¼èä¸è¿æå¾å¤ç´¢å¼çæåµä¸å°¤å¶ä¸¥éã\n\n\n# ç¬¬äºç«  åå»ºé«æ§è½çç´¢å¼\n\nå¯¹äºéå¸¸å°çè¡¨ï¼å¤§é¨åæåµä¸ç®åçå¨è¡¨æ«ç æ´é«æ å¯¹äºä¸­å°å¤§åçè¡¨ï¼ç´¢å¼å°±éå¸¸ææãä½å¯¹äºç¹å¤§åçè¡¨ï¼å»ºç«åä½¿ç¨ç´¢å¼çä»£ä»·å°éä¹å¢é¿ã\n\nå¦æè¡¨çæ°éç¹å«å¤ï¼å¯ä»¥å»ºç«ä¸ä¸ªåæ°æ®ä¿¡æ¯è¡¨ï¼ç¨æ¥æ¥è¯¢éè¦ç¨å°çæäºç¹æ§ãå¯¹äºTBçº§å«çæ°æ®ï¼å®ä½åæ¡è®°å½çæä¹ä¸å¤§ï¼æä»¥ç»å¸¸ä¼ä½¿ç¨åçº§å«åæ°æ®ææ¯æ¥æ¿ä»£ç´¢å¼ã\n\né«æ§è½çç´¢å¼ç­ç¥\n\n * å¦ææ¥è¯¢ä¸­çåä¸æ¯ç¬ç«çï¼åMySQLå°±ä¸ä¼ä½¿ç¨ç´¢å¼ã"ç¬ç«çå"æ¯æç´¢å¼åä¸è½æ¯è¡¨è¾¾å¼çä¸é¨åï¼ä¹ä¸è½æ¯å½æ°çåæ°ã\n\nä½¿ç¨ç´¢å¼çæå·¦å¹éåå\n\nInnoDBä½¿ç¨ä¸»é®æ¥èé(èç°)æ°æ®ãå¦ææ²¡æå®ä¹ä¸»é®ï¼InnoDBä¼éæ©ä¸ä¸ªå¯ä¸çéç©ºç´¢å¼ä»£æ¿ãå¦ææ²¡æè¿æ ·çç´¢å¼ï¼InnoDBä¼éå¼å®ä¹ä¸ä¸ªä¸»é®æ¥ä½ä¸ºèç°ç´¢å¼ãInnoDBåªèéå¨åä¸ä¸ªé¡µé¢ä¸­çè®°å½ï¼åå«ç¸é»é®å¼çé¡µé¢å¯è½ä¼ç¸è·çè¿ã\n\nèç°(æ°æ®)ç´¢å¼ï¼éè¿æ°æ®å­å¨çè¿ç»­æ§ï¼å©ç¨ç£ççé¡ºåºè¯»åç¹æ§ï¼æå¤§éåº¦çæé«äºIOå¯éååºç¨çæ§è½ãä½æ¯ï¼è¿ä¹ä½¿å¾ æå¥æ°è¡ãä¸»é®è¢«æ´æ°ç­å¯¼è´éè¦ç§»å¨è¡çæ¶åï¼å¯è½é¢ä¸´âé¡µåè£(page split)âçé®é¢ãå½è¡çä¸»é®å¼è¦æ±å¿é¡»å°è¿ä¸è¡æå¥å°æä¸ªå·²æ»¡çé¡µä¸­æ¶ï¼å­å¨å¼æä¼å°è¯¥é¡µåè£æä¸¤ä¸ªé¡µé¢æ¥å®¹çº³è¯¥è¡ï¼è¿å°±æ¯ä¸æ¬¡é¡µåè£æä½ã\n\näºçº§ç´¢å¼(éèç°ç´¢å¼)å¯è½æ¯æ³è±¡çæ´å¤§ï¼å ä¸ºäºçº§ç´¢å¼çå¶å­èç¹åå«äºå¼ç¨è¡çä¸»é®åãäºçº§ç´¢å¼è®¿é®éè¦ä¸¤æ¬¡ç´¢å¼æ¥æ¾ï¼èä¸æ¯ä¸æ¬¡ãå ä¸ºäºçº§ç´¢å¼å¶å­èç¹ä¸­ä¿å­çä¸æ¯æåè¡çç©çä½ç½®çæéï¼èæ¯è¡çä¸»é®å¼ã\n\nMySQL åè®¸å¨ç¸ååä¸åå»ºå¤ä¸ªç´¢å¼ãä½æ¯ï¼éè¦åç¬ç»´æ¤éå¤çç´¢å¼ï¼å¹¶ä¸ä¼åå¨å¨ä¼åæ¥è¯¢çæ¶åä¹éè¦éä¸ªå°è¿è¡èèï¼è¿ä¼å½±åæ§è½ãåºå°½éé¿åéå¤ç´¢å¼ã è¡¨ä¸­çç´¢å¼è¶å¤æå¥éåº¦ä¼è¶æ¢ãä¸è¬æ¥è¯´ï¼å¢å æ°ç´¢å¼ä¼å¯¼è´ INSERTãUPDATEãDELETE ç­æä½çéåº¦åæ¢ã\n\nMySQL çç´¢å¼ç»è®¡ä¿¡æ¯ï¼ InnoDB å¨æå¼æäº INFORMATION_SCHEMA è¡¨ï¼æèä½¿ç¨ SHOW TABLE STATUS å SHOW INDEX ç­æ¶ï¼é½æå¯è½è§¦åç´¢å¼ç»è®¡ä¿¡æ¯çæ´æ°ãå¦ææå¡å¨ä¸æå¤§éçæ°æ®ï¼è¿å¯è½æ¯ä¸ªä¸¥éçé®é¢ï¼å°¤å¶æ¯å½IOæ¯è¾æ¢çæ¶åã\n\nInnoDB å¼æéè¿æ½æ ·çæ¹å¼æ¥è®¡ç®ç»è®¡ä¿¡æ¯ï¼é¦åéæºå°è¯»åå°éçç´¢å¼é¡µé¢ï¼ç¶åä»¥æ­¤ä¸ºæ ·æ¬è®¡ç®ç´¢å¼çç»è®¡ä¿¡æ¯ãå¯ä»¥éè¿åæ° innodb_stats_sample_pages æ¥è®¾ç½®æ ·æ¬é¡µçæ°éã\n\n\n\n# ç¬¬å­ç«  æ¥è¯¢æ§è½ä¼å\n\n1ãç¡®è®¤æ¯å¦åæ°æ®åºè¯·æ±äºè¶è¿å®ééè¦(å¤§éä¸éè¦)çæ°æ® 2ãç¡®è®¤MySQLæå¡å¨å±æ¯å¦å¨åæå¤§éè¶è¿éè¦çæ°æ®è¡ å¯¹äºMySQLæç®åçè¡¡éæ¥è¯¢å¼éçä¸ä¸ªææ å¦ä¸ï¼\n\n * ååºæ¶é´\n * æ«æçè¡æ°\n * è¿åçè¡æ°\n\nMySQL éä¿¡åè®® ååå·¥ãè¿æå³çï¼å¨ä»»ä½ä¸ä¸ªæ¶å»ï¼è¦ä¹æ¯ç±æå¡å¨åå®¢æ·ç«¯åéæ°æ®ï¼è¦ä¹æ¯ç±å®¢æ·ç«¯åæå¡ç«¯åéæ°æ®ï¼è¿ä¸¤ä¸ªå¨ä½ä¸è½åæ¶åçãæä»¥ï¼è¦ç¹å«æ³¨ææ¥è¯¢è¯­å¥å¾é¿ï¼æèè¿åç»æå¾å¤§çæ¶åã\n\næå¾å¤æ¹å¼è½æ¥çå½åçç¶æï¼æç®åçæ¯ä½¿ç¨ SHOW FULLPROCESSLIST å½ä»¤ã\n\nSHOW STATUS LIKE \'last_query_cost\';\n\nMySQL æ æ³å©ç¨å¤æ ¸ç¹æ§æ¥å¹¶è¡æ§è¡æ¥è¯¢ã\n\nä¼åLIMITåé¡µ å½åç§»ééå¸¸å¤§æ¶ï¼è¿ç§åé¡µæ¹å¼ä»£ä»·éå¸¸é«ï¼å¸¸è§çä¸ç§ä¼åæ¹å¼æ¯ï¼ä½¿ç¨ç´¢å¼è¦çæ«æï¼èä¸æ¯æ¥è¯¢ææçåãç¶åæ ¹æ®éè¦åä¸æ¬¡å³èæä½åè¿åæéçåã\n\nä¸è¬çï¼æä»¬è¦å°½éé¿åä½¿ç¨ SELECT FOR UPDATEã\n\nCOUNT()æä¸¤ä¸ªéå¸¸ä¸åçä½ç¨ï¼å®å¯ä»¥ç»è®¡æä¸ªåå¼çæ°éï¼ä¹å¯ä»¥ç»è®¡è¡æ°ãå¨ç»è®¡åå¼æ¶è¦æ±åå¼æ¯éç©ºçï¼ä¸ç»è®¡NULLï¼ã COUNT(1) is only subject to the same optimization if the first column is defined as NOT NULL.\n\nMySQL çæ¥è¯¢æ§è¡è®¡åæ»æ¯å·¦ä¾§æ·±åº¦ä¼åæ ã\n\n\n# ç¬¬ä¸ç«  MySQLé«çº§ç¹æ§\n\nååºè¡¨ãè§å¾ãä¸´æ¶è¡¨ãæ¸¸æ \n\nXAäºå¡\n\nä¸ä¸ªå¸¸è§çè¯¯åºæ¯è®¤ä¸º innodb_support_xa åªæå¨éè¦XAæ¯æçæåµä¸ææå¼ãè¿æ¯éè¯¯çï¼æ¹åæ°è¿ä¼æ§å¶ MySQL åé¨å­å¨å¼æåäºè¿å¶æ¥å¿ä¹é´çåå¸å¼äºå¡ã\n\næ¥è¯¢ç¼å­\n\nå¦ææ¥è¯¢è¯­å¥ä¸­åå«ä»»ä½çä¸ç¡®å®å½æ°ï¼é£ä¹ MySQL å¨æ¥è¯¢ç¼å­ä¸­æ¯ä¸å¯è½æ¾å°ç¼å­ç»æçã å¦ææ¥è¯¢ç¼å­ç©ºé´è¿å¤§ï¼å¨è¿ææä½çæ¶åå¯è½ä¼å¯¼è´æå¡å¨åµæ­»ãä¸ä¸ªæ¯è¾ç®åçæ¹å¼å°±æ¯æ§å¶ç¼å­ç©ºé´(query_cache_size)çå¤§å°ã\n\næå¼æ¥è¯¢ç¼å­å¯¹è¯»ååæä½é½ä¼å¸¦æ¥é¢å¤çæ¶èï¼\n\n * è¯»æ¥è¯¢å¨å¼å§ä¹åå¿é¡»åæ£æ¥æ¯å¦å½ä¸­ç¼å­\n * å¦æè¿ä¸ªè¯»æ¥è¯¢å¯ä»¥è¢«ç¼å­ï¼é£ä¹å½å®ææ§è¡åï¼ä¼å°å¶ç»ææ¾å¥ç¼å­\n * è¿å¯¹åæä½ä¹ä¼æå½±åï¼å ä¸ºå½åæä¸ªè¡¨åå¥æ°æ®çæ¶åï¼MySQL å¿é¡»å°å¯¹åºè¡¨çææç¼å­é½è®¾ç½®ä¸ºå¤±æãå¦ææ¥è¯¢ç¼å­éå¸¸å¤§æèç¢çå¾å¤ï¼è¿ä¸ªæä½å°±å¯è½å¸¦æ¥å¾å¤§çç³»ç»æ¶èã\n\nç¼å­ç¢çãåå­ä¸è¶³ãæ°æ®ä¿®æ¹ç­é½ä¼é æç¼å­å¤±æãæä»¥ï¼åå¯éåçåºç¨ï¼ç´æ¥ç¦ç¨æ¥è¯¢ç¼å­å¯è½ä¼æé«ç³»ç»æ§è½ã\n\nå¦ä½åæåéç½®æ¥è¯¢ç¼å­\n\n\n# ç¬¬å«ç«  ä¼åæå¡å¨è®¾ç½®\n\n\n# ç¬¬ä¹ç« \n\n\n# ç¬¬åç«  å¤å¶\n\nå¤å¶è§£å³çåºæ¬é®é¢æ¯è®©ä¸å°æå¡å¨çæ°æ®ä¸å¶ä»æå¡å¨ä¿æåæ­¥ã\n\nMySQLæ¯æä¸¤ç§å¤å¶æ¹å¼ï¼åºäºè¡çå¤å¶ååºäºè¯­å¥çå¤å¶ãè¿ä¸¤ç§æ¹å¼é½æ¯éè¿å¨ä¸»åºè¡è®°å½äºè¿å¶æ¥å¿ãå¨å¤åºéæ¾æ¥å¿çæ¹å¼æ¥å®ç°å¼æ­¥çæ°æ®å¤å¶ã\n\n\n# ç¬¬åä¸ç«  å¯æ©å±çMySQL\n\n * æ©å±æ¹å¼ï¼\n   * æ°æ®åçãå¤å®ä¾ãéç¾¤ãæ°æ®åå(ä¿ææ´»è·æ°æ®ç¬ç«ï¼å°æ´»è·åä¸æ´»è·æ°æ®éç¦»)\n * éåä»¥ è´è½½åè¡¡\n   * å¯ä»¥è®©å®¢æ·ç«¯å¤æ©å±æ æï¼ä»¥åå¶ä»çä¸äºé»è¾æä½\n\n\n# ç¬¬åäºç«  é«å¯ç¨çMySQL\n\n * æåå¹³åå¤±ææ¶é´\n * éä½å¹³åæ¢å¤æ¶é´\n\n\n# ç¬¬åäºç«  å¤ä»½ä¸æ¢å¤\n\nå ä¸º InnoDB æ¯ä¸ª ACID ç³»ç»ãä»»ä½æ¶å»(ä¾å¦å¿«ç§æ¶)ï¼æ¯ä¸ªæäº¤çäºå¡è¦ä¹å¨ InnoDB æ°æ®æä»¶ä¸­è¦ä¹å¨æ¥å¿æä»¶ä¸­ãå¨è¿åå¿«ç§åå¯å¨MySQLæ¶ï¼InnoDB å°è¿è¡æ¢å¤è¿ç¨ï¼å°±åæå¡å¨æ­è¿çµä¸æ ·ãä¼æ¥æ¾äºå¡æ¥å¿ä¸­ä»»ä½æäº¤ä½æ²¡æåºç¨å°æ°æ®æä»¶ä¸­çäºå¡ç¶ååºç¨ï¼å æ­¤ä¸ä¼ä¸¢å¤±ä»»ä½äºå¡ãè¿æ­£æ¯è¦å¼ºå¶ InnoDB æ°æ®æä»¶åæ¥å¿æä»¶å¨ä¸èµ·å¿«ç§çåå ã\n\nå¤å¶mysqléç½®ï¼åæ¶è§å¯mysqlå¯å¨æ¶çéè¯¯æ¥å¿ï¼tail -f /var/log/mysql/mysql.err\n\n\n# EXPLAIN\n\nå¨æ¥è¯¢ä¸­æ¯ä¸ªè¡¨å¨è¾åºä¸­åªæä¸è¡ãå¦ææ¥è¯¢æ¯ä¸¤ä¸ªè¡¨çèæ¥ï¼é£ä¹è¾åºä¸­å°æä¸¤è¡ã\n\n * EXPLAIN EXTENDED:\n   * çèµ·æ¥åæ­£å¸¸çEXPLAINè¡ä¸ºä¸æ ·ï¼ä½æ¯å®ä¼åè¯æå¡å¨\'éåç¼è¯\'æ§è¡è®¡åä¸ºä¸ä¸ªSELECTè¯­å¥ãå¯ä»¥éè¿ç´§æ¥æ°åè¿è¡SHOW WARNINGSçå°è¿ä¸ªçæçè¯­å¥ãè¿ä¸ªè¯­å¥ç´æ¥æ¥èªæ§è¡è®¡åï¼èä¸æ¯åå§SQLè¯­å¥ã\n * EXPLAIN PARTITIONS\n   * ä¼æ¾ç¤ºæ¥è¯¢å°è®¿é®çååºï¼å¦ææ¥è¯¢æ¯åºäºååºè¡¨çè¯ã\n\nè®¤ä¸ºå¢å EXPLAINæ¶MySQLä¸ä¼æ§è¡æ¥è¯¢ï¼è¿æ¯ä¸ä¸ªå¸¸è§çéè¯¯ãå®éä¸ï¼å¦ææ¥è¯¢å¨FROMå­å¥ä¸­åæ¬å­æ¥è¯¢ï¼é£ä¹MySQLå®éä¸ä¼æ§è¡å­æ¥è¯¢ï¼å°å¶ç»ææ¾å¨ä¸ä¸ªä¸´æ¶è¡¨ä¸­ï¼ç¶åå®æå¤é¨æ¥è¯¢ä¼åãè¿æå³çï¼å¦æè¯­å¥ä¸­åå«å¼éè¾å¤§çå­æ¥è¯¢æèä½¿ç¨ä¸´æ¶è¡¨ç®æ³çè§å¾ï¼å®éä¸ä¼ç»æå¡å¨å¸¦æ¥å¤§éå·¥ä½ã\n\nMySQL EXPLAIN åªè½è§£é SELECT æ¥è¯¢ï¼å¹¶ä¸ä¼å¯¹å­å¨ç¨åºè°ç¨ å INSERTãUPDATEãDELETEæå¶ä»è¯­å¥åè§£éãç¶èï¼å¯ä»¥éåæäºé SELECT æ¥è¯¢ä»¥å©ç¨ EXPALINãä¸ºäºè¾¾å°è¿ä¸ªç®çï¼åªéè¦å°è¯¥è¯­å¥è½¬æ¢æä¸ä¸ªç­ä»·çè®¿é®ææç¸ååç SELECTã\n\n * id å\n   * æ è¯ SELECT æå±çè¡ãå¦æå¨è¯­å¥ä¸­æ²¡æå­æ¥è¯¢æèèåï¼é£ä¹åªä¼æå¯ä¸ç SELECTãå¦åï¼åå±ç SELECT è¯­å¥ä¸è¬ä¼é¡ºåºç¼å·ã\n * select_type å\n   * æ¾ç¤ºäºå¯¹åºè¡æ¯ç®åè¿æ¯å¤æ SELECTãSIMPLE å¼æå³çæ¥è¯¢ä¸åå«å­æ¥è¯¢åUNIONï¼å¦ææ¥è¯¢æä»»ä½å¤æçå­é¨åï¼åæå¤å±é¨åæ è®°ä¸º PRIMARY, å¶ä»é¨åæ è®°å¦ä¸ï¼\n     * SUBQUERY\n       * åå«å¨ SELECT åè¡¨ä¸­çå­æ¥è¯¢ä¸­ç SELECT(æ¢å¥è¯è¯´ï¼ä¸å¨FROMå­å¥ä¸­)æ è®°ä¸º SUBQUERY\n     * DERIVED\n       * ç¨æ¥è¡¨ç¤ºåå«å¨ FROM å­å¥çå­æ¥è¯¢ä¸­ç SELECTï¼MySQL ä¼éå½æ§è¡å¹¶å°ç»ææ¾å°ä¸ä¸ªä¸´æ¶è¡¨ä¸­ãæå¡å¨åé¨ç§°å¶"æ´¾çè¡¨"ï¼å ä¸ºè¯¥ä¸´æ¶è¡¨æ¯ä»å­æ¥è¯¢ä¸­æ´¾çæ¥ç\n     * UNION\n       * å¨ UNION ä¸­çç¬¬äºä¸ªåéåç SELECT è¢«æ è®°ä¸º UNIONãç¬¬ä¸ä¸ª SELECT è¢«æ è®°å°±å¥½åå®ä»¥é¨åå¤æ¥è¯¢æ¥æ§è¡ã\n     * UNION RESULT\n       * ç¨æ¥ä» UNION çå¿åä¸´æ¶è¡¨æ£ç´¢ç»æç SELECT è¢«æ è®°ä¸º UNION RESULT\n     * DEPENDENT\n       * æå³ç SELECT ä¾èµäºå¤å±æ¥è¯¢ä¸­åç°çæ°æ®\n     * UNCACHEABLE\n       * æå³ç SELECT ä¸­çæäºç¹æ§é»æ­¢ç»æè¢«ç¼å­äºä¸ä¸ªItem_cache\n * table å\n   * æ¾ç¤ºäºå¯¹åºè¡æ­£å¨è®¿é®åªä¸ªè¡¨ã\n * type å\n   * è®¿é®ç±»åï¼æ¢è¨ä¹å°±æ¯ MySQL å³å®å¦ä½æ¥æ¾è¡¨ä¸­çè¡\n     * ALL\n       * å¨è¡¨æ«ç \n     * index\n       * è·å¨è¡¨æ«æä¸æ ·ï¼åªæ¯ MySQL æ«æè¡¨æ¶æç´¢å¼æ¬¡åºè¿è¡èä¸æ¯è¡ãä¸»è¦ä¼ç¹æ¯é¿åäºæåºï¼æå¤§çç¼ºç¹æ¯è¦æ¿ææç´¢å¼æ¬¡åºè¯»åæ´ä¸ªæ´ä¸ªè¡¨çå¼éãè¿éå¸¸æå³çè¥æ¯æéæºæ¬¡åºè®¿é®è¡ï¼å¼éå°ä¼éå¸¸å¤§ãå¦æå¨ Extra åä¸­çå° "Using index" è¯´æ MySQL æ­£å¨ä½¿ç¨è¦çç´¢å¼ï¼å®åªæ«æç´¢å¼çæ°æ®ï¼èä¸æ¯æç´¢å¼æ¬¡åºçæ¯ä¸è¡ã\n     * range\n       * èå´æ«æå°±æ¯ä¸ä¸ªæéå¶çç´¢å¼æ«æï¼å®å¼å§äºç´¢å¼çæä¸ä¸ªç¹ï¼è¿åå¹éè¿ä¸ªå¼åçè¡ã\n     * ref\n       * ç´¢å¼è®¿é®ï¼å®è¿åææå¹éæä¸ªåä¸ªå¼çè¡ãæ­¤ç±»ç´¢å¼è®¿é®åªæå½ä½¿ç¨éå¯ä¸ç´¢å¼æèå¯ä¸ç´¢å¼çéå¯ä¸æ§åç¼æ¶æä¼åçãæå®å«å ref æ¯å ä¸ºç´¢å¼è¦è·æä¸ªåèå¼ç¸æ¯è¾ã\n     * eq_ref\n       * ç´¢å¼è®¿é®ï¼å®æå¤åªè¿åä¸æ¡ç¬¦åæ¡ä»¶çè®°å½ãè¿ç§è®¿é®æ¹æ³å¯ä»¥å¨ MySQL ä½¿ç¨ä¸»é®æèå¯ä¸æ§ç´¢å¼æ¥æ¾æ¶çå°ã\n     * const, system\n       * å½ MySQL è½å¯¹æ¥è¯¢çæé¨åè¿è¡ä¼åå¹¶å°å¶è½¬æ¢æä¸ä¸ªå¸¸éæ¶ï¼å®å°±ä¼ä½¿ç¨è¿äºè®¿é®ç±»åã\n     * NULL\n       * æå³ç MySQL è½åä¼åé¶æ®µåè§£æ¥è¯¢è¯­å¥ï¼å¨æ§è¡é¶æ®µçè³ç¨ä¸çåè®¿é®è¡¨æèç´¢å¼ã\n * possible_keys å\n   * æ¾ç¤ºäºæ¥è¯¢å¯ä»¥ä½¿ç¨åªäºç´¢å¼\n * key å\n   * æ¾ç¤ºäº MySQL å³å®éç¨åªä¸ªç´¢å¼æ¥ä¼åå¯¹è¯¥è¡¨çè®¿é®ã\n * key_len å\n   * æ¾ç¤ºäºå¨ç´¢å¼å­æ®µä¸­å¯è½çæå¤§é¿åº¦ï¼èä¸æ¯è¡¨ä¸­æ°æ®ä½¿ç¨çå®éå­èæ°ã\n * ref å\n   * æ¾ç¤ºäºä¹åçè¡¨å¨ key åè®°å½çç´¢å¼ä¸­æ¥æ¾å¼æä½¿ç¨çåæèå¸¸é\n * rows å\n   * MySQLä¼°è®¡çä¸ºäºæ¾å°æéçè¡èéè¦è¯»åçè¡æ°ãè¿ä¸ªæ°å­æ¯ååµå¾ªç¯å³èè®¡åéçå¾ªç¯æ°ç®ãä¹å°±æ¯è¯´å®ä¸æ¯ MySQL è®¤ä¸ºå®æç»è¦ä»è¡¨éè¯»ååºæ¥çè¡æ°ï¼èæ¯ MySQL ä¸ºäºæ¾å°ç¬¦åæ¥è¯¢çæ¯ä¸ç¹ä¸æ åçé£äºè¡èå¿é¡»è¯»åçè¡çå¹³åæ°ã\n * filtered å\n   * å¨ä½¿ç¨ EXPLAIN EXTENDED æ¶åºç°ï¼æ¾ç¤ºçæ¯éå¯¹è¡¨éç¬¦åæä¸ªæ¡ä»¶(WHEREå­å¥æèæ¥æ¡ä»¶)çè®°å½æ°çç¾åæ¯æåçä¸ä¸ªæ²è§ä¼°ç®ã\n * Extra å\n   * åå«çæ¯ä¸éåå¨å¶å®åæ¾ç¤ºçé¢å¤ä¿¡æ¯ãå¸¸è§çæéè¦çå¼å¦ä¸ï¼\n     * Using index\n       * è¡¨ç¤º MySQL å°ä½¿ç¨è¦çç´¢å¼ï¼ä»¥é¿åè®¿é®è¡¨\n     * Using where\n       * æå³ç MySQL æå¡å¨å°å¨å­å¨å¼ææ£ç´¢è¡ååè¿è¡è¿æ»¤\n     * Using temporary\n       * æå³ç MySQL å¨å¯¹æ¥è¯¢ç»ææåºæ¶ä¼ä½¿ç¨ä¸ä¸ªä¸´æ¶è¡¨\n     * Using filesort\n       * æå³ç MySQL ä¼å¯¹ç»æä½¿ç¨ä¸ä¸ªå¤é¨ç´¢å¼æåºï¼èä¸æ¯æç´¢å¼æ¬¡åºä»è¡¨éè¯»åè¡\n     * Range checked for each record(index map:N)\n       * æå³çæ²¡æå¥½ç¨çç´¢å¼ï¼æ°çç´¢å¼å°å¨èæ¥çæ¯ä¸è¡ä¸éæ°ä¼°ç®\n\n\n# éçè°è¯\n\néç­å¾å¯è½åçå¨æå¡å¨çº§å«æå­å¨å¼æçº§å«ãä¸é¢æ¯MySQLæå¡å¨ä½¿ç¨çå ç§ç±»åçéï¼\n\n * è¡¨é\n   * è¡¨éå¯ä»¥æ¯æ¾å¼çä¹å¯ä»¥æ¯éå¼ç\n     * æ¾å¼ï¼ç¨ LOCK TABLES åå»º (å¯ä»¥ä½¿ç¨ SHOW PROCESSLIST è§å¯å°éç¶æ)\n     * éå¼ï¼æå¡å¨å¨éè¦æ¶èªå¨åå»ºåéæ¾ï¼å¹¶å°å®ä»¬ä¼ éç»å­å¨å¼æ\n   * æ¾åºè°ææé\n     * æä»¤ï¼mysqladmin debug\n * å¨å±é\n   * å¯ä»¥éè¿ FLUSH TABLES WITH READ LOCK æè®¾ç½® read_only=1 æ¥è·ååä¸ªå¨å±è¯»éã\n   \n   ä¸ä¸ªä¼è¯æ§è¡ï¼FLUSH TABLES WITH READ LOCK;\n   å¦ä¸ä¸ªä¼è¯å°è¯åéè¿ä¸ªè¡¨ï¼LOCK TABLES test WRITE;\n   æ­¤æ¶ï¼å°±ä¼çå°ä¼è¯æèµ·ï¼éè¿ SHOW PROCESSLIST å¯ä»¥çå°æ¥è¯¢ç¶ææ¯ï¼Waiting for release for readlockãè¿å°±è¯´ææ¥è¯¢æ­£å¨ç­å¾ä¸ä¸ªå¨å±è¯»éèä¸æ¯è¡¨çº§å«é\n   \n   \n   1\n   2\n   3\n   \n   * MySQL ç®åæ²¡ææä¾æ¥åºè°ææå¨å±è¯»éçæ¹æ³\n * å½åé\n   * è¡¨éçä¸ç§ï¼æå¡å¨å¨éå½åæèå é¤ä¸ä¸ªè¡¨æ¶åå»º\n * å­ç¬¦é\n   * å¯ä»¥ç¨ GET_LOCK() åå¶ç¸å³å½æ°å¨æå¡å¨çº§å«åéä½åéæ¾ä»»æä¸ä¸ªå­ç¬¦ä¸²\n\nå­å¨å¼æä¸­çé InnoDB å¨ SHOW INNODB STATUS çè¾åºä¸­æ¾é²äºä¸äºéä¿¡æ¯ãå¦æäºå¡æ­£å¨ç­å¾æä¸ªéï¼è¿ä¸ªéä¼æ¾ç¤ºå¨ SHOW INNODB STATUS è¾åºç TRANSACTIONS é¨åã\n\n',normalizedContent:'# high performance mysql, 3th edition\n\nç¥è¯ç¹ï¼\n    schemaãæ°æ®ç±»åãé«æ§è½ç´¢å¼ãæ¥è¯¢æ§è½ä¼åãmysqlé«çº§ç¹æ§ãmysqléç½®ã\n    å¤å¶ãå¯æ©å±ãé«å¯ç¨\n    å¤ä»½ä¸æ¢å¤\n\n\n1\n2\n3\n4\n\n\n\n# ç¬¬ä¸ç«  mysqlæ¶æä¸åå²\n\nå±äº«éãæä»é\néçç²åº¦ï¼rowéï¼tableé\nacid\n\n\n1\n2\n3\n\n\næ¯ç§å­å¨å¼æå®ç°çéç¦»çº§å«é½ä¸å°½ç¸åãå¯ä»¥æ ¹æ®éæ©çå­å¨å¼ææ¥æ¥éèµæäºè§£å¯¹åºçéç¦»çº§å«\n\n * read uncommited ---\x3e èè¯»\n * read commited ---\x3e ä¸å¯éå¤åº¦\n * repeatable read ---\x3e å¹»è¯»(åå¥æ°è®°å½ï¼phantom row)ï¼å¤çæ¬å¹¶åæ§å¶(mvcc)è§£å³å¹»è¯»é®é¢, mysqlé»è®¤éç¦»çº§å«\n * serializable\n\næ­»éåçæ¶ï¼ç®å(mysql5.5ä¸­)innodbçç­ç¥æ¯ï¼å°æææå°è¡çº§éçäºå¡åæ»\n\näºå¡æ¥å¿\n\n * äºå¡æ¥å¿å¯ä»¥æä¾äºå¡çæçãä½¿ç¨äºå¡æ¥å¿æ¶ï¼å­å¨å¼æå¨ä¿®æ¹è¡¨æ°æ®æ¶åªéè¦ä¿®æ¹å¶åå­æ·è´ï¼åæè¯¥ä¿®æ¹è¡ä¸ºè®°å½å°æä¹å¨ç¡¬ççäºå¡æ¥å¿ä¸­ï¼èä¸ç¨æ¯æ¬¡é½å°ä¿®æ¹çæ°æ®æ¬èº«æä¹å°ç£çãäºå¡æ¥å¿éç¨çæ¯é¡ºåºè¿½å çæ¹å¼ï¼æä»¥éåº¦ç¸å¯¹ä¼å¿«å¾å¤ãäºå¡æ¥å¿æä¹ååï¼åå­ä¸­è¢«ä¿®æ¹çæ°æ®å¯ä»¥å¨åå°æ¢æ¢å·å¥ç£çãè¿ç§æ¹å¼å«é¢åå¼æ¥å¿(write-ahead logging), ä¿®æ¹æ°æ®éè¦åä¸¤æ¬¡ç£çã\n\ninnodbçmvccæ¯éè¿å¢å ä¸¤ä¸ªéèåå®ç°çï¼ä¸ä¸ªè®°å½è¡çè¿ææ¶é´ï¼ä¸ä¸ªä¿æè¡çåå»ºæ¶é´ãå½ç¶ï¼å­å¨çä¸æ¯å®éæ¶é´èæ¯ä¸ä¸ªç³»ç»çæ¬å·ï¼æ¯å¼å§ä¸ä¸ªæ°äºç©ï¼ç³»ç»çæ¬å·é½ä¼éå¢. innodb éè¿ é´éé(next-key lock)è§£å³å¹»è¯»é®é¢ã\n\nmvcc åªå¯¹ read commited å repeatable read ä¸¤ä¸ªäºå¡éç¦»çº§å«çæï¼å¶ä»ä¸¤ä¸ªè·mvccä¸å¼å®¹ï¼å ä¸ºï¼read uncommited æ»æ¯è¯»åææ°çæ°æ®è¡ï¼èä¸æ¯ç¬¦åå½åäºå¡çæ¬çæ°æ®è¡ï¼è serializable åä¼å¯¹ææè¯»åçè¡é½å éã\n\n\n# ç¬¬ä¸ç« \n\nå®ä¹æ§è½æææçæ¹æ³æ¯ååºæ¶é´\n\nåç¡®çæ§è½æµééåï¼å¯ä»¥å¾å¥½çå¸®å©åç°ãè§£å³é®é¢\n\næ¢æ¥è¯¢æ¥å¿çè®°å½ï¼å¯¹mysqlçæ§è½å½±åå¾ä½ã\n\nå»ºè®®è¯æ­é®é¢æ¶åä½¿ç¨ä»¥ä¸ä¸¤ç§æ¹æ³ï¼ - show (global) status - show processlist è¿ä¸¤ç§æ¹æ³çå¼éå¾ä½ï¼å¯ä»¥éè¿ç®åçshellèæ¬(ä»¥è¾é«é¢çï¼å¦ï¼æ¬¡/s è¿è¡)æèåå¤æ§è¡çæ¥è¯¢æ¥äº¤äºå¼çæ¶éæ°æ®\n\nå¯¹æ¶éå°çæ°æ®è¿è¡å¯è§åå¤çãå¯è§åçæ°æ®æå·è¯´æå\n\ninformation_schema.statistics ç»è®¡äºå¾å¤mysqlçç»è®¡ä¿¡æ¯ã\n\nshow variables\n\n\n# ç¬¬åç«  schemaä¸æ°æ®ç±»åä¼å\n\næ°æ®ç±»åéæ©ååï¼\n\n * æ´å°çéå¸¸æ´å¥½ï¼æ´å°çæ°æ®ç±»åéå¸¸æ´å¿«ï¼å ä¸ºä»ä»¬å¼ åæ´å°çç£çãåå­åcpuç¼å­\n * ç®åå°±å¥½ï¼ç®åæ°æ®ç±»åçæä½éå¸¸éè¦æ´å°çcpuå¨æã\n * å°½éé¿ånullï¼éå¸¸æåµä¸æå¥½æå®åä¸ºnot null, é¤éççéè¦å­å¨ nullã\n   * å¦ææ¥è¯¢ä¸­åå«å¯ä¸ºnullçåï¼å¯¹äºmysqlæ¥è¯´æ´é¾ä¼åï¼å ä¸ºå¯ä¸º null çåä½¿å¾ç´¢å¼ãç´¢å¼ç»è®¡åå¼æ¯è¾é½æ´å å¤æã\n   * å¯ä¸º null çåä½¿ç¨æ´å¤çå­å¨ç©ºé´ï¼å¨mysqléä¹éè¦ç¹æ®å¤çã\n   * å½å¯ä¸º null çåè¢«ç´¢å¼æ¶ï¼æ¯ä¸ªç´¢å¼è®°å½éè¦ä¸ä¸ªé¢å¤çå­èã ä½æ¯ï¼éå¸¸æå¯ä¸º null çåæ¹ä¸º not null å¸¦æ¥çæ§è½æåæ¯è¾å°ã\n\ndatetime å timestamp é½å¯ä»¥å­å¨æ¶é´ï¼ç²¾ç¡®å°ç§ãç¶èï¼timestamp åªä½¿ç¨ datetime ä¸åçå­å¨ç©ºé´ï¼å¹¶ä¸ä¼æ ¹æ®æ¶åºååï¼ä½æ¯ timestamp åè®¸è¡¨è¾¾çæ¶é´èå´è¦å°å¾å¤ã\n\nmysql å¯ä»¥ä¸ºæ´æ°ç±»åæå®å®½åº¦ï¼å¦ int(11)ï¼å®ä¸ä¼éå¶å¼å¾åæ³èå´ï¼åªæ¯è§å®äºmysqlçä¸äºäº¤äºå·¥å·(å¦ï¼mysqlå½ä»¤è¡å®¢æ·ç«¯)ç¨æ¥æ¾ç¤ºå­ç¬¦çä¸ªæ°ã\n\nfloat å double ä½¿ç¨æ åçæµ®ç¹è¿ç®è¿è¡è¿ä¼¼è®¡ç®ã decimal ç¨äºå­å¨ç²¾ç¡®çå°æ°ã å ä¸º cpu æ¯æåçæµ®ç¹è®¡ç®ä½ä¸æ¯æ decimal è¿ç®ï¼æä»¥æµ®ç¹è¿ç®ææ¾æ´å¿«ã\n\nå½å­å¨ç±»åä¸º char æ¶ï¼mysql ä¼å é¤ææçæ«å°¾ç©ºæ ¼ã\n\nmysql ç alter table æä½çæ§è½å¯¹å¤§è¡¨æ¥è¯´æ¯ä¸ªå¤§é®é¢ï¼mysql æ§è¡å¤§é¨åä¿®æ¹è¡¨ç»ææä½çæ¹æ³æ¯ç¨æ°çè¡¨ç»æåå»ºä¸ä¸ªç©ºè¡¨ï¼éæ§è¡¨ï¼ä»æ§è¡¨ä¸­æ¥åºæææ°æ®æå¥æ°è¡¨ï¼ç¶åå é¤æ§è¡¨ãè¿æ ·çæä½å¯è½ä¼è±è´¹å¾é¿æ¶é´ï¼å¦æåå­ä¸è¶³èè¡¨åå¾å¤§ï¼èä¸è¿æå¾å¤ç´¢å¼çæåµä¸å°¤å¶ä¸¥éã\n\n\n# ç¬¬äºç«  åå»ºé«æ§è½çç´¢å¼\n\nå¯¹äºéå¸¸å°çè¡¨ï¼å¤§é¨åæåµä¸ç®åçå¨è¡¨æ«ç æ´é«æ å¯¹äºä¸­å°å¤§åçè¡¨ï¼ç´¢å¼å°±éå¸¸ææãä½å¯¹äºç¹å¤§åçè¡¨ï¼å»ºç«åä½¿ç¨ç´¢å¼çä»£ä»·å°éä¹å¢é¿ã\n\nå¦æè¡¨çæ°éç¹å«å¤ï¼å¯ä»¥å»ºç«ä¸ä¸ªåæ°æ®ä¿¡æ¯è¡¨ï¼ç¨æ¥æ¥è¯¢éè¦ç¨å°çæäºç¹æ§ãå¯¹äºtbçº§å«çæ°æ®ï¼å®ä½åæ¡è®°å½çæä¹ä¸å¤§ï¼æä»¥ç»å¸¸ä¼ä½¿ç¨åçº§å«åæ°æ®ææ¯æ¥æ¿ä»£ç´¢å¼ã\n\né«æ§è½çç´¢å¼ç­ç¥\n\n * å¦ææ¥è¯¢ä¸­çåä¸æ¯ç¬ç«çï¼åmysqlå°±ä¸ä¼ä½¿ç¨ç´¢å¼ã"ç¬ç«çå"æ¯æç´¢å¼åä¸è½æ¯è¡¨è¾¾å¼çä¸é¨åï¼ä¹ä¸è½æ¯å½æ°çåæ°ã\n\nä½¿ç¨ç´¢å¼çæå·¦å¹éåå\n\ninnodbä½¿ç¨ä¸»é®æ¥èé(èç°)æ°æ®ãå¦ææ²¡æå®ä¹ä¸»é®ï¼innodbä¼éæ©ä¸ä¸ªå¯ä¸çéç©ºç´¢å¼ä»£æ¿ãå¦ææ²¡æè¿æ ·çç´¢å¼ï¼innodbä¼éå¼å®ä¹ä¸ä¸ªä¸»é®æ¥ä½ä¸ºèç°ç´¢å¼ãinnodbåªèéå¨åä¸ä¸ªé¡µé¢ä¸­çè®°å½ï¼åå«ç¸é»é®å¼çé¡µé¢å¯è½ä¼ç¸è·çè¿ã\n\nèç°(æ°æ®)ç´¢å¼ï¼éè¿æ°æ®å­å¨çè¿ç»­æ§ï¼å©ç¨ç£ççé¡ºåºè¯»åç¹æ§ï¼æå¤§éåº¦çæé«äºioå¯éååºç¨çæ§è½ãä½æ¯ï¼è¿ä¹ä½¿å¾ æå¥æ°è¡ãä¸»é®è¢«æ´æ°ç­å¯¼è´éè¦ç§»å¨è¡çæ¶åï¼å¯è½é¢ä¸´âé¡µåè£(page split)âçé®é¢ãå½è¡çä¸»é®å¼è¦æ±å¿é¡»å°è¿ä¸è¡æå¥å°æä¸ªå·²æ»¡çé¡µä¸­æ¶ï¼å­å¨å¼æä¼å°è¯¥é¡µåè£æä¸¤ä¸ªé¡µé¢æ¥å®¹çº³è¯¥è¡ï¼è¿å°±æ¯ä¸æ¬¡é¡µåè£æä½ã\n\näºçº§ç´¢å¼(éèç°ç´¢å¼)å¯è½æ¯æ³è±¡çæ´å¤§ï¼å ä¸ºäºçº§ç´¢å¼çå¶å­èç¹åå«äºå¼ç¨è¡çä¸»é®åãäºçº§ç´¢å¼è®¿é®éè¦ä¸¤æ¬¡ç´¢å¼æ¥æ¾ï¼èä¸æ¯ä¸æ¬¡ãå ä¸ºäºçº§ç´¢å¼å¶å­èç¹ä¸­ä¿å­çä¸æ¯æåè¡çç©çä½ç½®çæéï¼èæ¯è¡çä¸»é®å¼ã\n\nmysql åè®¸å¨ç¸ååä¸åå»ºå¤ä¸ªç´¢å¼ãä½æ¯ï¼éè¦åç¬ç»´æ¤éå¤çç´¢å¼ï¼å¹¶ä¸ä¼åå¨å¨ä¼åæ¥è¯¢çæ¶åä¹éè¦éä¸ªå°è¿è¡èèï¼è¿ä¼å½±åæ§è½ãåºå°½éé¿åéå¤ç´¢å¼ã è¡¨ä¸­çç´¢å¼è¶å¤æå¥éåº¦ä¼è¶æ¢ãä¸è¬æ¥è¯´ï¼å¢å æ°ç´¢å¼ä¼å¯¼è´ insertãupdateãdelete ç­æä½çéåº¦åæ¢ã\n\nmysql çç´¢å¼ç»è®¡ä¿¡æ¯ï¼ innodb å¨æå¼æäº information_schema è¡¨ï¼æèä½¿ç¨ show table status å show index ç­æ¶ï¼é½æå¯è½è§¦åç´¢å¼ç»è®¡ä¿¡æ¯çæ´æ°ãå¦ææå¡å¨ä¸æå¤§éçæ°æ®ï¼è¿å¯è½æ¯ä¸ªä¸¥éçé®é¢ï¼å°¤å¶æ¯å½ioæ¯è¾æ¢çæ¶åã\n\ninnodb å¼æéè¿æ½æ ·çæ¹å¼æ¥è®¡ç®ç»è®¡ä¿¡æ¯ï¼é¦åéæºå°è¯»åå°éçç´¢å¼é¡µé¢ï¼ç¶åä»¥æ­¤ä¸ºæ ·æ¬è®¡ç®ç´¢å¼çç»è®¡ä¿¡æ¯ãå¯ä»¥éè¿åæ° innodb_stats_sample_pages æ¥è®¾ç½®æ ·æ¬é¡µçæ°éã\n\n\n\n# ç¬¬å­ç«  æ¥è¯¢æ§è½ä¼å\n\n1ãç¡®è®¤æ¯å¦åæ°æ®åºè¯·æ±äºè¶è¿å®ééè¦(å¤§éä¸éè¦)çæ°æ® 2ãç¡®è®¤mysqlæå¡å¨å±æ¯å¦å¨åæå¤§éè¶è¿éè¦çæ°æ®è¡ å¯¹äºmysqlæç®åçè¡¡éæ¥è¯¢å¼éçä¸ä¸ªææ å¦ä¸ï¼\n\n * ååºæ¶é´\n * æ«æçè¡æ°\n * è¿åçè¡æ°\n\nmysql éä¿¡åè®® ååå·¥ãè¿æå³çï¼å¨ä»»ä½ä¸ä¸ªæ¶å»ï¼è¦ä¹æ¯ç±æå¡å¨åå®¢æ·ç«¯åéæ°æ®ï¼è¦ä¹æ¯ç±å®¢æ·ç«¯åæå¡ç«¯åéæ°æ®ï¼è¿ä¸¤ä¸ªå¨ä½ä¸è½åæ¶åçãæä»¥ï¼è¦ç¹å«æ³¨ææ¥è¯¢è¯­å¥å¾é¿ï¼æèè¿åç»æå¾å¤§çæ¶åã\n\næå¾å¤æ¹å¼è½æ¥çå½åçç¶æï¼æç®åçæ¯ä½¿ç¨ show fullprocesslist å½ä»¤ã\n\nshow status like \'last_query_cost\';\n\nmysql æ æ³å©ç¨å¤æ ¸ç¹æ§æ¥å¹¶è¡æ§è¡æ¥è¯¢ã\n\nä¼ålimitåé¡µ å½åç§»ééå¸¸å¤§æ¶ï¼è¿ç§åé¡µæ¹å¼ä»£ä»·éå¸¸é«ï¼å¸¸è§çä¸ç§ä¼åæ¹å¼æ¯ï¼ä½¿ç¨ç´¢å¼è¦çæ«æï¼èä¸æ¯æ¥è¯¢ææçåãç¶åæ ¹æ®éè¦åä¸æ¬¡å³èæä½åè¿åæéçåã\n\nä¸è¬çï¼æä»¬è¦å°½éé¿åä½¿ç¨ select for updateã\n\ncount()æä¸¤ä¸ªéå¸¸ä¸åçä½ç¨ï¼å®å¯ä»¥ç»è®¡æä¸ªåå¼çæ°éï¼ä¹å¯ä»¥ç»è®¡è¡æ°ãå¨ç»è®¡åå¼æ¶è¦æ±åå¼æ¯éç©ºçï¼ä¸ç»è®¡nullï¼ã count(1) is only subject to the same optimization if the first column is defined as not null.\n\nmysql çæ¥è¯¢æ§è¡è®¡åæ»æ¯å·¦ä¾§æ·±åº¦ä¼åæ ã\n\n\n# ç¬¬ä¸ç«  mysqlé«çº§ç¹æ§\n\nååºè¡¨ãè§å¾ãä¸´æ¶è¡¨ãæ¸¸æ \n\nxaäºå¡\n\nä¸ä¸ªå¸¸è§çè¯¯åºæ¯è®¤ä¸º innodb_support_xa åªæå¨éè¦xaæ¯æçæåµä¸ææå¼ãè¿æ¯éè¯¯çï¼æ¹åæ°è¿ä¼æ§å¶ mysql åé¨å­å¨å¼æåäºè¿å¶æ¥å¿ä¹é´çåå¸å¼äºå¡ã\n\næ¥è¯¢ç¼å­\n\nå¦ææ¥è¯¢è¯­å¥ä¸­åå«ä»»ä½çä¸ç¡®å®å½æ°ï¼é£ä¹ mysql å¨æ¥è¯¢ç¼å­ä¸­æ¯ä¸å¯è½æ¾å°ç¼å­ç»æçã å¦ææ¥è¯¢ç¼å­ç©ºé´è¿å¤§ï¼å¨è¿ææä½çæ¶åå¯è½ä¼å¯¼è´æå¡å¨åµæ­»ãä¸ä¸ªæ¯è¾ç®åçæ¹å¼å°±æ¯æ§å¶ç¼å­ç©ºé´(query_cache_size)çå¤§å°ã\n\næå¼æ¥è¯¢ç¼å­å¯¹è¯»ååæä½é½ä¼å¸¦æ¥é¢å¤çæ¶èï¼\n\n * è¯»æ¥è¯¢å¨å¼å§ä¹åå¿é¡»åæ£æ¥æ¯å¦å½ä¸­ç¼å­\n * å¦æè¿ä¸ªè¯»æ¥è¯¢å¯ä»¥è¢«ç¼å­ï¼é£ä¹å½å®ææ§è¡åï¼ä¼å°å¶ç»ææ¾å¥ç¼å­\n * è¿å¯¹åæä½ä¹ä¼æå½±åï¼å ä¸ºå½åæä¸ªè¡¨åå¥æ°æ®çæ¶åï¼mysql å¿é¡»å°å¯¹åºè¡¨çææç¼å­é½è®¾ç½®ä¸ºå¤±æãå¦ææ¥è¯¢ç¼å­éå¸¸å¤§æèç¢çå¾å¤ï¼è¿ä¸ªæä½å°±å¯è½å¸¦æ¥å¾å¤§çç³»ç»æ¶èã\n\nç¼å­ç¢çãåå­ä¸è¶³ãæ°æ®ä¿®æ¹ç­é½ä¼é æç¼å­å¤±æãæä»¥ï¼åå¯éåçåºç¨ï¼ç´æ¥ç¦ç¨æ¥è¯¢ç¼å­å¯è½ä¼æé«ç³»ç»æ§è½ã\n\nå¦ä½åæåéç½®æ¥è¯¢ç¼å­\n\n\n# ç¬¬å«ç«  ä¼åæå¡å¨è®¾ç½®\n\n\n# ç¬¬ä¹ç« \n\n\n# ç¬¬åç«  å¤å¶\n\nå¤å¶è§£å³çåºæ¬é®é¢æ¯è®©ä¸å°æå¡å¨çæ°æ®ä¸å¶ä»æå¡å¨ä¿æåæ­¥ã\n\nmysqlæ¯æä¸¤ç§å¤å¶æ¹å¼ï¼åºäºè¡çå¤å¶ååºäºè¯­å¥çå¤å¶ãè¿ä¸¤ç§æ¹å¼é½æ¯éè¿å¨ä¸»åºè¡è®°å½äºè¿å¶æ¥å¿ãå¨å¤åºéæ¾æ¥å¿çæ¹å¼æ¥å®ç°å¼æ­¥çæ°æ®å¤å¶ã\n\n\n# ç¬¬åä¸ç«  å¯æ©å±çmysql\n\n * æ©å±æ¹å¼ï¼\n   * æ°æ®åçãå¤å®ä¾ãéç¾¤ãæ°æ®åå(ä¿ææ´»è·æ°æ®ç¬ç«ï¼å°æ´»è·åä¸æ´»è·æ°æ®éç¦»)\n * éåä»¥ è´è½½åè¡¡\n   * å¯ä»¥è®©å®¢æ·ç«¯å¤æ©å±æ æï¼ä»¥åå¶ä»çä¸äºé»è¾æä½\n\n\n# ç¬¬åäºç«  é«å¯ç¨çmysql\n\n * æåå¹³åå¤±ææ¶é´\n * éä½å¹³åæ¢å¤æ¶é´\n\n\n# ç¬¬åäºç«  å¤ä»½ä¸æ¢å¤\n\nå ä¸º innodb æ¯ä¸ª acid ç³»ç»ãä»»ä½æ¶å»(ä¾å¦å¿«ç§æ¶)ï¼æ¯ä¸ªæäº¤çäºå¡è¦ä¹å¨ innodb æ°æ®æä»¶ä¸­è¦ä¹å¨æ¥å¿æä»¶ä¸­ãå¨è¿åå¿«ç§åå¯å¨mysqlæ¶ï¼innodb å°è¿è¡æ¢å¤è¿ç¨ï¼å°±åæå¡å¨æ­è¿çµä¸æ ·ãä¼æ¥æ¾äºå¡æ¥å¿ä¸­ä»»ä½æäº¤ä½æ²¡æåºç¨å°æ°æ®æä»¶ä¸­çäºå¡ç¶ååºç¨ï¼å æ­¤ä¸ä¼ä¸¢å¤±ä»»ä½äºå¡ãè¿æ­£æ¯è¦å¼ºå¶ innodb æ°æ®æä»¶åæ¥å¿æä»¶å¨ä¸èµ·å¿«ç§çåå ã\n\nå¤å¶mysqléç½®ï¼åæ¶è§å¯mysqlå¯å¨æ¶çéè¯¯æ¥å¿ï¼tail -f /var/log/mysql/mysql.err\n\n\n# explain\n\nå¨æ¥è¯¢ä¸­æ¯ä¸ªè¡¨å¨è¾åºä¸­åªæä¸è¡ãå¦ææ¥è¯¢æ¯ä¸¤ä¸ªè¡¨çèæ¥ï¼é£ä¹è¾åºä¸­å°æä¸¤è¡ã\n\n * explain extended:\n   * çèµ·æ¥åæ­£å¸¸çexplainè¡ä¸ºä¸æ ·ï¼ä½æ¯å®ä¼åè¯æå¡å¨\'éåç¼è¯\'æ§è¡è®¡åä¸ºä¸ä¸ªselectè¯­å¥ãå¯ä»¥éè¿ç´§æ¥æ°åè¿è¡show warningsçå°è¿ä¸ªçæçè¯­å¥ãè¿ä¸ªè¯­å¥ç´æ¥æ¥èªæ§è¡è®¡åï¼èä¸æ¯åå§sqlè¯­å¥ã\n * explain partitions\n   * ä¼æ¾ç¤ºæ¥è¯¢å°è®¿é®çååºï¼å¦ææ¥è¯¢æ¯åºäºååºè¡¨çè¯ã\n\nè®¤ä¸ºå¢å explainæ¶mysqlä¸ä¼æ§è¡æ¥è¯¢ï¼è¿æ¯ä¸ä¸ªå¸¸è§çéè¯¯ãå®éä¸ï¼å¦ææ¥è¯¢å¨fromå­å¥ä¸­åæ¬å­æ¥è¯¢ï¼é£ä¹mysqlå®éä¸ä¼æ§è¡å­æ¥è¯¢ï¼å°å¶ç»ææ¾å¨ä¸ä¸ªä¸´æ¶è¡¨ä¸­ï¼ç¶åå®æå¤é¨æ¥è¯¢ä¼åãè¿æå³çï¼å¦æè¯­å¥ä¸­åå«å¼éè¾å¤§çå­æ¥è¯¢æèä½¿ç¨ä¸´æ¶è¡¨ç®æ³çè§å¾ï¼å®éä¸ä¼ç»æå¡å¨å¸¦æ¥å¤§éå·¥ä½ã\n\nmysql explain åªè½è§£é select æ¥è¯¢ï¼å¹¶ä¸ä¼å¯¹å­å¨ç¨åºè°ç¨ å insertãupdateãdeleteæå¶ä»è¯­å¥åè§£éãç¶èï¼å¯ä»¥éåæäºé select æ¥è¯¢ä»¥å©ç¨ expalinãä¸ºäºè¾¾å°è¿ä¸ªç®çï¼åªéè¦å°è¯¥è¯­å¥è½¬æ¢æä¸ä¸ªç­ä»·çè®¿é®ææç¸ååç selectã\n\n * id å\n   * æ è¯ select æå±çè¡ãå¦æå¨è¯­å¥ä¸­æ²¡æå­æ¥è¯¢æèèåï¼é£ä¹åªä¼æå¯ä¸ç selectãå¦åï¼åå±ç select è¯­å¥ä¸è¬ä¼é¡ºåºç¼å·ã\n * select_type å\n   * æ¾ç¤ºäºå¯¹åºè¡æ¯ç®åè¿æ¯å¤æ selectãsimple å¼æå³çæ¥è¯¢ä¸åå«å­æ¥è¯¢åunionï¼å¦ææ¥è¯¢æä»»ä½å¤æçå­é¨åï¼åæå¤å±é¨åæ è®°ä¸º primary, å¶ä»é¨åæ è®°å¦ä¸ï¼\n     * subquery\n       * åå«å¨ select åè¡¨ä¸­çå­æ¥è¯¢ä¸­ç select(æ¢å¥è¯è¯´ï¼ä¸å¨fromå­å¥ä¸­)æ è®°ä¸º subquery\n     * derived\n       * ç¨æ¥è¡¨ç¤ºåå«å¨ from å­å¥çå­æ¥è¯¢ä¸­ç selectï¼mysql ä¼éå½æ§è¡å¹¶å°ç»ææ¾å°ä¸ä¸ªä¸´æ¶è¡¨ä¸­ãæå¡å¨åé¨ç§°å¶"æ´¾çè¡¨"ï¼å ä¸ºè¯¥ä¸´æ¶è¡¨æ¯ä»å­æ¥è¯¢ä¸­æ´¾çæ¥ç\n     * union\n       * å¨ union ä¸­çç¬¬äºä¸ªåéåç select è¢«æ è®°ä¸º unionãç¬¬ä¸ä¸ª select è¢«æ è®°å°±å¥½åå®ä»¥é¨åå¤æ¥è¯¢æ¥æ§è¡ã\n     * union result\n       * ç¨æ¥ä» union çå¿åä¸´æ¶è¡¨æ£ç´¢ç»æç select è¢«æ è®°ä¸º union result\n     * dependent\n       * æå³ç select ä¾èµäºå¤å±æ¥è¯¢ä¸­åç°çæ°æ®\n     * uncacheable\n       * æå³ç select ä¸­çæäºç¹æ§é»æ­¢ç»æè¢«ç¼å­äºä¸ä¸ªitem_cache\n * table å\n   * æ¾ç¤ºäºå¯¹åºè¡æ­£å¨è®¿é®åªä¸ªè¡¨ã\n * type å\n   * è®¿é®ç±»åï¼æ¢è¨ä¹å°±æ¯ mysql å³å®å¦ä½æ¥æ¾è¡¨ä¸­çè¡\n     * all\n       * å¨è¡¨æ«ç \n     * index\n       * è·å¨è¡¨æ«æä¸æ ·ï¼åªæ¯ mysql æ«æè¡¨æ¶æç´¢å¼æ¬¡åºè¿è¡èä¸æ¯è¡ãä¸»è¦ä¼ç¹æ¯é¿åäºæåºï¼æå¤§çç¼ºç¹æ¯è¦æ¿ææç´¢å¼æ¬¡åºè¯»åæ´ä¸ªæ´ä¸ªè¡¨çå¼éãè¿éå¸¸æå³çè¥æ¯æéæºæ¬¡åºè®¿é®è¡ï¼å¼éå°ä¼éå¸¸å¤§ãå¦æå¨ extra åä¸­çå° "using index" è¯´æ mysql æ­£å¨ä½¿ç¨è¦çç´¢å¼ï¼å®åªæ«æç´¢å¼çæ°æ®ï¼èä¸æ¯æç´¢å¼æ¬¡åºçæ¯ä¸è¡ã\n     * range\n       * èå´æ«æå°±æ¯ä¸ä¸ªæéå¶çç´¢å¼æ«æï¼å®å¼å§äºç´¢å¼çæä¸ä¸ªç¹ï¼è¿åå¹éè¿ä¸ªå¼åçè¡ã\n     * ref\n       * ç´¢å¼è®¿é®ï¼å®è¿åææå¹éæä¸ªåä¸ªå¼çè¡ãæ­¤ç±»ç´¢å¼è®¿é®åªæå½ä½¿ç¨éå¯ä¸ç´¢å¼æèå¯ä¸ç´¢å¼çéå¯ä¸æ§åç¼æ¶æä¼åçãæå®å«å ref æ¯å ä¸ºç´¢å¼è¦è·æä¸ªåèå¼ç¸æ¯è¾ã\n     * eq_ref\n       * ç´¢å¼è®¿é®ï¼å®æå¤åªè¿åä¸æ¡ç¬¦åæ¡ä»¶çè®°å½ãè¿ç§è®¿é®æ¹æ³å¯ä»¥å¨ mysql ä½¿ç¨ä¸»é®æèå¯ä¸æ§ç´¢å¼æ¥æ¾æ¶çå°ã\n     * const, system\n       * å½ mysql è½å¯¹æ¥è¯¢çæé¨åè¿è¡ä¼åå¹¶å°å¶è½¬æ¢æä¸ä¸ªå¸¸éæ¶ï¼å®å°±ä¼ä½¿ç¨è¿äºè®¿é®ç±»åã\n     * null\n       * æå³ç mysql è½åä¼åé¶æ®µåè§£æ¥è¯¢è¯­å¥ï¼å¨æ§è¡é¶æ®µçè³ç¨ä¸çåè®¿é®è¡¨æèç´¢å¼ã\n * possible_keys å\n   * æ¾ç¤ºäºæ¥è¯¢å¯ä»¥ä½¿ç¨åªäºç´¢å¼\n * key å\n   * æ¾ç¤ºäº mysql å³å®éç¨åªä¸ªç´¢å¼æ¥ä¼åå¯¹è¯¥è¡¨çè®¿é®ã\n * key_len å\n   * æ¾ç¤ºäºå¨ç´¢å¼å­æ®µä¸­å¯è½çæå¤§é¿åº¦ï¼èä¸æ¯è¡¨ä¸­æ°æ®ä½¿ç¨çå®éå­èæ°ã\n * ref å\n   * æ¾ç¤ºäºä¹åçè¡¨å¨ key åè®°å½çç´¢å¼ä¸­æ¥æ¾å¼æä½¿ç¨çåæèå¸¸é\n * rows å\n   * mysqlä¼°è®¡çä¸ºäºæ¾å°æéçè¡èéè¦è¯»åçè¡æ°ãè¿ä¸ªæ°å­æ¯ååµå¾ªç¯å³èè®¡åéçå¾ªç¯æ°ç®ãä¹å°±æ¯è¯´å®ä¸æ¯ mysql è®¤ä¸ºå®æç»è¦ä»è¡¨éè¯»ååºæ¥çè¡æ°ï¼èæ¯ mysql ä¸ºäºæ¾å°ç¬¦åæ¥è¯¢çæ¯ä¸ç¹ä¸æ åçé£äºè¡èå¿é¡»è¯»åçè¡çå¹³åæ°ã\n * filtered å\n   * å¨ä½¿ç¨ explain extended æ¶åºç°ï¼æ¾ç¤ºçæ¯éå¯¹è¡¨éç¬¦åæä¸ªæ¡ä»¶(whereå­å¥æèæ¥æ¡ä»¶)çè®°å½æ°çç¾åæ¯æåçä¸ä¸ªæ²è§ä¼°ç®ã\n * extra å\n   * åå«çæ¯ä¸éåå¨å¶å®åæ¾ç¤ºçé¢å¤ä¿¡æ¯ãå¸¸è§çæéè¦çå¼å¦ä¸ï¼\n     * using index\n       * è¡¨ç¤º mysql å°ä½¿ç¨è¦çç´¢å¼ï¼ä»¥é¿åè®¿é®è¡¨\n     * using where\n       * æå³ç mysql æå¡å¨å°å¨å­å¨å¼ææ£ç´¢è¡ååè¿è¡è¿æ»¤\n     * using temporary\n       * æå³ç mysql å¨å¯¹æ¥è¯¢ç»ææåºæ¶ä¼ä½¿ç¨ä¸ä¸ªä¸´æ¶è¡¨\n     * using filesort\n       * æå³ç mysql ä¼å¯¹ç»æä½¿ç¨ä¸ä¸ªå¤é¨ç´¢å¼æåºï¼èä¸æ¯æç´¢å¼æ¬¡åºä»è¡¨éè¯»åè¡\n     * range checked for each record(index map:n)\n       * æå³çæ²¡æå¥½ç¨çç´¢å¼ï¼æ°çç´¢å¼å°å¨èæ¥çæ¯ä¸è¡ä¸éæ°ä¼°ç®\n\n\n# éçè°è¯\n\néç­å¾å¯è½åçå¨æå¡å¨çº§å«æå­å¨å¼æçº§å«ãä¸é¢æ¯mysqlæå¡å¨ä½¿ç¨çå ç§ç±»åçéï¼\n\n * è¡¨é\n   * è¡¨éå¯ä»¥æ¯æ¾å¼çä¹å¯ä»¥æ¯éå¼ç\n     * æ¾å¼ï¼ç¨ lock tables åå»º (å¯ä»¥ä½¿ç¨ show processlist è§å¯å°éç¶æ)\n     * éå¼ï¼æå¡å¨å¨éè¦æ¶èªå¨åå»ºåéæ¾ï¼å¹¶å°å®ä»¬ä¼ éç»å­å¨å¼æ\n   * æ¾åºè°ææé\n     * æä»¤ï¼mysqladmin debug\n * å¨å±é\n   * å¯ä»¥éè¿ flush tables with read lock æè®¾ç½® read_only=1 æ¥è·ååä¸ªå¨å±è¯»éã\n   \n   ä¸ä¸ªä¼è¯æ§è¡ï¼flush tables with read lock;\n   å¦ä¸ä¸ªä¼è¯å°è¯åéè¿ä¸ªè¡¨ï¼lock tables test write;\n   æ­¤æ¶ï¼å°±ä¼çå°ä¼è¯æèµ·ï¼éè¿ show processlist å¯ä»¥çå°æ¥è¯¢ç¶ææ¯ï¼waiting for release for readlockãè¿å°±è¯´ææ¥è¯¢æ­£å¨ç­å¾ä¸ä¸ªå¨å±è¯»éèä¸æ¯è¡¨çº§å«é\n   \n   \n   1\n   2\n   3\n   \n   * mysql ç®åæ²¡ææä¾æ¥åºè°ææå¨å±è¯»éçæ¹æ³\n * å½åé\n   * è¡¨éçä¸ç§ï¼æå¡å¨å¨éå½åæèå é¤ä¸ä¸ªè¡¨æ¶åå»º\n * å­ç¬¦é\n   * å¯ä»¥ç¨ get_lock() åå¶ç¸å³å½æ°å¨æå¡å¨çº§å«åéä½åéæ¾ä»»æä¸ä¸ªå­ç¬¦ä¸²\n\nå­å¨å¼æä¸­çé innodb å¨ show innodb status çè¾åºä¸­æ¾é²äºä¸äºéä¿¡æ¯ãå¦æäºå¡æ­£å¨ç­å¾æä¸ªéï¼è¿ä¸ªéä¼æ¾ç¤ºå¨ show innodb status è¾åºç transactions é¨åã\n\n',charsets:{cjk:!0}},{title:"mysql ä¸­çç´¢å¼",frontmatter:{title:"mysql ä¸­çç´¢å¼",date:"2020-04-21T00:00:00.000Z",lastmod:null,description:"å³äº mysql ä¸­çå¼æ ä»¥å ç´¢å¼ç±»åï¼ä»¥å¸®å©æ´å¥½çäºè§£ mysql",categories:["blog","database"],tags:[null],permalink:null},regularPath:"/blog/database/mysql_index.html",relativePath:"blog/database/mysql_index.md",key:"v-303c02c2",path:"/blog/database/mysql_index.html",headers:[{level:2,title:"B+Tree",slug:"b-tree",normalizedTitle:"b+tree",charIndex:321},{level:2,title:"èç°ç´¢å¼",slug:"èç°ç´¢å¼",normalizedTitle:"èç°ç´¢å¼",charIndex:32},{level:2,title:"éèç°ç´¢",slug:"éèç°ç´¢",normalizedTitle:"éèç°ç´¢",charIndex:50}],headersStr:"B+Tree èç°ç´¢å¼ éèç°ç´¢",content:"# mysql ä¸­çç´¢å¼ç±»å\n\nå¨ mysql ä¸­ï¼æä¸¤ç±»ç´¢å¼ï¼èç°ç´¢å¼(clustered) å éèç°ç´¢å¼(nonclustered)ãæ­£å¸¸æåµä¸ï¼InnoDB çä¸»é®ä½¿ç¨ èç°ç´¢å¼ï¼MyISAM ä½¿ç¨çæ¯ éèç°ç´¢å¼ãè¿ä¸ªå·®å¼ä¹ç»ä¸¤ä¸ªå¼æçæä¼ä½¿ç¨åºæ¯å¸¦æ¥äºä¸åï¼ä½¿ç¨æ¶æ³¨ææµè¯ãèå¯ã\n\nåè¯´ä¸ èç°ç´¢å¼ å éèç°ç´¢å¼ çå·®å¼ï¼\n\n * èç°ç´¢å¼\n   * ä¸»é®åè¡¨æ°æ®ä¸èµ·å­å¨ï¼ä¸»é®ç´¢å¼çå¶ç»ç¹å­å¨ä¸»é®å¼çåæ¶ä¹åå«äºè¡æ°æ®ãäºçº§ç´¢å¼çå¶ç»ç¹å­å¨è¡çä¸»é®å¼\n * éèç°ç´¢å¼\n   * ç´¢å¼åè¡¨æ°æ®åå¼å­å¨ï¼ææçèç¹é½æ¯ç´¢å¼ï¼å¶å­èç¹å­å¨çæ¯ ç´¢å¼ å ç´¢å¼å¯¹åºçæ°æ®è®°å½å°åãä¸»é®ç´¢å¼åäºçº§ç´¢å¼å¨å­å¨ä¸æ²¡æä»»ä½åºå«ã\n\n\n# B+Tree\n\nè¿éï¼æä»¬éè¦è¯´ä¸ä¸ï¼å¸¸ç¨çç´¢å¼ç»æ B+ tree,\n\nä»å¾ä¸­ä¹å¯ä»¥çå°ï¼B+æ ä¸Bæ çä¸åå¨äºï¼\n\n 1. æææ°æ®é½å­å¨å¨å¶å­èç¹ï¼éå¶å­èç¹ä¸å­å¨çæ­£çdata\n 2. ä¸ºææå¶å­èç¹å¢å äºä¸ä¸ªé¾æé\n\n\n# èç°ç´¢å¼\n\næ ¹æ®ä¸è¿°ä¿¡æ¯ï¼æä»¬å¯ä»¥æ³è±¡ï¼å¯¹äºèç°ç´¢å¼æ¥è¯´:\n\n 1. æå¥éåº¦ä¸¥éä¾èµäºæå¥é¡ºåºï¼æç§ä¸»é®çé¡ºåºæå¥æ¯æå¿«çæ¹å¼ï¼å¦åå°ä¼åºç°é¡µåè£ï¼ä¸¥éå½±åæ§è½ã\n\nåæ¶, ç±äºä¸»é®åçåæ´çè¯, ç´¢å¼ç»æéè¦åå¹³è¡¡ãä»¥åç¸å³æ°æ®çç§»å¨, è¿ä¸ªä»£ä»·ç¸å¯¹è¾å¤§, æä»¥ä¸è¬è®¾ç½®ä¸»é®ä¸ºä¸å¯æ´æ°ç.\n\nå æ­¤ï¼å¯¹äºInnoDBè¡¨ï¼æä»¬ä¸è¬é½ä¼å®ä¹ä¸ä¸ªèªå¢çIDåä¸ºä¸»é®ã\n\né¡µåè£æ¯æï¼å½è¡çä¸»é®å¼è¦æ±å¿é¡»å°è¿ä¸è¡æå¥å°æä¸ªå·²æ»¡çé¡µä¸­æ¶ï¼å­å¨å¼æä¼å°è¯¥é¡µåè£æä¸¤ä¸ªé¡µé¢æ¥å®¹çº³è¯¥è¡ï¼è¿å°±æ¯ä¸æ¬¡åè£æä½ãé¡µåè£ä¼å¯¼è´è¡¨å ç¨æ´å¤çç£çç©ºé´ã\n\n 2. äºçº§ç´¢å¼è®¿é®éè¦ä¸¤æ¬¡ç´¢å¼æ¥æ¾ï¼ç¬¬ä¸æ¬¡æ¾å°ä¸»é®å¼ï¼ç¬¬äºæ¬¡æ ¹æ®ä¸»é®å¼æ¾å°è¡æ°æ®ãèéèç°ç´¢å¼ï¼ä¸»é®ç´¢å¼åéä¸»é®ç´¢å¼ï¼é½å¯ä»¥ç´æ¥å®ä½æ°æ®çå·ä½ä½ç½®ï¼ç¶åè¿è¡è®¿é®å³å¯ã\n 3. å½éè¿èç°ç´¢å¼æ¥æ¾ç®æ æ°æ®æ¶çè®ºä¸æ¯éèç°ç´¢å¼è¦å¿«ï¼å ä¸ºéèç°ç´¢å¼å®ä½å°å¯¹åºä¸»é®æ¶è¿è¦å¤ä¸æ¬¡ç®æ è®°å½å¯»å,å³å¤ä¸æ¬¡I/Oã\n 4. å½éè¦ååºä¸å®èå´åçæ°æ®æ¶ï¼ç¨èç°ç´¢å¼è¦æ¯ç¨éèç°ç´¢å¼å¥½\n\nå¯¹äºèç°ç´¢å¼çå­å¨å¼æï¼å ä¸ºæ°æ®æ¯æ ¹æ®ä¸»é®é¡ºåºè¿ç»­å­å¨çï¼æ°æ®çç©çå­æ¾é¡ºåºä¸ç´¢å¼é¡ºåºæ¯ä¸è´çï¼æä»¥åªè¦ç´¢å¼æ¯ç¸é»çï¼é£ä¹å¯¹åºçæ°æ®ä¸å®ä¹æ¯ç¸é»å°å­æ¾å¨ç£çä¸çï¼ç´¢å¼ç»æç¸å¯¹ç´§åï¼ç£çç¢çå°ï¼æçä¹é«ãå¯ä»¥å¾æ¹ä¾¿çååºä¸å®èå´åçæ°æ®ã\n\nå¯¹äºèç°ç´¢å¼ä¹æä¸äºä¸è¶³ä¹å¤ï¼å¦ï¼\n\n 1. èç°ç´¢å¼å¯è½å¯¼è´å¨è¡¨æ«æåæ¢ï¼å°¤å¶æ¯è¡æ¯è¾ç¨çï¼æèç±äºé¡µåè£å¯¼è´æ°æ®å­å¨ä¸è¿ç»­çæ¶åã\n 2. é¡ºåºä¸»é®å¨é«å¹¶åå·¥ä½è´è½½ä¸ï¼å¨InnoDBä¸­æä¸»é®é¡ºåºæå¥å¯è½ä¼é æææ¾çäºç¨ã\n\nä¸»é®çä¸çä¼æä¸ºâç­ç¹âãå ä¸ºææçæå¥é½åçå¨è¿éï¼æä»¥å¹¶åæå¥å¯è½å¯¼è´é´ééç«äºã\n\nå¦ä¸ä¸ªç­ç¹å¯è½æ¯auto_incrementéæºå¶ï¼å¦æéå°è¿ä¸ªé®é¢ï¼åå¯è½éè¦èèéæ°è®¾è®¡è¡¨æèåºç¨ï¼æ¯å¦åºç¨å±é¢çæåè°éå¢çä¸»é®IDï¼æè¡¨ä¸ä½¿ç¨auto_incrementæºå¶ï¼æèæ´æ¹innodb_autonc_lock_modeéç½®ã\n\n\n# éèç°ç´¢\n\nå¯¹äºéèç°ç´¢å¼èè¨ï¼\n\n 1. äºçº§ç´¢å¼å¯è½æ¯æ³è±¡çè¦æ´å¤§ï¼å ä¸ºå¨äºç»ç´¢å¼çå¶å­èç¹åå«äºå¼ç¨è¡çä¸»é®åã\n 2. ç±äºæå¥çæ°æ®ï¼æ¯é¡ºåºåå¥çï¼ä¸ç´¢å¼é¡ºåºæ å³ï¼æä»¥å¯ä»¥ä¸å¿ç¨åè°éå¢IDã\n 3. ä½æ¯ MyISAM çéæ¯è¡¨çº§ï¼åå¥æ°æ®ï¼ä¼ä½¿ç¨å¨å±(ç¬å )è¡¨éï¼è¯»åæ°æ®ä¹ä¼ä½¿ç¨å¨å±(éç¬å )è¡¨éãè Innodb ä½¿ç¨è¡çº§éï¼åæ¶æ MVCC å æè¯»æ§è½ã",normalizedContent:"# mysql ä¸­çç´¢å¼ç±»å\n\nå¨ mysql ä¸­ï¼æä¸¤ç±»ç´¢å¼ï¼èç°ç´¢å¼(clustered) å éèç°ç´¢å¼(nonclustered)ãæ­£å¸¸æåµä¸ï¼innodb çä¸»é®ä½¿ç¨ èç°ç´¢å¼ï¼myisam ä½¿ç¨çæ¯ éèç°ç´¢å¼ãè¿ä¸ªå·®å¼ä¹ç»ä¸¤ä¸ªå¼æçæä¼ä½¿ç¨åºæ¯å¸¦æ¥äºä¸åï¼ä½¿ç¨æ¶æ³¨ææµè¯ãèå¯ã\n\nåè¯´ä¸ èç°ç´¢å¼ å éèç°ç´¢å¼ çå·®å¼ï¼\n\n * èç°ç´¢å¼\n   * ä¸»é®åè¡¨æ°æ®ä¸èµ·å­å¨ï¼ä¸»é®ç´¢å¼çå¶ç»ç¹å­å¨ä¸»é®å¼çåæ¶ä¹åå«äºè¡æ°æ®ãäºçº§ç´¢å¼çå¶ç»ç¹å­å¨è¡çä¸»é®å¼\n * éèç°ç´¢å¼\n   * ç´¢å¼åè¡¨æ°æ®åå¼å­å¨ï¼ææçèç¹é½æ¯ç´¢å¼ï¼å¶å­èç¹å­å¨çæ¯ ç´¢å¼ å ç´¢å¼å¯¹åºçæ°æ®è®°å½å°åãä¸»é®ç´¢å¼åäºçº§ç´¢å¼å¨å­å¨ä¸æ²¡æä»»ä½åºå«ã\n\n\n# b+tree\n\nè¿éï¼æä»¬éè¦è¯´ä¸ä¸ï¼å¸¸ç¨çç´¢å¼ç»æ b+ tree,\n\nä»å¾ä¸­ä¹å¯ä»¥çå°ï¼b+æ ä¸bæ çä¸åå¨äºï¼\n\n 1. æææ°æ®é½å­å¨å¨å¶å­èç¹ï¼éå¶å­èç¹ä¸å­å¨çæ­£çdata\n 2. ä¸ºææå¶å­èç¹å¢å äºä¸ä¸ªé¾æé\n\n\n# èç°ç´¢å¼\n\næ ¹æ®ä¸è¿°ä¿¡æ¯ï¼æä»¬å¯ä»¥æ³è±¡ï¼å¯¹äºèç°ç´¢å¼æ¥è¯´:\n\n 1. æå¥éåº¦ä¸¥éä¾èµäºæå¥é¡ºåºï¼æç§ä¸»é®çé¡ºåºæå¥æ¯æå¿«çæ¹å¼ï¼å¦åå°ä¼åºç°é¡µåè£ï¼ä¸¥éå½±åæ§è½ã\n\nåæ¶, ç±äºä¸»é®åçåæ´çè¯, ç´¢å¼ç»æéè¦åå¹³è¡¡ãä»¥åç¸å³æ°æ®çç§»å¨, è¿ä¸ªä»£ä»·ç¸å¯¹è¾å¤§, æä»¥ä¸è¬è®¾ç½®ä¸»é®ä¸ºä¸å¯æ´æ°ç.\n\nå æ­¤ï¼å¯¹äºinnodbè¡¨ï¼æä»¬ä¸è¬é½ä¼å®ä¹ä¸ä¸ªèªå¢çidåä¸ºä¸»é®ã\n\né¡µåè£æ¯æï¼å½è¡çä¸»é®å¼è¦æ±å¿é¡»å°è¿ä¸è¡æå¥å°æä¸ªå·²æ»¡çé¡µä¸­æ¶ï¼å­å¨å¼æä¼å°è¯¥é¡µåè£æä¸¤ä¸ªé¡µé¢æ¥å®¹çº³è¯¥è¡ï¼è¿å°±æ¯ä¸æ¬¡åè£æä½ãé¡µåè£ä¼å¯¼è´è¡¨å ç¨æ´å¤çç£çç©ºé´ã\n\n 2. äºçº§ç´¢å¼è®¿é®éè¦ä¸¤æ¬¡ç´¢å¼æ¥æ¾ï¼ç¬¬ä¸æ¬¡æ¾å°ä¸»é®å¼ï¼ç¬¬äºæ¬¡æ ¹æ®ä¸»é®å¼æ¾å°è¡æ°æ®ãèéèç°ç´¢å¼ï¼ä¸»é®ç´¢å¼åéä¸»é®ç´¢å¼ï¼é½å¯ä»¥ç´æ¥å®ä½æ°æ®çå·ä½ä½ç½®ï¼ç¶åè¿è¡è®¿é®å³å¯ã\n 3. å½éè¿èç°ç´¢å¼æ¥æ¾ç®æ æ°æ®æ¶çè®ºä¸æ¯éèç°ç´¢å¼è¦å¿«ï¼å ä¸ºéèç°ç´¢å¼å®ä½å°å¯¹åºä¸»é®æ¶è¿è¦å¤ä¸æ¬¡ç®æ è®°å½å¯»å,å³å¤ä¸æ¬¡i/oã\n 4. å½éè¦ååºä¸å®èå´åçæ°æ®æ¶ï¼ç¨èç°ç´¢å¼è¦æ¯ç¨éèç°ç´¢å¼å¥½\n\nå¯¹äºèç°ç´¢å¼çå­å¨å¼æï¼å ä¸ºæ°æ®æ¯æ ¹æ®ä¸»é®é¡ºåºè¿ç»­å­å¨çï¼æ°æ®çç©çå­æ¾é¡ºåºä¸ç´¢å¼é¡ºåºæ¯ä¸è´çï¼æä»¥åªè¦ç´¢å¼æ¯ç¸é»çï¼é£ä¹å¯¹åºçæ°æ®ä¸å®ä¹æ¯ç¸é»å°å­æ¾å¨ç£çä¸çï¼ç´¢å¼ç»æç¸å¯¹ç´§åï¼ç£çç¢çå°ï¼æçä¹é«ãå¯ä»¥å¾æ¹ä¾¿çååºä¸å®èå´åçæ°æ®ã\n\nå¯¹äºèç°ç´¢å¼ä¹æä¸äºä¸è¶³ä¹å¤ï¼å¦ï¼\n\n 1. èç°ç´¢å¼å¯è½å¯¼è´å¨è¡¨æ«æåæ¢ï¼å°¤å¶æ¯è¡æ¯è¾ç¨çï¼æèç±äºé¡µåè£å¯¼è´æ°æ®å­å¨ä¸è¿ç»­çæ¶åã\n 2. é¡ºåºä¸»é®å¨é«å¹¶åå·¥ä½è´è½½ä¸ï¼å¨innodbä¸­æä¸»é®é¡ºåºæå¥å¯è½ä¼é æææ¾çäºç¨ã\n\nä¸»é®çä¸çä¼æä¸ºâç­ç¹âãå ä¸ºææçæå¥é½åçå¨è¿éï¼æä»¥å¹¶åæå¥å¯è½å¯¼è´é´ééç«äºã\n\nå¦ä¸ä¸ªç­ç¹å¯è½æ¯auto_incrementéæºå¶ï¼å¦æéå°è¿ä¸ªé®é¢ï¼åå¯è½éè¦èèéæ°è®¾è®¡è¡¨æèåºç¨ï¼æ¯å¦åºç¨å±é¢çæåè°éå¢çä¸»é®idï¼æè¡¨ä¸ä½¿ç¨auto_incrementæºå¶ï¼æèæ´æ¹innodb_autonc_lock_modeéç½®ã\n\n\n# éèç°ç´¢\n\nå¯¹äºéèç°ç´¢å¼èè¨ï¼\n\n 1. äºçº§ç´¢å¼å¯è½æ¯æ³è±¡çè¦æ´å¤§ï¼å ä¸ºå¨äºç»ç´¢å¼çå¶å­èç¹åå«äºå¼ç¨è¡çä¸»é®åã\n 2. ç±äºæå¥çæ°æ®ï¼æ¯é¡ºåºåå¥çï¼ä¸ç´¢å¼é¡ºåºæ å³ï¼æä»¥å¯ä»¥ä¸å¿ç¨åè°éå¢idã\n 3. ä½æ¯ myisam çéæ¯è¡¨çº§ï¼åå¥æ°æ®ï¼ä¼ä½¿ç¨å¨å±(ç¬å )è¡¨éï¼è¯»åæ°æ®ä¹ä¼ä½¿ç¨å¨å±(éç¬å )è¡¨éãè innodb ä½¿ç¨è¡çº§éï¼åæ¶æ mvcc å æè¯»æ§è½ã",charsets:{cjk:!0}},{title:"docker ä¸­è¿è¡ mysql",frontmatter:{title:"docker ä¸­è¿è¡ mysql",date:"2020-04-21T00:00:00.000Z",description:"å¨ docker ä¸­è¿è¡ mysql éå°çé®é¢ä»¥åæ­¥éª¤",categories:["database"],tags:["databaseãmysqlãdocker"],permalink:null},regularPath:"/blog/database/mysql_runin_docker.html",relativePath:"blog/database/mysql_runin_docker.md",key:"v-e117a336",path:"/blog/database/mysql_runin_docker.html",headers:[{level:2,title:"è¿è¡:",slug:"è¿è¡",normalizedTitle:"è¿è¡:",charIndex:23},{level:3,title:"dump & restore",slug:"dump-restore",normalizedTitle:"dump &amp; restore",charIndex:null},{level:2,title:"é®é¢",slug:"é®é¢",normalizedTitle:"é®é¢",charIndex:475}],headersStr:"è¿è¡: dump & restore é®é¢",content:"# docker ä¸­è¿è¡ mysql\n\n\n# è¿è¡:\n\ndocker run --name mysql -v /data/mysql:/var/lib/mysql -p 33061:3306 -e MYSQL_ROOT_PASSWORD=xxx -d mysql:5.7 --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci\n\n\n# dump & restore\n\n * dump:\n   * docker exec some-mysql sh -c 'exec mysqldump --all-databases -uroot -p\"$MYSQL_ROOT_PASSWORD\"' > ~/all-databases.sql\n * restore:\n   * docker exec -i some-mysql sh -c 'exec mysql -uroot -p\"$MYSQL_ROOT_PASSWORD\"' < ~/all-databases.sql\n\n\n# é®é¢\n\n * host æ æ³è¿æ¥ docker ä¸­çmysql ï¼\"Unable to load plugin 'caching_sha2_password'\"\n   \n   è¿å¥å®¹å¨ï¼\n       docker exec -it CONTAINER_ID bash\n   ç»å½mysqlï¼\n       mysql --user=root --password\n   ä¿®æ¹å¯ç å å¯æ¹å¼ï¼\n       ALTER USER 'username' IDENTIFIED WITH mysql_native_password BY 'password';\n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   \n * ç¨æ·ä»¥åææ\n   \n       create user 'miniuser'@'%' identified by '0sgckpIvpH5s3vmb';\n       grant all privileges on miniprogram.* to miniuser@'%';\n       flush privileges; \n       DROP USER 'miniprogram'@'%';\n   \n   \n   1\n   2\n   3\n   4\n   ",normalizedContent:"# docker ä¸­è¿è¡ mysql\n\n\n# è¿è¡:\n\ndocker run --name mysql -v /data/mysql:/var/lib/mysql -p 33061:3306 -e mysql_root_password=xxx -d mysql:5.7 --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci\n\n\n# dump & restore\n\n * dump:\n   * docker exec some-mysql sh -c 'exec mysqldump --all-databases -uroot -p\"$mysql_root_password\"' > ~/all-databases.sql\n * restore:\n   * docker exec -i some-mysql sh -c 'exec mysql -uroot -p\"$mysql_root_password\"' < ~/all-databases.sql\n\n\n# é®é¢\n\n * host æ æ³è¿æ¥ docker ä¸­çmysql ï¼\"unable to load plugin 'caching_sha2_password'\"\n   \n   è¿å¥å®¹å¨ï¼\n       docker exec -it container_id bash\n   ç»å½mysqlï¼\n       mysql --user=root --password\n   ä¿®æ¹å¯ç å å¯æ¹å¼ï¼\n       alter user 'username' identified with mysql_native_password by 'password';\n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   \n * ç¨æ·ä»¥åææ\n   \n       create user 'miniuser'@'%' identified by '0sgckpivph5s3vmb';\n       grant all privileges on miniprogram.* to miniuser@'%';\n       flush privileges; \n       drop user 'miniprogram'@'%';\n   \n   \n   1\n   2\n   3\n   4\n   ",charsets:{cjk:!0}},{title:"æ¹éåå¥é æmysqlè®¿é®æ¢é®é¢",frontmatter:{title:"æ¹éåå¥é æmysqlè®¿é®æ¢é®é¢",date:"2020-04-14T00:00:00.000Z",description:"æ¹éåå¥é æmysqlè®¿é®æ¢é®é¢",categories:["blog","database"],tags:[null],permalink:null},regularPath:"/blog/database/problem_with_using_myisam.html",relativePath:"blog/database/problem_with_using_myisam.md",key:"v-46965d82",path:"/blog/database/problem_with_using_myisam.html",headers:[{level:2,title:"ç°è±¡",slug:"ç°è±¡",normalizedTitle:"ç°è±¡",charIndex:23},{level:2,title:"è·è¿",slug:"è·è¿",normalizedTitle:"è·è¿",charIndex:72},{level:2,title:"æ»ç»",slug:"æ»ç»",normalizedTitle:"æ»ç»",charIndex:1247},{level:2,title:"MYSQL ç¥è¯",slug:"mysql-ç¥è¯",normalizedTitle:"mysql ç¥è¯",charIndex:1654}],headersStr:"ç°è±¡ è·è¿ æ»ç» MYSQL ç¥è¯",content:"# æ¹éåå¥é æmysqlè®¿é®æ¢é®é¢\n\n\n# ç°è±¡\n\n2020.03çæå¤©ä¸åï¼çªç¶æ¶å°åäºåé¦ï¼äº§åçæä¸ªé¡µé¢åºç°'æå¡æ ååº'é®é¢\n\n\n# è·è¿\n\n * ç±äºæå¡å¨æ¯åçº¿è·¯è®¿é®ï¼å¯ä»¥éè¿ ping æä»¤ï¼æ¾å°å·ä½çæå¡å¨ipï¼ç¶åæ¬å°ç»å®ååï¼è¿è¡æ¨¡æè¯·æ±ï¼ç¡®è®¤é®é¢å¹¶æ¥çæ¥å¿ã\n * åç°æ¯mysqlæ°æ®åºååºæ¢ï¼é ææ¥å£ååºéåº¦ä¸é 20+ å\n * è¿è¡ä»¥ä¸æä½ï¼\n   1. éè¿ä»¥ä¸æä»¤æå¼ãè®¾ç½®å¹¶æ¥çæ¢æ¥è¯¢æ¥å¿\n      \n      // æ¥ç\n      show variables like 'slow_query%';\n      show variables like 'long_query_time';\n      // è®¾ç½®\n      set global [variablesName]=[Value]\n      // æ¥å¿è¾åºæ¹å¼ï¼TABLE,FILE\n      show variables like '%log_output%'\n      \n      \n      1\n      2\n      3\n      4\n      5\n      6\n      7\n      \n   2. æ¥çmysqlçè¿æ¥æ°ç­ç¶æ\n      \n      // å¦ææ¯rootå¸å·ï¼ä½ è½çå°ææç¨æ·çå½åè¿æ¥ãå¦ææ¯å¶å®æ®éå¸å·ï¼åªè½çå°èªå·±å ç¨çè¿æ¥ã\n      show full processlist;\n      // ç¶æ\n      show status [like '%variables%'];\n      // åæ°\n      show variables [like '%variables%']\n      \n      \n      1\n      2\n      3\n      4\n      5\n      6\n      \n   3. æ¥çmysqlä½¿ç¨çåå­ãcpuãç£çãç½ç»ç¶åµ\n * åæ\n   1. æ°æ®åºè¿æ¥æ°å·²æ»¡(max=1000)\n   2. ç£çãç½ç»ãcpuãåå­ é½ä¸é«ï¼ç¹å«æ¯åå­ä½çå¾å¥æªï¼åªå æ»åå­ç 8% å·¦å³ï¼ä¸è½ææå©ç¨æºå¨æ§è½\n   3. æ¢æ¥è¯¢æ¥å¿ï¼åç°åçæ¢æ¥è¯¢çè¯­å¥ï¼é½æ¯ä½¿ç¨å°äºç´¢å¼ãå¹¶ä¸ç´¢å¼ææçæ¥è¯¢è¯­å¥\n * çæµæ¯ï¼æå¡å¨éç½® + ç¨æ·æµéæ¿å¢é æ\n   1. çååæµéï¼æ²¡æå¼å¸¸\n   2. mysqléç½®æå¼å¸¸ï¼key_buffer_size è®¾ç½®çå¾å°ãè°æ´åï¼é®é¢æ²¡æå¥½è½¬\n * æ¥çéç¶åµ\n   1. ç±äºç¸å³è¡¨ä½¿ç¨çæ¯MyISAMå¼æï¼æä»¥éè¿ show status like 'table%' æ¥çéç¶æï¼åç°ï¼Table_locks_immediate / Table_locks_waited ~= 2\n   2. å ä¸ºè¿ä¸ªåºåªè½éè¿ä¸»ä»åæ­¥è¿è¡ä¿®æ¹ï¼è¿æ¶æ³èµ·ç¸å³çè¿è¥ç»æè¿å¨è¿è¡èªå¨å¥åºæä½ã\n   3. åæ­¢åï¼é®é¢ç¼è§£\n\n\n# æ»ç»\n\n * é®é¢å¤ç\n   1. è¿ä¸ªæ°æ®åºéç¨ä¸»ä»ç»æ(ä¸ä¸»å¤ä»)ï¼å¼æ­¥åæ­¥ï¼è½çç­ç¥ä¸ºï¼sync_binlog=0\n   2. èªå¨å¥åºï¼æè¿æå¼å§ï¼éç¨ while do { åå¥æ°æ®(æ è®°æ æ),æ ¡éªæä»¶md5,ä¿®æ¹æ è®°(ææ) }\n      * é®é¢ï¼ç¸å³äººåè¯´ï¼åä¸¤å¤©åæ ·çæä½æ²¡æåºé®é¢å\n      * ç¡®è®¤ï¼å½å¤©å ä¸äºæä»¶md5æ ¡éª\n      * çæµï¼æä»¶æ ¡éªæä½ï¼é æmysqlæ°æ®è¢«åéææ´å¤æ¬¡æ°å·æ°å°ç£çå¹¶è§¦åä¸»ä»åæ­¥å¨ä½ï¼é ææ´å å¯éçMyISAMè¡¨éãç±äºï¼åéä¼åçº§é«ï¼é æå®¢æ·ç«¯è¯·æ±è¿ä¹é¥¿æ­»ï¼è¿èé æè¿æ¥æ°ææ»¡ã\n   3. å¤ç\n      * èèå°è¿æ¯ä¸ªå¤å¹´è½»çé¡¹ç®ï¼è¿æ¬¡éè¦åæ¢ MyISAM å° innodb\n      * è°æ´Mysqlç¸å³åæ°ï¼å°½å¯è½çåæ¥æºå¨æ§è½\n\n----------------------------------------\n\n\n# MYSQL ç¥è¯\n\n# 1. ç¸å³å½ä»¤ãåæ°\n\n * è½çç­ç¥: innodb_flush_log_at_trx_commit å sync_binlog\n * æ¥çä¸»ä»åæ­¥ç¶æï¼\n   \n   show slave status\n   show master status\n   \n   \n   1\n   2\n   \n\n# 2. mysql ç sql_mode:\n\n * æ¥çå½åsql-mode\n   \n   SELECT @@GLOBAL.sql_mode;\n   SELECT @@SESSION.sql_mode;\n   \n   \n   1\n   2\n   \n * è®¾ç½®å½åsql-mode\n   \n   // å½ä»¤\n   SET GLOBAL sql_mode = 'modes...';\n   SET SESSION sql_mode = 'modes...';\n   // my.cnfä¸­éç½®sql-mode\n   [mysqld]\n   #set the SQL mode to strict\n   #sql-mode=\"modes...\" \n   sql-mode = \"STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION\"\n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   7\n   8\n   \n\n# 3. æ¥çå¼æçéå®ç¶æ\n\n * Myisam : show status like 'table%'\n   * éè¿æ£æ¥ table_locks_waited å table_locks_immediate ç¶æåéåæç³»ç»ä¸è¡¨éäºå¤ºæåµ\n   * è¡¨çº§éæ¯MyISAMä¸éåå«æå¤§éæ´æ°æä½åæ¥è¯¢æä½åºç¨çåå ã\n   \n   â¢Table_locks_immediate \n       The number of times that a request for a table lock could be granted immediately. \n   â¢Table_locks_waited \n       The number of times that a request for a table lock could not be granted immediately and a wait was needed. If this is high and you have performance problems, you should first optimize your queries, and then either split your table or tables or use replication. \n   \n   \n   1\n   2\n   3\n   4\n   \n * Innodb : show status like 'innodb_row_lock%'\n   * æ¥çInnoDBè¡éäºç¨æåµ\n\nå¨å­¦ä¹ éçè¿ç¨ä¸­ï¼å¸¸ç¨ï¼set autocommit = 0; æ¥å³é­èªå¨æäº¤ï¼è¿èè§å¯çç¶æã\n\n\n1\n\n\n# 4. MyISAM & InnoDB\n\nå¼æ       äºå¡    éæºå¶   å¤é®    å¹¶åæ§è½   ç¼å­      å¤ä»½                        ç³»ç»è¡¨æ¯å¦ä½¿ç¨   å¼å¥GTIDåçå½±å\nMyISAM   ä¸æ¯æ   è¡¨é    ä¸æ¯æ   ä½      ç´¢å¼      ä¸ºäºä¿ææ°æ®ä¸è´æ§ï¼å¿é¡»å¯¹è¡¨å è¯»éï¼å½±åä¸å¡å   ä½¿ç¨        æé®é¢(ä¸ä¸ªäºå¡ä¸­åæ¶ä½¿ç¨äºå¡å¼æåéäºå¡å¼æ)\nInnoDB   æ¯æ    è¡é    æ¯æ    é«      ç´¢å¼åæ°æ®   ä¸éè¦éè¡¨ï¼ä¸å½±åä¸å¡è¯»å             ä½¿ç¨        æ é®é¢\n\nä»MySQL5.5å¼å§ï¼é»è®¤å­å¨å¼æåä¸ºäºInnoDBï¼å¨æ­¤ä¹åé»è®¤å¼æä½¿ç¨çæ¯MyISAM.\nä»MySQL8.0å¼å§ï¼ç³»ç»è¡¨ä¹å°éç¨InnoDBï¼å®å¨æ¾å¼MyISAMã\n\n\n1\n2\n\n\n * MyISAM\n   \n   * MyISAMé¢ä¸´çä¸»è¦é®é¢\n     * é®é¢1ï¼ä¸»ä»å¤å¶ä¸­æ­ãä¸»ä»æ°æ®ä¸ä¸è´ ï¼ç±äºMyISAMä¸æ¯æäºå¡ï¼å¯¼è´ç¹å«å®¹æåºç°ä¸»å¤å¤å¶å¼å¸¸ãä¸»å¤æ°æ®ä¸ä¸è´çæåµ\n     * é®é¢2: è¿è¡å¤ä»½æ¶ï¼æ è®ºæ¯éç¨mysqldumpè¿è¡çé»è¾å¤ä»½è¿æ¯ä½¿ç¨extrabackupè¿è¡çç©çå¤ä»½ï¼ä¸ºäºä¿è¯MyISAMè¡¨çæ°æ®ä¸è´æ§ï¼å¿é¡»å¯¹è¡¨è¿è¡å éï¼å¯¼è´é»å¡åå¥ãè¿å¯¹äºéå»ºä¸»ä»æ¯ç»å¸¸åºç°çé®é¢ã\n   * MyISAMè¡¨çº§é:\n     * æ¨¡å¼ï¼è¡¨å±äº«è¯»é(Table Read Lock)ãè¡¨ç¬å åé(Table Write Lock)\n     * é»è®¤æåµä¸ï¼åéæ¯è¯»éå·ææ´é«çä¼åçº§ï¼è¿æ­£æ¯ MyISAM è¡¨ä¸å¤ªéåäºæå¤§éæ´æ°æä½åæ¥è¯¢æä½åºç¨çåå ãå ä¸ºï¼å¤§éçæ´æ°æä½ä¼é ææ¥è¯¢æä½å¾é¾è·å¾è¯»éï¼ä»èå¯è½æ°¸è¿é»å¡ã\n     * å¨èªå¨å éçæåµä¸ï¼MyISAM æ»æ¯ä¸æ¬¡è·å¾ SQL è¯­å¥æéè¦çå¨é¨éï¼æä»¥ MyISAM è¡¨ä¸ä¼åºç°æ­»éã\n\n * InnoDB\n   \n   * ä¸ MyISAM æå¤§ä¸åæä¸¤ç¹ï¼\n     1. æ¯æäºå¡\n     2. éç¨è¡çº§é\n\n * ç´¢å¼\n   \n   * MyISAM\n     * MyISAMç´¢å¼å®ç°ï¼MyISAMç´¢å¼æä»¶åæ°æ®æä»¶æ¯åç¦»çï¼ç´¢å¼æä»¶ä»ä¿å­æ°æ®è®°å½çå°å.\n     * å¨MyISAMä¸­ï¼ä¸»ç´¢å¼åè¾å©ç´¢å¼è¾å©ç´¢å¼(Secondary Index, å³éä¸»é®ç´¢å¼)å¨ç»æä¸æ²¡æä»»ä½åºå«ï¼åªæ¯ä¸»ç´¢å¼è¦æ±keyæ¯å¯ä¸çï¼èè¾å©ç´¢å¼çkeyå¯ä»¥éå¤ã\n   * InnoDB\n     * InnoDB è¡¨æ¯åºäºèç°ç´¢å¼å»ºç«çãå æ­¤InnoDB çç´¢å¼è½æä¾ä¸ç§éå¸¸å¿«éçä¸»é®æ¥æ¾æ§è½ãInnoDB ä¸ä¼åç¼©ç´¢å¼ã\n       * èéç´¢å¼è¿ç§å®ç°æ¹å¼ä½¿å¾æä¸»é®çæç´¢ååé«æï¼ä½æ¯è¾å©ç´¢å¼æç´¢éè¦æ£ç´¢ä¸¤éç´¢å¼ï¼é¦åæ£ç´¢è¾å©ç´¢å¼è·å¾ä¸»é®ï¼ç¶åç¨ä¸»é®å°ä¸»ç´¢å¼ä¸­æ£ç´¢è·å¾è®°å½ã\n       * å ä¸ºææè¾å©ç´¢å¼é½å¼ç¨ä¸»ç´¢å¼(å³ï¼è¾å©ç´¢å¼ä¹ä¼åå«ä¸»é®å)ï¼å¦æä¸»é®å®ä¹çæ¯è¾å¤§ï¼å¶ä»ç´¢å¼ä¹å°å¾å¤§ï¼æä»¥ä¸å»ºè®®ä½¿ç¨è¿é¿çå­æ®µä½ä¸ºä¸»é®ãå¦å¤ï¼å¦ææ³å¨è¡¨ä¸å®ä¹å¾å¤ç´¢å¼ï¼åäºåå°½éæä¸»é®å®ä¹å¾å°ä¸äºã\n     * è¡é\n       * InnoDBçè¡éæ¯éå¯¹ç´¢å¼å çéï¼ä¸æ¯éå¯¹è®°å½å çéã\n         * è¿ä¸ç¹MySQLä¸Oracleä¸åï¼å®ä»¬æ¯éè¿å¨æ°æ®åä¸­ï¼å¯¹ç¸åºæ°æ®è¡å éæ¥å®ç°ç\n       * InnoDBè¿ç§è¡éå®ç°ç¹ç¹æå³çï¼åªæéè¿ç´¢å¼æ¡ä»¶æ£ç´¢æ°æ®ï¼innoDBæä½¿ç¨è¡çº§éï¼å¦åInnoDBå°ä½¿ç¨è¡¨éã\n     * ä¸»é®\n       * ç¨éåè°çå­æ®µä½ä¸ºä¸»é®å¨InnoDBä¸­ä¸æ¯ä¸ªå¥½ä¸»æï¼å ä¸ºInnoDBæ°æ®æä»¶æ¬èº«æ¯ä¸é¢B+Treeï¼éåè°çä¸»é®ä¼é æå¨æå¥æ°è®°å½æ¶æ°æ®æä»¶ä¸ºäºç»´æB+Treeçç¹æ§èé¢ç¹çåè£è°æ´ï¼ååä½æï¼èä½¿ç¨èªå¢å­æ®µä½ä¸ºä¸»é®åæ¯ä¸ä¸ªå¾å¥½çéæ©ã\n\n# Mysql åå­ä¼å\n\næ³¨æï¼ä»¥ä¸é½æ¯å¨MySQLç®å½ä¸çmy.iniæä»¶ä¸­æ¹å\n\n * InnoDBåå­ä¼å\n   * InnoDBç¨ä¸ååå­åºååI/Oç¼å­æ± ï¼è¯¥ç¼å­æ± ä¸ä»ç¨æ¥ç¼å­InnoDBçç´¢å¼åï¼èä¸ä¹ç¨æ¥ç¼å­InnoDBçæ°æ®åã\n   1. innodb_log_buffer_size\n      * å³å®äºInnoDBéåæ¥å¿ç¼å­çå¤§å°ï¼å¯ä»¥é¿åInnoDBå¨äºå¡æäº¤åå°±æ§è¡ä¸å¿è¦çæ¥å¿åå¥ç£çæä½ã\n   2. Innodb_buffer_pool_size\n      * å³å®äºInnoDBå­å¨å¼æè¡¨æ°æ®åç´¢å¼æ°æ®çæå¤§ç¼å­åºå¤§å°ã\n * MyISAMåå­ä¼å\n   * MyISAMå­å¨å¼æä½¿ç¨key_bufferç¼å­ç´¢å¼æ¨¡åï¼å éç´¢å¼çè¯»åéåº¦ãå¯¹äºMyISAMè¡¨çæ°æ®åï¼mysqlæ²¡æç¹å«çç¼å­æºå¶ï¼å®å¨ä¾èµäºæä½ç³»ç»çIOç¼å­ã\n   1. read_rnd_buffer_size\n      * å¯¹äºéè¦åæåºçMyISAMè¡¨æ¥è¯¢ï¼å¦å¸¦æorder byå­å¥çsqlï¼éå½å¢å read_rnd_buffer_sizeçå¼ï¼å¯ä»¥æ¹åæ­¤ç±»çsqlæ§è½ãä½éè¦æ³¨æçæ¯read_rnd_buffer_sizeç¬å çï¼å¦æé»è®¤è®¾ç½®å¼å¤ªå¤§ï¼å°±ä¼é æåå­æµªè´¹ã\n   2. key_buffer_size\n      * key_buffer_sizeå³å®MyISAMç´¢å¼åç¼å­ååºçå¤§å°ãç´æ¥å½±åå°MyISAMè¡¨çå­åæçãå¯¹äºä¸è¬MyISAMæ°æ®åºï¼å»ºè®®1/4å¯ç¨åå­åéç»key_buffer_size:\n   3. read_buffer_size\n      * å¦æéè¦ç»å¸¸é¡ºåºæ«æMyISAMè¡¨ï¼å¯ä»¥éè¿å¢å¤§read_buffer_sizeçå¼æ¥æ¹åæ§è½ãä½éè¦æ³¨æçæ¯read_buffer_sizeæ¯æ¯ä¸ªseesionç¬å çï¼å¦æé»è®¤å¼è®¾ç½®å¤ªå¤§ï¼å°±ä¼é æåå­æµªè´¹ã\n * è°æ´MySQLåæ°å¹¶åç¸å³çåæ°\n   1. è°æ´max_connections: æé«å¹¶åè¿æ¥\n   2. è°æ´thread_cache_size\n      * å å¿«è¿æ¥æ°æ®åºçéåº¦ï¼MySQLä¼ç¼å­ä¸å®æ°éçå®¢æ·æå¡çº¿ç¨ä»¥å¤éç¨ï¼éè¿åæ°thread_cache_sizeå¯æ§å¶mysqlç¼å­å®¢æ·ç«¯çº¿ç¨çæ°éã\n   3. innodb_lock_wait_timeout\n      * æ§å¶InnoDBäºå¡ç­å¾è¡éçæ¶é´ï¼å¯¹äºå¿«éå¤ççSQLè¯­å¥ï¼å¯ä»¥å°è¡éç­å¾è¶æ¶æ¶é´è°å¤§ï¼ä»¥é¿ååçå¤§çåæ»æä½ãï¼ææ¯æï¼",normalizedContent:"# æ¹éåå¥é æmysqlè®¿é®æ¢é®é¢\n\n\n# ç°è±¡\n\n2020.03çæå¤©ä¸åï¼çªç¶æ¶å°åäºåé¦ï¼äº§åçæä¸ªé¡µé¢åºç°'æå¡æ ååº'é®é¢\n\n\n# è·è¿\n\n * ç±äºæå¡å¨æ¯åçº¿è·¯è®¿é®ï¼å¯ä»¥éè¿ ping æä»¤ï¼æ¾å°å·ä½çæå¡å¨ipï¼ç¶åæ¬å°ç»å®ååï¼è¿è¡æ¨¡æè¯·æ±ï¼ç¡®è®¤é®é¢å¹¶æ¥çæ¥å¿ã\n * åç°æ¯mysqlæ°æ®åºååºæ¢ï¼é ææ¥å£ååºéåº¦ä¸é 20+ å\n * è¿è¡ä»¥ä¸æä½ï¼\n   1. éè¿ä»¥ä¸æä»¤æå¼ãè®¾ç½®å¹¶æ¥çæ¢æ¥è¯¢æ¥å¿\n      \n      // æ¥ç\n      show variables like 'slow_query%';\n      show variables like 'long_query_time';\n      // è®¾ç½®\n      set global [variablesname]=[value]\n      // æ¥å¿è¾åºæ¹å¼ï¼table,file\n      show variables like '%log_output%'\n      \n      \n      1\n      2\n      3\n      4\n      5\n      6\n      7\n      \n   2. æ¥çmysqlçè¿æ¥æ°ç­ç¶æ\n      \n      // å¦ææ¯rootå¸å·ï¼ä½ è½çå°ææç¨æ·çå½åè¿æ¥ãå¦ææ¯å¶å®æ®éå¸å·ï¼åªè½çå°èªå·±å ç¨çè¿æ¥ã\n      show full processlist;\n      // ç¶æ\n      show status [like '%variables%'];\n      // åæ°\n      show variables [like '%variables%']\n      \n      \n      1\n      2\n      3\n      4\n      5\n      6\n      \n   3. æ¥çmysqlä½¿ç¨çåå­ãcpuãç£çãç½ç»ç¶åµ\n * åæ\n   1. æ°æ®åºè¿æ¥æ°å·²æ»¡(max=1000)\n   2. ç£çãç½ç»ãcpuãåå­ é½ä¸é«ï¼ç¹å«æ¯åå­ä½çå¾å¥æªï¼åªå æ»åå­ç 8% å·¦å³ï¼ä¸è½ææå©ç¨æºå¨æ§è½\n   3. æ¢æ¥è¯¢æ¥å¿ï¼åç°åçæ¢æ¥è¯¢çè¯­å¥ï¼é½æ¯ä½¿ç¨å°äºç´¢å¼ãå¹¶ä¸ç´¢å¼ææçæ¥è¯¢è¯­å¥\n * çæµæ¯ï¼æå¡å¨éç½® + ç¨æ·æµéæ¿å¢é æ\n   1. çååæµéï¼æ²¡æå¼å¸¸\n   2. mysqléç½®æå¼å¸¸ï¼key_buffer_size è®¾ç½®çå¾å°ãè°æ´åï¼é®é¢æ²¡æå¥½è½¬\n * æ¥çéç¶åµ\n   1. ç±äºç¸å³è¡¨ä½¿ç¨çæ¯myisamå¼æï¼æä»¥éè¿ show status like 'table%' æ¥çéç¶æï¼åç°ï¼table_locks_immediate / table_locks_waited ~= 2\n   2. å ä¸ºè¿ä¸ªåºåªè½éè¿ä¸»ä»åæ­¥è¿è¡ä¿®æ¹ï¼è¿æ¶æ³èµ·ç¸å³çè¿è¥ç»æè¿å¨è¿è¡èªå¨å¥åºæä½ã\n   3. åæ­¢åï¼é®é¢ç¼è§£\n\n\n# æ»ç»\n\n * é®é¢å¤ç\n   1. è¿ä¸ªæ°æ®åºéç¨ä¸»ä»ç»æ(ä¸ä¸»å¤ä»)ï¼å¼æ­¥åæ­¥ï¼è½çç­ç¥ä¸ºï¼sync_binlog=0\n   2. èªå¨å¥åºï¼æè¿æå¼å§ï¼éç¨ while do { åå¥æ°æ®(æ è®°æ æ),æ ¡éªæä»¶md5,ä¿®æ¹æ è®°(ææ) }\n      * é®é¢ï¼ç¸å³äººåè¯´ï¼åä¸¤å¤©åæ ·çæä½æ²¡æåºé®é¢å\n      * ç¡®è®¤ï¼å½å¤©å ä¸äºæä»¶md5æ ¡éª\n      * çæµï¼æä»¶æ ¡éªæä½ï¼é æmysqlæ°æ®è¢«åéææ´å¤æ¬¡æ°å·æ°å°ç£çå¹¶è§¦åä¸»ä»åæ­¥å¨ä½ï¼é ææ´å å¯éçmyisamè¡¨éãç±äºï¼åéä¼åçº§é«ï¼é æå®¢æ·ç«¯è¯·æ±è¿ä¹é¥¿æ­»ï¼è¿èé æè¿æ¥æ°ææ»¡ã\n   3. å¤ç\n      * èèå°è¿æ¯ä¸ªå¤å¹´è½»çé¡¹ç®ï¼è¿æ¬¡éè¦åæ¢ myisam å° innodb\n      * è°æ´mysqlç¸å³åæ°ï¼å°½å¯è½çåæ¥æºå¨æ§è½\n\n----------------------------------------\n\n\n# mysql ç¥è¯\n\n# 1. ç¸å³å½ä»¤ãåæ°\n\n * è½çç­ç¥: innodb_flush_log_at_trx_commit å sync_binlog\n * æ¥çä¸»ä»åæ­¥ç¶æï¼\n   \n   show slave status\n   show master status\n   \n   \n   1\n   2\n   \n\n# 2. mysql ç sql_mode:\n\n * æ¥çå½åsql-mode\n   \n   select @@global.sql_mode;\n   select @@session.sql_mode;\n   \n   \n   1\n   2\n   \n * è®¾ç½®å½åsql-mode\n   \n   // å½ä»¤\n   set global sql_mode = 'modes...';\n   set session sql_mode = 'modes...';\n   // my.cnfä¸­éç½®sql-mode\n   [mysqld]\n   #set the sql mode to strict\n   #sql-mode=\"modes...\" \n   sql-mode = \"strict_trans_tables,no_auto_create_user,no_engine_substitution\"\n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   7\n   8\n   \n\n# 3. æ¥çå¼æçéå®ç¶æ\n\n * myisam : show status like 'table%'\n   * éè¿æ£æ¥ table_locks_waited å table_locks_immediate ç¶æåéåæç³»ç»ä¸è¡¨éäºå¤ºæåµ\n   * è¡¨çº§éæ¯myisamä¸éåå«æå¤§éæ´æ°æä½åæ¥è¯¢æä½åºç¨çåå ã\n   \n   â¢table_locks_immediate \n       the number of times that a request for a table lock could be granted immediately. \n   â¢table_locks_waited \n       the number of times that a request for a table lock could not be granted immediately and a wait was needed. if this is high and you have performance problems, you should first optimize your queries, and then either split your table or tables or use replication. \n   \n   \n   1\n   2\n   3\n   4\n   \n * innodb : show status like 'innodb_row_lock%'\n   * æ¥çinnodbè¡éäºç¨æåµ\n\nå¨å­¦ä¹ éçè¿ç¨ä¸­ï¼å¸¸ç¨ï¼set autocommit = 0; æ¥å³é­èªå¨æäº¤ï¼è¿èè§å¯çç¶æã\n\n\n1\n\n\n# 4. myisam & innodb\n\nå¼æ       äºå¡    éæºå¶   å¤é®    å¹¶åæ§è½   ç¼å­      å¤ä»½                        ç³»ç»è¡¨æ¯å¦ä½¿ç¨   å¼å¥gtidåçå½±å\nmyisam   ä¸æ¯æ   è¡¨é    ä¸æ¯æ   ä½      ç´¢å¼      ä¸ºäºä¿ææ°æ®ä¸è´æ§ï¼å¿é¡»å¯¹è¡¨å è¯»éï¼å½±åä¸å¡å   ä½¿ç¨        æé®é¢(ä¸ä¸ªäºå¡ä¸­åæ¶ä½¿ç¨äºå¡å¼æåéäºå¡å¼æ)\ninnodb   æ¯æ    è¡é    æ¯æ    é«      ç´¢å¼åæ°æ®   ä¸éè¦éè¡¨ï¼ä¸å½±åä¸å¡è¯»å             ä½¿ç¨        æ é®é¢\n\nä»mysql5.5å¼å§ï¼é»è®¤å­å¨å¼æåä¸ºäºinnodbï¼å¨æ­¤ä¹åé»è®¤å¼æä½¿ç¨çæ¯myisam.\nä»mysql8.0å¼å§ï¼ç³»ç»è¡¨ä¹å°éç¨innodbï¼å®å¨æ¾å¼myisamã\n\n\n1\n2\n\n\n * myisam\n   \n   * myisamé¢ä¸´çä¸»è¦é®é¢\n     * é®é¢1ï¼ä¸»ä»å¤å¶ä¸­æ­ãä¸»ä»æ°æ®ä¸ä¸è´ ï¼ç±äºmyisamä¸æ¯æäºå¡ï¼å¯¼è´ç¹å«å®¹æåºç°ä¸»å¤å¤å¶å¼å¸¸ãä¸»å¤æ°æ®ä¸ä¸è´çæåµ\n     * é®é¢2: è¿è¡å¤ä»½æ¶ï¼æ è®ºæ¯éç¨mysqldumpè¿è¡çé»è¾å¤ä»½è¿æ¯ä½¿ç¨extrabackupè¿è¡çç©çå¤ä»½ï¼ä¸ºäºä¿è¯myisamè¡¨çæ°æ®ä¸è´æ§ï¼å¿é¡»å¯¹è¡¨è¿è¡å éï¼å¯¼è´é»å¡åå¥ãè¿å¯¹äºéå»ºä¸»ä»æ¯ç»å¸¸åºç°çé®é¢ã\n   * myisamè¡¨çº§é:\n     * æ¨¡å¼ï¼è¡¨å±äº«è¯»é(table read lock)ãè¡¨ç¬å åé(table write lock)\n     * é»è®¤æåµä¸ï¼åéæ¯è¯»éå·ææ´é«çä¼åçº§ï¼è¿æ­£æ¯ myisam è¡¨ä¸å¤ªéåäºæå¤§éæ´æ°æä½åæ¥è¯¢æä½åºç¨çåå ãå ä¸ºï¼å¤§éçæ´æ°æä½ä¼é ææ¥è¯¢æä½å¾é¾è·å¾è¯»éï¼ä»èå¯è½æ°¸è¿é»å¡ã\n     * å¨èªå¨å éçæåµä¸ï¼myisam æ»æ¯ä¸æ¬¡è·å¾ sql è¯­å¥æéè¦çå¨é¨éï¼æä»¥ myisam è¡¨ä¸ä¼åºç°æ­»éã\n\n * innodb\n   \n   * ä¸ myisam æå¤§ä¸åæä¸¤ç¹ï¼\n     1. æ¯æäºå¡\n     2. éç¨è¡çº§é\n\n * ç´¢å¼\n   \n   * myisam\n     * myisamç´¢å¼å®ç°ï¼myisamç´¢å¼æä»¶åæ°æ®æä»¶æ¯åç¦»çï¼ç´¢å¼æä»¶ä»ä¿å­æ°æ®è®°å½çå°å.\n     * å¨myisamä¸­ï¼ä¸»ç´¢å¼åè¾å©ç´¢å¼è¾å©ç´¢å¼(secondary index, å³éä¸»é®ç´¢å¼)å¨ç»æä¸æ²¡æä»»ä½åºå«ï¼åªæ¯ä¸»ç´¢å¼è¦æ±keyæ¯å¯ä¸çï¼èè¾å©ç´¢å¼çkeyå¯ä»¥éå¤ã\n   * innodb\n     * innodb è¡¨æ¯åºäºèç°ç´¢å¼å»ºç«çãå æ­¤innodb çç´¢å¼è½æä¾ä¸ç§éå¸¸å¿«éçä¸»é®æ¥æ¾æ§è½ãinnodb ä¸ä¼åç¼©ç´¢å¼ã\n       * èéç´¢å¼è¿ç§å®ç°æ¹å¼ä½¿å¾æä¸»é®çæç´¢ååé«æï¼ä½æ¯è¾å©ç´¢å¼æç´¢éè¦æ£ç´¢ä¸¤éç´¢å¼ï¼é¦åæ£ç´¢è¾å©ç´¢å¼è·å¾ä¸»é®ï¼ç¶åç¨ä¸»é®å°ä¸»ç´¢å¼ä¸­æ£ç´¢è·å¾è®°å½ã\n       * å ä¸ºææè¾å©ç´¢å¼é½å¼ç¨ä¸»ç´¢å¼(å³ï¼è¾å©ç´¢å¼ä¹ä¼åå«ä¸»é®å)ï¼å¦æä¸»é®å®ä¹çæ¯è¾å¤§ï¼å¶ä»ç´¢å¼ä¹å°å¾å¤§ï¼æä»¥ä¸å»ºè®®ä½¿ç¨è¿é¿çå­æ®µä½ä¸ºä¸»é®ãå¦å¤ï¼å¦ææ³å¨è¡¨ä¸å®ä¹å¾å¤ç´¢å¼ï¼åäºåå°½éæä¸»é®å®ä¹å¾å°ä¸äºã\n     * è¡é\n       * innodbçè¡éæ¯éå¯¹ç´¢å¼å çéï¼ä¸æ¯éå¯¹è®°å½å çéã\n         * è¿ä¸ç¹mysqlä¸oracleä¸åï¼å®ä»¬æ¯éè¿å¨æ°æ®åä¸­ï¼å¯¹ç¸åºæ°æ®è¡å éæ¥å®ç°ç\n       * innodbè¿ç§è¡éå®ç°ç¹ç¹æå³çï¼åªæéè¿ç´¢å¼æ¡ä»¶æ£ç´¢æ°æ®ï¼innodbæä½¿ç¨è¡çº§éï¼å¦åinnodbå°ä½¿ç¨è¡¨éã\n     * ä¸»é®\n       * ç¨éåè°çå­æ®µä½ä¸ºä¸»é®å¨innodbä¸­ä¸æ¯ä¸ªå¥½ä¸»æï¼å ä¸ºinnodbæ°æ®æä»¶æ¬èº«æ¯ä¸é¢b+treeï¼éåè°çä¸»é®ä¼é æå¨æå¥æ°è®°å½æ¶æ°æ®æä»¶ä¸ºäºç»´æb+treeçç¹æ§èé¢ç¹çåè£è°æ´ï¼ååä½æï¼èä½¿ç¨èªå¢å­æ®µä½ä¸ºä¸»é®åæ¯ä¸ä¸ªå¾å¥½çéæ©ã\n\n# mysql åå­ä¼å\n\næ³¨æï¼ä»¥ä¸é½æ¯å¨mysqlç®å½ä¸çmy.iniæä»¶ä¸­æ¹å\n\n * innodbåå­ä¼å\n   * innodbç¨ä¸ååå­åºååi/oç¼å­æ± ï¼è¯¥ç¼å­æ± ä¸ä»ç¨æ¥ç¼å­innodbçç´¢å¼åï¼èä¸ä¹ç¨æ¥ç¼å­innodbçæ°æ®åã\n   1. innodb_log_buffer_size\n      * å³å®äºinnodbéåæ¥å¿ç¼å­çå¤§å°ï¼å¯ä»¥é¿åinnodbå¨äºå¡æäº¤åå°±æ§è¡ä¸å¿è¦çæ¥å¿åå¥ç£çæä½ã\n   2. innodb_buffer_pool_size\n      * å³å®äºinnodbå­å¨å¼æè¡¨æ°æ®åç´¢å¼æ°æ®çæå¤§ç¼å­åºå¤§å°ã\n * myisamåå­ä¼å\n   * myisamå­å¨å¼æä½¿ç¨key_bufferç¼å­ç´¢å¼æ¨¡åï¼å éç´¢å¼çè¯»åéåº¦ãå¯¹äºmyisamè¡¨çæ°æ®åï¼mysqlæ²¡æç¹å«çç¼å­æºå¶ï¼å®å¨ä¾èµäºæä½ç³»ç»çioç¼å­ã\n   1. read_rnd_buffer_size\n      * å¯¹äºéè¦åæåºçmyisamè¡¨æ¥è¯¢ï¼å¦å¸¦æorder byå­å¥çsqlï¼éå½å¢å read_rnd_buffer_sizeçå¼ï¼å¯ä»¥æ¹åæ­¤ç±»çsqlæ§è½ãä½éè¦æ³¨æçæ¯read_rnd_buffer_sizeç¬å çï¼å¦æé»è®¤è®¾ç½®å¼å¤ªå¤§ï¼å°±ä¼é æåå­æµªè´¹ã\n   2. key_buffer_size\n      * key_buffer_sizeå³å®myisamç´¢å¼åç¼å­ååºçå¤§å°ãç´æ¥å½±åå°myisamè¡¨çå­åæçãå¯¹äºä¸è¬myisamæ°æ®åºï¼å»ºè®®1/4å¯ç¨åå­åéç»key_buffer_size:\n   3. read_buffer_size\n      * å¦æéè¦ç»å¸¸é¡ºåºæ«æmyisamè¡¨ï¼å¯ä»¥éè¿å¢å¤§read_buffer_sizeçå¼æ¥æ¹åæ§è½ãä½éè¦æ³¨æçæ¯read_buffer_sizeæ¯æ¯ä¸ªseesionç¬å çï¼å¦æé»è®¤å¼è®¾ç½®å¤ªå¤§ï¼å°±ä¼é æåå­æµªè´¹ã\n * è°æ´mysqlåæ°å¹¶åç¸å³çåæ°\n   1. è°æ´max_connections: æé«å¹¶åè¿æ¥\n   2. è°æ´thread_cache_size\n      * å å¿«è¿æ¥æ°æ®åºçéåº¦ï¼mysqlä¼ç¼å­ä¸å®æ°éçå®¢æ·æå¡çº¿ç¨ä»¥å¤éç¨ï¼éè¿åæ°thread_cache_sizeå¯æ§å¶mysqlç¼å­å®¢æ·ç«¯çº¿ç¨çæ°éã\n   3. innodb_lock_wait_timeout\n      * æ§å¶innodbäºå¡ç­å¾è¡éçæ¶é´ï¼å¯¹äºå¿«éå¤ççsqlè¯­å¥ï¼å¯ä»¥å°è¡éç­å¾è¶æ¶æ¶é´è°å¤§ï¼ä»¥é¿ååçå¤§çåæ»æä½ãï¼ææ¯æï¼",charsets:{cjk:!0}},{title:"Redis æå",frontmatter:{title:"Redis æå",date:"2020-04-21T00:00:00.000Z",description:"Redis åºç¡",categories:["blog","database"],tags:[null],permalink:null},regularPath:"/blog/database/redis_manual.html",relativePath:"blog/database/redis_manual.md",key:"v-2c4fb4ae",path:"/blog/database/redis_manual.html",headers:[{level:2,title:"Redis åºç¡ç±»å",slug:"redis-åºç¡ç±»å",normalizedTitle:"redis åºç¡ç±»å",charIndex:15},{level:3,title:"Stream ä½¿ç¨ç®ä»",slug:"stream-ä½¿ç¨ç®ä»",normalizedTitle:"stream ä½¿ç¨ç®ä»",charIndex:250},{level:3,title:"Benchmark",slug:"benchmark",normalizedTitle:"benchmark",charIndex:1394},{level:2,title:"redis çåç§ä½¿ç¨åºæ¯",slug:"redis-çåç§ä½¿ç¨åºæ¯",normalizedTitle:"redis çåç§ä½¿ç¨åºæ¯",charIndex:1876},{level:2,title:"Redis åç",slug:"redis-åç",normalizedTitle:"redis åç",charIndex:1952},{level:2,title:"é«å¯ç¨",slug:"é«å¯ç¨",normalizedTitle:"é«å¯ç¨",charIndex:2104},{level:2,title:"ææ ãçæ§ãå®å¨",slug:"ææ ãçæ§ãå®å¨",normalizedTitle:"ææ ãçæ§ãå®å¨",charIndex:2145},{level:2,title:"æ°çæ¬ç¹å¾è¿½è¸ª",slug:"æ°çæ¬ç¹å¾è¿½è¸ª",normalizedTitle:"æ°çæ¬ç¹å¾è¿½è¸ª",charIndex:2191}],headersStr:"Redis åºç¡ç±»å Stream ä½¿ç¨ç®ä» Benchmark redis çåç§ä½¿ç¨åºæ¯ Redis åç é«å¯ç¨ ææ ãçæ§ãå®å¨ æ°çæ¬ç¹å¾è¿½è¸ª",content:"# Redis æå\n\n\n# Redis åºç¡ç±»å\n\nRedis å¸¸ç¨çæ°æ®ç±»åæ:\n\n    string list set hash zset \n    pub/sub \n    stream(5.0) \n\n\n1\n2\n3\n\n * å¸¸ç¨æä»¤:\n * åç:\n   * åºç¡æ°æ®ç»æ:\n     * hashtable\n     * quicklist ---\x3e node: ziplist\n     * radixtree ---\x3e node: listpack(ziplistçåçº§ç)\n\n\n# Stream ä½¿ç¨ç®ä»\n\nstream çæ¯ä¸ªæ¶æ¯é½æ steam id:\n\n * ç± '-' è¿æ¥ä¸ä¸ªç²¾ç¡®å°æ¯«ç§çæ¶é´æ³ å èªå¢çæ´æ°è¿ä¸¤é¨åç»æã\n * ä¸¤ä¸ªé¨åé½ç±ä¸ä¸ªæ ç¬¦å·64ä½æ´æ°è¡¨ç¤ºãå æ­¤, ä¸ç¨æå¿idéå¤: è¦ç¨å®è¿ä¸¤é¨åï¼ä¸æ¯«ç§åå¾åé 2 ** 64 = 18446744073709551616 æ¡æ°æ®ï¼ç®ååºè¯¥æ²¡æåªä¸ªé«å¹¶åç³»ç»è½é«å°è¿ä¸ªç¨åº¦ã\n\nå¯¹äºæ¶è´¹ç»æ¥è¯´ï¼stream æä¾å¦ä¸ä¿éï¼\n\n * ç»åæ¶è´¹èæ¶è´¹çæ¶æ¯ä¸éå¤;\n * ç»åæ¶è´¹èåç§°å¿é¡»å¯ä¸;\n * æ¶è´¹èæ¿å°çæ¶æ¯è¯å®æ¯æ²¡æè¢«ç»åå¶ä»æ¶è´¹èæ¶è´¹è¿çæ¶æ¯ï¼æ¶è´¹èæåæ¶è´¹æ¶æ¯ä¹åè¦æ±åéACKï¼ç¶åè¿æ¡æ¶æ¯æä¼ä»æ¶è´¹èç»ä¸­ç§»é¤ï¼ä¹å°±æ¯è¯´æ¶æ¯è³å°è¢«æ¶è´¹ä¸æ¬¡ï¼åkafkaä¸æ ·;\n * æ¶è´¹èç»ä¼è·è¸ªææå¾å¤ççæ¶æ¯;\n\nå³äº stream çä½¿ç¨ å åç å¯ä»¥åèï¼\n\n * åºäºRedisçStreamç±»åçå®ç¾æ¶æ¯éåè§£å³æ¹æ¡\n * radix treeï¼åºæ°æ \n\nå¦å¤ï¼æä»¬æ¥ççä¾èµ redis ç¹æå®ç°æ¶æ¯éåçå ç§æ¹å¼å¯¹æ¯ï¼\n\nLIST, ZSET, PUB/SUB                                        STREAM\nList ä¸è½é«æçä»ä¸­é´è·åæ°æ®, O(N)                                    å¯ä»¥, å³ä½¿æ¯äº¿çº§å«, O(logN)\nList æ²¡æoffsetæ¦å¿µ, å¦ææååçevit, æ æ³ç¡®è®¤ææ°çæå, ä¹æ æ³rewindå°æä¸ªæå®æå   æ¯æ¡msgé½æå¯ä¸id, èçæåè¢«æ·æ±°, idä¸å\nPub/Sub ä¸è½æä¹åæ¶æ¯                                            å¯ä»¥ä¿å­å¨ RDB å AOF\nPub/Sub æ²¡æconsumer groupçæ¦å¿µ                                æ, æ´è´´è¿çå®çä¸å¡åºæ¯\nPub/Sub çæ§è½åè®¢éæä¸ªé¢éçclientæ°éæ­£ç¸å³                             ä¸å­å¨\nZset ä¸åè®¸æ·»å éå¤æå, ä¸æ¯ææåæ·æ±°åblockæä½, åå­å¼éå¤§                     åè®¸, æ¯æææ¶é´çº¿æ¥æ·æ±°åå²æ°æ®, æ¯æblockæä½, åºäºradix treeålistpack, åå­å¼éä½\nZset éè¦æ¯æå é¤ä»»æåç´                                             ä¸æ¯æä»ä¸­é´å é¤åç´ (logå±æ§), more compact and memory efficient\n\n\n# Benchmark\n\nä¸è¬æ¥è¯´ï¼redis ä½ä¸ºåå­å­å¨ç nosqlï¼æä¾äºå¤ç§æ°æ®ç±»åï¼ä¸æçä¹é«ï¼è½æ»¡è¶³å¤§å¤æ°åºæ¯çéè¦ã\n\nä½ï¼å®ä¾ç¶æç¶é¢å­å¨ï¼å¸¸è§çç¶é¢æï¼QPS CPU æµé. å¶ä¸­ï¼QPS å CPU æä»¬å¾å®¹ææ³çå°ï¼æµéè¿ä¸ªç¶é¢ç¹å¾å®¹æè¢«å¿½ç¥ï¼å¨è¾å¤§ç keyævalue è¾å¤çæ¶åï¼è¦éå¸¸æ³¨æã\n\nå¨ä½¿ç¨ redis åï¼å¤§å¤ä¼éå¯¹ä½¿ç¨åºæ¯è¿è¡åæµï¼æä»¥ä¸ç§é«æç benchmark å·¥å·æ¯å¿é¡»çï¼è redis èªå¸¦ç redis-benchmark å°±æä¾äºéå¸¸å®åçåè½ï¼å®ç¾~\n\nä½¿ç¨ç¤ºä¾ï¼\n    redis-benchmark -h 10.46.35.1 -p 6379 -a 'passwd' -r 80 -d 1500 -c 1000 -l -k 0 -n 1000000 -t set,mget\n    redis-benchmark -h 10.46.35.1 -p 6379 -a 'passwd' -t set -c 3500 -d 128 -n 25000000 -r 5000000\n\n\n1\n2\n3\n\n\n\n# redis çåç§ä½¿ç¨åºæ¯\n\nboomfilterãéæµãGeoHashãåå¸å¼é Scanãç®¡éãäºå¡ãpubsub Sort Lua èæ¬\n\n\n# Redis åç\n\nåçº¿ç¨æ¨¡å è¿æç­ç¥ ä»¥å åç åå­åæ¶ åºç¡ç±»åå®ç°åçï¼string: SDS, dict: hashtable, list: ziplistãlinkedlistãlistpack(5.0, ç®ååªstream), zset: skiplist æ¸è¿å¼ rehash\n\n\n# é«å¯ç¨\n\nAOFãRDB, PSYNC sentinelãcluster\n\n\n# ææ ãçæ§ãå®å¨\n\ninfo æ¢æ¥è¯¢ãç­ç¹æ°æ® rename-command æä»¤\n\n\n# æ°çæ¬ç¹å¾è¿½è¸ª",normalizedContent:"# redis æå\n\n\n# redis åºç¡ç±»å\n\nredis å¸¸ç¨çæ°æ®ç±»åæ:\n\n    string list set hash zset \n    pub/sub \n    stream(5.0) \n\n\n1\n2\n3\n\n * å¸¸ç¨æä»¤:\n * åç:\n   * åºç¡æ°æ®ç»æ:\n     * hashtable\n     * quicklist ---\x3e node: ziplist\n     * radixtree ---\x3e node: listpack(ziplistçåçº§ç)\n\n\n# stream ä½¿ç¨ç®ä»\n\nstream çæ¯ä¸ªæ¶æ¯é½æ steam id:\n\n * ç± '-' è¿æ¥ä¸ä¸ªç²¾ç¡®å°æ¯«ç§çæ¶é´æ³ å èªå¢çæ´æ°è¿ä¸¤é¨åç»æã\n * ä¸¤ä¸ªé¨åé½ç±ä¸ä¸ªæ ç¬¦å·64ä½æ´æ°è¡¨ç¤ºãå æ­¤, ä¸ç¨æå¿idéå¤: è¦ç¨å®è¿ä¸¤é¨åï¼ä¸æ¯«ç§åå¾åé 2 ** 64 = 18446744073709551616 æ¡æ°æ®ï¼ç®ååºè¯¥æ²¡æåªä¸ªé«å¹¶åç³»ç»è½é«å°è¿ä¸ªç¨åº¦ã\n\nå¯¹äºæ¶è´¹ç»æ¥è¯´ï¼stream æä¾å¦ä¸ä¿éï¼\n\n * ç»åæ¶è´¹èæ¶è´¹çæ¶æ¯ä¸éå¤;\n * ç»åæ¶è´¹èåç§°å¿é¡»å¯ä¸;\n * æ¶è´¹èæ¿å°çæ¶æ¯è¯å®æ¯æ²¡æè¢«ç»åå¶ä»æ¶è´¹èæ¶è´¹è¿çæ¶æ¯ï¼æ¶è´¹èæåæ¶è´¹æ¶æ¯ä¹åè¦æ±åéackï¼ç¶åè¿æ¡æ¶æ¯æä¼ä»æ¶è´¹èç»ä¸­ç§»é¤ï¼ä¹å°±æ¯è¯´æ¶æ¯è³å°è¢«æ¶è´¹ä¸æ¬¡ï¼åkafkaä¸æ ·;\n * æ¶è´¹èç»ä¼è·è¸ªææå¾å¤ççæ¶æ¯;\n\nå³äº stream çä½¿ç¨ å åç å¯ä»¥åèï¼\n\n * åºäºredisçstreamç±»åçå®ç¾æ¶æ¯éåè§£å³æ¹æ¡\n * radix treeï¼åºæ°æ \n\nå¦å¤ï¼æä»¬æ¥ççä¾èµ redis ç¹æå®ç°æ¶æ¯éåçå ç§æ¹å¼å¯¹æ¯ï¼\n\nlist, zset, pub/sub                                        stream\nlist ä¸è½é«æçä»ä¸­é´è·åæ°æ®, o(n)                                    å¯ä»¥, å³ä½¿æ¯äº¿çº§å«, o(logn)\nlist æ²¡æoffsetæ¦å¿µ, å¦ææååçevit, æ æ³ç¡®è®¤ææ°çæå, ä¹æ æ³rewindå°æä¸ªæå®æå   æ¯æ¡msgé½æå¯ä¸id, èçæåè¢«æ·æ±°, idä¸å\npub/sub ä¸è½æä¹åæ¶æ¯                                            å¯ä»¥ä¿å­å¨ rdb å aof\npub/sub æ²¡æconsumer groupçæ¦å¿µ                                æ, æ´è´´è¿çå®çä¸å¡åºæ¯\npub/sub çæ§è½åè®¢éæä¸ªé¢éçclientæ°éæ­£ç¸å³                             ä¸å­å¨\nzset ä¸åè®¸æ·»å éå¤æå, ä¸æ¯ææåæ·æ±°åblockæä½, åå­å¼éå¤§                     åè®¸, æ¯æææ¶é´çº¿æ¥æ·æ±°åå²æ°æ®, æ¯æblockæä½, åºäºradix treeålistpack, åå­å¼éä½\nzset éè¦æ¯æå é¤ä»»æåç´                                             ä¸æ¯æä»ä¸­é´å é¤åç´ (logå±æ§), more compact and memory efficient\n\n\n# benchmark\n\nä¸è¬æ¥è¯´ï¼redis ä½ä¸ºåå­å­å¨ç nosqlï¼æä¾äºå¤ç§æ°æ®ç±»åï¼ä¸æçä¹é«ï¼è½æ»¡è¶³å¤§å¤æ°åºæ¯çéè¦ã\n\nä½ï¼å®ä¾ç¶æç¶é¢å­å¨ï¼å¸¸è§çç¶é¢æï¼qps cpu æµé. å¶ä¸­ï¼qps å cpu æä»¬å¾å®¹ææ³çå°ï¼æµéè¿ä¸ªç¶é¢ç¹å¾å®¹æè¢«å¿½ç¥ï¼å¨è¾å¤§ç keyævalue è¾å¤çæ¶åï¼è¦éå¸¸æ³¨æã\n\nå¨ä½¿ç¨ redis åï¼å¤§å¤ä¼éå¯¹ä½¿ç¨åºæ¯è¿è¡åæµï¼æä»¥ä¸ç§é«æç benchmark å·¥å·æ¯å¿é¡»çï¼è redis èªå¸¦ç redis-benchmark å°±æä¾äºéå¸¸å®åçåè½ï¼å®ç¾~\n\nä½¿ç¨ç¤ºä¾ï¼\n    redis-benchmark -h 10.46.35.1 -p 6379 -a 'passwd' -r 80 -d 1500 -c 1000 -l -k 0 -n 1000000 -t set,mget\n    redis-benchmark -h 10.46.35.1 -p 6379 -a 'passwd' -t set -c 3500 -d 128 -n 25000000 -r 5000000\n\n\n1\n2\n3\n\n\n\n# redis çåç§ä½¿ç¨åºæ¯\n\nboomfilterãéæµãgeohashãåå¸å¼é scanãç®¡éãäºå¡ãpubsub sort lua èæ¬\n\n\n# redis åç\n\nåçº¿ç¨æ¨¡å è¿æç­ç¥ ä»¥å åç åå­åæ¶ åºç¡ç±»åå®ç°åçï¼string: sds, dict: hashtable, list: ziplistãlinkedlistãlistpack(5.0, ç®ååªstream), zset: skiplist æ¸è¿å¼ rehash\n\n\n# é«å¯ç¨\n\naofãrdb, psync sentinelãcluster\n\n\n# ææ ãçæ§ãå®å¨\n\ninfo æ¢æ¥è¯¢ãç­ç¹æ°æ® rename-command æä»¤\n\n\n# æ°çæ¬ç¹å¾è¿½è¸ª",charsets:{cjk:!0}},{title:"Design",frontmatter:{published:!0,title:"Design",description:"algorithmãdesign ç¸å³ç¥è¯æ±æ»",keywords:[""],categories:["blog","design","algorithm"],permalink:"/blog/design/",date:"2020-04-13T00:00:00.000Z",tags:[null]},regularPath:"/blog/design/",relativePath:"blog/design/README.md",key:"v-742c98c4",path:"/blog/design/",headersStr:null,content:"# DESIGN\n\n * Mvp Mvp Mvvm\n * å¸¸è§ç®æ³é\n * åå¸å¼ä¸è´æ§åè®®ç®ä»\n * è½¯ä»¶è®¾è®¡ç7å¤§åå",normalizedContent:"# design\n\n * mvp mvp mvvm\n * å¸¸è§ç®æ³é\n * åå¸å¼ä¸è´æ§åè®®ç®ä»\n * è½¯ä»¶è®¾è®¡ç7å¤§åå",charsets:{cjk:!0}},{title:"å¸¸è§ç®æ³é",frontmatter:{title:"å¸¸è§ç®æ³é",date:"2021-01-16T23:29:06.000Z",categories:["blog","design","algorithm"],tags:[null],permalink:null},regularPath:"/blog/design/algorithm_common.html",relativePath:"blog/design/algorithm_common.md",key:"v-f1ab1866",path:"/blog/design/algorithm_common.html",headers:[{level:2,title:"Floydç®æ³",slug:"floydç®æ³",normalizedTitle:"floydç®æ³",charIndex:16},{level:2,title:"Dynamic Programming",slug:"dynamic-programming",normalizedTitle:"dynamic programming",charIndex:184},{level:2,title:"Î±-Î²åªæç®æ³",slug:"Î±-Î²åªæç®æ³",normalizedTitle:"Î±-Î²åªæç®æ³",charIndex:398},{level:2,title:"æ´ç´ è´å¶æ¯",slug:"æ´ç´ è´å¶æ¯",normalizedTitle:"æ´ç´ è´å¶æ¯",charIndex:410},{level:2,title:"æ¨èç®æ³",slug:"æ¨èç®æ³",normalizedTitle:"æ¨èç®æ³",charIndex:420},{level:2,title:"æ ",slug:"æ ",normalizedTitle:"æ ",charIndex:446},{level:2,title:"LRU (Least recently used)",slug:"lru-least-recently-used",normalizedTitle:"lru (least recently used)",charIndex:609},{level:2,title:"LFU (Least-frequently used)",slug:"lfu-least-frequently-used",normalizedTitle:"lfu (least-frequently used)",charIndex:779},{level:2,title:"ARC",slug:"arc",normalizedTitle:"arc",charIndex:959}],headersStr:"Floydç®æ³ Dynamic Programming Î±-Î²åªæç®æ³ æ´ç´ è´å¶æ¯ æ¨èç®æ³ æ  LRU (Least recently used) LFU (Least-frequently used) ARC",content:'# Algorithm\n\n\n# Floydç®æ³\n\n * Dis(AB) = min(Dis(AB), Dis(AK) + Dis(KB))\n * æ³¨æå¾ªç¯çåµå¥é¡ºåº:\n   * å¦æææ£æ¥ææèç¹Kæ¾å¨æåå±(åºè¯¥æ¾å¨æå¤å±)ï¼é£ä¹ç»æå°æ¯ä¸æ­£ç¡®ç\n   * ä¸ºä»ä¹å¢ï¼å ä¸ºè¿æ ·ä¾¿è¿æ©çæAå°Bçæç­è·¯å¾ç¡®å®ä¸æ¥äºï¼èå½åé¢å­å¨æ´ç­çè·¯å¾æ¶ï¼å·²ç»ä¸åä¼æ´æ°äº\n\n\n# Dynamic Programming\n\n * ä½¿ç¨æ¡ä»¶ï¼æ åææ§\n   * æé¶æ®µçç¶æä¸æ¦ç¡®å®ï¼åæ­¤åè¿ç¨çæ¼åä¸ååæ­¤ååç§ç¶æåå³ç­çå½±åãç®åçè¯´ï¼å°±æ¯"æªæ¥ä¸è¿å»æ å³"ï¼å½åçç¶ææ¯æ­¤ååå²çä¸ä¸ªå®æ´æ»ç»ï¼æ­¤åçåå²åªè½éè¿å½åç¶æå»å½±åæªæ¥è¿ç¨çæ¼åã\n * å¸¸è§é®é¢\n   * 01èåé®é¢ãæé¿ééå­åºå\n   * å¸¦æéçåæºæç­è·¯\n   * å¸¦æéãæ¯æ­¥é½æä¸å®èµæºæ¶è(å¦:è¿è·¯è´¹)çåæºæç­è·¯\n\n\n# Î±-Î²åªæç®æ³\n\n\n# æ´ç´ è´å¶æ¯\n\n\n# æ¨èç®æ³\n\n * ååè¿æ»¤ãLRãGBDT\n\n\n# æ \n\n * äºåæ ãå®å¨äºåæ ãå¹³è¡¡äºåæ ãäºåæ¥æ¾æ ï¼BSTï¼\n   * \n * çº¢é»æ \n * Bï¼B+ï¼B*æ \n * LSM æ \n * æå°çææ ç®æ³\n   * https://blog.csdn.net/luoshixian099/article/details/51908175\n\nTOP\n\n\n# Cache\n\n\n# LRU (Least recently used)\n\nå¶æ ¸å¿ææ³æ¯:åè®¾åvisitçitem,å¾æå¯è½å¨æªæ¥è¢«revisit,ä¸¢å¼æè¿æå°è®¿é®çitems\n\n * éå¸¸ç¨åé¾è¡¨å®ç°\n * ç¼ºç¹:å¿½ç¥äºfrequency, ä¸éåå¤§è§æ¨¡æ«æç­æåµ\n * LRUæä¸ç³»ååç§ï¼æ¯å¦LRU-N(å¦ï¼LRU-2), 2Q, LIRSç­ã\n\n\n# LFU (Least-frequently used)\n\nå¶æ ¸å¿ææ³æ¯:åè®¾visitæ¬¡æ°è¶å¤çitem,å¾æå¯è½å¨æªæ¥è¢«revisit\n\n * éåºå¤§è§æ¨¡æ«æ\n * å¯¹ç­ç¹åå¥½\n * ç¼ºç¹:å¿½ç¥äºrecency, å¯è½ä¼ç§¯ç´¯ä¸åä½¿ç¨çæ°æ® tips: redis4.0å¼å§æ¯æäºLFU,ä¾å¦volatile-lfu, allkeys-lfuéç½®éé¡¹\n\n\n# ARC\n\nARCï¼Adaptive Replacement Cacheï¼æ¯ä¸ç§éåºæ§Cacheç®æ³, å®ç»åäºLRUä¸LFUçç¹ç¹ã\n\nARC è®ºæï¼å°æ´ä¸ªCacheåæä¸¤é¨åï¼èµ·å§LRUåLFUåå ä¸åï¼åç»­ä¼å¨æéåºè°æ´partionçä½ç½®(è®°ä¸ºp), é¤æ­¤ï¼LRUåLFUåèªæä¸ä¸ªghost list(å æ­¤ï¼ä¸å±4ä¸ªlist)ãæ¯æ¬¡ï¼è¢«æ·æ±°çitemæ¾å°å¯¹åºçghost listä¸­ï¼ghost liståªå­keyï¼, ä¾å¦ï¼å¦æè¢«evictedçitemæ¥èªLRUçé¨åï¼ åè¯¥itemå¯¹åºçkeyä¼è¢«æ¾å¥LRUå¯¹åºçghost list\n\n * ç¬¬ä¸æ¬¡cache miss, åä¼æ¾å¥LRU\n * å¦æcache hit, å¦æLFUä¸­æ²¡æï¼åæ¾å¥LFU\n * å¦æcache miss, ä½å¨ghost listä¸­å½ä¸­ï¼è¿è¯´æå¯¹åºçcacheå¦æåå¤§ä¸ä¸ç¹å¿å°±å¥½äºï¼ å¦æå­å¨äºLRU ghost list, åp=p+1ï¼å¦åå­å¨äºLFU ghost list, p=p-1.\n * ä¹å°±æ¯è¯´ï¼å©ç¨è¿ç§éåºæºå¶ï¼å½ç³»ç»è¶åäºè®¿é®æè¿çåå®¹ï¼ä¼æ´å¤å°å½ä¸­LRU ghost listï¼è¿æ ·ä¼å¢å¤§LRUçç©ºé´ï¼ å½ç³»ç»è¶åäºè®¿é®æé¢ç¹çåå®¹ï¼ä¼æ´å¤å°å½ä¸­LFU ghost listï¼è¿æ ·ä¼å¢å LFUçç©ºé´.',normalizedContent:'# algorithm\n\n\n# floydç®æ³\n\n * dis(ab) = min(dis(ab), dis(ak) + dis(kb))\n * æ³¨æå¾ªç¯çåµå¥é¡ºåº:\n   * å¦æææ£æ¥ææèç¹kæ¾å¨æåå±(åºè¯¥æ¾å¨æå¤å±)ï¼é£ä¹ç»æå°æ¯ä¸æ­£ç¡®ç\n   * ä¸ºä»ä¹å¢ï¼å ä¸ºè¿æ ·ä¾¿è¿æ©çæaå°bçæç­è·¯å¾ç¡®å®ä¸æ¥äºï¼èå½åé¢å­å¨æ´ç­çè·¯å¾æ¶ï¼å·²ç»ä¸åä¼æ´æ°äº\n\n\n# dynamic programming\n\n * ä½¿ç¨æ¡ä»¶ï¼æ åææ§\n   * æé¶æ®µçç¶æä¸æ¦ç¡®å®ï¼åæ­¤åè¿ç¨çæ¼åä¸ååæ­¤ååç§ç¶æåå³ç­çå½±åãç®åçè¯´ï¼å°±æ¯"æªæ¥ä¸è¿å»æ å³"ï¼å½åçç¶ææ¯æ­¤ååå²çä¸ä¸ªå®æ´æ»ç»ï¼æ­¤åçåå²åªè½éè¿å½åç¶æå»å½±åæªæ¥è¿ç¨çæ¼åã\n * å¸¸è§é®é¢\n   * 01èåé®é¢ãæé¿ééå­åºå\n   * å¸¦æéçåæºæç­è·¯\n   * å¸¦æéãæ¯æ­¥é½æä¸å®èµæºæ¶è(å¦:è¿è·¯è´¹)çåæºæç­è·¯\n\n\n# Î±-Î²åªæç®æ³\n\n\n# æ´ç´ è´å¶æ¯\n\n\n# æ¨èç®æ³\n\n * ååè¿æ»¤ãlrãgbdt\n\n\n# æ \n\n * äºåæ ãå®å¨äºåæ ãå¹³è¡¡äºåæ ãäºåæ¥æ¾æ ï¼bstï¼\n   * \n * çº¢é»æ \n * bï¼b+ï¼b*æ \n * lsm æ \n * æå°çææ ç®æ³\n   * https://blog.csdn.net/luoshixian099/article/details/51908175\n\ntop\n\n\n# cache\n\n\n# lru (least recently used)\n\nå¶æ ¸å¿ææ³æ¯:åè®¾åvisitçitem,å¾æå¯è½å¨æªæ¥è¢«revisit,ä¸¢å¼æè¿æå°è®¿é®çitems\n\n * éå¸¸ç¨åé¾è¡¨å®ç°\n * ç¼ºç¹:å¿½ç¥äºfrequency, ä¸éåå¤§è§æ¨¡æ«æç­æåµ\n * lruæä¸ç³»ååç§ï¼æ¯å¦lru-n(å¦ï¼lru-2), 2q, lirsç­ã\n\n\n# lfu (least-frequently used)\n\nå¶æ ¸å¿ææ³æ¯:åè®¾visitæ¬¡æ°è¶å¤çitem,å¾æå¯è½å¨æªæ¥è¢«revisit\n\n * éåºå¤§è§æ¨¡æ«æ\n * å¯¹ç­ç¹åå¥½\n * ç¼ºç¹:å¿½ç¥äºrecency, å¯è½ä¼ç§¯ç´¯ä¸åä½¿ç¨çæ°æ® tips: redis4.0å¼å§æ¯æäºlfu,ä¾å¦volatile-lfu, allkeys-lfuéç½®éé¡¹\n\n\n# arc\n\narcï¼adaptive replacement cacheï¼æ¯ä¸ç§éåºæ§cacheç®æ³, å®ç»åäºlruä¸lfuçç¹ç¹ã\n\narc è®ºæï¼å°æ´ä¸ªcacheåæä¸¤é¨åï¼èµ·å§lruålfuåå ä¸åï¼åç»­ä¼å¨æéåºè°æ´partionçä½ç½®(è®°ä¸ºp), é¤æ­¤ï¼lruålfuåèªæä¸ä¸ªghost list(å æ­¤ï¼ä¸å±4ä¸ªlist)ãæ¯æ¬¡ï¼è¢«æ·æ±°çitemæ¾å°å¯¹åºçghost listä¸­ï¼ghost liståªå­keyï¼, ä¾å¦ï¼å¦æè¢«evictedçitemæ¥èªlruçé¨åï¼ åè¯¥itemå¯¹åºçkeyä¼è¢«æ¾å¥lruå¯¹åºçghost list\n\n * ç¬¬ä¸æ¬¡cache miss, åä¼æ¾å¥lru\n * å¦æcache hit, å¦ælfuä¸­æ²¡æï¼åæ¾å¥lfu\n * å¦æcache miss, ä½å¨ghost listä¸­å½ä¸­ï¼è¿è¯´æå¯¹åºçcacheå¦æåå¤§ä¸ä¸ç¹å¿å°±å¥½äºï¼ å¦æå­å¨äºlru ghost list, åp=p+1ï¼å¦åå­å¨äºlfu ghost list, p=p-1.\n * ä¹å°±æ¯è¯´ï¼å©ç¨è¿ç§éåºæºå¶ï¼å½ç³»ç»è¶åäºè®¿é®æè¿çåå®¹ï¼ä¼æ´å¤å°å½ä¸­lru ghost listï¼è¿æ ·ä¼å¢å¤§lruçç©ºé´ï¼ å½ç³»ç»è¶åäºè®¿é®æé¢ç¹çåå®¹ï¼ä¼æ´å¤å°å½ä¸­lfu ghost listï¼è¿æ ·ä¼å¢å lfuçç©ºé´.',charsets:{cjk:!0}},{title:"åå¸å¼ä¸è´æ§åè®®ç®ä»",frontmatter:{title:"åå¸å¼ä¸è´æ§åè®®ç®ä»",date:"2021-01-16T23:29:06.000Z",categories:["blog","design","algorithm"],tags:[null],permalink:null},regularPath:"/blog/design/algorithm_distributed_consensus_protocols.html",relativePath:"blog/design/algorithm_distributed_consensus_protocols.md",key:"v-5180c0ff",path:"/blog/design/algorithm_distributed_consensus_protocols.html",headers:[{level:2,title:"Raftï¼",slug:"raft",normalizedTitle:"raftï¼",charIndex:17},{level:2,title:"Paxosï¼",slug:"paxos",normalizedTitle:"paxosï¼",charIndex:752},{level:2,title:"Gossip:",slug:"gossip",normalizedTitle:"gossip:",charIndex:1746},{level:2,title:"Totemï¼",slug:"totem",normalizedTitle:"totemï¼",charIndex:2002}],headersStr:"Raftï¼ Paxosï¼ Gossip: Totemï¼",content:"# åå¸å¼ä¸è´æ§åè®®ç®ä»\n\n\n# Raftï¼\n\n * leader election\n   * two timeouts\n     * eletction timeout\n       * randomized to be between 150ms and 300ms\n     * heartbeat timeout:\n       * usage: Append Entries messages\n * log replication\n   * client make request to leader\n   * leader make log entry and log replication, expecting major votes from all clients\n   * leader respone to client and accept client's request\n   * leader make log replication that commit client's request\n * status\n   * follower ---\x3e candidate ---\x3e leader\n     * follower become candidate when eletction timeout\n     * candidate become leader when major votes\n * infomations:\n   * url : http://thesecretlivesofdata.com/raft/\n   * github: https://github.com/benbjohnson/thesecretlivesofdata\n\n\n# Paxosï¼\n\n# Basic Paxosï¼\n\n * abstract\n   * å¼ºä¸è´æ§\n   * ProposerãAcceptorãProposalID(ä»¥é«ä½æ¶é´æ³ + ä½ä½æºå¨ IP å¯ä»¥ä¿è¯å¯ä¸æ§åéå¢æ§)\n * steps:\n   \n   * prepare\n     \n     * Proposer åé Prepare\n       * çææ°çProposalID\n     * Acceptor åºç­ Prepare\n       * responseï¼\n         * è¿åèªå·±å·²ç» Accept è¿çææ¡ä¸­ ProposalID æå¤§çé£ä¸ªææ¡çåå®¹ï¼å¦ææ²¡æåè¿åç©ºå¼;\n         * åºç­åè¦å¨æ¬å°æä¹åå½å Propsalid\n       * promiseï¼\n         * ä¸ååºç­ Proposalid å°äºç­äºï¼æ³¨æï¼è¿éæ¯ <= ï¼å½åè¯·æ±ç PrepareRequest\n         * ä¸ååºç­ Proposalid å°äºï¼æ³¨æï¼è¿éæ¯ < ï¼å½åè¯·æ±ç AcceptRequest\n   \n   * accept\n     \n     * Proposer åé Accept\n       * âææ¡çæè§åâï¼\n         * Proposer æ¶éå°å¤æ°æ´¾åºç­ç PrepareResponse åï¼ä»ä¸­éæ©proposalidæå¤§çææ¡åå®¹ï¼ä½ä¸ºè¦åèµ· Accept çææ¡ï¼å¦æè¿ä¸ªææ¡ä¸ºç©ºå¼ï¼åå¯ä»¥èªå·±éæå³å®ææ¡åå®¹ãç¶åæºå¸¦ä¸å½å Proposalidï¼å Paxos éç¾¤çæææºå¨åé AccpetRequestã\n     * Acceptor åºç­ Accept\n       * æ£æ¥AccpetRequestä¸è¿èèªå·±ä¹åä½åºçâä¸¤ä¸ªæ¿è¯ºâæåµä¸ï¼æä¹åå½å Proposalid åææ¡åå®¹ãæå Proposer æ¶éå°å¤æ°æ´¾åºç­ç AcceptResponse åï¼å½¢æå³è®®ã\n * infomations\n   * http://chuansong.me/n/2189245\n   * https://blog.csdn.net/heiyeshuwu/article/details/42426811\n\n# Fast Paxos\n\n# Multi Paxos\n\n\n# Gossip:\n\n * abstract\n   * åçµï¼Anti-Entropyï¼\n   * ç§å­èç¹\n   * å»ä¸­å¿å\n   * æç»ä¸è´æ§ï¼ç°å®ä¸­å­å¨ï¼çè®ºæ æ³è¯æçæ¶é´ç¹ï¼\n * weakness\n   * åä½éä¿¡\n * kernel\n   * ä¿¡æ¯åæ­¥\n   * Merkle tree(MT)æ¯ä¸ä¸ªéå¸¸éååæ­¥çæ°æ®ç»æ\n * paper\n   * Efficient Reconciliation and Flow Control for Anti-Entropy Protocols\n\n\n# Totemï¼\n\n * abstract\n   * å¼ºä¸è´æ§\n * stepsï¼\n   * éä¿¡æ¹å¼\n     * å½éç¾¤æèç¹è¦åèµ·éä¿¡æ¶ï¼éè¦ç­å¾tokenãå½æ¿å°tokenåï¼åå¹¿æ­è¿æ¬¡éè¦åéçæ°æ®ï¼ç¶åä¼ étokenæ¥ç¡®è®¤ææäººé½æ¥æ¶å°æ¶æ¯ã å¦æç¡®è®¤æåï¼éæ¾token\n   * èç¹çå å¥åéåº\n     1. å½éç¾¤ä¸­æèç¹å å¥æ¶ï¼å å¥çèç¹å¹¿æ­ä¸ä¸ªå å¥ä¿¡æ¯ï¼ææäººé½å¼å§å¹¿æ­èªå·±çä¿¡æ¯ï¼å½ææäººé½è·å¾åä¼´ä¿¡æ¯ï¼å¼å§ç±idæå°çäººæäº¤ä¸ä¸ªtokenï¼äº¤ç±ææèç¹ç¡®è®¤ã\n     2. å¦æé½ç¡®è®¤åï¼åèç¹æ­£å¼å å¥ï¼å¼å§æ­£å¸¸è¿è¡ã\n     3. å½éç¾¤æèç¹éåºæ¶ï¼ç±äºä»¤çç¯æ­é¾ï¼è§¦åtokenè¶æ¶ï¼ååæ ·å¼å§å¹¿æ­ä¿¡æ¯ï¼ç¶åç±æå°idæäº¤tokenï¼ç»è¿ç¡®è®¤åæ¢å¤æ­£å¸¸ã",normalizedContent:"# åå¸å¼ä¸è´æ§åè®®ç®ä»\n\n\n# raftï¼\n\n * leader election\n   * two timeouts\n     * eletction timeout\n       * randomized to be between 150ms and 300ms\n     * heartbeat timeout:\n       * usage: append entries messages\n * log replication\n   * client make request to leader\n   * leader make log entry and log replication, expecting major votes from all clients\n   * leader respone to client and accept client's request\n   * leader make log replication that commit client's request\n * status\n   * follower ---\x3e candidate ---\x3e leader\n     * follower become candidate when eletction timeout\n     * candidate become leader when major votes\n * infomations:\n   * url : http://thesecretlivesofdata.com/raft/\n   * github: https://github.com/benbjohnson/thesecretlivesofdata\n\n\n# paxosï¼\n\n# basic paxosï¼\n\n * abstract\n   * å¼ºä¸è´æ§\n   * proposerãacceptorãproposalid(ä»¥é«ä½æ¶é´æ³ + ä½ä½æºå¨ ip å¯ä»¥ä¿è¯å¯ä¸æ§åéå¢æ§)\n * steps:\n   \n   * prepare\n     \n     * proposer åé prepare\n       * çææ°çproposalid\n     * acceptor åºç­ prepare\n       * responseï¼\n         * è¿åèªå·±å·²ç» accept è¿çææ¡ä¸­ proposalid æå¤§çé£ä¸ªææ¡çåå®¹ï¼å¦ææ²¡æåè¿åç©ºå¼;\n         * åºç­åè¦å¨æ¬å°æä¹åå½å propsalid\n       * promiseï¼\n         * ä¸ååºç­ proposalid å°äºç­äºï¼æ³¨æï¼è¿éæ¯ <= ï¼å½åè¯·æ±ç preparerequest\n         * ä¸ååºç­ proposalid å°äºï¼æ³¨æï¼è¿éæ¯ < ï¼å½åè¯·æ±ç acceptrequest\n   \n   * accept\n     \n     * proposer åé accept\n       * âææ¡çæè§åâï¼\n         * proposer æ¶éå°å¤æ°æ´¾åºç­ç prepareresponse åï¼ä»ä¸­éæ©proposalidæå¤§çææ¡åå®¹ï¼ä½ä¸ºè¦åèµ· accept çææ¡ï¼å¦æè¿ä¸ªææ¡ä¸ºç©ºå¼ï¼åå¯ä»¥èªå·±éæå³å®ææ¡åå®¹ãç¶åæºå¸¦ä¸å½å proposalidï¼å paxos éç¾¤çæææºå¨åé accpetrequestã\n     * acceptor åºç­ accept\n       * æ£æ¥accpetrequestä¸è¿èèªå·±ä¹åä½åºçâä¸¤ä¸ªæ¿è¯ºâæåµä¸ï¼æä¹åå½å proposalid åææ¡åå®¹ãæå proposer æ¶éå°å¤æ°æ´¾åºç­ç acceptresponse åï¼å½¢æå³è®®ã\n * infomations\n   * http://chuansong.me/n/2189245\n   * https://blog.csdn.net/heiyeshuwu/article/details/42426811\n\n# fast paxos\n\n# multi paxos\n\n\n# gossip:\n\n * abstract\n   * åçµï¼anti-entropyï¼\n   * ç§å­èç¹\n   * å»ä¸­å¿å\n   * æç»ä¸è´æ§ï¼ç°å®ä¸­å­å¨ï¼çè®ºæ æ³è¯æçæ¶é´ç¹ï¼\n * weakness\n   * åä½éä¿¡\n * kernel\n   * ä¿¡æ¯åæ­¥\n   * merkle tree(mt)æ¯ä¸ä¸ªéå¸¸éååæ­¥çæ°æ®ç»æ\n * paper\n   * efficient reconciliation and flow control for anti-entropy protocols\n\n\n# totemï¼\n\n * abstract\n   * å¼ºä¸è´æ§\n * stepsï¼\n   * éä¿¡æ¹å¼\n     * å½éç¾¤æèç¹è¦åèµ·éä¿¡æ¶ï¼éè¦ç­å¾tokenãå½æ¿å°tokenåï¼åå¹¿æ­è¿æ¬¡éè¦åéçæ°æ®ï¼ç¶åä¼ étokenæ¥ç¡®è®¤ææäººé½æ¥æ¶å°æ¶æ¯ã å¦æç¡®è®¤æåï¼éæ¾token\n   * èç¹çå å¥åéåº\n     1. å½éç¾¤ä¸­æèç¹å å¥æ¶ï¼å å¥çèç¹å¹¿æ­ä¸ä¸ªå å¥ä¿¡æ¯ï¼ææäººé½å¼å§å¹¿æ­èªå·±çä¿¡æ¯ï¼å½ææäººé½è·å¾åä¼´ä¿¡æ¯ï¼å¼å§ç±idæå°çäººæäº¤ä¸ä¸ªtokenï¼äº¤ç±ææèç¹ç¡®è®¤ã\n     2. å¦æé½ç¡®è®¤åï¼åèç¹æ­£å¼å å¥ï¼å¼å§æ­£å¸¸è¿è¡ã\n     3. å½éç¾¤æèç¹éåºæ¶ï¼ç±äºä»¤çç¯æ­é¾ï¼è§¦åtokenè¶æ¶ï¼ååæ ·å¼å§å¹¿æ­ä¿¡æ¯ï¼ç¶åç±æå°idæäº¤tokenï¼ç»è¿ç¡®è®¤åæ¢å¤æ­£å¸¸ã",charsets:{cjk:!0}},{title:"è½¯ä»¶è®¾è®¡ç7å¤§åå",frontmatter:{title:"è½¯ä»¶è®¾è®¡ç7å¤§åå",date:"2020-04-13T00:00:00.000Z",description:"è½¯ä»¶è®¾è®¡ç7å¤§åå",permalink:null,categories:["blog","design"],tags:[null]},regularPath:"/blog/design/architecture_7principle_in_software.html",relativePath:"blog/design/architecture_7principle_in_software.md",key:"v-31e2af82",path:"/blog/design/architecture_7principle_in_software.html",headersStr:null,content:'# è½¯ä»¶è®¾è®¡ç7å¤§åå\n\n# å¼-é­åå(Open-Closed Principle, OCP)\n\n * å¯¹æ©å±å¼å,å¯¹ä¿®æ¹å³é­\n * æ¯é¢åå¯¹è±¡è®¾è®¡ï¼OODï¼çåºç³ï¼ä¹æ¯æéè¦çåå\n\n# éæ°ä»£æ¢åå(Liskov Substitution Principle)\n\n * æ¯ç»§æ¿å¤ç¨çåºç³\n * ä¸¥æ ¼è¡¨è¾¾:å¦ææ¯ä¸ä¸ªç±»åä¸ºT1çå¯¹è±¡o1,é½æç±»åä¸ºT2çå¯¹è±¡o2,ä½¿å¾ä»¥T1å®ä¹çææç¨åºPå¨ææçå¯¹è±¡o1é½ä»£æ¢ç§°o2æ¶,ç¨åºPçè¡ä¸ºæ²¡æåå,é£ä¹ç±»åT2æ¯ç±»åT1çå­ç±»å\n * æ¢è¨ä¹,ä¸ä¸ªè½¯ä»¶å®ä½å¦æä½¿ç¨çæ¯ä¸ä¸ªåºç±»çè¯,é£ä¹ä¸å®éç¨äºå¶å­ç±»,èä¸å®æ ¹æ¬ä¸è½å¯è§åºåºç±»å¯¹è±¡åå­ç±»å¯¹è±¡çåºå«.åªæè¡çç±»å¯ä»¥æ¿æ¢åºç±»ï¼è½¯ä»¶åä½çåè½æè½ä¸åå½±åï¼åºç±»æè½çæ­£è¢«å¤ç¨ï¼èè¡çç±»ä¹è½å¤å¨åºç±»çåºç¡ä¸å¢å æ°åè½ã\n * åè¿æ¥çä»£æ¢ä¸æç«\n * è¯¥ç±»èåçä¾ç¨ä¸º:æ­£æ¹å½¢æ¯å¦æ¯é¿æ¹å½¢çå­ç±»(ç­æ¡æ¯"å¦")\n * åºå½å°½éä»æ½è±¡ç±»ç»§æ¿,èä¸ä»å·ä½ç±»ç»§æ¿\n * my noteï¼æè¿°äºç»§æ¿å³ç³»åºè¯¥æ»¡è¶³çæ¡ä»¶ï¼å­ç±»å¯ä»¥æ¿æ¢ç¶ç±»ï¼å¹¶ä¿è¯ç¨åºè¡ä¸ºæ²¡æåå\n\n# ä¾èµåç½®åå(Dependence Inversion Principle)\n\n * æ½è±¡ä¸åºå½ä¾èµäºç»è,ç»èåºå½ä¾èµäºæ½è±¡.(Program to an interface, not an implementaction)\n * ä¸åºå½ä½¿ç¨å·ä½ç±»è¿è¡åéçç±»åå£°æ,åéç±»åå£°æ,æ¹æ³çè¿è¿ç±»åå£°æ,ä»¥åæ°æ®ç±»åçè½¬æ¢ç­ãèåºè¯¥ä½¿ç¨æ¥å£åæ½è±¡ç±»ã\n\n> ==æ¥å£ä¸æ½è±¡ç±»==\n\n * æ¥å£ä¸æ½è±¡çåºå«ï¼æ½è±¡ç±»å¯ä»¥æä¾æäºæ¹æ³çé¨åå®ç°,èæ¥å£åä¸å¯ä»¥,å¦æåä¸ä¸ªæ½è±¡ç±»å å¥ä¸ä¸ªæ°çå·ä½æ¹æ³,é£ä¹ææçå­ç±»åå°±é½å¾å°å¾å°äºè¿ä¸ªæ°çå·ä½æ¹æ³,èæ¥å£åä¸å°è¿ä¸ç¹.\n * ä¸ä¸ªæ½è±¡ç±»çå®ç°åªè½ç±è¿ä¸ªæ½è±¡ç±»çå­ç±»ç»åº,èç±äºä¸è¬è¯­è¨é½éå¶ä¸ä¸ªç±»åªè½ä»æå¤ä¸ä¸ªè¶ç±»ç»§æ¿,å æ­¤å°æ½è±¡ä½ä¸ºç±»åå®ä¹å·¥å·çæè½å¤§æææ£.åè¿æ¥,ä¸ä¸ªç±»å¯ä»¥å®ç°ä»»æå¤ä¸ªæ¥å£.\n * ä»ä»£ç éæçè§åº¦,å°ä¸ä¸ªåç¬çå·ä½ç±»éææä¸ä¸ªæ¥å£çå®ç°æ¯å¾å®¹æç,åªéè¦å£°æä¸ä¸ªæ¥å£,å¹¶å°éè¦çæ¹æ³æ·»å å°æ¥å£å£°æä¸­,ç¶åå¨å·ä½ç±»å®ä¹è¯­å¥ä¸­å ä¸ä¿çå­ä»¥ç»§æ¿äºè¯¥æ¥å£å°±è¡äº.èå¯¹å·ä½ç±»éææä¸ä¸ªæ½è±¡ç±»çå®ç°ï¼å°±ä¸é£ä¹å®¹æäº,å ä¸ºè¿ä¸ªå·ä½ç±»æå¯è½å·²ç»æä¸ä¸ªè¶ç±».è¿æ ·ä¸æ¥,è¿ä¸ªæ°å®ä¹çæ½è±¡ç±»åªå¥½ç»§ç»­åä¸ç§»å¨,åæè¿ä¸ªè¶ç±»çè¶ç±»,å¦æ­¤å¾ªç¯,æåè¿ä¸ªæ°çæ½è±¡ç±»å¿å®å¤äºæ´ä¸ªç±»åç­çº§ç»æçæä¸ç«¯,ä»èä½¿ç»è®°ç»æä¸­çæææåé½ä¼åå°å½±å.\n * æ¥å£æ¯å®ä¹æ··åç±»åççæ³å·¥å·,æä¸ºæ··åç±»å,å°±æ¯å¨ä¸ä¸ªç±»çä¸»ç±»åä¹å¤çæ¬¡è¦ç±»å.ä¸ä¸ªæ··åç±»åè¡¨æä¸ä¸ªç±»ä¸ä»ä»å·ææä¸ªä¸»ç±»åçè¡ä¸º,èä¸å·æå¶ä»çæ¬¡è¦è¡ä¸º.\n * èåä½¿ç¨æ¥å£åæ½è±¡ç±»: ç±äºæ½è±¡ç±»å·ææä¾ç¼ºçå®ç°çä¼ç¹,èæ¥å£å·æå¶ä»ææä¼ç¹,æä»¥èåä½¿ç¨ä¸¤èå°±æ¯ä¸ä¸ªå¾å¥½çéæ©. é¦å,å£°æç±»åçå·¥ä½ä»ç¶æ¥å£æ¿æç,ä½æ¯åæ¶ç»åºçè¿æä¸ä¸ªæ½è±¡ç±»,ä¸ºè¿ä¸ªæ¥å£ç»åºä¸ä¸ªç¼ºçå®ç°.å¶ä»åå±äºè¿ä¸ªæ½è±¡ç±»åçå·ä½ç±»å¯ä»¥éæ©å®ç°è¿ä¸ªæ¥å£,ä¹å¯ä»¥éæ©ç»§æ¿èªè¿ä¸ªæ½è±¡ç±».å¦æä¸ä¸ªå·ä½ç±»ç´æ¥å®ç°è¿ä¸ªæ¥å£çè¯,å®å°±å¿é¡»èªè¡å®ç°ææçæ¥å£;ç¸å,å¦æå®ç»§æ¿èªæ½è±¡ç±»çè¯,å®å¯ä»¥çå»ä¸äºä¸å¿è¦ççæ¹æ³,å ä¸ºå®å¯ä»¥ä»æ½è±¡ç±»ä¸­èªå¨å¾å°è¿äºæ¹æ³çç¼ºçå®ç°;å¦æéè¦åæ¥å£å å¥ä¸ä¸ªæ°çæ¹æ³çè¯,é£ä¹åªè¦åæ¶åè¿ä¸ªæ½è±¡ç±»å å¥è¿ä¸ªæ¹æ³çä¸ä¸ªå·ä½å®ç°å°±å¯ä»¥äº,å ä¸ºææç»§æ¿èªè¿ä¸ªæ½è±¡ç±»çå­ç±»é½ä¼ä»è¿ä¸ªæ½è±¡ç±»å¾å°è¿ä¸ªå·ä½æ¹æ³.è¿å¶å®å°±æ¯ç¼ºçééå¨æ¨¡å¼(Defaule Adapter).\n\n# æ¥å£éç¦»åå(Interface Segregation Principle, ISP)\n\n * ä¸ä¸ªç±»å¯¹å¦å¤ä¸ä¸ªç±»çä¾èµæ¯å»ºç«å¨æå°çæ¥å£ä¸\n * ä½¿ç¨å¤ä¸ªä¸é¨çæ¥å£æ¯ä½¿ç¨åä¸çæ»æ¥å£è¦å¥½\n * èæ¥å£ä¼å¯¼è´ä»ä»¬çå®¢æ·ç¨åºä¹é´äº§çä¸æ­£å¸¸çè¦å.å½ä¸ä¸ªå®¢æ·ç¨åºè¦æ±è¯¥èæ¥å£è¿è¡ä¸ä¸ªæ¹å¨æ¶,ä¼å½±åå°ææå¶ä»çå®¢æ·ç¨åº.å æ­¤å®¢æ·ç¨åºåºè¯¥ä»ä»ä¾èµä»ä»¬å®ééè¦è°ç¨çæ¹æ³.\n\n# åæ/èåå¤ç¨åå(Composite/Aggregate Reuse Principle,CARP)\n\n * è¦å°½éä½¿ç¨åæ/èå,å°½éä¸è¦ä½¿ç¨ç»§æ¿\n\n# è¿ªç±³ç¹æ³å(Law of Demeter LoD)\n\n * åå«åæå°ç¥è¯åå(Least Knowledge Principle,LKP),å°±æ¯è¯´,ä¸ä¸ªå¯¹è±¡åºå½å¯¹å¶ä»å¯¹è±¡æå°½å¯è½å°çäºäºè§£\n\n# åä¸èè´£åå(Simple responsibility pinciple SRP)\n\n * åæ¬å½æ° å ç±»çå®ç°ï¼å»ºè®®æ¥å£ä¸å®è¦åä¸èè´£ï¼ç±»çè®¾è®¡å°½éåå°åªæä¸ä¸ªåå ä¼å¼èµ·åå',normalizedContent:'# è½¯ä»¶è®¾è®¡ç7å¤§åå\n\n# å¼-é­åå(open-closed principle, ocp)\n\n * å¯¹æ©å±å¼å,å¯¹ä¿®æ¹å³é­\n * æ¯é¢åå¯¹è±¡è®¾è®¡ï¼oodï¼çåºç³ï¼ä¹æ¯æéè¦çåå\n\n# éæ°ä»£æ¢åå(liskov substitution principle)\n\n * æ¯ç»§æ¿å¤ç¨çåºç³\n * ä¸¥æ ¼è¡¨è¾¾:å¦ææ¯ä¸ä¸ªç±»åä¸ºt1çå¯¹è±¡o1,é½æç±»åä¸ºt2çå¯¹è±¡o2,ä½¿å¾ä»¥t1å®ä¹çææç¨åºpå¨ææçå¯¹è±¡o1é½ä»£æ¢ç§°o2æ¶,ç¨åºpçè¡ä¸ºæ²¡æåå,é£ä¹ç±»åt2æ¯ç±»åt1çå­ç±»å\n * æ¢è¨ä¹,ä¸ä¸ªè½¯ä»¶å®ä½å¦æä½¿ç¨çæ¯ä¸ä¸ªåºç±»çè¯,é£ä¹ä¸å®éç¨äºå¶å­ç±»,èä¸å®æ ¹æ¬ä¸è½å¯è§åºåºç±»å¯¹è±¡åå­ç±»å¯¹è±¡çåºå«.åªæè¡çç±»å¯ä»¥æ¿æ¢åºç±»ï¼è½¯ä»¶åä½çåè½æè½ä¸åå½±åï¼åºç±»æè½çæ­£è¢«å¤ç¨ï¼èè¡çç±»ä¹è½å¤å¨åºç±»çåºç¡ä¸å¢å æ°åè½ã\n * åè¿æ¥çä»£æ¢ä¸æç«\n * è¯¥ç±»èåçä¾ç¨ä¸º:æ­£æ¹å½¢æ¯å¦æ¯é¿æ¹å½¢çå­ç±»(ç­æ¡æ¯"å¦")\n * åºå½å°½éä»æ½è±¡ç±»ç»§æ¿,èä¸ä»å·ä½ç±»ç»§æ¿\n * my noteï¼æè¿°äºç»§æ¿å³ç³»åºè¯¥æ»¡è¶³çæ¡ä»¶ï¼å­ç±»å¯ä»¥æ¿æ¢ç¶ç±»ï¼å¹¶ä¿è¯ç¨åºè¡ä¸ºæ²¡æåå\n\n# ä¾èµåç½®åå(dependence inversion principle)\n\n * æ½è±¡ä¸åºå½ä¾èµäºç»è,ç»èåºå½ä¾èµäºæ½è±¡.(program to an interface, not an implementaction)\n * ä¸åºå½ä½¿ç¨å·ä½ç±»è¿è¡åéçç±»åå£°æ,åéç±»åå£°æ,æ¹æ³çè¿è¿ç±»åå£°æ,ä»¥åæ°æ®ç±»åçè½¬æ¢ç­ãèåºè¯¥ä½¿ç¨æ¥å£åæ½è±¡ç±»ã\n\n> ==æ¥å£ä¸æ½è±¡ç±»==\n\n * æ¥å£ä¸æ½è±¡çåºå«ï¼æ½è±¡ç±»å¯ä»¥æä¾æäºæ¹æ³çé¨åå®ç°,èæ¥å£åä¸å¯ä»¥,å¦æåä¸ä¸ªæ½è±¡ç±»å å¥ä¸ä¸ªæ°çå·ä½æ¹æ³,é£ä¹ææçå­ç±»åå°±é½å¾å°å¾å°äºè¿ä¸ªæ°çå·ä½æ¹æ³,èæ¥å£åä¸å°è¿ä¸ç¹.\n * ä¸ä¸ªæ½è±¡ç±»çå®ç°åªè½ç±è¿ä¸ªæ½è±¡ç±»çå­ç±»ç»åº,èç±äºä¸è¬è¯­è¨é½éå¶ä¸ä¸ªç±»åªè½ä»æå¤ä¸ä¸ªè¶ç±»ç»§æ¿,å æ­¤å°æ½è±¡ä½ä¸ºç±»åå®ä¹å·¥å·çæè½å¤§æææ£.åè¿æ¥,ä¸ä¸ªç±»å¯ä»¥å®ç°ä»»æå¤ä¸ªæ¥å£.\n * ä»ä»£ç éæçè§åº¦,å°ä¸ä¸ªåç¬çå·ä½ç±»éææä¸ä¸ªæ¥å£çå®ç°æ¯å¾å®¹æç,åªéè¦å£°æä¸ä¸ªæ¥å£,å¹¶å°éè¦çæ¹æ³æ·»å å°æ¥å£å£°æä¸­,ç¶åå¨å·ä½ç±»å®ä¹è¯­å¥ä¸­å ä¸ä¿çå­ä»¥ç»§æ¿äºè¯¥æ¥å£å°±è¡äº.èå¯¹å·ä½ç±»éææä¸ä¸ªæ½è±¡ç±»çå®ç°ï¼å°±ä¸é£ä¹å®¹æäº,å ä¸ºè¿ä¸ªå·ä½ç±»æå¯è½å·²ç»æä¸ä¸ªè¶ç±».è¿æ ·ä¸æ¥,è¿ä¸ªæ°å®ä¹çæ½è±¡ç±»åªå¥½ç»§ç»­åä¸ç§»å¨,åæè¿ä¸ªè¶ç±»çè¶ç±»,å¦æ­¤å¾ªç¯,æåè¿ä¸ªæ°çæ½è±¡ç±»å¿å®å¤äºæ´ä¸ªç±»åç­çº§ç»æçæä¸ç«¯,ä»èä½¿ç»è®°ç»æä¸­çæææåé½ä¼åå°å½±å.\n * æ¥å£æ¯å®ä¹æ··åç±»åççæ³å·¥å·,æä¸ºæ··åç±»å,å°±æ¯å¨ä¸ä¸ªç±»çä¸»ç±»åä¹å¤çæ¬¡è¦ç±»å.ä¸ä¸ªæ··åç±»åè¡¨æä¸ä¸ªç±»ä¸ä»ä»å·ææä¸ªä¸»ç±»åçè¡ä¸º,èä¸å·æå¶ä»çæ¬¡è¦è¡ä¸º.\n * èåä½¿ç¨æ¥å£åæ½è±¡ç±»: ç±äºæ½è±¡ç±»å·ææä¾ç¼ºçå®ç°çä¼ç¹,èæ¥å£å·æå¶ä»ææä¼ç¹,æä»¥èåä½¿ç¨ä¸¤èå°±æ¯ä¸ä¸ªå¾å¥½çéæ©. é¦å,å£°æç±»åçå·¥ä½ä»ç¶æ¥å£æ¿æç,ä½æ¯åæ¶ç»åºçè¿æä¸ä¸ªæ½è±¡ç±»,ä¸ºè¿ä¸ªæ¥å£ç»åºä¸ä¸ªç¼ºçå®ç°.å¶ä»åå±äºè¿ä¸ªæ½è±¡ç±»åçå·ä½ç±»å¯ä»¥éæ©å®ç°è¿ä¸ªæ¥å£,ä¹å¯ä»¥éæ©ç»§æ¿èªè¿ä¸ªæ½è±¡ç±».å¦æä¸ä¸ªå·ä½ç±»ç´æ¥å®ç°è¿ä¸ªæ¥å£çè¯,å®å°±å¿é¡»èªè¡å®ç°ææçæ¥å£;ç¸å,å¦æå®ç»§æ¿èªæ½è±¡ç±»çè¯,å®å¯ä»¥çå»ä¸äºä¸å¿è¦ççæ¹æ³,å ä¸ºå®å¯ä»¥ä»æ½è±¡ç±»ä¸­èªå¨å¾å°è¿äºæ¹æ³çç¼ºçå®ç°;å¦æéè¦åæ¥å£å å¥ä¸ä¸ªæ°çæ¹æ³çè¯,é£ä¹åªè¦åæ¶åè¿ä¸ªæ½è±¡ç±»å å¥è¿ä¸ªæ¹æ³çä¸ä¸ªå·ä½å®ç°å°±å¯ä»¥äº,å ä¸ºææç»§æ¿èªè¿ä¸ªæ½è±¡ç±»çå­ç±»é½ä¼ä»è¿ä¸ªæ½è±¡ç±»å¾å°è¿ä¸ªå·ä½æ¹æ³.è¿å¶å®å°±æ¯ç¼ºçééå¨æ¨¡å¼(defaule adapter).\n\n# æ¥å£éç¦»åå(interface segregation principle, isp)\n\n * ä¸ä¸ªç±»å¯¹å¦å¤ä¸ä¸ªç±»çä¾èµæ¯å»ºç«å¨æå°çæ¥å£ä¸\n * ä½¿ç¨å¤ä¸ªä¸é¨çæ¥å£æ¯ä½¿ç¨åä¸çæ»æ¥å£è¦å¥½\n * èæ¥å£ä¼å¯¼è´ä»ä»¬çå®¢æ·ç¨åºä¹é´äº§çä¸æ­£å¸¸çè¦å.å½ä¸ä¸ªå®¢æ·ç¨åºè¦æ±è¯¥èæ¥å£è¿è¡ä¸ä¸ªæ¹å¨æ¶,ä¼å½±åå°ææå¶ä»çå®¢æ·ç¨åº.å æ­¤å®¢æ·ç¨åºåºè¯¥ä»ä»ä¾èµä»ä»¬å®ééè¦è°ç¨çæ¹æ³.\n\n# åæ/èåå¤ç¨åå(composite/aggregate reuse principle,carp)\n\n * è¦å°½éä½¿ç¨åæ/èå,å°½éä¸è¦ä½¿ç¨ç»§æ¿\n\n# è¿ªç±³ç¹æ³å(law of demeter lod)\n\n * åå«åæå°ç¥è¯åå(least knowledge principle,lkp),å°±æ¯è¯´,ä¸ä¸ªå¯¹è±¡åºå½å¯¹å¶ä»å¯¹è±¡æå°½å¯è½å°çäºäºè§£\n\n# åä¸èè´£åå(simple responsibility pinciple srp)\n\n * åæ¬å½æ° å ç±»çå®ç°ï¼å»ºè®®æ¥å£ä¸å®è¦åä¸èè´£ï¼ç±»çè®¾è®¡å°½éåå°åªæä¸ä¸ªåå ä¼å¼èµ·åå',charsets:{cjk:!0}},{title:"MVP MVP MVVM",frontmatter:{title:"MVP MVP MVVM",date:"2020-04-13T00:00:00.000Z",description:"MVP MVP MVVM",permalink:null,categories:["blog","design"],tags:[null]},regularPath:"/blog/design/architecture_mvc_mvp_mvvm.html",relativePath:"blog/design/architecture_mvc_mvp_mvvm.md",key:"v-92792e82",path:"/blog/design/architecture_mvc_mvp_mvvm.html",headers:[{level:2,title:"MVC (Model-View-Controller)",slug:"mvc-model-view-controller",normalizedTitle:"mvc (model-view-controller)",charIndex:19},{level:2,title:"MVP (Model-View-Presenter)",slug:"mvp-model-view-presenter",normalizedTitle:"mvp (model-view-presenter)",charIndex:899},{level:2,title:"MVVM (Model-View-ViewModel)",slug:"mvvm-model-view-viewmodel",normalizedTitle:"mvvm (model-view-viewmodel)",charIndex:2337},{level:2,title:"å¤æ³¨",slug:"å¤æ³¨",normalizedTitle:"å¤æ³¨",charIndex:2677}],headersStr:"MVC (Model-View-Controller) MVP (Model-View-Presenter) MVVM (Model-View-ViewModel) å¤æ³¨",content:"# MVP MVP MVVM\n\n\n# MVC (Model-View-Controller)\n\n\n\n * åå±ï¼\n   * å½æç¨æ·çè¡ä¸ºè§¦åæä½æ¶ï¼ä¼ææ§å¶å¨æ´æ°æ¨¡åï¼å¹¶éç¥è§å¾è¿è¡æ´æ°ï¼å¨è¿æ¶è§å¾åæ¨¡åè¯·æ±æ°çæ°æ®\n     * Model: ç®¡çåºç¨çè¡ä¸ºåæ°æ®ï¼ååºæ°æ®è¯·æ±(ç»å¸¸æ¥èªè§å¾)åæ´æ°ç¶æçæä»¤(ç»å¸¸æ¥èªæ§å¶å¨)\n     * View: ç®¡çä½ä¸ºä½å¾å±ç¤ºå°å±å¹ä¸çå¾å½¢åæå­è¾åº\n     * Controller: ç¿»è¯ç¨æ·çè¾å¥å¹¶ä¾ç§ç¨æ·çè¾å¥æä½æ¨¡ååè§å¾\n * é®é¢\n   * å¾å®¹æå° VC å±åå°ä¸èµ·ï¼é æ VæC å±èè¿\n   * Controlleræ´å¤æ¶åæ¿æä¸ç§è½¬åçä½ç¨\n * è¯´æ\n   * MVC æéè¦çç®çå¹¶ä¸æ¯è§å®åä¸ªæ¨¡ååºè¯¥å¦ä½äº¤äºåèç³»ï¼èæ¯å°åæçæ··ä¹±çåºç¨ç¨åºåååºåççå±çº§ï¼æä¸å¢æ··ä¹±çä»£ç ï¼æç§å±ç¤ºå±åé¢åå±åæä¸¤ä¸ªé¨åã\n   * åç¦»å±ç¤ºå±\n     * GUI åºç¨ç¨åºç±äºå¶éè¦å±ç¤ºåå®¹çç¹ç¹ï¼åä¸ºä¸¤ä¸ªé¨åï¼ä¸é¨åæ¯ç¨äºå±ç¤ºåå®¹çå±ç¤ºå±(Presentation Layer)ï¼å¦ä¸é¨ååå«é¢ååæ°æ®é»è¾çé¢åå±(Domain Layer)\n     * å±ç¤ºå±ä¾èµäºé¢åå±ä¸­å­å¨çæ°æ®ï¼èé¢åå±å¯¹äºå±ç¤ºå±ä¸æ æç¥ï¼é¢åå±å¶å®ä¹æ¯ MVC æ¨¡å¼ä¸­çæ¨¡åå±ï¼èå±ç¤ºå±å¯ä»¥çè§£ä¸º VC é¨å\n   * è§å¯èåæ­¥(è§å¯èæ¨¡å¼)\n     * å ä¸ºå¨ MVC æ¨¡å¼ä¸­ï¼æ¨¡åå¯ä»¥åç¬å·¥ä½ï¼åæ¶å®å¯¹ä½¿ç¨æ¨¡åä¸­æ°æ®çè§å¾åæ§å¶å¨ä¸æ æç¥ï¼ä¸ºäºä¿ææ¨¡åçç¬ç«æ§ï¼æä»¬éè¦ä¸ç§æºå¶ï¼å½æ¨¡ååçæ¹åæ¶ï¼è½å¤åæ¶æ´æ°å¤ä¸ªè§å¾åæ§å¶å¨çåå®¹ï¼å¨è¿æ¶ï¼å°±éè¦ä»¥è§å¯èåæ­¥çæ¹å¼è§£å³è¿ä¸ªé®é¢ã\n   * å ä¸»å¯¼å°ä½çæ§å¶å¨\n     * æ§å¶å¨æ¿æäºMVCæ¶æä¸­çå¤§é¨åä¸å¡é»è¾ï¼å¨ç¨æ·è¯·æ±å°è¾¾æèäºä»¶åçæ¶é½ä¼é¦åéç¥æ§å¶å¨å¹¶ç±å®æ¥å³å®å¦ä½ååºè¿æ¬¡è¯·æ±æèäºä»¶ã\n   * è¢«å¨çæ¨¡å\n     * æ¨¡åé½ä¸ä¼ä¸»å¨åè§å¾æèæ§å¶å¨æ¨éæ¶æ¯ãå®å¯¹äºè§å¾åæ§å¶å¨çå­å¨å¹¶ä¸ç¥æï¼åªæ¯åå¤é¨æä¾æ¥å£å¹¶ååºè§å¾åæ§å¶å¨å¯¹äºæ°æ®çè¯·æ±åæ´æ°æä½ã\n\n\n# MVP (Model-View-Presenter)\n\n\n\n * åå±\n   * Modelè´è´£æ°æ®(çå­å¨ãä»¥åå¢å æ¹æ¥ç­å¨ä½)ãä¸è¬ä¼ä½¿ç¨ Model interface ç¨æ¥éä½è¦å\n   * Viewè´è´£æ¾ç¤º(ç»å¶UIåç´ )ä»¥åä¸ç¨æ·è¿è¡äº¤äº(å¨Androidä¸­ä½ç°ä¸ºActivity)\n     * ä¸è¬ä¼ä½¿ç¨ View interface : éè¦Viewå®ç°çæ¥å£\n     * Viewéè¿View interfaceä¸Presenterè¿è¡äº¤äºï¼éä½è¦åï¼æ¹ä¾¿è¿è¡ååæµè¯\n   * Presenterè´è´£(ä¸ç¨æ·äº¤äºç)ä¸å¡é»è¾\n * å®ç°\n   * æ ¹æ®PresenteråViewå¯¹é»è¾ä»£ç åæçç¨åº¦ä¸åï¼è¿ç§æ¨¡å¼åæä¸¤ç§æåµï¼\n     * Passive View(å¸¸ç¨)\n       * äº¤äºæµç¨\n         \n             1ãå½è§å¾æ¥æ¶å°æ¥èªç¨æ·çäºä»¶æ¶ï¼ä¼å°äºä»¶è½¬äº¤ç» Presenter è¿è¡å¤ç\n             2ãè¢«å¨çè§å¾åå¤çæ´é²æ¥å£ï¼å½éè¦æ´æ°è§å¾æ¶ Presenter éè¿è§å¾æ´é²çæ¥å£æ´æ°è§å¾çåå®¹\n             3ãPresenter è´è´£å¯¹æ¨¡åè¿è¡æä½åæ´æ°ï¼å¨éè¦æ¶ååºå¶ä¸­å­å¨çä¿¡æ¯\n             4ãå½æ¨¡åå±æ¹åæ¶ï¼å¯ä»¥å°æ¹åçä¿¡æ¯åéç»è§å¯è Presenter\n         \n         \n         1\n         2\n         3\n         4\n         \n       * è¯´æ\n         * ViewåPresenteråéç¨æ·äº¤äºè¯·æ±:\n           * åºè¯¥éç¨è¿æ ·çå£å»ï¼âæç°å¨å°ç¨æ·äº¤äºè¯·æ±åéç»ä½ ï¼ä½ ççåï¼éè¦æçæ¶åæä¼åå©ä½ â\n           * ä¸åºè¯¥æ¯è¿æ ·ï¼âæç°å¨å¤çç¨æ·äº¤äºè¯·æ±äºï¼æç¥éè¯¥æä¹åï¼ä½æ¯æéè¦ä½ çæ¯æï¼å ä¸ºå®ç°ä¸å¡é»è¾çModelåªä¿¡ä»»ä½ âï¼\n         * å¯¹äºç»å®å°Viewä¸çæ°æ®ï¼ä¸åºè¯¥æ¯Viewä»Presenterä¸âæâåæ¥çï¼åºè¯¥æ¯Presenterä¸»å¨âæ¨âç»Viewçï¼\n         * View å°½å¯è½ä¸ç»´æ¤æ°æ®ç¶æ, å ä¸ºå®ä»ä»æ¯ç¨æ·äº¤äºè¯·æ±çæ±æ¥èï¼ä¸åä¸ååºç¨æ·äº¤äºç¸å³çé»è¾åæµç¨\n     * Supervisor Controller\n       * è§å¾åæ¨¡åä¹é´æ°å¢çä¾èµå°±æ¯æ°æ®ç»å®çäº§ç©ï¼è§å¾éè¿å£°æå¼çè¯­æ³ä¸æ¨¡åä¸­çç®åå±æ§è¿è¡ç»å®ï¼å½æ¨¡ååçæ¹åæ¶ï¼ä¼éç¥å¶è§å¯èè§å¾ä½åºç¸åºçæ´æ°ã\n       * è¿ç§æ¹å¼è½å¤åè½»çç£æ§å¶å¨çè´æï¼åå°å¶ä¸­ç®åçä»£ç ï¼å°ä¸é¨åé»è¾äº¤ç±è§å¾è¿è¡å¤çï¼è¿æ ·ä¹å°±å¯¼è´äºè§å¾åæ¶å¯ä»¥è¢« Presenter åæ°æ®ç»å®ä¸¤ç§æ¹å¼æ´æ°ï¼ç¸æ¯äºè¢«å¨è§å¾ï¼çç£æ§å¶å¨çæ¹å¼ä¹éä½äºè§å¾çå¯æµè¯æ§åå°è£æ§ã\n * è¯´æ\n   * MVP ä¸ MVC å¯¹æ¯\n     * MVP ä¸ MVC ä¹é´çéå¤§åºå«å°±æ¯ï¼MVP(Passive View)ä¸­çè§å¾åæ¨¡åæ¯å®å¨è§£è¦çï¼å®ä»¬å¯¹äºå¯¹æ¹çå­å¨å®å¨ä¸ç¥æ\n   * å ä¸»å¯¼å°ä½çè§å¾\n     * è§å¾å±å¨æ´ä¸ªæ¶æä¸­é½æ¯å ä¸»å¯¼å°ä½ç\n     * å¨ MVC ä¸­ï¼æ§å¶å¨è´è´£ä»¥ä¸åçè§å¾ååºå®¢æ·ç«¯è¯·æ±çä¸åå¨ä½ï¼ç¶è MVP ä¸­è§å¾å±éæ©å¥½è¦æ¸²æçå¾å±åå°ææçå¨ä½äº¤ç» Presenter è¿è¡å¤ç\n\n\n# MVVM (Model-View-ViewModel)\n\n * åå±\n   * ViewModelå¯ä»¥çè§£ææ¯Viewçæ°æ®æ¨¡ååPresenterçåä½ï¼è¯´ç½äºå°±æ¯åå«Viewçä¸äºæ°æ®å±æ§åæä½çä¸ä¸\n   * ViewModelåViewä¹é´çäº¤äºéè¿Data Bindingå®æï¼èData Bindingå¯ä»¥å®ç°ååçäº¤äºï¼è¿å°±ä½¿å¾è§å¾åæ§å¶å±ä¹é´çè¦åç¨åº¦è¿ä¸æ­¥éä½ã\n * è¯´æ\n   * è¿ç§æ¨¡å¼çå³é®ææ¯å°±æ¯æ°æ®ç»å®(data binding)\n   * Viewçååä¼ç´æ¥å½±åViewModelï¼ViewModelçååæèåå®¹ä¹ä¼ç´æ¥ä½ç°å¨Viewä¸\n   * å®å®éä¸æ¯æ¡æ¶æ¿åºç¨å¼åèåäºä¸äºå·¥ä½ï¼å¼åèåªéè¦è¾å°çä»£ç å°±è½å®ç°æ¯è¾å¤æçäº¤äº\n\n\n# å¤æ³¨\n\n * è¿äºæ¨¡å¼ï¼åªæ¯å¯¹æ°æ®ãé»è¾ãè§å¾è¿ä¸å±çä¸åååæ¹å¼ï¼æ´ä½ç®çè¿æ¯ä¸å±è§£è¦\n * MVPåMVVMå®å¨éç¦»äºModelåViewï¼ä½æ¯å¨æäºæåµä¸ï¼æ°æ®ä»Modelå°ViewModelæèPresenterçæ·è´å¼éå¾å¤§ï¼å¯è½ä¹ä¼ç»åMVCçæ¹å¼ï¼Modelç´æ¥éç¥Viewè¿è¡åæ´ã\n * å¨å®éçåºç¨ä¸­å¾æå¯è½ä½ å·²ç»å¨ä¸ç¥ä¸è§ä¸­å°å ç§æ¨¡å¼èåå¨ä¸èµ·ï¼ä½æ¯ä¸ºäºä»£ç çå¯æ©å±ãå¯æµè¯æ§ï¼å¿é¡»åå°æ¨¡åçè§£è¦ï¼ä¸ç¸å³çä»£ç ä¸è¦æ¾å¨ä¸èµ·ã",normalizedContent:"# mvp mvp mvvm\n\n\n# mvc (model-view-controller)\n\n\n\n * åå±ï¼\n   * å½æç¨æ·çè¡ä¸ºè§¦åæä½æ¶ï¼ä¼ææ§å¶å¨æ´æ°æ¨¡åï¼å¹¶éç¥è§å¾è¿è¡æ´æ°ï¼å¨è¿æ¶è§å¾åæ¨¡åè¯·æ±æ°çæ°æ®\n     * model: ç®¡çåºç¨çè¡ä¸ºåæ°æ®ï¼ååºæ°æ®è¯·æ±(ç»å¸¸æ¥èªè§å¾)åæ´æ°ç¶æçæä»¤(ç»å¸¸æ¥èªæ§å¶å¨)\n     * view: ç®¡çä½ä¸ºä½å¾å±ç¤ºå°å±å¹ä¸çå¾å½¢åæå­è¾åº\n     * controller: ç¿»è¯ç¨æ·çè¾å¥å¹¶ä¾ç§ç¨æ·çè¾å¥æä½æ¨¡ååè§å¾\n * é®é¢\n   * å¾å®¹æå° vc å±åå°ä¸èµ·ï¼é æ væc å±èè¿\n   * controlleræ´å¤æ¶åæ¿æä¸ç§è½¬åçä½ç¨\n * è¯´æ\n   * mvc æéè¦çç®çå¹¶ä¸æ¯è§å®åä¸ªæ¨¡ååºè¯¥å¦ä½äº¤äºåèç³»ï¼èæ¯å°åæçæ··ä¹±çåºç¨ç¨åºåååºåççå±çº§ï¼æä¸å¢æ··ä¹±çä»£ç ï¼æç§å±ç¤ºå±åé¢åå±åæä¸¤ä¸ªé¨åã\n   * åç¦»å±ç¤ºå±\n     * gui åºç¨ç¨åºç±äºå¶éè¦å±ç¤ºåå®¹çç¹ç¹ï¼åä¸ºä¸¤ä¸ªé¨åï¼ä¸é¨åæ¯ç¨äºå±ç¤ºåå®¹çå±ç¤ºå±(presentation layer)ï¼å¦ä¸é¨ååå«é¢ååæ°æ®é»è¾çé¢åå±(domain layer)\n     * å±ç¤ºå±ä¾èµäºé¢åå±ä¸­å­å¨çæ°æ®ï¼èé¢åå±å¯¹äºå±ç¤ºå±ä¸æ æç¥ï¼é¢åå±å¶å®ä¹æ¯ mvc æ¨¡å¼ä¸­çæ¨¡åå±ï¼èå±ç¤ºå±å¯ä»¥çè§£ä¸º vc é¨å\n   * è§å¯èåæ­¥(è§å¯èæ¨¡å¼)\n     * å ä¸ºå¨ mvc æ¨¡å¼ä¸­ï¼æ¨¡åå¯ä»¥åç¬å·¥ä½ï¼åæ¶å®å¯¹ä½¿ç¨æ¨¡åä¸­æ°æ®çè§å¾åæ§å¶å¨ä¸æ æç¥ï¼ä¸ºäºä¿ææ¨¡åçç¬ç«æ§ï¼æä»¬éè¦ä¸ç§æºå¶ï¼å½æ¨¡ååçæ¹åæ¶ï¼è½å¤åæ¶æ´æ°å¤ä¸ªè§å¾åæ§å¶å¨çåå®¹ï¼å¨è¿æ¶ï¼å°±éè¦ä»¥è§å¯èåæ­¥çæ¹å¼è§£å³è¿ä¸ªé®é¢ã\n   * å ä¸»å¯¼å°ä½çæ§å¶å¨\n     * æ§å¶å¨æ¿æäºmvcæ¶æä¸­çå¤§é¨åä¸å¡é»è¾ï¼å¨ç¨æ·è¯·æ±å°è¾¾æèäºä»¶åçæ¶é½ä¼é¦åéç¥æ§å¶å¨å¹¶ç±å®æ¥å³å®å¦ä½ååºè¿æ¬¡è¯·æ±æèäºä»¶ã\n   * è¢«å¨çæ¨¡å\n     * æ¨¡åé½ä¸ä¼ä¸»å¨åè§å¾æèæ§å¶å¨æ¨éæ¶æ¯ãå®å¯¹äºè§å¾åæ§å¶å¨çå­å¨å¹¶ä¸ç¥æï¼åªæ¯åå¤é¨æä¾æ¥å£å¹¶ååºè§å¾åæ§å¶å¨å¯¹äºæ°æ®çè¯·æ±åæ´æ°æä½ã\n\n\n# mvp (model-view-presenter)\n\n\n\n * åå±\n   * modelè´è´£æ°æ®(çå­å¨ãä»¥åå¢å æ¹æ¥ç­å¨ä½)ãä¸è¬ä¼ä½¿ç¨ model interface ç¨æ¥éä½è¦å\n   * viewè´è´£æ¾ç¤º(ç»å¶uiåç´ )ä»¥åä¸ç¨æ·è¿è¡äº¤äº(å¨androidä¸­ä½ç°ä¸ºactivity)\n     * ä¸è¬ä¼ä½¿ç¨ view interface : éè¦viewå®ç°çæ¥å£\n     * viewéè¿view interfaceä¸presenterè¿è¡äº¤äºï¼éä½è¦åï¼æ¹ä¾¿è¿è¡ååæµè¯\n   * presenterè´è´£(ä¸ç¨æ·äº¤äºç)ä¸å¡é»è¾\n * å®ç°\n   * æ ¹æ®presenteråviewå¯¹é»è¾ä»£ç åæçç¨åº¦ä¸åï¼è¿ç§æ¨¡å¼åæä¸¤ç§æåµï¼\n     * passive view(å¸¸ç¨)\n       * äº¤äºæµç¨\n         \n             1ãå½è§å¾æ¥æ¶å°æ¥èªç¨æ·çäºä»¶æ¶ï¼ä¼å°äºä»¶è½¬äº¤ç» presenter è¿è¡å¤ç\n             2ãè¢«å¨çè§å¾åå¤çæ´é²æ¥å£ï¼å½éè¦æ´æ°è§å¾æ¶ presenter éè¿è§å¾æ´é²çæ¥å£æ´æ°è§å¾çåå®¹\n             3ãpresenter è´è´£å¯¹æ¨¡åè¿è¡æä½åæ´æ°ï¼å¨éè¦æ¶ååºå¶ä¸­å­å¨çä¿¡æ¯\n             4ãå½æ¨¡åå±æ¹åæ¶ï¼å¯ä»¥å°æ¹åçä¿¡æ¯åéç»è§å¯è presenter\n         \n         \n         1\n         2\n         3\n         4\n         \n       * è¯´æ\n         * viewåpresenteråéç¨æ·äº¤äºè¯·æ±:\n           * åºè¯¥éç¨è¿æ ·çå£å»ï¼âæç°å¨å°ç¨æ·äº¤äºè¯·æ±åéç»ä½ ï¼ä½ ççåï¼éè¦æçæ¶åæä¼åå©ä½ â\n           * ä¸åºè¯¥æ¯è¿æ ·ï¼âæç°å¨å¤çç¨æ·äº¤äºè¯·æ±äºï¼æç¥éè¯¥æä¹åï¼ä½æ¯æéè¦ä½ çæ¯æï¼å ä¸ºå®ç°ä¸å¡é»è¾çmodelåªä¿¡ä»»ä½ âï¼\n         * å¯¹äºç»å®å°viewä¸çæ°æ®ï¼ä¸åºè¯¥æ¯viewä»presenterä¸âæâåæ¥çï¼åºè¯¥æ¯presenterä¸»å¨âæ¨âç»viewçï¼\n         * view å°½å¯è½ä¸ç»´æ¤æ°æ®ç¶æ, å ä¸ºå®ä»ä»æ¯ç¨æ·äº¤äºè¯·æ±çæ±æ¥èï¼ä¸åä¸ååºç¨æ·äº¤äºç¸å³çé»è¾åæµç¨\n     * supervisor controller\n       * è§å¾åæ¨¡åä¹é´æ°å¢çä¾èµå°±æ¯æ°æ®ç»å®çäº§ç©ï¼è§å¾éè¿å£°æå¼çè¯­æ³ä¸æ¨¡åä¸­çç®åå±æ§è¿è¡ç»å®ï¼å½æ¨¡ååçæ¹åæ¶ï¼ä¼éç¥å¶è§å¯èè§å¾ä½åºç¸åºçæ´æ°ã\n       * è¿ç§æ¹å¼è½å¤åè½»çç£æ§å¶å¨çè´æï¼åå°å¶ä¸­ç®åçä»£ç ï¼å°ä¸é¨åé»è¾äº¤ç±è§å¾è¿è¡å¤çï¼è¿æ ·ä¹å°±å¯¼è´äºè§å¾åæ¶å¯ä»¥è¢« presenter åæ°æ®ç»å®ä¸¤ç§æ¹å¼æ´æ°ï¼ç¸æ¯äºè¢«å¨è§å¾ï¼çç£æ§å¶å¨çæ¹å¼ä¹éä½äºè§å¾çå¯æµè¯æ§åå°è£æ§ã\n * è¯´æ\n   * mvp ä¸ mvc å¯¹æ¯\n     * mvp ä¸ mvc ä¹é´çéå¤§åºå«å°±æ¯ï¼mvp(passive view)ä¸­çè§å¾åæ¨¡åæ¯å®å¨è§£è¦çï¼å®ä»¬å¯¹äºå¯¹æ¹çå­å¨å®å¨ä¸ç¥æ\n   * å ä¸»å¯¼å°ä½çè§å¾\n     * è§å¾å±å¨æ´ä¸ªæ¶æä¸­é½æ¯å ä¸»å¯¼å°ä½ç\n     * å¨ mvc ä¸­ï¼æ§å¶å¨è´è´£ä»¥ä¸åçè§å¾ååºå®¢æ·ç«¯è¯·æ±çä¸åå¨ä½ï¼ç¶è mvp ä¸­è§å¾å±éæ©å¥½è¦æ¸²æçå¾å±åå°ææçå¨ä½äº¤ç» presenter è¿è¡å¤ç\n\n\n# mvvm (model-view-viewmodel)\n\n * åå±\n   * viewmodelå¯ä»¥çè§£ææ¯viewçæ°æ®æ¨¡ååpresenterçåä½ï¼è¯´ç½äºå°±æ¯åå«viewçä¸äºæ°æ®å±æ§åæä½çä¸ä¸\n   * viewmodelåviewä¹é´çäº¤äºéè¿data bindingå®æï¼èdata bindingå¯ä»¥å®ç°ååçäº¤äºï¼è¿å°±ä½¿å¾è§å¾åæ§å¶å±ä¹é´çè¦åç¨åº¦è¿ä¸æ­¥éä½ã\n * è¯´æ\n   * è¿ç§æ¨¡å¼çå³é®ææ¯å°±æ¯æ°æ®ç»å®(data binding)\n   * viewçååä¼ç´æ¥å½±åviewmodelï¼viewmodelçååæèåå®¹ä¹ä¼ç´æ¥ä½ç°å¨viewä¸\n   * å®å®éä¸æ¯æ¡æ¶æ¿åºç¨å¼åèåäºä¸äºå·¥ä½ï¼å¼åèåªéè¦è¾å°çä»£ç å°±è½å®ç°æ¯è¾å¤æçäº¤äº\n\n\n# å¤æ³¨\n\n * è¿äºæ¨¡å¼ï¼åªæ¯å¯¹æ°æ®ãé»è¾ãè§å¾è¿ä¸å±çä¸åååæ¹å¼ï¼æ´ä½ç®çè¿æ¯ä¸å±è§£è¦\n * mvpåmvvmå®å¨éç¦»äºmodelåviewï¼ä½æ¯å¨æäºæåµä¸ï¼æ°æ®ä»modelå°viewmodelæèpresenterçæ·è´å¼éå¾å¤§ï¼å¯è½ä¹ä¼ç»åmvcçæ¹å¼ï¼modelç´æ¥éç¥viewè¿è¡åæ´ã\n * å¨å®éçåºç¨ä¸­å¾æå¯è½ä½ å·²ç»å¨ä¸ç¥ä¸è§ä¸­å°å ç§æ¨¡å¼èåå¨ä¸èµ·ï¼ä½æ¯ä¸ºäºä»£ç çå¯æ©å±ãå¯æµè¯æ§ï¼å¿é¡»åå°æ¨¡åçè§£è¦ï¼ä¸ç¸å³çä»£ç ä¸è¦æ¾å¨ä¸èµ·ã",charsets:{cjk:!0}},{title:"Language ç®å½",frontmatter:{published:!0,title:"Language ç®å½",description:"ç¼ç¨è¯­è¨ç¸å³ç¥è¯æ±æ»",keywords:["lang"],categories:["lang"],permalink:"/blog/lang/",date:"2020-04-13T00:00:00.000Z",tags:[null]},regularPath:"/blog/lang/",relativePath:"blog/lang/README.md",key:"v-53f7dee4",path:"/blog/lang/",headers:[{level:2,title:"ä¸ã Python",slug:"ä¸ã-python",normalizedTitle:"ä¸ã python",charIndex:18},{level:2,title:"ä¸ã Go",slug:"ä¸ã-go",normalizedTitle:"ä¸ã go",charIndex:115}],headersStr:"ä¸ã Python ä¸ã Go",content:'# LANGUAGE ç®å½\n\n\n# ä¸ã Python\n\n * Python ä¸­ "_"ã"__" å "__Xx__" çåºå«\n\n * Python ç¯å¢é®é¢è®°å½\n\n * Python åºç¡\n\n * Cxx Traps\n\n\n# ä¸ã Go\n\n * Recover & Const ç®è¿°\n\n * Slice åºå±ç»æ\n\n * å³äº Nil å¤å®çä¸äºäºæ\n\n * Go Mod ç®ä»\n\n * ä¼ç§ç Go ææ¡£\n\n * Js é¶åºç¡èµ·æ­¥\n\n * Go\n\n * Cxx',normalizedContent:'# language ç®å½\n\n\n# ä¸ã python\n\n * python ä¸­ "_"ã"__" å "__xx__" çåºå«\n\n * python ç¯å¢é®é¢è®°å½\n\n * python åºç¡\n\n * cxx traps\n\n\n# ä¸ã go\n\n * recover & const ç®è¿°\n\n * slice åºå±ç»æ\n\n * å³äº nil å¤å®çä¸äºäºæ\n\n * go mod ç®ä»\n\n * ä¼ç§ç go ææ¡£\n\n * js é¶åºç¡èµ·æ­¥\n\n * go\n\n * cxx',charsets:{cjk:!0}},{title:"CXX",frontmatter:{title:"CXX",date:"2021-11-24T11:50:00.000Z",lastmod:null,publish:!0,categories:null,keywords:null,description:null,tags:null,permalink:null},regularPath:"/blog/lang/cxx.html",relativePath:"blog/lang/cxx.md",key:"v-d7f39702",path:"/blog/lang/cxx.html",headers:[{level:2,title:"åºç¡",slug:"åºç¡",normalizedTitle:"åºç¡",charIndex:15},{level:2,title:"å¤æ",slug:"å¤æ",normalizedTitle:"å¤æ",charIndex:175},{level:3,title:"1. èå½æ°è¡¨åå­æ¨¡å",slug:"_1-èå½æ°è¡¨åå­æ¨¡å",normalizedTitle:"1. èå½æ°è¡¨åå­æ¨¡å",charIndex:531},{level:3,title:"2. æ¹æ³æ´¾å(dispatch)æµç¨(éæ©æ­£ç¡®æ¹æ³è°ç¨çè¿ç¨)",slug:"_2-æ¹æ³æ´¾å-dispatch-æµç¨-éæ©æ­£ç¡®æ¹æ³è°ç¨çè¿ç¨",normalizedTitle:"2. æ¹æ³æ´¾å(dispatch)æµç¨(éæ©æ­£ç¡®æ¹æ³è°ç¨çè¿ç¨)",charIndex:547},{level:2,title:"æ¨¡ç",slug:"æ¨¡ç",normalizedTitle:"æ¨¡ç",charIndex:178},{level:2,title:"å¯¼å¥(import)å¯¼åº(export)",slug:"å¯¼å¥-import-å¯¼åº-export",normalizedTitle:"å¯¼å¥(import)å¯¼åº(export)",charIndex:1877},{level:3,title:"1. å¯¹è±¡",slug:"_1-å¯¹è±¡",normalizedTitle:"1. å¯¹è±¡",charIndex:1902},{level:3,title:"2. ä½¿ç¨",slug:"_2-ä½¿ç¨",normalizedTitle:"2. ä½¿ç¨",charIndex:1934},{level:3,title:"3. åç§°ä¿®é¥°(ç¬¦å·å)",slug:"_3-åç§°ä¿®é¥°-ç¬¦å·å",normalizedTitle:"3. åç§°ä¿®é¥°(ç¬¦å·å)",charIndex:3952},{level:2,title:"ç¹æ§",slug:"ç¹æ§",normalizedTitle:"ç¹æ§",charIndex:38}],headersStr:"åºç¡ å¤æ 1. èå½æ°è¡¨åå­æ¨¡å 2. æ¹æ³æ´¾å(dispatch)æµç¨(éæ©æ­£ç¡®æ¹æ³è°ç¨çè¿ç¨) æ¨¡ç å¯¼å¥(import)å¯¼åº(export) 1. å¯¹è±¡ 2. ä½¿ç¨ 3. åç§°ä¿®é¥°(ç¬¦å·å) ç¹æ§",content:'# C && C++\n\n\n# åºç¡\n\nc && c++ æ åå®ä¹äºè¯­æ³ãè¯­è¨ç¹æ§ ä»¥å C++ åç½®åº(ä¹å°±æ¯C++æ ååº)çå®ç°è§è, ä½ä¸åçç¼è¯å¨å¯¹æ ååºçå®ç°æ¹æ³åä¸ä¸è´\n\nSUBJECT   CONTENT                                  STATUS\nè¯­è¨ç¹æ§      C++ 11/14/17 æ åãå¤æãæ¨¡ç                    â\nå¼å¸¸        æ åå¼å¸¸ãVEHãSEHãTopLevelEH...               â\nè°ä¼        åå­ãæ§è½                                    â\nç¼è¯è¿è¡      ç¼è¯ãè¿è¡æç action å mechanism               â\nDesign    is-a(Inheritance) å has-a(Composition)   â\nå¹³å°ç¹æ§      windowãlinux                             â\næå·§        Tricks and Traps                         â\n\n\n# å¤æ\n\n\n# 1. èå½æ°è¡¨åå­æ¨¡å\n\n\n# 2. æ¹æ³æ´¾å(dispatch)æµç¨(éæ©æ­£ç¡®æ¹æ³è°ç¨çè¿ç¨)\n\n * æ´¾åæºå¶æç§éæ©æ­£ç¡®æ¹æ³çæ¶æ(ç¼è¯æåè¿è¡æ)ï¼å¯ä»¥åä¸º: static dispatch å dynamic dispatch\n   * static dispatch\n     * å¨ç¼è¯æå°±å®å¨ç¡®å®è°ç¨æ¹æ³çåæ´¾æ¹å¼ãä¹å°±æ¯è¯´ï¼ç¼è¯æç´æ¥å³å®å½æ°å°å(æ¹æ³æé)ï¼è¿è¡æ¶å¯ä»¥ç´æ¥éè¿å½æ°å°åè°ç¨æ¹æ³ã\n       * static dispatch çè¿è¡è¿ä¸æ­¥ä¼åçä¸ç§å®ç°æ¹å¼å«ååè(inline), æ¯æç¼è¯æä»æå®è¢«è°ç¨çæ¹æ³æéï¼æ¹ä¸ºå°æ¹æ³çå®ç°å¹³éºå¨è°ç¨æ¹çå¯æ§è¡æä»¶åï¼ä»èèçäºæéå°æ¹æ³å®ç°ä½çè°ç¨çæ¶èã\n         * åèå±å¼åå®å±å¼çåºå«å¨äº,åèåçå¨ç¼è¯æ,å¹¶ä¸ä¸ä¼æ¹åæºæä»¶.ä½æ¯å®å±å¼æ¯å¨ç¼è¯åå°±å®æç,ä¼æ¹åæºç æ¬èº«,ä¹ååå¯¹æ­¤è¿è¡ç¼è¯.\n         * inline å³é®å­æ¯ä¸ä¸ª desire å£°æèé require. åªè½åè¯ç¼è¯å¨å¾åä½¿ç¨åèæ¹å¼, ä½æ¯æç»å®ç°æ¯ç¼è¯å¨å³å®ç.\n           * å¦æä¸ä¸ªæ¹æ³è¢«åè10æ¬¡,é£ä¹ä¼åºç°10ä»½æ¹æ³çå¯æ¬.æä»¥åèéç¨äºä¼è¢«é¢ç¹è°ç¨çæ¯è¾å°çæ¹æ³.ä½æ¯å¦æä¸ä¸ªæ¹æ³ç¹å«å¤§,è¢«inlineå³é®å­ä¿®é¥°çè¯,ç¼è¯å¨ä¹å¯è½ä¼éæ©ä¸ä½¿ç¨åèå®ç°.\n   * dynamic dispatch\n     * å¨è¿è¡æéæ©è°ç¨æ¹æ³çå®ç°çæµç¨\n     * èå½æ°è¡¨(å¨æåæ´¾çä¸ç§å®ç°æºå¶)\n       * å¸¸è§è¯­è¨å¦ C++ãJava é½æ¯éè¿èå½æ°è¡¨æ¥å®ç°ç(Javaææçå®ä¾æ¹æ³é½é»è®¤ä½¿ç¨èå½æ°è¡¨å®ç°)ã\n       * èå½æ°è¡¨\n         * ç¼è¯å¨ä¼ä¸ºæ¯ä¸ªç±»åå»ºåç¬çèå½æ°è¡¨ãç¼è¯å¨ä¹ä¼çæåå«äºèå½æ°è¡¨æéçä»£ç ã\n         * å¤ç»§æ¿åæéä¿®æ­£(thunks)\n           * è±å½¢ç»§æ¿\n             * èåºç±»\n     * å late binding ä¸åï¼\n       * late binding (ä¹å«dynamic bindingædynamic linkage)æ¯ä¸ç§ç¨äºå¤çå¨è¿è¡æ¶éè¿å¯¹è±¡è°ç¨æ¹æ³æèéè¿å½æ°åå»è°ç¨åå«åæ°çæ¹æ³çä¸ç§ç¼ç¨æºå¶.\n         * ç®åçè¯´ï¼å°±æ¯å¨ç¼è¯æå¹¶ä¸ä¼è§£è¯»è¶³å¤çä¿¡æ¯å»ç¡®å®æ¹æ³æ¯å¦å­å¨\n       * å¨ç»ä»¶å¯¹è±¡æ¨¡åç¼ç¨ä¸­,ä½¿ç¨late bindingçæå¤§ä¼å¿å¨äº,ä¸è¦æ±ç¼è¯å¨å¨ç¼è¯æé´å»å¼ç¨åå«å¯¹è±¡çåº.è¿ä½¿å¾ç¼è¯è¿ç¨å¯ä»¥æ´ææçå»é¿åç±»çèå½æ°è¡¨çªç¶æ´æ¹å¸¦æ¥çå²çª.\n       * å¤§é¨åçå¨æç±»åè¯­è¨é½å¯ä»¥å¨è¿è¡æ¶å»ä¿®æ¹å¯¹è±¡çæ¹æ³åè¡¨, å æ­¤ä»ä»¬å°±éè¦late binding.\n\n\n# æ¨¡ç\n\n * C++ æ¨¡æ¿æ¯å¾çµå®å¤ç\n   * å·å¤ä»¥ä¸è½åï¼ç¼è¯ææ°å¼è®¡ç®ãç±»åè®¡ç®ãä»£ç è®¡ç®ï¼å¦å¾ªç¯å±å¼ï¼\n * æ¨¡çå®ä¾åãåç¹åãåç¹å(ä¸å½æ°çæ¯éåä¸å)...\n * å¯åæ¨¡çåæ°ï¼variadic templatesï¼: C++11æ°å¢çæå¼ºå¤§çç¹æ§ä¹ä¸\n * åç¼ç¨\n * ç±»åèå\n   * ä¾èµæ¨¡æ¿çç¹åæ¥å®ç°\n\n\n# å¯¼å¥(import)å¯¼åº(export)\n\n\n# 1. å¯¹è±¡\n\n * å½æ°ãæ¥å£ãç±»ãæåå½æ°ãæååé\n\n\n# 2. ä½¿ç¨\n\n * å¯¼åº\n   * æ¨¡åå®ä¹æä»¶(.def)\n   * __declspec(export)ã__declspec(import)\n   * visibility\n     * ä»£ç ä¿®é¥°ï¼__attribute((visibility("default")))ã__attribute((visibility("hidden")))\n     * é¾æ¥éé¡¹ï¼-fvisibility=defaultã-fvisibility=hidden\n       * gcc é»è®¤è®¾ç½®ä¸º default å³å¨é¨å¯è§(å¯¼åº)\n * å è½½\n   * æ¾å¼å è½½ï¼ä»å¯¼åºè¡¨è·åå½æ°å°å(éè¿å½æ°åãå½æ°ç¼å·)ï¼è¿è¡ä½¿ç¨\n   * éå¼å è½½ï¼ä¾èµçædllæ¶çæç lib æä»¶ï¼ç´æ¥å¼ç¨å¤´æä»¶\n     * lib æä»¶åå«äºå¯¼åºçç¬¦å·ä¿¡æ¯ï¼ä¼å¨æ¨¡åè¢«å è½½æ¶ä¸»å¨å¯»æ¾ dllæso æä»¶å¹¶å³èå¶ä¸­å¯¹åºçç¬¦å·\n     * å®å®ä¹(You can use the same header file for both the DLL and the client application)ï¼\n       \n       #ifdef _EXPORTING\n         #define API_DECLSPEC    __declspec(dllexport)\n       #else\n         #define API_DECLSPEC    __declspec(dllimport)\n       #endif\n       \n       \n       1\n       2\n       3\n       4\n       5\n       \n     * MSDNå³äº__declspec(dllimport)çè§£é\n       * The keyword __declspec(dllimport) works whether you export with .def files or with the __declspec(dllexport) keyword.\n       * Using __declspec(dllimport) is optional on function declarations, but the compiler produces more efficient code if you use this keyword.\n       * However, you must use __declspec(dllimport) for the importing executable to access the DLL\'s public data symbols and objects.\n     * ç¤ºä¾ï¼åè®¾ func æ¯ DLL ä¸­çä¸ä¸ªå½æ°ï¼å¨å¦ä¸ä¸ªç¨åºç main å½æ°ä¸­å°è¯è°ç¨ DLL ä¸­ççè¿ä¸ªå½æ°\n       * å¦æå¯¼å¥çå¤´æä»¶ä¸­å½æ°æ²¡æ__declspec(dllimport)çä¿®é¥°\n         \n         ç¼è¯å¨å°äº§çç±»ä¼¼è¿æ ·çè°ç¨:\n           call func\n         ç¶åï¼é¾æ¥å¨æè¯¥è°ç¨ç¿»è¯ä¸ºç±»ä¼¼è¿æ ·çä»£ç ï¼\n           call 0x40000001       // 0x40000001æ¯ func çå°å\n         å¹¶ä¸ï¼é¾æ¥å¨å°äº§çä¸ä¸ª Thunkï¼å½¢å¦ï¼\n           0x40000001: jmp DWORD PTR __imp_func\n         \n         è¿éç imp_func æ¯ func å½æ°å¨ exe çå¯¼å¥å°åè¡¨ä¸­çå½æ°æ§½çå°åãç¶åï¼å è½½å¨åªéè¦å¨å è½½æ¶æ´æ° exe çå¯¼å¥å°åè¡¨(å¯¼å¥è¡¨ä¿®å¤)å³å¯\n         \n         \n         1\n         2\n         3\n         4\n         5\n         6\n         7\n         8\n         \n       * å¦æä½¿ç¨äº__declspec(dllimport)æ¾ç¤ºå°å¯¼å¥å½æ°\n         \n         é¾æ¥å¨å°ä¸ä¼äº§ç Thunk(å¦æä¸è¢«è¦æ±çè¯)ï¼èç´æ¥äº§çä¸ä¸ªé´æ¥è°ç¨ãå½¢å¦ï¼\n           call DWORD PTR __imp_func1\n         å æ­¤ï¼æ¾ç¤ºå°å¯¼å¥å½æ°è½ææåå°ç®æ ä»£ç ãå¢å æ§è¡æç(å ä¸ºä¸äº§çThunk)ã\n         \n         \n         1\n         2\n         3\n         \n * æ³¨æ\n   * ç±»ãæåå½æ°ãæååé å¯¼åºæ¶çå¯¹è±¡å½å±é®é¢\n\n\n# 3. åç§°ä¿®é¥°(ç¬¦å·å)\n\n * æ¥çæ¹æ³ï¼\n   * Linux\n     * gcc ç¼è¯ï¼èåä»¥ nm å½ä»¤æ¥çå¨æãéæåºä»¥å.oä¸­çç¬¦å·\n   * Window\n     * cl ç¼è¯(åæ°-c)ï¼èåä»¥ dumpbin å½ä»¤æ¥çç¬¦å·(åæ°/SYMBOLS)\n * æ³¨æ\n   * ä¸åçç¼è¯å¨çåç§°ä¿®é¥°æ¹æ³å¯è½ä¸åï¼æä»¥ä¸åçç¼è¯å¨å¯¹äºåä¸ä¸ªå½æ°ç­¾åå¯è½å¯¹åºä¸åçä¿®é¥°ååç§°\n   * æ¨¡åå®ä¹æä»¶(.def) å®ä¹çå½æ°ï¼ä¸ä¼ä½¿ç¨åç§°ä¿®é¥°ï¼èæ¯ä¿æå½æ°åä¸å\n   * Microsoft æä¾äºä¸ä¸ª UnDecorateSymbolName() çAPIï¼å¯ä»¥å°ä¿®é¥°ååç§°è½¬æ¢æå½æ°ç­¾å\n   * VC æä¾äºä¸ä¸ªé¢å¤çæç¤ºç¬¦ "#pragma" æ¥æå®è¿æ¥éé¡¹, å¶ä¸­æï¼\n     * /EXPORT:entryname[,@ordinal[,NONAME]][,DATA]ï¼@ordinal æå®é¡ºåºï¼NONAME æå®åªå°å½æ°å¯¼åºä¸ºåºå·ï¼DATA å³é®å­æå®å¯¼åºé¡¹ä¸ºæ°æ®é¡¹\n       * ç¨äºä¿®æ¹å¯¼åºçåç§°ï¼å¦ï¼#pragma comment(linker,"/EXPORT:MyExportFunction=_MyExportFunction@4")\n * C ç¼è¯å¨çå½æ°åä¿®é¥°è§å\n   * Visual C++ çåºæ¬Cåç§°ä¿®é¥°æ¹æ³ï¼\n   * __stdcall x86 è°ç¨çº¦å®ï¼ç¼è¯å¨ä¼å¨è¾åºå½æ°ååå ä¸ä¸ä¸ªä¸åçº¿åç¼ï¼å½æ°ååé¢å ä¸ä¸ä¸ªâ@âç¬¦å·åå¶åæ°çå­èæ°ãæ¯å¦ _functionname@argbytes\n   * __fastcall x86 è°ç¨çº¦å®ï¼å¨è¾åºå½æ°ååå ä¸ä¸ä¸ª"@"ç¬¦å·ï¼åé¢ä¹æ¯ä¸ä¸ª"@"ç¬¦å·åå¶åæ°çå­èæ°ï¼æ¯å¦ @functionname@argbytes\n   * __stdcall x64 å __fastcall x64 è°ç¨çº¦å®ï¼ä¿æè¾åºå½æ°åä¸åï¼æ¯å¦functionname\n   * __cdecl å GCC\n   * GCC çåºæ¬Cåç§°ä¿®é¥°æ¹æ³ï¼\n     * __cdecl x86 è°ç¨çº¦å®ï¼ä»å¨è¾åºå½æ°ååå ä¸ä¸ä¸ªä¸åçº¿åç¼ãæ¯å¦_functionname\n     * __cdecl x64 è°ç¨çº¦å®ï¼ä¿æè¾åºå½æ°åä¸åãæ¯å¦functionname\n * C++ ç¼è¯å¨çåç§°ä¿®é¥°è§å\n   * Visual C++ çåºæ¬C++åç§°ä¿®é¥°æ¹æ³ï¼\n     * å½¢å¦ï¼?func_name@class_name@namespace@@flags_and_args_and_return@Z, ä¿®é¥°ååå­ç±"?"å¼å¤´ï¼æ¥çæ¯å½æ°åç±"@"ç¬¦å·ç»å°¾çå½æ°åï¼åé¢è·çç±"@"ç»å°¾çç±»åååç§°ç©ºé´ï¼åä¸ä¸ª"@"è¡¨ç¤ºå½æ°çåç§°ç©ºé´ç»æï¼å¶åå¯è½æï¼å½æ°è°ç¨ç±»å(__cdeclæ__stdcallç­)ãå½æ°ä¿æ¤å±æ§(publicãprivate...) ä»¥å åæ°åè¡¨ç­ä¿¡æ¯ï¼ç±"@"ç»æï¼æåç±"Z"ç»å°¾ã\n       * æ¯å¦ int C::C2::func(int) ç»è¿åç§°ä¿®é¥°ä»¥åå°±æ¯ ?func@C2@C@@AAEHH@Z\n   * GCC çåºæ¬C++åç§°ä¿®é¥°æ¹æ³ï¼\n     * ææçç¬¦å·é½ä»¥"_Z"å¼å¤´ï¼å¯¹äºåµå¥çåå­ï¼å¨åç§°ç©ºé´æå¨ç±»éé¢çï¼ï¼åé¢ç´§è·"N"ï¼ç¶åæ¯åä¸ªåç§°ç©ºé´åç±»çåå­ï¼æ¯ä¸ªåå­åæ¯åå­å­ç¬¦ä¸²é¿åº¦ï¼åä»¥"E"ç»å°¾ãå¯¹äºä¸ä¸ªå½æ°æ¥è¯´ï¼å®çåæ°åè¡¨ç´§è·å¨"E"åé¢ã\n       * æ¯å¦ N::C::func ç»è¿åç§°ä¿®é¥°ä»¥åå°±æ¯ _ZN1N1C4funcEãN::C::func(int) å½æ°ç­¾åç»è¿ä¿®é¥°ä¸º _ZN1N1C4funcEi, å¯¹äºintç±»åæ¥è¯´ï¼å°±æ¯å­æ¯"i"ã\n\n\n# ç¹æ§\n\n * å³å¼å¼ç¨\n   * std::moveãstd::forward\n * usingãtypedefãtypename\n   * using å¯è¯»æ§æ´é«ï¼å¹¶ä¸å¯ä»¥ç¨äºæ¨¡æ¿å«å\n   * The "typename" keyword\n * const\n   * æéï¼ä½äº*çå·¦ä¾§ æ å³ä¾§\n   * æååé\n   * æåå½æ°\n     * ä¸è¢«åè®¸ä¿®æ¹å®æå¨å¯¹è±¡çä»»ä½ä¸ä¸ªæ°æ®æå(ä½å¯ä»¥è®¿é®)\n     * constæåå½æ°ï¼å¯ä»¥è®¿é®constæåå½æ°\n   * å¯¹è±¡\n     * è¯¥å¯¹è±¡çä»»ä½éconstæåå½æ°é½ä¸è½è¢«è°ç¨ï¼å ä¸ºä»»ä½éconstæåå½æ°ä¼æä¿®æ¹æååéçä¼å¾\n   * const_cast<type_id> (expression)\n * attribute\n   \n     #if defined(__GCC__)\n     /*\n     * __attribute__ æ¯ GCC ç¼è¯å¨ç¹æçæºå¶\n     * å¦ï¼__attribute__((packed)) å __attribute__(aligned(4))\n     * \n     * ä½¿ç¨ï¼\n     *   typedef struct {\n     *   } __attribute__((packed)) position_t;\n     * \n     *   struct test {\n     *   } __attribute__((packed));\n     */\n     #endif\n     å¯¹é½æ¹å¼è¿æï¼\n     #if ( _MSC_VER >= 800 && !defined(_M_I86)) || defined(_PUSHPOP_SUPPORTED)\n       #pragma pack(push,1)\n     #else\n       #pragma pack(1)\n     #endif\n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   7\n   8\n   9\n   10\n   11\n   12\n   13\n   14\n   15\n   16\n   17\n   18\n   19\n   \n * HeapOnly å StackOnly\n   \n       #include <iostream>\n       class HeapOnly {\n       public:  \n           HeapOnly() { }\n           void destroy() const { delete this; }\n       private:  \n           ~HeapOnly() { }\n       };\n       class StackOnly {\n       public:\n           StackOnly() { }\n           ~StackOnly() { }\n       private:\n           void* operator new(size_t);\n       };\n       int main() {  \n           StackOnly s; // ok\n           StackOnly *p = new StackOnly; // wrong\n           HeapOnly *p = new HeapOnly; // ok\n           p->destroy();\n           HeapOnly h;  // wrong\n           return 0;\n       }\n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   7\n   8\n   9\n   10\n   11\n   12\n   13\n   14\n   15\n   16\n   17\n   18\n   19\n   20\n   21\n   22\n   23\n   ',normalizedContent:'# c && c++\n\n\n# åºç¡\n\nc && c++ æ åå®ä¹äºè¯­æ³ãè¯­è¨ç¹æ§ ä»¥å c++ åç½®åº(ä¹å°±æ¯c++æ ååº)çå®ç°è§è, ä½ä¸åçç¼è¯å¨å¯¹æ ååºçå®ç°æ¹æ³åä¸ä¸è´\n\nsubject   content                                  status\nè¯­è¨ç¹æ§      c++ 11/14/17 æ åãå¤æãæ¨¡ç                    â\nå¼å¸¸        æ åå¼å¸¸ãvehãsehãtopleveleh...               â\nè°ä¼        åå­ãæ§è½                                    â\nç¼è¯è¿è¡      ç¼è¯ãè¿è¡æç action å mechanism               â\ndesign    is-a(inheritance) å has-a(composition)   â\nå¹³å°ç¹æ§      windowãlinux                             â\næå·§        tricks and traps                         â\n\n\n# å¤æ\n\n\n# 1. èå½æ°è¡¨åå­æ¨¡å\n\n\n# 2. æ¹æ³æ´¾å(dispatch)æµç¨(éæ©æ­£ç¡®æ¹æ³è°ç¨çè¿ç¨)\n\n * æ´¾åæºå¶æç§éæ©æ­£ç¡®æ¹æ³çæ¶æ(ç¼è¯æåè¿è¡æ)ï¼å¯ä»¥åä¸º: static dispatch å dynamic dispatch\n   * static dispatch\n     * å¨ç¼è¯æå°±å®å¨ç¡®å®è°ç¨æ¹æ³çåæ´¾æ¹å¼ãä¹å°±æ¯è¯´ï¼ç¼è¯æç´æ¥å³å®å½æ°å°å(æ¹æ³æé)ï¼è¿è¡æ¶å¯ä»¥ç´æ¥éè¿å½æ°å°åè°ç¨æ¹æ³ã\n       * static dispatch çè¿è¡è¿ä¸æ­¥ä¼åçä¸ç§å®ç°æ¹å¼å«ååè(inline), æ¯æç¼è¯æä»æå®è¢«è°ç¨çæ¹æ³æéï¼æ¹ä¸ºå°æ¹æ³çå®ç°å¹³éºå¨è°ç¨æ¹çå¯æ§è¡æä»¶åï¼ä»èèçäºæéå°æ¹æ³å®ç°ä½çè°ç¨çæ¶èã\n         * åèå±å¼åå®å±å¼çåºå«å¨äº,åèåçå¨ç¼è¯æ,å¹¶ä¸ä¸ä¼æ¹åæºæä»¶.ä½æ¯å®å±å¼æ¯å¨ç¼è¯åå°±å®æç,ä¼æ¹åæºç æ¬èº«,ä¹ååå¯¹æ­¤è¿è¡ç¼è¯.\n         * inline å³é®å­æ¯ä¸ä¸ª desire å£°æèé require. åªè½åè¯ç¼è¯å¨å¾åä½¿ç¨åèæ¹å¼, ä½æ¯æç»å®ç°æ¯ç¼è¯å¨å³å®ç.\n           * å¦æä¸ä¸ªæ¹æ³è¢«åè10æ¬¡,é£ä¹ä¼åºç°10ä»½æ¹æ³çå¯æ¬.æä»¥åèéç¨äºä¼è¢«é¢ç¹è°ç¨çæ¯è¾å°çæ¹æ³.ä½æ¯å¦æä¸ä¸ªæ¹æ³ç¹å«å¤§,è¢«inlineå³é®å­ä¿®é¥°çè¯,ç¼è¯å¨ä¹å¯è½ä¼éæ©ä¸ä½¿ç¨åèå®ç°.\n   * dynamic dispatch\n     * å¨è¿è¡æéæ©è°ç¨æ¹æ³çå®ç°çæµç¨\n     * èå½æ°è¡¨(å¨æåæ´¾çä¸ç§å®ç°æºå¶)\n       * å¸¸è§è¯­è¨å¦ c++ãjava é½æ¯éè¿èå½æ°è¡¨æ¥å®ç°ç(javaææçå®ä¾æ¹æ³é½é»è®¤ä½¿ç¨èå½æ°è¡¨å®ç°)ã\n       * èå½æ°è¡¨\n         * ç¼è¯å¨ä¼ä¸ºæ¯ä¸ªç±»åå»ºåç¬çèå½æ°è¡¨ãç¼è¯å¨ä¹ä¼çæåå«äºèå½æ°è¡¨æéçä»£ç ã\n         * å¤ç»§æ¿åæéä¿®æ­£(thunks)\n           * è±å½¢ç»§æ¿\n             * èåºç±»\n     * å late binding ä¸åï¼\n       * late binding (ä¹å«dynamic bindingædynamic linkage)æ¯ä¸ç§ç¨äºå¤çå¨è¿è¡æ¶éè¿å¯¹è±¡è°ç¨æ¹æ³æèéè¿å½æ°åå»è°ç¨åå«åæ°çæ¹æ³çä¸ç§ç¼ç¨æºå¶.\n         * ç®åçè¯´ï¼å°±æ¯å¨ç¼è¯æå¹¶ä¸ä¼è§£è¯»è¶³å¤çä¿¡æ¯å»ç¡®å®æ¹æ³æ¯å¦å­å¨\n       * å¨ç»ä»¶å¯¹è±¡æ¨¡åç¼ç¨ä¸­,ä½¿ç¨late bindingçæå¤§ä¼å¿å¨äº,ä¸è¦æ±ç¼è¯å¨å¨ç¼è¯æé´å»å¼ç¨åå«å¯¹è±¡çåº.è¿ä½¿å¾ç¼è¯è¿ç¨å¯ä»¥æ´ææçå»é¿åç±»çèå½æ°è¡¨çªç¶æ´æ¹å¸¦æ¥çå²çª.\n       * å¤§é¨åçå¨æç±»åè¯­è¨é½å¯ä»¥å¨è¿è¡æ¶å»ä¿®æ¹å¯¹è±¡çæ¹æ³åè¡¨, å æ­¤ä»ä»¬å°±éè¦late binding.\n\n\n# æ¨¡ç\n\n * c++ æ¨¡æ¿æ¯å¾çµå®å¤ç\n   * å·å¤ä»¥ä¸è½åï¼ç¼è¯ææ°å¼è®¡ç®ãç±»åè®¡ç®ãä»£ç è®¡ç®ï¼å¦å¾ªç¯å±å¼ï¼\n * æ¨¡çå®ä¾åãåç¹åãåç¹å(ä¸å½æ°çæ¯éåä¸å)...\n * å¯åæ¨¡çåæ°ï¼variadic templatesï¼: c++11æ°å¢çæå¼ºå¤§çç¹æ§ä¹ä¸\n * åç¼ç¨\n * ç±»åèå\n   * ä¾èµæ¨¡æ¿çç¹åæ¥å®ç°\n\n\n# å¯¼å¥(import)å¯¼åº(export)\n\n\n# 1. å¯¹è±¡\n\n * å½æ°ãæ¥å£ãç±»ãæåå½æ°ãæååé\n\n\n# 2. ä½¿ç¨\n\n * å¯¼åº\n   * æ¨¡åå®ä¹æä»¶(.def)\n   * __declspec(export)ã__declspec(import)\n   * visibility\n     * ä»£ç ä¿®é¥°ï¼__attribute((visibility("default")))ã__attribute((visibility("hidden")))\n     * é¾æ¥éé¡¹ï¼-fvisibility=defaultã-fvisibility=hidden\n       * gcc é»è®¤è®¾ç½®ä¸º default å³å¨é¨å¯è§(å¯¼åº)\n * å è½½\n   * æ¾å¼å è½½ï¼ä»å¯¼åºè¡¨è·åå½æ°å°å(éè¿å½æ°åãå½æ°ç¼å·)ï¼è¿è¡ä½¿ç¨\n   * éå¼å è½½ï¼ä¾èµçædllæ¶çæç lib æä»¶ï¼ç´æ¥å¼ç¨å¤´æä»¶\n     * lib æä»¶åå«äºå¯¼åºçç¬¦å·ä¿¡æ¯ï¼ä¼å¨æ¨¡åè¢«å è½½æ¶ä¸»å¨å¯»æ¾ dllæso æä»¶å¹¶å³èå¶ä¸­å¯¹åºçç¬¦å·\n     * å®å®ä¹(you can use the same header file for both the dll and the client application)ï¼\n       \n       #ifdef _exporting\n         #define api_declspec    __declspec(dllexport)\n       #else\n         #define api_declspec    __declspec(dllimport)\n       #endif\n       \n       \n       1\n       2\n       3\n       4\n       5\n       \n     * msdnå³äº__declspec(dllimport)çè§£é\n       * the keyword __declspec(dllimport) works whether you export with .def files or with the __declspec(dllexport) keyword.\n       * using __declspec(dllimport) is optional on function declarations, but the compiler produces more efficient code if you use this keyword.\n       * however, you must use __declspec(dllimport) for the importing executable to access the dll\'s public data symbols and objects.\n     * ç¤ºä¾ï¼åè®¾ func æ¯ dll ä¸­çä¸ä¸ªå½æ°ï¼å¨å¦ä¸ä¸ªç¨åºç main å½æ°ä¸­å°è¯è°ç¨ dll ä¸­ççè¿ä¸ªå½æ°\n       * å¦æå¯¼å¥çå¤´æä»¶ä¸­å½æ°æ²¡æ__declspec(dllimport)çä¿®é¥°\n         \n         ç¼è¯å¨å°äº§çç±»ä¼¼è¿æ ·çè°ç¨:\n           call func\n         ç¶åï¼é¾æ¥å¨æè¯¥è°ç¨ç¿»è¯ä¸ºç±»ä¼¼è¿æ ·çä»£ç ï¼\n           call 0x40000001       // 0x40000001æ¯ func çå°å\n         å¹¶ä¸ï¼é¾æ¥å¨å°äº§çä¸ä¸ª thunkï¼å½¢å¦ï¼\n           0x40000001: jmp dword ptr __imp_func\n         \n         è¿éç imp_func æ¯ func å½æ°å¨ exe çå¯¼å¥å°åè¡¨ä¸­çå½æ°æ§½çå°åãç¶åï¼å è½½å¨åªéè¦å¨å è½½æ¶æ´æ° exe çå¯¼å¥å°åè¡¨(å¯¼å¥è¡¨ä¿®å¤)å³å¯\n         \n         \n         1\n         2\n         3\n         4\n         5\n         6\n         7\n         8\n         \n       * å¦æä½¿ç¨äº__declspec(dllimport)æ¾ç¤ºå°å¯¼å¥å½æ°\n         \n         é¾æ¥å¨å°ä¸ä¼äº§ç thunk(å¦æä¸è¢«è¦æ±çè¯)ï¼èç´æ¥äº§çä¸ä¸ªé´æ¥è°ç¨ãå½¢å¦ï¼\n           call dword ptr __imp_func1\n         å æ­¤ï¼æ¾ç¤ºå°å¯¼å¥å½æ°è½ææåå°ç®æ ä»£ç ãå¢å æ§è¡æç(å ä¸ºä¸äº§çthunk)ã\n         \n         \n         1\n         2\n         3\n         \n * æ³¨æ\n   * ç±»ãæåå½æ°ãæååé å¯¼åºæ¶çå¯¹è±¡å½å±é®é¢\n\n\n# 3. åç§°ä¿®é¥°(ç¬¦å·å)\n\n * æ¥çæ¹æ³ï¼\n   * linux\n     * gcc ç¼è¯ï¼èåä»¥ nm å½ä»¤æ¥çå¨æãéæåºä»¥å.oä¸­çç¬¦å·\n   * window\n     * cl ç¼è¯(åæ°-c)ï¼èåä»¥ dumpbin å½ä»¤æ¥çç¬¦å·(åæ°/symbols)\n * æ³¨æ\n   * ä¸åçç¼è¯å¨çåç§°ä¿®é¥°æ¹æ³å¯è½ä¸åï¼æä»¥ä¸åçç¼è¯å¨å¯¹äºåä¸ä¸ªå½æ°ç­¾åå¯è½å¯¹åºä¸åçä¿®é¥°ååç§°\n   * æ¨¡åå®ä¹æä»¶(.def) å®ä¹çå½æ°ï¼ä¸ä¼ä½¿ç¨åç§°ä¿®é¥°ï¼èæ¯ä¿æå½æ°åä¸å\n   * microsoft æä¾äºä¸ä¸ª undecoratesymbolname() çapiï¼å¯ä»¥å°ä¿®é¥°ååç§°è½¬æ¢æå½æ°ç­¾å\n   * vc æä¾äºä¸ä¸ªé¢å¤çæç¤ºç¬¦ "#pragma" æ¥æå®è¿æ¥éé¡¹, å¶ä¸­æï¼\n     * /export:entryname[,@ordinal[,noname]][,data]ï¼@ordinal æå®é¡ºåºï¼noname æå®åªå°å½æ°å¯¼åºä¸ºåºå·ï¼data å³é®å­æå®å¯¼åºé¡¹ä¸ºæ°æ®é¡¹\n       * ç¨äºä¿®æ¹å¯¼åºçåç§°ï¼å¦ï¼#pragma comment(linker,"/export:myexportfunction=_myexportfunction@4")\n * c ç¼è¯å¨çå½æ°åä¿®é¥°è§å\n   * visual c++ çåºæ¬cåç§°ä¿®é¥°æ¹æ³ï¼\n   * __stdcall x86 è°ç¨çº¦å®ï¼ç¼è¯å¨ä¼å¨è¾åºå½æ°ååå ä¸ä¸ä¸ªä¸åçº¿åç¼ï¼å½æ°ååé¢å ä¸ä¸ä¸ªâ@âç¬¦å·åå¶åæ°çå­èæ°ãæ¯å¦ _functionname@argbytes\n   * __fastcall x86 è°ç¨çº¦å®ï¼å¨è¾åºå½æ°ååå ä¸ä¸ä¸ª"@"ç¬¦å·ï¼åé¢ä¹æ¯ä¸ä¸ª"@"ç¬¦å·åå¶åæ°çå­èæ°ï¼æ¯å¦ @functionname@argbytes\n   * __stdcall x64 å __fastcall x64 è°ç¨çº¦å®ï¼ä¿æè¾åºå½æ°åä¸åï¼æ¯å¦functionname\n   * __cdecl å gcc\n   * gcc çåºæ¬cåç§°ä¿®é¥°æ¹æ³ï¼\n     * __cdecl x86 è°ç¨çº¦å®ï¼ä»å¨è¾åºå½æ°ååå ä¸ä¸ä¸ªä¸åçº¿åç¼ãæ¯å¦_functionname\n     * __cdecl x64 è°ç¨çº¦å®ï¼ä¿æè¾åºå½æ°åä¸åãæ¯å¦functionname\n * c++ ç¼è¯å¨çåç§°ä¿®é¥°è§å\n   * visual c++ çåºæ¬c++åç§°ä¿®é¥°æ¹æ³ï¼\n     * å½¢å¦ï¼?func_name@class_name@namespace@@flags_and_args_and_return@z, ä¿®é¥°ååå­ç±"?"å¼å¤´ï¼æ¥çæ¯å½æ°åç±"@"ç¬¦å·ç»å°¾çå½æ°åï¼åé¢è·çç±"@"ç»å°¾çç±»åååç§°ç©ºé´ï¼åä¸ä¸ª"@"è¡¨ç¤ºå½æ°çåç§°ç©ºé´ç»æï¼å¶åå¯è½æï¼å½æ°è°ç¨ç±»å(__cdeclæ__stdcallç­)ãå½æ°ä¿æ¤å±æ§(publicãprivate...) ä»¥å åæ°åè¡¨ç­ä¿¡æ¯ï¼ç±"@"ç»æï¼æåç±"z"ç»å°¾ã\n       * æ¯å¦ int c::c2::func(int) ç»è¿åç§°ä¿®é¥°ä»¥åå°±æ¯ ?func@c2@c@@aaehh@z\n   * gcc çåºæ¬c++åç§°ä¿®é¥°æ¹æ³ï¼\n     * ææçç¬¦å·é½ä»¥"_z"å¼å¤´ï¼å¯¹äºåµå¥çåå­ï¼å¨åç§°ç©ºé´æå¨ç±»éé¢çï¼ï¼åé¢ç´§è·"n"ï¼ç¶åæ¯åä¸ªåç§°ç©ºé´åç±»çåå­ï¼æ¯ä¸ªåå­åæ¯åå­å­ç¬¦ä¸²é¿åº¦ï¼åä»¥"e"ç»å°¾ãå¯¹äºä¸ä¸ªå½æ°æ¥è¯´ï¼å®çåæ°åè¡¨ç´§è·å¨"e"åé¢ã\n       * æ¯å¦ n::c::func ç»è¿åç§°ä¿®é¥°ä»¥åå°±æ¯ _zn1n1c4funceãn::c::func(int) å½æ°ç­¾åç»è¿ä¿®é¥°ä¸º _zn1n1c4funcei, å¯¹äºintç±»åæ¥è¯´ï¼å°±æ¯å­æ¯"i"ã\n\n\n# ç¹æ§\n\n * å³å¼å¼ç¨\n   * std::moveãstd::forward\n * usingãtypedefãtypename\n   * using å¯è¯»æ§æ´é«ï¼å¹¶ä¸å¯ä»¥ç¨äºæ¨¡æ¿å«å\n   * the "typename" keyword\n * const\n   * æéï¼ä½äº*çå·¦ä¾§ æ å³ä¾§\n   * æååé\n   * æåå½æ°\n     * ä¸è¢«åè®¸ä¿®æ¹å®æå¨å¯¹è±¡çä»»ä½ä¸ä¸ªæ°æ®æå(ä½å¯ä»¥è®¿é®)\n     * constæåå½æ°ï¼å¯ä»¥è®¿é®constæåå½æ°\n   * å¯¹è±¡\n     * è¯¥å¯¹è±¡çä»»ä½éconstæåå½æ°é½ä¸è½è¢«è°ç¨ï¼å ä¸ºä»»ä½éconstæåå½æ°ä¼æä¿®æ¹æååéçä¼å¾\n   * const_cast<type_id> (expression)\n * attribute\n   \n     #if defined(__gcc__)\n     /*\n     * __attribute__ æ¯ gcc ç¼è¯å¨ç¹æçæºå¶\n     * å¦ï¼__attribute__((packed)) å __attribute__(aligned(4))\n     * \n     * ä½¿ç¨ï¼\n     *   typedef struct {\n     *   } __attribute__((packed)) position_t;\n     * \n     *   struct test {\n     *   } __attribute__((packed));\n     */\n     #endif\n     å¯¹é½æ¹å¼è¿æï¼\n     #if ( _msc_ver >= 800 && !defined(_m_i86)) || defined(_pushpop_supported)\n       #pragma pack(push,1)\n     #else\n       #pragma pack(1)\n     #endif\n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   7\n   8\n   9\n   10\n   11\n   12\n   13\n   14\n   15\n   16\n   17\n   18\n   19\n   \n * heaponly å stackonly\n   \n       #include <iostream>\n       class heaponly {\n       public:  \n           heaponly() { }\n           void destroy() const { delete this; }\n       private:  \n           ~heaponly() { }\n       };\n       class stackonly {\n       public:\n           stackonly() { }\n           ~stackonly() { }\n       private:\n           void* operator new(size_t);\n       };\n       int main() {  \n           stackonly s; // ok\n           stackonly *p = new stackonly; // wrong\n           heaponly *p = new heaponly; // ok\n           p->destroy();\n           heaponly h;  // wrong\n           return 0;\n       }\n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   7\n   8\n   9\n   10\n   11\n   12\n   13\n   14\n   15\n   16\n   17\n   18\n   19\n   20\n   21\n   22\n   23\n   ',charsets:{cjk:!0}},{title:"Cxx Traps",frontmatter:{title:"Cxx Traps",date:"2021-12-22T10:30:00.000Z",lastmod:null,publish:!0,categories:null,keywords:null,description:null,tags:null,permalink:null},regularPath:"/blog/lang/cxx_traps.html",relativePath:"blog/lang/cxx_traps.md",key:"v-3a68b8c2",path:"/blog/lang/cxx_traps.html",headers:[{level:2,title:"1. Enum",slug:"_1-enum",normalizedTitle:"1. enum",charIndex:278},{level:3,title:"1.1 çé®",slug:"_1-1-çé®",normalizedTitle:"1.1 çé®",charIndex:290},{level:3,title:"1.2 èæ¯",slug:"_1-2-èæ¯",normalizedTitle:"1.2 èæ¯",charIndex:834},{level:3,title:"1.3 è§£ç­",slug:"_1-3-è§£ç­",normalizedTitle:"1.3 è§£ç­",charIndex:1073},{level:2,title:"2. Array & Pointer",slug:"_2-array-pointer",normalizedTitle:"2. array &amp; pointer",charIndex:null},{level:3,title:"2.1 çé®",slug:"_2-1-çé®",normalizedTitle:"2.1 çé®",charIndex:1303},{level:3,title:"2.2 è§£ç­",slug:"_2-2-è§£ç­",normalizedTitle:"2.2 è§£ç­",charIndex:1591},{level:2,title:"3. TODO",slug:"_3-todo",normalizedTitle:"3. todo",charIndex:3798}],headersStr:"1. Enum 1.1 çé® 1.2 èæ¯ 1.3 è§£ç­ 2. Array & Pointer 2.1 çé® 2.2 è§£ç­ 3. TODO",content:'# Cxx Traps\n\nc/c++ æºä»£ç ä¸è¬ä¼éè¿ä»¥ä¸æ­¥éª¤ï¼è¢«ç¼è¯ãé¾æ¥æå¯æ§è¡æä»¶ï¼\n\n 1. é¢å¤ç(Preprocess) : gcc -E test.cpp -o test.i\n 2. ç¼è¯ä¸ºæ±ç¼(Compilation): gcc -S test.i -o test.s\n 3. æ±ç¼(Assembly): gcc -c test.s -o test.o\n 4. è¿æ¥(Linking): gcc test.o -o test\n\nå½ç¶ï¼ä¸è¿°æ­¥éª¤å¯ä»¥ç´æ¥éè¿ gcc define.cpp test.cpp -o test ä¸æ­¥å°ä½.\n\n\n# 1. Enum\n\n\n# 1.1 çé®\n\nclass Test {\npublic:\n    enum Result {\n        Result_OK = 0x1000,\n    };\n\n    Test(enum Result emRst) {\n        m_nRst = emRst;\n    }\n\n    static int m_nRst;\n};\n\nint Test::m_nRst = 0; /* OK */\n// Test::m_nRst = 0; /* ERROR, æ­¤å£°ææ²¡æå­å¨ç±»æç±»åè¯´æç¬¦ */\n\nint main() { \n    Test(Test::Result(Test::Result_OK)); /* OK */\n    Test((Test::Result)Test::Result_OK); /* OK */\n    // Test(Test::Result_OK); /* ERROR, å½åèå´åæ æ³å®ä¹ constant "Test::Result_OK" */\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n\n\nä¸ºä»ä¹ä¸è¿°ä»£ç å¨å»ææ³¨é"//"åï¼vs2019ç¼è¯å¨ä¼æç¤ºéè¯¯ï¼\n\n\n# 1.2 èæ¯\n\næä»¬éè¦æç½ï¼enum å³é®å­ä¼å®ä¹ä¸ä¸ªç±»åï¼åæ¶ï¼å¶åå®ä¹çé¡¹ç®ä¼è¢«å±å¼ä¸ºintåå¸¸éå°å®ä¹ enum çä½ç¨åã\n\nè¿ä¼é æï¼å¨å¨å±ä½ç½®å®ä¹ç enum ç±»åä¸­çé¡¹ç®åéè¦æ¯å¨å±å¯ä¸ç, å¦ä¸è¿°å®ä¹ä¼ç¼è¯åºé(error C2365: âaâ: éå®ä¹)ï¼\n\nenum X { a };\nenum Y { a };\n\n\n1\n2\n\n\nç±æ­¤ï¼ä¸ºäºè§£å³ä½ç¨å ä»¥å å¼ºç±»åéå®é®é¢ï¼C++11 ä¸­å¼å¥äº enum class æ enum structã\n\n\n# 1.3 è§£ç­\n\n 1. å¨å±ä½ç½®ç ERROR, æ­¤å£°ææ²¡æå­å¨ç±»æç±»åè¯´æç¬¦ï¼\n    * c/c++ æ²¡æå¨å±ä»£ç åï¼å¨å¨å±ä½ç½®çæ¯ å£°ææå®ä¹\n 2. ä¼ éæä¸¾å¼å°æä¸¾ç±»ååæ°æ¶ ERROR, å½åèå´åæ æ³å®ä¹ constantï¼\n    * ï¼\n    * vs2019 ä¼æ¥éï¼ä½ï¼g++ å¨ linux ä¸ç¼è¯æ­£å¸¸\n      * å¯è½æ¯ï¼å¼ºç±»åéå®é æç°å¨æç»æä¸¾éä¸intä¹é´çéå¼è½¬æ¢\n\n\n# 2. Array & Pointer\n\n\n# 2.1 çé®\n\n// define.c\nint arr[] = { 1,2,3 };\nint* ard = &arr[0];\n\n// test.c\nint art[] = { 5,6,7,8,9 };\nextern int* arr;\n\nvoid test() {\n    int* x = arr + 1;\n    int* m = arrx + 1;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\nè¯·é® test å½æ°ä¸­ç x å m åå«æ¯å¤å°ï¼(int)x = 5, *m = 6\n\nåæä»¬çè®¤ç¥ï¼æ°ç»å¯ä»¥å½ææéä½¿ç¨ ä¸ä¸æ ·ï¼å¯¹å§...\n\n\n# 2.2 è§£ç­\n\nå°ä¸è¿°ä»£ç ç¼è¯ææ±ç¼åçä»£ç å¦ä¸ï¼\n\n * define.cpp\n\n        .file   "define.cpp"\n        .text\n        .globl  arr\n        .data\n        .align 8\n        .type   arr, @object\n        .size   arr, 12\narr:\n        .long   1\n        .long   2\n        .long   3\n        .globl  arm\n        .section        .data.rel.local,"aw"\n        .align 8\n        .type   arm, @object\n        .size   arm, 8\narm:\n        .quad   arr\n        .ident  "GCC: (Ubuntu 9.3.0-17ubuntu1~20.04) 9.3.0"\n        .section        .note.GNU-stack,"",@progbits\n        .section        .note.gnu.property,"a"\n        .align 8\n        .long    1f - 0f\n        .long    4f - 1f\n        .long    5\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n\n * test.cpp\n\n        .file   "test.cpp"\n        .text\n        .globl  art\n        .data\n        .align 16\n        .type   art, @object\n        .size   art, 20\nart:\n        .long   5\n        .long   6\n        .long   7\n        .long   8\n        .long   9\n        .text\n        .globl  test\n        .type   test, @function\ntest:\n.LFB0:\n        .cfi_startproc\n        endbr64\n        pushq   %rbp\n        .cfi_def_cfa_offset 16\n        .cfi_offset 6, -16\n        movq    %rsp, %rbp\n        .cfi_def_cfa_register 6\n        movq    arr(%rip), %rax\n        addq    $4, %rax\n        movq    %rax, -16(%rbp)\n        leaq    4+art(%rip), %rax\n        movq    %rax, -8(%rbp)\n        movq    -8(%rbp), %rax\n        movl    (%rax), %eax\n        movl    %eax, -20(%rbp)\n        nop\n        popq    %rbp\n        .cfi_def_cfa 7, 8\n        ret\n        .cfi_endproc\n.LFE0:\n        .size   test, .-test\n        .ident  "GCC: (Ubuntu 9.3.0-17ubuntu1~20.04) 9.3.0"\n        .section        .note.GNU-stack,"",@progbits\n        .section        .note.gnu.property,"a"\n        .align 8\n        .long    1f - 0f\n        .long    4f - 1f\n        .long    5\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n\n\nè§å¯ï¼\n\n * define.cppä¸­ arr å arm çå®ä¹\n * test.cppä¸­ arr(%rip) å art(%rip) çæä½\n\nå¯ä»¥åç°ï¼\n\n 1. æ°ç»å¯ä»¥å½ææéä½¿ç¨ï¼çåå æ¯ï¼ç¼è¯å¨å¸®å¿åäºåå°åæä½\n 2. å ä¸º extern int* arr å¨ä½¿ç¨æ¶ç¼ºå°äºç¼è¯å¨å¸®å¿ååå°åæä½è¿ä¸å¨ä½ï¼ç´æ¥è¢«æ arr å½æäº æéä½¿ç¨ï¼å·ä½çæ¹å¼å¯ä»¥åè arm çå®ä¹ï¼ç´æ¥æ arm çå¼å½æäºå°åä½¿ç¨\n\n\n# 3. TODO',normalizedContent:'# cxx traps\n\nc/c++ æºä»£ç ä¸è¬ä¼éè¿ä»¥ä¸æ­¥éª¤ï¼è¢«ç¼è¯ãé¾æ¥æå¯æ§è¡æä»¶ï¼\n\n 1. é¢å¤ç(preprocess) : gcc -e test.cpp -o test.i\n 2. ç¼è¯ä¸ºæ±ç¼(compilation): gcc -s test.i -o test.s\n 3. æ±ç¼(assembly): gcc -c test.s -o test.o\n 4. è¿æ¥(linking): gcc test.o -o test\n\nå½ç¶ï¼ä¸è¿°æ­¥éª¤å¯ä»¥ç´æ¥éè¿ gcc define.cpp test.cpp -o test ä¸æ­¥å°ä½.\n\n\n# 1. enum\n\n\n# 1.1 çé®\n\nclass test {\npublic:\n    enum result {\n        result_ok = 0x1000,\n    };\n\n    test(enum result emrst) {\n        m_nrst = emrst;\n    }\n\n    static int m_nrst;\n};\n\nint test::m_nrst = 0; /* ok */\n// test::m_nrst = 0; /* error, æ­¤å£°ææ²¡æå­å¨ç±»æç±»åè¯´æç¬¦ */\n\nint main() { \n    test(test::result(test::result_ok)); /* ok */\n    test((test::result)test::result_ok); /* ok */\n    // test(test::result_ok); /* error, å½åèå´åæ æ³å®ä¹ constant "test::result_ok" */\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n\n\nä¸ºä»ä¹ä¸è¿°ä»£ç å¨å»ææ³¨é"//"åï¼vs2019ç¼è¯å¨ä¼æç¤ºéè¯¯ï¼\n\n\n# 1.2 èæ¯\n\næä»¬éè¦æç½ï¼enum å³é®å­ä¼å®ä¹ä¸ä¸ªç±»åï¼åæ¶ï¼å¶åå®ä¹çé¡¹ç®ä¼è¢«å±å¼ä¸ºintåå¸¸éå°å®ä¹ enum çä½ç¨åã\n\nè¿ä¼é æï¼å¨å¨å±ä½ç½®å®ä¹ç enum ç±»åä¸­çé¡¹ç®åéè¦æ¯å¨å±å¯ä¸ç, å¦ä¸è¿°å®ä¹ä¼ç¼è¯åºé(error c2365: âaâ: éå®ä¹)ï¼\n\nenum x { a };\nenum y { a };\n\n\n1\n2\n\n\nç±æ­¤ï¼ä¸ºäºè§£å³ä½ç¨å ä»¥å å¼ºç±»åéå®é®é¢ï¼c++11 ä¸­å¼å¥äº enum class æ enum structã\n\n\n# 1.3 è§£ç­\n\n 1. å¨å±ä½ç½®ç error, æ­¤å£°ææ²¡æå­å¨ç±»æç±»åè¯´æç¬¦ï¼\n    * c/c++ æ²¡æå¨å±ä»£ç åï¼å¨å¨å±ä½ç½®çæ¯ å£°ææå®ä¹\n 2. ä¼ éæä¸¾å¼å°æä¸¾ç±»ååæ°æ¶ error, å½åèå´åæ æ³å®ä¹ constantï¼\n    * ï¼\n    * vs2019 ä¼æ¥éï¼ä½ï¼g++ å¨ linux ä¸ç¼è¯æ­£å¸¸\n      * å¯è½æ¯ï¼å¼ºç±»åéå®é æç°å¨æç»æä¸¾éä¸intä¹é´çéå¼è½¬æ¢\n\n\n# 2. array & pointer\n\n\n# 2.1 çé®\n\n// define.c\nint arr[] = { 1,2,3 };\nint* ard = &arr[0];\n\n// test.c\nint art[] = { 5,6,7,8,9 };\nextern int* arr;\n\nvoid test() {\n    int* x = arr + 1;\n    int* m = arrx + 1;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\nè¯·é® test å½æ°ä¸­ç x å m åå«æ¯å¤å°ï¼(int)x = 5, *m = 6\n\nåæä»¬çè®¤ç¥ï¼æ°ç»å¯ä»¥å½ææéä½¿ç¨ ä¸ä¸æ ·ï¼å¯¹å§...\n\n\n# 2.2 è§£ç­\n\nå°ä¸è¿°ä»£ç ç¼è¯ææ±ç¼åçä»£ç å¦ä¸ï¼\n\n * define.cpp\n\n        .file   "define.cpp"\n        .text\n        .globl  arr\n        .data\n        .align 8\n        .type   arr, @object\n        .size   arr, 12\narr:\n        .long   1\n        .long   2\n        .long   3\n        .globl  arm\n        .section        .data.rel.local,"aw"\n        .align 8\n        .type   arm, @object\n        .size   arm, 8\narm:\n        .quad   arr\n        .ident  "gcc: (ubuntu 9.3.0-17ubuntu1~20.04) 9.3.0"\n        .section        .note.gnu-stack,"",@progbits\n        .section        .note.gnu.property,"a"\n        .align 8\n        .long    1f - 0f\n        .long    4f - 1f\n        .long    5\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n\n * test.cpp\n\n        .file   "test.cpp"\n        .text\n        .globl  art\n        .data\n        .align 16\n        .type   art, @object\n        .size   art, 20\nart:\n        .long   5\n        .long   6\n        .long   7\n        .long   8\n        .long   9\n        .text\n        .globl  test\n        .type   test, @function\ntest:\n.lfb0:\n        .cfi_startproc\n        endbr64\n        pushq   %rbp\n        .cfi_def_cfa_offset 16\n        .cfi_offset 6, -16\n        movq    %rsp, %rbp\n        .cfi_def_cfa_register 6\n        movq    arr(%rip), %rax\n        addq    $4, %rax\n        movq    %rax, -16(%rbp)\n        leaq    4+art(%rip), %rax\n        movq    %rax, -8(%rbp)\n        movq    -8(%rbp), %rax\n        movl    (%rax), %eax\n        movl    %eax, -20(%rbp)\n        nop\n        popq    %rbp\n        .cfi_def_cfa 7, 8\n        ret\n        .cfi_endproc\n.lfe0:\n        .size   test, .-test\n        .ident  "gcc: (ubuntu 9.3.0-17ubuntu1~20.04) 9.3.0"\n        .section        .note.gnu-stack,"",@progbits\n        .section        .note.gnu.property,"a"\n        .align 8\n        .long    1f - 0f\n        .long    4f - 1f\n        .long    5\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n\n\nè§å¯ï¼\n\n * define.cppä¸­ arr å arm çå®ä¹\n * test.cppä¸­ arr(%rip) å art(%rip) çæä½\n\nå¯ä»¥åç°ï¼\n\n 1. æ°ç»å¯ä»¥å½ææéä½¿ç¨ï¼çåå æ¯ï¼ç¼è¯å¨å¸®å¿åäºåå°åæä½\n 2. å ä¸º extern int* arr å¨ä½¿ç¨æ¶ç¼ºå°äºç¼è¯å¨å¸®å¿ååå°åæä½è¿ä¸å¨ä½ï¼ç´æ¥è¢«æ arr å½æäº æéä½¿ç¨ï¼å·ä½çæ¹å¼å¯ä»¥åè arm çå®ä¹ï¼ç´æ¥æ arm çå¼å½æäºå°åä½¿ç¨\n\n\n# 3. todo',charsets:{cjk:!0}},{title:"GO",frontmatter:{title:"GO",date:"2021-11-24T11:50:00.000Z",lastmod:null,publish:!0,categories:null,keywords:null,description:null,tags:null,permalink:null},regularPath:"/blog/lang/go.html",relativePath:"blog/lang/go.md",key:"v-16fdda93",path:"/blog/lang/go.html",headers:[{level:2,title:"Go",slug:"go",normalizedTitle:"go",charIndex:2}],headersStr:"Go",content:'# Go\n\n * ç±»å\n   \n   * (u)int(8|16|32|64)ãboolãstringãuintptrãbyte(=uint8)ãrune(=uint32)ãfloat[32|64]ãcomplex[64|128]\n   * chanãinterfaceãfunc\n   * arrayãsliceãmap\n\n * å³é®å­\n   \n   * æ¦è§\n     \n     reserved-keywords:25\n         package\timport\tstruct\tinterface\tconst\tmap\ttype\tfunc\t\n         if\telse\tfor\tswitch\tselect\tbreak\tcontinue\tgoto\n         return\tfallthrough\tcase\tdefault\tdefer\trange\tgo\tchan\tvar\n     é¢å®ä¹æ è¯ç¬¦ï¼ååµå½æ°åæ°æ®ç±»åç­\n         append\tiota\tlen\tcap\tmake\tnew\tcopy\ttrue\tfalse nil\n         close\timag\tprint\tprintln\tpanic\treal\trecover\n     \n     \n     1\n     2\n     3\n     4\n     5\n     6\n     7\n     \n   * range\n     * ä½ç¨äº string or mapï¼å¯ä»¥è¿åç³»å (key, value)\n   * fallthrough\n     * å¨ switch case ä¸­å¼ºå¶æ§è¡åé¢ç case ä»£ç \n   * chan\n     \n     chonlyread := make(<-chan int) //åå»ºåªè¯»channel \n     chonlywrite := make(chan<- int) //åå»ºåªåchannel    \n     \n     \n     1\n     2\n     \n   * defer\n     * å½å½æ°è¿åæ¶ï¼ä¼æ§è¡deferè¯­å¥ï¼å³ä½¿è§¦åå¼å¸¸ä¹ä¼èµ°deferè¯­å¥ï¼å¦ææå¤ä¸ªdeferè¯­å¥ï¼åæ first-in-last-out çé¡ºåºä¾æ¬¡æ§è¡ï¼\n     * deferè¯­å¥ä¸­çåéï¼å¨deferå£°ææ¶ç¡®å®åé\n   * func\n     * ä¸æ¯æéè½½ï¼ä¸ä¸ªåä¸è½æä¸¤ä¸ªåå­ä¸æ ·çå½æ°\n     * å½åè¿åå¼çåå­ï¼returnå¯ä»¥ä¸æå®åéåï¼\n       \n       func add(a, b int) (c int) {\n               c = a + b\n               return\n       }\n       \n       \n       1\n       2\n       3\n       4\n       \n\n * å¼ä¼ é & å¼ç¨ä¼ é\n   \n   * mapãsliceãchanãæéãinterfaceé»è®¤ä»¥å¼ç¨çæ¹å¼ä¼ é\n   * åéåå­\n     * new ä¸»è¦ç¨æ¥åéå¼ç±»åï¼æ¯å¦ intãstructãarrayï¼è¿åçæ¯æé\n     * make ä¸»è¦ç¨æ¥åéå¼ç¨ç±»åï¼æ¯å¦ chanãmapãslice\n   * array : å¼ç±»å, å½ä½ä¸ºæ¹æ³çå¥åä¼ å¥æ¶å°å¤å¶ä¸ä»½æ°ç»èä¸æ¯å¼ç¨åä¸æé\n   * slice : å¼ç¨ç±»å, å¨ä¼ éåçæ¶ï¼ç­åäºä¼ éäºä¸æé\n\n * å¯ååæ°\n   \n   * å¯ååæ°å®éä¸æ¯ä¸ä¸ªsliceï¼å¯ä»¥éè¿arg[index]ä¾æ¬¡è®¿é®ææåæ°ï¼éè¿len(arg)æ¥å¤æ­ååçä¸ªæ°\n     \n     func concat(s string, arg ...string) string {\n         str := s\n         for i := 0; i < len(arg); i++ { str += arg[i] }\n         return str\n     }\n     \n     \n     1\n     2\n     3\n     4\n     5\n     \n\n * closure\n   \n   * é­åæ¯ä¸ä¸ªå½æ°åä¸å¶ç¸å³çå¼ç¨ç¯å¢ç»åèæçå®ä½\n   * å½æ°å¯ä»¥å­å¨å°åéä¸­ä½ä¸ºåæ°ä¼ éç»å¶å®å½æ°ï¼è½å¤è¢«å½æ°å¨æçåå»ºåè¿å\n     \n     func Adder() func(int) int {\n         var x int\n         return func(d int) int {\n             x += d\n             return x\n         }\n     }\n     f := Adder()\n     fmt.Println(f(1))    //1\n     fmt.Println(f(10))   //11\n     fmt.Println(f(100))  //111\n     \n     \n     1\n     2\n     3\n     4\n     5\n     6\n     7\n     8\n     9\n     10\n     11\n     \n\n * ç¨åºåå§åä¸æ§è¡è¿ç¨\n   \n   * ç¨åºçåå§ååæ§è¡é½èµ·äºmainå, ç¼è¯æ¶å°ä¾èµçåä¾æ¬¡å¯¼å¥\n   * æµç¨ï¼\n     * ååå§åæ¶ï¼ä¼åéå±éå½çå°å®ä¾èµçåå¯¼å¥è¿æ¥ï¼ç´å°é¡¶å±åã\n     * ç¶åå¯¹é¡¶å±åä¸­çåçº§å¸¸éååéè¿è¡åå§åï¼æ¥çæ§è¡initå½æ°ï¼å¦ææçè¯ï¼ï¼ä¾æ¬¡ç±»æ¨ï¼ç´å°æå¤å±åè¢«åå§åã\n     * ç­ææè¢«å¯¼å¥çåå è½½å®æ¯ï¼å°±å¼å§å¯¹mainåä¸­çåçº§å¸¸éååéè¿è¡åå§åï¼ç¶åæ§è¡mainåä¸­çinitå½æ°ï¼å¦æå­å¨çè¯ï¼ï¼æåæ§è¡mainå½æ°ã\n   * æ³¨æ\n     * init()å¯ä»¥å¨ä»»ä½packageä¸­åºç°(å¯é); main()åªè½ç¨å¨package main ä¸­(å¿é)\n     * å¦æä¸ä¸ªåä¼è¢«å¤ä¸ªååæ¶å¯¼å¥ï¼é£ä¹å®åªä¼è¢«å¯¼å¥ä¸æ¬¡\n\n * reflect\n   \n   * reflect.Value.NumField()ï¼è·åç»æä½ä¸­å­æ®µçä¸ªæ°\n   * reflect.Value.Method(n).Call(nil)ï¼è°ç¨ç»æä½ä¸­çæ¹æ³\n   * reflect.TypeOfï¼è¿åä¸ä¸ªTypeç±»åå¼\n   * reflect.Value.Kindï¼è¿åä¸ä¸ªå¸¸éï¼è¡¨ç¤ºåéçç±»å«\n   * reflect.ValueOfï¼è¿åä¸ä¸ªValueç±»åå¼ï¼è¯¥å¼ä»£è¡¨è¿è¡æ¶çæ°æ®\n     * SetXX(x) å ä¸ºä¼ éçæ¯xçå¯æ¬ï¼æä»¥SetXXä¸è½å¤æ¹xï¼è¦æ¹å¨xå¿é¡»åå½æ°ä¼ éxçæé\n     \n     //> SetIntãSetFloatãSetString\n     \n     //éè¯¯ä»£ç ï¼ï¼ï¼\n     //panic: reflect: reflect.Value.SetFloat using unaddressable value\n     func main() {\n         var a float64\n         fv := reflect.ValueOf(&a)\n         fv.SetFloat(520.00)\n     }\n     //æ­£ç¡®çï¼ä¼ æé\n     func main() {\n         var a2 float64\n         fv2 := reflect.ValueOf(&a2)\n         fv2.Elem().SetFloat(520.00)\n         fmt.Printf("%v\\n", a2)    //520\n     }\n     \n     \n     1\n     2\n     3\n     4\n     5\n     6\n     7\n     8\n     9\n     10\n     11\n     12\n     13\n     14\n     15\n     16\n     ',normalizedContent:'# go\n\n * ç±»å\n   \n   * (u)int(8|16|32|64)ãboolãstringãuintptrãbyte(=uint8)ãrune(=uint32)ãfloat[32|64]ãcomplex[64|128]\n   * chanãinterfaceãfunc\n   * arrayãsliceãmap\n\n * å³é®å­\n   \n   * æ¦è§\n     \n     reserved-keywords:25\n         package\timport\tstruct\tinterface\tconst\tmap\ttype\tfunc\t\n         if\telse\tfor\tswitch\tselect\tbreak\tcontinue\tgoto\n         return\tfallthrough\tcase\tdefault\tdefer\trange\tgo\tchan\tvar\n     é¢å®ä¹æ è¯ç¬¦ï¼ååµå½æ°åæ°æ®ç±»åç­\n         append\tiota\tlen\tcap\tmake\tnew\tcopy\ttrue\tfalse nil\n         close\timag\tprint\tprintln\tpanic\treal\trecover\n     \n     \n     1\n     2\n     3\n     4\n     5\n     6\n     7\n     \n   * range\n     * ä½ç¨äº string or mapï¼å¯ä»¥è¿åç³»å (key, value)\n   * fallthrough\n     * å¨ switch case ä¸­å¼ºå¶æ§è¡åé¢ç case ä»£ç \n   * chan\n     \n     chonlyread := make(<-chan int) //åå»ºåªè¯»channel \n     chonlywrite := make(chan<- int) //åå»ºåªåchannel    \n     \n     \n     1\n     2\n     \n   * defer\n     * å½å½æ°è¿åæ¶ï¼ä¼æ§è¡deferè¯­å¥ï¼å³ä½¿è§¦åå¼å¸¸ä¹ä¼èµ°deferè¯­å¥ï¼å¦ææå¤ä¸ªdeferè¯­å¥ï¼åæ first-in-last-out çé¡ºåºä¾æ¬¡æ§è¡ï¼\n     * deferè¯­å¥ä¸­çåéï¼å¨deferå£°ææ¶ç¡®å®åé\n   * func\n     * ä¸æ¯æéè½½ï¼ä¸ä¸ªåä¸è½æä¸¤ä¸ªåå­ä¸æ ·çå½æ°\n     * å½åè¿åå¼çåå­ï¼returnå¯ä»¥ä¸æå®åéåï¼\n       \n       func add(a, b int) (c int) {\n               c = a + b\n               return\n       }\n       \n       \n       1\n       2\n       3\n       4\n       \n\n * å¼ä¼ é & å¼ç¨ä¼ é\n   \n   * mapãsliceãchanãæéãinterfaceé»è®¤ä»¥å¼ç¨çæ¹å¼ä¼ é\n   * åéåå­\n     * new ä¸»è¦ç¨æ¥åéå¼ç±»åï¼æ¯å¦ intãstructãarrayï¼è¿åçæ¯æé\n     * make ä¸»è¦ç¨æ¥åéå¼ç¨ç±»åï¼æ¯å¦ chanãmapãslice\n   * array : å¼ç±»å, å½ä½ä¸ºæ¹æ³çå¥åä¼ å¥æ¶å°å¤å¶ä¸ä»½æ°ç»èä¸æ¯å¼ç¨åä¸æé\n   * slice : å¼ç¨ç±»å, å¨ä¼ éåçæ¶ï¼ç­åäºä¼ éäºä¸æé\n\n * å¯ååæ°\n   \n   * å¯ååæ°å®éä¸æ¯ä¸ä¸ªsliceï¼å¯ä»¥éè¿arg[index]ä¾æ¬¡è®¿é®ææåæ°ï¼éè¿len(arg)æ¥å¤æ­ååçä¸ªæ°\n     \n     func concat(s string, arg ...string) string {\n         str := s\n         for i := 0; i < len(arg); i++ { str += arg[i] }\n         return str\n     }\n     \n     \n     1\n     2\n     3\n     4\n     5\n     \n\n * closure\n   \n   * é­åæ¯ä¸ä¸ªå½æ°åä¸å¶ç¸å³çå¼ç¨ç¯å¢ç»åèæçå®ä½\n   * å½æ°å¯ä»¥å­å¨å°åéä¸­ä½ä¸ºåæ°ä¼ éç»å¶å®å½æ°ï¼è½å¤è¢«å½æ°å¨æçåå»ºåè¿å\n     \n     func adder() func(int) int {\n         var x int\n         return func(d int) int {\n             x += d\n             return x\n         }\n     }\n     f := adder()\n     fmt.println(f(1))    //1\n     fmt.println(f(10))   //11\n     fmt.println(f(100))  //111\n     \n     \n     1\n     2\n     3\n     4\n     5\n     6\n     7\n     8\n     9\n     10\n     11\n     \n\n * ç¨åºåå§åä¸æ§è¡è¿ç¨\n   \n   * ç¨åºçåå§ååæ§è¡é½èµ·äºmainå, ç¼è¯æ¶å°ä¾èµçåä¾æ¬¡å¯¼å¥\n   * æµç¨ï¼\n     * ååå§åæ¶ï¼ä¼åéå±éå½çå°å®ä¾èµçåå¯¼å¥è¿æ¥ï¼ç´å°é¡¶å±åã\n     * ç¶åå¯¹é¡¶å±åä¸­çåçº§å¸¸éååéè¿è¡åå§åï¼æ¥çæ§è¡initå½æ°ï¼å¦ææçè¯ï¼ï¼ä¾æ¬¡ç±»æ¨ï¼ç´å°æå¤å±åè¢«åå§åã\n     * ç­ææè¢«å¯¼å¥çåå è½½å®æ¯ï¼å°±å¼å§å¯¹mainåä¸­çåçº§å¸¸éååéè¿è¡åå§åï¼ç¶åæ§è¡mainåä¸­çinitå½æ°ï¼å¦æå­å¨çè¯ï¼ï¼æåæ§è¡mainå½æ°ã\n   * æ³¨æ\n     * init()å¯ä»¥å¨ä»»ä½packageä¸­åºç°(å¯é); main()åªè½ç¨å¨package main ä¸­(å¿é)\n     * å¦æä¸ä¸ªåä¼è¢«å¤ä¸ªååæ¶å¯¼å¥ï¼é£ä¹å®åªä¼è¢«å¯¼å¥ä¸æ¬¡\n\n * reflect\n   \n   * reflect.value.numfield()ï¼è·åç»æä½ä¸­å­æ®µçä¸ªæ°\n   * reflect.value.method(n).call(nil)ï¼è°ç¨ç»æä½ä¸­çæ¹æ³\n   * reflect.typeofï¼è¿åä¸ä¸ªtypeç±»åå¼\n   * reflect.value.kindï¼è¿åä¸ä¸ªå¸¸éï¼è¡¨ç¤ºåéçç±»å«\n   * reflect.valueofï¼è¿åä¸ä¸ªvalueç±»åå¼ï¼è¯¥å¼ä»£è¡¨è¿è¡æ¶çæ°æ®\n     * setxx(x) å ä¸ºä¼ éçæ¯xçå¯æ¬ï¼æä»¥setxxä¸è½å¤æ¹xï¼è¦æ¹å¨xå¿é¡»åå½æ°ä¼ éxçæé\n     \n     //> setintãsetfloatãsetstring\n     \n     //éè¯¯ä»£ç ï¼ï¼ï¼\n     //panic: reflect: reflect.value.setfloat using unaddressable value\n     func main() {\n         var a float64\n         fv := reflect.valueof(&a)\n         fv.setfloat(520.00)\n     }\n     //æ­£ç¡®çï¼ä¼ æé\n     func main() {\n         var a2 float64\n         fv2 := reflect.valueof(&a2)\n         fv2.elem().setfloat(520.00)\n         fmt.printf("%v\\n", a2)    //520\n     }\n     \n     \n     1\n     2\n     3\n     4\n     5\n     6\n     7\n     8\n     9\n     10\n     11\n     12\n     13\n     14\n     15\n     16\n     ',charsets:{cjk:!0}},{title:"Go Mod ç®ä»",frontmatter:{title:"Go Mod ç®ä»",date:"2020-03-23T00:00:00.000Z",lastmod:null,publish:!0,categories:["golang"],keywords:["go","mod"],description:"golang ä¸­ mod çç®ä»ä»¥åä½¿ç¨",tags:[null],permalink:null},regularPath:"/blog/lang/go/gomod.html",relativePath:"blog/lang/go/gomod.md",key:"v-52f58a7d",path:"/blog/lang/go/gomod.html",headers:[{level:2,title:"GOMOD",slug:"gomod",normalizedTitle:"gomod",charIndex:16},{level:2,title:"reference",slug:"reference",normalizedTitle:"reference",charIndex:1649}],headersStr:"GOMOD reference",content:"# Go Mod ç®ä»\n\n\n# GOMOD\n\n * GOROOT & GOPATH\n   * å¦ææ²¡æèªè¡è®¾ç½®çè¯ï¼GOROOT ä¼å /usr/lib/go ä½ä¸ºé»è®¤å¼ï¼è GOPATH åä¼å $HOME/goã\n * ä¾èµç®¡çç®æ ï¼\n   * API ç¨³å®æ§åå¯éç°æå»º\n * go_version < 1.12\n   * go getä½ç½®ï¼$GOPATH/src\n * go_version >= 1.13\n   * go mod\n     * GO111MODULE\n     * $GOPATH/pkg/mod\n   * go get : ä¸åå¾ªç¯æåsubmoduleå­æ¨¡å\n   * go mod ä½¿ç¨ æå°çæ¬éæ©ï¼Minimal Version Selectionï¼ç®æ³ï¼ä¸ºæ¯ä¸ªæ¨¡åæå®çä¾èµé½æ¯å¯ç¨äºæå»ºçæä½çæ¬ï¼æåå®ééæ©ççæ¬æ¯ææåºç°è¿çæä½çæ¬ä¸­çæå¤§å¼ã\n   * go.mod åå«åé¨åï¼\n     * module:\n       \n       module /path/to/your/mod/v2\n       ç¨æ¥å£°æå½å moduleï¼å¦æå½åçæ¬å¤§äº v1 çè¯ï¼è¿éè¦å¨å°¾é¨æ¾å¼çå£°æ /vNã\n       \n       \n       1\n       2\n       \n     * require:\n     \n     \trequire /your/mod tag/branch/commit/latest\n     \tå¯ä»¥ä½¿ç¨ latest æ¥è¡¨ç¤ºå¼ç¨ææ°ç commitãå¦æå¯¹åºçå¼ç¨åå¥½æ¯ä¸ä¸ª Tag çè¯ï¼è¿ä¸ªå­ç¬¦ä¸²ä¼è¢«éåä¸ºå¯¹åºç tagï¼å¦æä¸æ¯çè¯ï¼è¿ä¸ªå­ç¬¦ä¸²ä¼è¢«è§èåä¸ºå½¢å¦ v2.0.0-20180128182452-d3ae77c26ac8 è¿æ ·çå­ç¬¦ä¸²ã\n     \n     \n     1\n     2\n     \n     * replace:åªè½ä½ç¨äºå½åæ¨¡åçæå»ºã\n     \n     \treplace original_name => real_name tag/branch/commit\n     \treplace original_name => local_path\n     \n     \treplace test.dev/common => git.example.com/bravo/common.git v0.0.0-20190520075948-958a278528f8\n     \treplace test.dev/common => ../../another-porject/common-go\n     \n     \n     1\n     2\n     3\n     4\n     5\n     \n     * exclude:åªè½ä½ç¨äºå½åæ¨¡åçæå»º\n   * vendor\n     * ä½¿ç¨ go mod vendor åªæ¯åçº¯å°æ go.sum ä¸­çææä¾èµä¸è½½å° vendor ç®å½éï¼å¦æä½ ç¨å®è¿ç§» godep ä½ ä¼åç° vendor ç®å½éçåä¼å godep æå®çäº§çç¸å½å¤§çå·®å¼ï¼æä»¥è¯·å¡å¿ä¸è¦è¿æ ·åã\n     * ä½¿ç¨ go build -mod=vendor æ¥æå»ºé¡¹ç®ï¼å ä¸ºå¨ go modules æ¨¡å¼ä¸ go build æ¯å±è½ vendor æºå¶çï¼æä»¥éè¦ç¹å®åæ°éæ°å¼å¯ vendor æºå¶ã\n * å¸¸ç¨æä»¤\n\n\tgo mod graph | grep XXX æ¥ççè°å¨ä¾èµè¿ä¸ªXXXæ¨¡åï¼\n\tgo list -m all\tååºå½åæ¨¡åä¾èµçæææ¨¡å\n\tgo list -u -m all\tååºå½åæ¨¡åä¾èµä¸­å¯åçº§çæ¨¡å\n\tgo get -u\tåçº§ææä¾èµè³ææ°çæ¬\n\tgo get -u=patch\tåçº§ææä¾èµè³ææ°çä¿®è®¢çæ¬\n\tgo mod tidy\tæ¸çæªä½¿ç¨/çæçä¾èµ\n\n\n1\n2\n3\n4\n5\n6\n\n\n\n# reference\n\n * https://xuanwo.io/2019/05/27/go-modules/",normalizedContent:"# go mod ç®ä»\n\n\n# gomod\n\n * goroot & gopath\n   * å¦ææ²¡æèªè¡è®¾ç½®çè¯ï¼goroot ä¼å /usr/lib/go ä½ä¸ºé»è®¤å¼ï¼è gopath åä¼å $home/goã\n * ä¾èµç®¡çç®æ ï¼\n   * api ç¨³å®æ§åå¯éç°æå»º\n * go_version < 1.12\n   * go getä½ç½®ï¼$gopath/src\n * go_version >= 1.13\n   * go mod\n     * go111module\n     * $gopath/pkg/mod\n   * go get : ä¸åå¾ªç¯æåsubmoduleå­æ¨¡å\n   * go mod ä½¿ç¨ æå°çæ¬éæ©ï¼minimal version selectionï¼ç®æ³ï¼ä¸ºæ¯ä¸ªæ¨¡åæå®çä¾èµé½æ¯å¯ç¨äºæå»ºçæä½çæ¬ï¼æåå®ééæ©ççæ¬æ¯ææåºç°è¿çæä½çæ¬ä¸­çæå¤§å¼ã\n   * go.mod åå«åé¨åï¼\n     * module:\n       \n       module /path/to/your/mod/v2\n       ç¨æ¥å£°æå½å moduleï¼å¦æå½åçæ¬å¤§äº v1 çè¯ï¼è¿éè¦å¨å°¾é¨æ¾å¼çå£°æ /vnã\n       \n       \n       1\n       2\n       \n     * require:\n     \n     \trequire /your/mod tag/branch/commit/latest\n     \tå¯ä»¥ä½¿ç¨ latest æ¥è¡¨ç¤ºå¼ç¨ææ°ç commitãå¦æå¯¹åºçå¼ç¨åå¥½æ¯ä¸ä¸ª tag çè¯ï¼è¿ä¸ªå­ç¬¦ä¸²ä¼è¢«éåä¸ºå¯¹åºç tagï¼å¦æä¸æ¯çè¯ï¼è¿ä¸ªå­ç¬¦ä¸²ä¼è¢«è§èåä¸ºå½¢å¦ v2.0.0-20180128182452-d3ae77c26ac8 è¿æ ·çå­ç¬¦ä¸²ã\n     \n     \n     1\n     2\n     \n     * replace:åªè½ä½ç¨äºå½åæ¨¡åçæå»ºã\n     \n     \treplace original_name => real_name tag/branch/commit\n     \treplace original_name => local_path\n     \n     \treplace test.dev/common => git.example.com/bravo/common.git v0.0.0-20190520075948-958a278528f8\n     \treplace test.dev/common => ../../another-porject/common-go\n     \n     \n     1\n     2\n     3\n     4\n     5\n     \n     * exclude:åªè½ä½ç¨äºå½åæ¨¡åçæå»º\n   * vendor\n     * ä½¿ç¨ go mod vendor åªæ¯åçº¯å°æ go.sum ä¸­çææä¾èµä¸è½½å° vendor ç®å½éï¼å¦æä½ ç¨å®è¿ç§» godep ä½ ä¼åç° vendor ç®å½éçåä¼å godep æå®çäº§çç¸å½å¤§çå·®å¼ï¼æä»¥è¯·å¡å¿ä¸è¦è¿æ ·åã\n     * ä½¿ç¨ go build -mod=vendor æ¥æå»ºé¡¹ç®ï¼å ä¸ºå¨ go modules æ¨¡å¼ä¸ go build æ¯å±è½ vendor æºå¶çï¼æä»¥éè¦ç¹å®åæ°éæ°å¼å¯ vendor æºå¶ã\n * å¸¸ç¨æä»¤\n\n\tgo mod graph | grep xxx æ¥ççè°å¨ä¾èµè¿ä¸ªxxxæ¨¡åï¼\n\tgo list -m all\tååºå½åæ¨¡åä¾èµçæææ¨¡å\n\tgo list -u -m all\tååºå½åæ¨¡åä¾èµä¸­å¯åçº§çæ¨¡å\n\tgo get -u\tåçº§ææä¾èµè³ææ°çæ¬\n\tgo get -u=patch\tåçº§ææä¾èµè³ææ°çä¿®è®¢çæ¬\n\tgo mod tidy\tæ¸çæªä½¿ç¨/çæçä¾èµ\n\n\n1\n2\n3\n4\n5\n6\n\n\n\n# reference\n\n * https://xuanwo.io/2019/05/27/go-modules/",charsets:{cjk:!0}},{title:"ä¼ç§ç Go ææ¡£",frontmatter:{title:"ä¼ç§ç Go ææ¡£",date:"2021-07-27T00:00:00.000Z",lastmod:null,publish:!0,categories:["golang"],keywords:["nil error","reflection","interfaces"],description:"golang ä¸­å³é®é®é¢è§£æ",tags:[null],permalink:null},regularPath:"/blog/lang/go/intrest_blogs.html",relativePath:"blog/lang/go/intrest_blogs.md",key:"v-65f07e87",path:"/blog/lang/go/intrest_blogs.html",headersStr:null,content:"# ä¼ç§ç Go ææ¡£\n\nID   SUBJECT                          URL                                          NOTE\n1    FAQ - nil_error                  https://golang.org/doc/faq#nil_error         \n2    laws of reflection               https://blog.golang.org/laws-of-reflection   PDF\n3    Go Data Structures: Interfaces   https://research.swtch.com/interfaces        PDF",normalizedContent:"# ä¼ç§ç go ææ¡£\n\nid   subject                          url                                          note\n1    faq - nil_error                  https://golang.org/doc/faq#nil_error         \n2    laws of reflection               https://blog.golang.org/laws-of-reflection   pdf\n3    go data structures: interfaces   https://research.swtch.com/interfaces        pdf",charsets:{cjk:!0}},{title:"recover & const ç®è¿°",frontmatter:{title:"recover & const ç®è¿°",date:"2019-12-23T00:00:00.000Z",lastmod:null,publish:!0,categories:["golang"],keywords:["recover","panic","const"],description:"golang ä¸­ recover çä½¿ç¨ï¼ä»¥å const ç±»åè½¬æ¢ä½¿ç¨è¿ç¨ä¸­éå°ççé®é¢",tags:[null],permalink:null},regularPath:"/blog/lang/go/recover&const_desc.html",relativePath:"blog/lang/go/recover&const_desc.md",key:"v-6a7f071f",path:"/blog/lang/go/recover&const_desc.html",headers:[{level:2,title:"constç±»åè½¬æ¢",slug:"constç±»åè½¬æ¢",normalizedTitle:"constç±»åè½¬æ¢",charIndex:25},{level:2,title:"defer & panic & recover",slug:"defer-panic-recover",normalizedTitle:"defer &amp; panic &amp; recover",charIndex:null}],headersStr:"constç±»åè½¬æ¢ defer & panic & recover",content:'# recover & const ç®è¿°\n\n\n# constç±»åè½¬æ¢\n\n * é®é¢\n   \n   \tpackage main\n   \timport (\n   \t\t"fmt"\n   \t\t"reflect"\n   \t\t"time"\n   \t)\n   \tconst a = 1\n   \tfunc test(a time.Duration) {\n   \t\tfmt.Printf("%v \\n", a)\n   \t}\n   \tfunc main() {\n   \t\tb := a + 1\n   \t\tfmt.Printf("---- a = %v \\n", reflect.TypeOf(a))\n   \t\ttest(a)\n   \t\tfmt.Printf("---- b = %v \\n", reflect.TypeOf(b))\n   \t\t// test(b)  //> æå¼æ³¨éå, ä¼ç¼è¯ä¸éè¿\n   \t}\n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   7\n   8\n   9\n   10\n   11\n   12\n   13\n   14\n   15\n   16\n   17\n   \n * åå \n   \n   Assignability\n   \tA value x is assignable to a variable of type T ("x is assignable to T") if one of the following conditions applies:\n   \t\t- x\'s type is identical to T.\n   \t\t- x\'s type V and T have identical underlying types and at least one of V or T is not a defined type.\n   \t\t- T is an interface type and x implements T.\n   \t\t- x is a bidirectional channel value, T is a channel type, x\'s type V and T have identical element types, and at least one of V or T is not a defined type.\n   \t\t- x is the predeclared identifier nil and T is a pointer, function, slice, map, channel, or interface type.\n   \t\t- x is an untyped constant representable by a value of type T.\t\n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   7\n   8\n   \n   * const ä¿®é¥°çåéå¦ææ²¡ææç¡®ææç±»åæ¶ï¼ä¼æ ¹æ®éè¦åç±»åè½¬æ¢; èé const ä¿®é¥°çåéä¸ä¼ã\n   * reference: https://golang.org/ref/spec#Constants\n\n\n# defer & panic & recover\n\n * è¯¦è¿°\n   * defer\n     * å·¥ä½æ¹å¼ï¼åè¿ååº\n     * æ§è¡æ¶æºï¼\n       * åè¯´ returnè¯­å¥çå¤çè¿ç¨\n         * return xxx è¯­å¥å¹¶ä¸æ¯ä¸æ¡åå­æä»¤ï¼å¨æ§è¡æ¶ä¼åè§£æï¼ aãè¿ååé=xxx bãæ§è¡return\n       * deferè¯­å¥æ¯å¨å½æ°å³é­æ¶è°ç¨ï¼ç¡®åçè¯´æ¯ç´§è´´å¨æ§è¡returnè¯­å¥ä¹åè°ç¨ã\n         * æ³¨æï¼æ¯return ä¸æ¯return xxxï¼å°±æ¯è¯´ defer åçå¨ä¸è¿°æµç¨ç a å b ä¹é´ã\n   * panic\n     * æ§è¡è¿ç¨ï¼\n       * å½æ§è¡ä¸ä¸ªå½æ° F çæ¶åï¼å¦ææ¾å¼å°è°ç¨ panic å½æ°æèä¸ä¸ª run-time panics åçæ¶ï¼F ä¼ç»æè¿è¡ï¼ææ F ä¸­ defer çå½æ°ä¼æç§ FILO çè§åè¢«æ§è¡ã\n       * ä¹åï¼F å½æ°çè°ç¨èä¸­ defer çå½æ°åè¢«æ§è¡ï¼å¦æ­¤ä¸ç´å°æå¤å±ä»£ç æèææç recover è°ç¨ã\n     * panic å½æ°çåæ°æ¯ç©ºæ¥å£ç±»åï¼æä»¥å¯ä»¥æ¥åä»»ä½ç±»åçå¯¹è±¡\n   * recover\n     * ç®çï¼\n       * å½ä¸ä¸ª goroutine åç panic æ¶ï¼ä¸å½±åå¶ä»ç goroutines çæ§è¡\n     * æ§è¡æ¶æºï¼\n       * recover å½æ°ç¨æ¥è·å panic å½æ°çåæ°ä¿¡æ¯ï¼åªè½å¨å»¶æ¶è°ç¨ defer è¯­å¥è°ç¨çå½æ°ä¸­ç´æ¥è°ç¨æè½çæ\n       * å¦æå¨ defer è¯­å¥ä¸­ä¹è°ç¨ panic å½æ°ï¼ååªææåä¸ä¸ªè¢«è°ç¨ç panic å½æ°çåæ°ä¼è¢« recover å½æ°è·åå°ã\n       * å¦æ goroutine æ²¡æ panicï¼é£è°ç¨ recover å½æ°ä¼è¿å nilã\n\n> sample code\n\npackage main\n\nimport (\n\t"fmt"\n\t"runtime"\n\t"sync"\n\t"time"\n)\n\n/**\n*\n\né¢æï¼\n   æä»¬é¢æï¼å®æ¶å¨ä¸åçå·¥ä½ï¼ä½å½ goroutine åç panic æ¶ï¼è½ç¶ä¸ä¼å½±åå¶ä» goroutine ä½ä¼é æå®æ¶å¨éåºï¼ä¸åç»§ç»­å·¥ä½\nä¼ªç ï¼\n   go func() {\n       defer func() {\n           if err := recover(); err != nil {\n               stackData := make([]byte, 1<<16)\n               runtime.Stack(stackData, false)\n               fmt.Printf("%v \\n", string(stackData))\n           }\n       }\n       ticker := time.NewTicker(1 * time.Second)\n       for range ticker.C {\n           var wg sync.WaitGroup\n           go func() {\n               //> do somethings\n           }\n           for i := 0; i < 100; i++ {\n               wg.Add(1)\n               go func() {\n                   defer wg.Done()\n                   //> do somethings\n               }\n           }\n           wg.Wait()\n       }\n   }\n\n*/\n\nfunc recovery(source string) {\n\tif err := recover(); err != nil { // recoveråªå¨deferçå½æ°ä¸­ææ\n\t\tfmt.Printf("-- %v \\n", err)\n\t\tstackData := make([]byte, 1<<16)\n\t\truntime.Stack(stackData, false)\n\t\tfmt.Printf("src=%s: %v \\n", source, string(stackData))\n\t} else {\n\t\tfmt.Printf("i am recovery: no : src=%s\\n", source)\n\t}\n}\n\nfunc firstCrash() {\n\tdefer func() {\n\t\tfmt.Printf("i am firstCrash: defer \\n")\n\t\t//> è¿éç recover çæ\n\t\tif err := recover(); err != nil {\n\t\t\tfmt.Printf("i am firstCrash: recovery \\n")\n\t\t}\n\t}()\n\tpanic("~~ panic ~~")\n}\n\nfunc nextCrash() {\n\tdefer func() {\n\t\tfmt.Printf("i am nextCrash: defer \\n")\n\t\trecovery("nextCrash") //> è¿éç recovery éç recover ä¸çæ: recover åªå¨ defer å½æ°éæçæ\n\t}()\n\tpanic("~~ panic ~~")\n}\n\nfunc next(w *sync.WaitGroup) {\n\tdefer w.Done()\n\tfmt.Printf("-- next: body \\n")\n\tnextCrash()\n}\n\nfunc first(w *sync.WaitGroup) {\n\tw.Add(1)\n\tgo func() {\n\t\tdefer recovery("first")\n\t\ttime.Sleep(1 * time.Second)\n\t\tfirstCrash()\n\t\tfmt.Printf("i am first: b \\n")\n\t\tnext(w)\n\t}()\n}\n\nfunc main() {\n\tdefer recovery("main")\n\tvar wg sync.WaitGroup\n\tfirst(&wg)\n\tfmt.Printf("i am wait \\n")\n\twg.Wait()\n\ttime.Sleep(2 * time.Second)\n\tfmt.Printf("i am ending \\n")\n}\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n92\n93\n94\n95\n96\n97\n98\n99\n',normalizedContent:'# recover & const ç®è¿°\n\n\n# constç±»åè½¬æ¢\n\n * é®é¢\n   \n   \tpackage main\n   \timport (\n   \t\t"fmt"\n   \t\t"reflect"\n   \t\t"time"\n   \t)\n   \tconst a = 1\n   \tfunc test(a time.duration) {\n   \t\tfmt.printf("%v \\n", a)\n   \t}\n   \tfunc main() {\n   \t\tb := a + 1\n   \t\tfmt.printf("---- a = %v \\n", reflect.typeof(a))\n   \t\ttest(a)\n   \t\tfmt.printf("---- b = %v \\n", reflect.typeof(b))\n   \t\t// test(b)  //> æå¼æ³¨éå, ä¼ç¼è¯ä¸éè¿\n   \t}\n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   7\n   8\n   9\n   10\n   11\n   12\n   13\n   14\n   15\n   16\n   17\n   \n * åå \n   \n   assignability\n   \ta value x is assignable to a variable of type t ("x is assignable to t") if one of the following conditions applies:\n   \t\t- x\'s type is identical to t.\n   \t\t- x\'s type v and t have identical underlying types and at least one of v or t is not a defined type.\n   \t\t- t is an interface type and x implements t.\n   \t\t- x is a bidirectional channel value, t is a channel type, x\'s type v and t have identical element types, and at least one of v or t is not a defined type.\n   \t\t- x is the predeclared identifier nil and t is a pointer, function, slice, map, channel, or interface type.\n   \t\t- x is an untyped constant representable by a value of type t.\t\n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   7\n   8\n   \n   * const ä¿®é¥°çåéå¦ææ²¡ææç¡®ææç±»åæ¶ï¼ä¼æ ¹æ®éè¦åç±»åè½¬æ¢; èé const ä¿®é¥°çåéä¸ä¼ã\n   * reference: https://golang.org/ref/spec#constants\n\n\n# defer & panic & recover\n\n * è¯¦è¿°\n   * defer\n     * å·¥ä½æ¹å¼ï¼åè¿ååº\n     * æ§è¡æ¶æºï¼\n       * åè¯´ returnè¯­å¥çå¤çè¿ç¨\n         * return xxx è¯­å¥å¹¶ä¸æ¯ä¸æ¡åå­æä»¤ï¼å¨æ§è¡æ¶ä¼åè§£æï¼ aãè¿ååé=xxx bãæ§è¡return\n       * deferè¯­å¥æ¯å¨å½æ°å³é­æ¶è°ç¨ï¼ç¡®åçè¯´æ¯ç´§è´´å¨æ§è¡returnè¯­å¥ä¹åè°ç¨ã\n         * æ³¨æï¼æ¯return ä¸æ¯return xxxï¼å°±æ¯è¯´ defer åçå¨ä¸è¿°æµç¨ç a å b ä¹é´ã\n   * panic\n     * æ§è¡è¿ç¨ï¼\n       * å½æ§è¡ä¸ä¸ªå½æ° f çæ¶åï¼å¦ææ¾å¼å°è°ç¨ panic å½æ°æèä¸ä¸ª run-time panics åçæ¶ï¼f ä¼ç»æè¿è¡ï¼ææ f ä¸­ defer çå½æ°ä¼æç§ filo çè§åè¢«æ§è¡ã\n       * ä¹åï¼f å½æ°çè°ç¨èä¸­ defer çå½æ°åè¢«æ§è¡ï¼å¦æ­¤ä¸ç´å°æå¤å±ä»£ç æèææç recover è°ç¨ã\n     * panic å½æ°çåæ°æ¯ç©ºæ¥å£ç±»åï¼æä»¥å¯ä»¥æ¥åä»»ä½ç±»åçå¯¹è±¡\n   * recover\n     * ç®çï¼\n       * å½ä¸ä¸ª goroutine åç panic æ¶ï¼ä¸å½±åå¶ä»ç goroutines çæ§è¡\n     * æ§è¡æ¶æºï¼\n       * recover å½æ°ç¨æ¥è·å panic å½æ°çåæ°ä¿¡æ¯ï¼åªè½å¨å»¶æ¶è°ç¨ defer è¯­å¥è°ç¨çå½æ°ä¸­ç´æ¥è°ç¨æè½çæ\n       * å¦æå¨ defer è¯­å¥ä¸­ä¹è°ç¨ panic å½æ°ï¼ååªææåä¸ä¸ªè¢«è°ç¨ç panic å½æ°çåæ°ä¼è¢« recover å½æ°è·åå°ã\n       * å¦æ goroutine æ²¡æ panicï¼é£è°ç¨ recover å½æ°ä¼è¿å nilã\n\n> sample code\n\npackage main\n\nimport (\n\t"fmt"\n\t"runtime"\n\t"sync"\n\t"time"\n)\n\n/**\n*\n\né¢æï¼\n   æä»¬é¢æï¼å®æ¶å¨ä¸åçå·¥ä½ï¼ä½å½ goroutine åç panic æ¶ï¼è½ç¶ä¸ä¼å½±åå¶ä» goroutine ä½ä¼é æå®æ¶å¨éåºï¼ä¸åç»§ç»­å·¥ä½\nä¼ªç ï¼\n   go func() {\n       defer func() {\n           if err := recover(); err != nil {\n               stackdata := make([]byte, 1<<16)\n               runtime.stack(stackdata, false)\n               fmt.printf("%v \\n", string(stackdata))\n           }\n       }\n       ticker := time.newticker(1 * time.second)\n       for range ticker.c {\n           var wg sync.waitgroup\n           go func() {\n               //> do somethings\n           }\n           for i := 0; i < 100; i++ {\n               wg.add(1)\n               go func() {\n                   defer wg.done()\n                   //> do somethings\n               }\n           }\n           wg.wait()\n       }\n   }\n\n*/\n\nfunc recovery(source string) {\n\tif err := recover(); err != nil { // recoveråªå¨deferçå½æ°ä¸­ææ\n\t\tfmt.printf("-- %v \\n", err)\n\t\tstackdata := make([]byte, 1<<16)\n\t\truntime.stack(stackdata, false)\n\t\tfmt.printf("src=%s: %v \\n", source, string(stackdata))\n\t} else {\n\t\tfmt.printf("i am recovery: no : src=%s\\n", source)\n\t}\n}\n\nfunc firstcrash() {\n\tdefer func() {\n\t\tfmt.printf("i am firstcrash: defer \\n")\n\t\t//> è¿éç recover çæ\n\t\tif err := recover(); err != nil {\n\t\t\tfmt.printf("i am firstcrash: recovery \\n")\n\t\t}\n\t}()\n\tpanic("~~ panic ~~")\n}\n\nfunc nextcrash() {\n\tdefer func() {\n\t\tfmt.printf("i am nextcrash: defer \\n")\n\t\trecovery("nextcrash") //> è¿éç recovery éç recover ä¸çæ: recover åªå¨ defer å½æ°éæçæ\n\t}()\n\tpanic("~~ panic ~~")\n}\n\nfunc next(w *sync.waitgroup) {\n\tdefer w.done()\n\tfmt.printf("-- next: body \\n")\n\tnextcrash()\n}\n\nfunc first(w *sync.waitgroup) {\n\tw.add(1)\n\tgo func() {\n\t\tdefer recovery("first")\n\t\ttime.sleep(1 * time.second)\n\t\tfirstcrash()\n\t\tfmt.printf("i am first: b \\n")\n\t\tnext(w)\n\t}()\n}\n\nfunc main() {\n\tdefer recovery("main")\n\tvar wg sync.waitgroup\n\tfirst(&wg)\n\tfmt.printf("i am wait \\n")\n\twg.wait()\n\ttime.sleep(2 * time.second)\n\tfmt.printf("i am ending \\n")\n}\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n92\n93\n94\n95\n96\n97\n98\n99\n',charsets:{cjk:!0}},{title:"slice åºå±ç»æ",frontmatter:{title:"slice åºå±ç»æ",date:"2020-04-09T00:00:00.000Z",lastmod:null,taxonomies:["golang","slice"],categories:["golang","slice"],keywords:["golang","nil"],description:"slice çåºå±ç»æï¼äºè§£ slice çå®ç°åºç¡",tags:["golang"],permalink:null},regularPath:"/blog/lang/go/slice_base.html",relativePath:"blog/lang/go/slice_base.md",key:"v-2c04e47f",path:"/blog/lang/go/slice_base.html",headers:[{level:2,title:"Summary",slug:"summary",normalizedTitle:"summary",charIndex:17},{level:2,title:"Defination",slug:"defination",normalizedTitle:"defination",charIndex:326},{level:2,title:"nilåç å ç©ºåç",slug:"nilåç-å-ç©ºåç",normalizedTitle:"nilåç å ç©ºåç",charIndex:1107}],headersStr:"Summary Defination nilåç å ç©ºåç",content:"# slice åºå±ç»æ\n\n\n# Summary\n\nGo ä¸­æ°ç»èµå¼åå½æ°ä¼ åé½æ¯å¼å¤å¶ç, åçæ¯å¼ç¨ä¼ é\n\n * æ°ç»\n   * åå§åæ¶æå®é¿åº¦ï¼å¦ï¼\n   \n       a := [2]int{1,2}\n       var b [2]int\n   \n   \n   1\n   2\n   \n * åç(slice)\n   * æ¯å¯¹æ°ç»ä¸ä¸ªè¿ç»­çæ®µçå¼ç¨ï¼æä»¥åçæ¯ä¸ä¸ªå¼ç¨ç±»å (å æ­¤æ´ç±»ä¼¼äº C/C++ ä¸­çæ°ç»ç±»åï¼æè Python ä¸­ç list ç±»å)\n   * åå§åæ¶ä¸æå®é¿åº¦ï¼å¦ï¼\n   \n       a := []int{1,2}\n       var b []int\n   \n   \n   1\n   2\n   \n\n\n# Defination\n\nSlice çæ°æ®ç»æå®ä¹å¦ä¸:\n\n    // runtime/slice.go\n    type slice struct {\n        array unsafe.Pointer\n        len   int\n        cap   int\n    }\n\n\n1\n2\n3\n4\n5\n6\n\n\nå¦ææ³ä» slice ä¸­å¾å°ä¸ååå­å°åï¼å¯ä»¥è¿æ ·åï¼\n\n    s := make([]byte, 10)defination\n    ptr := unsafe.Pointer(&s[0])\n\n\n1\n2\n\n\nå¦æåè¿æ¥å¢ï¼ä» Go çåå­å°åä¸­æé ä¸ä¸ª sliceã\n\n    var ptr unsafe.Pointer\n    var tmp = struct {\n        addr uintptr\n        len int\n        cap int\n    }{ptr, length, length}\n    s := *(*[]byte)(unsafe.Pointer(&tmp))\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\næé ä¸ä¸ªèæçç»æä½ï¼æ slice çæ°æ®ç»ææ¼åºæ¥ã\n\nå½ç¶è¿ææ´å ç´æ¥çæ¹æ³ï¼å¨ Go çåå°ä¸­å°±å­å¨ä¸ä¸ªä¸ä¹å¯¹åºçæ°æ®ç»æ SliceHeaderï¼æä»¬å¯ä»¥ç¨å®æ¥æé ä¸ä¸ª slice\n\n    var o []byte\n    sliceHeader := (*reflect.SliceHeader)((unsafe.Pointer(&o)))\n    sliceHeader.Cap = length\n    sliceHeader.Len = length\n    sliceHeader.Data = uintptr(ptr)\n\n\n1\n2\n3\n4\n5\n\n\n\n# nilåç å ç©ºåç\n\nnilåç\n\n    // åå­å¸å±ï¼\n    //    Slice ---\x3e nil | Len = 0 | Cap = 0\n    var slice []int\n\n\n1\n2\n3\n\n\nç©ºåç\n\n    // åå­å¸å±ï¼\n    //     Slice ---\x3e Pointer to Array | Len = 0 | Cap = 0\n    silce := make( []int , 0 )\n    slice := []int{ }\n\n\n1\n2\n3\n4\n",normalizedContent:"# slice åºå±ç»æ\n\n\n# summary\n\ngo ä¸­æ°ç»èµå¼åå½æ°ä¼ åé½æ¯å¼å¤å¶ç, åçæ¯å¼ç¨ä¼ é\n\n * æ°ç»\n   * åå§åæ¶æå®é¿åº¦ï¼å¦ï¼\n   \n       a := [2]int{1,2}\n       var b [2]int\n   \n   \n   1\n   2\n   \n * åç(slice)\n   * æ¯å¯¹æ°ç»ä¸ä¸ªè¿ç»­çæ®µçå¼ç¨ï¼æä»¥åçæ¯ä¸ä¸ªå¼ç¨ç±»å (å æ­¤æ´ç±»ä¼¼äº c/c++ ä¸­çæ°ç»ç±»åï¼æè python ä¸­ç list ç±»å)\n   * åå§åæ¶ä¸æå®é¿åº¦ï¼å¦ï¼\n   \n       a := []int{1,2}\n       var b []int\n   \n   \n   1\n   2\n   \n\n\n# defination\n\nslice çæ°æ®ç»æå®ä¹å¦ä¸:\n\n    // runtime/slice.go\n    type slice struct {\n        array unsafe.pointer\n        len   int\n        cap   int\n    }\n\n\n1\n2\n3\n4\n5\n6\n\n\nå¦ææ³ä» slice ä¸­å¾å°ä¸ååå­å°åï¼å¯ä»¥è¿æ ·åï¼\n\n    s := make([]byte, 10)defination\n    ptr := unsafe.pointer(&s[0])\n\n\n1\n2\n\n\nå¦æåè¿æ¥å¢ï¼ä» go çåå­å°åä¸­æé ä¸ä¸ª sliceã\n\n    var ptr unsafe.pointer\n    var tmp = struct {\n        addr uintptr\n        len int\n        cap int\n    }{ptr, length, length}\n    s := *(*[]byte)(unsafe.pointer(&tmp))\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\næé ä¸ä¸ªèæçç»æä½ï¼æ slice çæ°æ®ç»ææ¼åºæ¥ã\n\nå½ç¶è¿ææ´å ç´æ¥çæ¹æ³ï¼å¨ go çåå°ä¸­å°±å­å¨ä¸ä¸ªä¸ä¹å¯¹åºçæ°æ®ç»æ sliceheaderï¼æä»¬å¯ä»¥ç¨å®æ¥æé ä¸ä¸ª slice\n\n    var o []byte\n    sliceheader := (*reflect.sliceheader)((unsafe.pointer(&o)))\n    sliceheader.cap = length\n    sliceheader.len = length\n    sliceheader.data = uintptr(ptr)\n\n\n1\n2\n3\n4\n5\n\n\n\n# nilåç å ç©ºåç\n\nnilåç\n\n    // åå­å¸å±ï¼\n    //    slice ---\x3e nil | len = 0 | cap = 0\n    var slice []int\n\n\n1\n2\n3\n\n\nç©ºåç\n\n    // åå­å¸å±ï¼\n    //     slice ---\x3e pointer to array | len = 0 | cap = 0\n    silce := make( []int , 0 )\n    slice := []int{ }\n\n\n1\n2\n3\n4\n",charsets:{cjk:!0}},{title:"å³äº nil å¤å®çä¸äºäºæ",frontmatter:{title:"å³äº nil å¤å®çä¸äºäºæ",date:"2020-04-09T00:00:00.000Z",lastmod:null,taxonomies:["golang"],categories:["golang"],keywords:["golang","nil"],description:"å³äº nil çä¸äºäºæ",tags:["golang"],permalink:null},regularPath:"/blog/lang/go/somethings_about_nil.html",relativePath:"blog/lang/go/somethings_about_nil.md",key:"v-0c0b8bdf",path:"/blog/lang/go/somethings_about_nil.html",headers:[{level:2,title:"æ¬è´¨",slug:"æ¬è´¨",normalizedTitle:"æ¬è´¨",charIndex:19},{level:2,title:"ç¤ºä¾",slug:"ç¤ºä¾",normalizedTitle:"ç¤ºä¾",charIndex:365},{level:3,title:"ç¬¬ä¸ä¸ªé®é¢",slug:"ç¬¬ä¸ä¸ªé®é¢",normalizedTitle:"ç¬¬ä¸ä¸ªé®é¢",charIndex:1989},{level:3,title:"å³äºç¬¬äºä¸ªé®é¢ï¼",slug:"å³äºç¬¬äºä¸ªé®é¢",normalizedTitle:"å³äºç¬¬äºä¸ªé®é¢ï¼",charIndex:2214},{level:3,title:"å³äºç¬¬ä¸ä¸ªé®é¢ï¼",slug:"å³äºç¬¬ä¸ä¸ªé®é¢",normalizedTitle:"å³äºç¬¬ä¸ä¸ªé®é¢ï¼",charIndex:2334}],headersStr:"æ¬è´¨ ç¤ºä¾ ç¬¬ä¸ä¸ªé®é¢ å³äºç¬¬äºä¸ªé®é¢ï¼ å³äºç¬¬ä¸ä¸ªé®é¢ï¼",content:'# å³äº nil çä¸äºäºæ\n\n\n# æ¬è´¨\n\né¦åï¼nil æ²¡æ typeï¼å¹¶ä¸ï¼nil ä¹ä¸æ¯å³é®å­ èæ¯ é¢å£°æçæ ç¤ºç¬¦ã\n\nå¶æ¬¡ï¼å¨ Go è¯­è¨ä¸­æä»¥ä¸å ç§ç±»åå¯ä»¥åå¼ nilï¼\n\nç±»å                     NILå¼å«ä¹\npointer                æånothing, æ¯è¾æ¶éè¦èèç±»åæ¯å¦ä¸è´\nslice                  sliceåéä¸­ç3ä¸ªæåå¼ï¼bufä¸ºnil, lenåcapé½æ¯0\ninterface              interfaceåå«\'type,value\', ä¸ä¸ªnil interfaceå¿é¡»äºèé½ä¸ºnil:\'nil, nil\'\nmapï¼channelï¼function   ä¸ä¸ªnil pointerï¼æånothing\n\n\n# ç¤ºä¾\n\næ¥ä¸æ¥ï¼æä»¬æ¥çä¸æ®µä»£ç ï¼çç go è¯­è¨ä¸­å¯¹ nil å¤å®çåï¼\n\npackage nils\n\nimport (\n\t"net"\n\t"reflect"\n\t"testing"\n)\n\ntype TSlice []string\n\ntype IErrNil interface {\n\tIErrNil() IErrNil\n\tError() string\n}\n\ntype ErrNil struct {\n\tmsg string\n}\n\nfunc (t *ErrNil) Error() string {\n\treturn t.msg\n}\nfunc (t *ErrNil) ErrNil() *ErrNil {\n\treturn nil\n}\nfunc (t *ErrNil) IErrNil() IErrNil {\n\treturn nil\n}\nfunc (t *ErrNil) PrintMsg() string {\n\tif t == nil {\n\t\treturn "<nil>"\n\t}\n\treturn t.msg\n}\nfunc (t ErrNil) PrintMsgV2() string {\n\treturn t.msg\n}\n\nfunc Test_Nil(t *testing.T) {\n\tvar err error\n\n    var t ErrNil\n    t.PrintMsg()\n    t.PrintMsgV2()\n\n\ttmp := ErrNil{}\n\terr = tmp.ErrNil()\n\tif err == nil {\n\t\tt.Logf("(ErrNil == nil) ok: %v, err: %v", err == nil, err)\n\t} else {\n\t\tt.Errorf("(ErrNil == nil) err: %v, err: %v, type(err): %v", err == nil, err, reflect.TypeOf(err).Kind())\n\t}\n\n\terr = tmp.IErrNil()\n\tif err == nil {\n\t\tt.Logf("(IErrNil == nil) ok: %v, err: %v", err == nil, err)\n\t} else {\n\t\tt.Errorf("(IErrNil == nil) err: %v, err: %v, type(err): %v", err == nil, err, reflect.TypeOf(err).Kind())\n\t}\n\n\tip := net.ParseIP("111.1.111")\n\tif ip == nil {\n\t\tt.Logf("(ip == nil) ok: %v, err: %v, type(ip): %v", ip == nil, ip, reflect.TypeOf(ip).Kind())\n\t} else {\n\t\tt.Errorf("(ip == nil) err: %v, err: %v, type(ip): %v", ip == nil, ip, reflect.TypeOf(ip).Kind())\n\t}\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n\n\nä¼åç°ä¸¤ä¸ªé®é¢ï¼\n\n 1. t.PrintMsg() å¯ä»¥æ§è¡ ä½æ¯ t.PrintMsgV2() ä¼å´©æº\n 2. ç¬¬äºä¸ªå¤å®ç«ç¶ err != nil\n 3. ç¬¬ä¸ä¸ªå¤æ­ç«ç¶ ip == nil\n\n\n# ç¬¬ä¸ä¸ªé®é¢\n\nt.PrintMsg(): å½æä»¬ç¨ä¸ä¸ªç©ºæéç±»åçåé(å¦ï¼var t *ErrNil)è°ç¨æ­¤æ¹æ³æ¶ï¼è¯¥æ¹æ³æ¯ä¼æ§è¡çï¼åªæå¨æ§è¡è¯¥ç©ºæéåéçè§£æéæä½(t.msg)æ¶ï¼æä¼ panicã\n\nt.PrintMsgV2(): ç±äºæ¥åèæ¯ ErrNil èä¸æ¯ *ErrNilï¼ä½¿ç¨æéè®¿é®è¯¥å½æ°æ¶ï¼Golang åé¨ä¼å¨è°ç¨æ¶èªå¨è§£æéï¼æä½¿ç¨ç©ºæéç±»åçåé(å¦ï¼var t *ErrNil)è°ç¨æ­¤æ¹æ³æ¶ä¼ panicã\n\n\n# å³äºç¬¬äºä¸ªé®é¢ï¼\n\nç®åè¯´ï¼interface è¢«ä¸¤ä¸ªåç´  value å type æè¡¨ç¤ºãåªæå¨ value å type åæ¶ä¸º nil çæ¶åï¼å¤æ­ interface == nil æä¼ä¸º trueãå·ä½å¯ä»¥åèå®æ¹ææ¡£\n\n\n# å³äºç¬¬ä¸ä¸ªé®é¢ï¼\n\nè¿å°±æ¶åå° slice çä½¿ç¨é®é¢ã\n\ngolang ä¸­çç±»åå¯ä»¥æ¯åºæ¬ç±»åï¼å¦ï¼intãfloatãboolãstringï¼ç»æåçï¼å¤åçï¼ï¼å¦ï¼structãarrayãsliceãmapãchannelï¼åªæè¿°ç±»åçè¡ä¸ºçï¼å¦ï¼interfaceã\n\nç»æåçç±»åæ²¡æçæ­£çå¼ï¼å®ä½¿ç¨ nil ä½ä¸ºé»è®¤å¼ãç®åçè¯´ï¼[]interface{} æ¯ä¸ä¸ªæå å·ä½ slice ç±»åå¯¹è±¡çæéãæä»¥ï¼å¯ä»¥ç¨ nil è¿è¡èµå¼ å å¤æ­ã',normalizedContent:'# å³äº nil çä¸äºäºæ\n\n\n# æ¬è´¨\n\né¦åï¼nil æ²¡æ typeï¼å¹¶ä¸ï¼nil ä¹ä¸æ¯å³é®å­ èæ¯ é¢å£°æçæ ç¤ºç¬¦ã\n\nå¶æ¬¡ï¼å¨ go è¯­è¨ä¸­æä»¥ä¸å ç§ç±»åå¯ä»¥åå¼ nilï¼\n\nç±»å                     nilå¼å«ä¹\npointer                æånothing, æ¯è¾æ¶éè¦èèç±»åæ¯å¦ä¸è´\nslice                  sliceåéä¸­ç3ä¸ªæåå¼ï¼bufä¸ºnil, lenåcapé½æ¯0\ninterface              interfaceåå«\'type,value\', ä¸ä¸ªnil interfaceå¿é¡»äºèé½ä¸ºnil:\'nil, nil\'\nmapï¼channelï¼function   ä¸ä¸ªnil pointerï¼æånothing\n\n\n# ç¤ºä¾\n\næ¥ä¸æ¥ï¼æä»¬æ¥çä¸æ®µä»£ç ï¼çç go è¯­è¨ä¸­å¯¹ nil å¤å®çåï¼\n\npackage nils\n\nimport (\n\t"net"\n\t"reflect"\n\t"testing"\n)\n\ntype tslice []string\n\ntype ierrnil interface {\n\tierrnil() ierrnil\n\terror() string\n}\n\ntype errnil struct {\n\tmsg string\n}\n\nfunc (t *errnil) error() string {\n\treturn t.msg\n}\nfunc (t *errnil) errnil() *errnil {\n\treturn nil\n}\nfunc (t *errnil) ierrnil() ierrnil {\n\treturn nil\n}\nfunc (t *errnil) printmsg() string {\n\tif t == nil {\n\t\treturn "<nil>"\n\t}\n\treturn t.msg\n}\nfunc (t errnil) printmsgv2() string {\n\treturn t.msg\n}\n\nfunc test_nil(t *testing.t) {\n\tvar err error\n\n    var t errnil\n    t.printmsg()\n    t.printmsgv2()\n\n\ttmp := errnil{}\n\terr = tmp.errnil()\n\tif err == nil {\n\t\tt.logf("(errnil == nil) ok: %v, err: %v", err == nil, err)\n\t} else {\n\t\tt.errorf("(errnil == nil) err: %v, err: %v, type(err): %v", err == nil, err, reflect.typeof(err).kind())\n\t}\n\n\terr = tmp.ierrnil()\n\tif err == nil {\n\t\tt.logf("(ierrnil == nil) ok: %v, err: %v", err == nil, err)\n\t} else {\n\t\tt.errorf("(ierrnil == nil) err: %v, err: %v, type(err): %v", err == nil, err, reflect.typeof(err).kind())\n\t}\n\n\tip := net.parseip("111.1.111")\n\tif ip == nil {\n\t\tt.logf("(ip == nil) ok: %v, err: %v, type(ip): %v", ip == nil, ip, reflect.typeof(ip).kind())\n\t} else {\n\t\tt.errorf("(ip == nil) err: %v, err: %v, type(ip): %v", ip == nil, ip, reflect.typeof(ip).kind())\n\t}\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n\n\nä¼åç°ä¸¤ä¸ªé®é¢ï¼\n\n 1. t.printmsg() å¯ä»¥æ§è¡ ä½æ¯ t.printmsgv2() ä¼å´©æº\n 2. ç¬¬äºä¸ªå¤å®ç«ç¶ err != nil\n 3. ç¬¬ä¸ä¸ªå¤æ­ç«ç¶ ip == nil\n\n\n# ç¬¬ä¸ä¸ªé®é¢\n\nt.printmsg(): å½æä»¬ç¨ä¸ä¸ªç©ºæéç±»åçåé(å¦ï¼var t *errnil)è°ç¨æ­¤æ¹æ³æ¶ï¼è¯¥æ¹æ³æ¯ä¼æ§è¡çï¼åªæå¨æ§è¡è¯¥ç©ºæéåéçè§£æéæä½(t.msg)æ¶ï¼æä¼ panicã\n\nt.printmsgv2(): ç±äºæ¥åèæ¯ errnil èä¸æ¯ *errnilï¼ä½¿ç¨æéè®¿é®è¯¥å½æ°æ¶ï¼golang åé¨ä¼å¨è°ç¨æ¶èªå¨è§£æéï¼æä½¿ç¨ç©ºæéç±»åçåé(å¦ï¼var t *errnil)è°ç¨æ­¤æ¹æ³æ¶ä¼ panicã\n\n\n# å³äºç¬¬äºä¸ªé®é¢ï¼\n\nç®åè¯´ï¼interface è¢«ä¸¤ä¸ªåç´  value å type æè¡¨ç¤ºãåªæå¨ value å type åæ¶ä¸º nil çæ¶åï¼å¤æ­ interface == nil æä¼ä¸º trueãå·ä½å¯ä»¥åèå®æ¹ææ¡£\n\n\n# å³äºç¬¬ä¸ä¸ªé®é¢ï¼\n\nè¿å°±æ¶åå° slice çä½¿ç¨é®é¢ã\n\ngolang ä¸­çç±»åå¯ä»¥æ¯åºæ¬ç±»åï¼å¦ï¼intãfloatãboolãstringï¼ç»æåçï¼å¤åçï¼ï¼å¦ï¼structãarrayãsliceãmapãchannelï¼åªæè¿°ç±»åçè¡ä¸ºçï¼å¦ï¼interfaceã\n\nç»æåçç±»åæ²¡æçæ­£çå¼ï¼å®ä½¿ç¨ nil ä½ä¸ºé»è®¤å¼ãç®åçè¯´ï¼[]interface{} æ¯ä¸ä¸ªæå å·ä½ slice ç±»åå¯¹è±¡çæéãæä»¥ï¼å¯ä»¥ç¨ nil è¿è¡èµå¼ å å¤æ­ã',charsets:{cjk:!0}},{title:"JS é¶åºç¡èµ·æ­¥",frontmatter:{title:"JS é¶åºç¡èµ·æ­¥",date:"2020-04-14T00:00:00.000Z",lastmod:null,publish:!0,categories:["js"],keywords:["js"],description:"js åºç¡ç¥è¯æ±æ»",tags:[null],permalink:null},regularPath:"/blog/lang/js.html",relativePath:"blog/lang/js.md",key:"v-95a0b5de",path:"/blog/lang/js.html",headers:[{level:2,title:"æ°æ®ç±»å",slug:"æ°æ®ç±»å",normalizedTitle:"æ°æ®ç±»å",charIndex:15},{level:2,title:"å³äº this",slug:"å³äº-this",normalizedTitle:"å³äº this",charIndex:682},{level:2,title:"å³äº DOM",slug:"å³äº-dom",normalizedTitle:"å³äº dom",charIndex:858},{level:3,title:"å³äº EVENT",slug:"å³äº-event",normalizedTitle:"å³äº event",charIndex:1550},{level:2,title:"Effective",slug:"effective",normalizedTitle:"effective",charIndex:1644},{level:3,title:"hoistingï¼æ¬ç½®/ç½®é¡¶è§£æ/é¢è§£æï¼",slug:"hoisting-æ¬ç½®-ç½®é¡¶è§£æ-é¢è§£æ",normalizedTitle:"hoistingï¼æ¬ç½®/ç½®é¡¶è§£æ/é¢è§£æï¼",charIndex:1658},{level:3,title:"eval()",slug:"eval",normalizedTitle:"eval()",charIndex:1972},{level:3,title:"(éå¼)å¨å±åé",slug:"éå¼-å¨å±åé",normalizedTitle:"(éå¼)å¨å±åé",charIndex:2311}],headersStr:"æ°æ®ç±»å å³äº this å³äº DOM å³äº EVENT Effective hoistingï¼æ¬ç½®/ç½®é¡¶è§£æ/é¢è§£æï¼ eval() (éå¼)å¨å±åé",content:'# JS é¶åºç¡èµ·æ­¥\n\n\n# æ°æ®ç±»å\n\n * åºæ¬ç±»åï¼ Undefined, Null, Boolean, Number, String , Symbol\n   * åºæ¬ç±»åå¼ä¿å­å¨æ ç©ºé´ï¼æä»¬éè¿æå¼æ¥è®¿é®çã\n * å¼ç¨ç±»åï¼ Array Object Date Function\n   * å¼ç¨ç±»åçå¼æ¯å¯¹è±¡ï¼æ åå­ä¸­å­æ¾å°åæåå åå­ä¸­çå¯¹è±¡ãæ¯æå¼ç¨è®¿é®çãæ åå­ä¸­å­æ¾çåªæ¯è¯¥å¯¹è±¡çè®¿é®å°åï¼å¨å åå­ä¸­ä¸ºè¿ä¸ªå¼åéç©ºé´ã\n\næ£æµæ°æ®ç±»åå¸¸ç¨ typeof æè instanceof\n\n * undefined ä¸ null çåºå«\n\nnullï¼\n    æ¯Nullç±»åçå¼.\n    æ¯ä¸ªç©ºå¼ï¼ç©ºå¯¹è±¡æé.\n    typeof nullï¼ç»æä¸ºObject;\n    nullç¨æ¥è¡¨ç¤ºå°æªå­å¨çå¯¹è±¡.\nundefined :\n    æ¯Undefinedç±»åçå¼ã\n    typeof undefinedï¼ç»æä¸ºundefined;\n    ä¸ä¸ªå£°æäºåéï¼ä½æªåå§åå¼ï¼ç»æå°±æ¯undefined\n    æ²¡æè¿åå¼çå½æ°ï¼è¿åçä¹æ¯undefined,\n    æ²¡æå®åçå½¢åä¹æ¯undefined;\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n * compare\n   * JavaScriptçåéå¨æ¯è¾çæ¶åä¼éå¼ç±»åè½¬æ¢ãè¿å°±æ¯ä¸ºä»ä¹ä¸äºè¯¸å¦ï¼false == 0 æ ââ == 0 è¿åçç»ææ¯trueã\n   * ä¸ºé¿åå¼èµ·æ··ä¹±çéå«ç±»åè½¬æ¢ï¼å¨ä½ æ¯è¾å¼åè¡¨è¾¾å¼ç±»åçæ¶åå§ç»ä½¿ç¨===å!==æä½ç¬¦ã\n\n\n# å³äº this\n\nååï¼é£å°±æ¯thisæçæ¯è°ç¨å½æ°çé£ä¸ªå¯¹è±¡ã\n\njavascript çthisä¸»è¦æ¯çå¦ä½è°ç¨è¿ä¸ªå½æ°ï¼èä¸æ¯è¿ä¸ªå½æ°æå¨çä½ç¨åãobj.fn() fnä¸­ç this å°±æ¯ objã fn() thisæ¯undifine, èå¨jsè¿å¥å½æ°ä¹åï¼ä¼æ if(!this) { this = window} è¿æ ·çæä½ã\n\n\n# å³äº DOM\n\nDOMï¼Document Object Modelï¼ææ¡£å¯¹è±¡æ¨¡åï¼æ¯ä¸ä¸ªéè¿åJavaScriptè¿è¡åå®¹äº¤äºçAPIãJavascriptåDOMä¸è¬ç»å¸¸ä½ä¸ºä¸ä¸ªæ´ä½ï¼å ä¸ºJavascriptéå¸¸é½æ¯ç¨æ¥è¿è¡DOMæä½åäº¤äºçã\n\nå³äºDOMï¼æäºç¥è¯éè¦æ³¨æï¼\n\n 1. windowå¯¹è±¡ä½ä¸ºå¨å±å¯¹è±¡ï¼ä¹å°±æ¯è¯´ä½ å¯ä»¥éè¿windowæ¥è®¿é®å¨å±å¯¹è±¡ã\n    * å±æ§å¨å¯¹è±¡ä¸é¢ä»¥åéçå½¢å¼å­æ¾ï¼å¨é¡µé¢ä¸åå»ºçææå¨å±å¯¹è±¡é½ä¼åæwindowå¯¹è±¡çå±æ§ã\n    * æ¹æ³å¨å¯¹è±¡ä¸é¢ä»¥å½æ°çå½¢å¼å­æ¾ï¼å ä¸ºå·¦å³çå½æ°é½å­æ¾å¨windowå¯¹è±¡ä¸é¢ï¼æä»¥ä»ä»¬ä¹å¯ä»¥ç§°ä¸ºæ¹æ³ã\n 2. DOMä¸ºwebææ¡£åå»ºå¸¦æå±çº§çç»æï¼è¿äºå±çº§æ¯éè¿nodeèç¹ç»æï¼è¿éæå ç§DOM nodeç±»åï¼æéè¦çæ¯Element, Text, Documentã\n    * Elementèç¹å¨é¡µé¢éå±ç¤ºçæ¯ä¸ä¸ªåç´ ï¼æä»¥å¦æä½ ææ®µè½åç´ (\n      \n      )ï¼ä½ å¯ä»¥éè¿è¿ä¸ªDOMèç¹æ¥è®¿é®ã\n    \n    * Textèç¹å¨é¡µé¢éå±ç¤ºçææææ¬ç¸å³çåç´ ï¼æä»¥å¦æä½ çæ®µè½æææ¬å¨éé¢çè¯ï¼ä½ å¯ä»¥ç´æ¥éè¿DOMçTextèç¹æ¥è®¿é®è¿ä¸ªææ¬\n    * Documentèç¹ä»£è¡¨æ¯æ´ä¸ªææ¡£ï¼å®æ¯DOMçæ ¹èç¹ã\n 3. æ¯ä¸ªå¼æå¯¹DOMæ åçå®ç°æä¸äºè½»å¾®çä¸åã\n    * ä¾å¦ï¼Firefoxæµè§å¨ä½¿ç¨çGeckoå¼ææçå¾å¥½çå®ç°ï¼å°½ç®¡æ²¡æå®å¨éµå®W3Cè§èï¼ï¼ä½IEæµè§å¨ä½¿ç¨çTridentå¼æçå®ç°å´ä¸å®æ´èä¸è¿æbugï¼ç»å¼åäººè¨å¸¦æ¥äºå¾å¤é®é¢ã\n\n\n# å³äº EVENT\n\næä»¬éè¦äºè§£ï¼\n\n 1. JSæ¯åçº¿ç¨è¯­è¨\n 2. JSçEvent Loopæ¯JSçæ§è¡æºå¶ãæ·±å¥äºè§£JSçæ§è¡,å°±ç­äºæ·±å¥äºè§£JSéçevent loop\n\n\n# Effective\n\n\n# hoistingï¼æ¬ç½®/ç½®é¡¶è§£æ/é¢è§£æï¼\n\nJavaScriptä¸­ï¼ä½ å¯ä»¥å¨å½æ°çä»»ä½ä½ç½®å£°æå¤ä¸ªvarè¯­å¥ï¼å¹¶ä¸å®ä»¬å°±å¥½åæ¯å¨å½æ°é¡¶é¨å£°æä¸æ ·åæ¥ä½ç¨ï¼è¿ç§è¡ä¸ºç§°ä¸º hoistingï¼æ¬ç½®/ç½®é¡¶è§£æ/é¢è§£æï¼\n\n    // åä¾\n    myname = "global"; // å¨å±åé\n    function func() {\n        alert(myname); // "undefined"\n        var myname = "local";\n        alert(myname); // "local"\n    }\n    func();\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# eval()\n\nå¦æä½ ç°å¨çä»£ç ä¸­ä½¿ç¨äºeval()ï¼è®°ä½è¯¥åè¯­âeval()æ¯é­é¬¼âãæ­¤æ¹æ³æ¥åä»»æçå­ç¬¦ä¸²ï¼å¹¶å½ä½JavaScriptä»£ç æ¥å¤çãå½æ é®é¢çä»£ç æ¯äºåç¥éçï¼ä¸æ¯è¿è¡æ¶ç¡®å®çï¼ï¼æ²¡æçç±ä½¿ç¨eval()ãå¦æä»£ç æ¯å¨è¿è¡æ¶å¨æçæï¼æä¸ä¸ªæ´å¥½çæ¹å¼ä¸ä½¿ç¨evalèè¾¾å°åæ ·çç® æ ãä¾å¦ï¼ç¨æ¹æ¬å·è¡¨ç¤ºæ³æ¥è®¿é®å¨æå±æ§ä¼æ´å¥½æ´ç®åï¼\n\n    // åé¢ç¤ºä¾\n    var property = "name";\n    alert(eval("obj." + property));\n\n    // æ´å¥½ç\n    var property = "name";\n    alert(obj[property]);\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n# (éå¼)å¨å±åé\n\néå¼å¨å±åéåæç¡®å®ä¹çå¨å±åéé´æäºå°çå·®å¼ï¼å°±æ¯éè¿deleteæä½ç¬¦è®©åéæªå®ä¹çè½åã\n\n * éè¿varåå»ºçå¨å±åéï¼ä»»ä½å½æ°ä¹å¤çç¨åºä¸­åå»ºï¼æ¯ä¸è½è¢«å é¤çã\n * æ varåå»ºçéå¼å¨å±åéï¼æ è§æ¯å¦å¨å½æ°ä¸­åå»ºï¼æ¯è½è¢«å é¤ç\n\n    // å®ä¹ä¸ä¸ªå¨å±åé\n    var global_var = 1;\n    global_novar = 2; // åé¢ææ\n    (function () {\n    global_fromfunc = 3; // åé¢ææ\n    }());\n\n    // è¯å¾å é¤\n    delete global_var; // false\n    delete global_novar; // true\n    delete global_fromfunc; // true\n\n    // æµè¯è¯¥å é¤\n    typeof global_var; // "number"\n    typeof global_novar; // "undefined"\n    typeof global_fromfunc; // "undefined"\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n',normalizedContent:'# js é¶åºç¡èµ·æ­¥\n\n\n# æ°æ®ç±»å\n\n * åºæ¬ç±»åï¼ undefined, null, boolean, number, string , symbol\n   * åºæ¬ç±»åå¼ä¿å­å¨æ ç©ºé´ï¼æä»¬éè¿æå¼æ¥è®¿é®çã\n * å¼ç¨ç±»åï¼ array object date function\n   * å¼ç¨ç±»åçå¼æ¯å¯¹è±¡ï¼æ åå­ä¸­å­æ¾å°åæåå åå­ä¸­çå¯¹è±¡ãæ¯æå¼ç¨è®¿é®çãæ åå­ä¸­å­æ¾çåªæ¯è¯¥å¯¹è±¡çè®¿é®å°åï¼å¨å åå­ä¸­ä¸ºè¿ä¸ªå¼åéç©ºé´ã\n\næ£æµæ°æ®ç±»åå¸¸ç¨ typeof æè instanceof\n\n * undefined ä¸ null çåºå«\n\nnullï¼\n    æ¯nullç±»åçå¼.\n    æ¯ä¸ªç©ºå¼ï¼ç©ºå¯¹è±¡æé.\n    typeof nullï¼ç»æä¸ºobject;\n    nullç¨æ¥è¡¨ç¤ºå°æªå­å¨çå¯¹è±¡.\nundefined :\n    æ¯undefinedç±»åçå¼ã\n    typeof undefinedï¼ç»æä¸ºundefined;\n    ä¸ä¸ªå£°æäºåéï¼ä½æªåå§åå¼ï¼ç»æå°±æ¯undefined\n    æ²¡æè¿åå¼çå½æ°ï¼è¿åçä¹æ¯undefined,\n    æ²¡æå®åçå½¢åä¹æ¯undefined;\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n * compare\n   * javascriptçåéå¨æ¯è¾çæ¶åä¼éå¼ç±»åè½¬æ¢ãè¿å°±æ¯ä¸ºä»ä¹ä¸äºè¯¸å¦ï¼false == 0 æ ââ == 0 è¿åçç»ææ¯trueã\n   * ä¸ºé¿åå¼èµ·æ··ä¹±çéå«ç±»åè½¬æ¢ï¼å¨ä½ æ¯è¾å¼åè¡¨è¾¾å¼ç±»åçæ¶åå§ç»ä½¿ç¨===å!==æä½ç¬¦ã\n\n\n# å³äº this\n\nååï¼é£å°±æ¯thisæçæ¯è°ç¨å½æ°çé£ä¸ªå¯¹è±¡ã\n\njavascript çthisä¸»è¦æ¯çå¦ä½è°ç¨è¿ä¸ªå½æ°ï¼èä¸æ¯è¿ä¸ªå½æ°æå¨çä½ç¨åãobj.fn() fnä¸­ç this å°±æ¯ objã fn() thisæ¯undifine, èå¨jsè¿å¥å½æ°ä¹åï¼ä¼æ if(!this) { this = window} è¿æ ·çæä½ã\n\n\n# å³äº dom\n\ndomï¼document object modelï¼ææ¡£å¯¹è±¡æ¨¡åï¼æ¯ä¸ä¸ªéè¿åjavascriptè¿è¡åå®¹äº¤äºçapiãjavascriptådomä¸è¬ç»å¸¸ä½ä¸ºä¸ä¸ªæ´ä½ï¼å ä¸ºjavascriptéå¸¸é½æ¯ç¨æ¥è¿è¡domæä½åäº¤äºçã\n\nå³äºdomï¼æäºç¥è¯éè¦æ³¨æï¼\n\n 1. windowå¯¹è±¡ä½ä¸ºå¨å±å¯¹è±¡ï¼ä¹å°±æ¯è¯´ä½ å¯ä»¥éè¿windowæ¥è®¿é®å¨å±å¯¹è±¡ã\n    * å±æ§å¨å¯¹è±¡ä¸é¢ä»¥åéçå½¢å¼å­æ¾ï¼å¨é¡µé¢ä¸åå»ºçææå¨å±å¯¹è±¡é½ä¼åæwindowå¯¹è±¡çå±æ§ã\n    * æ¹æ³å¨å¯¹è±¡ä¸é¢ä»¥å½æ°çå½¢å¼å­æ¾ï¼å ä¸ºå·¦å³çå½æ°é½å­æ¾å¨windowå¯¹è±¡ä¸é¢ï¼æä»¥ä»ä»¬ä¹å¯ä»¥ç§°ä¸ºæ¹æ³ã\n 2. domä¸ºwebææ¡£åå»ºå¸¦æå±çº§çç»æï¼è¿äºå±çº§æ¯éè¿nodeèç¹ç»æï¼è¿éæå ç§dom nodeç±»åï¼æéè¦çæ¯element, text, documentã\n    * elementèç¹å¨é¡µé¢éå±ç¤ºçæ¯ä¸ä¸ªåç´ ï¼æä»¥å¦æä½ ææ®µè½åç´ (\n      \n      )ï¼ä½ å¯ä»¥éè¿è¿ä¸ªdomèç¹æ¥è®¿é®ã\n    \n    * textèç¹å¨é¡µé¢éå±ç¤ºçææææ¬ç¸å³çåç´ ï¼æä»¥å¦æä½ çæ®µè½æææ¬å¨éé¢çè¯ï¼ä½ å¯ä»¥ç´æ¥éè¿domçtextèç¹æ¥è®¿é®è¿ä¸ªææ¬\n    * documentèç¹ä»£è¡¨æ¯æ´ä¸ªææ¡£ï¼å®æ¯domçæ ¹èç¹ã\n 3. æ¯ä¸ªå¼æå¯¹domæ åçå®ç°æä¸äºè½»å¾®çä¸åã\n    * ä¾å¦ï¼firefoxæµè§å¨ä½¿ç¨çgeckoå¼ææçå¾å¥½çå®ç°ï¼å°½ç®¡æ²¡æå®å¨éµå®w3cè§èï¼ï¼ä½ieæµè§å¨ä½¿ç¨çtridentå¼æçå®ç°å´ä¸å®æ´èä¸è¿æbugï¼ç»å¼åäººè¨å¸¦æ¥äºå¾å¤é®é¢ã\n\n\n# å³äº event\n\næä»¬éè¦äºè§£ï¼\n\n 1. jsæ¯åçº¿ç¨è¯­è¨\n 2. jsçevent loopæ¯jsçæ§è¡æºå¶ãæ·±å¥äºè§£jsçæ§è¡,å°±ç­äºæ·±å¥äºè§£jséçevent loop\n\n\n# effective\n\n\n# hoistingï¼æ¬ç½®/ç½®é¡¶è§£æ/é¢è§£æï¼\n\njavascriptä¸­ï¼ä½ å¯ä»¥å¨å½æ°çä»»ä½ä½ç½®å£°æå¤ä¸ªvarè¯­å¥ï¼å¹¶ä¸å®ä»¬å°±å¥½åæ¯å¨å½æ°é¡¶é¨å£°æä¸æ ·åæ¥ä½ç¨ï¼è¿ç§è¡ä¸ºç§°ä¸º hoistingï¼æ¬ç½®/ç½®é¡¶è§£æ/é¢è§£æï¼\n\n    // åä¾\n    myname = "global"; // å¨å±åé\n    function func() {\n        alert(myname); // "undefined"\n        var myname = "local";\n        alert(myname); // "local"\n    }\n    func();\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# eval()\n\nå¦æä½ ç°å¨çä»£ç ä¸­ä½¿ç¨äºeval()ï¼è®°ä½è¯¥åè¯­âeval()æ¯é­é¬¼âãæ­¤æ¹æ³æ¥åä»»æçå­ç¬¦ä¸²ï¼å¹¶å½ä½javascriptä»£ç æ¥å¤çãå½æ é®é¢çä»£ç æ¯äºåç¥éçï¼ä¸æ¯è¿è¡æ¶ç¡®å®çï¼ï¼æ²¡æçç±ä½¿ç¨eval()ãå¦æä»£ç æ¯å¨è¿è¡æ¶å¨æçæï¼æä¸ä¸ªæ´å¥½çæ¹å¼ä¸ä½¿ç¨evalèè¾¾å°åæ ·çç® æ ãä¾å¦ï¼ç¨æ¹æ¬å·è¡¨ç¤ºæ³æ¥è®¿é®å¨æå±æ§ä¼æ´å¥½æ´ç®åï¼\n\n    // åé¢ç¤ºä¾\n    var property = "name";\n    alert(eval("obj." + property));\n\n    // æ´å¥½ç\n    var property = "name";\n    alert(obj[property]);\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n# (éå¼)å¨å±åé\n\néå¼å¨å±åéåæç¡®å®ä¹çå¨å±åéé´æäºå°çå·®å¼ï¼å°±æ¯éè¿deleteæä½ç¬¦è®©åéæªå®ä¹çè½åã\n\n * éè¿varåå»ºçå¨å±åéï¼ä»»ä½å½æ°ä¹å¤çç¨åºä¸­åå»ºï¼æ¯ä¸è½è¢«å é¤çã\n * æ varåå»ºçéå¼å¨å±åéï¼æ è§æ¯å¦å¨å½æ°ä¸­åå»ºï¼æ¯è½è¢«å é¤ç\n\n    // å®ä¹ä¸ä¸ªå¨å±åé\n    var global_var = 1;\n    global_novar = 2; // åé¢ææ\n    (function () {\n    global_fromfunc = 3; // åé¢ææ\n    }());\n\n    // è¯å¾å é¤\n    delete global_var; // false\n    delete global_novar; // true\n    delete global_fromfunc; // true\n\n    // æµè¯è¯¥å é¤\n    typeof global_var; // "number"\n    typeof global_novar; // "undefined"\n    typeof global_fromfunc; // "undefined"\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n',charsets:{cjk:!0}},{title:'Python ä¸­ "_"ã"__" å "__xx__" çåºå«',frontmatter:{title:'Python ä¸­ "\\_"ã"\\_\\_" å "\\_\\_xx\\_\\_" çåºå«',date:"2021-02-24T00:00:00.000Z",categories:["python"],tags:[null],permalink:null},regularPath:"/blog/lang/python/py__xx__.html",relativePath:"blog/lang/python/py__xx__.md",key:"v-d3589f42",path:"/blog/lang/python/py__xx__.html",headers:[{level:2,title:"`_`åä¸åçº¿",slug:"åä¸åçº¿",normalizedTitle:"<code>_</code>åä¸åçº¿",charIndex:null},{level:2,title:"`__`åä¸åçº¿",slug:"åä¸åçº¿",normalizedTitle:"<code>__</code>åä¸åçº¿",charIndex:null},{level:2,title:"`_xx_`ååååä¸åçº¿",slug:"xx-ååååä¸åçº¿",normalizedTitle:"<code>_xx_</code>ååååä¸åçº¿",charIndex:null},{level:2,title:"æ»ç»",slug:"æ»ç»",normalizedTitle:"æ»ç»",charIndex:2389}],headersStr:"`_`åä¸åçº¿ `__`åä¸åçº¿ `_xx_`ååååä¸åçº¿ æ»ç»",content:'# Python ä¸­ "_"ã"__" å "__xx__" çåºå«\n\n> è±æåæ\n\n\n# _åä¸åçº¿\n\nPythonä¸­ä¸å­å¨çæ­£çç§ææ¹æ³ãä¸ºäºå®ç°ç±»ä¼¼äºc++ä¸­ç§ææ¹æ³ï¼å¯ä»¥å¨ç±»çæ¹æ³æå±æ§åå ä¸ä¸ªâ_âåä¸åçº¿ï¼æå³çè¯¥æ¹æ³æå±æ§ä¸åºè¯¥å»è°ç¨ï¼å®å¹¶ä¸å±äºAPIã\n\nå¨ä½¿ç¨propertyæ¶ï¼ç»å¸¸åºç°è¿ä¸ªé®é¢ï¼\n\nclass BaseForm(StrAndUnicode):\n    ...\n    \n    def _get_errors(self):\n        "Returns an ErrorDict for the data provided for the form"\n        if self._errors is None:\n            self.full_clean()\n        return self._errors\n    \n    errors = property(_get_errors)\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\nä¸é¢çä»£ç çæ®µæ¥èªäºdjangoæºç ï¼django/forms/forms.pyï¼ãè¿éçerrorsæ¯ä¸ä¸ªå±æ§ï¼å±äºAPIçä¸é¨åï¼ä½æ¯_get_errorsæ¯ç§æçï¼æ¯ä¸åºè¯¥è®¿é®çï¼ä½å¯ä»¥éè¿errorsæ¥è®¿é®è¯¥éè¯¯ç»æã\n\n\n# __åä¸åçº¿\n\nè¿ä¸ªåä¸åçº¿æ´ä¼é ææ´å¤æ··ä¹±ï¼ä½å®å¹¶ä¸æ¯ç¨æ¥æ è¯ä¸ä¸ªæ¹æ³æå±æ§æ¯ç§æçï¼çæ­£ä½ç¨æ¯ç¨æ¥é¿åå­ç±»è¦çå¶åå®¹ã\n\nè®©æä»¬æ¥çä¸ä¸ªä¾å­ï¼\n\nclass A(object): \n    def __method(self): \n        print "I\'m a method in A" \n    def method(self): \n        self.__method() a = A() a.method()\n\n\n1\n2\n3\n4\n5\n\n\nè¾åºæ¯è¿æ ·çï¼\n\n$ python example.py \nI\'m a method in A\n\n\n1\n2\n\n\nå¾å¥½ï¼åºç°äºé¢è®¡çç»æã\n\næä»¬ç»Aæ·»å ä¸ä¸ªå­ç±»ï¼å¹¶éæ°å®ç°ä¸ä¸ª__methodï¼\n\nclass B(A): \n    def __method(self): \n        print "I\'m a method in B" \n\nb = B() \nb.method()\n\n\n1\n2\n3\n4\n5\n6\n\n\nç°å¨ï¼ç»ææ¯è¿æ ·çï¼\n\n$ python example.py\nI\'m a method in A\n\n\n1\n2\n\n\nå°±åæä»¬çå°çä¸æ ·ï¼B.method()ä¸è½è°ç¨B.methodçæ¹æ³ãå®éä¸ï¼å®æ¯""ä¸¤ä¸ªä¸åçº¿çåè½çæ­£å¸¸æ¾ç¤ºã\n\nå æ­¤ï¼å¨æä»¬åå»ºä¸ä¸ªä»¥"__"ä¸¤ä¸ªä¸åçº¿å¼å§çæ¹æ³æ¶ï¼è¿æå³çè¿ä¸ªæ¹æ³ä¸è½è¢«éåï¼å®åªåè®¸å¨è¯¥ç±»çåé¨ä¸­ä½¿ç¨ã\n\nå¨Pythonä¸­å¦æ¯åçï¼å¾ç®åï¼å®åªæ¯ææ¹æ³éå½åäºï¼å¦ä¸ï¼\n\na = A()\na._A__method()  # never use this!! please!\n\n\n1\n2\n\n\n$ python example.py \nI\'m a method in A\n\n\n1\n2\n\n\nå¦æä½ è¯å¾è°ç¨a.__methodï¼å®è¿æ¯æ æ³è¿è¡çï¼å°±å¦ä¸é¢æè¯´ï¼åªå¯ä»¥å¨ç±»çåé¨è°ç¨__methodã\n\n\n# __xx__ååååä¸åçº¿\n\nå½ä½ çå°__this__çæ¶ï¼å°±ç¥éä¸è¦è°ç¨å®ãä¸ºä»ä¹ï¼å ä¸ºå®çæææ¯å®æ¯ç¨äºPythonè°ç¨çï¼å¦ä¸ï¼\n\n>>> name = "igor" \n>>> name.__len__()\n 4 \n>>> len(name)\n 4 \n>>> number = 10 \n>>> number.__add__(20) \n 30 \n>>> number + 20\n 30\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\n__xx__ç»å¸¸æ¯æä½ç¬¦ææ¬å°å½æ°è°ç¨çmagic methodsãå¨ä¸é¢çä¾å­ä¸­ï¼æä¾äºä¸ç§éåç±»çæä½ç¬¦çåè½ã\n\nå¨ç¹æ®çæåµä¸ï¼å®åªæ¯pythonè°ç¨çhookãä¾å¦ï¼__init__()å½æ°æ¯å½å¯¹è±¡è¢«åå»ºåå§åæ¶è°ç¨ç;__new__()æ¯ç¨æ¥åå»ºå®ä¾ã\n\nclass CrazyNumber(object):\n    def __init__(self, n): \n        self.n = n \n    def __add__(self, other): \n        return self.n - other \n    def __sub__(self, other): \n        return self.n + other \n    def __str__(self): \n        return str(self.n) \n\nnum = CrazyNumber(10) \nprint num # 10\nprint num + 5 # 5\nprint num - 20 # 30\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n\n\nå¦ä¸ä¸ªä¾å­\n\nclass Room(object):\n    def __init__(self): \n        self.people = [] \n    def add(self, person): \n        self.people.append(person) \n    def __len__(self): \n        return len(self.people)\n \nroom = Room() \nroom.add("Igor") \nprint len(room) # 1\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n\n# æ»ç»\n\nä½¿ç¨ _one_underline æ¥è¡¨ç¤ºè¯¥æ¹æ³æå±æ§æ¯ç§æçï¼ä¸å¯¹å¤æ´æ¼ï¼å½åå»ºä¸ä¸ªç¨äºpythonè°ç¨æä¸äºç¹æ®æåµæ¶ï¼ä½¿ç¨ __two_underline__ï¼ä½¿ç¨ __just_to_underlines å¯ä»¥é¿åå­ç±»éåï¼ä½è¿ä¸ªå±æ§æ¯è¾å¤æï¼ä¸æ¨èï½',normalizedContent:'# python ä¸­ "_"ã"__" å "__xx__" çåºå«\n\n> è±æåæ\n\n\n# _åä¸åçº¿\n\npythonä¸­ä¸å­å¨çæ­£çç§ææ¹æ³ãä¸ºäºå®ç°ç±»ä¼¼äºc++ä¸­ç§ææ¹æ³ï¼å¯ä»¥å¨ç±»çæ¹æ³æå±æ§åå ä¸ä¸ªâ_âåä¸åçº¿ï¼æå³çè¯¥æ¹æ³æå±æ§ä¸åºè¯¥å»è°ç¨ï¼å®å¹¶ä¸å±äºapiã\n\nå¨ä½¿ç¨propertyæ¶ï¼ç»å¸¸åºç°è¿ä¸ªé®é¢ï¼\n\nclass baseform(strandunicode):\n    ...\n    \n    def _get_errors(self):\n        "returns an errordict for the data provided for the form"\n        if self._errors is none:\n            self.full_clean()\n        return self._errors\n    \n    errors = property(_get_errors)\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\nä¸é¢çä»£ç çæ®µæ¥èªäºdjangoæºç ï¼django/forms/forms.pyï¼ãè¿éçerrorsæ¯ä¸ä¸ªå±æ§ï¼å±äºapiçä¸é¨åï¼ä½æ¯_get_errorsæ¯ç§æçï¼æ¯ä¸åºè¯¥è®¿é®çï¼ä½å¯ä»¥éè¿errorsæ¥è®¿é®è¯¥éè¯¯ç»æã\n\n\n# __åä¸åçº¿\n\nè¿ä¸ªåä¸åçº¿æ´ä¼é ææ´å¤æ··ä¹±ï¼ä½å®å¹¶ä¸æ¯ç¨æ¥æ è¯ä¸ä¸ªæ¹æ³æå±æ§æ¯ç§æçï¼çæ­£ä½ç¨æ¯ç¨æ¥é¿åå­ç±»è¦çå¶åå®¹ã\n\nè®©æä»¬æ¥çä¸ä¸ªä¾å­ï¼\n\nclass a(object): \n    def __method(self): \n        print "i\'m a method in a" \n    def method(self): \n        self.__method() a = a() a.method()\n\n\n1\n2\n3\n4\n5\n\n\nè¾åºæ¯è¿æ ·çï¼\n\n$ python example.py \ni\'m a method in a\n\n\n1\n2\n\n\nå¾å¥½ï¼åºç°äºé¢è®¡çç»æã\n\næä»¬ç»aæ·»å ä¸ä¸ªå­ç±»ï¼å¹¶éæ°å®ç°ä¸ä¸ª__methodï¼\n\nclass b(a): \n    def __method(self): \n        print "i\'m a method in b" \n\nb = b() \nb.method()\n\n\n1\n2\n3\n4\n5\n6\n\n\nç°å¨ï¼ç»ææ¯è¿æ ·çï¼\n\n$ python example.py\ni\'m a method in a\n\n\n1\n2\n\n\nå°±åæä»¬çå°çä¸æ ·ï¼b.method()ä¸è½è°ç¨b.methodçæ¹æ³ãå®éä¸ï¼å®æ¯""ä¸¤ä¸ªä¸åçº¿çåè½çæ­£å¸¸æ¾ç¤ºã\n\nå æ­¤ï¼å¨æä»¬åå»ºä¸ä¸ªä»¥"__"ä¸¤ä¸ªä¸åçº¿å¼å§çæ¹æ³æ¶ï¼è¿æå³çè¿ä¸ªæ¹æ³ä¸è½è¢«éåï¼å®åªåè®¸å¨è¯¥ç±»çåé¨ä¸­ä½¿ç¨ã\n\nå¨pythonä¸­å¦æ¯åçï¼å¾ç®åï¼å®åªæ¯ææ¹æ³éå½åäºï¼å¦ä¸ï¼\n\na = a()\na._a__method()  # never use this!! please!\n\n\n1\n2\n\n\n$ python example.py \ni\'m a method in a\n\n\n1\n2\n\n\nå¦æä½ è¯å¾è°ç¨a.__methodï¼å®è¿æ¯æ æ³è¿è¡çï¼å°±å¦ä¸é¢æè¯´ï¼åªå¯ä»¥å¨ç±»çåé¨è°ç¨__methodã\n\n\n# __xx__ååååä¸åçº¿\n\nå½ä½ çå°__this__çæ¶ï¼å°±ç¥éä¸è¦è°ç¨å®ãä¸ºä»ä¹ï¼å ä¸ºå®çæææ¯å®æ¯ç¨äºpythonè°ç¨çï¼å¦ä¸ï¼\n\n>>> name = "igor" \n>>> name.__len__()\n 4 \n>>> len(name)\n 4 \n>>> number = 10 \n>>> number.__add__(20) \n 30 \n>>> number + 20\n 30\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\n__xx__ç»å¸¸æ¯æä½ç¬¦ææ¬å°å½æ°è°ç¨çmagic methodsãå¨ä¸é¢çä¾å­ä¸­ï¼æä¾äºä¸ç§éåç±»çæä½ç¬¦çåè½ã\n\nå¨ç¹æ®çæåµä¸ï¼å®åªæ¯pythonè°ç¨çhookãä¾å¦ï¼__init__()å½æ°æ¯å½å¯¹è±¡è¢«åå»ºåå§åæ¶è°ç¨ç;__new__()æ¯ç¨æ¥åå»ºå®ä¾ã\n\nclass crazynumber(object):\n    def __init__(self, n): \n        self.n = n \n    def __add__(self, other): \n        return self.n - other \n    def __sub__(self, other): \n        return self.n + other \n    def __str__(self): \n        return str(self.n) \n\nnum = crazynumber(10) \nprint num # 10\nprint num + 5 # 5\nprint num - 20 # 30\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n\n\nå¦ä¸ä¸ªä¾å­\n\nclass room(object):\n    def __init__(self): \n        self.people = [] \n    def add(self, person): \n        self.people.append(person) \n    def __len__(self): \n        return len(self.people)\n \nroom = room() \nroom.add("igor") \nprint len(room) # 1\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n\n# æ»ç»\n\nä½¿ç¨ _one_underline æ¥è¡¨ç¤ºè¯¥æ¹æ³æå±æ§æ¯ç§æçï¼ä¸å¯¹å¤æ´æ¼ï¼å½åå»ºä¸ä¸ªç¨äºpythonè°ç¨æä¸äºç¹æ®æåµæ¶ï¼ä½¿ç¨ __two_underline__ï¼ä½¿ç¨ __just_to_underlines å¯ä»¥é¿åå­ç±»éåï¼ä½è¿ä¸ªå±æ§æ¯è¾å¤æï¼ä¸æ¨èï½',charsets:{cjk:!0}},{title:"Python ç¯å¢é®é¢è®°å½",frontmatter:{title:"Python ç¯å¢é®é¢è®°å½",date:"2021-01-29T00:00:00.000Z",categories:["python","environment"],tags:[null],permalink:null},regularPath:"/blog/lang/python/py_env.html",relativePath:"blog/lang/python/py_env.md",key:"v-90b5b0c2",path:"/blog/lang/python/py_env.html",headers:[{level:2,title:"å¸¸ç¨æº",slug:"å¸¸ç¨æº",normalizedTitle:"å¸¸ç¨æº",charIndex:20},{level:2,title:"Conda",slug:"conda",normalizedTitle:"conda",charIndex:327},{level:3,title:"error : PackagesNotFoundError",slug:"error-packagesnotfounderror",normalizedTitle:"error : packagesnotfounderror",charIndex:828},{level:2,title:"AI æ¡æ¶",slug:"ai-æ¡æ¶",normalizedTitle:"ai æ¡æ¶",charIndex:1249},{level:3,title:"Pytorch",slug:"pytorch",normalizedTitle:"pytorch",charIndex:1259},{level:3,title:"Tensorflow",slug:"tensorflow",normalizedTitle:"tensorflow",charIndex:1271},{level:2,title:"CUDA",slug:"cuda",normalizedTitle:"cuda",charIndex:1352},{level:3,title:"æ¥çå¯¹GPUçæ¯æ",slug:"æ¥çå¯¹gpuçæ¯æ",normalizedTitle:"æ¥çå¯¹gpuçæ¯æ",charIndex:1361}],headersStr:"å¸¸ç¨æº Conda error : PackagesNotFoundError AI æ¡æ¶ Pytorch Tensorflow CUDA æ¥çå¯¹GPUçæ¯æ",content:"# Python ç¯å¢é®é¢è®°å½\n\n\n# å¸¸ç¨æº\n\næä¸¤ç§æ¹å¼ä¿®æ¹ python æºï¼\n\n 1. ç¼è¾éç½®æä»¶ ~/.pip/pip.confï¼æ·»å åå®¹å¦ä¸ï¼\n    \n    [global]\n    index-url = https://pypi.doubanio.com/simple\n    trusted-host = pypi.doubanio.com\n    \n    \n    1\n    2\n    3\n    \n 2. éè¿å½ä»¤è¡ç -i åæ°æå®æº\n    \n    pip install tensorflow -i https://pypi.douban.com/simple\n    \n    \n    1\n    \n\n\n# Conda\n\nConda æ¯ä¸ä¸ªå¼æºè·¨å¹³å°è¯­è¨æ å³çåç®¡çä¸ç¯å¢ç®¡çç³»ç»ï¼åè®¸ç¨æ·éè¿èæç¯å¢æ¹ä¾¿å°å®è£ä¸åçæ¬çäºè¿å¶è½¯ä»¶åä¸è¯¥è®¡ç®å¹³å°éè¦çææåºãä½¿ç¨å®å¯ä»¥æ¹ä¾¿ãå¿«æ·çåå»ºåºç¨äºç§å­¦è®¡ç®ãå¤§æ°æ®ç­ç¸å³çä¸ä¸ª python ç¯å¢ï¼ä¾å¦ï¼å¯ä»¥å¾æ¹ä¾¿çå¤çæ windows ç¯å¢ä¸ ssl å®è£çé®é¢ç­ç­.\n\nå¸¸ç¨å½ä»¤æï¼\n\n 1. conda env list\n 2. conda create -n [env.name] [python=3.8 | --clone exists.env.name | -f environment.xml]\n    * å¯ä»¥æå® python çæ¬ï¼ä¹å¯ä»¥ clone ç°æçç¯å¢\n 3. conda activate [env.name]\n 4. conda deactivate [env.name]\n 5. conda remove -n [env.name] --all\n 6. conda install [package(=version)]\n\néè¦æ³¨æçæ¯ï¼å¨windowç¯å¢ä¸ï¼éè¦ä½¿ç¨ Anaconda Prompt æ¥è¿è¡ç¸å³çæä»¤\n\n\n# error : PackagesNotFoundError\n\næäºæ¶åï¼å¨å®è£ package æ¶ï¼ä¼åºç°è¿æ ·çéè¯¯ï¼ PackagesNotFoundError: The following packages are not available from current channels:\n\nè¿æ¶ï¼å¯ä»¥éè¿ä»¥ä¸æä½å°è¯å¤çï¼\n\n 1. éè¿å½ä»¤ anaconda search -t conda pkg_name æ¥æ¾ pkg ç¸å³ä¿¡æ¯\n 2. search æä»¤ä¼æ¾å°å¾å¤ä¸ªçæ¬ç pkg ç¸å³ä¿¡æ¯ï¼éè¿ anaconda show [Name] æ¥çè¯¦ç»ä¿¡æ¯ï¼å¶ä¸­åæ¬ channel ä¿¡æ¯ c. éè¿ä»¥ä¸å½ä»¤æå® channel è¿è¡å®è£ï¼conda install --channel https://xxxx [pkg_name] æè conda install -c https://xxxx [pkg_name]\n\n\n# AI æ¡æ¶\n\n\n# Pytorch\n\n\n# Tensorflow\n\n 1. å®è£\n    * åèï¼ https://www.tensorflow.org/install/pip?hl=zh-cn\n\n\n# CUDA\n\n\n# æ¥çå¯¹GPUçæ¯æ\n\n * æ¥çæ¾å¡ä¿¡æ¯ï¼ lspci | grep -i vga , å¦ææ¯ NVIDIA å¯ä»¥ç¨ï¼lspci | grep -i nvidia\n * æ¥çNVIDIAæ¾å¡ä¿¡æ¯\n   * nvidia-smi\n     \n       Thu Feb  4 14:08:47 2021\n       +-----------------------------------------------------------------------------+\n       | NVIDIA-SMI 455.45.01    Driver Version: 455.45.01    CUDA Version: 11.1     |\n       |-------------------------------+----------------------+----------------------+\n       | GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n       | Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n       |                               |                      |               MIG M. |\n       |===============================+======================+======================|\n       |   0  GeForce RTX 3090    Off  | 00000000:65:00.0 Off |                  N/A |\n       | 80%   70C    P2   273W / 370W |   9957MiB / 24265MiB |    100%      Default |\n       |                               |                      |                  N/A |\n       +-------------------------------+----------------------+----------------------+\n       |   1  GeForce RTX 3090    Off  | 00000000:B3:00.0 Off |                  N/A |\n       | 57%   50C    P0   120W / 370W |      3MiB / 24268MiB |      0%      Default |\n       |                               |                      |                  N/A |\n       +-------------------------------+----------------------+----------------------+\n     \n       +-----------------------------------------------------------------------------+\n       | Processes:                                                                  |\n       |  GPU   GI   CI        PID   Type   Process name                  GPU Memory |\n       |        ID   ID                                                   Usage      |\n       |=============================================================================|\n       |    0   N/A  N/A     76494      C   python                           1609MiB |\n       |    0   N/A  N/A   1848572      C   python                           8345MiB |\n       |    1   N/A  N/A     76494      C   python                              0MiB |\n       |    1   N/A  N/A   1848572      C   python                              0MiB |\n       +-----------------------------------------------------------------------------+\n     \n     \n     1\n     2\n     3\n     4\n     5\n     6\n     7\n     8\n     9\n     10\n     11\n     12\n     13\n     14\n     15\n     16\n     17\n     18\n     19\n     20\n     21\n     22\n     23\n     24\n     25\n     26\n     27\n     \n   * æ³¨æï¼è¿ä¸ªæä»¤çç»æä¼æ¾ç¤º CUDA Version (CUDAççæ¬ä¿¡æ¯)ï¼æ­¤çæ¬ä¿¡æ¯éè¦ä¸ pytorch ççæ¬ä¸è´",normalizedContent:"# python ç¯å¢é®é¢è®°å½\n\n\n# å¸¸ç¨æº\n\næä¸¤ç§æ¹å¼ä¿®æ¹ python æºï¼\n\n 1. ç¼è¾éç½®æä»¶ ~/.pip/pip.confï¼æ·»å åå®¹å¦ä¸ï¼\n    \n    [global]\n    index-url = https://pypi.doubanio.com/simple\n    trusted-host = pypi.doubanio.com\n    \n    \n    1\n    2\n    3\n    \n 2. éè¿å½ä»¤è¡ç -i åæ°æå®æº\n    \n    pip install tensorflow -i https://pypi.douban.com/simple\n    \n    \n    1\n    \n\n\n# conda\n\nconda æ¯ä¸ä¸ªå¼æºè·¨å¹³å°è¯­è¨æ å³çåç®¡çä¸ç¯å¢ç®¡çç³»ç»ï¼åè®¸ç¨æ·éè¿èæç¯å¢æ¹ä¾¿å°å®è£ä¸åçæ¬çäºè¿å¶è½¯ä»¶åä¸è¯¥è®¡ç®å¹³å°éè¦çææåºãä½¿ç¨å®å¯ä»¥æ¹ä¾¿ãå¿«æ·çåå»ºåºç¨äºç§å­¦è®¡ç®ãå¤§æ°æ®ç­ç¸å³çä¸ä¸ª python ç¯å¢ï¼ä¾å¦ï¼å¯ä»¥å¾æ¹ä¾¿çå¤çæ windows ç¯å¢ä¸ ssl å®è£çé®é¢ç­ç­.\n\nå¸¸ç¨å½ä»¤æï¼\n\n 1. conda env list\n 2. conda create -n [env.name] [python=3.8 | --clone exists.env.name | -f environment.xml]\n    * å¯ä»¥æå® python çæ¬ï¼ä¹å¯ä»¥ clone ç°æçç¯å¢\n 3. conda activate [env.name]\n 4. conda deactivate [env.name]\n 5. conda remove -n [env.name] --all\n 6. conda install [package(=version)]\n\néè¦æ³¨æçæ¯ï¼å¨windowç¯å¢ä¸ï¼éè¦ä½¿ç¨ anaconda prompt æ¥è¿è¡ç¸å³çæä»¤\n\n\n# error : packagesnotfounderror\n\næäºæ¶åï¼å¨å®è£ package æ¶ï¼ä¼åºç°è¿æ ·çéè¯¯ï¼ packagesnotfounderror: the following packages are not available from current channels:\n\nè¿æ¶ï¼å¯ä»¥éè¿ä»¥ä¸æä½å°è¯å¤çï¼\n\n 1. éè¿å½ä»¤ anaconda search -t conda pkg_name æ¥æ¾ pkg ç¸å³ä¿¡æ¯\n 2. search æä»¤ä¼æ¾å°å¾å¤ä¸ªçæ¬ç pkg ç¸å³ä¿¡æ¯ï¼éè¿ anaconda show [name] æ¥çè¯¦ç»ä¿¡æ¯ï¼å¶ä¸­åæ¬ channel ä¿¡æ¯ c. éè¿ä»¥ä¸å½ä»¤æå® channel è¿è¡å®è£ï¼conda install --channel https://xxxx [pkg_name] æè conda install -c https://xxxx [pkg_name]\n\n\n# ai æ¡æ¶\n\n\n# pytorch\n\n\n# tensorflow\n\n 1. å®è£\n    * åèï¼ https://www.tensorflow.org/install/pip?hl=zh-cn\n\n\n# cuda\n\n\n# æ¥çå¯¹gpuçæ¯æ\n\n * æ¥çæ¾å¡ä¿¡æ¯ï¼ lspci | grep -i vga , å¦ææ¯ nvidia å¯ä»¥ç¨ï¼lspci | grep -i nvidia\n * æ¥çnvidiaæ¾å¡ä¿¡æ¯\n   * nvidia-smi\n     \n       thu feb  4 14:08:47 2021\n       +-----------------------------------------------------------------------------+\n       | nvidia-smi 455.45.01    driver version: 455.45.01    cuda version: 11.1     |\n       |-------------------------------+----------------------+----------------------+\n       | gpu  name        persistence-m| bus-id        disp.a | volatile uncorr. ecc |\n       | fan  temp  perf  pwr:usage/cap|         memory-usage | gpu-util  compute m. |\n       |                               |                      |               mig m. |\n       |===============================+======================+======================|\n       |   0  geforce rtx 3090    off  | 00000000:65:00.0 off |                  n/a |\n       | 80%   70c    p2   273w / 370w |   9957mib / 24265mib |    100%      default |\n       |                               |                      |                  n/a |\n       +-------------------------------+----------------------+----------------------+\n       |   1  geforce rtx 3090    off  | 00000000:b3:00.0 off |                  n/a |\n       | 57%   50c    p0   120w / 370w |      3mib / 24268mib |      0%      default |\n       |                               |                      |                  n/a |\n       +-------------------------------+----------------------+----------------------+\n     \n       +-----------------------------------------------------------------------------+\n       | processes:                                                                  |\n       |  gpu   gi   ci        pid   type   process name                  gpu memory |\n       |        id   id                                                   usage      |\n       |=============================================================================|\n       |    0   n/a  n/a     76494      c   python                           1609mib |\n       |    0   n/a  n/a   1848572      c   python                           8345mib |\n       |    1   n/a  n/a     76494      c   python                              0mib |\n       |    1   n/a  n/a   1848572      c   python                              0mib |\n       +-----------------------------------------------------------------------------+\n     \n     \n     1\n     2\n     3\n     4\n     5\n     6\n     7\n     8\n     9\n     10\n     11\n     12\n     13\n     14\n     15\n     16\n     17\n     18\n     19\n     20\n     21\n     22\n     23\n     24\n     25\n     26\n     27\n     \n   * æ³¨æï¼è¿ä¸ªæä»¤çç»æä¼æ¾ç¤º cuda version (cudaççæ¬ä¿¡æ¯)ï¼æ­¤çæ¬ä¿¡æ¯éè¦ä¸ pytorch ççæ¬ä¸è´",charsets:{cjk:!0}},{title:"Python åºç¡",frontmatter:{title:"Python åºç¡",date:"2021-03-30T23:29:06.000Z",categories:["blog","lang","python"],tags:[null],permalink:null},regularPath:"/blog/lang/python/utils.html",relativePath:"blog/lang/python/utils.md",key:"v-50b53767",path:"/blog/lang/python/utils.html",headers:[{level:2,title:"1. ä¸è½å½æ°",slug:"_1-ä¸è½å½æ°",normalizedTitle:"1. ä¸è½å½æ°",charIndex:16},{level:2,title:"2. æ¨¡å",slug:"_2-æ¨¡å",normalizedTitle:"2. æ¨¡å",charIndex:189},{level:2,title:"3. è¯­æ³",slug:"_3-è¯­æ³",normalizedTitle:"3. è¯­æ³",charIndex:5421},{level:2,title:"4. å¼æ­¥IO",slug:"_4-å¼æ­¥io",normalizedTitle:"4. å¼æ­¥io",charIndex:5746},{level:3,title:"åºç¡è¦ç´ ",slug:"åºç¡è¦ç´ ",normalizedTitle:"åºç¡è¦ç´ ",charIndex:5758},{level:3,title:"ä»»å¡(Task)",slug:"ä»»å¡-task",normalizedTitle:"ä»»å¡(task)",charIndex:6433},{level:3,title:"åç¨è¿åå¼",slug:"åç¨è¿åå¼",normalizedTitle:"åç¨è¿åå¼",charIndex:6816},{level:3,title:"å¹¶å",slug:"å¹¶å",normalizedTitle:"å¹¶å",charIndex:7982},{level:3,title:"åç¨åæ­¢",slug:"åç¨åæ­¢",normalizedTitle:"åç¨åæ­¢",charIndex:8926},{level:3,title:"å¼æ­¥äºä»¶å¾ªç¯",slug:"å¼æ­¥äºä»¶å¾ªç¯",normalizedTitle:"å¼æ­¥äºä»¶å¾ªç¯",charIndex:10899},{level:3,title:"æ»ç»",slug:"æ»ç»",normalizedTitle:"æ»ç»",charIndex:11918},{level:2,title:"TO BE CONTINUE ...",slug:"to-be-continue",normalizedTitle:"to be continue ...",charIndex:12071}],headersStr:"1. ä¸è½å½æ° 2. æ¨¡å 3. è¯­æ³ 4. å¼æ­¥IO åºç¡è¦ç´  ä»»å¡(Task) åç¨è¿åå¼ å¹¶å åç¨åæ­¢ å¼æ­¥äºä»¶å¾ªç¯ æ»ç» TO BE CONTINUE ...",content:"# python åºç¡\n\n\n# 1. ä¸è½å½æ°\n\npython ä¸­çä¸¤ä¸ªä¸è½å½æ°ï¼dir([pkg]) å help([attributeãpkg...])ã\n\nä¹æä»¥ç§°ä¹ä¸ºä¸è½ï¼æ¯å ä¸ºå¯ä»¥å¨éå°ä¸çæç package æ¶ï¼å¯ä»¥éè¿ dir() å¿«éæ¥ç package ä¸­çåå®¹ï¼éå°æå´è¶£ç attribute æ¶ï¼åå¯ä»¥éè¿ help() æ¥æå¼å¶âè¯´æä¹¦âã\n\n\n# 2. æ¨¡å\n\n# module\n\n * éå¸¸æ¨¡åä¸ºä¸ä¸ªæä»¶ï¼ç´æ¥ä½¿ç¨importæ¥å¯¼å¥å°±å¥½äºãå¯ä»¥ä½ä¸ºmoduleçæä»¶ç±»åæ\".py\"ã\".pyo\"ã\".pyc\"ã\".pyd\"ã\".so\"ã\".dll\"ã\n * ç³»ç»å¨å¯¼å¥æ¨¡åæ¶ï¼è¦åä»¥ä¸ä¸ä»¶äºï¼\n   1. ä¸ºæºä»£ç æä»¶ä¸­å®ä¹çå¯¹è±¡åå»ºä¸ä¸ªåå­ç©ºé´ï¼éè¿è¿ä¸ªåå­ç©ºé´å¯ä»¥è®¿é®å°æ¨¡åä¸­å®ä¹çå½æ°ååé.\n   2. å¨æ°åå»ºçåå­ç©ºé´éæ§è¡æºä»£ç æä»¶.\n   3. åå»ºä¸ä¸ªåä¸ºæºä»£ç æä»¶çå¯¹è±¡ï¼è¯¥å¯¹è±¡å¼ç¨æ¨¡åçåå­ç©ºé´ï¼è¿æ ·å°±å¯ä»¥éè¿è¿ä¸ªå¯¹è±¡è®¿é®æ¨¡åä¸­çå½æ°ååé.\n\n# package\n\n * éå¸¸åæ»æ¯ä¸ä¸ªç®å½ï¼å¯ä»¥ä½¿ç¨importå¯¼å¥åï¼æèfrom + importæ¥å¯¼å¥åä¸­çé¨åæ¨¡åã\n * åç®å½ä¸ä¸ºé¦çä¸ä¸ªæä»¶ä¾¿æ¯__init__.pyãç¶åæ¯ä¸äºæ¨¡åæä»¶åå­ç®å½ï¼åå¦å­ç®å½ä¸­ä¹æ__init__.py é£ä¹å®å°±æ¯è¿ä¸ªåçå­åäºã\n\n# å¤æ¨¡åå¯¼å¥\n\nç¨éå·åå²å¯ä»¥åæ¶å¯¼å¥å¤ä¸ªæ¨¡å, ä¹å¯ä»¥ä½¿ç¨aså³é®å­æ¥æ¹åæ¨¡åçå¼ç¨å¯¹è±¡åå­:\n\nimport socket, os, regex\nimport socket as net, thread as threads\n\n\n1\n2\n\n\n# fromè¯­å¥\n\nä½¿ç¨fromè¯­å¥å¯ä»¥å°æ¨¡åä¸­çå¯¹è±¡ç´æ¥å¯¼å¥å°å½åçåå­ç©ºé´ï¼fromè¯­å¥ä¸åå»ºä¸ä¸ªå°æ¨¡ååå­ç©ºé´çå¼ç¨å¯¹è±¡ï¼èæ¯æè¢«å¯¼å¥æ¨¡åçä¸ä¸ªæå¤ä¸ªå¯¹è±¡ç´æ¥æ¾å¥å½åçåå­ç©ºé´:\n\n    from socket import gethostname # å°gethostnameæ¾å¦å½ååå­ç©ºé´\n    print gethostname()            # ç´æ¥è°ç¨\n    socket.gethostname()           # å¼åå¼å¸¸NameError: socket\n\n\n1\n2\n3\n\n\nfromè¯­å¥æ¯æéå·åå²çå¯¹è±¡ï¼ä¹å¯ä»¥ä½¿ç¨æå·(*)ä»£è¡¨æ¨¡åä¸­é¤ä¸åçº¿å¼å¤´çææå¯¹è±¡:\n\nfrom socket import gethostname, socket\nfrom socket import *   # è½½å¥ææå¯¹è±¡å°å½ååå­ç©ºé´\n\n\n1\n2\n\n\nä¸è¿ï¼å¦æä¸ä¸ªæ¨¡åå¦æå®ä¹æåè¡¨__all__ï¼åfrom module import * è¯­å¥åªè½å¯¼å¥__all__åè¡¨ä¸­å­å¨çå¯¹è±¡ã\n\n# module: foo.py\n__all__ = [ 'bar', 'spam' ]     # å®ä¹ä½¿ç¨ `*` å¯ä»¥å¯¼å¥çå¯¹è±¡\n\n\n1\n2\n\n\nå¦å¤, as ä¹å¯ä»¥å from èåä½¿ç¨:\n\nfrom socket import gethostname as hostname\nh = hostname()\n\n\n1\n2\n\n\nimport è¯­å¥å¯ä»¥å¨ç¨åºçä»»ä½ä½ç½®ä½¿ç¨ï¼ä½ å¯ä»¥å¨ç¨åºä¸­å¤æ¬¡å¯¼å¥åä¸ä¸ªæ¨¡åï¼ä½æ¨¡åä¸­çä»£ç ä»ä»å¨è¯¥æ¨¡åè¢«é¦æ¬¡å¯¼å¥æ¶æ§è¡ãåé¢çimportè¯­å¥åªæ¯ç®åçåå»ºä¸ä¸ªå°æ¨¡ååå­ç©ºé´çå¼ç¨èå·²ãsys.moduleså­å¸ä¸­ä¿å­çææè¢«å¯¼å¥æ¨¡åçæ¨¡ååå°æ¨¡åå¯¹è±¡çæ å°ãè¿ä¸ªå­å¸ç¨æ¥å³å®æ¯å¦éè¦ä½¿ç¨importè¯­å¥æ¥å¯¼å¥ä¸ä¸ªæ¨¡åçææ°æ·è´.\n\nfrom module import * è¯­å¥åªè½ç¨äºä¸ä¸ªæ¨¡åçæé¡¶å±.\nç¹å«æ³¨æï¼ç±äºå­å¨ä½ç¨åå²çªï¼ä¸åè®¸å¨å½æ°ä¸­ä½¿ç¨from è¯­å¥ã\n\n# name å±æ§\n\næ¯ä¸ªæ¨¡åé½æ¥æ__name__ å±æ§ï¼å®æ¯ä¸ä¸ªåå®¹ä¸ºæ¨¡ååå­çå­ç¬¦ä¸²ã\næé¡¶å±çæ¨¡ååç§°æ¯__main__ .å½ä»¤è¡ææ¯äº¤äºæ¨¡å¼ä¸ç¨åºé½è¿è¡å¨__main__ æ¨¡ååé¨ã\nå©ç¨__name__å±æ§ï¼æä»¬å¯ä»¥è®©åä¸ä¸ªç¨åºå¨ä¸åçåºåï¼åç¬æ§è¡æè¢«å¯¼å¥)å·æä¸åçè¡ä¸ºï¼è±¡ä¸é¢è¿æ ·åï¼\n\n# æ£æ¥æ¯åç¬æ§è¡è¿æ¯è¢«å¯¼å¥\nif __name__ == '__main__':\n    # Yes\n    statements\nelse:\n    # No (å¯è½è¢«ä½ä¸ºæ¨¡åå¯¼å¥)\n    statements \n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n# sys.path å sys.modules\n\nsys.pathåå«äºmoduleçæ¥æ¾è·¯å¾ï¼ sys.modulesåå«äºå½åæloadçææçmodulesçdictï¼å¶ä¸­åå«äºbuiltinçmodulesï¼ï¼\n\n# æ¨¡åæç´¢è·¯å¾\n\nå¯¼å¥æ¨¡åæ¶,è§£éå¨ä¼æç´¢sys.pathåè¡¨,è¿ä¸ªåè¡¨ä¸­ä¿å­çä¸ç³»åç®å½ãä¸ä¸ªå¸åçsys.path åè¡¨çå¼ï¼\n\nLinux:\n['', '/usr/local/lib/python2.0', '/usr/local/lib/python2.0/plat-sunos5']\nWindows:\n['', 'C:\\\\Python24\\\\DLLs', 'C:\\\\Python24\\\\lib', 'C:\\\\Python24\\\\lib\\\\plat-win', 'C:\\\\Python24\\\\lib\\\\lib-tk']\n\n\n1\n2\n3\n4\n\n\nç©ºå­ç¬¦ä¸² ä»£è¡¨å½åç®å½. è¦å å¥æ°çæç´¢è·¯å¾,åªéè¦å°è¿ä¸ªè·¯å¾å å¥å°è¿ä¸ªåè¡¨.\n\næäºæ¶åæä»¬éè¦ç» python interpreter å¢å ä¸äºåçæ¥æ¾è·¯å¾ï¼å¦ï¼æ³å¼ç¨èªå®ä¹çåæ¶ãè¿å°±éè¦ä¿®æ¹åçæç´¢è·¯å¾ï¼ä¸è¬æ¥è¯´ï¼æä¸¤ç§æ¹å¼ï¼\n\n 1. ç´æ¥å¨è¿è¡æ¶ï¼ä¿®æ¹ sys.path\n 2. å¨å¼å§è¿è¡åï¼ä¿®æ¹ PYTHONPATH ç¯å¢åéï¼è¿ä¸ªç¯å¢åéä¼å¨è¿è¡æ¶è¢«åå«è¿ sys.path ä»¥åä¸æ¨¡åæç´¢ï¼\n\n# æ¨¡åå¯¼å¥åæ±ç¼\n\nå°ç°å¨ä¸ºæ­¢ï¼æ¬ç« ä»ç»çæ¨¡åé½æ¯åå«Pythonæºä»£ç çææ¬æä»¶. ä¸è¿æ¨¡åä¸éäºæ­¤ï¼å¯ä»¥è¢« import è¯­å¥å¯¼å¥çæ¨¡åå±æä»¥ä¸åç±»:\n\n * ä½¿ç¨Pythonåçç¨åº( .pyæä»¶)\n * CæC++æ©å±(å·²ç¼è¯ä¸ºå±äº«åºæDLLæä»¶)\n * å(åå«å¤ä¸ªæ¨¡å)\n * åå»ºæ¨¡å(ä½¿ç¨Cç¼åå¹¶å·²é¾æ¥å°Pythonè§£éå¨å)\n\nå½æ¥è¯¢æ¨¡å foo æ¶,è§£éå¨æç§ sys.path åè¡¨ä¸­ç®å½é¡ºåºæ¥æ¥æ¾ä»¥ä¸æä»¶(ç®å½ä¹æ¯æä»¶çä¸ç§):\n\n 1. å®ä¹ä¸ºä¸ä¸ªåçç®å½ foo\n 2. foo.so, foomodule.so, foomodule.sl,æ foomodule.dll (å·²ç¼è¯æ©å±)\n 3. foo.pyo (åªå¨ä½¿ç¨ -O æ -OO éé¡¹æ¶)\n 4. foo.pyc\n 5. foo.py\n\nå¦æå¨sys.pathæä¾çææè·¯å¾åæ¥æ¾å¤±è´¥ï¼è§£éå¨ä¼ç»§ç»­å¨åå»ºæ¨¡åä¸­å¯»æ¾,å¦æåæ¬¡å¤±è´¥ï¼åå¼å ImportError å¼å¸¸.\n\nå½ import è¯­å¥æç´¢æä»¶æ¶,æä»¶åæ¯å¤§å°åææçãå³ä½¿å¨æä»¶ç³»ç»å¤§å°åä¸ææçç³»ç»ä¸ä¹æ¯å¦æ­¤(Windowsç­). è¿æ ·, import foo åªä¼å¯¼å¥æä»¶foo.pyèä¸ä¼æ¯FOO.PY.\n\n# å¯¹äº.pyæä»¶\n\n * å½ä¸ä¸ªæ¨¡åç¬¬ä¸æ¬¡è¢«å¯¼å¥æ¶,å®å°±è¢«æ±ç¼ä¸ºå­èä»£ç ,å¹¶åå¥ä¸ä¸ªååç .pycæä»¶.\n * åæ¥çå¯¼å¥æä½ä¼ç´æ¥è¯»å.pycæä»¶èä¸æ¯.pyæä»¶.(é¤é.pyæä»¶çä¿®æ¹æ¥ææ´æ°,è¿ç§æåµä¼éæ°çæ.pycæä»¶)\n * å¨è§£éå¨ä½¿ç¨ -O éé¡¹æ¶ï¼æ©å±åä¸º.pyoçååæä»¶è¢«ä½¿ç¨.\n * pyoæä»¶çåå®¹è½å»æè¡å·,æ­è¨,åå¶ä»è°è¯ä¿¡æ¯çå­èç ï¼ä½ç§¯æ´å°,è¿è¡éåº¦æ´å¿«.\n * å¦æä½¿ç¨-OOéé¡¹ä»£æ¿-O,åææ¡£å­ç¬¦ä¸²ä¹ä¼å¨åå»º.pyoæä»¶æ¶ä¹è¢«å¿½ç¥.\n * .pycå.pyoæä»¶çæ±ç¼,å½ä¸ä»å½import è¯­å¥æ§è¡æ¶è¿è¡.\n\n# éæ°å¯¼å¥æ¨¡å\n\nå¦ææ´æ°äºä¸ä¸ªå·²ç»ç¨importè¯­å¥å¯¼å¥çæ¨¡åï¼åå»ºå½æ°reload()å¯ä»¥éæ°å¯¼å¥å¹¶è¿è¡æ´æ°åçæ¨¡åä»£ç .å®éè¦ä¸ä¸ªæ¨¡åå¯¹è±¡åä¸ºåæ°.ä¾å¦:\n\nimport foo\n... some code ...\nreload(foo)          # éæ°å¯¼å¥ foo\n\n\n1\n2\n3\n\n\nå¨reload()è¿è¡ä¹åçéå¯¹æ¨¡åçæä½é½ä¼ä½¿ç¨æ°å¯¼å¥ä»£ç ï¼ä¸è¿reload()å¹¶ä¸ä¼æ´æ°ä½¿ç¨æ§æ¨¡ååå»ºçå¯¹è±¡ï¼å æ­¤æå¯è½åºç°æ°æ§çæ¬å¯¹è±¡å±å­çæåµã\næ³¨æï¼ ä½¿ç¨CæC++ç¼è¯çæ¨¡åä¸è½éè¿ reload() å½æ°æ¥éæ°å¯¼å¥ãè®°ä½ä¸ä¸ªååï¼é¤éæ¯å¨è°è¯åå¼åè¿ç¨ä¸­ï¼å¦åä¸è¦ä½¿ç¨reload()å½æ°.\n\n# äºå\n\nå¤ä¸ªå³ç³»å¯åçæ¨¡ååºè¯¥ç»ç»æä¸ä¸ªåï¼ä»¥ä¾¿äºç»´æ¤åä½¿ç¨ãè¿é¡¹ææ¯è½ææé¿ååå­ç©ºé´å²çªãåå»ºä¸ä¸ªåå­ä¸ºååå­çæä»¶å¤¹å¹¶å¨è¯¥æä»¶å¤¹ä¸åå»ºä¸ä¸ª__init__.py æä»¶å°±å®ä¹äºä¸ä¸ªåãä½ å¯ä»¥æ ¹æ®éè¦å¨è¯¥æä»¶å¤¹ä¸å­æ¾èµæºæä»¶ãå·²ç¼è¯æ©å±åå­åãä¸¾ä¾æ¥è¯´ï¼ä¸ä¸ªåå¯è½æä»¥ä¸ç»æ:\n\nGraphics/\n      __init__.py\n      Primitive/\n         __init__.py\n         lines.py\n         fill.py\n         text.py\n         ...\n      Graph2d/\n         __init__.py\n         plot2d.py\n         ...\n      Graph3d/\n         __init__.py\n         plot3d.py\n         ...\n      Formats/\n         __init__.py\n         gif.py\n         png.py\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n\n\nimportè¯­å¥ä½¿ç¨ä»¥ä¸å ç§æ¹å¼å¯¼å¥åä¸­çæ¨¡å:\n\n * import Graphics.Primitive.fill å¯¼å¥æ¨¡åGraphics.Primitive.fill,åªè½ä»¥å¨åè®¿é®æ¨¡åå±æ§,ä¾å¦ Graphics.Primitive.fill.floodfill(img,x,y,color).\n * from Graphics.Primitive import fill å¯¼å¥æ¨¡åfill ,åªè½ä»¥ fill.å±æ§åè¿ç§æ¹å¼è®¿é®æ¨¡åå±æ§,ä¾å¦ fill.floodfill(img,x,y,color).\n * from Graphics.Primitive.fill import floodfill å¯¼å¥æ¨¡åfill ,å¹¶å°å½æ°floodfillæ¾å¥å½ååç§°ç©ºé´,ç´æ¥è®¿é®è¢«å¯¼å¥çå±æ§ï¼ä¾å¦ floodfill(img,x,y,color).\n\næ è®ºä¸ä¸ªåçåªä¸ªé¨åè¢«å¯¼å¥, å¨æä»¶__init__.pyä¸­çä»£ç é½ä¼è¿è¡.è¿ä¸ªæä»¶çåå®¹åè®¸ä¸ºç©º,ä¸è¿éå¸¸æåµä¸å®ç¨æ¥å­æ¾åçåå§åä»£ç ãå¯¼å¥è¿ç¨éå°çææ__init__.pyæä»¶é½è¢«è¿è¡.å æ­¤ import Graphics.Primitive.fill è¯­å¥ä¼é¡ºåºè¿è¡ Graphics å Primitive æä»¶å¤¹ä¸ç__init__.pyæä»¶.\n\nä¸è¾¹è¿ä¸ªè¯­å¥å·ææ­§ä¹: from Graphics.Primitive import * è¿ä¸ªè¯­å¥çåæå¾æ¯æ³å°Graphics.Primitiveåä¸çæææ¨¡åå¯¼å¥å°å½åçåç§°ç©ºé´.ç¶è,ç±äºä¸åå¹³å°é´æä»¶åè§åä¸å(æ¯å¦å¤§å°åææé®é¢), Pythonä¸è½æ­£ç¡®å¤å®åªäºæ¨¡åè¦è¢«å¯¼å¥.è¿ä¸ªè¯­å¥åªä¼é¡ºåºè¿è¡ Graphics å Primitive æä»¶å¤¹ä¸ç__init__.pyæä»¶. è¦è§£å³è¿ä¸ªé®é¢ï¼åºè¯¥å¨Primitiveæä»¶å¤¹ä¸é¢ç__init__.pyä¸­å®ä¹ä¸ä¸ªåå­allçåè¡¨ï¼ä¾å¦:\n\n# Graphics/Primitive/__init__.py\n__all__ = [\"lines\",\"text\",\"fill\",...]\n\n\n1\n2\n\n\nè¿æ ·,ä¸è¾¹çè¯­å¥å°±å¯ä»¥å¯¼å¥åè¡¨ä¸­æææ¨¡å.\n\nä¸é¢è¿ä¸ªè¯­å¥åªä¼æ§è¡Graphicsç®å½ä¸ç__init__.pyæä»¶ï¼èä¸ä¼å¯¼å¥ä»»ä½æ¨¡å:\n\nimport Graphics\nGraphics.Primitive.fill.floodfill(img,x,y,color)  # å¤±è´¥!\n\n\n1\n2\n\n\nä¸è¿æ¢ç¶ import Graphics è¯­å¥ä¼è¿è¡ Graphics ç®å½ä¸ç__init__.pyæä»¶,æä»¬å°±å¯ä»¥éåä¸é¢çææ®µæ¥è§£å³è¿ä¸ªé®é¢ï¼\n\n# Graphics/__init__.py\nimport Primitive, Graph2d, Graph3d\n# Graphics/Primitive/__init__.py\nimport lines, fill, text, ...\n\n\n1\n2\n3\n4\n\n\nè¿æ ·import Graphicsè¯­å¥å°±å¯ä»¥å¯¼å¥ææçå­æ¨¡å(åªè½ç¨å¨åæ¥è®¿é®è¿äºæ¨¡åçå±æ§).\n\n\n# 3. è¯­æ³\n\n# Decorator\n\n@dec2\n@dec1\ndef func(arg1, arg2, ...):\n    pass\nThis is equivalent to:\n\ndef func(arg1, arg2, ...):\n    pass\nfunc = dec2(dec1(func))\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n@decomaker(argA, argB, ...)\ndef func(arg1, arg2, ...):\n    pass\n \nThis is equivalent to:\n\nfunc = decomaker(argA, argB, ...)(func)\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n# 4. å¼æ­¥IO\n\n\n# åºç¡è¦ç´ \n\nPythonå¨3.4ä¸­å¼å¥äºåç¨çæ¦å¿µï¼è¿ä¸ªæ¯ä»¥çæå¨å¯¹è±¡ä¸ºåºç¡ï¼3.5åç¡®å®äºåç¨çè¯­æ³ãå®ç°åç¨çä¸ä»ä»æ¯asyncioï¼tornadoågeventé½å®ç°äºç±»ä¼¼çåè½ã\n\nasyncio çå ä¸ªä¸»è¦åç´ æï¼\n\n 1. event_loop\n    1. ç¨åºå¼å¯ä¸ä¸ªæ éçäºä»¶å¾ªç¯ï¼å¹¶ä¾æ¬¡æ§è¡æ»¡è¶³æ¡ä»¶çåç¨å½æ°\n 2. coroutine\n    1. åç¨å¯¹è±¡ï¼ç±å³é®å­ async å®ä¹çå½æ°å¨è¢«è°ç¨æ¶ä¸ä¼ç«å³æ§è¡ï¼èæ¯è¿åä¸ä¸ªåç¨å¯¹è±¡ãåç¨å¯¹è±¡éè¦éè¿æ³¨åå¨ä½äº¤ç±äºä»¶å¾ªç¯æ¥è°ç¨ã\n 3. task\n    1. ä»»å¡ï¼æ¯å¯¹åç¨çè¿ä¸æ­¥å°è£ï¼å¶ä¸­åå«äºä»»å¡çåç§ç¶æã\n 4. future\n    1. ä»£è¡¨å°è¦æ§è¡ææ²¡è¢«æ§è¡çä»»å¡çç»æã\n    2. task å¯¹è±¡æ¯ Future ç±»çå­ç±»\n 5. async/await\n    1. python3.5 ä¸­ç¨äºå®ä¹åç¨çå³é®å­ï¼asyncå®ä¹ä¸ä¸ªåç¨ï¼awaitç¨äºæèµ·(é»å¡ç)å¼æ­¥è°ç¨ã\n\nä¾å¦ï¼\n\nimport asyncio\n\nasync def work(args):\n    print('i am working : {}'.format(x))\n\ncoroutine = work(\"new job\")\nloop = asyncio.get_event_loop() # åå»ºä¸ä¸ªäºä»¶å¾ªç¯\nloop.run_until_complete(coroutine) # å°åç¨æ³¨åå°äºä»¶å¾ªç¯ï¼å¹¶å¯å¨äºä»¶å¾ªç¯\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# ä»»å¡(Task)\n\néè¿ä¸è¾¹çç¤ºä¾ï¼å¯ä»¥åç° coroutine ä¸è½ç´æ¥æ§è¡ï¼èæ¯éè¦éè¿ loop.run_until_complete() æ¥æ§è¡ï¼è¿éè¾¹çéå«å¨ä½æ¯ï¼å°åç¨åè£æä¸ºäºä¸ä¸ª task å¯¹è±¡ï¼å¹¶å¨äºä»¶å¾ªç¯ä¸­æ§è¡ãä¸ºä»ä¹ï¼\n\nloop.run_until_complete() çåæ°æ¯ä¸ä¸ª futrue å¯¹è±¡ï¼ä½çæ­£å¨ä½æ¯æ§è¡æ³¨åå°äºä»¶å¾ªç¯ä¸ç coroutinesãå¦ä¸ææå°çï¼task æ¯å¯¹ coroutine çå°è£ï¼åæ¶ä¹æ¯ Future ç±»çå­ç±»ãæä»¥ï¼å½ä¼ å¥ä¸ä¸ªåç¨æ¶ï¼å½æ°åé¨ä¼èªå¨å°è£æ task ä»¥æ»¡è¶³è°ç¨éè¦ã\n\nå½ç¶ï¼æä»¬ä¹å¯ä»¥ä¸»å¨æé  task å¯¹è±¡: asyncio.ensure_future(coroutine) å loop.create_task(coroutine) é½å¯ä»¥åå»ºä¸ä¸ªtask å¯¹è±¡ã\n\n\n# åç¨è¿åå¼\n\n 1. task.add_done_callback\n\néè¿ task.add_done_callback(callback) å¯ä»¥å¯¹ task ç»å®åè°å½æ°ï¼å¨ coroutine æ§è¡ç»ææ¶åä¼è°ç¨è¿ä¸ªåè°å½æ°ã\n\nimport asyncio\n\nasync def work(args):\n    return 'i am working : {}'.format(args)\n\ndef callback(future):\n    print('callback: {}'.format(future.result()))\n\ncoroutine = work(\"new job\")\nloop = asyncio.get_event_loop()\ntask = asyncio.ensure_future(coroutine)\ntask.add_done_callback(callback)\nloop.run_until_complete(task)\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\nè¿éå¯ä»¥çå°ï¼callback çåæ°æ¯ä¸ä¸ª future å¯¹è±¡ï¼å¦ææ³ä¼ éå¶ä»æ°æ®å° callbackï¼å¯ä»¥éè¿ä»¥ä¸æ¹å¼ï¼\n\ndef callback(t, future):\n    print('callback:', t, future.result())\n\ntask.add_done_callback(functools.partial(callback, 1))\n\n\n1\n2\n3\n4\n\n\næ­¤å¤ï¼å¦æå¨è°è¯è¿ç¨ä¸­è§å¯ task å å¶åè°éç future çè¯ï¼å¯ä»¥åç°å®ä»¬å®éä¸æ¯åä¸ä¸ªå¯¹è±¡ã\n\n 2. future.result()\n\nä¸è¾¹çä¾å­æä»¬å¯ä»¥ç¥éï¼è¿è¡ç»æå®éä¸æ¯å¯ä»¥éè¿ future.result() æ¥åå¾ãèåè°éç futrue å åå»ºç task æ¯åä¸ä¸ªå¯¹è±¡ï¼é£æä»¬æ¯ä¸æ¯å¯ä»¥å¨ä»»å¡æ§è¡ç»æåï¼ä¸»å¨è°ç¨ task.result() æ¥è·åç»æå¢ï¼å½ç¶å¯ä»¥ã\n\nimport asyncio\n\nasync def work(args):\n    return 'i am working : {}'.format(args)\n\ncoroutine = work(\"new job\")\nloop = asyncio.get_event_loop()\ntask = asyncio.ensure_future(coroutine)\nloop.run_until_complete(task)\n\nprint('task result is {}'.format(task.result()))\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n\n# å¹¶å\n\né¦åï¼è¦æç½ å¹¶ååå¹¶è¡ æ¯ä¸ä¸æ ·çï¼å¹¶åææå¤ä¸ªä»»å¡éè¦åæ¶è¿è¡(å¦ï¼åæ ¸cpuéè¿æ¶é´çè½®è½¬è¿è¡ä¸åçç¨åº)ï¼å¹¶è¡åæ¯åä¸æ¶å»æå¤ä¸ªä»»å¡æ§è¡(å¤æ ¸cpuçæ¯ä¸ªæ ¸å¿å¨åä¸ä¸ªæ¶å»ç¬ç«è¿è¡ä¸åçç¨åº)ã\n\nasyncio éè¿ äºä»¶å¾ªç¯åawait/async æ¥åè°å¤ä¸ªåç¨æ¥å®ç°å¹¶åãæ¯å½æä»»å¡é»å¡çæ¶åå°± awaitï¼ç¶åå¶ä»åç¨ç»§ç»­å·¥ä½ã\n\nimport time\nimport asyncio\n\nasync def work(sleep_sec):\n    print('sleep {} : before'.format(sleep_sec))\n    await asyncio.sleep(sleep_sec)\n    return 'sleep {} : after'.format(sleep_sec)\n\nnow = lambda: time.time()\n\ncoroutine1 = work(1)\ncoroutine2 = work(2)\ncoroutine3 = work(4)\ntasks = [\n    asyncio.ensure_future(coroutine1),\n    asyncio.ensure_future(coroutine2),\n    asyncio.ensure_future(coroutine3)\n]\nloop = asyncio.get_event_loop()\n# ä½¿ç¨ syncio.wait(tasks) æ asyncio.gather(*tasks) æ¥æ±éå¤ä»»å¡\nloop.run_until_complete(asyncio.wait(tasks))\n\nfor task in tasks:\n    print('task result is {}'.format(task.result()))\nprint('spend {} seconds'.format(now() - start))\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n\n\næä»¬å¯ä»¥è§å¯ä¸ä¾ä¸­çåä¸ªä»»å¡çæ§è¡æ¶æºåæ»èæ¶æ¥ç¡®è®¤å¹¶åç°è±¡ã\n\n\n# åç¨åæ­¢\n\nå¦æéè¦åæ­¢äºä»¶å¾ªç¯ï¼å°±éè¦åætaskåæ¶ãåçä¾å­ï¼\n\nimport time\nimport asyncio\n\nasync def work(sleep_sec):\n    print('sleep {} : before'.format(sleep_sec))\n    await asyncio.sleep(sleep_sec)\n    return 'sleep {} : after'.format(sleep_sec)\n\ncoroutine1 = work(1)\ncoroutine2 = work(2)\ncoroutine3 = work(4)\ntasks = [\n    asyncio.ensure_future(coroutine1),\n    asyncio.ensure_future(coroutine2),\n    asyncio.ensure_future(coroutine3)\n]\nloop = asyncio.get_event_loop()\ntry:\n    loop.run_until_complete(asyncio.wait(tasks))\nexcept KeyboardInterrupt as e:\n    print(asyncio.Task.all_tasks())\n    for task in asyncio.Task.all_tasks():\n        print(task.cancel())\n    loop.stop()\n    loop.run_forever()\nfinally:\n    loop.close()\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n\n\nå¯å¨äºä»¶å¾ªç¯ä¹åï¼é©¬ä¸ctrl+cï¼ä¼è§¦årun_until_completeçæ§è¡å¼å¸¸ KeyBorardInterruptãç¶åéè¿å¾ªç¯asyncio.Taskè·åè·åäºä»¶å¾ªç¯çtaskéè¿å¶ task.cancel() åæ¶futureãæ³¨æï¼loop.stop()ä¹åè¿éè¦åæ¬¡å¼å¯äºä»¶å¾ªç¯ï¼æååcloseï¼ä¸ç¶è¿ä¼æåºå¼å¸¸ã\n\næä»¬è¿å¯ä»¥éè¿ä¸è¾¹è¿ç§æ¹å¼åæ­¢åç¨ï¼\n\nimport time\nimport asyncio\n\nasync def work(sleep_sec):\n    print('sleep {} : before'.format(sleep_sec))\n    await asyncio.sleep(sleep_sec)\n    return 'sleep {} : after'.format(sleep_sec)\n\nasync def main():\n    coroutine1 = work(1)\n    coroutine2 = work(2)\n    coroutine3 = work(2)\n    tasks = [\n        asyncio.ensure_future(coroutine1),\n        asyncio.ensure_future(coroutine2),\n        asyncio.ensure_future(coroutine3)\n    ]\n    done, pending = await asyncio.wait(tasks)\n    for task in done:\n        print('task result is {}'.format(task.result()))\n\nloop = asyncio.get_event_loop()\ntask = asyncio.ensure_future(main())\ntry:\n    loop.run_until_complete(task)\nexcept KeyboardInterrupt as e:\n    print(asyncio.Task.all_tasks())\n    print(asyncio.gather(*asyncio.Task.all_tasks()).cancel())\n    loop.stop()\n    loop.run_forever()\nfinally:\n    loop.close()\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n\n\nç®åçè¯´ï¼å°±æ¯éè¿åç¨åµå¥ï¼å°ä¸ç³»ååç¨å°è£å°å¦ä¸ä¸ªåç¨ä¸­ï¼æ­¤æ¶å¤çå¤å±åè£ç main å½æ°å³å¯ã\n\n\n# å¼æ­¥äºä»¶å¾ªç¯\n\né¤äºå¨ä¸»çº¿ç¨è¿è¡äºä»¶å¾ªç¯ï¼è¿å¯ä»¥å¨å­çº¿ç¨ä¸­è¿è¡ãå¨å­çº¿ç¨ä¸­è¿è¡äºä»¶å¾ªç¯çå¥½å¤ï¼æ¾èæè§ï¼ä¸ä¼é»å¡ä¸»çº¿ç¨ï¼ä½ä¹å¸¦æ¥äºå¼æ­¥å¤ççé®é¢ã\n\néè¿ä»¥ä¸ç¤ºä¾ï¼ç»ç»åå³ä¸å­çº¿ç¨çäºä»¶å¾ªç¯å§ï¼\n\nfrom threading import Thread\n\ndef start_loop(loop):\n    asyncio.set_event_loop(loop)\n    loop.run_forever()\n\nasync def work(sleep_sec):\n    print('work: sleep {} : before'.format(sleep_sec))\n    await asyncio.sleep(sleep_sec)\n    return 'work: sleep {} : after'.format(sleep_sec)\n\ndef more_work(sleep_sec):\n    print('more_work: sleep {}:before'.format(sleep_sec))\n    time.sleep(sleep_sec)\n    print('more_work: sleep {}:after'.format(sleep_sec))\n\nnew_loop = asyncio.new_event_loop()\nt = Thread(target=start_loop, args=(new_loop,))\nt.start()\n\n# æ°çº¿ç¨ä¸­ä¼æç§é¡ºåºæ§è¡éè¿ call_soon_threadsafe æ³¨åçæ¹æ³\nnew_loop.call_soon_threadsafe(more_work, 6)\nnew_loop.call_soon_threadsafe(more_work, 3)\n\n# éè¿ run_coroutine_threadsafe æ³¨åæ°åç¨å¯¹è±¡ï¼è¿æ ·å¯ä»¥è®©å­çº¿ç¨ä¸­çäºä»¶å¾ªç¯çå¹¶åçå¤çåç¨\nasyncio.run_coroutine_threadsafe(work(6), new_loop)\nasyncio.run_coroutine_threadsafe(work(4), new_loop)\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n\n\n\n# æ»ç»\n\nè¿éç®åçä»ç»äº asyncio çåºç¡åç´ ï¼äºä»¶å¾ªç¯ï¼åç¨ï¼futureåä»»å¡ãéè¿è¿äºåºç¡åå®¹çç»åï¼æä»¬å¯ä»¥å®ç°åºæ´å¤æ´æææçå¼æ­¥ãå¹¶åä»»å¡ï¼æ¯å¦ï¼çäº§èæ¶è´¹èæ¨¡å... æ´å¤ç¨æ³äºå¾è¢«å¼ååºæ¥ã\n\n----------------------------------------\n\n\n# TO BE CONTINUE ...",normalizedContent:"# python åºç¡\n\n\n# 1. ä¸è½å½æ°\n\npython ä¸­çä¸¤ä¸ªä¸è½å½æ°ï¼dir([pkg]) å help([attributeãpkg...])ã\n\nä¹æä»¥ç§°ä¹ä¸ºä¸è½ï¼æ¯å ä¸ºå¯ä»¥å¨éå°ä¸çæç package æ¶ï¼å¯ä»¥éè¿ dir() å¿«éæ¥ç package ä¸­çåå®¹ï¼éå°æå´è¶£ç attribute æ¶ï¼åå¯ä»¥éè¿ help() æ¥æå¼å¶âè¯´æä¹¦âã\n\n\n# 2. æ¨¡å\n\n# module\n\n * éå¸¸æ¨¡åä¸ºä¸ä¸ªæä»¶ï¼ç´æ¥ä½¿ç¨importæ¥å¯¼å¥å°±å¥½äºãå¯ä»¥ä½ä¸ºmoduleçæä»¶ç±»åæ\".py\"ã\".pyo\"ã\".pyc\"ã\".pyd\"ã\".so\"ã\".dll\"ã\n * ç³»ç»å¨å¯¼å¥æ¨¡åæ¶ï¼è¦åä»¥ä¸ä¸ä»¶äºï¼\n   1. ä¸ºæºä»£ç æä»¶ä¸­å®ä¹çå¯¹è±¡åå»ºä¸ä¸ªåå­ç©ºé´ï¼éè¿è¿ä¸ªåå­ç©ºé´å¯ä»¥è®¿é®å°æ¨¡åä¸­å®ä¹çå½æ°ååé.\n   2. å¨æ°åå»ºçåå­ç©ºé´éæ§è¡æºä»£ç æä»¶.\n   3. åå»ºä¸ä¸ªåä¸ºæºä»£ç æä»¶çå¯¹è±¡ï¼è¯¥å¯¹è±¡å¼ç¨æ¨¡åçåå­ç©ºé´ï¼è¿æ ·å°±å¯ä»¥éè¿è¿ä¸ªå¯¹è±¡è®¿é®æ¨¡åä¸­çå½æ°ååé.\n\n# package\n\n * éå¸¸åæ»æ¯ä¸ä¸ªç®å½ï¼å¯ä»¥ä½¿ç¨importå¯¼å¥åï¼æèfrom + importæ¥å¯¼å¥åä¸­çé¨åæ¨¡åã\n * åç®å½ä¸ä¸ºé¦çä¸ä¸ªæä»¶ä¾¿æ¯__init__.pyãç¶åæ¯ä¸äºæ¨¡åæä»¶åå­ç®å½ï¼åå¦å­ç®å½ä¸­ä¹æ__init__.py é£ä¹å®å°±æ¯è¿ä¸ªåçå­åäºã\n\n# å¤æ¨¡åå¯¼å¥\n\nç¨éå·åå²å¯ä»¥åæ¶å¯¼å¥å¤ä¸ªæ¨¡å, ä¹å¯ä»¥ä½¿ç¨aså³é®å­æ¥æ¹åæ¨¡åçå¼ç¨å¯¹è±¡åå­:\n\nimport socket, os, regex\nimport socket as net, thread as threads\n\n\n1\n2\n\n\n# fromè¯­å¥\n\nä½¿ç¨fromè¯­å¥å¯ä»¥å°æ¨¡åä¸­çå¯¹è±¡ç´æ¥å¯¼å¥å°å½åçåå­ç©ºé´ï¼fromè¯­å¥ä¸åå»ºä¸ä¸ªå°æ¨¡ååå­ç©ºé´çå¼ç¨å¯¹è±¡ï¼èæ¯æè¢«å¯¼å¥æ¨¡åçä¸ä¸ªæå¤ä¸ªå¯¹è±¡ç´æ¥æ¾å¥å½åçåå­ç©ºé´:\n\n    from socket import gethostname # å°gethostnameæ¾å¦å½ååå­ç©ºé´\n    print gethostname()            # ç´æ¥è°ç¨\n    socket.gethostname()           # å¼åå¼å¸¸nameerror: socket\n\n\n1\n2\n3\n\n\nfromè¯­å¥æ¯æéå·åå²çå¯¹è±¡ï¼ä¹å¯ä»¥ä½¿ç¨æå·(*)ä»£è¡¨æ¨¡åä¸­é¤ä¸åçº¿å¼å¤´çææå¯¹è±¡:\n\nfrom socket import gethostname, socket\nfrom socket import *   # è½½å¥ææå¯¹è±¡å°å½ååå­ç©ºé´\n\n\n1\n2\n\n\nä¸è¿ï¼å¦æä¸ä¸ªæ¨¡åå¦æå®ä¹æåè¡¨__all__ï¼åfrom module import * è¯­å¥åªè½å¯¼å¥__all__åè¡¨ä¸­å­å¨çå¯¹è±¡ã\n\n# module: foo.py\n__all__ = [ 'bar', 'spam' ]     # å®ä¹ä½¿ç¨ `*` å¯ä»¥å¯¼å¥çå¯¹è±¡\n\n\n1\n2\n\n\nå¦å¤, as ä¹å¯ä»¥å from èåä½¿ç¨:\n\nfrom socket import gethostname as hostname\nh = hostname()\n\n\n1\n2\n\n\nimport è¯­å¥å¯ä»¥å¨ç¨åºçä»»ä½ä½ç½®ä½¿ç¨ï¼ä½ å¯ä»¥å¨ç¨åºä¸­å¤æ¬¡å¯¼å¥åä¸ä¸ªæ¨¡åï¼ä½æ¨¡åä¸­çä»£ç ä»ä»å¨è¯¥æ¨¡åè¢«é¦æ¬¡å¯¼å¥æ¶æ§è¡ãåé¢çimportè¯­å¥åªæ¯ç®åçåå»ºä¸ä¸ªå°æ¨¡ååå­ç©ºé´çå¼ç¨èå·²ãsys.moduleså­å¸ä¸­ä¿å­çææè¢«å¯¼å¥æ¨¡åçæ¨¡ååå°æ¨¡åå¯¹è±¡çæ å°ãè¿ä¸ªå­å¸ç¨æ¥å³å®æ¯å¦éè¦ä½¿ç¨importè¯­å¥æ¥å¯¼å¥ä¸ä¸ªæ¨¡åçææ°æ·è´.\n\nfrom module import * è¯­å¥åªè½ç¨äºä¸ä¸ªæ¨¡åçæé¡¶å±.\nç¹å«æ³¨æï¼ç±äºå­å¨ä½ç¨åå²çªï¼ä¸åè®¸å¨å½æ°ä¸­ä½¿ç¨from è¯­å¥ã\n\n# name å±æ§\n\næ¯ä¸ªæ¨¡åé½æ¥æ__name__ å±æ§ï¼å®æ¯ä¸ä¸ªåå®¹ä¸ºæ¨¡ååå­çå­ç¬¦ä¸²ã\næé¡¶å±çæ¨¡ååç§°æ¯__main__ .å½ä»¤è¡ææ¯äº¤äºæ¨¡å¼ä¸ç¨åºé½è¿è¡å¨__main__ æ¨¡ååé¨ã\nå©ç¨__name__å±æ§ï¼æä»¬å¯ä»¥è®©åä¸ä¸ªç¨åºå¨ä¸åçåºåï¼åç¬æ§è¡æè¢«å¯¼å¥)å·æä¸åçè¡ä¸ºï¼è±¡ä¸é¢è¿æ ·åï¼\n\n# æ£æ¥æ¯åç¬æ§è¡è¿æ¯è¢«å¯¼å¥\nif __name__ == '__main__':\n    # yes\n    statements\nelse:\n    # no (å¯è½è¢«ä½ä¸ºæ¨¡åå¯¼å¥)\n    statements \n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n# sys.path å sys.modules\n\nsys.pathåå«äºmoduleçæ¥æ¾è·¯å¾ï¼ sys.modulesåå«äºå½åæloadçææçmodulesçdictï¼å¶ä¸­åå«äºbuiltinçmodulesï¼ï¼\n\n# æ¨¡åæç´¢è·¯å¾\n\nå¯¼å¥æ¨¡åæ¶,è§£éå¨ä¼æç´¢sys.pathåè¡¨,è¿ä¸ªåè¡¨ä¸­ä¿å­çä¸ç³»åç®å½ãä¸ä¸ªå¸åçsys.path åè¡¨çå¼ï¼\n\nlinux:\n['', '/usr/local/lib/python2.0', '/usr/local/lib/python2.0/plat-sunos5']\nwindows:\n['', 'c:\\\\python24\\\\dlls', 'c:\\\\python24\\\\lib', 'c:\\\\python24\\\\lib\\\\plat-win', 'c:\\\\python24\\\\lib\\\\lib-tk']\n\n\n1\n2\n3\n4\n\n\nç©ºå­ç¬¦ä¸² ä»£è¡¨å½åç®å½. è¦å å¥æ°çæç´¢è·¯å¾,åªéè¦å°è¿ä¸ªè·¯å¾å å¥å°è¿ä¸ªåè¡¨.\n\næäºæ¶åæä»¬éè¦ç» python interpreter å¢å ä¸äºåçæ¥æ¾è·¯å¾ï¼å¦ï¼æ³å¼ç¨èªå®ä¹çåæ¶ãè¿å°±éè¦ä¿®æ¹åçæç´¢è·¯å¾ï¼ä¸è¬æ¥è¯´ï¼æä¸¤ç§æ¹å¼ï¼\n\n 1. ç´æ¥å¨è¿è¡æ¶ï¼ä¿®æ¹ sys.path\n 2. å¨å¼å§è¿è¡åï¼ä¿®æ¹ pythonpath ç¯å¢åéï¼è¿ä¸ªç¯å¢åéä¼å¨è¿è¡æ¶è¢«åå«è¿ sys.path ä»¥åä¸æ¨¡åæç´¢ï¼\n\n# æ¨¡åå¯¼å¥åæ±ç¼\n\nå°ç°å¨ä¸ºæ­¢ï¼æ¬ç« ä»ç»çæ¨¡åé½æ¯åå«pythonæºä»£ç çææ¬æä»¶. ä¸è¿æ¨¡åä¸éäºæ­¤ï¼å¯ä»¥è¢« import è¯­å¥å¯¼å¥çæ¨¡åå±æä»¥ä¸åç±»:\n\n * ä½¿ç¨pythonåçç¨åº( .pyæä»¶)\n * cæc++æ©å±(å·²ç¼è¯ä¸ºå±äº«åºædllæä»¶)\n * å(åå«å¤ä¸ªæ¨¡å)\n * åå»ºæ¨¡å(ä½¿ç¨cç¼åå¹¶å·²é¾æ¥å°pythonè§£éå¨å)\n\nå½æ¥è¯¢æ¨¡å foo æ¶,è§£éå¨æç§ sys.path åè¡¨ä¸­ç®å½é¡ºåºæ¥æ¥æ¾ä»¥ä¸æä»¶(ç®å½ä¹æ¯æä»¶çä¸ç§):\n\n 1. å®ä¹ä¸ºä¸ä¸ªåçç®å½ foo\n 2. foo.so, foomodule.so, foomodule.sl,æ foomodule.dll (å·²ç¼è¯æ©å±)\n 3. foo.pyo (åªå¨ä½¿ç¨ -o æ -oo éé¡¹æ¶)\n 4. foo.pyc\n 5. foo.py\n\nå¦æå¨sys.pathæä¾çææè·¯å¾åæ¥æ¾å¤±è´¥ï¼è§£éå¨ä¼ç»§ç»­å¨åå»ºæ¨¡åä¸­å¯»æ¾,å¦æåæ¬¡å¤±è´¥ï¼åå¼å importerror å¼å¸¸.\n\nå½ import è¯­å¥æç´¢æä»¶æ¶,æä»¶åæ¯å¤§å°åææçãå³ä½¿å¨æä»¶ç³»ç»å¤§å°åä¸ææçç³»ç»ä¸ä¹æ¯å¦æ­¤(windowsç­). è¿æ ·, import foo åªä¼å¯¼å¥æä»¶foo.pyèä¸ä¼æ¯foo.py.\n\n# å¯¹äº.pyæä»¶\n\n * å½ä¸ä¸ªæ¨¡åç¬¬ä¸æ¬¡è¢«å¯¼å¥æ¶,å®å°±è¢«æ±ç¼ä¸ºå­èä»£ç ,å¹¶åå¥ä¸ä¸ªååç .pycæä»¶.\n * åæ¥çå¯¼å¥æä½ä¼ç´æ¥è¯»å.pycæä»¶èä¸æ¯.pyæä»¶.(é¤é.pyæä»¶çä¿®æ¹æ¥ææ´æ°,è¿ç§æåµä¼éæ°çæ.pycæä»¶)\n * å¨è§£éå¨ä½¿ç¨ -o éé¡¹æ¶ï¼æ©å±åä¸º.pyoçååæä»¶è¢«ä½¿ç¨.\n * pyoæä»¶çåå®¹è½å»æè¡å·,æ­è¨,åå¶ä»è°è¯ä¿¡æ¯çå­èç ï¼ä½ç§¯æ´å°,è¿è¡éåº¦æ´å¿«.\n * å¦æä½¿ç¨-ooéé¡¹ä»£æ¿-o,åææ¡£å­ç¬¦ä¸²ä¹ä¼å¨åå»º.pyoæä»¶æ¶ä¹è¢«å¿½ç¥.\n * .pycå.pyoæä»¶çæ±ç¼,å½ä¸ä»å½import è¯­å¥æ§è¡æ¶è¿è¡.\n\n# éæ°å¯¼å¥æ¨¡å\n\nå¦ææ´æ°äºä¸ä¸ªå·²ç»ç¨importè¯­å¥å¯¼å¥çæ¨¡åï¼åå»ºå½æ°reload()å¯ä»¥éæ°å¯¼å¥å¹¶è¿è¡æ´æ°åçæ¨¡åä»£ç .å®éè¦ä¸ä¸ªæ¨¡åå¯¹è±¡åä¸ºåæ°.ä¾å¦:\n\nimport foo\n... some code ...\nreload(foo)          # éæ°å¯¼å¥ foo\n\n\n1\n2\n3\n\n\nå¨reload()è¿è¡ä¹åçéå¯¹æ¨¡åçæä½é½ä¼ä½¿ç¨æ°å¯¼å¥ä»£ç ï¼ä¸è¿reload()å¹¶ä¸ä¼æ´æ°ä½¿ç¨æ§æ¨¡ååå»ºçå¯¹è±¡ï¼å æ­¤æå¯è½åºç°æ°æ§çæ¬å¯¹è±¡å±å­çæåµã\næ³¨æï¼ ä½¿ç¨cæc++ç¼è¯çæ¨¡åä¸è½éè¿ reload() å½æ°æ¥éæ°å¯¼å¥ãè®°ä½ä¸ä¸ªååï¼é¤éæ¯å¨è°è¯åå¼åè¿ç¨ä¸­ï¼å¦åä¸è¦ä½¿ç¨reload()å½æ°.\n\n# äºå\n\nå¤ä¸ªå³ç³»å¯åçæ¨¡ååºè¯¥ç»ç»æä¸ä¸ªåï¼ä»¥ä¾¿äºç»´æ¤åä½¿ç¨ãè¿é¡¹ææ¯è½ææé¿ååå­ç©ºé´å²çªãåå»ºä¸ä¸ªåå­ä¸ºååå­çæä»¶å¤¹å¹¶å¨è¯¥æä»¶å¤¹ä¸åå»ºä¸ä¸ª__init__.py æä»¶å°±å®ä¹äºä¸ä¸ªåãä½ å¯ä»¥æ ¹æ®éè¦å¨è¯¥æä»¶å¤¹ä¸å­æ¾èµæºæä»¶ãå·²ç¼è¯æ©å±åå­åãä¸¾ä¾æ¥è¯´ï¼ä¸ä¸ªåå¯è½æä»¥ä¸ç»æ:\n\ngraphics/\n      __init__.py\n      primitive/\n         __init__.py\n         lines.py\n         fill.py\n         text.py\n         ...\n      graph2d/\n         __init__.py\n         plot2d.py\n         ...\n      graph3d/\n         __init__.py\n         plot3d.py\n         ...\n      formats/\n         __init__.py\n         gif.py\n         png.py\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n\n\nimportè¯­å¥ä½¿ç¨ä»¥ä¸å ç§æ¹å¼å¯¼å¥åä¸­çæ¨¡å:\n\n * import graphics.primitive.fill å¯¼å¥æ¨¡ågraphics.primitive.fill,åªè½ä»¥å¨åè®¿é®æ¨¡åå±æ§,ä¾å¦ graphics.primitive.fill.floodfill(img,x,y,color).\n * from graphics.primitive import fill å¯¼å¥æ¨¡åfill ,åªè½ä»¥ fill.å±æ§åè¿ç§æ¹å¼è®¿é®æ¨¡åå±æ§,ä¾å¦ fill.floodfill(img,x,y,color).\n * from graphics.primitive.fill import floodfill å¯¼å¥æ¨¡åfill ,å¹¶å°å½æ°floodfillæ¾å¥å½ååç§°ç©ºé´,ç´æ¥è®¿é®è¢«å¯¼å¥çå±æ§ï¼ä¾å¦ floodfill(img,x,y,color).\n\næ è®ºä¸ä¸ªåçåªä¸ªé¨åè¢«å¯¼å¥, å¨æä»¶__init__.pyä¸­çä»£ç é½ä¼è¿è¡.è¿ä¸ªæä»¶çåå®¹åè®¸ä¸ºç©º,ä¸è¿éå¸¸æåµä¸å®ç¨æ¥å­æ¾åçåå§åä»£ç ãå¯¼å¥è¿ç¨éå°çææ__init__.pyæä»¶é½è¢«è¿è¡.å æ­¤ import graphics.primitive.fill è¯­å¥ä¼é¡ºåºè¿è¡ graphics å primitive æä»¶å¤¹ä¸ç__init__.pyæä»¶.\n\nä¸è¾¹è¿ä¸ªè¯­å¥å·ææ­§ä¹: from graphics.primitive import * è¿ä¸ªè¯­å¥çåæå¾æ¯æ³å°graphics.primitiveåä¸çæææ¨¡åå¯¼å¥å°å½åçåç§°ç©ºé´.ç¶è,ç±äºä¸åå¹³å°é´æä»¶åè§åä¸å(æ¯å¦å¤§å°åææé®é¢), pythonä¸è½æ­£ç¡®å¤å®åªäºæ¨¡åè¦è¢«å¯¼å¥.è¿ä¸ªè¯­å¥åªä¼é¡ºåºè¿è¡ graphics å primitive æä»¶å¤¹ä¸ç__init__.pyæä»¶. è¦è§£å³è¿ä¸ªé®é¢ï¼åºè¯¥å¨primitiveæä»¶å¤¹ä¸é¢ç__init__.pyä¸­å®ä¹ä¸ä¸ªåå­allçåè¡¨ï¼ä¾å¦:\n\n# graphics/primitive/__init__.py\n__all__ = [\"lines\",\"text\",\"fill\",...]\n\n\n1\n2\n\n\nè¿æ ·,ä¸è¾¹çè¯­å¥å°±å¯ä»¥å¯¼å¥åè¡¨ä¸­æææ¨¡å.\n\nä¸é¢è¿ä¸ªè¯­å¥åªä¼æ§è¡graphicsç®å½ä¸ç__init__.pyæä»¶ï¼èä¸ä¼å¯¼å¥ä»»ä½æ¨¡å:\n\nimport graphics\ngraphics.primitive.fill.floodfill(img,x,y,color)  # å¤±è´¥!\n\n\n1\n2\n\n\nä¸è¿æ¢ç¶ import graphics è¯­å¥ä¼è¿è¡ graphics ç®å½ä¸ç__init__.pyæä»¶,æä»¬å°±å¯ä»¥éåä¸é¢çææ®µæ¥è§£å³è¿ä¸ªé®é¢ï¼\n\n# graphics/__init__.py\nimport primitive, graph2d, graph3d\n# graphics/primitive/__init__.py\nimport lines, fill, text, ...\n\n\n1\n2\n3\n4\n\n\nè¿æ ·import graphicsè¯­å¥å°±å¯ä»¥å¯¼å¥ææçå­æ¨¡å(åªè½ç¨å¨åæ¥è®¿é®è¿äºæ¨¡åçå±æ§).\n\n\n# 3. è¯­æ³\n\n# decorator\n\n@dec2\n@dec1\ndef func(arg1, arg2, ...):\n    pass\nthis is equivalent to:\n\ndef func(arg1, arg2, ...):\n    pass\nfunc = dec2(dec1(func))\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n@decomaker(arga, argb, ...)\ndef func(arg1, arg2, ...):\n    pass\n \nthis is equivalent to:\n\nfunc = decomaker(arga, argb, ...)(func)\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n# 4. å¼æ­¥io\n\n\n# åºç¡è¦ç´ \n\npythonå¨3.4ä¸­å¼å¥äºåç¨çæ¦å¿µï¼è¿ä¸ªæ¯ä»¥çæå¨å¯¹è±¡ä¸ºåºç¡ï¼3.5åç¡®å®äºåç¨çè¯­æ³ãå®ç°åç¨çä¸ä»ä»æ¯asyncioï¼tornadoågeventé½å®ç°äºç±»ä¼¼çåè½ã\n\nasyncio çå ä¸ªä¸»è¦åç´ æï¼\n\n 1. event_loop\n    1. ç¨åºå¼å¯ä¸ä¸ªæ éçäºä»¶å¾ªç¯ï¼å¹¶ä¾æ¬¡æ§è¡æ»¡è¶³æ¡ä»¶çåç¨å½æ°\n 2. coroutine\n    1. åç¨å¯¹è±¡ï¼ç±å³é®å­ async å®ä¹çå½æ°å¨è¢«è°ç¨æ¶ä¸ä¼ç«å³æ§è¡ï¼èæ¯è¿åä¸ä¸ªåç¨å¯¹è±¡ãåç¨å¯¹è±¡éè¦éè¿æ³¨åå¨ä½äº¤ç±äºä»¶å¾ªç¯æ¥è°ç¨ã\n 3. task\n    1. ä»»å¡ï¼æ¯å¯¹åç¨çè¿ä¸æ­¥å°è£ï¼å¶ä¸­åå«äºä»»å¡çåç§ç¶æã\n 4. future\n    1. ä»£è¡¨å°è¦æ§è¡ææ²¡è¢«æ§è¡çä»»å¡çç»æã\n    2. task å¯¹è±¡æ¯ future ç±»çå­ç±»\n 5. async/await\n    1. python3.5 ä¸­ç¨äºå®ä¹åç¨çå³é®å­ï¼asyncå®ä¹ä¸ä¸ªåç¨ï¼awaitç¨äºæèµ·(é»å¡ç)å¼æ­¥è°ç¨ã\n\nä¾å¦ï¼\n\nimport asyncio\n\nasync def work(args):\n    print('i am working : {}'.format(x))\n\ncoroutine = work(\"new job\")\nloop = asyncio.get_event_loop() # åå»ºä¸ä¸ªäºä»¶å¾ªç¯\nloop.run_until_complete(coroutine) # å°åç¨æ³¨åå°äºä»¶å¾ªç¯ï¼å¹¶å¯å¨äºä»¶å¾ªç¯\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# ä»»å¡(task)\n\néè¿ä¸è¾¹çç¤ºä¾ï¼å¯ä»¥åç° coroutine ä¸è½ç´æ¥æ§è¡ï¼èæ¯éè¦éè¿ loop.run_until_complete() æ¥æ§è¡ï¼è¿éè¾¹çéå«å¨ä½æ¯ï¼å°åç¨åè£æä¸ºäºä¸ä¸ª task å¯¹è±¡ï¼å¹¶å¨äºä»¶å¾ªç¯ä¸­æ§è¡ãä¸ºä»ä¹ï¼\n\nloop.run_until_complete() çåæ°æ¯ä¸ä¸ª futrue å¯¹è±¡ï¼ä½çæ­£å¨ä½æ¯æ§è¡æ³¨åå°äºä»¶å¾ªç¯ä¸ç coroutinesãå¦ä¸ææå°çï¼task æ¯å¯¹ coroutine çå°è£ï¼åæ¶ä¹æ¯ future ç±»çå­ç±»ãæä»¥ï¼å½ä¼ å¥ä¸ä¸ªåç¨æ¶ï¼å½æ°åé¨ä¼èªå¨å°è£æ task ä»¥æ»¡è¶³è°ç¨éè¦ã\n\nå½ç¶ï¼æä»¬ä¹å¯ä»¥ä¸»å¨æé  task å¯¹è±¡: asyncio.ensure_future(coroutine) å loop.create_task(coroutine) é½å¯ä»¥åå»ºä¸ä¸ªtask å¯¹è±¡ã\n\n\n# åç¨è¿åå¼\n\n 1. task.add_done_callback\n\néè¿ task.add_done_callback(callback) å¯ä»¥å¯¹ task ç»å®åè°å½æ°ï¼å¨ coroutine æ§è¡ç»ææ¶åä¼è°ç¨è¿ä¸ªåè°å½æ°ã\n\nimport asyncio\n\nasync def work(args):\n    return 'i am working : {}'.format(args)\n\ndef callback(future):\n    print('callback: {}'.format(future.result()))\n\ncoroutine = work(\"new job\")\nloop = asyncio.get_event_loop()\ntask = asyncio.ensure_future(coroutine)\ntask.add_done_callback(callback)\nloop.run_until_complete(task)\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\nè¿éå¯ä»¥çå°ï¼callback çåæ°æ¯ä¸ä¸ª future å¯¹è±¡ï¼å¦ææ³ä¼ éå¶ä»æ°æ®å° callbackï¼å¯ä»¥éè¿ä»¥ä¸æ¹å¼ï¼\n\ndef callback(t, future):\n    print('callback:', t, future.result())\n\ntask.add_done_callback(functools.partial(callback, 1))\n\n\n1\n2\n3\n4\n\n\næ­¤å¤ï¼å¦æå¨è°è¯è¿ç¨ä¸­è§å¯ task å å¶åè°éç future çè¯ï¼å¯ä»¥åç°å®ä»¬å®éä¸æ¯åä¸ä¸ªå¯¹è±¡ã\n\n 2. future.result()\n\nä¸è¾¹çä¾å­æä»¬å¯ä»¥ç¥éï¼è¿è¡ç»æå®éä¸æ¯å¯ä»¥éè¿ future.result() æ¥åå¾ãèåè°éç futrue å åå»ºç task æ¯åä¸ä¸ªå¯¹è±¡ï¼é£æä»¬æ¯ä¸æ¯å¯ä»¥å¨ä»»å¡æ§è¡ç»æåï¼ä¸»å¨è°ç¨ task.result() æ¥è·åç»æå¢ï¼å½ç¶å¯ä»¥ã\n\nimport asyncio\n\nasync def work(args):\n    return 'i am working : {}'.format(args)\n\ncoroutine = work(\"new job\")\nloop = asyncio.get_event_loop()\ntask = asyncio.ensure_future(coroutine)\nloop.run_until_complete(task)\n\nprint('task result is {}'.format(task.result()))\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n\n# å¹¶å\n\né¦åï¼è¦æç½ å¹¶ååå¹¶è¡ æ¯ä¸ä¸æ ·çï¼å¹¶åææå¤ä¸ªä»»å¡éè¦åæ¶è¿è¡(å¦ï¼åæ ¸cpuéè¿æ¶é´çè½®è½¬è¿è¡ä¸åçç¨åº)ï¼å¹¶è¡åæ¯åä¸æ¶å»æå¤ä¸ªä»»å¡æ§è¡(å¤æ ¸cpuçæ¯ä¸ªæ ¸å¿å¨åä¸ä¸ªæ¶å»ç¬ç«è¿è¡ä¸åçç¨åº)ã\n\nasyncio éè¿ äºä»¶å¾ªç¯åawait/async æ¥åè°å¤ä¸ªåç¨æ¥å®ç°å¹¶åãæ¯å½æä»»å¡é»å¡çæ¶åå°± awaitï¼ç¶åå¶ä»åç¨ç»§ç»­å·¥ä½ã\n\nimport time\nimport asyncio\n\nasync def work(sleep_sec):\n    print('sleep {} : before'.format(sleep_sec))\n    await asyncio.sleep(sleep_sec)\n    return 'sleep {} : after'.format(sleep_sec)\n\nnow = lambda: time.time()\n\ncoroutine1 = work(1)\ncoroutine2 = work(2)\ncoroutine3 = work(4)\ntasks = [\n    asyncio.ensure_future(coroutine1),\n    asyncio.ensure_future(coroutine2),\n    asyncio.ensure_future(coroutine3)\n]\nloop = asyncio.get_event_loop()\n# ä½¿ç¨ syncio.wait(tasks) æ asyncio.gather(*tasks) æ¥æ±éå¤ä»»å¡\nloop.run_until_complete(asyncio.wait(tasks))\n\nfor task in tasks:\n    print('task result is {}'.format(task.result()))\nprint('spend {} seconds'.format(now() - start))\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n\n\næä»¬å¯ä»¥è§å¯ä¸ä¾ä¸­çåä¸ªä»»å¡çæ§è¡æ¶æºåæ»èæ¶æ¥ç¡®è®¤å¹¶åç°è±¡ã\n\n\n# åç¨åæ­¢\n\nå¦æéè¦åæ­¢äºä»¶å¾ªç¯ï¼å°±éè¦åætaskåæ¶ãåçä¾å­ï¼\n\nimport time\nimport asyncio\n\nasync def work(sleep_sec):\n    print('sleep {} : before'.format(sleep_sec))\n    await asyncio.sleep(sleep_sec)\n    return 'sleep {} : after'.format(sleep_sec)\n\ncoroutine1 = work(1)\ncoroutine2 = work(2)\ncoroutine3 = work(4)\ntasks = [\n    asyncio.ensure_future(coroutine1),\n    asyncio.ensure_future(coroutine2),\n    asyncio.ensure_future(coroutine3)\n]\nloop = asyncio.get_event_loop()\ntry:\n    loop.run_until_complete(asyncio.wait(tasks))\nexcept keyboardinterrupt as e:\n    print(asyncio.task.all_tasks())\n    for task in asyncio.task.all_tasks():\n        print(task.cancel())\n    loop.stop()\n    loop.run_forever()\nfinally:\n    loop.close()\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n\n\nå¯å¨äºä»¶å¾ªç¯ä¹åï¼é©¬ä¸ctrl+cï¼ä¼è§¦årun_until_completeçæ§è¡å¼å¸¸ keyborardinterruptãç¶åéè¿å¾ªç¯asyncio.taskè·åè·åäºä»¶å¾ªç¯çtaskéè¿å¶ task.cancel() åæ¶futureãæ³¨æï¼loop.stop()ä¹åè¿éè¦åæ¬¡å¼å¯äºä»¶å¾ªç¯ï¼æååcloseï¼ä¸ç¶è¿ä¼æåºå¼å¸¸ã\n\næä»¬è¿å¯ä»¥éè¿ä¸è¾¹è¿ç§æ¹å¼åæ­¢åç¨ï¼\n\nimport time\nimport asyncio\n\nasync def work(sleep_sec):\n    print('sleep {} : before'.format(sleep_sec))\n    await asyncio.sleep(sleep_sec)\n    return 'sleep {} : after'.format(sleep_sec)\n\nasync def main():\n    coroutine1 = work(1)\n    coroutine2 = work(2)\n    coroutine3 = work(2)\n    tasks = [\n        asyncio.ensure_future(coroutine1),\n        asyncio.ensure_future(coroutine2),\n        asyncio.ensure_future(coroutine3)\n    ]\n    done, pending = await asyncio.wait(tasks)\n    for task in done:\n        print('task result is {}'.format(task.result()))\n\nloop = asyncio.get_event_loop()\ntask = asyncio.ensure_future(main())\ntry:\n    loop.run_until_complete(task)\nexcept keyboardinterrupt as e:\n    print(asyncio.task.all_tasks())\n    print(asyncio.gather(*asyncio.task.all_tasks()).cancel())\n    loop.stop()\n    loop.run_forever()\nfinally:\n    loop.close()\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n\n\nç®åçè¯´ï¼å°±æ¯éè¿åç¨åµå¥ï¼å°ä¸ç³»ååç¨å°è£å°å¦ä¸ä¸ªåç¨ä¸­ï¼æ­¤æ¶å¤çå¤å±åè£ç main å½æ°å³å¯ã\n\n\n# å¼æ­¥äºä»¶å¾ªç¯\n\né¤äºå¨ä¸»çº¿ç¨è¿è¡äºä»¶å¾ªç¯ï¼è¿å¯ä»¥å¨å­çº¿ç¨ä¸­è¿è¡ãå¨å­çº¿ç¨ä¸­è¿è¡äºä»¶å¾ªç¯çå¥½å¤ï¼æ¾èæè§ï¼ä¸ä¼é»å¡ä¸»çº¿ç¨ï¼ä½ä¹å¸¦æ¥äºå¼æ­¥å¤ççé®é¢ã\n\néè¿ä»¥ä¸ç¤ºä¾ï¼ç»ç»åå³ä¸å­çº¿ç¨çäºä»¶å¾ªç¯å§ï¼\n\nfrom threading import thread\n\ndef start_loop(loop):\n    asyncio.set_event_loop(loop)\n    loop.run_forever()\n\nasync def work(sleep_sec):\n    print('work: sleep {} : before'.format(sleep_sec))\n    await asyncio.sleep(sleep_sec)\n    return 'work: sleep {} : after'.format(sleep_sec)\n\ndef more_work(sleep_sec):\n    print('more_work: sleep {}:before'.format(sleep_sec))\n    time.sleep(sleep_sec)\n    print('more_work: sleep {}:after'.format(sleep_sec))\n\nnew_loop = asyncio.new_event_loop()\nt = thread(target=start_loop, args=(new_loop,))\nt.start()\n\n# æ°çº¿ç¨ä¸­ä¼æç§é¡ºåºæ§è¡éè¿ call_soon_threadsafe æ³¨åçæ¹æ³\nnew_loop.call_soon_threadsafe(more_work, 6)\nnew_loop.call_soon_threadsafe(more_work, 3)\n\n# éè¿ run_coroutine_threadsafe æ³¨åæ°åç¨å¯¹è±¡ï¼è¿æ ·å¯ä»¥è®©å­çº¿ç¨ä¸­çäºä»¶å¾ªç¯çå¹¶åçå¤çåç¨\nasyncio.run_coroutine_threadsafe(work(6), new_loop)\nasyncio.run_coroutine_threadsafe(work(4), new_loop)\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n\n\n\n# æ»ç»\n\nè¿éç®åçä»ç»äº asyncio çåºç¡åç´ ï¼äºä»¶å¾ªç¯ï¼åç¨ï¼futureåä»»å¡ãéè¿è¿äºåºç¡åå®¹çç»åï¼æä»¬å¯ä»¥å®ç°åºæ´å¤æ´æææçå¼æ­¥ãå¹¶åä»»å¡ï¼æ¯å¦ï¼çäº§èæ¶è´¹èæ¨¡å... æ´å¤ç¨æ³äºå¾è¢«å¼ååºæ¥ã\n\n----------------------------------------\n\n\n# to be continue ...",charsets:{cjk:!0}},{title:"Network ç®å½",frontmatter:{published:!0,title:"Network ç®å½",description:"ç½ç»åºç¡ç¥è¯æ±æ»",keywords:[""],categories:["network"],permalink:"/blog/network/",date:"2020-04-13T00:00:00.000Z",tags:[null]},regularPath:"/blog/network/",relativePath:"blog/network/README.md",key:"v-718753e8",path:"/blog/network/",headers:[{level:2,title:"äºã Http2",slug:"äºã-http2",normalizedTitle:"äºã http2",charIndex:31},{level:2,title:"ä¸ã Grpc",slug:"ä¸ã-grpc",normalizedTitle:"ä¸ã grpc",charIndex:76}],headersStr:"äºã Http2 ä¸ã Grpc",content:"# NETWORK ç®å½\n\n * Tcpipæç»´å¯¼å¾\n\n\n# äºã Http2\n\n * Http/2.0 And Http/2.0 In Go\n\n\n# ä¸ã Grpc\n\n * Grpc Interceptor With Go\n\n * Grpc Source Notes\n\n * Grpc Over Http2\n\n * Grpc Connectivity Semantics And Api\n\n * Tcp ä¸ Udp å¯¹æ¯",normalizedContent:"# network ç®å½\n\n * tcpipæç»´å¯¼å¾\n\n\n# äºã http2\n\n * http/2.0 and http/2.0 in go\n\n\n# ä¸ã grpc\n\n * grpc interceptor with go\n\n * grpc source notes\n\n * grpc over http2\n\n * grpc connectivity semantics and api\n\n * tcp ä¸ udp å¯¹æ¯",charsets:{cjk:!0}},{title:"gRPC Connectivity Semantics and API",frontmatter:{title:"gRPC Connectivity Semantics and API",date:"2020-04-13T00:00:00.000Z",lastmod:null,description:"gRPC Connectivity Semantics and API",categories:["network","grpc"],tags:[null],permalink:null},regularPath:"/blog/network/grpc/grpc_connectivity_semantics_and_api.html",relativePath:"blog/network/grpc/grpc_connectivity_semantics_and_api.md",key:"v-570d3d9f",path:"/blog/network/grpc/grpc_connectivity_semantics_and_api.html",headers:[{level:2,title:"States of Connectivity",slug:"states-of-connectivity",normalizedTitle:"states of connectivity",charIndex:173},{level:3,title:"CONNECTING:",slug:"connecting",normalizedTitle:"connecting:",charIndex:506},{level:3,title:"READY:",slug:"ready",normalizedTitle:"ready:",charIndex:616},{level:3,title:"TRANSIENT_FAILURE:",slug:"transient-failure",normalizedTitle:"transient_failure:",charIndex:715},{level:3,title:"IDLE:",slug:"idle",normalizedTitle:"idle:",charIndex:1009},{level:3,title:"SHUTDOWN:",slug:"shutdown",normalizedTitle:"shutdown:",charIndex:1401},{level:2,title:"ç¶æè½¬æ¢è¡¨",slug:"ç¶æè½¬æ¢è¡¨",normalizedTitle:"ç¶æè½¬æ¢è¡¨",charIndex:1644},{level:2,title:"Channel State API",slug:"channel-state-api",normalizedTitle:"channel state api",charIndex:3769}],headersStr:"States of Connectivity CONNECTING: READY: TRANSIENT_FAILURE: IDLE: SHUTDOWN: ç¶æè½¬æ¢è¡¨ Channel State API",content:"# gRPC Connectivity Semantics and API\n\n> åæï¼https://github.com/grpc/grpc/blob/master/doc/connectivity-semantics-and-api.md\n\næ¬æä¸»è¦æè¿° gRPC ééçè¿æ¥è¯­ä¹ä»¥åå¯¹ RPC çç¸åºå½±åï¼ç¶ååæ¢è®¨ä¸ APIã\n\n\n# States of Connectivity\n\ngRPC Channels æä¾äºä¸ç§ clients ä¸ servers äº¤äºçæ½è±¡ãå®¢æ·ç«¯ç channel å¯¹è±¡å¯ä»¥éè¿ä½¿ç¨ä¸ä¸ª DNS åå­å¤ä¸ç¹çä¿¡æ¯å°±å¯ä»¥æå»ºåºæ¥ãChannels å°è£äºä¸ç³»ååè½ï¼åæ¬ï¼åç§°è§£æãå»ºç«TCPè¿æ¥(åæ¬ retries å backoff)å TLS æ¡æã Channels è¿å¯ä»¥å¤çå·²å»ºç«è¿æ¥ä¸çéè¯¯å¹¶éæ°è¿æ¥ï¼æèå¨ HTTP/2 GO_AWAY çæåµä¸ï¼éæ°è§£æåç§°å¹¶éæ°è¿æ¥ã\n\nä¸ºäºå¯¹ä½¿ç¨ gRPC APIçç¨æ·(å³åºç¨ç¨åºä»£ç )éèæææ­¤æ´»å¨çè¯¦ç»ä¿¡æ¯ï¼åæ¶æ´é²æå³ channel ç¶æçææä¹ä¿¡æ¯ï¼æä»¬ä½¿ç¨äºå¦ä¸å®ä¹çäºä¸ªç¶æè¡¨è¿°çç¶ææºï¼\n\n\n# CONNECTING:\n\næ è¯è¯¥ channel æ­£å¨å°è¯å»ºç«è¿æ¥ï¼å¹¶ä¸æ­£å¨ç­å¾å¨ åç§°è§£æãTCP è¿æ¥å»ºç« æ TLS æ¡æ ä¸­æ¶åçå¶ä¸­ä¸ä¸ªæ­¥éª¤ä¸åå¾è¿å±ãå®å¯ä»¥è¢«ç¨ä½åå»º channel æ¶çåå§ç¶æã\n\n\n# READY:\n\næ è¯è¯¥ channel å·²ç»éè¿ TLSæ¡æ(æç­æ)ååè®®çº§(HTTP/2ç­)æ¡æ æåå»ºç«äºè¿æ¥ï¼å¹¶ä¸ææåç»­çéä¿¡å°è¯é½å·²æå(æèå¨æ²¡æä»»ä½å·²ç¥æéçæåµä¸ç­å¾)ã\n\n\n# TRANSIENT_FAILURE:\n\næ è¯è¯¥ channel åºç°äºä¸äºç¬æ¶æé(ä¾å¦ï¼TCP 3æ¬¡æ¡æè¶æ¶ æ å¥æ¥å­éè¯¯)ãå¤äºæ­¤ç¶æç channel æç»å°åæ¢å° CONNECTING ç¶æå¹¶å°è¯åæ¬¡å»ºç«è¿æ¥ã\n\nç±äºéè¯æ¯éè¿ææ°éé¿(exponential backoff)å®æçï¼å æ­¤ï¼è¿æ¥å¤±è´¥ç channel å¨åå¼å§æ¶å¨æ­¤ç¶æä¸è±è´¹å¾å°çæ¶é´ï¼ä½æ¯éçéå¤å°è¯å¹¶å¤±è´¥çæ¬¡æ°å¢å ï¼channel å°å¨æ­¤ç¶æä¸è±è´¹è¶æ¥è¶å¤çæ¶é´ãå¯¹äºè®¸å¤éè´å½æé(ä¾å¦ï¼ç±äºæå¡å¨å°ä¸å¯ç¨èå¯¼è´ TCP è¿æ¥å°è¯è¶æ¶)ï¼channel å¯è½å¨è¯¥ç¶æä¸è±è´¹è¶æ¥è¶å¤çå¤§éæ¶é´ã\n\n\n# IDLE:\n\nè¿ä¸ªç¶ææ è¯ç±äºç¼ºå°æ°ç(new)ææªå³(pending)çRPCï¼channel çè³æ²¡æå°è¯åå»ºè¿æ¥ãæ°ç RPC å¯è½ä¼å¨è¿ä¸ªç¶æè¢«åå»ºãä»»ä½å¨ channel ä¸å¯å¨ RPC çå°è¯é½ä¼å°ééä»æ­¤ç¶ææ¨éå° CONNECTING ç¶æã\n\nå¦æ channel ä¸å·²ç»å¨æå®ç IDLE_TIMEOUT æ¶é´åæ²¡æ RPC æ´»å¨ï¼å³å¨æ­¤æé´æ²¡ææ°ç(new)ææèµ·(pending)ç(ææ´»è·ç) RPCï¼å READY æ CONNECTING ç¶æç channel å°è½¬æ¢å° IDLE ç¶æãéå¸¸æåµä¸ï¼IDLE_TIMEOUT çé»è®¤å¼æ¯ 300ç§ã\n\næ­¤å¤ï¼å·²ç»æ¥æ¶å° GOAWAY ç channel å¨æ²¡ææ´»è·(active)ææèµ·(pending)ç RPCs æ¶ï¼ä¹åºå½è½¬æ¢å° IDLE ç¶æï¼ä»¥é¿åå°è¯æ­å¼è¿æ¥çæå¡å¨ä¸çè¿æ¥è¿è½½ã\n\n\n# SHUTDOWN:\n\næ è¯è¯¥ channel å·²ç»å¼å§å³é­ãä»»ä½æ°ç RPCs é½åºè¯¥ç«å³å¤±è´¥ãå¾å¤ç(pending)ç RPCs å¯è½ä¼ç»§ç»­è¿è¡ï¼ç´å°åºç¨ç¨åºåæ¶å®ä»¬ãchannel å¯è½ä¼å ä¸ºåºç¨ç¨åºæ¾å¼è¯·æ±å³é­ï¼æèå¨å°è¯è¿æ¥éä¿¡æé´åçäºä¸å¯æ¢å¤çéè¯¯èè¿å¥æ­¤ç¶æã(æªè³2015å¹´12æ6æ¥ï¼æ²¡æå·²ç¥çéè¯¯(è¿æ¥æéä¿¡æ¶)è¢«å½ç±»ä¸ºä¸å¯æ¢å¤çéè¯¯ã)\n\nä¸æ¦ channel è¿å¥ SHUTDOWN ç¶æï¼å°±ç»ä¸ä¼åç¦»å¼ãä¹å°±æ¯è¯´ï¼SHUTDOWN æ¯ç¶ææºçç»æã\n\n\n# ç¶æè½¬æ¢è¡¨\n\nä¸è¡¨ååºäºåæ³çç¶æè½¬æ¢åç¸å³åå ãç©ºçååè¡¨ç¤ºä¸åè®¸å¯¹åºçç¶æè½¬æ¢ã\n\nFROM/TO             CONNECTING                                                 READY                                                          TRANSIENT_FAILURE                                     IDLE                                                  SHUTDOWN\nCONNECTING          Incremental progress during connection establishment       All steps needed to establish a connection succeeded           Any failure in any of the steps needed to establish   No RPC activity on channel for IDLE_TIMEOUT           Shutdown triggered by application.\n                                                                                                                                              connection\nREADY                                                                          Incremental successful communication on established channel.   Any failure encountered while expecting successful    No RPC activity on channel for IDLE_TIMEOUT OR upon   Shutdown triggered by application.\n                                                                                                                                              communication on established channel.                 receiving a GOAWAY while there are no pending RPCs.\nTRANSIENT_FAILURE   Wait time required to implement (exponential) backoff is                                                                                                                                                                              Shutdown triggered by application.\n                    over.\nIDLE                Any new RPC activity on the channel                                                                                                                                                                                                   Shutdown triggered by application.\nSHUTDOWN                                                                                                                                                                                                                                                  \n\n\n# Channel State API\n\nææç gRPC åºé½åºè¯¥æ´é²ä¸ä¸ª channel-level ç API æ¹æ³ä»¥è½®è¯¢ channel çå½åç¶æã\n\nå¨ C++ ä¸­, è¿ä¸ªæ¹æ³å« GetStateï¼å®ä¼è¿åä¸ä¸ªæ è¯äºä¸ªåæ³ç¶æä¸­ä¸ä¸ªçæä¸¾å¼ãå¦æ channel å½åå¤äº IDLE ç¶æï¼å®è¿æ¥åå¸å°å¼ try_to_connect ä»¥è½¬æ¢ä¸º CONNECTINGãThe boolean should act as if an RPC occurred, so it should also reset IDLE_TIMEOUT. grpc_connectivity_state GetState(bool try_to_connect);\n\nææç gRPC åºè¿åºè¯¥æ´é²ä¸ä¸ª API ä»¥å¨å½ channel ç¶æåçååæ¶ï¼åºç¨ç¨åº(ä½¿ç¨ gRPC API çç¨æ·)å¯ä»¥å¾å°éç¥ãç±äºç¶ææ´æ¹å¯ä»¥å¿«éå¹¶ä¸ä¸ä»»ä½æ­¤ç±»éç¥ç«äºï¼å æ­¤éç¥åºè¯¥ä»éç¥ç¨æ·å·²ç»åçäºä¸äºç¶ææ¹åï¼å°å¶çç»ç¨æ·ä»¥è½®è¯¢è¯¥ééä»¥è·å¾å½åç¶æãå¼æ­¥çæ¬çè¿ä¸ª APIå¦ä¸ï¼ bool WaitForStateChange(grpc_connectivity_state source_state, gpr_timespec deadline);\n\nå½ç¶æä¸æ¯ source_state æ¶è¿å trueï¼å¦ææªæ­¢æ¶é´å°æåè¿å falseãAsynchronous- and futures-based çAPIåºè¯¥æä¸ä¸ªç¸åºçæ¹æ³ï¼åè®¸å¨ééç¶æåçååæ¶éç¥åºç¨ç¨åºã\n\nè¯·æ³¨æï¼æ¯å½ä»ä»»ä½ç¶æè½¬æ¢å°ä»»ä½å¶ä»ç¶ææ¶ï¼é½ä¼åééç¥ã\n\nä¹å°±æ¯è¯´ï¼åæ³ç¶æè½¬æ¢çè§åè¦æ±ä» CONNECTING è½¬æ¢å° TRANSIENT_FAILURE å¹¶è¿åå°æ¯ä¸ªå¯æ¢å¤æéç CONNECTINGï¼å³ä½¿ç¸åºçææ°éé¿å¨éè¯ä¹åä¸éè¦ç­å¾ãç»¼åæææ¯åºç¨ç¨åºå¯è½ä¼æ¶å°çä¼¼èåçç¶ææ´æ¹éç¥ãä¾å¦ï¼å¨ CONNECTING ç¶æç channel ä¸ç­å¾ç¶æåæ´çåºç¨ç¨åºï¼å¯è½ä¼å¨æ¶å°ç¶ææ´æ¹éç¥ï¼ä½å¨è½®è¯¢å½åç¶ææ¶åç°å¶ä¾ç¶å¤äº CONNECTING ç¶æï¼å ä¸ºè¯¥ channel å¯è½å¨ TRANSIENT_FAILURE ç¶æä¸è±è´¹äºæå°çæ¶é´ã",normalizedContent:"# grpc connectivity semantics and api\n\n> åæï¼https://github.com/grpc/grpc/blob/master/doc/connectivity-semantics-and-api.md\n\næ¬æä¸»è¦æè¿° grpc ééçè¿æ¥è¯­ä¹ä»¥åå¯¹ rpc çç¸åºå½±åï¼ç¶ååæ¢è®¨ä¸ apiã\n\n\n# states of connectivity\n\ngrpc channels æä¾äºä¸ç§ clients ä¸ servers äº¤äºçæ½è±¡ãå®¢æ·ç«¯ç channel å¯¹è±¡å¯ä»¥éè¿ä½¿ç¨ä¸ä¸ª dns åå­å¤ä¸ç¹çä¿¡æ¯å°±å¯ä»¥æå»ºåºæ¥ãchannels å°è£äºä¸ç³»ååè½ï¼åæ¬ï¼åç§°è§£æãå»ºç«tcpè¿æ¥(åæ¬ retries å backoff)å tls æ¡æã channels è¿å¯ä»¥å¤çå·²å»ºç«è¿æ¥ä¸çéè¯¯å¹¶éæ°è¿æ¥ï¼æèå¨ http/2 go_away çæåµä¸ï¼éæ°è§£æåç§°å¹¶éæ°è¿æ¥ã\n\nä¸ºäºå¯¹ä½¿ç¨ grpc apiçç¨æ·(å³åºç¨ç¨åºä»£ç )éèæææ­¤æ´»å¨çè¯¦ç»ä¿¡æ¯ï¼åæ¶æ´é²æå³ channel ç¶æçææä¹ä¿¡æ¯ï¼æä»¬ä½¿ç¨äºå¦ä¸å®ä¹çäºä¸ªç¶æè¡¨è¿°çç¶ææºï¼\n\n\n# connecting:\n\næ è¯è¯¥ channel æ­£å¨å°è¯å»ºç«è¿æ¥ï¼å¹¶ä¸æ­£å¨ç­å¾å¨ åç§°è§£æãtcp è¿æ¥å»ºç« æ tls æ¡æ ä¸­æ¶åçå¶ä¸­ä¸ä¸ªæ­¥éª¤ä¸åå¾è¿å±ãå®å¯ä»¥è¢«ç¨ä½åå»º channel æ¶çåå§ç¶æã\n\n\n# ready:\n\næ è¯è¯¥ channel å·²ç»éè¿ tlsæ¡æ(æç­æ)ååè®®çº§(http/2ç­)æ¡æ æåå»ºç«äºè¿æ¥ï¼å¹¶ä¸ææåç»­çéä¿¡å°è¯é½å·²æå(æèå¨æ²¡æä»»ä½å·²ç¥æéçæåµä¸ç­å¾)ã\n\n\n# transient_failure:\n\næ è¯è¯¥ channel åºç°äºä¸äºç¬æ¶æé(ä¾å¦ï¼tcp 3æ¬¡æ¡æè¶æ¶ æ å¥æ¥å­éè¯¯)ãå¤äºæ­¤ç¶æç channel æç»å°åæ¢å° connecting ç¶æå¹¶å°è¯åæ¬¡å»ºç«è¿æ¥ã\n\nç±äºéè¯æ¯éè¿ææ°éé¿(exponential backoff)å®æçï¼å æ­¤ï¼è¿æ¥å¤±è´¥ç channel å¨åå¼å§æ¶å¨æ­¤ç¶æä¸è±è´¹å¾å°çæ¶é´ï¼ä½æ¯éçéå¤å°è¯å¹¶å¤±è´¥çæ¬¡æ°å¢å ï¼channel å°å¨æ­¤ç¶æä¸è±è´¹è¶æ¥è¶å¤çæ¶é´ãå¯¹äºè®¸å¤éè´å½æé(ä¾å¦ï¼ç±äºæå¡å¨å°ä¸å¯ç¨èå¯¼è´ tcp è¿æ¥å°è¯è¶æ¶)ï¼channel å¯è½å¨è¯¥ç¶æä¸è±è´¹è¶æ¥è¶å¤çå¤§éæ¶é´ã\n\n\n# idle:\n\nè¿ä¸ªç¶ææ è¯ç±äºç¼ºå°æ°ç(new)ææªå³(pending)çrpcï¼channel çè³æ²¡æå°è¯åå»ºè¿æ¥ãæ°ç rpc å¯è½ä¼å¨è¿ä¸ªç¶æè¢«åå»ºãä»»ä½å¨ channel ä¸å¯å¨ rpc çå°è¯é½ä¼å°ééä»æ­¤ç¶ææ¨éå° connecting ç¶æã\n\nå¦æ channel ä¸å·²ç»å¨æå®ç idle_timeout æ¶é´åæ²¡æ rpc æ´»å¨ï¼å³å¨æ­¤æé´æ²¡ææ°ç(new)ææèµ·(pending)ç(ææ´»è·ç) rpcï¼å ready æ connecting ç¶æç channel å°è½¬æ¢å° idle ç¶æãéå¸¸æåµä¸ï¼idle_timeout çé»è®¤å¼æ¯ 300ç§ã\n\næ­¤å¤ï¼å·²ç»æ¥æ¶å° goaway ç channel å¨æ²¡ææ´»è·(active)ææèµ·(pending)ç rpcs æ¶ï¼ä¹åºå½è½¬æ¢å° idle ç¶æï¼ä»¥é¿åå°è¯æ­å¼è¿æ¥çæå¡å¨ä¸çè¿æ¥è¿è½½ã\n\n\n# shutdown:\n\næ è¯è¯¥ channel å·²ç»å¼å§å³é­ãä»»ä½æ°ç rpcs é½åºè¯¥ç«å³å¤±è´¥ãå¾å¤ç(pending)ç rpcs å¯è½ä¼ç»§ç»­è¿è¡ï¼ç´å°åºç¨ç¨åºåæ¶å®ä»¬ãchannel å¯è½ä¼å ä¸ºåºç¨ç¨åºæ¾å¼è¯·æ±å³é­ï¼æèå¨å°è¯è¿æ¥éä¿¡æé´åçäºä¸å¯æ¢å¤çéè¯¯èè¿å¥æ­¤ç¶æã(æªè³2015å¹´12æ6æ¥ï¼æ²¡æå·²ç¥çéè¯¯(è¿æ¥æéä¿¡æ¶)è¢«å½ç±»ä¸ºä¸å¯æ¢å¤çéè¯¯ã)\n\nä¸æ¦ channel è¿å¥ shutdown ç¶æï¼å°±ç»ä¸ä¼åç¦»å¼ãä¹å°±æ¯è¯´ï¼shutdown æ¯ç¶ææºçç»æã\n\n\n# ç¶æè½¬æ¢è¡¨\n\nä¸è¡¨ååºäºåæ³çç¶æè½¬æ¢åç¸å³åå ãç©ºçååè¡¨ç¤ºä¸åè®¸å¯¹åºçç¶æè½¬æ¢ã\n\nfrom/to             connecting                                                 ready                                                          transient_failure                                     idle                                                  shutdown\nconnecting          incremental progress during connection establishment       all steps needed to establish a connection succeeded           any failure in any of the steps needed to establish   no rpc activity on channel for idle_timeout           shutdown triggered by application.\n                                                                                                                                              connection\nready                                                                          incremental successful communication on established channel.   any failure encountered while expecting successful    no rpc activity on channel for idle_timeout or upon   shutdown triggered by application.\n                                                                                                                                              communication on established channel.                 receiving a goaway while there are no pending rpcs.\ntransient_failure   wait time required to implement (exponential) backoff is                                                                                                                                                                              shutdown triggered by application.\n                    over.\nidle                any new rpc activity on the channel                                                                                                                                                                                                   shutdown triggered by application.\nshutdown                                                                                                                                                                                                                                                  \n\n\n# channel state api\n\nææç grpc åºé½åºè¯¥æ´é²ä¸ä¸ª channel-level ç api æ¹æ³ä»¥è½®è¯¢ channel çå½åç¶æã\n\nå¨ c++ ä¸­, è¿ä¸ªæ¹æ³å« getstateï¼å®ä¼è¿åä¸ä¸ªæ è¯äºä¸ªåæ³ç¶æä¸­ä¸ä¸ªçæä¸¾å¼ãå¦æ channel å½åå¤äº idle ç¶æï¼å®è¿æ¥åå¸å°å¼ try_to_connect ä»¥è½¬æ¢ä¸º connectingãthe boolean should act as if an rpc occurred, so it should also reset idle_timeout. grpc_connectivity_state getstate(bool try_to_connect);\n\nææç grpc åºè¿åºè¯¥æ´é²ä¸ä¸ª api ä»¥å¨å½ channel ç¶æåçååæ¶ï¼åºç¨ç¨åº(ä½¿ç¨ grpc api çç¨æ·)å¯ä»¥å¾å°éç¥ãç±äºç¶ææ´æ¹å¯ä»¥å¿«éå¹¶ä¸ä¸ä»»ä½æ­¤ç±»éç¥ç«äºï¼å æ­¤éç¥åºè¯¥ä»éç¥ç¨æ·å·²ç»åçäºä¸äºç¶ææ¹åï¼å°å¶çç»ç¨æ·ä»¥è½®è¯¢è¯¥ééä»¥è·å¾å½åç¶æãå¼æ­¥çæ¬çè¿ä¸ª apiå¦ä¸ï¼ bool waitforstatechange(grpc_connectivity_state source_state, gpr_timespec deadline);\n\nå½ç¶æä¸æ¯ source_state æ¶è¿å trueï¼å¦ææªæ­¢æ¶é´å°æåè¿å falseãasynchronous- and futures-based çapiåºè¯¥æä¸ä¸ªç¸åºçæ¹æ³ï¼åè®¸å¨ééç¶æåçååæ¶éç¥åºç¨ç¨åºã\n\nè¯·æ³¨æï¼æ¯å½ä»ä»»ä½ç¶æè½¬æ¢å°ä»»ä½å¶ä»ç¶ææ¶ï¼é½ä¼åééç¥ã\n\nä¹å°±æ¯è¯´ï¼åæ³ç¶æè½¬æ¢çè§åè¦æ±ä» connecting è½¬æ¢å° transient_failure å¹¶è¿åå°æ¯ä¸ªå¯æ¢å¤æéç connectingï¼å³ä½¿ç¸åºçææ°éé¿å¨éè¯ä¹åä¸éè¦ç­å¾ãç»¼åæææ¯åºç¨ç¨åºå¯è½ä¼æ¶å°çä¼¼èåçç¶ææ´æ¹éç¥ãä¾å¦ï¼å¨ connecting ç¶æç channel ä¸ç­å¾ç¶æåæ´çåºç¨ç¨åºï¼å¯è½ä¼å¨æ¶å°ç¶ææ´æ¹éç¥ï¼ä½å¨è½®è¯¢å½åç¶ææ¶åç°å¶ä¾ç¶å¤äº connecting ç¶æï¼å ä¸ºè¯¥ channel å¯è½å¨ transient_failure ç¶æä¸è±è´¹äºæå°çæ¶é´ã",charsets:{cjk:!0}},{title:"grpc interceptor with go",frontmatter:{title:"grpc interceptor with go",date:"2020-04-13T00:00:00.000Z",lastmod:null,description:"grpc interceptor with go",categories:["network","grpc"],tags:[null],permalink:null},regularPath:"/blog/network/grpc/grpc_interceptor_with_go.html",relativePath:"blog/network/grpc/grpc_interceptor_with_go.md",key:"v-b9611c0e",path:"/blog/network/grpc/grpc_interceptor_with_go.html",headers:[{level:2,title:"Interceptor",slug:"interceptor",normalizedTitle:"interceptor",charIndex:31},{level:2,title:"grpc.stats",slug:"grpc-stats",normalizedTitle:"grpc.stats",charIndex:2100},{level:2,title:"Appendix A",slug:"appendix-a",normalizedTitle:"appendix a",charIndex:3689}],headersStr:"Interceptor grpc.stats Appendix A",content:"# grpc interceptor with go\n\n\n# Interceptor\n\néè¿ ServerOption ç» grpc.Server å¢å  interceptor æ¶æéå¶ï¼Only one unary interceptor can be installed.ãä¸ºäºå®è£å¤ä¸ªæ¦æªå¨ï¼æä»¬éè¦ä¸ç§å¯ä»¥å°å¤ä¸ª interceptor éæ°ç»åçæ¹å¼ã\n\nç®åå¸¸ç¨çæ¹å¼æ¯ï¼ package : github.com/grpc-ecosystem/go-grpc-middleware: func ChainUnaryClient(interceptors ...grpc.UnaryClientInterceptor) grpc.UnaryClientInterceptor func ChainUnaryServer(interceptors ...grpc.UnaryServerInterceptor) grpc.UnaryServerInterceptor ä½¿ç¨ç¤ºä¾è§ï¼enceladus.wgrpc.server\n\nä¸è¾¹æä»¬æ¥ççå®çå®ç°ï¼ ``` // Execution is done in left-to-right order, including passing of context. func ChainUnaryServer(interceptors ...grpc.UnaryServerInterceptor) grpc.UnaryServerInterceptor { n := len(interceptors)\n\n        if n > 1 {\n            lastI := n - 1\n            return func(ctx context.Context, req interface{}, info *grpc.UnaryServerInfo, handler grpc.UnaryHandler) (interface{}, error) {\n                var (\n                    chainHandler grpc.UnaryHandler\n                    curI         int\n                )\n\n                chainHandler = func(currentCtx context.Context, currentReq interface{}) (interface{}, error) {\n                    if curI == lastI {\n                        return handler(currentCtx, currentReq)\n                    }\n                    curI++\n                    resp, err := interceptors[curI](currentCtx, currentReq, info, chainHandler)\n                    curI--\n                    return resp, err\n                }\n\n                return interceptors[0](ctx, req, info, chainHandler)\n            }\n        }\n\n        if n == 1 {\n            return interceptors[0]\n        }\n\n        // n == 0; Dummy interceptor maintained for backward compatibility to avoid returning nil.\n        return func(ctx context.Context, req interface{}, _ *grpc.UnaryServerInfo, handler grpc.UnaryHandler) (interface{}, error) {\n            return handler(ctx, req)\n        }\n    }\n```\n\n\nå¶å®ï¼å®çå®ç°çæ¬è´¨å°±æ¯ï¼å©ç¨é­åæ¥å¼ç¨æ ä¸­æ°æ®è¾¾å°å»¶è¿ä½¿ç¨çææ\n\néè¿è¿ç§æ¹å¼ï¼æä»¬å°±å¯ä»¥å°½æçå®ç°èªå·±çåç§ interceptorï¼UnaryServerInterceptorAccessLogãgrpc_recovery.UnaryServerInterceptor(package: github.com/grpc-ecosystem/go-grpc-middleware/recovery) ç­ç­ã\n\n\n# grpc.stats\n\ngrpc.Server å¯ä»¥éè¿å®è£ func WithStatsHandler(h stats.Handler) DialOption çæç ServerOption å®ç° This package is for monitoring purpose only. All fields are read-only.\n\né¦åï¼æä»¬çç stats.Handler çå®ä¹:\n\n    type Handler interface {\n        // TagRPC can attach some information to the given context.\n        // The context used for the rest lifetime of the RPC will be derived from\n        // the returned context.\n        TagRPC(context.Context, *RPCTagInfo) context.Context\n        // HandleRPC processes the RPC stats.\n        HandleRPC(context.Context, RPCStats)\n\n        // TagConn can attach some information to the given context.\n        // The returned context will be used for stats handling.\n        // For conn stats handling, the context used in HandleConn for this\n        // connection will be derived from the context returned.\n        // For RPC stats handling,\n        //  - On server side, the context used in HandleRPC for all RPCs on this\n        // connection will be derived from the context returned.\n        //  - On client side, the context is not derived from the context returned.\n        TagConn(context.Context, *ConnTagInfo) context.Context\n        // HandleConn processes the Conn stats.\n        HandleConn(context.Context, ConnStats)\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n\n\nå¨ grpc çæ¹æ³è°ç¨è¿ç¨ä¸­ï¼RPCStats å¨ stat.Beginãstat.ConnBeginãstat.ConnEndãstat.End å ä¸ªç¶æä¹é´è½¬æ¢ã\n\nå¶ä¸­ Handler.HandleConn åçå¨ grpc çæ¹æ³è°ç¨ä¹åï¼è grpcæ¹æ³è°ç¨åï¼ä¼è°ç¨ Handler.HandleRPC (æ­¤æ¶ RPCStats ä¸º stat.End)ãç±æ­¤ï¼æä»¬å¯ä»¥éè¿è¿ç§æ¹å¼ï¼è¾¾å°å¯¹ grpc æ¹æ³ è£é¥°çææãå¦ï¼github.com/openzipkin/zipkin-go çå®ç°ï¼ä½¿ç¨ç¤ºä¾ï¼\n\n\n# Appendix A\n\n 1. gRPC server ç go å®ç°çæ®µ",normalizedContent:"# grpc interceptor with go\n\n\n# interceptor\n\néè¿ serveroption ç» grpc.server å¢å  interceptor æ¶æéå¶ï¼only one unary interceptor can be installed.ãä¸ºäºå®è£å¤ä¸ªæ¦æªå¨ï¼æä»¬éè¦ä¸ç§å¯ä»¥å°å¤ä¸ª interceptor éæ°ç»åçæ¹å¼ã\n\nç®åå¸¸ç¨çæ¹å¼æ¯ï¼ package : github.com/grpc-ecosystem/go-grpc-middleware: func chainunaryclient(interceptors ...grpc.unaryclientinterceptor) grpc.unaryclientinterceptor func chainunaryserver(interceptors ...grpc.unaryserverinterceptor) grpc.unaryserverinterceptor ä½¿ç¨ç¤ºä¾è§ï¼enceladus.wgrpc.server\n\nä¸è¾¹æä»¬æ¥ççå®çå®ç°ï¼ ``` // execution is done in left-to-right order, including passing of context. func chainunaryserver(interceptors ...grpc.unaryserverinterceptor) grpc.unaryserverinterceptor { n := len(interceptors)\n\n        if n > 1 {\n            lasti := n - 1\n            return func(ctx context.context, req interface{}, info *grpc.unaryserverinfo, handler grpc.unaryhandler) (interface{}, error) {\n                var (\n                    chainhandler grpc.unaryhandler\n                    curi         int\n                )\n\n                chainhandler = func(currentctx context.context, currentreq interface{}) (interface{}, error) {\n                    if curi == lasti {\n                        return handler(currentctx, currentreq)\n                    }\n                    curi++\n                    resp, err := interceptors[curi](currentctx, currentreq, info, chainhandler)\n                    curi--\n                    return resp, err\n                }\n\n                return interceptors[0](ctx, req, info, chainhandler)\n            }\n        }\n\n        if n == 1 {\n            return interceptors[0]\n        }\n\n        // n == 0; dummy interceptor maintained for backward compatibility to avoid returning nil.\n        return func(ctx context.context, req interface{}, _ *grpc.unaryserverinfo, handler grpc.unaryhandler) (interface{}, error) {\n            return handler(ctx, req)\n        }\n    }\n```\n\n\nå¶å®ï¼å®çå®ç°çæ¬è´¨å°±æ¯ï¼å©ç¨é­åæ¥å¼ç¨æ ä¸­æ°æ®è¾¾å°å»¶è¿ä½¿ç¨çææ\n\néè¿è¿ç§æ¹å¼ï¼æä»¬å°±å¯ä»¥å°½æçå®ç°èªå·±çåç§ interceptorï¼unaryserverinterceptoraccesslogãgrpc_recovery.unaryserverinterceptor(package: github.com/grpc-ecosystem/go-grpc-middleware/recovery) ç­ç­ã\n\n\n# grpc.stats\n\ngrpc.server å¯ä»¥éè¿å®è£ func withstatshandler(h stats.handler) dialoption çæç serveroption å®ç° this package is for monitoring purpose only. all fields are read-only.\n\né¦åï¼æä»¬çç stats.handler çå®ä¹:\n\n    type handler interface {\n        // tagrpc can attach some information to the given context.\n        // the context used for the rest lifetime of the rpc will be derived from\n        // the returned context.\n        tagrpc(context.context, *rpctaginfo) context.context\n        // handlerpc processes the rpc stats.\n        handlerpc(context.context, rpcstats)\n\n        // tagconn can attach some information to the given context.\n        // the returned context will be used for stats handling.\n        // for conn stats handling, the context used in handleconn for this\n        // connection will be derived from the context returned.\n        // for rpc stats handling,\n        //  - on server side, the context used in handlerpc for all rpcs on this\n        // connection will be derived from the context returned.\n        //  - on client side, the context is not derived from the context returned.\n        tagconn(context.context, *conntaginfo) context.context\n        // handleconn processes the conn stats.\n        handleconn(context.context, connstats)\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n\n\nå¨ grpc çæ¹æ³è°ç¨è¿ç¨ä¸­ï¼rpcstats å¨ stat.beginãstat.connbeginãstat.connendãstat.end å ä¸ªç¶æä¹é´è½¬æ¢ã\n\nå¶ä¸­ handler.handleconn åçå¨ grpc çæ¹æ³è°ç¨ä¹åï¼è grpcæ¹æ³è°ç¨åï¼ä¼è°ç¨ handler.handlerpc (æ­¤æ¶ rpcstats ä¸º stat.end)ãç±æ­¤ï¼æä»¬å¯ä»¥éè¿è¿ç§æ¹å¼ï¼è¾¾å°å¯¹ grpc æ¹æ³ è£é¥°çææãå¦ï¼github.com/openzipkin/zipkin-go çå®ç°ï¼ä½¿ç¨ç¤ºä¾ï¼\n\n\n# appendix a\n\n 1. grpc server ç go å®ç°çæ®µ",charsets:{cjk:!0}},{title:"gRPC over HTTP2",frontmatter:{title:"gRPC over HTTP2",date:"2020-04-13T00:00:00.000Z",lastmod:null,description:"gRPC over HTTP2",categories:["network","grpc"],tags:[null],permalink:null},regularPath:"/blog/network/grpc/grpc_over_http2.html",relativePath:"blog/network/grpc/grpc_over_http2.md",key:"v-e4b92d82",path:"/blog/network/grpc/grpc_over_http2.html",headers:[{level:2,title:"ä»ç»",slug:"ä»ç»",normalizedTitle:"ä»ç»",charIndex:91},{level:2,title:"å¤§çº²",slug:"å¤§çº²",normalizedTitle:"å¤§çº²",charIndex:132},{level:2,title:"Requests",slug:"requests",normalizedTitle:"requests",charIndex:309},{level:3,title:"Request-Headers",slug:"request-headers",normalizedTitle:"request-headers",charIndex:177},{level:3,title:"Length-Prefixed-Message",slug:"length-prefixed-message",normalizedTitle:"length-prefixed-message",charIndex:194},{level:3,title:"EOS(end-of-stream)",slug:"eos-end-of-stream",normalizedTitle:"eos(end-of-stream)",charIndex:4255},{level:2,title:"Responses",slug:"responses",normalizedTitle:"responses",charIndex:4415},{level:3,title:"Response-Headers",slug:"response-headers",normalizedTitle:"response-headers",charIndex:237},{level:2,title:"Example",slug:"example",normalizedTitle:"example",charIndex:5855},{level:3,title:"Request",slug:"request",normalizedTitle:"request",charIndex:167},{level:3,title:"Response",slug:"response",normalizedTitle:"response",charIndex:225},{level:2,title:"User Agents",slug:"user-agents",normalizedTitle:"user agents",charIndex:6633},{level:2,title:"å¹ç­æ§ å éè¯",slug:"å¹ç­æ§-å-éè¯",normalizedTitle:"å¹ç­æ§ å éè¯",charIndex:6982},{level:2,title:"HTTP2 Transport Mapping",slug:"http2-transport-mapping",normalizedTitle:"http2 transport mapping",charIndex:7089},{level:3,title:"Stream Identification",slug:"stream-identification",normalizedTitle:"stream identification",charIndex:7117},{level:3,title:"Data Frames",slug:"data-frames",normalizedTitle:"data frames",charIndex:7268},{level:3,title:"Errors",slug:"errors",normalizedTitle:"errors",charIndex:7342},{level:3,title:"Security",slug:"security",normalizedTitle:"security",charIndex:7535},{level:2,title:"Connection Management",slug:"connection-management",normalizedTitle:"connection management",charIndex:7681},{level:3,title:"GOAWAY Frame",slug:"goaway-frame",normalizedTitle:"goaway frame",charIndex:7707},{level:3,title:"PING Frame",slug:"ping-frame",normalizedTitle:"ping frame",charIndex:7990},{level:3,title:"Connection failure",slug:"connection-failure",normalizedTitle:"connection failure",charIndex:8265},{level:2,title:"Appendix A - GRPC for Protobuf",slug:"appendix-a-grpc-for-protobuf",normalizedTitle:"appendix a - grpc for protobuf",charIndex:8360}],headersStr:"ä»ç» å¤§çº² Requests Request-Headers Length-Prefixed-Message EOS(end-of-stream) Responses Response-Headers Example Request Response User Agents å¹ç­æ§ å éè¯ HTTP2 Transport Mapping Stream Identification Data Frames Errors Security Connection Management GOAWAY Frame PING Frame Connection failure Appendix A - GRPC for Protobuf",content:'# gRPC over HTTP2\n\n> åæï¼https://github.com/grpc/grpc/blob/master/doc/PROTOCOL-HTTP2.md\n\n\n# ä»ç»\n\næ¬æä¸»è¦æè¿° grpc åºäº http2 framing çå®ç°\n\n\n# å¤§çº²\n\nä¸è¿°æ¯å¨ä¸æ¬¡grpcè¯·æ±ååºç­ééç¨çæ¶æ¯åå­ç»æ:\n\n * Request â Request-Headers *Length-Prefixed-Message EOS\n * Response â (Response-Headers *Length-Prefixed-Message Trailers) / Trailers-Only\n\n\n# Requests\n\n * Request â Request-Headers *Length-Prefixed-Message EOS\n\n\n# Request-Headers\n\nRequest-Headers è¢«å½ä½ç¨ http2 headersï¼éè¿ HEADERS + CONTINUATION å¸§æ¥ä¼ è¾\n\n * Request-Headers â Call-Definition *Custom-Metadata\n   * Call-Definition â Method Scheme Path TE [Authority] [Timeout] Content-Type [Message-Type] [Message-Encoding] [Message-Accept-Encoding] [User-Agent]\n     * Method â ":method POST"\n     * Scheme â ":scheme " ("http" / "https")\n     * Path â ":path" "/" Service-Name "/" {method name} # But see note below.\n       * Service-Name â {IDL-specific service name}\n     * Authority â ":authority" {virtual host name of authority}\n     * TE â "te" "trailers" # Used to detect incompatible proxies\n     * Timeout â "grpc-timeout" TimeoutValue TimeoutUnit\n     * TimeoutValue â {positive integer as ASCII string of at most 8 digits}\n     * TimeoutUnit â Hour / Minute / Second / Millisecond / Microsecond / Nanosecond\n       * Hour â "H"\n       * Minute â "M"\n       * Second â "S"\n       * Millisecond â "m"\n       * Microsecond â "u"\n       * Nanosecond â "n"\n     * Content-Type â "content-type" "application/grpc" [("+proto" / "+json" / {custom})]\n     * Content-Coding â "identity" / "gzip" / "deflate" / "snappy" / {custom}\n     * Message-Encoding â "grpc-encoding" Content-Coding\n     * Message-Accept-Encoding â "grpc-accept-encoding" Content-Coding *("," Content-Coding)\n     * User-Agent â "user-agent" {structured user-agent string}\n     * Message-Type â "grpc-message-type" {type name for message schema}\n   * Custom-Metadata â Binary-Header / ASCII-Header\n     * Binary-Header â {Header-Name "-bin" } {base64 encoded value}\n     * ASCII-Header â Header-Name ASCII-Value\n     * Header-Name â 1*( %x30-39 / %x61-7A / "_" / "-" / ".") ; 0-9 a-z _ - .\n     * ASCII-Value â 1*( %x20-%x7E ) ; space and printable ASCII\n\nHTTP2 åè®®è¦æ± reserved headers (ä»¥ ":" å¼å¤´ç header) å¿é¡»åºç°å¨å¶ä» headers ä¹åãæ­¤å¤ï¼è¿è¦æ± Timeout å¤´å¿é¡»ç´§è·å¨ reserved headers ä¹åè¢«åéãè¿æå°±æ¯ï¼Call-Definition éè¦å¨åé Custom-Metadata ä¹ååéã\n\nä¸äº gRPC çå®ç°å¯è½ä¼åè®¸ä¸é¢ç Path æ ¼å¼è¢«è¦çï¼ä½æ¯è¿æ ·çåè½æ¯å¼ºçä¸æ¨èçãgRPC ä¸ä¼ç¹æçå»é»æ­¢ç¨æ·ä½¿ç¨ Path æ ¼å¼è¦çè¿ä¸ªåè½, ä½æä»¬ç»ä¸ä¼ä¸»å¨çæ¯æå®ï¼å¦å¤å°±æ¯å½ PATH çæ ¼å¼ä¸æ¯ä¸è¿°é£æ ·çè¯, ä¸äºåè½(å¦ï¼service config support)å¯è½ä¼ä¸è½æ­£å¸¸å·¥ä½ã\n\nå¨ Timeout è¢«ç¼ºçæ¶, æå¡ç«¯åºå½åå® Timeout æ¯æ ç©·å¤§çãå®¢æ·ç«¯å®ç°å¯ä»¥æ ¹æ®å¶é¨ç½²è¦æ±èªç±åéé»è®¤çæå°è¶æ¶æ¶é´ã\n\nå¦æ Content-Type ä¸æ¯ä»¥ "application/grpc" å¼å¤´æ¶, gRPC æå¡ç«¯åºå½ä»¥ HTTP ç¶æç  415 (Unsupported Media Type) è¿è¡åºç­ãè¿æ ·, è½é»æ­ HTTP/2 çå®¢æ·ç«¯(ä»¥ç¶æç 200æ è¯æå)è§£æä¸ä¸ª gRPC éè¯¯ã\n\nCustom-Metadata æ¯ä¸ç³»åç±åºç¨å±å®ä¹ç key-value é®å¼å¯¹ç»æçéåãåºç¨ç¨åºä¸è½ä½¿ç¨ä»¥ "grpc-" å¼å¤´ç Header åä½ä¸º Custom-Metadata ç key, å ä¸ºä»¥ "grpc-" å¼å¤´ç Header åè¢«ç¨äºé¢ççå¨æªæ¥ç» GRPC ä½¿ç¨ã\n\næ³¨æï¼å ä¸º HTTP2 ä¸åè®¸äºè¿å¶åºåä½ä¸º header çå¼ï¼æä»¥äºè¿å¶ç header å¼å¿é¡»ä½¿ç¨ Base64 ç¼ç ãå®ç°æ¶å¿é¡»å¯ä»¥æ¥æ¶ padded å un-padded çå¼ï¼åé un-padded çå¼ãåºç¨ç¨åºå®ä¹çäºè¿å¶ header åéè¦ä»¥ "-bin" ä¸ºåç¼ãè¿è¡åºå¯ä»¥ä½¿ç¨è¿ä¸ªåç¼æ£æµåºäºè¿å¶ç headersï¼ç¶åå¨åéåæ¥æ¶æ¶ä½¿ç¨ base64 è¿è¡å è§£å¯ã\n\nCustom-Metadata ä¸è½ä¿è¯ header çé¡ºåºé¤éæéå¤ç header åãå½æéå¤ç header åæ¶ï¼å¨è¯­ä¹ä¸ç­ä»·äºå°ä»ä»¬çå¼ä»¥ "," ä½ä¸ºåéç¬¦æ¼æ¥èµ·æ¥ãæä»¥ï¼å®ç°æ¶éè¦æ³¨æï¼å¯¹äº äºè¿å¶ç±»åç headerï¼éè¦åç¨ "," è¿è¡åå²ï¼ç¶ååç¨ base64 è¿è¡è§£å¯å¤çã\n\nCustom-Metadata ç ASCII ç±»åçå¼ï¼ä¸è½æç©ºæ ¼åååç¼ï¼å¦ææçè¯ï¼ä¼è¢«å¥ç¦»æãå¦å¤ï¼è¿éå¯ä»¥ä½¿ç¨ç ASCII å­ç¬¦èå´æ¯ HTTP æ´å ä¸¥æ ¼ãå®ç°æ¶ï¼ä¸è½å ä¸ºæ¥æ¶å°å¨ HTTP ææä½å¨ Custom-Metadata ä¸­æ æç ASCII å­ç¬¦èåºéï¼ä½æ¯å´æ²¡æä¸¥æ ¼å®ä¹å·ä½çè¡ä¸ºï¼å¯ä»¥æå¼ä¹å¯ä»¥æ¥åè¿ä¸ªå¼ãå¦æè¢«æ¥åï¼å¿é¡»æ³¨æç¡®ä¿åè®¸åºç¨ç¨åºå°å¼ä½ä¸ºåæ°æ®åæ¾ãä¾å¦ï¼å¦æè¿ä¸ªåæ°æ®è¢«å½ä½ä¸ä¸ªåè¡¨å¨ä¸ä¸ªè¯·æ±ä¸­ä¼ éç»åºç¨ç¨åºï¼é£ä¹å¦æåºç¨ç¨åºæè¿ä¸ªåæ°æ®æ¾å¨åºç­ä¸­æ¶ä¸åºå¼åä¸ä¸ªéè¯¯ã\n\næå¡ç«¯å¯ä»¥éå¶ Request-Headers çå¤§å°ï¼å»ºè®®é»è®¤ 8kbãå»ºè®®å®ç°æ¶è®¡ç® header çæ»å¤§å°ï¼å HTTP/2 ç SETTINGS_MAX_HEADER_LIST_SIZE é£æ ·ï¼the sum of all header fields, for each field the sum of the uncompressed field name and value lengths plus 32, with binary values\' lengths being post-Base64.\n\n\n# Length-Prefixed-Message\n\nä¸ä¸ª Request ä¸­å¯ä»¥æå¤ä¸ª Length-Prefixed-Message æ°æ®ï¼å®ä»¬éè¿ http2 ç DATA å¸§è¿è¡ä¼ è¾ã\n\n * Length-Prefixed-Message â Compressed-Flag Message-Length Message\n   * Compressed-Flag â 0 / 1 # encoded as 1 byte unsigned integer\n   * Message-Length â {length of Message} # encoded as 4 byte unsigned integer (big endian)\n   * Message â *{binary octet}\n\nå½ Compressed-Flag å¼ä¸º1æ¶ï¼æ è¯çäºè¿å¶ç Message æ¯ä½¿ç¨ Message-Encoding å¤´ä¸­å£°æçæ¹å¼åç¼©è¿çãå¼ä¸º0æ¶,æå³çæ²¡æè¢«åç¼©ã å¦æ Message-Encoding å¤´ç¼ºççæåµä¸ï¼Compressed-Flag å¼å¿é¡»ä¸º0ãåç¼©çä¸ä¸æä¿¡æ¯ä¸ä¼å¨è·¨è¶ message è¾¹çæ¶ä¾ç¶è¢«ç»´æ¤ï¼æä»¥ï¼å®ç°æ¶å¿é¡»ä¸ºæµä¸­çæ¯ä¸ä¸ª message åå»ºä¸ä¸ªæ°çä¸ä¸æã\n\n\n# EOS(end-of-stream)\n\nå¯¹äºè¯·æ±æ¥è¯´ï¼EOS (end-of-stream) éè¿æ¥æ¶å°çæåä¸ä¸ª DATA å¸§ä¸­ç END_STREAM æ è®°æ¥æ è¯çãå¨ Request éè¦è¢«å³é­ä½æ¯åæ²¡ææ°æ®éè¦åéçæåµä¸ï¼gRPCçå®ç°å¿é¡»åéä¸ä¸ªåå« END_STREAM æ è®°çç©º DATA å¸§ã\n\n\n# Responses\n\n * Response â (Response-Headers *Length-Prefixed-Message Trailers) / Trailers-Only\n\n\n# Response-Headers\n\n * Response-Headers â HTTP-Status [Message-Encoding] [Message-Accept-Encoding] Content-Type *Custom-Metadata\n * Trailers-Only â HTTP-Status Content-Type Trailers\n * Trailers â Status [Status-Message] *Custom-Metadata\n   * Status â "grpc-status" 1*DIGIT ; 0-9\n   * Status-Message â "grpc-message" Percent-Encoded\n     * Percent-Encoded â 1*(Percent-Byte-Unencoded / Percent-Byte-Encoded)\n       * Percent-Byte-Unencoded â 1*( %x20-%x24 / %x26-%x7E ) ; space and VCHAR, except %\n       * Percent-Byte-Encoded â "%" 2HEXDIGIT ; 0-9 A-F\n   * HTTP-Status â ":status 200"\n\nResponse-Headers å Trailers-Only é½æ¯éè¿ä¸ä¸ªç¬ç«ç HTTP2 HEADERS å¸§åè¿è¡ä¼ è¾ãå¤§å¤æ°ç responses é½åºè¯¥æ¢æ headers åæ trailersï¼ä½æ¯ Trailers-Only å½å¨éè¦äº§çä¸ä¸ªå³æ¶éè¯¯æ¶æ¯è¢«åè®¸çãå¦å¤ï¼Status ä¿¡æ¯å¿é¡»å¨ Trailers ä¸­ï¼å³ä½¿ status code æ¯ OK.\n\nå¯¹äº responses æ¥è¯´ï¼end-of-stream æ¯éè¿æåä¸ä¸ªä¼ è¾ Trailers ç HEADERS å¸§ç END_STREAM æ è®°æ¥æ ç¤ºçã\n\nå®ç°æ¶åºå½ææ broken deployments å¨ååºä¸­åé é200 ç HTTPç¶æä»£ç ä»¥ååç§éGRPCåå®¹ç±»åå¹¶ä¸çç¥ç¶æåç¶ææ¶æ¯ãå½è¿ç§æåµåçæ¶ï¼å®ç°æ¶å¿é¡»åæä¸ä¸ª Status & Status-Message ä»¥ä¼ æ­ç»åºç¨å±\n\nå®¢æ·ç«¯åºå½éå¶ Response-Headers, Trailers, æ Trailers-Only çå¤§å°ï¼ä¸è¬æ¨èä¸è¿°å¯¹è±¡çå¤§å°éå¶é½æ¯ 8Kb\n\nStatus çå¼é¨åæ¯åè¿å¶ç¼ç çæ´æ°ï¼ä½ä¸ºASCIIå­ç¬¦ä¸²ï¼æ²¡æä»»ä½åå¯¼é¶\n\nStatus-Message çå¼é¨åçè®ºä¸åºå½æ¯ä¸ä¸ªæè¿°éè¯¯ç Unicode å­ç¬¦ä¸²ï¼å®éä¸å¤ç¨ UTF-8 è·çæ¯ url ç¼ç (percent-encoding)ãå½è§£ç æ æå¼æ¶ï¼è¯¥å®ç°ä¸å®ä¸è½æåºéè¯¯ æè ä¸¢å¼è¿ä¸ª messageãæåæåµï¼å°±æ¯ç»æ­¢è§£ç è¿ä¸ª Status-Messageï¼è¿æ ·ç¨æ·å¯ä»¥æ¥æ¶å°åå§ç url ç¼ç æ ¼å¼æ°æ®ãæèï¼è¯¥å®ç°å¯ä»¥è§£ç ææé¨åï¼åæ¶ä¿çæåçï¼ - ç¼ç ï¼æèç¨æ¿æ¢å­ç¬¦(ä¾å¦ï¼\'ï¼\'æUnicodeæ¿æ¢å­ç¬¦)æ¿æ¢å®ä»¬ã\n\n\n# Example\n\nä»¥ä¸ä»¥ unary-call ä¸ºä¾å±ç¤º HTTP2 çå¸§åºå\n\n\n# Request\n\n    HEADERS (flags = END_HEADERS)\n    :method = POST\n    :scheme = http\n    :path = /google.pubsub.v2.PublisherService/CreateTopic\n    :authority = pubsub.googleapis.com\n    grpc-timeout = 1S\n    content-type = application/grpc+proto\n    grpc-encoding = gzip\n    authorization = Bearer y235.wef315yfh138vh31hv93hv8h3v\n\n    DATA (flags = END_STREAM)\n    <Length-Prefixed Message>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# Response\n\n    HEADERS (flags = END_HEADERS)\n    :status = 200\n    grpc-encoding = gzip\n    content-type = application/grpc+proto\n\n    DATA\n    <Length-Prefixed Message>\n\n    HEADERS (flags = END_STREAM, END_HEADERS)\n    grpc-status = 0 # OK\n    trace-proto-bin = jher831yy13JHy3hc\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n\n# User Agents\n\nè½ç¶åè®®ä¸è¦æ±ç¨æ·ä»£çæ¥è¿è¡ï¼ä½å»ºè®®å®¢æ·ç«¯æä¾ç»æåçç¨æ·ä»£çå­ç¬¦ä¸²ï¼è¯¥å­ç¬¦ä¸²æä¾äºè°ç¨åºãçæ¬åå¹³å°çåºæ¬æè¿°ï¼ä»¥ä¾¿å¨å¼æç¯å¢ä¸­è¿è¡é®é¢è¯æ­ãå»ºè®®åºå¼åäººåä½¿ç¨ä»¥ä¸ç»æ: User-Agent â "grpc-" Language ?("-" Variant) "/" Version ?( " (" *(AdditionalProperty ";") ")" ) E.g.\n\n    grpc-java/1.2.3\n    grpc-ruby/1.2.3\n    grpc-ruby-jruby/1.3.4\n    grpc-java-android/0.9.1 (gingerbread/1.2.4; nexus5; tmobile)\n\n\n1\n2\n3\n4\n\n\n\n# å¹ç­æ§ å éè¯\n\né¤éè¢«æ¾ç¤ºçå®ä½, ä¸ç¶ gRPC è°ç¨ä¸åºè¢«åè®¾ä¸ºå¹ç­ç. ç¹å«å°:\n\n * æ æ³éªè¯å·²å¯å¨çè°ç¨å°ä¸ä¼éè¯\n * æ²¡æéå¤æå¶æºå¶ï¼å ä¸ºæ²¡æå¿è¦\n * æ è®°ä¸ºå¹ç­çå¼å«å¯ä»¥å¤æ¬¡åé\n\n\n# HTTP2 Transport Mapping\n\n\n# Stream Identification\n\nææ GRPC è°ç¨é½éè¦æå®ä¸ä¸ªåé¨IDãæä»¬å°å¨æ­¤æ¹æ¡ä¸­ä½¿ç¨ HTTP2 stream-id ä½ä¸ºè°ç¨æ è¯ç¬¦ãæ³¨æï¼è¿äº ID æ¯å·²æå¼ HTTP2 ä¼è¯çä¸ä¸æï¼å¹¶ä¸ï¼å¨å¤çå¤ä¸ª HTTP2 ä¼è¯çç»å®è¿ç¨ä¸­ä¸æ¯å¯ä¸çï¼ä¹ä¸è½ç¨ä½GUIDã\n\n\n# Data Frames\n\nDATA å¸§è¾¹çä¸ Length-Prefixed-Message è¾¹çæ å³ï¼å¹¶ä¸å®ç°ä¸åºå¯¹å¶å¯¹é½ååºä»»ä½åè®¾ã\n\n\n# Errors\n\nå¨ RPC æé´åçåºç¨ç¨åºæè¿è¡æ¶éè¯¯æ¶ï¼å°å¨ Trailers ä¸­ä¼ é Status å Status-Messageã\n\nå¨æäºæåµä¸ï¼æ¶æ¯æµçå¸§å¯è½å·²æåï¼RPC è¿è¡æ¶å°éæ©ä½¿ç¨ RST_STREAM å¸§åå¶å¯¹ç­æ¹æç¤ºæ­¤ç¶æãRPCè¿è¡æ¶å®ç°åºè¯¥å° RST_STREAM è§£éä¸ºæµçç«å³ full-closureï¼å¹¶ä¸åºè¯¥å°éè¯¯ä¼ æ­å°è°ç¨åºç¨ç¨åºå±ã\n\n\n# Security\n\nå½ TLS ä¸ HTTP2 ä¸èµ·ä½¿ç¨æ¶ï¼HTTP2 è§èè¦æ±ä½¿ç¨ TLS 1.2 ææ´é«çæ¬ãå®è¿å¯¹é¨ç½²ä¸­åè®¸çå¯ç æ½å äºä¸äºé¢å¤çéå¶ï¼ä»¥é¿åå·²ç¥é®é¢ä»¥åéè¦SNIæ¯æãå¦å¤ï¼é¢è®¡ HTTP2 å°ä¸ä¸æä¼ è¾å®å¨æºå¶ç»åä½¿ç¨ï¼æ­¤æ¶è§èä¸è½å¯¹å¶æåºä»»ä½ææä¹çå»ºè®®\n\n\n# Connection Management\n\n\n# GOAWAY Frame\n\nç± servers åéç» clients ç¨äºæ è¯ servers ä¸åå¨ç¸å³çè¿æ¥ä¸æ¥æ¶ä»»ä½æ°ç streamãè¿ä¸ªå¸§åå«äº server æåæ¥æ¶çæåä¸ä¸ª stream idãclients åºè¯¥è®¤ä¸ºæåä¸ä¸ªè¢« server æåæ¥æ¶ç stream ä¹åçä»»ä½ stream é½æ¯ UNAVAILABLEï¼åºå½å¨å¶ä»å°æ¹è¿è¡éè¯ãclients å¯ä»¥ç»§ç»­å¤çå·²æ¥åçæµï¼ç´å°å®ä»¬å®ææè¿æ¥ç»æ­¢ã\n\nservers åºå½å¨ç»æ­¢è¿æ¥ååé GOAWAY å¸§ï¼ä»¥å¯é å°éç¥ clients åªäºå·¥ä½å·²è¢«æå¡å¨æ¥åå¹¶æ­£å¨æ§è¡ã\n\n\n# PING Frame\n\nclients å servers é½å¯ä»¥åé PING å¸§ï¼å¯¹ç«¯å¿é¡»ä»¥å®æ¥æ¶å°çåå®¹è¿è¡åå¤ãå®è¢«ç¨æ¥æ­å®è¿æ¥ä¾ç¶å­æ´»ï¼å¹¶æä¾äºä¸ç§è¯ä¼° end-to-end å»¶è¿çæ¹æ³ãå¦æ servers å¯å¨ç PING æªå¨è¿è¡æ¶ææçæªæ­¢æéåæ¶å°ååºï¼åæå¡å¨ä¸çæææªå®æè°ç¨å°ä»¥ CANCELED ç¶æå³é­ãå¦æ clients å¯å¨ç PING è¶æ¶æªæ¶å°ååºæ¶ï¼å°å¯¼è´ææè°ç¨ä»¥ UNAVAILABLE ç¶æå³é­ãè¯·æ³¨æï¼PING çé¢çé«åº¦ä¾èµäºç½ç»ç¯å¢ï¼å®ç°å¯ä»¥æ ¹æ®ç½ç»ååºç¨è¦æ±èªç±è°æ´ PING é¢çã\n\n\n# Connection failure\n\nå¦æå®¢æ·ç«¯ä¸åçå¯æ£æµçè¿æ¥æéï¼åå°ä»¥ UNAVAILABLE ç¶æå³é­ææè°ç¨ãå¯¹äºæå¡å¨ï¼å°ä»¥ CANCELED ç¶æå³é­æå¼çè°ç¨ã\n\n\n# Appendix A - GRPC for Protobuf\n\n 1. protobuf å£°æçæå¡æ¥å£å¾å®¹æéè¿ protoc çä»£ç çææ©å±æ å°å° GRPC ä¸ãä»¥ä¸å®ä¹è¦ä½¿ç¨çæ å°ã\n    * Service-Name â ?( {proto package name} "." ) {service name}\n    * Message-Type â {fully qualified proto message name}\n    * Content-Type â "application/grpc+proto"',normalizedContent:'# grpc over http2\n\n> åæï¼https://github.com/grpc/grpc/blob/master/doc/protocol-http2.md\n\n\n# ä»ç»\n\næ¬æä¸»è¦æè¿° grpc åºäº http2 framing çå®ç°\n\n\n# å¤§çº²\n\nä¸è¿°æ¯å¨ä¸æ¬¡grpcè¯·æ±ååºç­ééç¨çæ¶æ¯åå­ç»æ:\n\n * request â request-headers *length-prefixed-message eos\n * response â (response-headers *length-prefixed-message trailers) / trailers-only\n\n\n# requests\n\n * request â request-headers *length-prefixed-message eos\n\n\n# request-headers\n\nrequest-headers è¢«å½ä½ç¨ http2 headersï¼éè¿ headers + continuation å¸§æ¥ä¼ è¾\n\n * request-headers â call-definition *custom-metadata\n   * call-definition â method scheme path te [authority] [timeout] content-type [message-type] [message-encoding] [message-accept-encoding] [user-agent]\n     * method â ":method post"\n     * scheme â ":scheme " ("http" / "https")\n     * path â ":path" "/" service-name "/" {method name} # but see note below.\n       * service-name â {idl-specific service name}\n     * authority â ":authority" {virtual host name of authority}\n     * te â "te" "trailers" # used to detect incompatible proxies\n     * timeout â "grpc-timeout" timeoutvalue timeoutunit\n     * timeoutvalue â {positive integer as ascii string of at most 8 digits}\n     * timeoutunit â hour / minute / second / millisecond / microsecond / nanosecond\n       * hour â "h"\n       * minute â "m"\n       * second â "s"\n       * millisecond â "m"\n       * microsecond â "u"\n       * nanosecond â "n"\n     * content-type â "content-type" "application/grpc" [("+proto" / "+json" / {custom})]\n     * content-coding â "identity" / "gzip" / "deflate" / "snappy" / {custom}\n     * message-encoding â "grpc-encoding" content-coding\n     * message-accept-encoding â "grpc-accept-encoding" content-coding *("," content-coding)\n     * user-agent â "user-agent" {structured user-agent string}\n     * message-type â "grpc-message-type" {type name for message schema}\n   * custom-metadata â binary-header / ascii-header\n     * binary-header â {header-name "-bin" } {base64 encoded value}\n     * ascii-header â header-name ascii-value\n     * header-name â 1*( %x30-39 / %x61-7a / "_" / "-" / ".") ; 0-9 a-z _ - .\n     * ascii-value â 1*( %x20-%x7e ) ; space and printable ascii\n\nhttp2 åè®®è¦æ± reserved headers (ä»¥ ":" å¼å¤´ç header) å¿é¡»åºç°å¨å¶ä» headers ä¹åãæ­¤å¤ï¼è¿è¦æ± timeout å¤´å¿é¡»ç´§è·å¨ reserved headers ä¹åè¢«åéãè¿æå°±æ¯ï¼call-definition éè¦å¨åé custom-metadata ä¹ååéã\n\nä¸äº grpc çå®ç°å¯è½ä¼åè®¸ä¸é¢ç path æ ¼å¼è¢«è¦çï¼ä½æ¯è¿æ ·çåè½æ¯å¼ºçä¸æ¨èçãgrpc ä¸ä¼ç¹æçå»é»æ­¢ç¨æ·ä½¿ç¨ path æ ¼å¼è¦çè¿ä¸ªåè½, ä½æä»¬ç»ä¸ä¼ä¸»å¨çæ¯æå®ï¼å¦å¤å°±æ¯å½ path çæ ¼å¼ä¸æ¯ä¸è¿°é£æ ·çè¯, ä¸äºåè½(å¦ï¼service config support)å¯è½ä¼ä¸è½æ­£å¸¸å·¥ä½ã\n\nå¨ timeout è¢«ç¼ºçæ¶, æå¡ç«¯åºå½åå® timeout æ¯æ ç©·å¤§çãå®¢æ·ç«¯å®ç°å¯ä»¥æ ¹æ®å¶é¨ç½²è¦æ±èªç±åéé»è®¤çæå°è¶æ¶æ¶é´ã\n\nå¦æ content-type ä¸æ¯ä»¥ "application/grpc" å¼å¤´æ¶, grpc æå¡ç«¯åºå½ä»¥ http ç¶æç  415 (unsupported media type) è¿è¡åºç­ãè¿æ ·, è½é»æ­ http/2 çå®¢æ·ç«¯(ä»¥ç¶æç 200æ è¯æå)è§£æä¸ä¸ª grpc éè¯¯ã\n\ncustom-metadata æ¯ä¸ç³»åç±åºç¨å±å®ä¹ç key-value é®å¼å¯¹ç»æçéåãåºç¨ç¨åºä¸è½ä½¿ç¨ä»¥ "grpc-" å¼å¤´ç header åä½ä¸º custom-metadata ç key, å ä¸ºä»¥ "grpc-" å¼å¤´ç header åè¢«ç¨äºé¢ççå¨æªæ¥ç» grpc ä½¿ç¨ã\n\næ³¨æï¼å ä¸º http2 ä¸åè®¸äºè¿å¶åºåä½ä¸º header çå¼ï¼æä»¥äºè¿å¶ç header å¼å¿é¡»ä½¿ç¨ base64 ç¼ç ãå®ç°æ¶å¿é¡»å¯ä»¥æ¥æ¶ padded å un-padded çå¼ï¼åé un-padded çå¼ãåºç¨ç¨åºå®ä¹çäºè¿å¶ header åéè¦ä»¥ "-bin" ä¸ºåç¼ãè¿è¡åºå¯ä»¥ä½¿ç¨è¿ä¸ªåç¼æ£æµåºäºè¿å¶ç headersï¼ç¶åå¨åéåæ¥æ¶æ¶ä½¿ç¨ base64 è¿è¡å è§£å¯ã\n\ncustom-metadata ä¸è½ä¿è¯ header çé¡ºåºé¤éæéå¤ç header åãå½æéå¤ç header åæ¶ï¼å¨è¯­ä¹ä¸ç­ä»·äºå°ä»ä»¬çå¼ä»¥ "," ä½ä¸ºåéç¬¦æ¼æ¥èµ·æ¥ãæä»¥ï¼å®ç°æ¶éè¦æ³¨æï¼å¯¹äº äºè¿å¶ç±»åç headerï¼éè¦åç¨ "," è¿è¡åå²ï¼ç¶ååç¨ base64 è¿è¡è§£å¯å¤çã\n\ncustom-metadata ç ascii ç±»åçå¼ï¼ä¸è½æç©ºæ ¼åååç¼ï¼å¦ææçè¯ï¼ä¼è¢«å¥ç¦»æãå¦å¤ï¼è¿éå¯ä»¥ä½¿ç¨ç ascii å­ç¬¦èå´æ¯ http æ´å ä¸¥æ ¼ãå®ç°æ¶ï¼ä¸è½å ä¸ºæ¥æ¶å°å¨ http ææä½å¨ custom-metadata ä¸­æ æç ascii å­ç¬¦èåºéï¼ä½æ¯å´æ²¡æä¸¥æ ¼å®ä¹å·ä½çè¡ä¸ºï¼å¯ä»¥æå¼ä¹å¯ä»¥æ¥åè¿ä¸ªå¼ãå¦æè¢«æ¥åï¼å¿é¡»æ³¨æç¡®ä¿åè®¸åºç¨ç¨åºå°å¼ä½ä¸ºåæ°æ®åæ¾ãä¾å¦ï¼å¦æè¿ä¸ªåæ°æ®è¢«å½ä½ä¸ä¸ªåè¡¨å¨ä¸ä¸ªè¯·æ±ä¸­ä¼ éç»åºç¨ç¨åºï¼é£ä¹å¦æåºç¨ç¨åºæè¿ä¸ªåæ°æ®æ¾å¨åºç­ä¸­æ¶ä¸åºå¼åä¸ä¸ªéè¯¯ã\n\næå¡ç«¯å¯ä»¥éå¶ request-headers çå¤§å°ï¼å»ºè®®é»è®¤ 8kbãå»ºè®®å®ç°æ¶è®¡ç® header çæ»å¤§å°ï¼å http/2 ç settings_max_header_list_size é£æ ·ï¼the sum of all header fields, for each field the sum of the uncompressed field name and value lengths plus 32, with binary values\' lengths being post-base64.\n\n\n# length-prefixed-message\n\nä¸ä¸ª request ä¸­å¯ä»¥æå¤ä¸ª length-prefixed-message æ°æ®ï¼å®ä»¬éè¿ http2 ç data å¸§è¿è¡ä¼ è¾ã\n\n * length-prefixed-message â compressed-flag message-length message\n   * compressed-flag â 0 / 1 # encoded as 1 byte unsigned integer\n   * message-length â {length of message} # encoded as 4 byte unsigned integer (big endian)\n   * message â *{binary octet}\n\nå½ compressed-flag å¼ä¸º1æ¶ï¼æ è¯çäºè¿å¶ç message æ¯ä½¿ç¨ message-encoding å¤´ä¸­å£°æçæ¹å¼åç¼©è¿çãå¼ä¸º0æ¶,æå³çæ²¡æè¢«åç¼©ã å¦æ message-encoding å¤´ç¼ºççæåµä¸ï¼compressed-flag å¼å¿é¡»ä¸º0ãåç¼©çä¸ä¸æä¿¡æ¯ä¸ä¼å¨è·¨è¶ message è¾¹çæ¶ä¾ç¶è¢«ç»´æ¤ï¼æä»¥ï¼å®ç°æ¶å¿é¡»ä¸ºæµä¸­çæ¯ä¸ä¸ª message åå»ºä¸ä¸ªæ°çä¸ä¸æã\n\n\n# eos(end-of-stream)\n\nå¯¹äºè¯·æ±æ¥è¯´ï¼eos (end-of-stream) éè¿æ¥æ¶å°çæåä¸ä¸ª data å¸§ä¸­ç end_stream æ è®°æ¥æ è¯çãå¨ request éè¦è¢«å³é­ä½æ¯åæ²¡ææ°æ®éè¦åéçæåµä¸ï¼grpcçå®ç°å¿é¡»åéä¸ä¸ªåå« end_stream æ è®°çç©º data å¸§ã\n\n\n# responses\n\n * response â (response-headers *length-prefixed-message trailers) / trailers-only\n\n\n# response-headers\n\n * response-headers â http-status [message-encoding] [message-accept-encoding] content-type *custom-metadata\n * trailers-only â http-status content-type trailers\n * trailers â status [status-message] *custom-metadata\n   * status â "grpc-status" 1*digit ; 0-9\n   * status-message â "grpc-message" percent-encoded\n     * percent-encoded â 1*(percent-byte-unencoded / percent-byte-encoded)\n       * percent-byte-unencoded â 1*( %x20-%x24 / %x26-%x7e ) ; space and vchar, except %\n       * percent-byte-encoded â "%" 2hexdigit ; 0-9 a-f\n   * http-status â ":status 200"\n\nresponse-headers å trailers-only é½æ¯éè¿ä¸ä¸ªç¬ç«ç http2 headers å¸§åè¿è¡ä¼ è¾ãå¤§å¤æ°ç responses é½åºè¯¥æ¢æ headers åæ trailersï¼ä½æ¯ trailers-only å½å¨éè¦äº§çä¸ä¸ªå³æ¶éè¯¯æ¶æ¯è¢«åè®¸çãå¦å¤ï¼status ä¿¡æ¯å¿é¡»å¨ trailers ä¸­ï¼å³ä½¿ status code æ¯ ok.\n\nå¯¹äº responses æ¥è¯´ï¼end-of-stream æ¯éè¿æåä¸ä¸ªä¼ è¾ trailers ç headers å¸§ç end_stream æ è®°æ¥æ ç¤ºçã\n\nå®ç°æ¶åºå½ææ broken deployments å¨ååºä¸­åé é200 ç httpç¶æä»£ç ä»¥ååç§égrpcåå®¹ç±»åå¹¶ä¸çç¥ç¶æåç¶ææ¶æ¯ãå½è¿ç§æåµåçæ¶ï¼å®ç°æ¶å¿é¡»åæä¸ä¸ª status & status-message ä»¥ä¼ æ­ç»åºç¨å±\n\nå®¢æ·ç«¯åºå½éå¶ response-headers, trailers, æ trailers-only çå¤§å°ï¼ä¸è¬æ¨èä¸è¿°å¯¹è±¡çå¤§å°éå¶é½æ¯ 8kb\n\nstatus çå¼é¨åæ¯åè¿å¶ç¼ç çæ´æ°ï¼ä½ä¸ºasciiå­ç¬¦ä¸²ï¼æ²¡æä»»ä½åå¯¼é¶\n\nstatus-message çå¼é¨åçè®ºä¸åºå½æ¯ä¸ä¸ªæè¿°éè¯¯ç unicode å­ç¬¦ä¸²ï¼å®éä¸å¤ç¨ utf-8 è·çæ¯ url ç¼ç (percent-encoding)ãå½è§£ç æ æå¼æ¶ï¼è¯¥å®ç°ä¸å®ä¸è½æåºéè¯¯ æè ä¸¢å¼è¿ä¸ª messageãæåæåµï¼å°±æ¯ç»æ­¢è§£ç è¿ä¸ª status-messageï¼è¿æ ·ç¨æ·å¯ä»¥æ¥æ¶å°åå§ç url ç¼ç æ ¼å¼æ°æ®ãæèï¼è¯¥å®ç°å¯ä»¥è§£ç ææé¨åï¼åæ¶ä¿çæåçï¼ - ç¼ç ï¼æèç¨æ¿æ¢å­ç¬¦(ä¾å¦ï¼\'ï¼\'æunicodeæ¿æ¢å­ç¬¦)æ¿æ¢å®ä»¬ã\n\n\n# example\n\nä»¥ä¸ä»¥ unary-call ä¸ºä¾å±ç¤º http2 çå¸§åºå\n\n\n# request\n\n    headers (flags = end_headers)\n    :method = post\n    :scheme = http\n    :path = /google.pubsub.v2.publisherservice/createtopic\n    :authority = pubsub.googleapis.com\n    grpc-timeout = 1s\n    content-type = application/grpc+proto\n    grpc-encoding = gzip\n    authorization = bearer y235.wef315yfh138vh31hv93hv8h3v\n\n    data (flags = end_stream)\n    <length-prefixed message>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# response\n\n    headers (flags = end_headers)\n    :status = 200\n    grpc-encoding = gzip\n    content-type = application/grpc+proto\n\n    data\n    <length-prefixed message>\n\n    headers (flags = end_stream, end_headers)\n    grpc-status = 0 # ok\n    trace-proto-bin = jher831yy13jhy3hc\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n\n# user agents\n\nè½ç¶åè®®ä¸è¦æ±ç¨æ·ä»£çæ¥è¿è¡ï¼ä½å»ºè®®å®¢æ·ç«¯æä¾ç»æåçç¨æ·ä»£çå­ç¬¦ä¸²ï¼è¯¥å­ç¬¦ä¸²æä¾äºè°ç¨åºãçæ¬åå¹³å°çåºæ¬æè¿°ï¼ä»¥ä¾¿å¨å¼æç¯å¢ä¸­è¿è¡é®é¢è¯æ­ãå»ºè®®åºå¼åäººåä½¿ç¨ä»¥ä¸ç»æ: user-agent â "grpc-" language ?("-" variant) "/" version ?( " (" *(additionalproperty ";") ")" ) e.g.\n\n    grpc-java/1.2.3\n    grpc-ruby/1.2.3\n    grpc-ruby-jruby/1.3.4\n    grpc-java-android/0.9.1 (gingerbread/1.2.4; nexus5; tmobile)\n\n\n1\n2\n3\n4\n\n\n\n# å¹ç­æ§ å éè¯\n\né¤éè¢«æ¾ç¤ºçå®ä½, ä¸ç¶ grpc è°ç¨ä¸åºè¢«åè®¾ä¸ºå¹ç­ç. ç¹å«å°:\n\n * æ æ³éªè¯å·²å¯å¨çè°ç¨å°ä¸ä¼éè¯\n * æ²¡æéå¤æå¶æºå¶ï¼å ä¸ºæ²¡æå¿è¦\n * æ è®°ä¸ºå¹ç­çå¼å«å¯ä»¥å¤æ¬¡åé\n\n\n# http2 transport mapping\n\n\n# stream identification\n\nææ grpc è°ç¨é½éè¦æå®ä¸ä¸ªåé¨idãæä»¬å°å¨æ­¤æ¹æ¡ä¸­ä½¿ç¨ http2 stream-id ä½ä¸ºè°ç¨æ è¯ç¬¦ãæ³¨æï¼è¿äº id æ¯å·²æå¼ http2 ä¼è¯çä¸ä¸æï¼å¹¶ä¸ï¼å¨å¤çå¤ä¸ª http2 ä¼è¯çç»å®è¿ç¨ä¸­ä¸æ¯å¯ä¸çï¼ä¹ä¸è½ç¨ä½guidã\n\n\n# data frames\n\ndata å¸§è¾¹çä¸ length-prefixed-message è¾¹çæ å³ï¼å¹¶ä¸å®ç°ä¸åºå¯¹å¶å¯¹é½ååºä»»ä½åè®¾ã\n\n\n# errors\n\nå¨ rpc æé´åçåºç¨ç¨åºæè¿è¡æ¶éè¯¯æ¶ï¼å°å¨ trailers ä¸­ä¼ é status å status-messageã\n\nå¨æäºæåµä¸ï¼æ¶æ¯æµçå¸§å¯è½å·²æåï¼rpc è¿è¡æ¶å°éæ©ä½¿ç¨ rst_stream å¸§åå¶å¯¹ç­æ¹æç¤ºæ­¤ç¶æãrpcè¿è¡æ¶å®ç°åºè¯¥å° rst_stream è§£éä¸ºæµçç«å³ full-closureï¼å¹¶ä¸åºè¯¥å°éè¯¯ä¼ æ­å°è°ç¨åºç¨ç¨åºå±ã\n\n\n# security\n\nå½ tls ä¸ http2 ä¸èµ·ä½¿ç¨æ¶ï¼http2 è§èè¦æ±ä½¿ç¨ tls 1.2 ææ´é«çæ¬ãå®è¿å¯¹é¨ç½²ä¸­åè®¸çå¯ç æ½å äºä¸äºé¢å¤çéå¶ï¼ä»¥é¿åå·²ç¥é®é¢ä»¥åéè¦sniæ¯æãå¦å¤ï¼é¢è®¡ http2 å°ä¸ä¸æä¼ è¾å®å¨æºå¶ç»åä½¿ç¨ï¼æ­¤æ¶è§èä¸è½å¯¹å¶æåºä»»ä½ææä¹çå»ºè®®\n\n\n# connection management\n\n\n# goaway frame\n\nç± servers åéç» clients ç¨äºæ è¯ servers ä¸åå¨ç¸å³çè¿æ¥ä¸æ¥æ¶ä»»ä½æ°ç streamãè¿ä¸ªå¸§åå«äº server æåæ¥æ¶çæåä¸ä¸ª stream idãclients åºè¯¥è®¤ä¸ºæåä¸ä¸ªè¢« server æåæ¥æ¶ç stream ä¹åçä»»ä½ stream é½æ¯ unavailableï¼åºå½å¨å¶ä»å°æ¹è¿è¡éè¯ãclients å¯ä»¥ç»§ç»­å¤çå·²æ¥åçæµï¼ç´å°å®ä»¬å®ææè¿æ¥ç»æ­¢ã\n\nservers åºå½å¨ç»æ­¢è¿æ¥ååé goaway å¸§ï¼ä»¥å¯é å°éç¥ clients åªäºå·¥ä½å·²è¢«æå¡å¨æ¥åå¹¶æ­£å¨æ§è¡ã\n\n\n# ping frame\n\nclients å servers é½å¯ä»¥åé ping å¸§ï¼å¯¹ç«¯å¿é¡»ä»¥å®æ¥æ¶å°çåå®¹è¿è¡åå¤ãå®è¢«ç¨æ¥æ­å®è¿æ¥ä¾ç¶å­æ´»ï¼å¹¶æä¾äºä¸ç§è¯ä¼° end-to-end å»¶è¿çæ¹æ³ãå¦æ servers å¯å¨ç ping æªå¨è¿è¡æ¶ææçæªæ­¢æéåæ¶å°ååºï¼åæå¡å¨ä¸çæææªå®æè°ç¨å°ä»¥ canceled ç¶æå³é­ãå¦æ clients å¯å¨ç ping è¶æ¶æªæ¶å°ååºæ¶ï¼å°å¯¼è´ææè°ç¨ä»¥ unavailable ç¶æå³é­ãè¯·æ³¨æï¼ping çé¢çé«åº¦ä¾èµäºç½ç»ç¯å¢ï¼å®ç°å¯ä»¥æ ¹æ®ç½ç»ååºç¨è¦æ±èªç±è°æ´ ping é¢çã\n\n\n# connection failure\n\nå¦æå®¢æ·ç«¯ä¸åçå¯æ£æµçè¿æ¥æéï¼åå°ä»¥ unavailable ç¶æå³é­ææè°ç¨ãå¯¹äºæå¡å¨ï¼å°ä»¥ canceled ç¶æå³é­æå¼çè°ç¨ã\n\n\n# appendix a - grpc for protobuf\n\n 1. protobuf å£°æçæå¡æ¥å£å¾å®¹æéè¿ protoc çä»£ç çææ©å±æ å°å° grpc ä¸ãä»¥ä¸å®ä¹è¦ä½¿ç¨çæ å°ã\n    * service-name â ?( {proto package name} "." ) {service name}\n    * message-type â {fully qualified proto message name}\n    * content-type â "application/grpc+proto"',charsets:{cjk:!0}},{title:"grpc source notes",frontmatter:{title:"grpc source notes",date:"2020-04-13T00:00:00.000Z",lastmod:null,description:"grpc source notes",categories:["network","grpc"],tags:["grpc"],permalink:null},regularPath:"/blog/network/grpc/grpc_source_notes.html",relativePath:"blog/network/grpc/grpc_source_notes.md",key:"v-75d8bb3f",path:"/blog/network/grpc/grpc_source_notes.html",headersStr:null,content:'# grpc source notes\n\ngrpc.Server.Serve(lis net.Listener)  ::: google.golang.org/grpc/server.go : L545 :\n    ....\n    for {\n\t\trawConn, err := lis.Accept()\n        ...\n        s.serveWG.Add(1)\n\t\tgo func() {\n\t\t\ts.handleRawConn(rawConn)\n\t\t\ts.serveWG.Done()\n\t\t}()\n    }\n\ngrpc.Server.handleRawConn()\n    ...\n    // Finish handshaking (HTTP2)\n\tst := s.newHTTP2Transport(conn, authInfo)  //> google.golang.org/grpc/internal/transport/transport.go : L488\n                                               //>   google.golang.org/grpc/internal/transport/http2_server.go : L126 : http2Server : ä¸»è¦é»è¾æå¨å°\n                                               //>   http2Server is an implementation of interface transport.ServerTransport\n                                               //>     go func(){ ... t.loopy.run() ...}() ï¼L276\n                                               //>     go t.keepalive() : L282\n\t                                           //>   http2Server éè¦æåï¼\n\t                                           //>     framer\n\t                                           //>     \t    writer: w : newBufWriter(conn, writeBufferSize),\n\t                                           //>     \t    fr:     http2.NewFramer(w, r),    w,ré½æ¯connçreader\n\t                                           //>     \t\t\t    golang.org/x/net/http2/frame.go ï¼L432\n\t                                           //>     conn\n\t                                           //>     controlBuf : ä¸ä¸ªæ°æ®list\n\t                                           //>     loopy : loopyWriter : google.golang.org/grpc/internal/transport/controlbuf.go : L388\n                                               //>       run() : L420\n                                               //>         æ³¨æ processData æ¶æ°æ®è¶è¿ 16K æ¶çå¤ç: ä¸¤å±æµæ§ï¼stream-level å connection-level\n\tif st == nil {\n\t\treturn\n\t}\n\n\trawConn.SetDeadline(time.Time{})\n\tif !s.addConn(st) {\n\t\treturn\n\t}\n\tgo func() {\n\t\ts.serveStreams(st)\n\t\ts.removeConn(st)\n\t}()\n\ngrpc.Server.serveStreams()\n    func (s *Server) serveStreams(st transport.ServerTransport) {\n        defer st.Close()\n        var wg sync.WaitGroup\n        //> google.golang.org/grpc/internal/transport/http2_server.go : L428 : func (t *http2Server) HandleStreams\n        //>      HandleStreams receives incoming streams using the given handler\n        st.HandleStreams(func(stream *transport.Stream) {\n            wg.Add(1)\n            go func() {\n                defer wg.Done()\n                s.handleStream(st, stream, s.traceInfo(st, stream))\n            }()\n        }, func(ctx context.Context, method string) context.Context {\n            if !EnableTracing {\n                return ctx\n            }\n            tr := trace.New("grpc.Recv."+methodFamily(method), method)\n            return trace.NewContext(ctx, tr)\n        })\n        wg.Wait()\n    }\n\nhttp2Server.HandleStreams(handle func(*Stream), traceCtx func(context.Context, string) context.Context) {\n\tdefer close(t.readerDone)\n\tfor {\n\t\tframe, err := t.framer.fr.ReadFrame()\n\t\tatomic.StoreUint32(&t.activity, 1)\n\t\tif err != nil {\n\t\t\t...\n\t\t\tt.Close()\n\t\t\treturn\n\t\t}\n\t\tswitch frame := frame.(type) {\n\t\tcase *http2.MetaHeadersFrame:\n\t\t\tif t.operateHeaders(frame, handle, traceCtx) {  //> use handle only here\n\t\t\t\tt.Close()\n\t\t\t\tbreak\n\t\t\t}\n\t\tcase *http2.DataFrame:\n\t\t\tt.handleData(frame) //> æ°æ®è¯»åå°çæ°æ®åå¥ stream ç buf ä¸­å¾å¤ç\n                                //>     æ£æ¥å° ä¸­ç http2.FlagDataEndStream æ è®°æ¶ï¼åå¥ io.EOF å° stream ç bufï¼æ è®°æµçç»æ\n                                //>     æ³¨æï¼framer éçæ°æ®å°ä¸ä¸æ¬¡è¯»åæ¶ä¼è¢«éåï¼æä»¥ä¼ä»¥copyçæ¹å¼å°å¯¹åºçbuf ä»¥å¤åç»­å¤ç\n                                //> æµæ§ï¼å¦æéè¦è¿è¡æ§å¶ï¼åé outgoingWindowUpdate ä¿¡æ¯å° http2Server.controlBuf ä¸­\n\t\tcase *http2.RSTStreamFrame:\n\t\t\tt.handleRSTStream(frame)\n\t\tcase *http2.SettingsFrame:\n\t\t\tt.handleSettings(frame)\n\t\tcase *http2.PingFrame:\n\t\t\tt.handlePing(frame)\n\t\tcase *http2.WindowUpdateFrame:\n\t\t\tt.handleWindowUpdate(frame) //> æµæ§ï¼åé incomingWindowUpdate ä¿¡æ¯å° http2Server.controlBuf ä¸­\n\t\tcase *http2.GoAwayFrame:\n\t\t\t// TODO: Handle GoAway from the client appropriately.\n\t\tdefault:\n\t\t\terrorf("transport: http2Server.HandleStreams found unhandled frame type %v.", frame)\n\t\t}\n\t}\n}\n\ngrpc.Server.handleStream  ::: google.golang.org/grpc/server.go : L1248\n    func (s *Server) handleStream(t transport.ServerTransport, stream *transport.Stream, trInfo *traceInfo) {\n        sm := stream.Method()\n        if sm != "" && sm[0] == \'/\' {\n            sm = sm[1:]\n        }\n        pos := strings.LastIndex(sm, "/")\n        if pos == -1 {\n            if trInfo != nil {\n                trInfo.tr.LazyLog(&fmtStringer{"Malformed method name %q", []interface{}{sm}}, true)\n                trInfo.tr.SetError()\n            }\n            errDesc := fmt.Sprintf("malformed method name: %q", stream.Method())\n            if err := t.WriteStatus(stream, status.New(codes.ResourceExhausted, errDesc)); err != nil {\n                if trInfo != nil {\n                    trInfo.tr.LazyLog(&fmtStringer{"%v", []interface{}{err}}, true)\n                    trInfo.tr.SetError()\n                }\n                grpclog.Warningf("grpc: Server.handleStream failed to write status: %v", err)\n            }\n            if trInfo != nil {\n                trInfo.tr.Finish()\n            }\n            return\n        }\n        service := sm[:pos]\n        method := sm[pos+1:]\n\n        srv, knownService := s.m[service]\n        if knownService {\n            if md, ok := srv.md[method]; ok {\n                s.processUnaryRPC(t, stream, srv, md, trInfo)\n                return\n            }\n            if sd, ok := srv.sd[method]; ok {\n                s.processStreamingRPC(t, stream, srv, sd, trInfo)\n                return\n            }\n        }\n        // Unknown service, or known server unknown method.\n        if unknownDesc := s.opts.unknownStreamDesc; unknownDesc != nil {\n            s.processStreamingRPC(t, stream, nil, unknownDesc, trInfo)\n            return\n        }\n        var errDesc string\n        if !knownService {\n            errDesc = fmt.Sprintf("unknown service %v", service)\n        } else {\n            errDesc = fmt.Sprintf("unknown method %v for service %v", method, service)\n        }\n        if trInfo != nil {\n            trInfo.tr.LazyPrintf("%s", errDesc)\n            trInfo.tr.SetError()\n        }\n        if err := t.WriteStatus(stream, status.New(codes.Unimplemented, errDesc)); err != nil {\n            if trInfo != nil {\n                trInfo.tr.LazyLog(&fmtStringer{"%v", []interface{}{err}}, true)\n                trInfo.tr.SetError()\n            }\n            grpclog.Warningf("grpc: Server.handleStream failed to write status: %v", err)\n        }\n        if trInfo != nil {\n            trInfo.tr.Finish()\n        }\n    }\n\nnewHTTP2Server : google.golang.org/grpc/internal/transport/http2_server.go : L126\n    func newHTTP2Server(conn net.Conn, config *ServerConfig) (_ ServerTransport, err error) {\n        ... //> ä¸ºæé  http2Server åå¤åæ°\n        ctx, cancel := context.WithCancel(context.Background())\n        t := &http2Server{\n            ctx:               ctx,\n            cancel:            cancel,\n            ctxDone:           ctx.Done(),\n            conn:              conn,\n            remoteAddr:        conn.RemoteAddr(),\n            localAddr:         conn.LocalAddr(),\n            authInfo:          config.AuthInfo,\n            framer:            framer,\n            readerDone:        make(chan struct{}),\n            writerDone:        make(chan struct{}),\n            maxStreams:        maxStreams,\n            inTapHandle:       config.InTapHandle,\n            fc:                &trInFlow{limit: uint32(icwz)},\n            state:             reachable,\n            activeStreams:     make(map[uint32]*Stream),\n            stats:             config.StatsHandler,\n            kp:                kp,\n            idle:              time.Now(),\n            kep:               kep,\n            initialWindowSize: iwz,\n            czData:            new(channelzData),\n        }\n        t.controlBuf = newControlBuffer(t.ctxDone)\n        if dynamicWindow {\n            t.bdpEst = &bdpEstimator{\n                bdp:               initialWindowSize,\n                updateFlowControl: t.updateFlowControl,\n            }\n        }\n        ...\n        ...  //> å¤ç client preface.\n        go func() {\n            t.loopy = newLoopyWriter(serverSide, t.framer, t.controlBuf, t.bdpEst)\n            t.loopy.ssGoAwayHandler = t.outgoingGoAwayHandler\n            if err := t.loopy.run(); err != nil {\n                errorf("transport: loopyWriter.run returning. Err: %v", err)\n            }\n            t.conn.Close()\n            close(t.writerDone)\n        }()\n        go t.keepalive()\n        return t, nil\n    }\n\n//> conn 1---\x3en streams(ä»¥ linked-list ä¿å­) 1---\x3en frames(ä»¥ linked-list ä¿å­)\ntype loopyWriter struct{} : google.golang.org/grpc/internal/transport/controlbuf.go : L364\n    activeStreams is a linked-list of all streams that have data to send and some  stream-level flow control quota.\n    Each of these streams internally have a list of data items(and perhaps trailers on the server-side) to be sent out.\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n92\n93\n94\n95\n96\n97\n98\n99\n100\n101\n102\n103\n104\n105\n106\n107\n108\n109\n110\n111\n112\n113\n114\n115\n116\n117\n118\n119\n120\n121\n122\n123\n124\n125\n126\n127\n128\n129\n130\n131\n132\n133\n134\n135\n136\n137\n138\n139\n140\n141\n142\n143\n144\n145\n146\n147\n148\n149\n150\n151\n152\n153\n154\n155\n156\n157\n158\n159\n160\n161\n162\n163\n164\n165\n166\n167\n168\n169\n170\n171\n172\n173\n174\n175\n176\n177\n178\n179\n180\n181\n182\n183\n184\n185\n186\n187\n188\n189\n190\n191\n192\n193\n194\n195\n196\n197\n198\n199\n200\n201\n202\n203\n204\n205\n206\n207\n208\n209\n210\n211\n212\n213\n214\n215\n216\n217\n218\n219\n220\n221\n222\n',normalizedContent:'# grpc source notes\n\ngrpc.server.serve(lis net.listener)  ::: google.golang.org/grpc/server.go : l545 :\n    ....\n    for {\n\t\trawconn, err := lis.accept()\n        ...\n        s.servewg.add(1)\n\t\tgo func() {\n\t\t\ts.handlerawconn(rawconn)\n\t\t\ts.servewg.done()\n\t\t}()\n    }\n\ngrpc.server.handlerawconn()\n    ...\n    // finish handshaking (http2)\n\tst := s.newhttp2transport(conn, authinfo)  //> google.golang.org/grpc/internal/transport/transport.go : l488\n                                               //>   google.golang.org/grpc/internal/transport/http2_server.go : l126 : http2server : ä¸»è¦é»è¾æå¨å°\n                                               //>   http2server is an implementation of interface transport.servertransport\n                                               //>     go func(){ ... t.loopy.run() ...}() ï¼l276\n                                               //>     go t.keepalive() : l282\n\t                                           //>   http2server éè¦æåï¼\n\t                                           //>     framer\n\t                                           //>     \t    writer: w : newbufwriter(conn, writebuffersize),\n\t                                           //>     \t    fr:     http2.newframer(w, r),    w,ré½æ¯connçreader\n\t                                           //>     \t\t\t    golang.org/x/net/http2/frame.go ï¼l432\n\t                                           //>     conn\n\t                                           //>     controlbuf : ä¸ä¸ªæ°æ®list\n\t                                           //>     loopy : loopywriter : google.golang.org/grpc/internal/transport/controlbuf.go : l388\n                                               //>       run() : l420\n                                               //>         æ³¨æ processdata æ¶æ°æ®è¶è¿ 16k æ¶çå¤ç: ä¸¤å±æµæ§ï¼stream-level å connection-level\n\tif st == nil {\n\t\treturn\n\t}\n\n\trawconn.setdeadline(time.time{})\n\tif !s.addconn(st) {\n\t\treturn\n\t}\n\tgo func() {\n\t\ts.servestreams(st)\n\t\ts.removeconn(st)\n\t}()\n\ngrpc.server.servestreams()\n    func (s *server) servestreams(st transport.servertransport) {\n        defer st.close()\n        var wg sync.waitgroup\n        //> google.golang.org/grpc/internal/transport/http2_server.go : l428 : func (t *http2server) handlestreams\n        //>      handlestreams receives incoming streams using the given handler\n        st.handlestreams(func(stream *transport.stream) {\n            wg.add(1)\n            go func() {\n                defer wg.done()\n                s.handlestream(st, stream, s.traceinfo(st, stream))\n            }()\n        }, func(ctx context.context, method string) context.context {\n            if !enabletracing {\n                return ctx\n            }\n            tr := trace.new("grpc.recv."+methodfamily(method), method)\n            return trace.newcontext(ctx, tr)\n        })\n        wg.wait()\n    }\n\nhttp2server.handlestreams(handle func(*stream), tracectx func(context.context, string) context.context) {\n\tdefer close(t.readerdone)\n\tfor {\n\t\tframe, err := t.framer.fr.readframe()\n\t\tatomic.storeuint32(&t.activity, 1)\n\t\tif err != nil {\n\t\t\t...\n\t\t\tt.close()\n\t\t\treturn\n\t\t}\n\t\tswitch frame := frame.(type) {\n\t\tcase *http2.metaheadersframe:\n\t\t\tif t.operateheaders(frame, handle, tracectx) {  //> use handle only here\n\t\t\t\tt.close()\n\t\t\t\tbreak\n\t\t\t}\n\t\tcase *http2.dataframe:\n\t\t\tt.handledata(frame) //> æ°æ®è¯»åå°çæ°æ®åå¥ stream ç buf ä¸­å¾å¤ç\n                                //>     æ£æ¥å° ä¸­ç http2.flagdataendstream æ è®°æ¶ï¼åå¥ io.eof å° stream ç bufï¼æ è®°æµçç»æ\n                                //>     æ³¨æï¼framer éçæ°æ®å°ä¸ä¸æ¬¡è¯»åæ¶ä¼è¢«éåï¼æä»¥ä¼ä»¥copyçæ¹å¼å°å¯¹åºçbuf ä»¥å¤åç»­å¤ç\n                                //> æµæ§ï¼å¦æéè¦è¿è¡æ§å¶ï¼åé outgoingwindowupdate ä¿¡æ¯å° http2server.controlbuf ä¸­\n\t\tcase *http2.rststreamframe:\n\t\t\tt.handlerststream(frame)\n\t\tcase *http2.settingsframe:\n\t\t\tt.handlesettings(frame)\n\t\tcase *http2.pingframe:\n\t\t\tt.handleping(frame)\n\t\tcase *http2.windowupdateframe:\n\t\t\tt.handlewindowupdate(frame) //> æµæ§ï¼åé incomingwindowupdate ä¿¡æ¯å° http2server.controlbuf ä¸­\n\t\tcase *http2.goawayframe:\n\t\t\t// todo: handle goaway from the client appropriately.\n\t\tdefault:\n\t\t\terrorf("transport: http2server.handlestreams found unhandled frame type %v.", frame)\n\t\t}\n\t}\n}\n\ngrpc.server.handlestream  ::: google.golang.org/grpc/server.go : l1248\n    func (s *server) handlestream(t transport.servertransport, stream *transport.stream, trinfo *traceinfo) {\n        sm := stream.method()\n        if sm != "" && sm[0] == \'/\' {\n            sm = sm[1:]\n        }\n        pos := strings.lastindex(sm, "/")\n        if pos == -1 {\n            if trinfo != nil {\n                trinfo.tr.lazylog(&fmtstringer{"malformed method name %q", []interface{}{sm}}, true)\n                trinfo.tr.seterror()\n            }\n            errdesc := fmt.sprintf("malformed method name: %q", stream.method())\n            if err := t.writestatus(stream, status.new(codes.resourceexhausted, errdesc)); err != nil {\n                if trinfo != nil {\n                    trinfo.tr.lazylog(&fmtstringer{"%v", []interface{}{err}}, true)\n                    trinfo.tr.seterror()\n                }\n                grpclog.warningf("grpc: server.handlestream failed to write status: %v", err)\n            }\n            if trinfo != nil {\n                trinfo.tr.finish()\n            }\n            return\n        }\n        service := sm[:pos]\n        method := sm[pos+1:]\n\n        srv, knownservice := s.m[service]\n        if knownservice {\n            if md, ok := srv.md[method]; ok {\n                s.processunaryrpc(t, stream, srv, md, trinfo)\n                return\n            }\n            if sd, ok := srv.sd[method]; ok {\n                s.processstreamingrpc(t, stream, srv, sd, trinfo)\n                return\n            }\n        }\n        // unknown service, or known server unknown method.\n        if unknowndesc := s.opts.unknownstreamdesc; unknowndesc != nil {\n            s.processstreamingrpc(t, stream, nil, unknowndesc, trinfo)\n            return\n        }\n        var errdesc string\n        if !knownservice {\n            errdesc = fmt.sprintf("unknown service %v", service)\n        } else {\n            errdesc = fmt.sprintf("unknown method %v for service %v", method, service)\n        }\n        if trinfo != nil {\n            trinfo.tr.lazyprintf("%s", errdesc)\n            trinfo.tr.seterror()\n        }\n        if err := t.writestatus(stream, status.new(codes.unimplemented, errdesc)); err != nil {\n            if trinfo != nil {\n                trinfo.tr.lazylog(&fmtstringer{"%v", []interface{}{err}}, true)\n                trinfo.tr.seterror()\n            }\n            grpclog.warningf("grpc: server.handlestream failed to write status: %v", err)\n        }\n        if trinfo != nil {\n            trinfo.tr.finish()\n        }\n    }\n\nnewhttp2server : google.golang.org/grpc/internal/transport/http2_server.go : l126\n    func newhttp2server(conn net.conn, config *serverconfig) (_ servertransport, err error) {\n        ... //> ä¸ºæé  http2server åå¤åæ°\n        ctx, cancel := context.withcancel(context.background())\n        t := &http2server{\n            ctx:               ctx,\n            cancel:            cancel,\n            ctxdone:           ctx.done(),\n            conn:              conn,\n            remoteaddr:        conn.remoteaddr(),\n            localaddr:         conn.localaddr(),\n            authinfo:          config.authinfo,\n            framer:            framer,\n            readerdone:        make(chan struct{}),\n            writerdone:        make(chan struct{}),\n            maxstreams:        maxstreams,\n            intaphandle:       config.intaphandle,\n            fc:                &trinflow{limit: uint32(icwz)},\n            state:             reachable,\n            activestreams:     make(map[uint32]*stream),\n            stats:             config.statshandler,\n            kp:                kp,\n            idle:              time.now(),\n            kep:               kep,\n            initialwindowsize: iwz,\n            czdata:            new(channelzdata),\n        }\n        t.controlbuf = newcontrolbuffer(t.ctxdone)\n        if dynamicwindow {\n            t.bdpest = &bdpestimator{\n                bdp:               initialwindowsize,\n                updateflowcontrol: t.updateflowcontrol,\n            }\n        }\n        ...\n        ...  //> å¤ç client preface.\n        go func() {\n            t.loopy = newloopywriter(serverside, t.framer, t.controlbuf, t.bdpest)\n            t.loopy.ssgoawayhandler = t.outgoinggoawayhandler\n            if err := t.loopy.run(); err != nil {\n                errorf("transport: loopywriter.run returning. err: %v", err)\n            }\n            t.conn.close()\n            close(t.writerdone)\n        }()\n        go t.keepalive()\n        return t, nil\n    }\n\n//> conn 1---\x3en streams(ä»¥ linked-list ä¿å­) 1---\x3en frames(ä»¥ linked-list ä¿å­)\ntype loopywriter struct{} : google.golang.org/grpc/internal/transport/controlbuf.go : l364\n    activestreams is a linked-list of all streams that have data to send and some  stream-level flow control quota.\n    each of these streams internally have a list of data items(and perhaps trailers on the server-side) to be sent out.\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n92\n93\n94\n95\n96\n97\n98\n99\n100\n101\n102\n103\n104\n105\n106\n107\n108\n109\n110\n111\n112\n113\n114\n115\n116\n117\n118\n119\n120\n121\n122\n123\n124\n125\n126\n127\n128\n129\n130\n131\n132\n133\n134\n135\n136\n137\n138\n139\n140\n141\n142\n143\n144\n145\n146\n147\n148\n149\n150\n151\n152\n153\n154\n155\n156\n157\n158\n159\n160\n161\n162\n163\n164\n165\n166\n167\n168\n169\n170\n171\n172\n173\n174\n175\n176\n177\n178\n179\n180\n181\n182\n183\n184\n185\n186\n187\n188\n189\n190\n191\n192\n193\n194\n195\n196\n197\n198\n199\n200\n201\n202\n203\n204\n205\n206\n207\n208\n209\n210\n211\n212\n213\n214\n215\n216\n217\n218\n219\n220\n221\n222\n',charsets:{cjk:!0}},{title:"http/2.0 and http/2.0 in Go",frontmatter:{title:"http/2.0 and http/2.0 in Go",date:"2019-01-05T00:00:00.000Z",description:"http/2.0 and http/2.0 in Go",categories:["network","http2"],tags:[null],permalink:null},regularPath:"/blog/network/http2/http2_in_go.html",relativePath:"blog/network/http2/http2_in_go.md",key:"v-32fca817",path:"/blog/network/http2/http2_in_go.html",headers:[{level:2,title:"1ãåå¤",slug:"_1ãåå¤",normalizedTitle:"1ãåå¤",charIndex:34},{level:2,title:"2ãhttp/2.0 ç¹æ§",slug:"_2ãhttp-2-0-ç¹æ§",normalizedTitle:"2ãhttp/2.0 ç¹æ§",charIndex:1256},{level:2,title:"3ãGo: package net and net/http",slug:"_3ãgo-package-net-and-net-http",normalizedTitle:"3ãgo: package net and net/http",charIndex:1274},{level:3,title:"3.1 net",slug:"_3-1-net",normalizedTitle:"3.1 net",charIndex:1355},{level:3,title:"3.2 net.http",slug:"_3-2-net-http",normalizedTitle:"3.2 net.http",charIndex:2183},{level:2,title:"4ãserverä½¿ç¨http/2.0",slug:"_4ãserverä½¿ç¨http-2-0",normalizedTitle:"4ãserverä½¿ç¨http/2.0",charIndex:4766},{level:3,title:"4.1 ä½¿ç¨ golang.org.x.net.http2.ConfigureServer",slug:"_4-1-ä½¿ç¨-golang-org-x-net-http2-configureserver",normalizedTitle:"4.1 ä½¿ç¨ golang.org.x.net.http2.configureserver",charIndex:4789},{level:3,title:"4.2 ä½¿ç¨ golang.org.x.net.http2.h2c",slug:"_4-2-ä½¿ç¨-golang-org-x-net-http2-h2c",normalizedTitle:"4.2 ä½¿ç¨ golang.org.x.net.http2.h2c",charIndex:11429},{level:2,title:"5ãNext",slug:"_5ãnext",normalizedTitle:"5ãnext",charIndex:14906},{level:2,title:"6ãEnd",slug:"_6ãend",normalizedTitle:"6ãend",charIndex:15024}],headersStr:"1ãåå¤ 2ãhttp/2.0 ç¹æ§ 3ãGo: package net and net/http 3.1 net 3.2 net.http 4ãserverä½¿ç¨http/2.0 4.1 ä½¿ç¨ golang.org.x.net.http2.ConfigureServer 4.2 ä½¿ç¨ golang.org.x.net.http2.h2c 5ãNext 6ãEnd",content:'# http/2.0 and http/2.0 in Go\n\n\n# 1ãåå¤\n\n * reference\n   * Goæºç ï¼https://github.com/golang/go - tag:1.12.4\n * http/2.0 tools\n   * Browser Indicators\n     * chrome extension : HTTP/2 and SPDY indicator\n   * curl\n     * cmd:\n       * curl -vso /dev/null --http2 https://www.cloudflare.com/\n     * note:\n       * --http2 option that causes it to use HTTP/2 (if it can).\n       * chrome åªæ¯æäºåºäºALPN ç HTTP 2.0 æå¡ãä¸åæ¯æ NPN ç HTTP 2.0 æå¡ã\n * note\n   * TLS çæ©å±åè®®ï¼SNI, NPN, ALPN : [éè¿æ©å±ClientHello/ServerHelloæ¶æ¯ä¸ºTLSå¢å æ°çåè½]\n     * SNI(Server Name Indication)\n       * SNIæå®äº TLS æ¡ææ¶è¦è¿æ¥çä¸»æºåã SNI åè®®æ¯ä¸ºäºæ¯æåä¸ä¸ª IP(åç«¯å£)æ¯æå¤ä¸ªååã\n         * å ä¸ºå¨ TLS æ¡ææé´æå¡å¨éè¦åéè¯ä¹¦(Certificate)ç»å®¢æ·ç«¯ï¼ä¸ºæ­¤éè¦ç¥éå®¢æ·è¯·æ±çåå(å ä¸ºä¸åååçè¯ä¹¦å¯è½æ¯ä¸ä¸æ ·ç)ã\n           * è¿æ¶æåå­¦è¦é®äºï¼è¦è¿æ¥çä¸»æºåä¸å°±æ¯åèµ· HTTP æ¶ç Host ä¹? TLS Handshake æ¶ HTTP äº¤äºè¿æ²¡å¼å§ï¼èªç¶ HTTP å¤´é¨è¿æ²¡å°è¾¾æå¡å¨ã\n     * NPN(Next Protocol Negotiation)\n       * NPN æ¯ Google å¨ SPDY ä¸­å¼åçä¸ä¸ª TLS æ©å±ã\n       * NPN æ¯å©ç¨ TLS æ¡æä¸­ç ServerHello æ¶æ¯ï¼å¨å¶ä¸­è¿½å  ProtocolNameList å­æ®µåå«èªå·±æ¯æçåºç¨å±åè®®ï¼å®¢æ·ç«¯æ£æ¥è¯¥å­æ®µï¼å¹¶å¨ä¹åç ClientKeyExChange æ¶æ¯ä¸­ä»¥ ProtocolName å­æ®µè¿åéä¸­çåè®®ã\n     * ALPN(Application-Layer Protocol Negotiation)\n       * ALPN åæ¯å®¢æ·ç«¯åå£°æèªå·±æ¯æçåè®® (ClientHello)ï¼æå¡å¨éæ©å¹¶ç¡®è®¤åè®® (ServerHello)ãè¿æ ·é¢ åçç®çä¸»è¦æ¯ä½¿ ALPN ä¸å¶ä»åè®®ååæ åä¿æä¸è´ (å¦ SSL)ã\n   * TLS(Transport Layer Security)/SSL\n     * TLSçåèº«æ¯SSLï¼TLS 1.0éå¸¸è¢«æ ç¤ºä¸ºSSL 3.1\n\n\n# 2ãhttp/2.0 ç¹æ§\n\n\n# 3ãGo: package net and net/http\n\nå¼å§http/2.0ä¹åï¼æä»¬ååé¡¾ä¸Goçä¸¤ä¸ªç½ç»åï¼net and net/http\n\n\n# 3.1 net\n\n * net\n   * note\n     \n         Package net provides a portable interface for network I/O, including TCP/IP, UDP, domain name resolution, and Unix domain sockets.\n     \n     \n     1\n     \n   * net.conn : interface\n     * implementation\n       * UnixConn <--- DialUnix | ListenUnixgram\n       * UDPConn <--- DialUDP | ListenMulticastUDP | ListenUDP\n       * TCPConn <--- DialTCP\n       * IPConn <--- DialIP | ListenIP\n   * net.Listener : interface\n     * implementation\n       * UnixListener <--- ListenUnix\n       * TCPListener <--- ListenTCP\n   * net.Addr : interface\n     * implementation\n       * UnixAddr <--- ResolveUnixAddr\n       * UDPAddr <--- ResolveUDPAddr\n       * TCPAddr <--- ResolveTCPAddr\n       * IPAddr <--- ResolveIPAddr\n   * other\n     * å¤çï¼DNS NS/MX/SRV ãHOSTãCIDRãHardwareAddr ãIP/IPMask/IPNet\n\n\n# 3.2 net.http\n\n * net.http.Client\n   * dependency\n     * interface: RoundTripper\n       * method\n         * RoundTrip(*Request) (*Response, error)\n           * note\n             \n                 RoundTripper is an interface representing the ability to execute a single HTTP transaction, obtaining the Response for a given Request.\n                 A RoundTripper must be safe for concurrent use by multiple goroutines.\n             \n             \n             1\n             2\n             \n       * implementation\n         * net.http.Transport\n           * note\n             \n                 A Transport is a low-level primitive for making HTTP and HTTPS requests.\n             \n             \n             1\n             \n * net.http.Server\n   * dependency\n     * net.http.Handler : interface\n       * note\n         * handler to invoke, http.DefaultServeMux if nil\n       * method\n         * ServeHTTP(w ResponseWriter, r *Request)\n       * implementation\n         * net.http.ServeMux\n           * note:\n             * ServeMux is an HTTP request multiplexer.\n             * éè¿ ServeHTTP æ¥ç®¡è¯·æ±ï¼ç¶ååæ ¹æ® pattern è·¯ç±å°å·ä½çhandler\n         * net.http.HandlerFunc\n           * å° func(ResponseWriter, *Request) å½æ°è½¬æ¢ä¸º net.http.Handler æ¥å£çå®ç°\n             \n             type HandlerFunc func(ResponseWriter, *Request)\n             func (f HandlerFunc) ServeHTTP(w ResponseWriter, r *Request) \n                 ServeHTTP calls f(w, r)\n             \n             \n             1\n             2\n             3\n             \n       * usage:\n         * çæä¸äºå¸¸ç¨ç handler\n           * net.http: func FileServer(root FileSystem) Handler\n           * net.http: func NotFoundHandler() Handler\n           * net.http: func RedirectHandler(url string, code int) Handler\n           * net.http: func StripPrefix(prefix string, h Handler) Handler\n           * net.http: func TimeoutHandler(h Handler, dt time.Duration, msg string) Handler\n           * net.http: func FileServer(root FileSystem) Handler\n             * note\n               * FileServer returns a handler that serves HTTP requests with the contents of the file system rooted at root.\n             * dependency\n               * interface : net.http.FileSystem\n                 * implementation\n                   * net.http.Dir\n               * interface : net.http.File\n     * net.http.Request\n     * net.http.Response\n     * net.http.ResponseWriter : interface\n       * implemented\n         * net.http.Pusher : interface\n           * note: for HTTP/2 server push\n         * net.http.Flusher : interface\n         * net.http.Hijacker : interface\n\n\n# 4ãserverä½¿ç¨http/2.0\n\n\n# 4.1 ä½¿ç¨ golang.org.x.net.http2.ConfigureServer\n\n//> golang.org\\x\\net\\http2\\server.go : L205\n    func ConfigureServer(s *http.Server, conf *Server) error {\n        \n        ...\n\n        haveNPN := false\n        for _, p := range s.TLSConfig.NextProtos {\n            if p == NextProtoTLS {\n                haveNPN = true\n                break\n            }\n        }\n        if !haveNPN {\n            s.TLSConfig.NextProtos = append(s.TLSConfig.NextProtos, NextProtoTLS)\n        }\n\n        if s.TLSNextProto == nil {\n            s.TLSNextProto = map[string]func(*http.Server, *tls.Conn, http.Handler){}\n        }\n        protoHandler := func(hs *http.Server, c *tls.Conn, h http.Handler) {\n            if testHookOnConn != nil {\n                testHookOnConn()\n            }\n            conf.ServeConn(c, &ServeConnOpts{\n                Handler:    h,\n                BaseConfig: hs,\n            })\n        }\n        s.TLSNextProto[NextProtoTLS] = protoHandler\n        return nil\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n\n\nä»ä¸è¿°ä»£ç å¯ä»¥çå°æ ¸å¿å¨äºï¼\n\n * å° NextProtoTLS éå å¨ net.http.Server.TLSConfig.NextProtos å°¾é¨\n * å° NextProtoTLS : protoHandler æå¥å° net.http.Server.TLSNextProto ä¸­\n\nç±æ­¤ï¼æä»¬å¯ä»¥æ¨æµï¼å¨ net.http.Server æ¥æ¶å°è¿æ¥è¯·æ±æ¶ï¼ä¼å¨æä¸ªæ¶æºä½¿ç¨è¿ä¸¤ä¸ªå¯¹è±¡ï¼å¨çæ¯ serve æ¶è°ç¨ protoHandler è¿è¡å¤çãæ¥ä¸æ¥ï¼æä»¬çç net.http.Server çå·¥ä½æµç¨ã\n\nå¨åæ net.http.Server ä»£ç åï¼åç°ï¼æå¡å¯å¨ç ListenAndServe å ListenAndServeTLS å½æ°ï¼æç»é½ä¼èµ°å° ServeTLS å Serve å½æ°ãæä»¬åæ¥çç ServeTLS çå®ç°ï¼\n\n//> net\\http\\server.go : L2928\n    func (srv *Server) ServeTLS(l net.Listener, certFile, keyFile string) error {\n        // Setup HTTP/2 before srv.Serve, to initialize srv.TLSConfig\n        // before we clone it and create the TLS Listener.\n        if err := srv.setupHTTP2_ServeTLS(); err != nil {\n            return err\n        }\n\n        config := cloneTLSConfig(srv.TLSConfig)\n        if !strSliceContains(config.NextProtos, "http/1.1") {\n            config.NextProtos = append(config.NextProtos, "http/1.1")\n        }\n\n        ...\n\n        tlsListener := tls.NewListener(l, config)\n        return srv.Serve(tlsListener)\n    }\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n\n\nè¿åä»£ç æå ä¸ªå°æ¹å¾éè¦ï¼\n\n * éè¿ setupHTTP2_ServeTLS å®è£http2æ¯æï¼ä»å½æ°åå°±å¯ä»¥çåºï¼go æä¾çåºåªæ¯æäºå¸¦ tls ç http2.0\n   \n   * å®ä¼è°ç¨å° ï¼\n   \n   //> net\\http\\server.go : L3141\n       func (srv *Server) onceSetNextProtoDefaults() {\n           if strings.Contains(os.Getenv("GODEBUG"), "http2server=0") {\n               return\n           }\n           // Enable HTTP/2 by default if the user hasn\'t otherwise\n           // configured their TLSNextProto map.\n           if srv.TLSNextProto == nil {\n               conf := &http2Server{\n                   NewWriteScheduler: func() http2WriteScheduler { return http2NewPriorityWriteScheduler(nil) },\n               }\n               srv.nextProtoErr = http2ConfigureServer(srv, conf)\n           }\n       }\n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   7\n   8\n   9\n   10\n   11\n   12\n   13\n   14\n   \n   \n   åçæ¯å¦éè¿ç¯å¢åéç¦ç¨äºhttp2çæ¯æï¼åå¨ srv.TLSNextProto == nil æ¶éè¿ http2ConfigureServer æ·»å  http2.0 çæ¯æã\n   \n       //> net\\http\\h2_bundle.go : L3763\n       func http2ConfigureServer(s *Server, conf *http2Server) error {\n           ...\n       }\n   \n   \n   1\n   2\n   3\n   4\n   \n   \n   éè¿åæ http2ConfigureServer, åç°å®ågolang.org.x.net.http2.ConfigureServerçå¤çæµç¨å ä¹å®å¨ä¸æ ·ï¼ä¹å°±æ¯è¯´net/httpé»è®¤å°±æ¯æäºhttp2.0, åªä¸è¿å®å¨éç¨å®å¨é»è®¤ç http2Server éç½®ã\n   \n   å¦å¤ï¼æ³¨æå°ï¼åªæå½ srv.TLSNextProto == nil æ¶ææ·»å  http2.0 çæ¯æï¼è´¹è§£~\n\n * è°ç¨ cloneTLSConfig æ·è´ TLSConfig éç½®\n\n * æ·»å ä¸ä¸ªé»è®¤çå¤çåè®® "http/1.1" å° TLSConfig.NextProtos\n\n * è°ç¨ Serve å½æ°ï¼å¹¶ä¼ éåæ°ï¼éè¿ net.Listener å TLSConfig æé ç tls.listener å¯¹è±¡ tlsListener\n   \n   * æ³¨æï¼æç»ä¹æ¯è°ç¨äº Serve å½æ°ï¼ä¹å°±æ¯è¯´ Serve å½æ°æ¢è¦å¤ç http ä¹è¦å¤ç https\n\næ¥ä¸æ¥æä»¬çç Serve çå®ç°ï¼\n\n//> net\\http\\server.go : L2850\n    func (srv *Server) Serve(l net.Listener) error {\n        ...\n        if err := srv.setupHTTP2_Serve(); err != nil {\n            return err\n        }\n        ...\n        ctx := context.WithValue(baseCtx, ServerContextKey, srv)\n        for {\n            rw, e := l.Accept()\n            if e != nil {\n                select {\n                case <-srv.getDoneChan():\n                    return ErrServerClosed\n                default:\n                }\n                if ne, ok := e.(net.Error); ok && ne.Temporary() {\n                    ...\n                    continue\n                }\n                return e\n            }\n            if cc := srv.ConnContext; cc != nil {\n                ctx = cc(ctx, rw)\n                if ctx == nil {\n                    panic("ConnContext returned nil")\n                }\n            }\n            tempDelay = 0\n            c := srv.newConn(rw)\n            c.setState(c.rwc, StateNew) // before Serve can return\n            go c.serve(ctx)\n        }\n    }\n\n\n//> net\\http\\server.go : L3132\n    func (srv *Server) onceSetNextProtoDefaults_Serve() {\n        if srv.shouldConfigureHTTP2ForServe() {\n            srv.onceSetNextProtoDefaults()\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n\n\nsetupHTTP2_Serve æç»è°ç¨äº onceSetNextProtoDefaults_Serveï¼ççå®çå®ç°ï¼what ? setupHTTP2_Serve ä»ä¹é¬¼~ åè°ç¨ä¸æ¬¡ onceSetNextProtoDefaultsï¼è¿ä¸ªå¶å®æ¯ä¸ºäºå¤çï¼è°ç¨ ListenAndServe ä½æ¯éç½®äº TLSConfig çæå½¢\n\nå° net.Conn å¯¹è±¡ rw éè¿ srv.newConn å°è£å°ä¸ä¸ªæ°ç net.http.Server.conn å¯¹è±¡ï¼å¹¶å¯å¨ä¸ä¸ªgoroutineè°ç¨ conn.serve å¤çæ°æ¥æ¶å°çè¿æ¥è¯·æ±ã\n\næ³¨æï¼æ¯æ¬¡ accept ä¸ä¸ªè¿æ¥è¯·æ±ï¼net.http é½ä¼åå»ºä¸ä¸ª goroutineï¼é®é¢æ¥äºï¼å¦æçªç¶é´æ¶å¥å¤§éè¿æ¥è¯·æ±ä¼åçä»ä¹ï¼\n\n//> net\\http\\server.go : L1759\n    func (c *conn) serve(ctx context.Context) {\n        ...\n        if tlsConn, ok := c.rwc.(*tls.Conn); ok {\n            ...\n            if err := tlsConn.Handshake(); err != nil {\n                ...\n                return\n            }\n            c.tlsState = new(tls.ConnectionState)\n            *c.tlsState = tlsConn.ConnectionState()\n            if proto := c.tlsState.NegotiatedProtocol; validNPN(proto) {\n                if fn := c.server.TLSNextProto[proto]; fn != nil {\n                    h := initNPNRequest{tlsConn, serverHandler{c.server}}\n                    fn(c.server, tlsConn, h)\n                }\n                return\n            }\n        }\n\n        // HTTP/1.x from here on.\n\n        ...\n\n        for {\n            w, err := c.readRequest(ctx)\n            ...\n            serverHandler{c.server}.ServeHTTP(w, w.req)\n            ...\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n\n\néè¿ä¸è¿°ä»£ç å¯ä»¥çåºï¼å¦ææ¯ tls è¿æ¥ï¼ååå¤ç tlsæ¡æåè®®ï¼ç¶åæ ¹æ® TLSNextProto è°ç¨å¯¹åºåè®®çserverHandler; å¦ææ¯æ®éè¿æ¥ï¼åè¿å¥ for å¾ªç¯è¯»åæ°æ®ï¼å¹¶è°ç¨ ServeHTTP è¿è¡å¤çã\n\næ­¤æ¶ï¼æä»¬å¯ä»¥ç¡®è®¤ï¼http2.0 å¨è¿æ¥å»ºç«ä¹åï¼ä¼è°ç¨ protoHandler æ¥ç®¡æ°æ®çå¤çãåæ¶ï¼éè¦æ³¨æï¼readRequest å¤çäºæ°æ®åè½¬æ¢ä¸º http è¯·æ±çå¨ä½ï¼åæ ·çprotoHandler ä¹ä¼å¤ç frame è½¬æ¢ä¸º http è¯·æ±çå¨ä½ï¼ä»¥å¼å®¹http1.1çè¯­æ³ã\n\n\n# 4.2 ä½¿ç¨ golang.org.x.net.http2.h2c\n\nh2c çä¸»è¦ç®çæ¯æä¾ä¸ä¸ª non-TLS çæ¬ç http/2.0, è¿ä¸ªååªæä¾äºä¸ä¸ªå½æ°ï¼NewHandlerãä½¿ç¨æ¶ï¼å°å¶è¿åå¼å½ä½æ®éçhandlerä½¿ç¨å³å¯ã\n\n//> golang.org\\x\\net\\http2\\h2c\\h2c.go : L64\n    func NewHandler(h http.Handler, s *http2.Server) http.Handler {\n        return &h2cHandler{\n            Handler: h,\n            s:       s,\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\nä»ä¸è¿°ä»£ç å¯ä»¥çå°ï¼NewHandler åªæ¯ä½¿ç¨ http.Hander å http2.Server å°è£äºä¸ä¸ª h2cHandlerãå½ net/http çè¿æ¥å»ºç«åï¼ä¼è°ç¨ h2cHandler å¯¹è±¡ç ServeHTTP å¤çå½æ°ã\n\n//> golang.org\\x\\net\\http2\\h2c\\h2c.go : L72\n    func (s h2cHandler) ServeHTTP(w http.ResponseWriter, r *http.Request) {\n        // Handle h2c with prior knowledge (RFC 7540 Section 3.4)\n        if r.Method == "PRI" && len(r.Header) == 0 && r.URL.Path == "*" && r.Proto == "HTTP/2.0" {\n            ...\n            conn, err := initH2CWithPriorKnowledge(w)\n            if err != nil {\n                ...\n                return\n            }\n            defer conn.Close()\n\n            s.s.ServeConn(conn, &http2.ServeConnOpts{Handler: s.Handler})\n            return\n        }\n        // Handle Upgrade to h2c (RFC 7540 Section 3.2)\n        if conn, err := h2cUpgrade(w, r); err == nil {\n            defer conn.Close()\n\n            s.s.ServeConn(conn, &http2.ServeConnOpts{Handler: s.Handler})\n            return\n        }\n\n        s.Handler.ServeHTTP(w, r)\n        return\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n\n\nå¾ææ¾ï¼å½æ»¡è¶³æ¡ä»¶æ¶ä¼è°ç¨ http2.Server ç ServeConn è¿è¡å¤çï¼è¿å¥ ServeConn åå°±æ¯å¸¸è§ç http2 å¤çæµç¨ï¼è¿éå°±åä¸æ·±å¥äºãè¿éæä¸¤ç§åçº§æ¹å¼ï¼\n\n * r.Method == "PRI"\n   * éè¿ä½¿ç¨ PRI æ è¯å½ååéçæ¯ä¸ä¸ªåè¨ï¼ç´§æ¥çå°±ä¼åéhttp/2.0çframeäºãåè¨æ°æ®ä»¥ï¼PRI * HTTP/2.0\\r\\n\\r\\nSM\\r\\n\\r\\n å¼å§ãgo ç http2.Transport å°±æ¯ä½¿ç¨è¿ç§æ¹å¼æ¥æå»ºhttp/2.0è¿æ¥ã\n * h2cUpgrade\n   * ä½¿ç¨ http/1.1 éè¿å¤´é¨ä¿¡æ¯ Connection: Upgrade, HTTP2-Settings å Upgrade: h2c æ è¯éè¦åçº§ä»¥åéè¿HTTP2-Settingsæ¥è®¾ç½®http/2.0çè¿æ¥ä¿¡æ¯ãå¶ä¸­ HTTP2-Settings æ¯ä»¥ base64url ç¼ç ã curl -k --http2 http://localhost:8972?data=curltest å°±æ¯ä½¿ç¨è¿ç§æ¹å¼ã\n\næä»¬æ¥çç h2cUpgrade çå®ç°æ¹å¼ï¼\n\n//> golang.org\\x\\net\\http2\\h2c\\h2c.go : L161\n    func h2cUpgrade(w http.ResponseWriter, r *http.Request) (net.Conn, error) {\n        if !isH2CUpgrade(r.Header) {\n            return nil, errors.New("non-conforming h2c headers")\n        }\n\n        // Initial bytes we put into conn to fool http2 server\n        initBytes, _, err := convertH1ReqToH2(r)\n        if err != nil {\n            return nil, err\n        }\n\n        hijacker, ok := w.(http.Hijacker)\n        if !ok {\n            return nil, errors.New("hijack not supported.")\n        }\n        conn, rw, err := hijacker.Hijack()\n        if err != nil {\n            return nil, fmt.Errorf("hijack failed: %v", err)\n        }\n\n        rw.Write([]byte("HTTP/1.1 101 Switching Protocols\\r\\n" +\n            "Connection: Upgrade\\r\\n" +\n            "Upgrade: h2c\\r\\n\\r\\n"))\n        rw.Flush()\n\n        // A conforming client will now send an H2 client preface which need to drain\n        // since we already sent this.\n        if err := drainClientPreface(rw); err != nil {\n            return nil, err\n        }\n\n        c := &rwConn{\n            Conn:      conn,\n            Reader:    io.MultiReader(initBytes, rw),\n            BufWriter: newSettingsAckSwallowWriter(rw.Writer),\n        }\n        return c, nil\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n\n\nh2cUpgrade åéè¿ isH2CUpgrade å¤æ­æ¯å¦è½å¤è¿è¡åè®®åçº§ï¼ç¶ååå©ç¨ http.Hijacker å®å¨æ¥ç®¡è¿æ¥ï¼åæ¬æ°æ®è¯»åï¼å¹¶æææ°çè¿æ¥å¯¹è±¡ä»¥ä¾ http2.Server.ServerConn è¿è¡ http2 åè®®å¤çæ°æ®æ net.http ç ResponseWriter, *Request å¯¹è±¡ã\n\n\n# 5ãNext\n\nhttp2.0 in grpc\n\nå¯¹ client åèµ·è¯·æ±çæ ¸å¿ net.http.Transport è¿è¡è§£è¯»\n\nå¯¹ websocket çå golang.org.x.net.websocket è¿è¡è§£è¯»\n\n\n# 6ãEnd\n\n * reference\n   \n   * [https://blog.cloudflare.com/tools-for-debugging-testing-and-using-http-2/]\n   * Go http2 å h2c\n   * rfc - h2c\n   * rfc - pri\n   * rfc - HTTPLayer\n   * rfc - streamid=0x01\n     \n         HTTP/1.1 requests that are upgraded to HTTP/2 (see Section 3.2) are responded to with a stream identifier of one (0x1).\n         After the upgrade completes, stream 0x1 is "half-closed (local)" to the client. \n         Therefore, stream 0x1 cannot be selected as a new stream identifier by a client that upgrades from HTTP/1.1.\n     \n     \n     1\n     2\n     3\n     \n   * htt2\n\n * sample\n   \n   * github',normalizedContent:'# http/2.0 and http/2.0 in go\n\n\n# 1ãåå¤\n\n * reference\n   * goæºç ï¼https://github.com/golang/go - tag:1.12.4\n * http/2.0 tools\n   * browser indicators\n     * chrome extension : http/2 and spdy indicator\n   * curl\n     * cmd:\n       * curl -vso /dev/null --http2 https://www.cloudflare.com/\n     * note:\n       * --http2 option that causes it to use http/2 (if it can).\n       * chrome åªæ¯æäºåºäºalpn ç http 2.0 æå¡ãä¸åæ¯æ npn ç http 2.0 æå¡ã\n * note\n   * tls çæ©å±åè®®ï¼sni, npn, alpn : [éè¿æ©å±clienthello/serverhelloæ¶æ¯ä¸ºtlså¢å æ°çåè½]\n     * sni(server name indication)\n       * sniæå®äº tls æ¡ææ¶è¦è¿æ¥çä¸»æºåã sni åè®®æ¯ä¸ºäºæ¯æåä¸ä¸ª ip(åç«¯å£)æ¯æå¤ä¸ªååã\n         * å ä¸ºå¨ tls æ¡ææé´æå¡å¨éè¦åéè¯ä¹¦(certificate)ç»å®¢æ·ç«¯ï¼ä¸ºæ­¤éè¦ç¥éå®¢æ·è¯·æ±çåå(å ä¸ºä¸åååçè¯ä¹¦å¯è½æ¯ä¸ä¸æ ·ç)ã\n           * è¿æ¶æåå­¦è¦é®äºï¼è¦è¿æ¥çä¸»æºåä¸å°±æ¯åèµ· http æ¶ç host ä¹? tls handshake æ¶ http äº¤äºè¿æ²¡å¼å§ï¼èªç¶ http å¤´é¨è¿æ²¡å°è¾¾æå¡å¨ã\n     * npn(next protocol negotiation)\n       * npn æ¯ google å¨ spdy ä¸­å¼åçä¸ä¸ª tls æ©å±ã\n       * npn æ¯å©ç¨ tls æ¡æä¸­ç serverhello æ¶æ¯ï¼å¨å¶ä¸­è¿½å  protocolnamelist å­æ®µåå«èªå·±æ¯æçåºç¨å±åè®®ï¼å®¢æ·ç«¯æ£æ¥è¯¥å­æ®µï¼å¹¶å¨ä¹åç clientkeyexchange æ¶æ¯ä¸­ä»¥ protocolname å­æ®µè¿åéä¸­çåè®®ã\n     * alpn(application-layer protocol negotiation)\n       * alpn åæ¯å®¢æ·ç«¯åå£°æèªå·±æ¯æçåè®® (clienthello)ï¼æå¡å¨éæ©å¹¶ç¡®è®¤åè®® (serverhello)ãè¿æ ·é¢ åçç®çä¸»è¦æ¯ä½¿ alpn ä¸å¶ä»åè®®ååæ åä¿æä¸è´ (å¦ ssl)ã\n   * tls(transport layer security)/ssl\n     * tlsçåèº«æ¯sslï¼tls 1.0éå¸¸è¢«æ ç¤ºä¸ºssl 3.1\n\n\n# 2ãhttp/2.0 ç¹æ§\n\n\n# 3ãgo: package net and net/http\n\nå¼å§http/2.0ä¹åï¼æä»¬ååé¡¾ä¸goçä¸¤ä¸ªç½ç»åï¼net and net/http\n\n\n# 3.1 net\n\n * net\n   * note\n     \n         package net provides a portable interface for network i/o, including tcp/ip, udp, domain name resolution, and unix domain sockets.\n     \n     \n     1\n     \n   * net.conn : interface\n     * implementation\n       * unixconn <--- dialunix | listenunixgram\n       * udpconn <--- dialudp | listenmulticastudp | listenudp\n       * tcpconn <--- dialtcp\n       * ipconn <--- dialip | listenip\n   * net.listener : interface\n     * implementation\n       * unixlistener <--- listenunix\n       * tcplistener <--- listentcp\n   * net.addr : interface\n     * implementation\n       * unixaddr <--- resolveunixaddr\n       * udpaddr <--- resolveudpaddr\n       * tcpaddr <--- resolvetcpaddr\n       * ipaddr <--- resolveipaddr\n   * other\n     * å¤çï¼dns ns/mx/srv ãhostãcidrãhardwareaddr ãip/ipmask/ipnet\n\n\n# 3.2 net.http\n\n * net.http.client\n   * dependency\n     * interface: roundtripper\n       * method\n         * roundtrip(*request) (*response, error)\n           * note\n             \n                 roundtripper is an interface representing the ability to execute a single http transaction, obtaining the response for a given request.\n                 a roundtripper must be safe for concurrent use by multiple goroutines.\n             \n             \n             1\n             2\n             \n       * implementation\n         * net.http.transport\n           * note\n             \n                 a transport is a low-level primitive for making http and https requests.\n             \n             \n             1\n             \n * net.http.server\n   * dependency\n     * net.http.handler : interface\n       * note\n         * handler to invoke, http.defaultservemux if nil\n       * method\n         * servehttp(w responsewriter, r *request)\n       * implementation\n         * net.http.servemux\n           * note:\n             * servemux is an http request multiplexer.\n             * éè¿ servehttp æ¥ç®¡è¯·æ±ï¼ç¶ååæ ¹æ® pattern è·¯ç±å°å·ä½çhandler\n         * net.http.handlerfunc\n           * å° func(responsewriter, *request) å½æ°è½¬æ¢ä¸º net.http.handler æ¥å£çå®ç°\n             \n             type handlerfunc func(responsewriter, *request)\n             func (f handlerfunc) servehttp(w responsewriter, r *request) \n                 servehttp calls f(w, r)\n             \n             \n             1\n             2\n             3\n             \n       * usage:\n         * çæä¸äºå¸¸ç¨ç handler\n           * net.http: func fileserver(root filesystem) handler\n           * net.http: func notfoundhandler() handler\n           * net.http: func redirecthandler(url string, code int) handler\n           * net.http: func stripprefix(prefix string, h handler) handler\n           * net.http: func timeouthandler(h handler, dt time.duration, msg string) handler\n           * net.http: func fileserver(root filesystem) handler\n             * note\n               * fileserver returns a handler that serves http requests with the contents of the file system rooted at root.\n             * dependency\n               * interface : net.http.filesystem\n                 * implementation\n                   * net.http.dir\n               * interface : net.http.file\n     * net.http.request\n     * net.http.response\n     * net.http.responsewriter : interface\n       * implemented\n         * net.http.pusher : interface\n           * note: for http/2 server push\n         * net.http.flusher : interface\n         * net.http.hijacker : interface\n\n\n# 4ãserverä½¿ç¨http/2.0\n\n\n# 4.1 ä½¿ç¨ golang.org.x.net.http2.configureserver\n\n//> golang.org\\x\\net\\http2\\server.go : l205\n    func configureserver(s *http.server, conf *server) error {\n        \n        ...\n\n        havenpn := false\n        for _, p := range s.tlsconfig.nextprotos {\n            if p == nextprototls {\n                havenpn = true\n                break\n            }\n        }\n        if !havenpn {\n            s.tlsconfig.nextprotos = append(s.tlsconfig.nextprotos, nextprototls)\n        }\n\n        if s.tlsnextproto == nil {\n            s.tlsnextproto = map[string]func(*http.server, *tls.conn, http.handler){}\n        }\n        protohandler := func(hs *http.server, c *tls.conn, h http.handler) {\n            if testhookonconn != nil {\n                testhookonconn()\n            }\n            conf.serveconn(c, &serveconnopts{\n                handler:    h,\n                baseconfig: hs,\n            })\n        }\n        s.tlsnextproto[nextprototls] = protohandler\n        return nil\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n\n\nä»ä¸è¿°ä»£ç å¯ä»¥çå°æ ¸å¿å¨äºï¼\n\n * å° nextprototls éå å¨ net.http.server.tlsconfig.nextprotos å°¾é¨\n * å° nextprototls : protohandler æå¥å° net.http.server.tlsnextproto ä¸­\n\nç±æ­¤ï¼æä»¬å¯ä»¥æ¨æµï¼å¨ net.http.server æ¥æ¶å°è¿æ¥è¯·æ±æ¶ï¼ä¼å¨æä¸ªæ¶æºä½¿ç¨è¿ä¸¤ä¸ªå¯¹è±¡ï¼å¨çæ¯ serve æ¶è°ç¨ protohandler è¿è¡å¤çãæ¥ä¸æ¥ï¼æä»¬çç net.http.server çå·¥ä½æµç¨ã\n\nå¨åæ net.http.server ä»£ç åï¼åç°ï¼æå¡å¯å¨ç listenandserve å listenandservetls å½æ°ï¼æç»é½ä¼èµ°å° servetls å serve å½æ°ãæä»¬åæ¥çç servetls çå®ç°ï¼\n\n//> net\\http\\server.go : l2928\n    func (srv *server) servetls(l net.listener, certfile, keyfile string) error {\n        // setup http/2 before srv.serve, to initialize srv.tlsconfig\n        // before we clone it and create the tls listener.\n        if err := srv.setuphttp2_servetls(); err != nil {\n            return err\n        }\n\n        config := clonetlsconfig(srv.tlsconfig)\n        if !strslicecontains(config.nextprotos, "http/1.1") {\n            config.nextprotos = append(config.nextprotos, "http/1.1")\n        }\n\n        ...\n\n        tlslistener := tls.newlistener(l, config)\n        return srv.serve(tlslistener)\n    }\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n\n\nè¿åä»£ç æå ä¸ªå°æ¹å¾éè¦ï¼\n\n * éè¿ setuphttp2_servetls å®è£http2æ¯æï¼ä»å½æ°åå°±å¯ä»¥çåºï¼go æä¾çåºåªæ¯æäºå¸¦ tls ç http2.0\n   \n   * å®ä¼è°ç¨å° ï¼\n   \n   //> net\\http\\server.go : l3141\n       func (srv *server) oncesetnextprotodefaults() {\n           if strings.contains(os.getenv("godebug"), "http2server=0") {\n               return\n           }\n           // enable http/2 by default if the user hasn\'t otherwise\n           // configured their tlsnextproto map.\n           if srv.tlsnextproto == nil {\n               conf := &http2server{\n                   newwritescheduler: func() http2writescheduler { return http2newprioritywritescheduler(nil) },\n               }\n               srv.nextprotoerr = http2configureserver(srv, conf)\n           }\n       }\n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   7\n   8\n   9\n   10\n   11\n   12\n   13\n   14\n   \n   \n   åçæ¯å¦éè¿ç¯å¢åéç¦ç¨äºhttp2çæ¯æï¼åå¨ srv.tlsnextproto == nil æ¶éè¿ http2configureserver æ·»å  http2.0 çæ¯æã\n   \n       //> net\\http\\h2_bundle.go : l3763\n       func http2configureserver(s *server, conf *http2server) error {\n           ...\n       }\n   \n   \n   1\n   2\n   3\n   4\n   \n   \n   éè¿åæ http2configureserver, åç°å®ågolang.org.x.net.http2.configureserverçå¤çæµç¨å ä¹å®å¨ä¸æ ·ï¼ä¹å°±æ¯è¯´net/httpé»è®¤å°±æ¯æäºhttp2.0, åªä¸è¿å®å¨éç¨å®å¨é»è®¤ç http2server éç½®ã\n   \n   å¦å¤ï¼æ³¨æå°ï¼åªæå½ srv.tlsnextproto == nil æ¶ææ·»å  http2.0 çæ¯æï¼è´¹è§£~\n\n * è°ç¨ clonetlsconfig æ·è´ tlsconfig éç½®\n\n * æ·»å ä¸ä¸ªé»è®¤çå¤çåè®® "http/1.1" å° tlsconfig.nextprotos\n\n * è°ç¨ serve å½æ°ï¼å¹¶ä¼ éåæ°ï¼éè¿ net.listener å tlsconfig æé ç tls.listener å¯¹è±¡ tlslistener\n   \n   * æ³¨æï¼æç»ä¹æ¯è°ç¨äº serve å½æ°ï¼ä¹å°±æ¯è¯´ serve å½æ°æ¢è¦å¤ç http ä¹è¦å¤ç https\n\næ¥ä¸æ¥æä»¬çç serve çå®ç°ï¼\n\n//> net\\http\\server.go : l2850\n    func (srv *server) serve(l net.listener) error {\n        ...\n        if err := srv.setuphttp2_serve(); err != nil {\n            return err\n        }\n        ...\n        ctx := context.withvalue(basectx, servercontextkey, srv)\n        for {\n            rw, e := l.accept()\n            if e != nil {\n                select {\n                case <-srv.getdonechan():\n                    return errserverclosed\n                default:\n                }\n                if ne, ok := e.(net.error); ok && ne.temporary() {\n                    ...\n                    continue\n                }\n                return e\n            }\n            if cc := srv.conncontext; cc != nil {\n                ctx = cc(ctx, rw)\n                if ctx == nil {\n                    panic("conncontext returned nil")\n                }\n            }\n            tempdelay = 0\n            c := srv.newconn(rw)\n            c.setstate(c.rwc, statenew) // before serve can return\n            go c.serve(ctx)\n        }\n    }\n\n\n//> net\\http\\server.go : l3132\n    func (srv *server) oncesetnextprotodefaults_serve() {\n        if srv.shouldconfigurehttp2forserve() {\n            srv.oncesetnextprotodefaults()\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n\n\nsetuphttp2_serve æç»è°ç¨äº oncesetnextprotodefaults_serveï¼ççå®çå®ç°ï¼what ? setuphttp2_serve ä»ä¹é¬¼~ åè°ç¨ä¸æ¬¡ oncesetnextprotodefaultsï¼è¿ä¸ªå¶å®æ¯ä¸ºäºå¤çï¼è°ç¨ listenandserve ä½æ¯éç½®äº tlsconfig çæå½¢\n\nå° net.conn å¯¹è±¡ rw éè¿ srv.newconn å°è£å°ä¸ä¸ªæ°ç net.http.server.conn å¯¹è±¡ï¼å¹¶å¯å¨ä¸ä¸ªgoroutineè°ç¨ conn.serve å¤çæ°æ¥æ¶å°çè¿æ¥è¯·æ±ã\n\næ³¨æï¼æ¯æ¬¡ accept ä¸ä¸ªè¿æ¥è¯·æ±ï¼net.http é½ä¼åå»ºä¸ä¸ª goroutineï¼é®é¢æ¥äºï¼å¦æçªç¶é´æ¶å¥å¤§éè¿æ¥è¯·æ±ä¼åçä»ä¹ï¼\n\n//> net\\http\\server.go : l1759\n    func (c *conn) serve(ctx context.context) {\n        ...\n        if tlsconn, ok := c.rwc.(*tls.conn); ok {\n            ...\n            if err := tlsconn.handshake(); err != nil {\n                ...\n                return\n            }\n            c.tlsstate = new(tls.connectionstate)\n            *c.tlsstate = tlsconn.connectionstate()\n            if proto := c.tlsstate.negotiatedprotocol; validnpn(proto) {\n                if fn := c.server.tlsnextproto[proto]; fn != nil {\n                    h := initnpnrequest{tlsconn, serverhandler{c.server}}\n                    fn(c.server, tlsconn, h)\n                }\n                return\n            }\n        }\n\n        // http/1.x from here on.\n\n        ...\n\n        for {\n            w, err := c.readrequest(ctx)\n            ...\n            serverhandler{c.server}.servehttp(w, w.req)\n            ...\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n\n\néè¿ä¸è¿°ä»£ç å¯ä»¥çåºï¼å¦ææ¯ tls è¿æ¥ï¼ååå¤ç tlsæ¡æåè®®ï¼ç¶åæ ¹æ® tlsnextproto è°ç¨å¯¹åºåè®®çserverhandler; å¦ææ¯æ®éè¿æ¥ï¼åè¿å¥ for å¾ªç¯è¯»åæ°æ®ï¼å¹¶è°ç¨ servehttp è¿è¡å¤çã\n\næ­¤æ¶ï¼æä»¬å¯ä»¥ç¡®è®¤ï¼http2.0 å¨è¿æ¥å»ºç«ä¹åï¼ä¼è°ç¨ protohandler æ¥ç®¡æ°æ®çå¤çãåæ¶ï¼éè¦æ³¨æï¼readrequest å¤çäºæ°æ®åè½¬æ¢ä¸º http è¯·æ±çå¨ä½ï¼åæ ·çprotohandler ä¹ä¼å¤ç frame è½¬æ¢ä¸º http è¯·æ±çå¨ä½ï¼ä»¥å¼å®¹http1.1çè¯­æ³ã\n\n\n# 4.2 ä½¿ç¨ golang.org.x.net.http2.h2c\n\nh2c çä¸»è¦ç®çæ¯æä¾ä¸ä¸ª non-tls çæ¬ç http/2.0, è¿ä¸ªååªæä¾äºä¸ä¸ªå½æ°ï¼newhandlerãä½¿ç¨æ¶ï¼å°å¶è¿åå¼å½ä½æ®éçhandlerä½¿ç¨å³å¯ã\n\n//> golang.org\\x\\net\\http2\\h2c\\h2c.go : l64\n    func newhandler(h http.handler, s *http2.server) http.handler {\n        return &h2chandler{\n            handler: h,\n            s:       s,\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\nä»ä¸è¿°ä»£ç å¯ä»¥çå°ï¼newhandler åªæ¯ä½¿ç¨ http.hander å http2.server å°è£äºä¸ä¸ª h2chandlerãå½ net/http çè¿æ¥å»ºç«åï¼ä¼è°ç¨ h2chandler å¯¹è±¡ç servehttp å¤çå½æ°ã\n\n//> golang.org\\x\\net\\http2\\h2c\\h2c.go : l72\n    func (s h2chandler) servehttp(w http.responsewriter, r *http.request) {\n        // handle h2c with prior knowledge (rfc 7540 section 3.4)\n        if r.method == "pri" && len(r.header) == 0 && r.url.path == "*" && r.proto == "http/2.0" {\n            ...\n            conn, err := inith2cwithpriorknowledge(w)\n            if err != nil {\n                ...\n                return\n            }\n            defer conn.close()\n\n            s.s.serveconn(conn, &http2.serveconnopts{handler: s.handler})\n            return\n        }\n        // handle upgrade to h2c (rfc 7540 section 3.2)\n        if conn, err := h2cupgrade(w, r); err == nil {\n            defer conn.close()\n\n            s.s.serveconn(conn, &http2.serveconnopts{handler: s.handler})\n            return\n        }\n\n        s.handler.servehttp(w, r)\n        return\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n\n\nå¾ææ¾ï¼å½æ»¡è¶³æ¡ä»¶æ¶ä¼è°ç¨ http2.server ç serveconn è¿è¡å¤çï¼è¿å¥ serveconn åå°±æ¯å¸¸è§ç http2 å¤çæµç¨ï¼è¿éå°±åä¸æ·±å¥äºãè¿éæä¸¤ç§åçº§æ¹å¼ï¼\n\n * r.method == "pri"\n   * éè¿ä½¿ç¨ pri æ è¯å½ååéçæ¯ä¸ä¸ªåè¨ï¼ç´§æ¥çå°±ä¼åéhttp/2.0çframeäºãåè¨æ°æ®ä»¥ï¼pri * http/2.0\\r\\n\\r\\nsm\\r\\n\\r\\n å¼å§ãgo ç http2.transport å°±æ¯ä½¿ç¨è¿ç§æ¹å¼æ¥æå»ºhttp/2.0è¿æ¥ã\n * h2cupgrade\n   * ä½¿ç¨ http/1.1 éè¿å¤´é¨ä¿¡æ¯ connection: upgrade, http2-settings å upgrade: h2c æ è¯éè¦åçº§ä»¥åéè¿http2-settingsæ¥è®¾ç½®http/2.0çè¿æ¥ä¿¡æ¯ãå¶ä¸­ http2-settings æ¯ä»¥ base64url ç¼ç ã curl -k --http2 http://localhost:8972?data=curltest å°±æ¯ä½¿ç¨è¿ç§æ¹å¼ã\n\næä»¬æ¥çç h2cupgrade çå®ç°æ¹å¼ï¼\n\n//> golang.org\\x\\net\\http2\\h2c\\h2c.go : l161\n    func h2cupgrade(w http.responsewriter, r *http.request) (net.conn, error) {\n        if !ish2cupgrade(r.header) {\n            return nil, errors.new("non-conforming h2c headers")\n        }\n\n        // initial bytes we put into conn to fool http2 server\n        initbytes, _, err := converth1reqtoh2(r)\n        if err != nil {\n            return nil, err\n        }\n\n        hijacker, ok := w.(http.hijacker)\n        if !ok {\n            return nil, errors.new("hijack not supported.")\n        }\n        conn, rw, err := hijacker.hijack()\n        if err != nil {\n            return nil, fmt.errorf("hijack failed: %v", err)\n        }\n\n        rw.write([]byte("http/1.1 101 switching protocols\\r\\n" +\n            "connection: upgrade\\r\\n" +\n            "upgrade: h2c\\r\\n\\r\\n"))\n        rw.flush()\n\n        // a conforming client will now send an h2 client preface which need to drain\n        // since we already sent this.\n        if err := drainclientpreface(rw); err != nil {\n            return nil, err\n        }\n\n        c := &rwconn{\n            conn:      conn,\n            reader:    io.multireader(initbytes, rw),\n            bufwriter: newsettingsackswallowwriter(rw.writer),\n        }\n        return c, nil\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n\n\nh2cupgrade åéè¿ ish2cupgrade å¤æ­æ¯å¦è½å¤è¿è¡åè®®åçº§ï¼ç¶ååå©ç¨ http.hijacker å®å¨æ¥ç®¡è¿æ¥ï¼åæ¬æ°æ®è¯»åï¼å¹¶æææ°çè¿æ¥å¯¹è±¡ä»¥ä¾ http2.server.serverconn è¿è¡ http2 åè®®å¤çæ°æ®æ net.http ç responsewriter, *request å¯¹è±¡ã\n\n\n# 5ãnext\n\nhttp2.0 in grpc\n\nå¯¹ client åèµ·è¯·æ±çæ ¸å¿ net.http.transport è¿è¡è§£è¯»\n\nå¯¹ websocket çå golang.org.x.net.websocket è¿è¡è§£è¯»\n\n\n# 6ãend\n\n * reference\n   \n   * [https://blog.cloudflare.com/tools-for-debugging-testing-and-using-http-2/]\n   * go http2 å h2c\n   * rfc - h2c\n   * rfc - pri\n   * rfc - httplayer\n   * rfc - streamid=0x01\n     \n         http/1.1 requests that are upgraded to http/2 (see section 3.2) are responded to with a stream identifier of one (0x1).\n         after the upgrade completes, stream 0x1 is "half-closed (local)" to the client. \n         therefore, stream 0x1 cannot be selected as a new stream identifier by a client that upgrades from http/1.1.\n     \n     \n     1\n     2\n     3\n     \n   * htt2\n\n * sample\n   \n   * github',charsets:{cjk:!0}},{title:"TCP ä¸ UDP å¯¹æ¯",frontmatter:{title:"TCP ä¸ UDP å¯¹æ¯",date:"2019-01-05T00:00:00.000Z",description:"TCP ä¸ UDP å¯¹æ¯",categories:["network"],tags:["tcp","udp"],permalink:null},regularPath:"/blog/network/introduce_tcp_udp.html",relativePath:"blog/network/introduce_tcp_udp.md",key:"v-398f0321",path:"/blog/network/introduce_tcp_udp.html",headers:[{level:2,title:"TCPåè®®",slug:"tcpåè®®",normalizedTitle:"tcpåè®®",charIndex:327},{level:2,title:"ä¸æ¬¡æ¡æçè¿ç¨ï¼",slug:"ä¸æ¬¡æ¡æçè¿ç¨",normalizedTitle:"ä¸æ¬¡æ¡æçè¿ç¨ï¼",charIndex:435},{level:2,title:"åæ¬¡æ¥æè¿ç¨",slug:"åæ¬¡æ¥æè¿ç¨",normalizedTitle:"åæ¬¡æ¥æè¿ç¨",charIndex:618},{level:2,title:"UDPåè®®",slug:"udpåè®®",normalizedTitle:"udpåè®®",charIndex:1051},{level:2,title:"TCPä¸UDPçåºå«",slug:"tcpä¸udpçåºå«",normalizedTitle:"tcpä¸udpçåºå«",charIndex:1820},{level:2,title:"ä¸ºä»ä¹UDPæ¯TCPå¿«",slug:"ä¸ºä»ä¹udpæ¯tcpå¿«",normalizedTitle:"ä¸ºä»ä¹udpæ¯tcpå¿«",charIndex:2124},{level:2,title:"ä¸ºä»ä¹TCPæ¯UDPå¯é ",slug:"ä¸ºä»ä¹tcpæ¯udpå¯é ",normalizedTitle:"ä¸ºä»ä¹tcpæ¯udpå¯é ",charIndex:2176},{level:2,title:"ä»ä¹æ¶åä½¿ç¨TCP",slug:"ä»ä¹æ¶åä½¿ç¨tcp",normalizedTitle:"ä»ä¹æ¶åä½¿ç¨tcp",charIndex:2308},{level:2,title:"TCPæ è¾¹çï¼UDPæè¾¹ç",slug:"tcpæ è¾¹ç-udpæè¾¹ç",normalizedTitle:"tcpæ è¾¹çï¼udpæè¾¹ç",charIndex:2631}],headersStr:"TCPåè®® ä¸æ¬¡æ¡æçè¿ç¨ï¼ åæ¬¡æ¥æè¿ç¨ UDPåè®® TCPä¸UDPçåºå« ä¸ºä»ä¹UDPæ¯TCPå¿« ä¸ºä»ä¹TCPæ¯UDPå¯é  ä»ä¹æ¶åä½¿ç¨TCP TCPæ è¾¹çï¼UDPæè¾¹ç",content:"# TCPä¸UDP å¯¹æ¯\n\n----------------------------------------\n\né¢åæ¥æçä¼ è¾æ¹å¼æ¯åºç¨å±äº¤ç»UDPå¤é¿çæ¥æï¼UDPå°±ç§æ ·åéï¼å³ä¸æ¬¡åéä¸ä¸ªæ¥æãåéæ¹çUDPå¯¹åºç¨ç¨åºäº¤ä¸æ¥çæ¥æï¼å¨æ·»å é¦é¨åå°±åä¸äº¤ä»ç»IPå±ãæ¢ä¸æåï¼ä¹ä¸åå¹¶ï¼èæ¯ä¿çè¿äºæ¥æçè¾¹çï¼å æ­¤ï¼åºç¨ç¨åºéè¦éæ©åéçæ¥æå¤§å°ã\n\né¢åå­èæµçè¯ï¼è½ç¶åºç¨ç¨åºåTCPçäº¤äºæ¯ä¸æ¬¡ä¸ä¸ªæ°æ®åï¼å¤§å°ä¸ç­ï¼ï¼ä½TCPæåºç¨ç¨åºçææ¯ä¸è¿ä¸²çæ ç»æçå­èæµãTCPæä¸ä¸ªç¼å²ï¼å½åºç¨ç¨åºä¼ éçæ°æ®åå¤ªé¿ï¼TCPå°±å¯ä»¥æå®ååç­ä¸äºåä¼ éãå¦æåºç¨ç¨åºä¸æ¬¡åªåéä¸ä¸ªå­èï¼TCPä¹å¯ä»¥ç­å¾ç§¯ç´¯æè¶³å¤å¤çå­èååæææ¥ææ®µåéåºå»ã\n\n\n# TCPåè®®\n\n * Transmission Control Protocolï¼ä¼ è¾æ§å¶åè®®\n * é¢åè¿æ¥çåè®®\n * éè¦ä¸æ¬¡æ¡æå»ºç«è¿æ¥\n * éè¦åæ¬¡æ¥ææ­å¼è¿æ¥\n * TCPæ¥å¤´æå°é¿åº¦ï¼20å­è\n\n\n# ä¸æ¬¡æ¡æçè¿ç¨ï¼\n\n 1. å®¢æ·ç«¯åéï¼SYN = 1, SEQ = X, ç«¯å£å·\n 2. æå¡å¨åå¤ï¼SYN = 1, ACK = X + 1, SEQ = Y\n 3. å®¢æ·ç«¯åéï¼ACK = Y + 1, SEQ = X + 1\n\n> ç¡®è®¤åºç­ä¿¡å·ACK = æ¶å°çSEQ + 1ã è¿æ¥å»ºç«ä¸­ï¼åæ­¥ä¿¡å·SYNå§ç»ä¸º1ãè¿æ¥å»ºç«åï¼åæ­¥ä¿¡å·SYN=0ã\n\n\n# åæ¬¡æ¥æè¿ç¨\n\n 1. AåBæåºåæ­¢è¿æ¥è¯·æ±ï¼FIN = 1\n 2. Bæ¶å°ï¼ACK = 1\n 3. BåAæåºåæ­¢è¿æ¥è¯·æ±ï¼FIN = 1\n 4. Aæ¶å°ï¼ACK = 1\n\nä¼ç¹ï¼\n\n * å¯é ï¼ç¨³å®\n   * ä¼ éæ°æ®åï¼ä¼æä¸æ¬¡æ¡æå»ºç«è¿æ¥\n   * ä¼ éæ°æ®æ¶ï¼æç¡®è®¤ãçªå£ãéä¼ ãæ¥å¡æ§å¶\n   * ä¼ éæ°æ®åï¼ä¼æ­å¼è¿æ¥èçç³»ç»èµæº\n\nç¼ºç¹ï¼\n\n * ä¼ è¾æ¢ï¼æçä½ï¼å ç¨ç³»ç»èµæºé«\n   * ä¼ éæ°æ®åï¼å»ºç«è¿æ¥éè¦èæ¶\n   * ä¼ éæ°æ®æ¶ï¼ç¡®è®¤ãéä¼ ãæ¥å¡ç­ä¼æ¶èå¤§éæ¶é´ä»¥åCPUååå­ç­ç¡¬ä»¶èµæº\n * æè¢«æ»å»\n   * å ä¸ºæç¡®è®¤æºå¶ï¼ä¸æ¬¡æ¡æç­æºå¶ï¼å®¹æè¢«äººå©ç¨ï¼å®ç°DOS ãDDOSæ»å»\n\nå¦ä½ä¿è¯æ¥æ¶çé¡ºåºæ§ï¼\n\n * TCPåè®®ä½¿ç¨SEQåACKæºå¶ä¿è¯äºé¡ºåºæ§\n * TCPçæ¯ä¸ªæ¥æé½æ¯æåºå·çãç¡®è®¤åºç­ä¿¡å·ACK=æ¶å°çSEQ+1\n\n----------------------------------------\n\n\n# UDPåè®®\n\n * User Data Protocolï¼ç¨æ·æ°æ®ååè®®\n * é¢åæ è¿æ¥çåè®®\n * UDPæ¥å¤´åªæ8å­è\n\nç®ä»ï¼\n\n * ä¼ è¾æ°æ®ä¹åæºç«¯åç»ç«¯ä¸å»ºç«è¿æ¥\n * å¨åéç«¯ï¼UDPä¼ éæ°æ®çéåº¦ä»ä»æ¯ååºç¨ç¨åºçææ°æ®çéåº¦ãè®¡ç®æºçè½ååä¼ è¾å¸¦å®½çéå¶\n * å¨æ¥æ¶ç«¯ï¼UDPææ¯ä¸ªæ¶æ¯æ®µæ¾å¨éåä¸­ï¼åºç¨ç¨åºæ¯æ¬¡ä»éåä¸­è¯»ä¸ä¸ªæ¶æ¯æ®µ\n * ç±äºä¼ è¾æ°æ®ä¸å»ºç«è¿æ¥ï¼å æ­¤ä¹å°±ä¸éè¦ç»´æ¤è¿æ¥ç¶æï¼åæ¬æ¶åç¶æç­ï¼å æ­¤ä¸å°æå¡æºå¯åæ¶åå¤ä¸ªå®¢æ·æºä¼ è¾ç¸åçæ¶æ¯\n * UDPä¿¡æ¯åçæ é¢å¾ç­ï¼åªæ8ä¸ªå­èï¼ç¸å¯¹äºTCPç20ä¸ªå­èä¿¡æ¯åçé¢å¤å¼éå¾å°\n * ååéä¸åæ¥æ¤æ§å¶ç®æ³çè°èï¼åªååºç¨è½¯ä»¶çææ°æ®çéçãä¼ è¾å¸¦å®½ãæºç«¯åç»ç«¯ä¸»æºæ§è½çéå¶\n * UDPä½¿ç¨å°½æå¤§åªåäº¤ä»ï¼å³ä¸ä¿è¯å¯é äº¤ä»ï¼å æ­¤ä¸»æºä¸éè¦ç»´æå¤æçé¾æ¥ç¶æè¡¨ã\n * UDPæ¯é¢åæ¥æçã\n\n> ä½¿ç¨âpingâå½ä»¤æ¥æµè¯ä¸¤å°ä¸»æºä¹é´TCP/IPéä¿¡æ¯å¦æ­£å¸¸ï¼å¶å®âpingâå½ä»¤çåçå°±æ¯åå¯¹æ¹ä¸»æºåéUDPæ°æ®åï¼ç¶åå¯¹æ¹ä¸»æºç¡®è®¤æ¶å°æ°æ®åï¼å¦ææ°æ®åæ¯å¦å°è¾¾çæ¶æ¯åæ¶åé¦åæ¥ï¼é£ä¹ç½ç»å°±æ¯éçã\n\nä¼ç¹ï¼\n\n * ä¼ è¾éçå¿«\n   * ä¼ è¾æ°æ®åï¼ä¸éè¦åTCPä¸æ ·å»ºç«è¿æ¥\n   * ä¼ è¾æ°æ®æ¶ï¼æ²¡æç¡®è®¤ãçªå£ãéä¼ ãæ¥å¡æ§å¶ç­æºå¶\n * è¾å®å¨\n   * ç±äºæ²¡æäºTCPçä¸äºæºå¶ï¼è¢«æ»å»èå©ç¨çæ¼æ´å°±å°äº\n\nç¼ºç¹ï¼\n\n * ä¸å¯é ï¼ä¸ç¨³å®\n   * ç±äºæ²¡æäºTCPçæºå¶ï¼å¨æ°æ®ä¼ è¾æ¶å¦æç½ç»ä¸å¥½ï¼å¾å¯è½ä¸¢å\n\nç¨UDPåè®®éè®¯æ¶ææ ·å¾ç¥ç®æ æºæ¯å¦è·å¾äºæ°æ®å ä»¿é TCPçåæ³ï¼æ¯åä¸ä¸ªUDPåï¼é½å¨éé¢å ä¸ä¸ªSEQåºå·ï¼æ¥æ¶æ¹æ¶å°ååï¼å°SEQåºå·åå¤ç»åéæ¹ãå¦æåéæ¹å¨æå®æ¶é´ä»¥åæ²¡ææ¶å°ååºï¼è¯´æä¸¢åäºã\n\n\n# TCPä¸UDPçåºå«\n\n----------------------------------------\n\nTCP             UDP\nTCPé¢åæé¾æ¥çéä¿¡æå¡   TCPé¢åæ é¾æ¥çéä¿¡æå¡\nTCPæä¾å¯é çéä¿¡ä¼ è¾    UDPä¸å¯é ,ä¼ä¸¢å\nTCPä¿è¯æ°æ®é¡ºåº       UDPä¸ä¿è¯\nTCPæ°æ®æ è¾¹ç        UDPæè¾¹ç\nTCPéåº¦æ¢          UDPéåº¦å¿«\nTCPé¢åå­èæµ        UDPé¢åæ¥æ\nTCPä¸å¯¹ä¸          UDPå¯ä»¥ä¸å¯¹ä¸ï¼ä¸å¯¹å¤\nTCPæ¥å¤´è³å°20å­è     UDPæ¥å¤´8å­è\nTCPææµéæ§å¶ï¼æ¥å¡æ§å¶   UDPæ²¡æ\n\n\n# ä¸ºä»ä¹UDPæ¯TCPå¿«\n\n 1. TCPéè¦ä¸æ¬¡æ¡æ\n 2. TCPææ¥å¡æ§å¶ï¼æ§å¶æµéç­æºå¶\n\n\n# ä¸ºä»ä¹TCPæ¯UDPå¯é \n\n 1. TCPæ¯é¢åæè¿æ¥çï¼å»ºç«è¿æ¥ä¹åæåéæ°æ®ï¼èUDPåä¸ç®¡å¯¹æ¹å­ä¸å­å¨é½ä¼åéæ°æ®ã\n 2. TCPæç¡®è®¤æºå¶ï¼æ¥æ¶ç«¯æ¯æ¶å°ä¸ä¸ªæ­£ç¡®åé½ä¼ååºç»åéç«¯ãè¶æ¶æèæ°æ®åä¸å®æ´çè¯åéç«¯ä¼éä¼ ãUDPæ²¡æãå æ­¤å¯è½ä¸¢åã\n\n\n# ä»ä¹æ¶åä½¿ç¨TCP\n\nå½å¯¹ç½ç»éè®¯è´¨éæè¦æ±çæ¶åï¼\n\n * æ¯å¦ï¼æ´ä¸ªæ°æ®è¦åç¡®æ è¯¯çä¼ éç»å¯¹æ¹ï¼è¿å¾å¾ç¨äºä¸äºè¦æ±å¯é çåºç¨ï¼\n * æ¯å¦HTTPãHTTPSãFTPç­ä¼ è¾æä»¶çåè®®ï¼POPãSMTPç­é®ä»¶ä¼ è¾çåè®®ã\n\nå¨æ¥å¸¸çæ´»ä¸­ï¼å¸¸è§ä½¿ç¨TCPåè®®çåºç¨å¦ä¸ï¼\n\n * æµè§å¨ï¼ç¨çHTTP\n * FlashFXPï¼ç¨çFTP\n * Outlookï¼ç¨çPOPãSMTP\n * QQæä»¶ä¼ è¾\n\nä»ä¹æ¶ååºè¯¥ä½¿ç¨UDPï¼\n\n * å½å¯¹ç½ç»éè®¯è´¨éè¦æ±ä¸é«çæ¶åï¼è¦æ±ç½ç»éè®¯éåº¦è½å°½éçå¿«ï¼è¿æ¶å°±å¯ä»¥ä½¿ç¨UDPã\n * æ¯å¦ï¼æ¥å¸¸çæ´»ä¸­ï¼å¸¸è§ä½¿ç¨UDPåè®®çåºç¨å¦ä¸ï¼\n   * QQè¯­é³\n   * QQè§é¢\n   * TFTP\n\n\n# TCPæ è¾¹çï¼UDPæè¾¹ç\n\nTCPæ è¾¹ç\n\n * å®¢æ·ç«¯åå¤æ¬¡åéæ°æ®ç»æå¡å¨ï¼è¥æå¡å¨çç¼å²åºå¤å¤§ï¼é£ä¹æå¡å¨ç«¯ä¼å¨å®¢æ·ç«¯åéå®ä¹åä¸æ¬¡æ§æ¥æ¶è¿æ¥ï¼æä»¥æ¯æ è¾¹ççï¼\n\nUDPæè¾¹ç\n\n * å®¢æ·ç«¯æ¯åéä¸æ¬¡ï¼æå¡å¨ç«¯å°±ä¼æ¥æ¶ä¸æ¬¡ï¼ä¹å°±æ¯è¯´åéå¤å°æ¬¡å°±ä¼æ¥æ¶å¤å°æ¬¡ï¼å æ­¤æ¯æè¾¹ççã",normalizedContent:"# tcpä¸udp å¯¹æ¯\n\n----------------------------------------\n\né¢åæ¥æçä¼ è¾æ¹å¼æ¯åºç¨å±äº¤ç»udpå¤é¿çæ¥æï¼udpå°±ç§æ ·åéï¼å³ä¸æ¬¡åéä¸ä¸ªæ¥æãåéæ¹çudpå¯¹åºç¨ç¨åºäº¤ä¸æ¥çæ¥æï¼å¨æ·»å é¦é¨åå°±åä¸äº¤ä»ç»ipå±ãæ¢ä¸æåï¼ä¹ä¸åå¹¶ï¼èæ¯ä¿çè¿äºæ¥æçè¾¹çï¼å æ­¤ï¼åºç¨ç¨åºéè¦éæ©åéçæ¥æå¤§å°ã\n\né¢åå­èæµçè¯ï¼è½ç¶åºç¨ç¨åºåtcpçäº¤äºæ¯ä¸æ¬¡ä¸ä¸ªæ°æ®åï¼å¤§å°ä¸ç­ï¼ï¼ä½tcpæåºç¨ç¨åºçææ¯ä¸è¿ä¸²çæ ç»æçå­èæµãtcpæä¸ä¸ªç¼å²ï¼å½åºç¨ç¨åºä¼ éçæ°æ®åå¤ªé¿ï¼tcpå°±å¯ä»¥æå®ååç­ä¸äºåä¼ éãå¦æåºç¨ç¨åºä¸æ¬¡åªåéä¸ä¸ªå­èï¼tcpä¹å¯ä»¥ç­å¾ç§¯ç´¯æè¶³å¤å¤çå­èååæææ¥ææ®µåéåºå»ã\n\n\n# tcpåè®®\n\n * transmission control protocolï¼ä¼ è¾æ§å¶åè®®\n * é¢åè¿æ¥çåè®®\n * éè¦ä¸æ¬¡æ¡æå»ºç«è¿æ¥\n * éè¦åæ¬¡æ¥ææ­å¼è¿æ¥\n * tcpæ¥å¤´æå°é¿åº¦ï¼20å­è\n\n\n# ä¸æ¬¡æ¡æçè¿ç¨ï¼\n\n 1. å®¢æ·ç«¯åéï¼syn = 1, seq = x, ç«¯å£å·\n 2. æå¡å¨åå¤ï¼syn = 1, ack = x + 1, seq = y\n 3. å®¢æ·ç«¯åéï¼ack = y + 1, seq = x + 1\n\n> ç¡®è®¤åºç­ä¿¡å·ack = æ¶å°çseq + 1ã è¿æ¥å»ºç«ä¸­ï¼åæ­¥ä¿¡å·synå§ç»ä¸º1ãè¿æ¥å»ºç«åï¼åæ­¥ä¿¡å·syn=0ã\n\n\n# åæ¬¡æ¥æè¿ç¨\n\n 1. aåbæåºåæ­¢è¿æ¥è¯·æ±ï¼fin = 1\n 2. bæ¶å°ï¼ack = 1\n 3. båaæåºåæ­¢è¿æ¥è¯·æ±ï¼fin = 1\n 4. aæ¶å°ï¼ack = 1\n\nä¼ç¹ï¼\n\n * å¯é ï¼ç¨³å®\n   * ä¼ éæ°æ®åï¼ä¼æä¸æ¬¡æ¡æå»ºç«è¿æ¥\n   * ä¼ éæ°æ®æ¶ï¼æç¡®è®¤ãçªå£ãéä¼ ãæ¥å¡æ§å¶\n   * ä¼ éæ°æ®åï¼ä¼æ­å¼è¿æ¥èçç³»ç»èµæº\n\nç¼ºç¹ï¼\n\n * ä¼ è¾æ¢ï¼æçä½ï¼å ç¨ç³»ç»èµæºé«\n   * ä¼ éæ°æ®åï¼å»ºç«è¿æ¥éè¦èæ¶\n   * ä¼ éæ°æ®æ¶ï¼ç¡®è®¤ãéä¼ ãæ¥å¡ç­ä¼æ¶èå¤§éæ¶é´ä»¥åcpuååå­ç­ç¡¬ä»¶èµæº\n * æè¢«æ»å»\n   * å ä¸ºæç¡®è®¤æºå¶ï¼ä¸æ¬¡æ¡æç­æºå¶ï¼å®¹æè¢«äººå©ç¨ï¼å®ç°dos ãddosæ»å»\n\nå¦ä½ä¿è¯æ¥æ¶çé¡ºåºæ§ï¼\n\n * tcpåè®®ä½¿ç¨seqåackæºå¶ä¿è¯äºé¡ºåºæ§\n * tcpçæ¯ä¸ªæ¥æé½æ¯æåºå·çãç¡®è®¤åºç­ä¿¡å·ack=æ¶å°çseq+1\n\n----------------------------------------\n\n\n# udpåè®®\n\n * user data protocolï¼ç¨æ·æ°æ®ååè®®\n * é¢åæ è¿æ¥çåè®®\n * udpæ¥å¤´åªæ8å­è\n\nç®ä»ï¼\n\n * ä¼ è¾æ°æ®ä¹åæºç«¯åç»ç«¯ä¸å»ºç«è¿æ¥\n * å¨åéç«¯ï¼udpä¼ éæ°æ®çéåº¦ä»ä»æ¯ååºç¨ç¨åºçææ°æ®çéåº¦ãè®¡ç®æºçè½ååä¼ è¾å¸¦å®½çéå¶\n * å¨æ¥æ¶ç«¯ï¼udpææ¯ä¸ªæ¶æ¯æ®µæ¾å¨éåä¸­ï¼åºç¨ç¨åºæ¯æ¬¡ä»éåä¸­è¯»ä¸ä¸ªæ¶æ¯æ®µ\n * ç±äºä¼ è¾æ°æ®ä¸å»ºç«è¿æ¥ï¼å æ­¤ä¹å°±ä¸éè¦ç»´æ¤è¿æ¥ç¶æï¼åæ¬æ¶åç¶æç­ï¼å æ­¤ä¸å°æå¡æºå¯åæ¶åå¤ä¸ªå®¢æ·æºä¼ è¾ç¸åçæ¶æ¯\n * udpä¿¡æ¯åçæ é¢å¾ç­ï¼åªæ8ä¸ªå­èï¼ç¸å¯¹äºtcpç20ä¸ªå­èä¿¡æ¯åçé¢å¤å¼éå¾å°\n * ååéä¸åæ¥æ¤æ§å¶ç®æ³çè°èï¼åªååºç¨è½¯ä»¶çææ°æ®çéçãä¼ è¾å¸¦å®½ãæºç«¯åç»ç«¯ä¸»æºæ§è½çéå¶\n * udpä½¿ç¨å°½æå¤§åªåäº¤ä»ï¼å³ä¸ä¿è¯å¯é äº¤ä»ï¼å æ­¤ä¸»æºä¸éè¦ç»´æå¤æçé¾æ¥ç¶æè¡¨ã\n * udpæ¯é¢åæ¥æçã\n\n> ä½¿ç¨âpingâå½ä»¤æ¥æµè¯ä¸¤å°ä¸»æºä¹é´tcp/ipéä¿¡æ¯å¦æ­£å¸¸ï¼å¶å®âpingâå½ä»¤çåçå°±æ¯åå¯¹æ¹ä¸»æºåéudpæ°æ®åï¼ç¶åå¯¹æ¹ä¸»æºç¡®è®¤æ¶å°æ°æ®åï¼å¦ææ°æ®åæ¯å¦å°è¾¾çæ¶æ¯åæ¶åé¦åæ¥ï¼é£ä¹ç½ç»å°±æ¯éçã\n\nä¼ç¹ï¼\n\n * ä¼ è¾éçå¿«\n   * ä¼ è¾æ°æ®åï¼ä¸éè¦åtcpä¸æ ·å»ºç«è¿æ¥\n   * ä¼ è¾æ°æ®æ¶ï¼æ²¡æç¡®è®¤ãçªå£ãéä¼ ãæ¥å¡æ§å¶ç­æºå¶\n * è¾å®å¨\n   * ç±äºæ²¡æäºtcpçä¸äºæºå¶ï¼è¢«æ»å»èå©ç¨çæ¼æ´å°±å°äº\n\nç¼ºç¹ï¼\n\n * ä¸å¯é ï¼ä¸ç¨³å®\n   * ç±äºæ²¡æäºtcpçæºå¶ï¼å¨æ°æ®ä¼ è¾æ¶å¦æç½ç»ä¸å¥½ï¼å¾å¯è½ä¸¢å\n\nç¨udpåè®®éè®¯æ¶ææ ·å¾ç¥ç®æ æºæ¯å¦è·å¾äºæ°æ®å ä»¿é tcpçåæ³ï¼æ¯åä¸ä¸ªudpåï¼é½å¨éé¢å ä¸ä¸ªseqåºå·ï¼æ¥æ¶æ¹æ¶å°ååï¼å°seqåºå·åå¤ç»åéæ¹ãå¦æåéæ¹å¨æå®æ¶é´ä»¥åæ²¡ææ¶å°ååºï¼è¯´æä¸¢åäºã\n\n\n# tcpä¸udpçåºå«\n\n----------------------------------------\n\ntcp             udp\ntcpé¢åæé¾æ¥çéä¿¡æå¡   tcpé¢åæ é¾æ¥çéä¿¡æå¡\ntcpæä¾å¯é çéä¿¡ä¼ è¾    udpä¸å¯é ,ä¼ä¸¢å\ntcpä¿è¯æ°æ®é¡ºåº       udpä¸ä¿è¯\ntcpæ°æ®æ è¾¹ç        udpæè¾¹ç\ntcpéåº¦æ¢          udpéåº¦å¿«\ntcpé¢åå­èæµ        udpé¢åæ¥æ\ntcpä¸å¯¹ä¸          udpå¯ä»¥ä¸å¯¹ä¸ï¼ä¸å¯¹å¤\ntcpæ¥å¤´è³å°20å­è     udpæ¥å¤´8å­è\ntcpææµéæ§å¶ï¼æ¥å¡æ§å¶   udpæ²¡æ\n\n\n# ä¸ºä»ä¹udpæ¯tcpå¿«\n\n 1. tcpéè¦ä¸æ¬¡æ¡æ\n 2. tcpææ¥å¡æ§å¶ï¼æ§å¶æµéç­æºå¶\n\n\n# ä¸ºä»ä¹tcpæ¯udpå¯é \n\n 1. tcpæ¯é¢åæè¿æ¥çï¼å»ºç«è¿æ¥ä¹åæåéæ°æ®ï¼èudpåä¸ç®¡å¯¹æ¹å­ä¸å­å¨é½ä¼åéæ°æ®ã\n 2. tcpæç¡®è®¤æºå¶ï¼æ¥æ¶ç«¯æ¯æ¶å°ä¸ä¸ªæ­£ç¡®åé½ä¼ååºç»åéç«¯ãè¶æ¶æèæ°æ®åä¸å®æ´çè¯åéç«¯ä¼éä¼ ãudpæ²¡æãå æ­¤å¯è½ä¸¢åã\n\n\n# ä»ä¹æ¶åä½¿ç¨tcp\n\nå½å¯¹ç½ç»éè®¯è´¨éæè¦æ±çæ¶åï¼\n\n * æ¯å¦ï¼æ´ä¸ªæ°æ®è¦åç¡®æ è¯¯çä¼ éç»å¯¹æ¹ï¼è¿å¾å¾ç¨äºä¸äºè¦æ±å¯é çåºç¨ï¼\n * æ¯å¦httpãhttpsãftpç­ä¼ è¾æä»¶çåè®®ï¼popãsmtpç­é®ä»¶ä¼ è¾çåè®®ã\n\nå¨æ¥å¸¸çæ´»ä¸­ï¼å¸¸è§ä½¿ç¨tcpåè®®çåºç¨å¦ä¸ï¼\n\n * æµè§å¨ï¼ç¨çhttp\n * flashfxpï¼ç¨çftp\n * outlookï¼ç¨çpopãsmtp\n * qqæä»¶ä¼ è¾\n\nä»ä¹æ¶ååºè¯¥ä½¿ç¨udpï¼\n\n * å½å¯¹ç½ç»éè®¯è´¨éè¦æ±ä¸é«çæ¶åï¼è¦æ±ç½ç»éè®¯éåº¦è½å°½éçå¿«ï¼è¿æ¶å°±å¯ä»¥ä½¿ç¨udpã\n * æ¯å¦ï¼æ¥å¸¸çæ´»ä¸­ï¼å¸¸è§ä½¿ç¨udpåè®®çåºç¨å¦ä¸ï¼\n   * qqè¯­é³\n   * qqè§é¢\n   * tftp\n\n\n# tcpæ è¾¹çï¼udpæè¾¹ç\n\ntcpæ è¾¹ç\n\n * å®¢æ·ç«¯åå¤æ¬¡åéæ°æ®ç»æå¡å¨ï¼è¥æå¡å¨çç¼å²åºå¤å¤§ï¼é£ä¹æå¡å¨ç«¯ä¼å¨å®¢æ·ç«¯åéå®ä¹åä¸æ¬¡æ§æ¥æ¶è¿æ¥ï¼æä»¥æ¯æ è¾¹ççï¼\n\nudpæè¾¹ç\n\n * å®¢æ·ç«¯æ¯åéä¸æ¬¡ï¼æå¡å¨ç«¯å°±ä¼æ¥æ¶ä¸æ¬¡ï¼ä¹å°±æ¯è¯´åéå¤å°æ¬¡å°±ä¼æ¥æ¶å¤å°æ¬¡ï¼å æ­¤æ¯æè¾¹ççã",charsets:{cjk:!0}},{title:"tcpipæç»´å¯¼å¾",frontmatter:{title:"tcpipæç»´å¯¼å¾",date:"2019-01-05T00:00:00.000Z",description:"tcpipæç»´å¯¼å¾",categories:["network"],tags:["tcp"],permalink:null},regularPath:"/blog/network/tcpip_mind_map.html",relativePath:"blog/network/tcpip_mind_map.md",key:"v-319db75f",path:"/blog/network/tcpip_mind_map.html",headersStr:null,content:"# tcpipæç»´å¯¼å¾\n\n",normalizedContent:"# tcpipæç»´å¯¼å¾\n\n",charsets:{cjk:!0}},{title:"Platform ç®å½",frontmatter:{published:!0,title:"Platform ç®å½",description:"platform ç¸å³ç¥è¯æ±æ»",keywords:[""],categories:["platform"],permalink:"/blog/platform/",date:"2020-04-14T00:00:00.000Z",tags:[null]},regularPath:"/blog/platform/",relativePath:"blog/platform/README.md",key:"v-5354451a",path:"/blog/platform/",headers:[{level:2,title:"ä¸ã Android",slug:"ä¸ã-android",normalizedTitle:"ä¸ã android",charIndex:18},{level:2,title:"äºã Linux",slug:"äºã-linux",normalizedTitle:"äºã linux",charIndex:45},{level:2,title:"ä¸ã Windows",slug:"ä¸ã-windows",normalizedTitle:"ä¸ã windows",charIndex:91}],headersStr:"ä¸ã Android äºã Linux ä¸ã Windows",content:"# PLATFORM ç®å½\n\n\n# ä¸ã Android\n\n * Android\n\n\n# äºã Linux\n\n * Linux Cmds\n * Linux åå­ç¼æ¢å¢é¿é®é¢\n\n\n# ä¸ã Windows\n\n * Pe ç­¾å\n * è¿è¡æ¶åº\n * Introduction To Pdb\n * çæ Win10 ä¸è°è¯æå¡æ¶çè¯ä¹¦",normalizedContent:"# platform ç®å½\n\n\n# ä¸ã android\n\n * android\n\n\n# äºã linux\n\n * linux cmds\n * linux åå­ç¼æ¢å¢é¿é®é¢\n\n\n# ä¸ã windows\n\n * pe ç­¾å\n * è¿è¡æ¶åº\n * introduction to pdb\n * çæ win10 ä¸è°è¯æå¡æ¶çè¯ä¹¦",charsets:{cjk:!0}},{title:"Android",frontmatter:{title:"Android",date:"2021-11-24T11:50:00.000Z",lastmod:null,publish:!0,categories:null,keywords:null,description:null,tags:null,permalink:null},regularPath:"/blog/platform/android/android_utils.html",relativePath:"blog/platform/android/android_utils.md",key:"v-48032f1f",path:"/blog/platform/android/android_utils.html",headers:[{level:2,title:"UIAutomatorViewer",slug:"uiautomatorviewer",normalizedTitle:"uiautomatorviewer",charIndex:23}],headersStr:"UIAutomatorViewer",content:"# Android\n\n * è®¾è®¡æ¨¡å¼\n\n\n# UIAutomatorViewer\n\n * Broken GUI of UIAutomatorViewer on MacOS Big Sur\n   \n   https://github.com/android/android-test/issues/911\n   \n     Download the latest swt.jar, from https://download.eclipse.org/eclipse/downloads/index.html, rename downloaded swt.jar to swt2.jar, copy to Android/sdk/tools/lib/x86_64/, NOT REPLACE, NOT DELETE, then, try it~~\n   \n     You must use version 4.20:\n       https://www.eclipse.org/downloads/download.php?file=/eclipse/downloads/drops4/R-4.20-202106111600/swt-4.20-cocoa-macosx-x86_64.zip\n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   ",normalizedContent:"# android\n\n * è®¾è®¡æ¨¡å¼\n\n\n# uiautomatorviewer\n\n * broken gui of uiautomatorviewer on macos big sur\n   \n   https://github.com/android/android-test/issues/911\n   \n     download the latest swt.jar, from https://download.eclipse.org/eclipse/downloads/index.html, rename downloaded swt.jar to swt2.jar, copy to android/sdk/tools/lib/x86_64/, not replace, not delete, then, try it~~\n   \n     you must use version 4.20:\n       https://www.eclipse.org/downloads/download.php?file=/eclipse/downloads/drops4/r-4.20-202106111600/swt-4.20-cocoa-macosx-x86_64.zip\n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   ",charsets:{cjk:!0}},{title:"linux cmds",frontmatter:{title:"linux cmds",date:"2019-12-23T00:00:00.000Z",description:"linux å¸¸ç¨å½ä»¤éé¦",categories:["blog","platform","linux"],tags:[null],permalink:null},regularPath:"/blog/platform/linux/linux_cmds.html",relativePath:"blog/platform/linux/linux_cmds.md",key:"v-485139ef",path:"/blog/platform/linux/linux_cmds.html",headers:[{level:2,title:"Common",slug:"common",normalizedTitle:"common",charIndex:2},{level:2,title:"systemctl",slug:"systemctl",normalizedTitle:"systemctl",charIndex:2921},{level:2,title:"Git",slug:"git",normalizedTitle:"git",charIndex:3263},{level:2,title:"Problems",slug:"problems",normalizedTitle:"problems",charIndex:3776},{level:2,title:"CentOSåå»ºSSHå¯é¥",slug:"centosåå»ºsshå¯é¥",normalizedTitle:"centosåå»ºsshå¯é¥",charIndex:3958},{level:2,title:"Linux æ§è½é¢åå¤§å¸å¸ä¼¦ä¸¹Â·æ ¼é·æ ¼çå·¥å·å¾è°±",slug:"linux-æ§è½é¢åå¤§å¸å¸ä¼¦ä¸¹Â·æ ¼é·æ ¼çå·¥å·å¾è°±",normalizedTitle:"linux æ§è½é¢åå¤§å¸å¸ä¼¦ä¸¹Â·æ ¼é·æ ¼çå·¥å·å¾è°±",charIndex:4172}],headersStr:"Common systemctl Git Problems CentOSåå»ºSSHå¯é¥ Linux æ§è½é¢åå¤§å¸å¸ä¼¦ä¸¹Â·æ ¼é·æ ¼çå·¥å·å¾è°±",content:'# Common\n\nCATEGORY   COMMAND    FUNCTION       EXAMPLE                                                       NOTE\n.          grep       grep æ¥æ¾        grep -ar "select" ./conf                                      \n.          sed        sed ç¼è¾                                                                       \n.          awk        awk åæ         awk \'{arr[$3]++}END{for(i in arr) print                       \n                                     substr(i,0,length(i)-1)}\'\n.          xargs      å°æ åè¾å¥ä½ä¸ºå½ä»¤çåæ°   ps -ef | pgrep %s | xargs -I {} kill -9 {}                    ç®¡éæ¯å°åé¢çæ åè¾åºä½ä¸ºåé¢çæ åè¾å¥\n.          lsof                      lsof | grep -i delete                                         \n.          nohup                     sudo nohup xxx &                                              \n.          top                       åå­æåº : top -a -n 1 -c CPUæåº : top -n 1 -c                     \n.          tcpdump                   tcpdump -i any -Xxns0 -c 100 host xx.xx.xx.xx and port xxxx   \n.          perf                      perf top -p {pid}                                             \n.          iftop                                                                                   \n.          dos2unix                                                                                \n.          pstree                    pstree -c -a > pstree.log                                     \n.          ulimit                    ulimit [type: -H/-S] [cmd: -a/...] [arg: 0/unlimited/...]     \n.          strace                    strace -p 34542 -s 128 -T                                     trussãstrace ä»¥å ltrace\n\n * pig\n   * æ¬å°æ§è¡ï¼pig -x local xxx.pig\n * gdb\n   * gdb [bin] core_dump\n   * gdb attach [pid]\n     * c : continue\n * memcache\n   \n   memcache:\n       telnet host port\n           å¼ºå¶éåºï¼ctrl + \']\'\n       stats\n       stats cachedump slabs_id limit_num\n   \n   \n   1\n   2\n   3\n   4\n   5\n   \n * èªå¯å¨\n   \n   # ä¸é¢ä»»å¡å¯ä»¥å¨ chkconfig éç½®èªå¯å¨\n   /etc/init.d/*    \n   # ç´æ¥åå°èæ¬éé¢\n   /etc/rc.local    \n   # æ¥çæä¸ªæå¡ï¼ä¸é¢ä»¥redisä¸ºä¾ï¼æ¯å¦èªå¯å¨\n   chkconfig --list|grep redis\n   # å¦æ 3ï¼4ï¼5ä¸º offåä¸ä¼èªå¯å¨\n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   7\n   \n * æ²¡æéç½®hostæ¶ï¼å½æ° gethostbyname ä¼è¿åç©ºï¼\n   * ä¿®æ¹ï¼/etc/hosts\n   * ä¿®æ¹(éå¯åä¾ç¶çæ)ï¼/etc/sysconfig/network\n   * æ§è¡(å½æ¬¡çæ)ï¼hostname xxx\n * Makefile\n   * éæåºï¼-L[lib_dir] -l[lib(libname)] ï¼æ³¨æï¼gccå¨æ¥æ¾åºçæ¶åä¼èªå¨æ·»å å¼libåç¼åæ¥æ¾\n   * å¤çº¿ç¨ï¼-lpthread ï¼æ³¨æï¼ç¼è¯å¤çº¿ç¨æ¶ï¼éè¦é¾æ¥pthread\n * æ¡ä»¶åéæ¯ GNU/Linux æä¾çç¬¬ä¸ç§åæ­¥å·¥å·(ç¬¬ä¸äºæ¥ä½ãç¬¬äºè¿ä¿¡å·é)\n * crontab\n   * ç¨æ· : /var/spool/cron/*\n   * ç³»ç» : /etc/crontabã/etc/cron.d\n   * ä¸å¸¸ç¨ : /etc/[cron.hourlyãcron.dailyãcron.weeklyãcron.monthly]\n * hadoop\n   * HADOOP_USER_NAME=hdfs hdfs dfs -rmr\n * pyspark\n   * æäº¤ä»»å¡ &\n     \n     sudo -u news_db spark-submit --master local[*] --conf spark.ui.port=12399 --queue offline --py-files pyspark_dashboard_util.py pyspark_dashboard.py\n     \n     \n     1\n     \n   * æå¼æä»¶\n     * sc.textFile("file://[absolute path]")\n     * sc.textFile("hdfs://url:port/[path]")\n\n\n# systemctl\n\n * CentOS 7\n   * ä½ç½®ï¼æå¡systemctlèæ¬å­æ¾å¨ï¼(éç½®æä»¶ä¼åçº§ä¾æ¬¡ä»ä½å°é«)\n     * /usr/lib/systemd/ï¼æç³»ç» system åç¨æ· user ä¹åï¼å³ï¼/usr/lib/systemd/system å /usr/lib/systemd/user\n     * /run/systemd/system\n     * /etc/systemd/system\n   * å¼æºå¯å¨\n     * systemctl enable [service, å¦ï¼nginx.service]\n   * å³æº/éå¯\n     * systemctl poweroff\n     * systemctl reboot\n\n\n# Git\n\n * create\n   * local\n     * git checkout -b [origin/]\n        * é»è®¤æ¯åºäºæ¬å°HEADåå»ºåæ¯\n   \n   * remote\n     * git push A B:C\n       * å¶ä¸­AåCæ¯åå«remoteç«¯çä¸ä¸ªrepositoryçåå­åbranchçåå­ï¼Bæ¯æ¬å°ç«¯branchçåå­\n       * æææ¯ææ¬å°çBæ¨éå°remotes/A/Cä¸\n       * å½B==Cæ¶å¯ä»¥ç´æ¥çç¥ä¸ºï¼git push A B\n * delete\n   * remote\n     * git push origin :A\n       * æ¨éä¸ä¸ªç©ºåæ¯å°è¿ç¨åæ¯ï¼å°±ç¸å½äºå é¤è¿ç¨åæ¯\n     * git push origin --delete A\n   * local\n     * git branch -D dev\n * tag\n   * git tag -a v0.0.1 -m \'tag message to describe this version\'\n   * git push origin v0.0.1\n\n\n# Problems\n\n 1. å¨ ubuntu ä¸­ç§»å¨ 50000 å¼ å¾ççå¾ççæ¶åéå°å¦ä¸é®é¢ï¼-bash: /bin/mv: Argument list too long\n    * ä½¿ç¨ find sourcePath/ -type f -name "*.*" -exec mv {} targetPath/ \\; å¯ä»¥è§£å³ï¼æ³¨æä¸è½ç¼ºå°ç»å°¾ç ;\n\n\n# CentOSåå»ºSSHå¯é¥\n\n 1. è¾å¥ä»¥ä¸å½ä»¤ä»¥åå»º rsa ç§é¥ï¼ssh-keygen -t rsa\n 2. æ¥çäº§çä¸¤ä¸ªæä»¶ï¼id_rsaãid_rsa.pub (ä¸è¬å¨ ~/.ssh/ ç®å½ä¸)\n 3. éå½å id_rsa.pub ä¸º authorized_key: cp ~/.ssh/id_rsa.pub ~/.ssh/authorized_keys\n 4. æ§è¡ ssh localhost è¿è¡éªè¯\n\n\n# Linux æ§è½é¢åå¤§å¸å¸ä¼¦ä¸¹Â·æ ¼é·æ ¼çå·¥å·å¾è°±\n\n',normalizedContent:'# common\n\ncategory   command    function       example                                                       note\n.          grep       grep æ¥æ¾        grep -ar "select" ./conf                                      \n.          sed        sed ç¼è¾                                                                       \n.          awk        awk åæ         awk \'{arr[$3]++}end{for(i in arr) print                       \n                                     substr(i,0,length(i)-1)}\'\n.          xargs      å°æ åè¾å¥ä½ä¸ºå½ä»¤çåæ°   ps -ef | pgrep %s | xargs -i {} kill -9 {}                    ç®¡éæ¯å°åé¢çæ åè¾åºä½ä¸ºåé¢çæ åè¾å¥\n.          lsof                      lsof | grep -i delete                                         \n.          nohup                     sudo nohup xxx &                                              \n.          top                       åå­æåº : top -a -n 1 -c cpuæåº : top -n 1 -c                     \n.          tcpdump                   tcpdump -i any -xxns0 -c 100 host xx.xx.xx.xx and port xxxx   \n.          perf                      perf top -p {pid}                                             \n.          iftop                                                                                   \n.          dos2unix                                                                                \n.          pstree                    pstree -c -a > pstree.log                                     \n.          ulimit                    ulimit [type: -h/-s] [cmd: -a/...] [arg: 0/unlimited/...]     \n.          strace                    strace -p 34542 -s 128 -t                                     trussãstrace ä»¥å ltrace\n\n * pig\n   * æ¬å°æ§è¡ï¼pig -x local xxx.pig\n * gdb\n   * gdb [bin] core_dump\n   * gdb attach [pid]\n     * c : continue\n * memcache\n   \n   memcache:\n       telnet host port\n           å¼ºå¶éåºï¼ctrl + \']\'\n       stats\n       stats cachedump slabs_id limit_num\n   \n   \n   1\n   2\n   3\n   4\n   5\n   \n * èªå¯å¨\n   \n   # ä¸é¢ä»»å¡å¯ä»¥å¨ chkconfig éç½®èªå¯å¨\n   /etc/init.d/*    \n   # ç´æ¥åå°èæ¬éé¢\n   /etc/rc.local    \n   # æ¥çæä¸ªæå¡ï¼ä¸é¢ä»¥redisä¸ºä¾ï¼æ¯å¦èªå¯å¨\n   chkconfig --list|grep redis\n   # å¦æ 3ï¼4ï¼5ä¸º offåä¸ä¼èªå¯å¨\n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   7\n   \n * æ²¡æéç½®hostæ¶ï¼å½æ° gethostbyname ä¼è¿åç©ºï¼\n   * ä¿®æ¹ï¼/etc/hosts\n   * ä¿®æ¹(éå¯åä¾ç¶çæ)ï¼/etc/sysconfig/network\n   * æ§è¡(å½æ¬¡çæ)ï¼hostname xxx\n * makefile\n   * éæåºï¼-l[lib_dir] -l[lib(libname)] ï¼æ³¨æï¼gccå¨æ¥æ¾åºçæ¶åä¼èªå¨æ·»å å¼libåç¼åæ¥æ¾\n   * å¤çº¿ç¨ï¼-lpthread ï¼æ³¨æï¼ç¼è¯å¤çº¿ç¨æ¶ï¼éè¦é¾æ¥pthread\n * æ¡ä»¶åéæ¯ gnu/linux æä¾çç¬¬ä¸ç§åæ­¥å·¥å·(ç¬¬ä¸äºæ¥ä½ãç¬¬äºè¿ä¿¡å·é)\n * crontab\n   * ç¨æ· : /var/spool/cron/*\n   * ç³»ç» : /etc/crontabã/etc/cron.d\n   * ä¸å¸¸ç¨ : /etc/[cron.hourlyãcron.dailyãcron.weeklyãcron.monthly]\n * hadoop\n   * hadoop_user_name=hdfs hdfs dfs -rmr\n * pyspark\n   * æäº¤ä»»å¡ &\n     \n     sudo -u news_db spark-submit --master local[*] --conf spark.ui.port=12399 --queue offline --py-files pyspark_dashboard_util.py pyspark_dashboard.py\n     \n     \n     1\n     \n   * æå¼æä»¶\n     * sc.textfile("file://[absolute path]")\n     * sc.textfile("hdfs://url:port/[path]")\n\n\n# systemctl\n\n * centos 7\n   * ä½ç½®ï¼æå¡systemctlèæ¬å­æ¾å¨ï¼(éç½®æä»¶ä¼åçº§ä¾æ¬¡ä»ä½å°é«)\n     * /usr/lib/systemd/ï¼æç³»ç» system åç¨æ· user ä¹åï¼å³ï¼/usr/lib/systemd/system å /usr/lib/systemd/user\n     * /run/systemd/system\n     * /etc/systemd/system\n   * å¼æºå¯å¨\n     * systemctl enable [service, å¦ï¼nginx.service]\n   * å³æº/éå¯\n     * systemctl poweroff\n     * systemctl reboot\n\n\n# git\n\n * create\n   * local\n     * git checkout -b [origin/]\n        * é»è®¤æ¯åºäºæ¬å°headåå»ºåæ¯\n   \n   * remote\n     * git push a b:c\n       * å¶ä¸­aåcæ¯åå«remoteç«¯çä¸ä¸ªrepositoryçåå­åbranchçåå­ï¼bæ¯æ¬å°ç«¯branchçåå­\n       * æææ¯ææ¬å°çbæ¨éå°remotes/a/cä¸\n       * å½b==cæ¶å¯ä»¥ç´æ¥çç¥ä¸ºï¼git push a b\n * delete\n   * remote\n     * git push origin :a\n       * æ¨éä¸ä¸ªç©ºåæ¯å°è¿ç¨åæ¯ï¼å°±ç¸å½äºå é¤è¿ç¨åæ¯\n     * git push origin --delete a\n   * local\n     * git branch -d dev\n * tag\n   * git tag -a v0.0.1 -m \'tag message to describe this version\'\n   * git push origin v0.0.1\n\n\n# problems\n\n 1. å¨ ubuntu ä¸­ç§»å¨ 50000 å¼ å¾ççå¾ççæ¶åéå°å¦ä¸é®é¢ï¼-bash: /bin/mv: argument list too long\n    * ä½¿ç¨ find sourcepath/ -type f -name "*.*" -exec mv {} targetpath/ \\; å¯ä»¥è§£å³ï¼æ³¨æä¸è½ç¼ºå°ç»å°¾ç ;\n\n\n# centosåå»ºsshå¯é¥\n\n 1. è¾å¥ä»¥ä¸å½ä»¤ä»¥åå»º rsa ç§é¥ï¼ssh-keygen -t rsa\n 2. æ¥çäº§çä¸¤ä¸ªæä»¶ï¼id_rsaãid_rsa.pub (ä¸è¬å¨ ~/.ssh/ ç®å½ä¸)\n 3. éå½å id_rsa.pub ä¸º authorized_key: cp ~/.ssh/id_rsa.pub ~/.ssh/authorized_keys\n 4. æ§è¡ ssh localhost è¿è¡éªè¯\n\n\n# linux æ§è½é¢åå¤§å¸å¸ä¼¦ä¸¹Â·æ ¼é·æ ¼çå·¥å·å¾è°±\n\n',charsets:{cjk:!0}},{title:"linux åå­ç¼æ¢å¢é¿é®é¢",frontmatter:{title:"linux åå­ç¼æ¢å¢é¿é®é¢",date:"2019-10-15T00:00:00.000Z",description:"linux åå­ç¼æ¢å¢é¿é®é¢çä¸ç§ç®åå¤çæ¹å¼",categories:["blog","platform","linux"],tags:[null],permalink:null},regularPath:"/blog/platform/linux/linux_mem_grows.html",relativePath:"blog/platform/linux/linux_mem_grows.md",key:"v-29d661ff",path:"/blog/platform/linux/linux_mem_grows.html",headers:[{level:2,title:"çæ§èæ¬",slug:"çæ§èæ¬",normalizedTitle:"çæ§èæ¬",charIndex:89},{level:2,title:"åææ°æ®",slug:"åææ°æ®",normalizedTitle:"åææ°æ®",charIndex:471}],headersStr:"çæ§èæ¬ åææ°æ®",content:'# linux åå­ç¼æ¢å¢é¿é®é¢\n\nå¨éå° åå­ãcpu ç­ç³»ç»èµæº ç¼æ¢å¢é¿é®é¢æ¶ï¼å¯ä»¥ä½¿ç¨ç±»ä¼¼çèæ¬è¿è¡æ°æ®éæ ·ï¼ç¶åéè¿å¯¹æ ¼å¼åæ°æ®åææ¾å° å·ä½çæå¡(è¿ç¨)ã\n\n\n# çæ§èæ¬\n\n    #!/bin/bash\n\n    # */1 * * * * bash /data/data_tmp/monitor.sh\n\n    now=`date +%Y%m%d`\n    /usr/bin/top -c -b -n 1 | sort -nr -k10 | head -n 20 | tee >>/data/data_tmp/top_$now.txt\n\n    tow_days_ago=`date +%Y%m%d -d "5 day ago"`\n    if [ -f /data/data_tmp/top_${tow_days_ago}.txt ];then\n    rm -f /data/data_tmp/top_${tow_days_ago}.txt\n    fi\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n\n# åææ°æ®\n\n    # æè¿ç¨ååç»åå¥ä¸åçæä»¶\n    cat tmp.txt | grep -v % | grep -v KiB | grep -v Tasks | sort -r -k12 -k11 | awk \'{print $0 >> $12".rlog"}\'\n\n\n1\n2\n',normalizedContent:'# linux åå­ç¼æ¢å¢é¿é®é¢\n\nå¨éå° åå­ãcpu ç­ç³»ç»èµæº ç¼æ¢å¢é¿é®é¢æ¶ï¼å¯ä»¥ä½¿ç¨ç±»ä¼¼çèæ¬è¿è¡æ°æ®éæ ·ï¼ç¶åéè¿å¯¹æ ¼å¼åæ°æ®åææ¾å° å·ä½çæå¡(è¿ç¨)ã\n\n\n# çæ§èæ¬\n\n    #!/bin/bash\n\n    # */1 * * * * bash /data/data_tmp/monitor.sh\n\n    now=`date +%y%m%d`\n    /usr/bin/top -c -b -n 1 | sort -nr -k10 | head -n 20 | tee >>/data/data_tmp/top_$now.txt\n\n    tow_days_ago=`date +%y%m%d -d "5 day ago"`\n    if [ -f /data/data_tmp/top_${tow_days_ago}.txt ];then\n    rm -f /data/data_tmp/top_${tow_days_ago}.txt\n    fi\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n\n# åææ°æ®\n\n    # æè¿ç¨ååç»åå¥ä¸åçæä»¶\n    cat tmp.txt | grep -v % | grep -v kib | grep -v tasks | sort -r -k12 -k11 | awk \'{print $0 >> $12".rlog"}\'\n\n\n1\n2\n',charsets:{cjk:!0}},{title:"PE ç­¾å",frontmatter:{title:"PE ç­¾å",date:"2021-07-16T09:50:00.000Z",description:"PEç­¾åãè¯ä¹¦åå«çåå®¹ä»¥åä½ç¨",categories:["platform"],tags:["certificate"],permalink:null},regularPath:"/blog/platform/windows/certificate.html",relativePath:"blog/platform/windows/certificate.md",key:"v-4976d5df",path:"/blog/platform/windows/certificate.html",headers:[{level:2,title:"ç­¾åä»ç»",slug:"ç­¾åä»ç»",normalizedTitle:"ç­¾åä»ç»",charIndex:170},{level:3,title:"æ¥çç­¾å",slug:"æ¥çç­¾å",normalizedTitle:"æ¥çç­¾å",charIndex:624},{level:3,title:"PEæä»¶ä¸­ç­¾åç»æ",slug:"peæä»¶ä¸­ç­¾åç»æ",normalizedTitle:"peæä»¶ä¸­ç­¾åç»æ",charIndex:2344},{level:2,title:"ç­¾åéªè¯",slug:"ç­¾åéªè¯",normalizedTitle:"ç­¾åéªè¯",charIndex:2370},{level:3,title:"è¯ä¹¦çæ",slug:"è¯ä¹¦çæ",normalizedTitle:"è¯ä¹¦çæ",charIndex:2379},{level:3,title:"è¯ä¹¦éªè¯",slug:"è¯ä¹¦éªè¯",normalizedTitle:"è¯ä¹¦éªè¯",charIndex:2515},{level:3,title:"éªè¯è¯ä¹¦çè¯ä¹¦",slug:"éªè¯è¯ä¹¦çè¯ä¹¦",normalizedTitle:"éªè¯è¯ä¹¦çè¯ä¹¦",charIndex:2688},{level:3,title:"ç­¾åéªè¯",slug:"ç­¾åéªè¯-2",normalizedTitle:"ç­¾åéªè¯",charIndex:2370},{level:2,title:"å®è·µ",slug:"å®è·µ",normalizedTitle:"å®è·µ",charIndex:2987},{level:3,title:"åµå¥å¼",slug:"åµå¥å¼",normalizedTitle:"åµå¥å¼",charIndex:243},{level:3,title:"ç¼å½å¼",slug:"ç¼å½å¼",normalizedTitle:"ç¼å½å¼",charIndex:321},{level:3,title:"éªè¯ç­¾å",slug:"éªè¯ç­¾å",normalizedTitle:"éªè¯ç­¾å",charIndex:2924},{level:2,title:"ç­¾åä»£ç ",slug:"ç­¾åä»£ç ",normalizedTitle:"ç­¾åä»£ç ",charIndex:4014},{level:3,title:"1. ååºç­¾å",slug:"_1-ååºç­¾å",normalizedTitle:"1. ååºç­¾å",charIndex:7353},{level:3,title:"2. æ ¡éªæä»¶èªèº«çç­¾å",slug:"_2-æ ¡éªæä»¶èªèº«çç­¾å",normalizedTitle:"2. æ ¡éªæä»¶èªèº«çç­¾å",charIndex:7998},{level:3,title:"3. éªè¯è¯ä¹¦é¾",slug:"_3-éªè¯è¯ä¹¦é¾",normalizedTitle:"3. éªè¯è¯ä¹¦é¾",charIndex:9789},{level:3,title:"4. æ¯å¯¹PEæä»¶åç­¾åæ°æ®ä¸­çHash",slug:"_4-æ¯å¯¹peæä»¶åç­¾åæ°æ®ä¸­çhash",normalizedTitle:"4. æ¯å¯¹peæä»¶åç­¾åæ°æ®ä¸­çhash",charIndex:11924},{level:2,title:"æ»ç»",slug:"æ»ç»",normalizedTitle:"æ»ç»",charIndex:13043},{level:2,title:"æè",slug:"æè",normalizedTitle:"æè",charIndex:13146},{level:2,title:"Reference",slug:"reference",normalizedTitle:"reference",charIndex:5860}],headersStr:"ç­¾åä»ç» æ¥çç­¾å PEæä»¶ä¸­ç­¾åç»æ ç­¾åéªè¯ è¯ä¹¦çæ è¯ä¹¦éªè¯ éªè¯è¯ä¹¦çè¯ä¹¦ ç­¾åéªè¯ å®è·µ åµå¥å¼ ç¼å½å¼ éªè¯ç­¾å ç­¾åä»£ç  1. ååºç­¾å 2. æ ¡éªæä»¶èªèº«çç­¾å 3. éªè¯è¯ä¹¦é¾ 4. æ¯å¯¹PEæä»¶åç­¾åæ°æ®ä¸­çHash æ»ç» æè Reference",content:'# PE ç­¾å\n\nç®åæ¥è¯´ï¼æ°å­ç­¾å(digital signature)æ¯éå¯¹ç§°å¬é¥å¯ç ç³»ç»çéåºç¨ï¼ç¨ç§é¥å å¯æ¶æ¯ï¼ç¨å¬é¥è§£å¯æ¶æ¯ã\n\nèè¯ä¹¦ï¼å®éä¸å°±æ¯å¯¹å¬é¥è¿è¡æ°å­ç­¾åï¼å®æ¯å¯¹å¬é¥åæ³æ§æä¾è¯æçææ¯ã\n\nä¸è¬æ¥è¯´ï¼è¯ä¹¦æä¸¤ä¸ªä½ç¨ï¼ç¡®ä¿è½¯ä»¶æ¥èªè½¯ä»¶åå¸èãä¿æ¤è½¯ä»¶å¨åè¡åä¸è¢«æ´æ¹ãæ¬æå°±æ¯å´ç»è¿ä¸¤ä¸ªæ ¸å¿é®é¢è¿è¡å±å¼è¯´æã\n\n\n# ç­¾åä»ç»\n\nwindows å¹³å°ä¸ç PEç­¾å å¤§è´å¯ä»¥åä¸ºembeddedãcatalogä¸¤ç§ï¼åºå«å¦ä¸ï¼\n\n * embedded\n   * åµå¥å¼ç­¾åï¼é¡¾åæä¹ï¼å°ç­¾åæ°æ®åµå¥å° PE æä»¶ä¸­\n   * å³é®å±æ§å³å¯æ¥çç¸å³ä¿¡æ¯\n   * æ ¼å¼å¬å¼ï¼å¯ä»¥èªå·±è§£æ\n * catalog\n   * ç¼å½å¼ç­¾åï¼å°ç­¾åæ°æ®æ¾å°ä¸ä¸ªåç¼ä¸º.catçç¼å½æä»¶ä¸­ï¼å¹¶ä¸åµå¥å° PE æä»¶ä¸­ãè¿ç§ç­¾åæ¹æ³å¯ä»¥å¯¹ä»»ææ ¼å¼çæä»¶ç­¾åï¼å¹¶ä¸å±éäºPEæä»¶\n   * å³é®æ¥çæä»¶å±æ§çä¸å°æ°å­ç­¾åæ ç­¾(å ä¸ºç­¾åæ°æ®æ¯ç¬ç«æä»¶)\n   * å¾®è½¯æªå¬å¼æ ¼å¼ææ¡£\n\nå¦å¤ï¼å¯¹äºè¿è¡äºåæ ¸ä¸­çæä»¶ï¼Microsoft è¦æ±å¿é¡»è¿è¡äº¤åè¯ä¹¦è®¤è¯ã(å¯ä»¥éè¿ signtool verify /v /kp <mydriver.sys> æ¥çäº¤åè¯ä¹¦é¾)ã\n\nãå¨2021å¹´7æ1æ¥ä¹åï¼å¿é¡»ä½¿ç¨ WHQL ç­¾åå¯¹åæ ¸æ¨¡å¼é©±å¨ç¨åºç­¾åãä¸è½ä½¿ç¨é¾æ¥å°2021å¹´7æ1æ¥ä¹åè¿æçäº¤åè¯ä¹¦çè¯ä¹¦æ¥å¯¹åæ ¸æ¨¡å¼é©±å¨ç¨åºè¿è¡ç­¾åãã\n\n\n# æ¥çç­¾å\n\nåµå¥å¼ç­¾ååå®¹å¦ä¸ï¼\n\nç­¾åä¸­åå«çä¸»è¦ä¿¡æ¯æï¼\n\n * ç­¾åè(signer)\n   * åå­ãé®ç®±ãç­¾åæ¶é´(ä¸è¬ä»¥\'å¯ç½²\'ä¸­æ¶é´æ³ä¸ºå)\n * ç­¾åæ¶é´\n   * ä¸è¬ç¨å¯ç½²ç­¾åä¸­çæ¶é´æ³\n * å¯ç½²ç­¾å(counter signature)\n   * optionalï¼ä¸ä¸ªç¬ç«ãå®æ´çç­¾å\n   * ä¸è¬ç¨äºç­¾åæ¶é´æ³ï¼ææåè®¸ç¨å½åæ¶é´ç­¾åæ°æ®\n   * å¸¸è§çä¸¤ç§æ°æ®æ ¼å¼:\n     * szOID_RFC3161_counterSign\n       * To obtain the timestamp information (RFC3161) of that signature, search the Unauthenticated attribute with pszObjId = szOID_RFC3161_counterSign (1.3.6.1.4.1.311.3.3.1).\n       * ææªæ¾å°æ­¤å­æ®µçå®æ´æ ¼å¼æè¿°ï¼ä½è½æ¾å°è§£åºæ¶é´æ³çç¸å³ä»£ç \n     * szOID_RSA_counterSign\n * åµå¥ç­¾å(nested signature)\n   * optionalï¼ä¸ä¸ªç¬ç«ãå®æ´çç­¾å\n   * å¦ææä»¶å±æ§ä¸­çç­¾ååè¡¨æå¤ä¸ªç­¾åï¼ä»ç»æä¸è®²ï¼ç¬¬äºä¸ª(åå«)ç­¾åå¼å§å°±æ¯åµå¥ç­¾å\n   * Authenticode stores secondary signatures in the UnauthenticatedAttributes of primary signer (index 0), instead of additional PKCS 7 signer.\n     * From the primary signature, search the UnauthenticatedAttribue for below: define szOID_NESTED_SIGNATURE "1.3.6.1.4.1.311.2.4.1". The encoded object of this attribute is a full PKCS 7 signer.\n   * æ³¨æå¯¹ç§ä¸æ SignedData ç»æç SignerInfos å­æ®µçç¨é\n * è¯ä¹¦(certificate)ï¼\n   * è¯ä¹¦é¾(certificate chain)\n     * æä»¶ä¸­ååµçè¯ä¹¦é¾ï¼åªå° ca è¯ä¹¦ï¼ä¸åå«æ ¹è¯ä¹¦\n   * ç­¾å\n     * ä¸è½å¨å±æ§ä¸­æ¥ç\n     * ç¨ CA ç§é¥å¯¹è¯ä¹¦ä¸»ä½(å³ä¸æ X509 è¯ä¹¦çTBSCertificateç»æ)å å¯å½¢æçç­¾å\n   * è¯ä¹¦è¯¦æ\n     * çæ¬(Version)\n     * åºåå·(Serial Number)\n       * ç± CA æå®çç¬ä¸æ äºç ID\n     * é¢åè(Issuer)ãä½¿ç¨è(Subject)\n     * è¯ä¹¦æææ(Not BeforeãNot After)\n     * ç­¾åç®æ³ãå¬é¥ãå¬é¥åæ°\n       * Subject Public Key ç¸å³çä¿¡æ¯\n     * ç­¾ååå¸ç®æ³\n     * CRL(è¯ä¹¦åéåè¡¨, Certificate revocation list) ååç¹\n     * æçº¹\n       * windows æ¥ç PE å±æ§æ¶è½çå°ï¼å¯¹ è¯ä¹¦å®æ´åå®¹ è¿è¡ SHA1 è®¡ç®å¾å°\n     * ç§é¥ç¨æ³(Key Usage)ãå¢å¼ºå(enhanced)ç§é¥ç¨æ³\n       * ææè¯ä¹¦çç¨éèå´\n     * è¯ä¹¦ç­ç¥\n     * ææä¿¡æ¯è®¿é®ãææç§é¥æ è¯ç¬¦ãä½¿ç¨èç§é¥æ è¯ç¬¦\n\nå¯ä»¥éè¿å½ä»¤ openssl x509 -in abc.cer -text -noout æ¥çè¯ä¹¦çè¯¦ç»ä¿¡æ¯(æ­¤å·¥å·ä¸æ¯æ DER ç¼ç äºè¿å¶ X.509, åªæ¯æ Base64 ç¼ç ç X.509)ã\n\nå¯ä»¥å¨ Windows ç³»ç»çè¿è¡ä¸­è¾å¥certmgr.mscå¯ä»¥çå°ç³»ç»é»è®¤çECCç­¾åçæ ¹è¯ä¹¦ã\n\n\n# PEæä»¶ä¸­ç­¾åç»æ\n\nåµå¥å¼ç­¾åç»æå¦ä¸ï¼\n\n\n# ç­¾åéªè¯\n\n\n# è¯ä¹¦çæ\n\n 1. æå¡å¨å°å¬é¥Aç»CA(å¬é¥æ¯æå¡å¨ç)\n 2. CAç¨èªå·±çç§é¥Bç»å¬é¥Aå å¯ï¼çææ°å­ç­¾åA\n 3. CAæå¬é¥Aï¼æ°å­ç­¾åAï¼éå ä¸äºæå¡å¨ä¿¡æ¯æ´åå¨ä¸èµ·ï¼çæè¯ä¹¦ï¼ååç»æå¡å¨\n\næ³¨ï¼ç§é¥Bæ¯ç¨äºå å¯å¬é¥Açï¼ç§é¥Båå¬é¥Aå¹¶ä¸æ¯éå¯¹ç\n\n\n# è¯ä¹¦éªè¯\n\n 1. å®¢æ·ç«¯å¾å°è¯ä¹¦\n 2. å®¢æ·ç«¯å¾å°ç¨äºè¯ä¹¦éªè¯çå¬é¥B(éè¿CAæç³»ç»ååµæå¶å®éå¾)\n 3. å®¢æ·ç«¯ç¨å¬é¥Bå¯¹è¯ä¹¦ä¸­çæ°å­ç­¾åè§£å¯ï¼å¾å°åå¸å¼\n 4. å®¢æ·ç«¯å¯¹è¯ä¹¦ä¸­çå¬é¥Aè¿è¡åå¸å¼è®¡ç®\n 5. ä¸¤ä¸ªåå¸å¼å¯¹æ¯ï¼å¦æç¸åï¼åè¯ä¹¦åæ³\n\næ³¨ï¼å¬é¥Båä¸è¿°çç§é¥Bæ¯éå¯¹çï¼åå«ç¨äºå¯¹è¯ä¹¦çéªè¯(è§£å¯)åçæ(å å¯)\n\n\n# éªè¯è¯ä¹¦çè¯ä¹¦\n\nå®¢æ·ç«¯å¾å°çç¨äºè¯ä¹¦éªè¯çå¬é¥Bæ¯åæ³çåï¼ä¸ºäºè§£å³è¿ä¸ªé®é¢ï¼æä»¬ä¹éè¦æ³åæ³å¯¹å¬é¥Bä¹è¿è¡éªè¯ï¼è¿å°±éè¦æ¾å°å¯¹å¬é¥Bä¹è¿è¡ç­¾åãéªè¯ï¼å°±å°±æ¯åé¢è®²å°ççæè¯ä¹¦ãéªè¯è¯ä¹¦ãä¸è¿ï¼è¿ä¸ªè¿ç¨ä½æ¶æ¯ä¸ªå°½å¤´å¢ï¼æ ¹è¯ä¹¦(Root Certificate)ã\n\næ ¹è¯ä¹¦æ¯å±äºæ ¹è¯ä¹¦é¢åæºæ(CA)çå¬é¥è¯ä¹¦ï¼æ¯å¨å¬å¼éé¥åºç¡å»ºè®¾ä¸­ï¼ä¿¡ä»»é¾çèµ·ç¹ãå®è£æ ¹è¯ä¹¦æå³çå¯¹è¿ä¸ªCAè®¤è¯ä¸­å¿çä¿¡ä»»ãå¦å¤ï¼æ ¹è¯ä¹¦æ¯èªç­¾åçè¯ä¹¦ã\n\n\n# ç­¾åéªè¯\n\n 1. éªè¯æ¶é´æ³\n 2. éªè¯ç­¾å hash ä¸è´æ§\n 3. éªè¯è¯ä¹¦æ¯å¦è¢«åé\n 4. æ²¿è¯ä¹¦é¾ï¼éå¤ä»¥ä¸æµç¨ä»¥éªè¯è¯ä¹¦çæææ§ï¼ç´å°æ ¹è¯ä¹¦\n\n\n# å®è·µ\n\n\n# åµå¥å¼\n\n 1. ç¨ makecert çæä¸ä¸ªèªç­¾åçæ ¹è¯ä¹¦: makecert -n "cn=root" -r -sv test_root.pvk test_root.cer\n 2. ç¨æ ¹è¯ä¹¦ç­¾åä¸ä¸ªå­è¯ä¹¦: makecert -n "cn=child" -iv test_root.pvk -ic test_root.cer -sv test_child.pvk test_child.cer\n 3. å½ç¶ï¼æ­¤æ¶è¿ç§è¯ä¹¦æ¯ä¸è¢«ç³»ç»æä¿¡ä»»çï¼éè¦æå¨æçæçè¯ä¹¦å¯¼å¥å°ç³»ç»ï¼\n    * å¨ Windows ç³»ç»çè¿è¡ä¸­è¾å¥certmgr.msc\n    * æ¾å° "åä¿¡ä»»çæ ¹è¯ä¹¦é¢åæºæ"ï¼å³é® -> ææä»»å¡ -> å¯¼å¥\n 4. æ­¤æ¶ï¼å°±å¯ä»¥ä½¿ç¨å¾®è½¯ç signtool å·¥å·å¯¹PEæä»¶è¿è¡åµå¥å¼ç­¾åäº\n\n\n# ç¼å½å¼\n\n 1. æ ¹æ®éè¦åå»ºä¸ä¸ª cdf æä»¶ï¼ä¾å¦ï¼\n    \n    [CatalogHeader]\n    Name=tstamd64.cat\n    PublicVersion=0x0000001\n    EncodingType=0x00010001\n    CATATTR1=0x10010001:OSAttr:2:6.0\n    [CatalogFiles]\n    <hash>File1=amd64\\toaster.pdb\n    <hash>File2=amd64\\toaster.sys\n    <hash>File3=amd64\\toastva.exe\n    <hash>File4=amd64\\toastva.pdb\n    \n    \n    1\n    2\n    3\n    4\n    5\n    6\n    7\n    8\n    9\n    10\n    \n 2. ä½¿ç¨å¾®è½¯ç makecat å·¥å·ä»ä¸ä¸æ­¥åå»ºç cdf æä»¶çæ cat æä»¶, ä¾å¦ï¼makecat -v tstamd64.cdf\n 3. ä½¿ç¨å¾®è½¯ç signtool å·¥å·å¯¹ cat æä»¶è¿è¡ç­¾å\n\næ³¨ï¼å½ç¶ä¹è¦å°è¯ä¹¦å å¥ä¿¡ä»»åè¡¨\n\næ³¨ï¼åè using-makecat-to-create-a-catalog-file\n\n\n# éªè¯ç­¾å\n\nä½¿ç¨å½ä»¤è¡è¿è¡éªè¯ï¼ signtool verify /v /kp [service-new.exe]\n\næ³¨ï¼åè çæ win10 ä¸è°è¯æå¡æ¶çè¯ä¹¦\n\n\n# ç­¾åä»£ç \n\nå¸¸è§çéªè¯ç­¾åçä»£ç çæ®µï¼\n\n    BOOL CheckFileTrust( LPCWSTR lpFileName )\n    {\n        BOOL bRet = FALSE;\n        WINTRUST_DATA wd = { 0 };\n        WINTRUST_FILE_INFO wfi = { 0 };\n        WINTRUST_CATALOG_INFO wci = { 0 };\n        CATALOG_INFO ci = { 0 };\n    \n        HCATADMIN hCatAdmin = NULL;\n        if ( !CryptCATAdminAcquireContext( &amp;hCatAdmin, NULL, 0 ) )\n        {\n            return FALSE;\n        }\n    \n        HANDLE hFile = CreateFileW( lpFileName, GENERIC_READ, FILE_SHARE_READ, NULL, OPEN_EXISTING, 0, NULL );\n        if ( INVALID_HANDLE_VALUE == hFile )\n        {\n            CryptCATAdminReleaseContext( hCatAdmin, 0 );\n            return FALSE;\n        }\n    \n        DWORD dwCnt = 100;\n        BYTE byHash[100];\n        CryptCATAdminCalcHashFromFileHandle( hFile, &amp;dwCnt, byHash, 0 );\n        CloseHandle( hFile );\n    \n        LPWSTR pszMemberTag = new WCHAR[dwCnt * 2 + 1];\n        for ( DWORD dw = 0; dw &lt; dwCnt; ++dw )\n        {\n            wsprintfW( &amp;pszMemberTag[dw * 2], L"%02X", byHash[dw] );\n        }\n    \n        HCATINFO hCatInfo = CryptCATAdminEnumCatalogFromHash( hCatAdmin, byHash, dwCnt, 0, NULL );\n        if ( NULL == hCatInfo )   // ç¼å½ä¸­æ²¡æåéªè¯æ¯å¦æåµå¥å¼ç­¾å\n        {\n            wfi.cbStruct       = sizeof( WINTRUST_FILE_INFO );\n            wfi.pcwszFilePath  = lpFileName;\n            wfi.hFile          = NULL;\n            wfi.pgKnownSubject = NULL;\n    \n            wd.cbStruct            = sizeof( WINTRUST_DATA );\n            wd.dwUnionChoice       = WTD_CHOICE_FILE;\n            wd.pFile               = &amp;wfi;\n            wd.dwUIChoice          = WTD_UI_NONE;\n            wd.fdwRevocationChecks = WTD_REVOKE_NONE;\n            wd.dwStateAction       = WTD_STATEACTION_IGNORE;\n            wd.dwProvFlags         = WTD_SAFER_FLAG;\n            wd.hWVTStateData       = NULL;\n            wd.pwszURLReference    = NULL;\n        }\n        else  // ç¼å½ä¸­æï¼éªè¯ç¼å½æä»¶çç­¾åæ¯å¦ææ\n        {\n            CryptCATCatalogInfoFromContext( hCatInfo, &amp;ci, 0 );\n            wci.cbStruct             = sizeof( WINTRUST_CATALOG_INFO );\n            wci.pcwszCatalogFilePath = ci.wszCatalogFile;\n            wci.pcwszMemberFilePath  = lpFileName;\n            wci.pcwszMemberTag       = pszMemberTag;\n    \n            wd.cbStruct            = sizeof( WINTRUST_DATA );\n            wd.dwUnionChoice       = WTD_CHOICE_CATALOG;\n            wd.pCatalog            = &amp;wci;\n            wd.dwUIChoice          = WTD_UI_NONE;\n            wd.fdwRevocationChecks = WTD_STATEACTION_VERIFY;\n            wd.dwProvFlags         = 0;\n            wd.hWVTStateData       = NULL;\n            wd.pwszURLReference    = NULL;\n        }\n        GUID action = WINTRUST_ACTION_GENERIC_VERIFY_V2;\n        HRESULT hr  = WinVerifyTrust( NULL, &amp;action, &amp;wd );\n        bRet        = SUCCEEDED( hr );\n    \n        if ( NULL != hCatInfo )\n        {\n            CryptCATAdminReleaseCatalogContext( hCatAdmin, hCatInfo, 0 );\n        }\n        CryptCATAdminReleaseContext( hCatAdmin, 0 );\n        delete[] pszMemberTag;\n        return bRet;\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n\n\nä»¥ä¸æ¯éè¿ Windows ç API è¿è¡éªè¯æä½ï¼å¦æè®©æä»¬èªå·±å»è¿è¡å®æ´çéªè¯æµç¨ï¼æä»¬è¯¥æä¹å¼å¢ï¼\n\n\n# 1. ååºç­¾å\n\næ ¹æ®ä¸æä¸­ PE ç»æå¯ç¥ï¼PEå¤´çData Directoriesä¸­Certificate Tableéé¢ææäºWIN_CERTIFICATEçå­æ¾ä½ç½®åå¤§å°ï¼WIN_CERTIFICATEçbCertificateå°±æ¯æ¯SignedDataæ ¼å¼çç­¾åãç»æå¦ä¸ï¼\n\n    typedef struct _IMAGE_DATA_DIRECTORY {\n        DWORD   VirtualAddress;  // PEæä»¶çåç§»\n        DWORD   Size;\n    } IMAGE_DATA_DIRECTORY, *PIMAGE_DATA_DIRECTORY;\n    \n    typedef struct _WIN_CERTIFICATE\n    {\n        DWORD       dwLength; // WIN_CERTIFICATE çé¿åº¦ï¼å«bCertificateçå¤§å°ï¼\n        WORD        wRevision;\n        WORD        wCertificateType;\n        BYTE        bCertificate[ANYSIZE_ARRAY]; // signedDataå¼å§çä½ç½®\n    \n    } WIN_CERTIFICATE, *LPWIN_CERTIFICATE;\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\n\n# 2. æ ¡éªæä»¶èªèº«çç­¾å\n\næä»¶ç­¾åæ¬èº«æ¯éµå¾ªPKCS7æ åä¸­ç SignedData æ ¼å¼ï¼ç¨ ASN1 è¡¨è¿°çæ ¼å¼å¦ä¸ï¼\n\n    SignedData ::= SEQUENCE {\n        version Version,\n        digestAlgorithms DigestAlgorithmIdentifiers,\n        contentInfo ContentInfo,  -- è¿ä¸ªéé¢åå«äºPEæä»¶çHash\n        certificates  --è¯ä¹¦çæ°ç»ï¼ä¸åæ¬æ ¹è¯ä¹¦ï¼\n            [0] IMPLICIT ExtendedCertificatesAndCertificates OPTIONAL,\n        Crls \n            [1] IMPLICIT CertificateRevocationLists OPTIONAL,\n        signerInfos SignerInfos }  -- ç­¾åèçä¿¡æ¯\n    \n    SignerInfos ::= SET OF SignerInfo\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\nPKCS7æ¯å å¯æ¶æ¯çè¯­æ³æ åï¼X.509æ¯è¯ä¹¦çæ ¼å¼ãASN1æ¯ä¸ç§æè¿°å¯¹è±¡ç»æçè¯­æ³ï¼å¨ä¸è¡çå®ä¹ä¸­å¯ä»¥ç®åçè®¤ä¸ºåé¢çæ¯åéååé¢çæ¯ç±»åã\n\nASN1å¹¶æªå®ä¹ç¼ç æ¹æ³ï¼DERæ¯ä¸ç§å¸¸è§çç¼ç æ¹æ³ï¼å¶ä»è¿æ Base64 ç­ç¼ç æ¹æ³ã\n\nSignerInfosçç»æå¦ä¸ï¼\n\n    SignerInfo ::= SEQUENCE {\n        version Version,\n        issuerAndSerialNumber IssuerAndSerialNumber,\n        digestAlgorithm DigestAlgorithmIdentifier,\n        authenticatedAttributes -- åå«SignedDataä¸­contentInfoçæè¦\n            [0] IMPLICIT Attributes OPTIONAL,\n        digestEncryptionAlgorithm DigestEncryptionAlgorithmIdentifier,\n        encryptedDigest EncryptedDigest, -- å å¯åçæè¦\n        unauthenticatedAttributes \n            [1] IMPLICIT Attributes OPTIONAL }\n    IssuerAndSerialNumber ::= SEQUENCE {\n        issuer Name,\n        serialNumber CertificateSerialNumber }\n    EncryptedDigest ::= OCTET STRING\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n\n\nauthenticatedAttributes åå«äº contentTypeåmessageDigestï¼messageDigest åå°±æ¯å¯¹ SignedData ç ContentInfo åçæè¦ãå¯¹authenticatedAttributes åæè¦å¾å°ä¸ä¸ª DigestInfo ç»æçæ°æ®ï¼DigestInfo çç»æå¦ä¸ï¼\n\n    DigestInfo ::= SEQUENCE {\n        digestAlgorithm DigestAlgorithmIdentifier,\n        digest Digest }\n    \n    Digest ::= OCTET STRING\n\n\n1\n2\n3\n4\n5\n\n\nç¨ IssuerAndSerialNumber æ¾å°ç­¾åèçè¯ä¹¦ï¼ä½¿ç¨éé¢çå¬é¥è§£å¯EncryptedDigest å¾å°ä¸ä¸ª DigestInfo ç»æï¼ä¸è¬æ¯RSAç®æ³ï¼ï¼å°è¿ä¸ªç»æä¸authenticatedAttributes åæè¦å¾å°çç»æå¯¹æ¯ï¼ä¸è´çè¯æè¿è¡ä¸ä¸æ­¥ã\n\n\n# 3. éªè¯è¯ä¹¦é¾\n\nç¸å³ç»æå¦ä¸ï¼\n\n-- X509çè¯ä¹¦æ ¼å¼\n   Certificate  ::=  SEQUENCE  {\n        tbsCertificate       TBSCertificate,   -- è¯ä¹¦ä¸»ä½\n        signatureAlgorithm   AlgorithmIdentifier,  -- ç­¾åç¨çç®æ³ï¼ä¸è¬ä¸ºsha1RSA\n        signatureValue       BIT STRING  }     -- è¯ä¹¦çç­¾å\n \n   TBSCertificate  ::=  SEQUENCE  {\n        version         [0]  EXPLICIT Version DEFAULT v1, -- PEæä»¶æ°å­ç­¾åç¨ççæ¬ä¸º3\n        serialNumber         CertificateSerialNumber,\n        signature            AlgorithmIdentifier,\n        issuer               Name,\n        validity             Validity, -- æææ\n        subject              Name,\n        subjectPublicKeyInfo SubjectPublicKeyInfo,  -- å«æè¿ä¸ªè¯ä¹¦çå¬é¥\n        issuerUniqueID  [1]  IMPLICIT UniqueIdentifier OPTIONAL,\n                             -- If present, version MUST be v2 or v3        \n        subjectUniqueID [2]  IMPLICIT UniqueIdentifier OPTIONAL,\n                             -- If present, version MUST be v2 or v3\n        extensions      [3]  EXPLICIT Extensions OPTIONAL  -- æ©å±\n                             -- If present, version MUST be v3\n        }\n \n   -- å«æå¬é¥çä¿¡æ¯\n   SubjectPublicKeyInfo  ::=  SEQUENCE  {\n        algorithm            AlgorithmIdentifier,\n        subjectPublicKey     BIT STRING  }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n\n\né¦åæå»ºè¯ä¹¦é¾ï¼ä»ç»ç«¯ç­¾åæ°å­ç­¾åçè¯ä¹¦ä¸ç´å°èªç­¾åçæ ¹è¯ä¹¦ãè¿æ¶è¦äºè§£å°è¯ä¹¦æåä¸ä¸ªæåä¸ºæ©å±ï¼æ©å±æ¯ä¸åå¶ä»çæ°æ®ï¼å¶ä¸­ä¸¤é¡¹æ¯è¾éè¦çæ¯AuthorityKeyIdentifieråSubjectKeyIdentifierï¼ç»æåå«å¦ä¸\n\nAuthorityKeyIdentifier ::= SEQUENCE {\n      keyIdentifier             [0] KeyIdentifier           OPTIONAL,\n      authorityCertIssuer       [1] GeneralNames            OPTIONAL,\n      authorityCertSerialNumber [2] CertificateSerialNumber OPTIONAL  }\n \n   KeyIdentifier ::= OCTET STRING\n \n   SubjectKeyIdentifier ::= KeyIdentifier\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\nç»å»ºè¯ä¹¦é¾æ¶ï¼å°æAè¯ä¹¦çä¸­ç AuthorityKeyIdentifierï¼ç®ç§°AKIDï¼ çkeyIdentifierãauthorityCertIssuerãauthorityCertSerialNumber ä¸Bè¯ä¹¦ç SubjectKeyIdentifierï¼ç®ç§°SKIDï¼ãissuer ãserialNumber åå«å¹éï¼å¦æå¹éä¸åBè¯ä¹¦ä¸ºAè¯ä¹¦çç­¾åèãå¦æAè¯ä¹¦çä¸é¢ä¸é¡¹ä¸èªå·±å¯¹åºæ°æ®å¹éä¸ï¼åAè¯ä¹¦ä¸ºèªç­¾åçè¯ä¹¦ï¼è¯ä¹¦é¾æå»ºå®æ¯ã\n\nç¶åï¼æ ¡éªè¯ä¹¦é¾ä¸­æ¯ä¸ªè¯ä¹¦çç­¾åãæææåç¨æ³ï¼æ¯å¦å¯ä»¥ç¨äºä»£ç ç­¾åï¼ãç­¾åéªè¯çç®æ³ä¸ºè¯ä¹¦ä¸­ç signatureAlgorithmï¼ç­¾åæ¯ signatureValueï¼è¢«ç­¾åçæ°æ®ä¸º tbsCertificateï¼å¬é¥ä»ç¶è¯ä¹¦ç subjectPublicKeyInfo éé¢æ¿ã\n\n\n# 4. æ¯å¯¹PEæä»¶åç­¾åæ°æ®ä¸­çHash\n\nç­¾åæ°æ®ä¸­çHashç®æ³åHashå¨SignedDataçcontentInfoä¸­ï¼contentinfoçç»æä¸ºï¼\n\n    ContentInfo ::= SEQUENCE {\n    contentType ContentType,\n    content\n        [0] EXPLICIT ANY DEFINED BY contentType OPTIONAL \n    }\n\n\n1\n2\n3\n4\n5\n\n\ncontentType æ¯SPC_INDIRECT_DATA_OBJID (1.3.6.1.4.1.311.2.1.4)ï¼è¡¨æäºcontentçç±»åãcontentæ¯æ¯ä¸ä¸ªSpcIndirectDataContentç»æçæ°æ®ã\n\n    SpcIndirectDataContent ::= SEQUENCE {\n        data                    SpcAttributeTypeAndOptionalValue,\n        messageDigest           DigestInfo\n    } --#publicâ\n    \n    DigestInfo ::= SEQUENCE {\n        digestAlgorithm     AlgorithmIdentifier,\n        digest              OCTETSTRING\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\ndigestAlgorithm å°±æ¯Hashç®æ³ï¼ä¸è¬ä¸ºsha1ãdigestå°±æ¯æä»¶çHashã\n\nHashçè®¡ç®ååä¸ºæé¤ä¸ä»æé¤æç­¾åè¿ç¨ä¸­å¯è½ä¼æ¹å¨çæ°æ®ä»¥åæ°å­ç­¾åæ¬èº«ãå¤§æ¦è®¡ç®è¿ç¨å¦ä¸ï¼\n\n * é¤å»PEå¤´ä¸­ checksum å Certificate Table è®¡ç®PEå¤´çHASHï¼å« Section Tableï¼\n * ææ¯ä¸ªèåç§»çé¡ºåºä¾æ¬¡å¯¹æ¯ä¸ªèçæ°æ®ç®HASH\n * å¯¹PEéå æ°æ®ç®HASH\n   * éå æ°æ®çèµ·å§åç§»ä¸ºï¼PEå¤´å¤§å°+æ¯ä¸ªèçå¤§å°\n   * éå æ°æ®å¤§å°=æä»¶å¤§å°-(PEå¤´+æ¯ä¸ªè)-ç­¾åçå¤§å°\n   * ç­¾åçå¤§å°æ¯ Optional Header Data Directories[Certificate Table].Size\n\nå¦å¤ï¼ç±è¿ä¸ªHashç®æ³å¯ä»¥çåºï¼PEæä»¶çç­¾åæ°æ®é½æ¯æ¾å°PEæä»¶æå°¾é¨çï¼å ä¸ºåªæéå æ°æ®ææ«å°¾ä¸æ®µä¸ºç­¾åæ°æ®å¤§å°çæ°æ®æ¯æ²¡æè®¡ç®å¨PEçHashåçãè¿å°±ç»æä»¶å¸¦æ¥äºå¨æä»¶å°¾é¨è¿è¡ä¿®æ¹çå¯è½ï¼ä¸æ¯åï¼\n\n\n# æ»ç»\n\néè¿ä¸æï¼æä»¬å¯¹ Windows ä¸çç­¾åæäºä¸å®çäºè§£ï¼èè¿åªæ¯ Microsoft å¤æçç­¾åç³»ç»ä¸­çä¸å°é¨åï¼ä¸è¿æäºè¿äºè®¤ç¥ï¼å°±æ´å®¹æå»å­¦ä¹ ç­¾åç¸å³çå¶ä»ç»èä»¥åæ´å å¤æçåå®¹äºã\n\n\n# æè\n\n * counter signature æ¯å¯¹åªååå®¹è®¡ç®ç­¾ååå®¹å¢ï¼\n   * è¿ä¸ª signature æ¯ç¶ç­¾åçä¸ä¸ªå±æ§ï¼è¡¨è¾¾è¿ä¸ªå±æ§çç»æä½(åèé¾æ¥)ä¸ºï¼\n     \n     typedef struct _CRYPT_ATTRIBUTE {\n         LPSTR            pszObjId;\n         DWORD            cValue;\n         PCRYPT_ATTR_BLOB rgValue;\n     } CRYPT_ATTRIBUTE, *PCRYPT_ATTRIBUTE;\n     \n     typedef struct _CRYPTOAPI_BLOB {\n     DWORD cbData;\n     BYTE  *pbData;\n     } CRYPT_INTEGER_BLOB, *PCRYPT_ATTR_BLOB;\n     \n     \n     1\n     2\n     3\n     4\n     5\n     6\n     7\n     8\n     9\n     10\n     \n\n\n# Reference\n\n * å¯¹Windows å¹³å°ä¸PEæä»¶æ°å­ç­¾åçä¸äºç ç©¶\n * using-inf2cat-to-create-a-catalog-file\n * CSPå­¦ä¹ ä¹CryptoAPIåè¯\n * ç¨äºåæ ¸æ¨¡å¼ä»£ç ç­¾åçäº¤åè¯ä¹¦\n * RFC3161 timestamp information in digital signature (authenticode)',normalizedContent:'# pe ç­¾å\n\nç®åæ¥è¯´ï¼æ°å­ç­¾å(digital signature)æ¯éå¯¹ç§°å¬é¥å¯ç ç³»ç»çéåºç¨ï¼ç¨ç§é¥å å¯æ¶æ¯ï¼ç¨å¬é¥è§£å¯æ¶æ¯ã\n\nèè¯ä¹¦ï¼å®éä¸å°±æ¯å¯¹å¬é¥è¿è¡æ°å­ç­¾åï¼å®æ¯å¯¹å¬é¥åæ³æ§æä¾è¯æçææ¯ã\n\nä¸è¬æ¥è¯´ï¼è¯ä¹¦æä¸¤ä¸ªä½ç¨ï¼ç¡®ä¿è½¯ä»¶æ¥èªè½¯ä»¶åå¸èãä¿æ¤è½¯ä»¶å¨åè¡åä¸è¢«æ´æ¹ãæ¬æå°±æ¯å´ç»è¿ä¸¤ä¸ªæ ¸å¿é®é¢è¿è¡å±å¼è¯´æã\n\n\n# ç­¾åä»ç»\n\nwindows å¹³å°ä¸ç peç­¾å å¤§è´å¯ä»¥åä¸ºembeddedãcatalogä¸¤ç§ï¼åºå«å¦ä¸ï¼\n\n * embedded\n   * åµå¥å¼ç­¾åï¼é¡¾åæä¹ï¼å°ç­¾åæ°æ®åµå¥å° pe æä»¶ä¸­\n   * å³é®å±æ§å³å¯æ¥çç¸å³ä¿¡æ¯\n   * æ ¼å¼å¬å¼ï¼å¯ä»¥èªå·±è§£æ\n * catalog\n   * ç¼å½å¼ç­¾åï¼å°ç­¾åæ°æ®æ¾å°ä¸ä¸ªåç¼ä¸º.catçç¼å½æä»¶ä¸­ï¼å¹¶ä¸åµå¥å° pe æä»¶ä¸­ãè¿ç§ç­¾åæ¹æ³å¯ä»¥å¯¹ä»»ææ ¼å¼çæä»¶ç­¾åï¼å¹¶ä¸å±éäºpeæä»¶\n   * å³é®æ¥çæä»¶å±æ§çä¸å°æ°å­ç­¾åæ ç­¾(å ä¸ºç­¾åæ°æ®æ¯ç¬ç«æä»¶)\n   * å¾®è½¯æªå¬å¼æ ¼å¼ææ¡£\n\nå¦å¤ï¼å¯¹äºè¿è¡äºåæ ¸ä¸­çæä»¶ï¼microsoft è¦æ±å¿é¡»è¿è¡äº¤åè¯ä¹¦è®¤è¯ã(å¯ä»¥éè¿ signtool verify /v /kp <mydriver.sys> æ¥çäº¤åè¯ä¹¦é¾)ã\n\nãå¨2021å¹´7æ1æ¥ä¹åï¼å¿é¡»ä½¿ç¨ whql ç­¾åå¯¹åæ ¸æ¨¡å¼é©±å¨ç¨åºç­¾åãä¸è½ä½¿ç¨é¾æ¥å°2021å¹´7æ1æ¥ä¹åè¿æçäº¤åè¯ä¹¦çè¯ä¹¦æ¥å¯¹åæ ¸æ¨¡å¼é©±å¨ç¨åºè¿è¡ç­¾åãã\n\n\n# æ¥çç­¾å\n\nåµå¥å¼ç­¾ååå®¹å¦ä¸ï¼\n\nç­¾åä¸­åå«çä¸»è¦ä¿¡æ¯æï¼\n\n * ç­¾åè(signer)\n   * åå­ãé®ç®±ãç­¾åæ¶é´(ä¸è¬ä»¥\'å¯ç½²\'ä¸­æ¶é´æ³ä¸ºå)\n * ç­¾åæ¶é´\n   * ä¸è¬ç¨å¯ç½²ç­¾åä¸­çæ¶é´æ³\n * å¯ç½²ç­¾å(counter signature)\n   * optionalï¼ä¸ä¸ªç¬ç«ãå®æ´çç­¾å\n   * ä¸è¬ç¨äºç­¾åæ¶é´æ³ï¼ææåè®¸ç¨å½åæ¶é´ç­¾åæ°æ®\n   * å¸¸è§çä¸¤ç§æ°æ®æ ¼å¼:\n     * szoid_rfc3161_countersign\n       * to obtain the timestamp information (rfc3161) of that signature, search the unauthenticated attribute with pszobjid = szoid_rfc3161_countersign (1.3.6.1.4.1.311.3.3.1).\n       * ææªæ¾å°æ­¤å­æ®µçå®æ´æ ¼å¼æè¿°ï¼ä½è½æ¾å°è§£åºæ¶é´æ³çç¸å³ä»£ç \n     * szoid_rsa_countersign\n * åµå¥ç­¾å(nested signature)\n   * optionalï¼ä¸ä¸ªç¬ç«ãå®æ´çç­¾å\n   * å¦ææä»¶å±æ§ä¸­çç­¾ååè¡¨æå¤ä¸ªç­¾åï¼ä»ç»æä¸è®²ï¼ç¬¬äºä¸ª(åå«)ç­¾åå¼å§å°±æ¯åµå¥ç­¾å\n   * authenticode stores secondary signatures in the unauthenticatedattributes of primary signer (index 0), instead of additional pkcs 7 signer.\n     * from the primary signature, search the unauthenticatedattribue for below: define szoid_nested_signature "1.3.6.1.4.1.311.2.4.1". the encoded object of this attribute is a full pkcs 7 signer.\n   * æ³¨æå¯¹ç§ä¸æ signeddata ç»æç signerinfos å­æ®µçç¨é\n * è¯ä¹¦(certificate)ï¼\n   * è¯ä¹¦é¾(certificate chain)\n     * æä»¶ä¸­ååµçè¯ä¹¦é¾ï¼åªå° ca è¯ä¹¦ï¼ä¸åå«æ ¹è¯ä¹¦\n   * ç­¾å\n     * ä¸è½å¨å±æ§ä¸­æ¥ç\n     * ç¨ ca ç§é¥å¯¹è¯ä¹¦ä¸»ä½(å³ä¸æ x509 è¯ä¹¦çtbscertificateç»æ)å å¯å½¢æçç­¾å\n   * è¯ä¹¦è¯¦æ\n     * çæ¬(version)\n     * åºåå·(serial number)\n       * ç± ca æå®çç¬ä¸æ äºç id\n     * é¢åè(issuer)ãä½¿ç¨è(subject)\n     * è¯ä¹¦æææ(not beforeãnot after)\n     * ç­¾åç®æ³ãå¬é¥ãå¬é¥åæ°\n       * subject public key ç¸å³çä¿¡æ¯\n     * ç­¾ååå¸ç®æ³\n     * crl(è¯ä¹¦åéåè¡¨, certificate revocation list) ååç¹\n     * æçº¹\n       * windows æ¥ç pe å±æ§æ¶è½çå°ï¼å¯¹ è¯ä¹¦å®æ´åå®¹ è¿è¡ sha1 è®¡ç®å¾å°\n     * ç§é¥ç¨æ³(key usage)ãå¢å¼ºå(enhanced)ç§é¥ç¨æ³\n       * ææè¯ä¹¦çç¨éèå´\n     * è¯ä¹¦ç­ç¥\n     * ææä¿¡æ¯è®¿é®ãææç§é¥æ è¯ç¬¦ãä½¿ç¨èç§é¥æ è¯ç¬¦\n\nå¯ä»¥éè¿å½ä»¤ openssl x509 -in abc.cer -text -noout æ¥çè¯ä¹¦çè¯¦ç»ä¿¡æ¯(æ­¤å·¥å·ä¸æ¯æ der ç¼ç äºè¿å¶ x.509, åªæ¯æ base64 ç¼ç ç x.509)ã\n\nå¯ä»¥å¨ windows ç³»ç»çè¿è¡ä¸­è¾å¥certmgr.mscå¯ä»¥çå°ç³»ç»é»è®¤çeccç­¾åçæ ¹è¯ä¹¦ã\n\n\n# peæä»¶ä¸­ç­¾åç»æ\n\nåµå¥å¼ç­¾åç»æå¦ä¸ï¼\n\n\n# ç­¾åéªè¯\n\n\n# è¯ä¹¦çæ\n\n 1. æå¡å¨å°å¬é¥aç»ca(å¬é¥æ¯æå¡å¨ç)\n 2. caç¨èªå·±çç§é¥bç»å¬é¥aå å¯ï¼çææ°å­ç­¾åa\n 3. caæå¬é¥aï¼æ°å­ç­¾åaï¼éå ä¸äºæå¡å¨ä¿¡æ¯æ´åå¨ä¸èµ·ï¼çæè¯ä¹¦ï¼ååç»æå¡å¨\n\næ³¨ï¼ç§é¥bæ¯ç¨äºå å¯å¬é¥açï¼ç§é¥båå¬é¥aå¹¶ä¸æ¯éå¯¹ç\n\n\n# è¯ä¹¦éªè¯\n\n 1. å®¢æ·ç«¯å¾å°è¯ä¹¦\n 2. å®¢æ·ç«¯å¾å°ç¨äºè¯ä¹¦éªè¯çå¬é¥b(éè¿caæç³»ç»ååµæå¶å®éå¾)\n 3. å®¢æ·ç«¯ç¨å¬é¥bå¯¹è¯ä¹¦ä¸­çæ°å­ç­¾åè§£å¯ï¼å¾å°åå¸å¼\n 4. å®¢æ·ç«¯å¯¹è¯ä¹¦ä¸­çå¬é¥aè¿è¡åå¸å¼è®¡ç®\n 5. ä¸¤ä¸ªåå¸å¼å¯¹æ¯ï¼å¦æç¸åï¼åè¯ä¹¦åæ³\n\næ³¨ï¼å¬é¥båä¸è¿°çç§é¥bæ¯éå¯¹çï¼åå«ç¨äºå¯¹è¯ä¹¦çéªè¯(è§£å¯)åçæ(å å¯)\n\n\n# éªè¯è¯ä¹¦çè¯ä¹¦\n\nå®¢æ·ç«¯å¾å°çç¨äºè¯ä¹¦éªè¯çå¬é¥bæ¯åæ³çåï¼ä¸ºäºè§£å³è¿ä¸ªé®é¢ï¼æä»¬ä¹éè¦æ³åæ³å¯¹å¬é¥bä¹è¿è¡éªè¯ï¼è¿å°±éè¦æ¾å°å¯¹å¬é¥bä¹è¿è¡ç­¾åãéªè¯ï¼å°±å°±æ¯åé¢è®²å°ççæè¯ä¹¦ãéªè¯è¯ä¹¦ãä¸è¿ï¼è¿ä¸ªè¿ç¨ä½æ¶æ¯ä¸ªå°½å¤´å¢ï¼æ ¹è¯ä¹¦(root certificate)ã\n\næ ¹è¯ä¹¦æ¯å±äºæ ¹è¯ä¹¦é¢åæºæ(ca)çå¬é¥è¯ä¹¦ï¼æ¯å¨å¬å¼éé¥åºç¡å»ºè®¾ä¸­ï¼ä¿¡ä»»é¾çèµ·ç¹ãå®è£æ ¹è¯ä¹¦æå³çå¯¹è¿ä¸ªcaè®¤è¯ä¸­å¿çä¿¡ä»»ãå¦å¤ï¼æ ¹è¯ä¹¦æ¯èªç­¾åçè¯ä¹¦ã\n\n\n# ç­¾åéªè¯\n\n 1. éªè¯æ¶é´æ³\n 2. éªè¯ç­¾å hash ä¸è´æ§\n 3. éªè¯è¯ä¹¦æ¯å¦è¢«åé\n 4. æ²¿è¯ä¹¦é¾ï¼éå¤ä»¥ä¸æµç¨ä»¥éªè¯è¯ä¹¦çæææ§ï¼ç´å°æ ¹è¯ä¹¦\n\n\n# å®è·µ\n\n\n# åµå¥å¼\n\n 1. ç¨ makecert çæä¸ä¸ªèªç­¾åçæ ¹è¯ä¹¦: makecert -n "cn=root" -r -sv test_root.pvk test_root.cer\n 2. ç¨æ ¹è¯ä¹¦ç­¾åä¸ä¸ªå­è¯ä¹¦: makecert -n "cn=child" -iv test_root.pvk -ic test_root.cer -sv test_child.pvk test_child.cer\n 3. å½ç¶ï¼æ­¤æ¶è¿ç§è¯ä¹¦æ¯ä¸è¢«ç³»ç»æä¿¡ä»»çï¼éè¦æå¨æçæçè¯ä¹¦å¯¼å¥å°ç³»ç»ï¼\n    * å¨ windows ç³»ç»çè¿è¡ä¸­è¾å¥certmgr.msc\n    * æ¾å° "åä¿¡ä»»çæ ¹è¯ä¹¦é¢åæºæ"ï¼å³é® -> ææä»»å¡ -> å¯¼å¥\n 4. æ­¤æ¶ï¼å°±å¯ä»¥ä½¿ç¨å¾®è½¯ç signtool å·¥å·å¯¹peæä»¶è¿è¡åµå¥å¼ç­¾åäº\n\n\n# ç¼å½å¼\n\n 1. æ ¹æ®éè¦åå»ºä¸ä¸ª cdf æä»¶ï¼ä¾å¦ï¼\n    \n    [catalogheader]\n    name=tstamd64.cat\n    publicversion=0x0000001\n    encodingtype=0x00010001\n    catattr1=0x10010001:osattr:2:6.0\n    [catalogfiles]\n    <hash>file1=amd64\\toaster.pdb\n    <hash>file2=amd64\\toaster.sys\n    <hash>file3=amd64\\toastva.exe\n    <hash>file4=amd64\\toastva.pdb\n    \n    \n    1\n    2\n    3\n    4\n    5\n    6\n    7\n    8\n    9\n    10\n    \n 2. ä½¿ç¨å¾®è½¯ç makecat å·¥å·ä»ä¸ä¸æ­¥åå»ºç cdf æä»¶çæ cat æä»¶, ä¾å¦ï¼makecat -v tstamd64.cdf\n 3. ä½¿ç¨å¾®è½¯ç signtool å·¥å·å¯¹ cat æä»¶è¿è¡ç­¾å\n\næ³¨ï¼å½ç¶ä¹è¦å°è¯ä¹¦å å¥ä¿¡ä»»åè¡¨\n\næ³¨ï¼åè using-makecat-to-create-a-catalog-file\n\n\n# éªè¯ç­¾å\n\nä½¿ç¨å½ä»¤è¡è¿è¡éªè¯ï¼ signtool verify /v /kp [service-new.exe]\n\næ³¨ï¼åè çæ win10 ä¸è°è¯æå¡æ¶çè¯ä¹¦\n\n\n# ç­¾åä»£ç \n\nå¸¸è§çéªè¯ç­¾åçä»£ç çæ®µï¼\n\n    bool checkfiletrust( lpcwstr lpfilename )\n    {\n        bool bret = false;\n        wintrust_data wd = { 0 };\n        wintrust_file_info wfi = { 0 };\n        wintrust_catalog_info wci = { 0 };\n        catalog_info ci = { 0 };\n    \n        hcatadmin hcatadmin = null;\n        if ( !cryptcatadminacquirecontext( &amp;hcatadmin, null, 0 ) )\n        {\n            return false;\n        }\n    \n        handle hfile = createfilew( lpfilename, generic_read, file_share_read, null, open_existing, 0, null );\n        if ( invalid_handle_value == hfile )\n        {\n            cryptcatadminreleasecontext( hcatadmin, 0 );\n            return false;\n        }\n    \n        dword dwcnt = 100;\n        byte byhash[100];\n        cryptcatadmincalchashfromfilehandle( hfile, &amp;dwcnt, byhash, 0 );\n        closehandle( hfile );\n    \n        lpwstr pszmembertag = new wchar[dwcnt * 2 + 1];\n        for ( dword dw = 0; dw &lt; dwcnt; ++dw )\n        {\n            wsprintfw( &amp;pszmembertag[dw * 2], l"%02x", byhash[dw] );\n        }\n    \n        hcatinfo hcatinfo = cryptcatadminenumcatalogfromhash( hcatadmin, byhash, dwcnt, 0, null );\n        if ( null == hcatinfo )   // ç¼å½ä¸­æ²¡æåéªè¯æ¯å¦æåµå¥å¼ç­¾å\n        {\n            wfi.cbstruct       = sizeof( wintrust_file_info );\n            wfi.pcwszfilepath  = lpfilename;\n            wfi.hfile          = null;\n            wfi.pgknownsubject = null;\n    \n            wd.cbstruct            = sizeof( wintrust_data );\n            wd.dwunionchoice       = wtd_choice_file;\n            wd.pfile               = &amp;wfi;\n            wd.dwuichoice          = wtd_ui_none;\n            wd.fdwrevocationchecks = wtd_revoke_none;\n            wd.dwstateaction       = wtd_stateaction_ignore;\n            wd.dwprovflags         = wtd_safer_flag;\n            wd.hwvtstatedata       = null;\n            wd.pwszurlreference    = null;\n        }\n        else  // ç¼å½ä¸­æï¼éªè¯ç¼å½æä»¶çç­¾åæ¯å¦ææ\n        {\n            cryptcatcataloginfofromcontext( hcatinfo, &amp;ci, 0 );\n            wci.cbstruct             = sizeof( wintrust_catalog_info );\n            wci.pcwszcatalogfilepath = ci.wszcatalogfile;\n            wci.pcwszmemberfilepath  = lpfilename;\n            wci.pcwszmembertag       = pszmembertag;\n    \n            wd.cbstruct            = sizeof( wintrust_data );\n            wd.dwunionchoice       = wtd_choice_catalog;\n            wd.pcatalog            = &amp;wci;\n            wd.dwuichoice          = wtd_ui_none;\n            wd.fdwrevocationchecks = wtd_stateaction_verify;\n            wd.dwprovflags         = 0;\n            wd.hwvtstatedata       = null;\n            wd.pwszurlreference    = null;\n        }\n        guid action = wintrust_action_generic_verify_v2;\n        hresult hr  = winverifytrust( null, &amp;action, &amp;wd );\n        bret        = succeeded( hr );\n    \n        if ( null != hcatinfo )\n        {\n            cryptcatadminreleasecatalogcontext( hcatadmin, hcatinfo, 0 );\n        }\n        cryptcatadminreleasecontext( hcatadmin, 0 );\n        delete[] pszmembertag;\n        return bret;\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n\n\nä»¥ä¸æ¯éè¿ windows ç api è¿è¡éªè¯æä½ï¼å¦æè®©æä»¬èªå·±å»è¿è¡å®æ´çéªè¯æµç¨ï¼æä»¬è¯¥æä¹å¼å¢ï¼\n\n\n# 1. ååºç­¾å\n\næ ¹æ®ä¸æä¸­ pe ç»æå¯ç¥ï¼peå¤´çdata directoriesä¸­certificate tableéé¢ææäºwin_certificateçå­æ¾ä½ç½®åå¤§å°ï¼win_certificateçbcertificateå°±æ¯æ¯signeddataæ ¼å¼çç­¾åãç»æå¦ä¸ï¼\n\n    typedef struct _image_data_directory {\n        dword   virtualaddress;  // peæä»¶çåç§»\n        dword   size;\n    } image_data_directory, *pimage_data_directory;\n    \n    typedef struct _win_certificate\n    {\n        dword       dwlength; // win_certificate çé¿åº¦ï¼å«bcertificateçå¤§å°ï¼\n        word        wrevision;\n        word        wcertificatetype;\n        byte        bcertificate[anysize_array]; // signeddataå¼å§çä½ç½®\n    \n    } win_certificate, *lpwin_certificate;\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\n\n# 2. æ ¡éªæä»¶èªèº«çç­¾å\n\næä»¶ç­¾åæ¬èº«æ¯éµå¾ªpkcs7æ åä¸­ç signeddata æ ¼å¼ï¼ç¨ asn1 è¡¨è¿°çæ ¼å¼å¦ä¸ï¼\n\n    signeddata ::= sequence {\n        version version,\n        digestalgorithms digestalgorithmidentifiers,\n        contentinfo contentinfo,  -- è¿ä¸ªéé¢åå«äºpeæä»¶çhash\n        certificates  --è¯ä¹¦çæ°ç»ï¼ä¸åæ¬æ ¹è¯ä¹¦ï¼\n            [0] implicit extendedcertificatesandcertificates optional,\n        crls \n            [1] implicit certificaterevocationlists optional,\n        signerinfos signerinfos }  -- ç­¾åèçä¿¡æ¯\n    \n    signerinfos ::= set of signerinfo\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\npkcs7æ¯å å¯æ¶æ¯çè¯­æ³æ åï¼x.509æ¯è¯ä¹¦çæ ¼å¼ãasn1æ¯ä¸ç§æè¿°å¯¹è±¡ç»æçè¯­æ³ï¼å¨ä¸è¡çå®ä¹ä¸­å¯ä»¥ç®åçè®¤ä¸ºåé¢çæ¯åéååé¢çæ¯ç±»åã\n\nasn1å¹¶æªå®ä¹ç¼ç æ¹æ³ï¼deræ¯ä¸ç§å¸¸è§çç¼ç æ¹æ³ï¼å¶ä»è¿æ base64 ç­ç¼ç æ¹æ³ã\n\nsignerinfosçç»æå¦ä¸ï¼\n\n    signerinfo ::= sequence {\n        version version,\n        issuerandserialnumber issuerandserialnumber,\n        digestalgorithm digestalgorithmidentifier,\n        authenticatedattributes -- åå«signeddataä¸­contentinfoçæè¦\n            [0] implicit attributes optional,\n        digestencryptionalgorithm digestencryptionalgorithmidentifier,\n        encrypteddigest encrypteddigest, -- å å¯åçæè¦\n        unauthenticatedattributes \n            [1] implicit attributes optional }\n    issuerandserialnumber ::= sequence {\n        issuer name,\n        serialnumber certificateserialnumber }\n    encrypteddigest ::= octet string\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n\n\nauthenticatedattributes åå«äº contenttypeåmessagedigestï¼messagedigest åå°±æ¯å¯¹ signeddata ç contentinfo åçæè¦ãå¯¹authenticatedattributes åæè¦å¾å°ä¸ä¸ª digestinfo ç»æçæ°æ®ï¼digestinfo çç»æå¦ä¸ï¼\n\n    digestinfo ::= sequence {\n        digestalgorithm digestalgorithmidentifier,\n        digest digest }\n    \n    digest ::= octet string\n\n\n1\n2\n3\n4\n5\n\n\nç¨ issuerandserialnumber æ¾å°ç­¾åèçè¯ä¹¦ï¼ä½¿ç¨éé¢çå¬é¥è§£å¯encrypteddigest å¾å°ä¸ä¸ª digestinfo ç»æï¼ä¸è¬æ¯rsaç®æ³ï¼ï¼å°è¿ä¸ªç»æä¸authenticatedattributes åæè¦å¾å°çç»æå¯¹æ¯ï¼ä¸è´çè¯æè¿è¡ä¸ä¸æ­¥ã\n\n\n# 3. éªè¯è¯ä¹¦é¾\n\nç¸å³ç»æå¦ä¸ï¼\n\n-- x509çè¯ä¹¦æ ¼å¼\n   certificate  ::=  sequence  {\n        tbscertificate       tbscertificate,   -- è¯ä¹¦ä¸»ä½\n        signaturealgorithm   algorithmidentifier,  -- ç­¾åç¨çç®æ³ï¼ä¸è¬ä¸ºsha1rsa\n        signaturevalue       bit string  }     -- è¯ä¹¦çç­¾å\n \n   tbscertificate  ::=  sequence  {\n        version         [0]  explicit version default v1, -- peæä»¶æ°å­ç­¾åç¨ççæ¬ä¸º3\n        serialnumber         certificateserialnumber,\n        signature            algorithmidentifier,\n        issuer               name,\n        validity             validity, -- æææ\n        subject              name,\n        subjectpublickeyinfo subjectpublickeyinfo,  -- å«æè¿ä¸ªè¯ä¹¦çå¬é¥\n        issueruniqueid  [1]  implicit uniqueidentifier optional,\n                             -- if present, version must be v2 or v3        \n        subjectuniqueid [2]  implicit uniqueidentifier optional,\n                             -- if present, version must be v2 or v3\n        extensions      [3]  explicit extensions optional  -- æ©å±\n                             -- if present, version must be v3\n        }\n \n   -- å«æå¬é¥çä¿¡æ¯\n   subjectpublickeyinfo  ::=  sequence  {\n        algorithm            algorithmidentifier,\n        subjectpublickey     bit string  }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n\n\né¦åæå»ºè¯ä¹¦é¾ï¼ä»ç»ç«¯ç­¾åæ°å­ç­¾åçè¯ä¹¦ä¸ç´å°èªç­¾åçæ ¹è¯ä¹¦ãè¿æ¶è¦äºè§£å°è¯ä¹¦æåä¸ä¸ªæåä¸ºæ©å±ï¼æ©å±æ¯ä¸åå¶ä»çæ°æ®ï¼å¶ä¸­ä¸¤é¡¹æ¯è¾éè¦çæ¯authoritykeyidentifieråsubjectkeyidentifierï¼ç»æåå«å¦ä¸\n\nauthoritykeyidentifier ::= sequence {\n      keyidentifier             [0] keyidentifier           optional,\n      authoritycertissuer       [1] generalnames            optional,\n      authoritycertserialnumber [2] certificateserialnumber optional  }\n \n   keyidentifier ::= octet string\n \n   subjectkeyidentifier ::= keyidentifier\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\nç»å»ºè¯ä¹¦é¾æ¶ï¼å°æaè¯ä¹¦çä¸­ç authoritykeyidentifierï¼ç®ç§°akidï¼ çkeyidentifierãauthoritycertissuerãauthoritycertserialnumber ä¸bè¯ä¹¦ç subjectkeyidentifierï¼ç®ç§°skidï¼ãissuer ãserialnumber åå«å¹éï¼å¦æå¹éä¸åbè¯ä¹¦ä¸ºaè¯ä¹¦çç­¾åèãå¦æaè¯ä¹¦çä¸é¢ä¸é¡¹ä¸èªå·±å¯¹åºæ°æ®å¹éä¸ï¼åaè¯ä¹¦ä¸ºèªç­¾åçè¯ä¹¦ï¼è¯ä¹¦é¾æå»ºå®æ¯ã\n\nç¶åï¼æ ¡éªè¯ä¹¦é¾ä¸­æ¯ä¸ªè¯ä¹¦çç­¾åãæææåç¨æ³ï¼æ¯å¦å¯ä»¥ç¨äºä»£ç ç­¾åï¼ãç­¾åéªè¯çç®æ³ä¸ºè¯ä¹¦ä¸­ç signaturealgorithmï¼ç­¾åæ¯ signaturevalueï¼è¢«ç­¾åçæ°æ®ä¸º tbscertificateï¼å¬é¥ä»ç¶è¯ä¹¦ç subjectpublickeyinfo éé¢æ¿ã\n\n\n# 4. æ¯å¯¹peæä»¶åç­¾åæ°æ®ä¸­çhash\n\nç­¾åæ°æ®ä¸­çhashç®æ³åhashå¨signeddataçcontentinfoä¸­ï¼contentinfoçç»æä¸ºï¼\n\n    contentinfo ::= sequence {\n    contenttype contenttype,\n    content\n        [0] explicit any defined by contenttype optional \n    }\n\n\n1\n2\n3\n4\n5\n\n\ncontenttype æ¯spc_indirect_data_objid (1.3.6.1.4.1.311.2.1.4)ï¼è¡¨æäºcontentçç±»åãcontentæ¯æ¯ä¸ä¸ªspcindirectdatacontentç»æçæ°æ®ã\n\n    spcindirectdatacontent ::= sequence {\n        data                    spcattributetypeandoptionalvalue,\n        messagedigest           digestinfo\n    } --#publicâ\n    \n    digestinfo ::= sequence {\n        digestalgorithm     algorithmidentifier,\n        digest              octetstring\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\ndigestalgorithm å°±æ¯hashç®æ³ï¼ä¸è¬ä¸ºsha1ãdigestå°±æ¯æä»¶çhashã\n\nhashçè®¡ç®ååä¸ºæé¤ä¸ä»æé¤æç­¾åè¿ç¨ä¸­å¯è½ä¼æ¹å¨çæ°æ®ä»¥åæ°å­ç­¾åæ¬èº«ãå¤§æ¦è®¡ç®è¿ç¨å¦ä¸ï¼\n\n * é¤å»peå¤´ä¸­ checksum å certificate table è®¡ç®peå¤´çhashï¼å« section tableï¼\n * ææ¯ä¸ªèåç§»çé¡ºåºä¾æ¬¡å¯¹æ¯ä¸ªèçæ°æ®ç®hash\n * å¯¹peéå æ°æ®ç®hash\n   * éå æ°æ®çèµ·å§åç§»ä¸ºï¼peå¤´å¤§å°+æ¯ä¸ªèçå¤§å°\n   * éå æ°æ®å¤§å°=æä»¶å¤§å°-(peå¤´+æ¯ä¸ªè)-ç­¾åçå¤§å°\n   * ç­¾åçå¤§å°æ¯ optional header data directories[certificate table].size\n\nå¦å¤ï¼ç±è¿ä¸ªhashç®æ³å¯ä»¥çåºï¼peæä»¶çç­¾åæ°æ®é½æ¯æ¾å°peæä»¶æå°¾é¨çï¼å ä¸ºåªæéå æ°æ®ææ«å°¾ä¸æ®µä¸ºç­¾åæ°æ®å¤§å°çæ°æ®æ¯æ²¡æè®¡ç®å¨peçhashåçãè¿å°±ç»æä»¶å¸¦æ¥äºå¨æä»¶å°¾é¨è¿è¡ä¿®æ¹çå¯è½ï¼ä¸æ¯åï¼\n\n\n# æ»ç»\n\néè¿ä¸æï¼æä»¬å¯¹ windows ä¸çç­¾åæäºä¸å®çäºè§£ï¼èè¿åªæ¯ microsoft å¤æçç­¾åç³»ç»ä¸­çä¸å°é¨åï¼ä¸è¿æäºè¿äºè®¤ç¥ï¼å°±æ´å®¹æå»å­¦ä¹ ç­¾åç¸å³çå¶ä»ç»èä»¥åæ´å å¤æçåå®¹äºã\n\n\n# æè\n\n * counter signature æ¯å¯¹åªååå®¹è®¡ç®ç­¾ååå®¹å¢ï¼\n   * è¿ä¸ª signature æ¯ç¶ç­¾åçä¸ä¸ªå±æ§ï¼è¡¨è¾¾è¿ä¸ªå±æ§çç»æä½(åèé¾æ¥)ä¸ºï¼\n     \n     typedef struct _crypt_attribute {\n         lpstr            pszobjid;\n         dword            cvalue;\n         pcrypt_attr_blob rgvalue;\n     } crypt_attribute, *pcrypt_attribute;\n     \n     typedef struct _cryptoapi_blob {\n     dword cbdata;\n     byte  *pbdata;\n     } crypt_integer_blob, *pcrypt_attr_blob;\n     \n     \n     1\n     2\n     3\n     4\n     5\n     6\n     7\n     8\n     9\n     10\n     \n\n\n# reference\n\n * å¯¹windows å¹³å°ä¸peæä»¶æ°å­ç­¾åçä¸äºç ç©¶\n * using-inf2cat-to-create-a-catalog-file\n * cspå­¦ä¹ ä¹cryptoapiåè¯\n * ç¨äºåæ ¸æ¨¡å¼ä»£ç ç­¾åçäº¤åè¯ä¹¦\n * rfc3161 timestamp information in digital signature (authenticode)',charsets:{cjk:!0}},{title:"çæ win10 ä¸è°è¯æå¡æ¶çè¯ä¹¦",frontmatter:{title:"çæ win10 ä¸è°è¯æå¡æ¶çè¯ä¹¦",date:"2021-04-21T09:50:00.000Z",description:"win10 ä¸è°è¯æå¡æç¤ºè¯ä¹¦é®é¢çä¸ç§è§£å³æ¹æ¡",categories:["platform"],tags:["win10","æå¡è°è¯"],permalink:null},regularPath:"/blog/platform/windows/make_cert.html",relativePath:"blog/platform/windows/make_cert.md",key:"v-6a62161f",path:"/blog/platform/windows/make_cert.html",headers:[{level:2,title:"çæãéªè¯è¯ä¹¦",slug:"çæãéªè¯è¯ä¹¦",normalizedTitle:"çæãéªè¯è¯ä¹¦",charIndex:118},{level:2,title:"è¯´æï¼",slug:"è¯´æ",normalizedTitle:"è¯´æï¼",charIndex:660}],headersStr:"çæãéªè¯è¯ä¹¦ è¯´æï¼",content:"# çæ win10 ä¸è°è¯æå¡æ¶çè¯ä¹¦\n\n> reference: https://docs.microsoft.com/zh-cn/windows-hardware/drivers/install/test-signing\n\n\n# çæãéªè¯è¯ä¹¦\n\n 1. å¶ä½è¯ä¹¦ï¼(ä½¿ç¨ä»¥ä¸ MakeCert å½ä»¤åå»º Contoso.com (æµè¯) è¯ä¹¦)\n    \n    makecert -r -pe -ss PrivateCertStore -n CN=Contoso.com(Test) ContosoTest.cer\n    \n    \n    1\n    \n\n 2. æå¼æµè¯ï¼(ç®¡çåæéï¼éè¦éå¯) : bcdedit /set testsigning on\n\n 3. ä¿¡ä»»ï¼(ç®¡çåæé) : CertMgr.exe /add ContosoTest.cer /s /r localMachine root\n\n 4. ç­¾åï¼:\n    \n    Signtool sign /v /s PrivateCertStore /n Contoso.com(Test) /t http://timestamp.digicert.com tstamd64.cat\n    \n    \n    1\n    \n\n 5. éªè¯ï¼signtool verify /v /kp [service-new.exe]\n\nvs2008 ä»¥ä¸ï¼èªå¸¦ä»¥ä¸æéå·¥å·ï¼å»ºè®®ä½¿ç¨ vs ç Command Prompt å·¥å·æ§è¡ï¼\n\n\n# è¯´æï¼\n\n * æå¡ å é©±å¨ï¼éè¦æ Cross Certificate Chain",normalizedContent:"# çæ win10 ä¸è°è¯æå¡æ¶çè¯ä¹¦\n\n> reference: https://docs.microsoft.com/zh-cn/windows-hardware/drivers/install/test-signing\n\n\n# çæãéªè¯è¯ä¹¦\n\n 1. å¶ä½è¯ä¹¦ï¼(ä½¿ç¨ä»¥ä¸ makecert å½ä»¤åå»º contoso.com (æµè¯) è¯ä¹¦)\n    \n    makecert -r -pe -ss privatecertstore -n cn=contoso.com(test) contosotest.cer\n    \n    \n    1\n    \n\n 2. æå¼æµè¯ï¼(ç®¡çåæéï¼éè¦éå¯) : bcdedit /set testsigning on\n\n 3. ä¿¡ä»»ï¼(ç®¡çåæé) : certmgr.exe /add contosotest.cer /s /r localmachine root\n\n 4. ç­¾åï¼:\n    \n    signtool sign /v /s privatecertstore /n contoso.com(test) /t http://timestamp.digicert.com tstamd64.cat\n    \n    \n    1\n    \n\n 5. éªè¯ï¼signtool verify /v /kp [service-new.exe]\n\nvs2008 ä»¥ä¸ï¼èªå¸¦ä»¥ä¸æéå·¥å·ï¼å»ºè®®ä½¿ç¨ vs ç command prompt å·¥å·æ§è¡ï¼\n\n\n# è¯´æï¼\n\n * æå¡ å é©±å¨ï¼éè¦æ cross certificate chain",charsets:{cjk:!0}},{title:"Introduction to PDB",frontmatter:{title:"Introduction to PDB",date:"2021-07-28T20:50:00.000Z",description:"Introduction to PDB",categories:["platform"],tags:["pdb"],permalink:null},regularPath:"/blog/platform/windows/pdb_structure.html",relativePath:"blog/platform/windows/pdb_structure.md",key:"v-de8bce82",path:"/blog/platform/windows/pdb_structure.html",headers:[{level:2,title:"Reference",slug:"reference",normalizedTitle:"reference",charIndex:26}],headersStr:"Reference",content:"# Introduction to PDB\n\n\n# Reference\n\nhttps://www.cnblogs.com/yilang/p/11978852.html https://www.jianshu.com/p/7ad20a047bb4\n\n../rsc/The_RSDS_pdb_format.mhtml",normalizedContent:"# introduction to pdb\n\n\n# reference\n\nhttps://www.cnblogs.com/yilang/p/11978852.html https://www.jianshu.com/p/7ad20a047bb4\n\n../rsc/the_rsds_pdb_format.mhtml",charsets:{}},{title:"è¿è¡æ¶åº",frontmatter:{title:"è¿è¡æ¶åº",date:"2021-07-28T20:50:00.000Z",description:"Windows ä¸è¿è¡æ¶åº",categories:["platform"],tags:["runtime library","window sdk version"],permalink:null},regularPath:"/blog/platform/windows/runtime_lib.html",relativePath:"blog/platform/windows/runtime_lib.md",key:"v-3682497f",path:"/blog/platform/windows/runtime_lib.html",headers:[{level:2,title:'ä¸ "Windows SDK çæ¬" å "å¹³å°å·¥å·é"',slug:"ä¸-windows-sdk-çæ¬-å-å¹³å°å·¥å·é",normalizedTitle:"ä¸ &quot;windows sdk çæ¬&quot; å &quot;å¹³å°å·¥å·é&quot;",charIndex:null},{level:3,title:'"Windows SDK çæ¬"',slug:"windows-sdk-çæ¬",normalizedTitle:"&quot;windows sdk çæ¬&quot;",charIndex:null},{level:3,title:'"å¹³å°å·¥å·é"',slug:"å¹³å°å·¥å·é",normalizedTitle:"&quot;å¹³å°å·¥å·é&quot;",charIndex:null},{level:2,title:"äº è¿è¡åº(MT MTd MD MDd)",slug:"äº-è¿è¡åº-mt-mtd-md-mdd",normalizedTitle:"äº è¿è¡åº(mt mtd md mdd)",charIndex:1780},{level:3,title:"VS2013åä»¥åçæ¬",slug:"vs2013åä»¥åçæ¬",normalizedTitle:"vs2013åä»¥åçæ¬",charIndex:2090},{level:3,title:"VS2015åä»¥åçæ¬",slug:"vs2015åä»¥åçæ¬",normalizedTitle:"vs2015åä»¥åçæ¬",charIndex:3097},{level:2,title:"ä¸ (å¨æé¾æ¥)åºæä»¶",slug:"ä¸-å¨æé¾æ¥-åºæä»¶",normalizedTitle:"ä¸ (å¨æé¾æ¥)åºæä»¶",charIndex:4137},{level:2,title:"å æè",slug:"å-æè",normalizedTitle:"å æè",charIndex:6091},{level:2,title:"äº Reference",slug:"äº-reference",normalizedTitle:"äº reference",charIndex:6150}],headersStr:'ä¸ "Windows SDK çæ¬" å "å¹³å°å·¥å·é" "Windows SDK çæ¬" "å¹³å°å·¥å·é" äº è¿è¡åº(MT MTd MD MDd) VS2013åä»¥åçæ¬ VS2015åä»¥åçæ¬ ä¸ (å¨æé¾æ¥)åºæä»¶ å æè äº Reference',content:'# è¿è¡æ¶åº\n\nå¨ç¨ visual studio è¿è¡å¼åæ¶ï¼å±æ§->å¸¸è§ è®¾ç½®é¡µé¢éçå°ç "Windows SDK çæ¬" å "å¹³å°å·¥å·é" ä¸¤ä¸ªå±æ§ï¼æ¯å¦ä¸æç½ç¨éï¼å¼åçç¨åºåå¸åç»å¸¸éå°æç¤ºç¼ºå°msvcp140.dll æ msvcr100.dll æèå¶ä»çè¿è¡åºæä»¶ï¼æ¯å¦ç»å¸¸éå°å®è£è½¯ä»¶æ¶æç¤ºéè¦å®è£ "vc_redist.x86.exe" æä»¶ï¼è¿éä¼ä¸ºä½ è§£ç­è¿äºçæã\n\n\n# ä¸ "Windows SDK çæ¬" å "å¹³å°å·¥å·é"\n\n\n# "Windows SDK çæ¬"\n\næ­¤å±æ§æå®ç¨äºçæé¡¹ç®ç Windows SDK ççæ¬ã"Windows SDK çæ¬" æ¯ Visual Studio 2019 ä¸­çå±æ§åï¼å¨ ~ Visual Studio 2015 ä¸­åä¸º "ç®æ å¹³å°çæ¬"ã\n\nå¦æä½ çåºç¨ç¨åºå¯ä»¥å©ç¨æ­¤ Windows SDK çæ¬ä¸­çåè½ï¼ä½ä»å¯å¨ä¸ä½¿ç¨è¿äºåè½çæ©æ Windows çæ¬ä¸è¿è¡ï¼å¯è½ä¼ä¸¢å¤±æäºåè½ï¼ï¼åæ­¤å±æ§å ç®æ å¹³å°æå°çæ¬ å±æ§çå¼å¯è½ä¸åã å¦ææ¯è¿æ ·ï¼åæ¨çä»£ç åºå¨è¿è¡æ¶æ£æ¥å¶æ­£å¨è¿è¡çå¹³å°ççæ¬ï¼å¹¶ç¦ç¨æ§å¹³å°çæ¬ä¸­ä¸å¯ç¨çåè½ã\n\næ­¤å¤ï¼æä»¬éè¦æ³¨æï¼\n\n * é¢å¤çå¨å® _WIN32_WINNTï¼WINVER æå®ä»£ç æ¯æçæä½æä½ç³»ç»çæ¬\n * ä»»ä½ç»å®ç Windows SDK å¤§å¤é½ä¸ Windows SDK çè¾æ©çæ¬ååå¼å®¹\n   * è¿åè®¸æä»¬ä½¿ç¨è¾æ°ç Windows SDK çæ¬ï¼ä½è¿è¡å¨ä¸ä½¿ç¨è¿äºåè½çæ©æ Windows çæ¬ä¸\n * _WIN32_WINNTï¼WINVER å NTDDI_VERSION å®ä»¥å "å¹³å°å·¥å·é" å­æ®µï¼å®ä»¬å±åå³å®äºåºç¨ç¨åºå¯ä»¥è¿è¡ç Windows ç³»ç»çæ¬\n\nå¦ææ¨çåºç¨ç¨åºéè¦å¨ Windows XP ä¸è¿è¡ï¼åå¿é¡»éæ©ä¸ä¸ªä»¥_xpç»å°¾ç å¹³å°å·¥å·éï¼éæ©ä¸ä¸ªè¾æ§ç Windows SDK çæ¬å¹¶è®¾ç½® _WIN32_WINNTï¼WINVER å NTDDI_VERSION å®ã\n\nä¾å¦ï¼æä»¬å¯ä»¥ä½¿ç¨ä»¥ä¸éç½®C ++é¡¹ç®ï¼\n\n    C ++é¡¹ç®=>å±æ§=>éç½®å±æ§=>å¸¸è§\n        ç®æ å¹³å°çæ¬= 10  (ä½¿ç¨æ­¤SDKï¼æ¨å¯ä»¥å©ç¨Windows 10æä½ç³»ç»çåè½)\n    å°åä¸º TargetVer.h çå¤´æä»¶æ·»å å°æ¨çé¡¹ç®ä¸­ï¼è¯¥æä»¶åå«ä»¥ä¸é¢å¤çå¨å®ï¼\n        #define WINVER 0x0603 // Windows 8.1\n        #define _WIN32_WINNT 0x0603 // Windows 8.1\n\n\n1\n2\n3\n4\n5\n\n\n\n# "å¹³å°å·¥å·é"\n\næ­¤å±æ§æå®ç¨äºçæå½åéç½®çå·¥å·éãåå«äº(ä¸éäº)éè¦ä¸º C++ é¡¹ç®æå®çä»¥ä¸åå®¹ï¼\n\n * ç¼è¯å¨\n   * ä¾å¦ï¼v142 å¯¼è´ä½¿ç¨ Visual Studio 2019 ç¼è¯å¨\n * Visual C ++åº\n   * ä¾å¦ï¼v142 è¡¨ç¤ºæ¨æ­£å¨ä½¿ç¨ Visual Studio 2019 C++ åºï¼è¿æå³çï¼æ¨çåºç¨ç¨åºå¨é¨ç½²æé´å°éè¦ Visual Studio 2019 C++ å¯ååè¡ç»ä»¶(MSVCRxxx.dll)\n     * å¯ååè¡ç»ä»¶å®è£å°ï¼C:\\\\Windows\\\\ æ C:\\\\Windows\\\\SysWOW64\\\\\n   * Visual Studio ç Redist ä½ç½®ï¼\n   * 2019ï¼C:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\Redist\\\\\n   * 2005ï¼C:\\\\Program Files (x86)\\\\Microsoft Visual Studio 8\\\\VC\\\\redist\\\\\n * MSVCR\n   * MS =å¾®è½¯ï¼V =è§è§ï¼C =C++ï¼R =å¯ååè¡\n   * åºç¨ç¨åºå¯ä»¥éè¿å¼ç¨ _MSC_VER é¢å¤çç¨åºå®æ¥ç¡®å®ä½¿ç¨åªä¸ª C++ åº\n\nå¦å¤ï¼éè¦æ³¨æçæ¯ Platform Toolset æ¯é¡¹ç®çº§å«çè®¾ç½®(è¯·åè§ *.vcxproj ä¸­ç PlatformToolset)ï¼èæéç Windows SDK Version ä¿å­å¨å¶ä»ä½ç½®ã\n\n\n# äº è¿è¡åº(MT MTd MD MDd)\n\nè¿è¡æ¶åº(Runtime Library), ä¹ç®ç§° CRT(C Run Time Library)ãæ¯ç¨åºå¨è¿è¡æ¶æéè¦çåºæä»¶ï¼éå¸¸è¿è¡æ¶åºæ¯ä»¥ Lib æ Dll å½¢å¼æä¾çã\n\nWindows ä¸ C Runtime Library æ¯å¾®è½¯å¯¹ C æ ååºå½æ°çå®ç°ï¼è¿æ ·æ¯ä¸ªç¨åºå¯ä»¥ç´æ¥ä½¿ç¨ C æ ååºçå½æ°ï¼åæ¥åºç°äº C++ï¼äºæ¯åå¨ C Runtime Library åºç¡ä¸å¼åäº C++ Runtime Libraryï¼å®ç°äºå¯¹ C++ æ ååºçæ¯æãå æ­¤ç°å¨ Windows ä¸ç C/C++ è¿è¡æ¶åºæ¢åå« C æ ååºï¼ä¹åå« C++ æ ååºã\n\n\n# VS2013åä»¥åçæ¬\n\nVS2015ä»¥åçæ¬ ä¸­ç Runtime Library çç±»åæï¼CRT å C++ Standard Library.\n\nThis table lists the libraries that implement CRT initialization and termination.\n\nç±»å                         ç®ç§°     å«ä¹                ä¾èµçåº\nMulti-Threaded             /MT    Releaseççå¤çº¿ç¨éæåº   libcmt.lib\nMulti-Threaded Debug       /MTd   Debugççå¤çº¿ç¨éæåº     libcmtd.lib\nMulti-Threaded DLL         /MD    Releaseççå¤çº¿ç¨å¨æåº   msvcrt.lib + msvcr*.dll\nMulti-Threaded DLL Debug   /MDd   Debugççå¤çº¿ç¨å¨æåº     msvcrtd.lib + msvcr*d.dll\n\næ­¤å¤ï¼ä¸ºäºæ¯æ .NET å C çæ··ç¼ï¼å¼å¥äº /clr éé¡¹(åªæ¯æ /MD éé¡¹)ï¼\n\néé¡¹     çæ¬        ä¾èµçåº\n/clr   Release   msvcmrt.lib\n/clr   Debug     msvcmrtd.lib\n\nC++ Standard Library .lib files\n\nç±»å                         ç®ç§°     å«ä¹                ä¾èµçåº\nMulti-Threaded             /MT    Releaseççå¤çº¿ç¨éæåº   libcpmt.lib\nMulti-Threaded Debug       /MTd   Debugççå¤çº¿ç¨éæåº     libcpmtd.lib\nMulti-Threaded DLL         /MD    Releaseççå¤çº¿ç¨å¨æåº   msvcprt.lib + msvcp*.dll\nMulti-Threaded DLL Debug   /MDd   Debugççå¤çº¿ç¨å¨æåº     msvcprtd.lib + msvcp*d.dll\n\n\n# VS2015åä»¥åçæ¬\n\nVS2015åä»¥åçæ¬ ä¸­ CRT è¢«æåæäºä¸¤é¨åï¼UCRT å vcruntime libraryã(æ³¨æï¼C++ Standard Librar è·åæ¥ä¸æ ·ï¼è¿éå°±ä¸åéå¤ã)\n\nThe following table lists the libraries that implement the UCRT.\n\nç±»å                         ç®ç§°     å«ä¹                ä¾èµçåº\nMulti-Threaded             /MT    Releaseççå¤çº¿ç¨éæåº   libucrt.lib\nMulti-Threaded Debug       /MTd   Debugççå¤çº¿ç¨éæåº     libucrtd.lib\nMulti-Threaded DLL         /MD    Releaseççå¤çº¿ç¨å¨æåº   ucrt.lib + ucrtbase.dll\nMulti-Threaded DLL Debug   /MDd   Debugççå¤çº¿ç¨å¨æåº     ucrtd.lib + ucrtbased.dll\n\nThis table lists the libraries that implement the vcruntime library.\n\nç±»å                         ç®ç§°     å«ä¹                ä¾èµçåº\nMulti-Threaded             /MT    Releaseççå¤çº¿ç¨éæåº   libvcruntime.lib\nMulti-Threaded Debug       /MTd   Debugççå¤çº¿ç¨éæåº     libvcruntimed.lib\nMulti-Threaded DLL         /MD    Releaseççå¤çº¿ç¨å¨æåº   vcruntime.lib + vcruntime*.dll\nMulti-Threaded DLL Debug   /MDd   Debugççå¤çº¿ç¨å¨æåº     vcruntimed.lib + vcruntime*d.dll\n\næ ¹æ®ä¸è¡¨ï¼æä»¬å¯ä»¥åç° MT MTd MD MDd çä¾èµä¸åãè³äº å¨æåºãéæåº çä¸åï¼å¤§ä¼å¯ä»¥èªè¡æ¥æ¾èµæ(ä¸»è¦åºå«å¨äºä¸ä¸ªè¿ç¨ä¸­çå¤ä¸ªæ¨¡åä½¿ç¨çåä¸ä¸ªåºæ¯å¦å±äº«)~\n\n\n# ä¸ (å¨æé¾æ¥)åºæä»¶\n\n 1. msvcrt*.dll\n    * å®æ¯ vc6 ä»¥åä¹åç CRT åºï¼ç¹ç¹æ¯ c å c++ çå½æ°é½å¨ä¸ä¸ªæä»¶\n 2. msvcp*.dll å msvcr*.dll\n    * å®æ¯ vc7 ~ vs2013ä½¿ç¨ CRT åº\n    * c å c++ çå½æ°æ¯åå¼å­æ¾å¨ä¸åæä»¶çï¼c å¯¹åº msvcr*.dllï¼ c++ å¯¹åº msvcp*.dll\n 3. msvcp*.dllãucrtbase.dll å vcruntime*.dll\n    * å®æ¯ vs2015 ~ä½¿ç¨ç CRT åº\n    * vs2015 å·²ç»æ²¡æ msvcr140.dll äº, å®è¢«ææäºä¸¤ä¸ªæä»¶ï¼\n      * ucrtbase.dll åå«æ åcåºçåå®¹\n        * UCRT(The Universal CRT) contains the functions and globals exported by the standard C99 CRT library.\n      * vcruntime140.dll åå« c++ è¿è¡æéè¦å¤ççç¹å«åè½ï¼å¦ï¼è°è¯æ¯æãå¼å¸¸å¤çãä»¥åè¦åå°ç¸å³ç¼è¯å¨çåè½ã\n 4. api-ms-win-*.dll\n    * vs2015 ä»¥åä¹åçæ¬ç redist åºè¿åå« Windows API Sets (å½¢å¦api-ms-win-crt-runtime-l1-1-0.dll)\n    * ææçæ¬ç Windows 10 å±äº«ä¸ä¸ªéç¨çæä½ç³»ç»ç»ä»¶åºç¡ï¼ç§°ä¸ºcore OSï¼å¨æäºæåµä¸ï¼æ­¤éç¨åºç¡ä¹ç§°ä¸º OneCoreï¼ãå¨æ ¸å¿æä½ç³»ç»ç»ä»¶ä¸­ï¼Win32 API è¢«ç»ç»æç§°ä¸º API éçåè½ç»ã\n    * Windows API Sets ä¸»è¦æ¯ä¸ºäºä»¥ä¸åºæ¯ï¼è·¨åç§ä¸åç win10 è®¾å¤å¹³å°(å¦ HoloLens, Xbox, and other devices running Windows 10x)ãä¸ºåå¹³å°æä¾æå°çå¯ç¨ API éå\n\nè¿æä¸äºå¶ä»çåºæä»¶å¦ï¼\n\n 1. vcomp140.dll\n    * å®æ¯ Microsoft Visual C++ Redistributable Packages for Visual Studio 2015 çä¸é¨åï¼ç¨äºæ¯æ OpenMP åè½\n    * è¿ä¸ªæä»¶ç¸å³çåè½ï¼ç®ååªè½ å¨æé¾æ¥\n\nç¸å³ççæ¬ä¿¡æ¯å¦ä¸ï¼\n\nMSVC          MSC_VER (VISUAL STUDIO)                      C/C++ RUN TIME\nMSVC++ 14.0   _MSC_VER == 1900 (Visual Studio 2015)        ucrtbase.dll vcruntime140.dll msvcp140.dll\nMSVC++ 12.0   _MSC_VER == 1800 (Visual Studio 2013)        msvcr120.dll msvcp120.dll\nMSVC++ 11.0   _MSC_VER == 1700 (Visual Studio 2012)        msvcr110.dll msvcp110.dll\nMSVC++ 10.0   _MSC_VER == 1600 (Visual Studio 2010)        msvcr100.dll msvcp100.dll\nMSVC++ 9.0    _MSC_VER == 1500 (Visual Studio 2008)        msvcr90.dll msvcp90.dll\nMSVC++ 8.0    _MSC_VER == 1400 (Visual Studio 2005)        msvcr80.dll msvcp80.dll\nMSVC++ 7.1    _MSC_VER == 1310 (Visual Studio .NET 2003)   msvcr71.dll msvcp71.dll\nMSVC++ 7.0    _MSC_VER == 1300 (Visual Studio .NET 2002)   msvcr70.dll msvcp70.dll\nMSVC++ 6.0    _MSC_VER == 1200 (Visual Studio 6.0)         msvcrt.dll\nMSVC++ 5.0    _MSC_VER == 1100 (Visual Studio 97)          msvcrt.dll\n\n\n# å æè\n\n 1. c++ çæ¬çéæ© æä¹çæçï¼\n 2. ä¸ºä»ä¹è¿è¡åºä¼æè¿ä¹å¤åå²ååï¼\n 3. æ»ç»\n\n\n# äº Reference\n\n * âå¸¸è§âå±æ§é¡µï¼é¡¹ç®ï¼\n * C runtime (CRT) and C++ Standard Library (STL) .lib files\n * Windows API sets\n * vs2015é¨ç½²---ä¸ä¸ä»£VCè¿è¡æ¶åºç³»ç»ï¼the Universal CRT\n * å¸¦ä½ ç©è½¬ Visual Studioââå¸¦ä½ è·³åºåç¹ç Runtime Library å',normalizedContent:'# è¿è¡æ¶åº\n\nå¨ç¨ visual studio è¿è¡å¼åæ¶ï¼å±æ§->å¸¸è§ è®¾ç½®é¡µé¢éçå°ç "windows sdk çæ¬" å "å¹³å°å·¥å·é" ä¸¤ä¸ªå±æ§ï¼æ¯å¦ä¸æç½ç¨éï¼å¼åçç¨åºåå¸åç»å¸¸éå°æç¤ºç¼ºå°msvcp140.dll æ msvcr100.dll æèå¶ä»çè¿è¡åºæä»¶ï¼æ¯å¦ç»å¸¸éå°å®è£è½¯ä»¶æ¶æç¤ºéè¦å®è£ "vc_redist.x86.exe" æä»¶ï¼è¿éä¼ä¸ºä½ è§£ç­è¿äºçæã\n\n\n# ä¸ "windows sdk çæ¬" å "å¹³å°å·¥å·é"\n\n\n# "windows sdk çæ¬"\n\næ­¤å±æ§æå®ç¨äºçæé¡¹ç®ç windows sdk ççæ¬ã"windows sdk çæ¬" æ¯ visual studio 2019 ä¸­çå±æ§åï¼å¨ ~ visual studio 2015 ä¸­åä¸º "ç®æ å¹³å°çæ¬"ã\n\nå¦æä½ çåºç¨ç¨åºå¯ä»¥å©ç¨æ­¤ windows sdk çæ¬ä¸­çåè½ï¼ä½ä»å¯å¨ä¸ä½¿ç¨è¿äºåè½çæ©æ windows çæ¬ä¸è¿è¡ï¼å¯è½ä¼ä¸¢å¤±æäºåè½ï¼ï¼åæ­¤å±æ§å ç®æ å¹³å°æå°çæ¬ å±æ§çå¼å¯è½ä¸åã å¦ææ¯è¿æ ·ï¼åæ¨çä»£ç åºå¨è¿è¡æ¶æ£æ¥å¶æ­£å¨è¿è¡çå¹³å°ççæ¬ï¼å¹¶ç¦ç¨æ§å¹³å°çæ¬ä¸­ä¸å¯ç¨çåè½ã\n\næ­¤å¤ï¼æä»¬éè¦æ³¨æï¼\n\n * é¢å¤çå¨å® _win32_winntï¼winver æå®ä»£ç æ¯æçæä½æä½ç³»ç»çæ¬\n * ä»»ä½ç»å®ç windows sdk å¤§å¤é½ä¸ windows sdk çè¾æ©çæ¬ååå¼å®¹\n   * è¿åè®¸æä»¬ä½¿ç¨è¾æ°ç windows sdk çæ¬ï¼ä½è¿è¡å¨ä¸ä½¿ç¨è¿äºåè½çæ©æ windows çæ¬ä¸\n * _win32_winntï¼winver å ntddi_version å®ä»¥å "å¹³å°å·¥å·é" å­æ®µï¼å®ä»¬å±åå³å®äºåºç¨ç¨åºå¯ä»¥è¿è¡ç windows ç³»ç»çæ¬\n\nå¦ææ¨çåºç¨ç¨åºéè¦å¨ windows xp ä¸è¿è¡ï¼åå¿é¡»éæ©ä¸ä¸ªä»¥_xpç»å°¾ç å¹³å°å·¥å·éï¼éæ©ä¸ä¸ªè¾æ§ç windows sdk çæ¬å¹¶è®¾ç½® _win32_winntï¼winver å ntddi_version å®ã\n\nä¾å¦ï¼æä»¬å¯ä»¥ä½¿ç¨ä»¥ä¸éç½®c ++é¡¹ç®ï¼\n\n    c ++é¡¹ç®=>å±æ§=>éç½®å±æ§=>å¸¸è§\n        ç®æ å¹³å°çæ¬= 10  (ä½¿ç¨æ­¤sdkï¼æ¨å¯ä»¥å©ç¨windows 10æä½ç³»ç»çåè½)\n    å°åä¸º targetver.h çå¤´æä»¶æ·»å å°æ¨çé¡¹ç®ä¸­ï¼è¯¥æä»¶åå«ä»¥ä¸é¢å¤çå¨å®ï¼\n        #define winver 0x0603 // windows 8.1\n        #define _win32_winnt 0x0603 // windows 8.1\n\n\n1\n2\n3\n4\n5\n\n\n\n# "å¹³å°å·¥å·é"\n\næ­¤å±æ§æå®ç¨äºçæå½åéç½®çå·¥å·éãåå«äº(ä¸éäº)éè¦ä¸º c++ é¡¹ç®æå®çä»¥ä¸åå®¹ï¼\n\n * ç¼è¯å¨\n   * ä¾å¦ï¼v142 å¯¼è´ä½¿ç¨ visual studio 2019 ç¼è¯å¨\n * visual c ++åº\n   * ä¾å¦ï¼v142 è¡¨ç¤ºæ¨æ­£å¨ä½¿ç¨ visual studio 2019 c++ åºï¼è¿æå³çï¼æ¨çåºç¨ç¨åºå¨é¨ç½²æé´å°éè¦ visual studio 2019 c++ å¯ååè¡ç»ä»¶(msvcrxxx.dll)\n     * å¯ååè¡ç»ä»¶å®è£å°ï¼c:\\\\windows\\\\ æ c:\\\\windows\\\\syswow64\\\\\n   * visual studio ç redist ä½ç½®ï¼\n   * 2019ï¼c:\\\\program files (x86)\\\\windows kits\\\\10\\\\redist\\\\\n   * 2005ï¼c:\\\\program files (x86)\\\\microsoft visual studio 8\\\\vc\\\\redist\\\\\n * msvcr\n   * ms =å¾®è½¯ï¼v =è§è§ï¼c =c++ï¼r =å¯ååè¡\n   * åºç¨ç¨åºå¯ä»¥éè¿å¼ç¨ _msc_ver é¢å¤çç¨åºå®æ¥ç¡®å®ä½¿ç¨åªä¸ª c++ åº\n\nå¦å¤ï¼éè¦æ³¨æçæ¯ platform toolset æ¯é¡¹ç®çº§å«çè®¾ç½®(è¯·åè§ *.vcxproj ä¸­ç platformtoolset)ï¼èæéç windows sdk version ä¿å­å¨å¶ä»ä½ç½®ã\n\n\n# äº è¿è¡åº(mt mtd md mdd)\n\nè¿è¡æ¶åº(runtime library), ä¹ç®ç§° crt(c run time library)ãæ¯ç¨åºå¨è¿è¡æ¶æéè¦çåºæä»¶ï¼éå¸¸è¿è¡æ¶åºæ¯ä»¥ lib æ dll å½¢å¼æä¾çã\n\nwindows ä¸ c runtime library æ¯å¾®è½¯å¯¹ c æ ååºå½æ°çå®ç°ï¼è¿æ ·æ¯ä¸ªç¨åºå¯ä»¥ç´æ¥ä½¿ç¨ c æ ååºçå½æ°ï¼åæ¥åºç°äº c++ï¼äºæ¯åå¨ c runtime library åºç¡ä¸å¼åäº c++ runtime libraryï¼å®ç°äºå¯¹ c++ æ ååºçæ¯æãå æ­¤ç°å¨ windows ä¸ç c/c++ è¿è¡æ¶åºæ¢åå« c æ ååºï¼ä¹åå« c++ æ ååºã\n\n\n# vs2013åä»¥åçæ¬\n\nvs2015ä»¥åçæ¬ ä¸­ç runtime library çç±»åæï¼crt å c++ standard library.\n\nthis table lists the libraries that implement crt initialization and termination.\n\nç±»å                         ç®ç§°     å«ä¹                ä¾èµçåº\nmulti-threaded             /mt    releaseççå¤çº¿ç¨éæåº   libcmt.lib\nmulti-threaded debug       /mtd   debugççå¤çº¿ç¨éæåº     libcmtd.lib\nmulti-threaded dll         /md    releaseççå¤çº¿ç¨å¨æåº   msvcrt.lib + msvcr*.dll\nmulti-threaded dll debug   /mdd   debugççå¤çº¿ç¨å¨æåº     msvcrtd.lib + msvcr*d.dll\n\næ­¤å¤ï¼ä¸ºäºæ¯æ .net å c çæ··ç¼ï¼å¼å¥äº /clr éé¡¹(åªæ¯æ /md éé¡¹)ï¼\n\néé¡¹     çæ¬        ä¾èµçåº\n/clr   release   msvcmrt.lib\n/clr   debug     msvcmrtd.lib\n\nc++ standard library .lib files\n\nç±»å                         ç®ç§°     å«ä¹                ä¾èµçåº\nmulti-threaded             /mt    releaseççå¤çº¿ç¨éæåº   libcpmt.lib\nmulti-threaded debug       /mtd   debugççå¤çº¿ç¨éæåº     libcpmtd.lib\nmulti-threaded dll         /md    releaseççå¤çº¿ç¨å¨æåº   msvcprt.lib + msvcp*.dll\nmulti-threaded dll debug   /mdd   debugççå¤çº¿ç¨å¨æåº     msvcprtd.lib + msvcp*d.dll\n\n\n# vs2015åä»¥åçæ¬\n\nvs2015åä»¥åçæ¬ ä¸­ crt è¢«æåæäºä¸¤é¨åï¼ucrt å vcruntime libraryã(æ³¨æï¼c++ standard librar è·åæ¥ä¸æ ·ï¼è¿éå°±ä¸åéå¤ã)\n\nthe following table lists the libraries that implement the ucrt.\n\nç±»å                         ç®ç§°     å«ä¹                ä¾èµçåº\nmulti-threaded             /mt    releaseççå¤çº¿ç¨éæåº   libucrt.lib\nmulti-threaded debug       /mtd   debugççå¤çº¿ç¨éæåº     libucrtd.lib\nmulti-threaded dll         /md    releaseççå¤çº¿ç¨å¨æåº   ucrt.lib + ucrtbase.dll\nmulti-threaded dll debug   /mdd   debugççå¤çº¿ç¨å¨æåº     ucrtd.lib + ucrtbased.dll\n\nthis table lists the libraries that implement the vcruntime library.\n\nç±»å                         ç®ç§°     å«ä¹                ä¾èµçåº\nmulti-threaded             /mt    releaseççå¤çº¿ç¨éæåº   libvcruntime.lib\nmulti-threaded debug       /mtd   debugççå¤çº¿ç¨éæåº     libvcruntimed.lib\nmulti-threaded dll         /md    releaseççå¤çº¿ç¨å¨æåº   vcruntime.lib + vcruntime*.dll\nmulti-threaded dll debug   /mdd   debugççå¤çº¿ç¨å¨æåº     vcruntimed.lib + vcruntime*d.dll\n\næ ¹æ®ä¸è¡¨ï¼æä»¬å¯ä»¥åç° mt mtd md mdd çä¾èµä¸åãè³äº å¨æåºãéæåº çä¸åï¼å¤§ä¼å¯ä»¥èªè¡æ¥æ¾èµæ(ä¸»è¦åºå«å¨äºä¸ä¸ªè¿ç¨ä¸­çå¤ä¸ªæ¨¡åä½¿ç¨çåä¸ä¸ªåºæ¯å¦å±äº«)~\n\n\n# ä¸ (å¨æé¾æ¥)åºæä»¶\n\n 1. msvcrt*.dll\n    * å®æ¯ vc6 ä»¥åä¹åç crt åºï¼ç¹ç¹æ¯ c å c++ çå½æ°é½å¨ä¸ä¸ªæä»¶\n 2. msvcp*.dll å msvcr*.dll\n    * å®æ¯ vc7 ~ vs2013ä½¿ç¨ crt åº\n    * c å c++ çå½æ°æ¯åå¼å­æ¾å¨ä¸åæä»¶çï¼c å¯¹åº msvcr*.dllï¼ c++ å¯¹åº msvcp*.dll\n 3. msvcp*.dllãucrtbase.dll å vcruntime*.dll\n    * å®æ¯ vs2015 ~ä½¿ç¨ç crt åº\n    * vs2015 å·²ç»æ²¡æ msvcr140.dll äº, å®è¢«ææäºä¸¤ä¸ªæä»¶ï¼\n      * ucrtbase.dll åå«æ åcåºçåå®¹\n        * ucrt(the universal crt) contains the functions and globals exported by the standard c99 crt library.\n      * vcruntime140.dll åå« c++ è¿è¡æéè¦å¤ççç¹å«åè½ï¼å¦ï¼è°è¯æ¯æãå¼å¸¸å¤çãä»¥åè¦åå°ç¸å³ç¼è¯å¨çåè½ã\n 4. api-ms-win-*.dll\n    * vs2015 ä»¥åä¹åçæ¬ç redist åºè¿åå« windows api sets (å½¢å¦api-ms-win-crt-runtime-l1-1-0.dll)\n    * ææçæ¬ç windows 10 å±äº«ä¸ä¸ªéç¨çæä½ç³»ç»ç»ä»¶åºç¡ï¼ç§°ä¸ºcore osï¼å¨æäºæåµä¸ï¼æ­¤éç¨åºç¡ä¹ç§°ä¸º onecoreï¼ãå¨æ ¸å¿æä½ç³»ç»ç»ä»¶ä¸­ï¼win32 api è¢«ç»ç»æç§°ä¸º api éçåè½ç»ã\n    * windows api sets ä¸»è¦æ¯ä¸ºäºä»¥ä¸åºæ¯ï¼è·¨åç§ä¸åç win10 è®¾å¤å¹³å°(å¦ hololens, xbox, and other devices running windows 10x)ãä¸ºåå¹³å°æä¾æå°çå¯ç¨ api éå\n\nè¿æä¸äºå¶ä»çåºæä»¶å¦ï¼\n\n 1. vcomp140.dll\n    * å®æ¯ microsoft visual c++ redistributable packages for visual studio 2015 çä¸é¨åï¼ç¨äºæ¯æ openmp åè½\n    * è¿ä¸ªæä»¶ç¸å³çåè½ï¼ç®ååªè½ å¨æé¾æ¥\n\nç¸å³ççæ¬ä¿¡æ¯å¦ä¸ï¼\n\nmsvc          msc_ver (visual studio)                      c/c++ run time\nmsvc++ 14.0   _msc_ver == 1900 (visual studio 2015)        ucrtbase.dll vcruntime140.dll msvcp140.dll\nmsvc++ 12.0   _msc_ver == 1800 (visual studio 2013)        msvcr120.dll msvcp120.dll\nmsvc++ 11.0   _msc_ver == 1700 (visual studio 2012)        msvcr110.dll msvcp110.dll\nmsvc++ 10.0   _msc_ver == 1600 (visual studio 2010)        msvcr100.dll msvcp100.dll\nmsvc++ 9.0    _msc_ver == 1500 (visual studio 2008)        msvcr90.dll msvcp90.dll\nmsvc++ 8.0    _msc_ver == 1400 (visual studio 2005)        msvcr80.dll msvcp80.dll\nmsvc++ 7.1    _msc_ver == 1310 (visual studio .net 2003)   msvcr71.dll msvcp71.dll\nmsvc++ 7.0    _msc_ver == 1300 (visual studio .net 2002)   msvcr70.dll msvcp70.dll\nmsvc++ 6.0    _msc_ver == 1200 (visual studio 6.0)         msvcrt.dll\nmsvc++ 5.0    _msc_ver == 1100 (visual studio 97)          msvcrt.dll\n\n\n# å æè\n\n 1. c++ çæ¬çéæ© æä¹çæçï¼\n 2. ä¸ºä»ä¹è¿è¡åºä¼æè¿ä¹å¤åå²ååï¼\n 3. æ»ç»\n\n\n# äº reference\n\n * âå¸¸è§âå±æ§é¡µï¼é¡¹ç®ï¼\n * c runtime (crt) and c++ standard library (stl) .lib files\n * windows api sets\n * vs2015é¨ç½²---ä¸ä¸ä»£vcè¿è¡æ¶åºç³»ç»ï¼the universal crt\n * å¸¦ä½ ç©è½¬ visual studioââå¸¦ä½ è·³åºåç¹ç runtime library å',charsets:{cjk:!0}},{title:"Skills ç®å½",frontmatter:{published:!0,title:"Skills ç®å½",description:"devopsãbigdataãmlãai ç­åæ²¿ææ¯æè½",keywords:[""],categories:["skills","devops","image processing","k8s"],permalink:"/blog/skills/",date:"2020-04-13T00:00:00.000Z",tags:[null]},regularPath:"/blog/skills/",relativePath:"blog/skills/README.md",key:"v-1d6a5088",path:"/blog/skills/",headers:[{level:2,title:"ä¸ã Office",slug:"ä¸ã-office",normalizedTitle:"ä¸ã office",charIndex:16},{level:2,title:"äºã Ui",slug:"äºã-ui",normalizedTitle:"äºã ui",charIndex:92},{level:2,title:"ä¸ã Ai",slug:"ä¸ã-ai",normalizedTitle:"ä¸ã ai",charIndex:124},{level:2,title:"åã Utils",slug:"åã-utils",normalizedTitle:"åã utils",charIndex:258},{level:2,title:"äºã Pdf",slug:"äºã-pdf",normalizedTitle:"äºã pdf",charIndex:333},{level:2,title:"å­ã Devops",slug:"å­ã-devops",normalizedTitle:"å­ã devops",charIndex:357}],headersStr:"ä¸ã Office äºã Ui ä¸ã Ai åã Utils äºã Pdf å­ã Devops",content:"# SKILLS ç®å½\n\n\n# ä¸ã Office\n\n * Ms Shell Link æ ¼å¼ç®æ\n * Office æ ¼å¼ç®æ\n * Office æ ¼å¼ç®æ - Crypto\n\n\n# äºã Ui\n\n * Ui æé¡¹\n * Inkscape\n\n\n# ä¸ã Ai\n\n * Nn è®ºæéè¯»\n * å¤§æ°æ®æ¶æçè®º\n * Single Image Super Resolution\n * å¾åå¤çåºç¡\n * æºå¨å­¦ä¹ è¯ä¼°ææ :åç±»\n * Pcaåçæ¨å¯¼\n * æ¼«æ­¥ç¥ç»ç½ç»åºç¨\n * Pytorchå¥é¨(å¿«éãæ·±åº¦)\n\n\n# åã Utils\n\n * Programing For Children\n * å­ç¬¦é & ç¼ç \n * Windows Wallpapers\n\n\n# äºã Pdf\n\n * Pdf æ ¼å¼ç®æ\n\n\n# å­ã Devops\n\n * K8S-Ipvsè¿æ¥ä¿æ\n * Docker åºç¡ç¥è¯\n * K8Sç½ç»ä¹Serviceé´çéä¿¡\n * K8Sç½ç»ä¹ç½ç»æ¡æ¶\n * Kubernetes ç®è¿°\n * K8Sç½ç»ä¹éç¾¤å¤è®¿é®Serviceçæ¹å¼\n * K8S ç Rolling Update\n * Opentracing ç®ä»",normalizedContent:"# skills ç®å½\n\n\n# ä¸ã office\n\n * ms shell link æ ¼å¼ç®æ\n * office æ ¼å¼ç®æ\n * office æ ¼å¼ç®æ - crypto\n\n\n# äºã ui\n\n * ui æé¡¹\n * inkscape\n\n\n# ä¸ã ai\n\n * nn è®ºæéè¯»\n * å¤§æ°æ®æ¶æçè®º\n * single image super resolution\n * å¾åå¤çåºç¡\n * æºå¨å­¦ä¹ è¯ä¼°ææ :åç±»\n * pcaåçæ¨å¯¼\n * æ¼«æ­¥ç¥ç»ç½ç»åºç¨\n * pytorchå¥é¨(å¿«éãæ·±åº¦)\n\n\n# åã utils\n\n * programing for children\n * å­ç¬¦é & ç¼ç \n * windows wallpapers\n\n\n# äºã pdf\n\n * pdf æ ¼å¼ç®æ\n\n\n# å­ã devops\n\n * k8s-ipvsè¿æ¥ä¿æ\n * docker åºç¡ç¥è¯\n * k8sç½ç»ä¹serviceé´çéä¿¡\n * k8sç½ç»ä¹ç½ç»æ¡æ¶\n * kubernetes ç®è¿°\n * k8sç½ç»ä¹éç¾¤å¤è®¿é®serviceçæ¹å¼\n * k8s ç rolling update\n * opentracing ç®ä»",charsets:{cjk:!0}},{title:"æ¼«æ­¥ç¥ç»ç½ç»åºç¨",frontmatter:{title:"æ¼«æ­¥ç¥ç»ç½ç»åºç¨",date:"2021-02-22T09:50:00.000Z",description:"ç§çè½¬æ¢ä¸ºå¨æ¼«é£æ ¼ãå¸¸è§çä¼è´¨ç½ç»",categories:["imgproc"],tags:["anime style"],permalink:null},regularPath:"/blog/skills/ai/anime_roam.html",relativePath:"blog/skills/ai/anime_roam.md",key:"v-091c8f7f",path:"/blog/skills/ai/anime_roam.html",headers:[{level:2,title:"1. å¨æ¼«é£æ ¼è½¬æ¢",slug:"_1-å¨æ¼«é£æ ¼è½¬æ¢",normalizedTitle:"1. å¨æ¼«é£æ ¼è½¬æ¢",charIndex:2},{level:3,title:"ç¸å³éè¯»",slug:"ç¸å³éè¯»",normalizedTitle:"ç¸å³éè¯»",charIndex:1164},{level:2,title:"2. çäººç¨ç¼ç",slug:"_2-çäººç¨ç¼ç",normalizedTitle:"2. çäººç¨ç¼ç",charIndex:1276},{level:3,title:"facial-action-units introduce",slug:"facial-action-units-introduce",normalizedTitle:"facial-action-units introduce",charIndex:1500},{level:3,title:"paper : FLNet: Landmark Driven Fetching and Learning Network for Faithful Talking Facial Animation Synthesis",slug:"paper-flnet-landmark-driven-fetching-and-learning-network-for-faithful-talking-facial-animation-synthesis",normalizedTitle:"paper : flnet: landmark driven fetching and learning network for faithful talking facial animation synthesis",charIndex:1534},{level:2,title:"3. æ£å¾",slug:"_3-æ£å¾",normalizedTitle:"3. æ£å¾",charIndex:1869},{level:2,title:"4. Scaling",slug:"_4-scaling",normalizedTitle:"4. scaling",charIndex:2020},{level:3,title:"å»ç¥",slug:"å»ç¥",normalizedTitle:"å»ç¥",charIndex:3068},{level:2,title:"5. ä¼è´¨æ¨¡å",slug:"_5-ä¼è´¨æ¨¡å",normalizedTitle:"5. ä¼è´¨æ¨¡å",charIndex:3301},{level:2,title:"6. Notes",slug:"_6-notes",normalizedTitle:"6. notes",charIndex:4619},{level:3,title:"1. æé¡¹è®°å½",slug:"_1-æé¡¹è®°å½",normalizedTitle:"1. æé¡¹è®°å½",charIndex:4632},{level:3,title:"2. æ·±åº¦éè¯»",slug:"_2-æ·±åº¦éè¯»",normalizedTitle:"2. æ·±åº¦éè¯»",charIndex:4970}],headersStr:"1. å¨æ¼«é£æ ¼è½¬æ¢ ç¸å³éè¯» 2. çäººç¨ç¼ç facial-action-units introduce paper : FLNet: Landmark Driven Fetching and Learning Network for Faithful Talking Facial Animation Synthesis 3. æ£å¾ 4. Scaling å»ç¥ 5. ä¼è´¨æ¨¡å 6. Notes 1. æé¡¹è®°å½ 2. æ·±åº¦éè¯»",content:"# 1. å¨æ¼«é£æ ¼è½¬æ¢\n\nGAN                 TYPE         CODE                                                          ONLINE     NOTE\nCartoonGAN          pytorch      https://github.com/znxlwm/pytorch-CartoonGAN                  x          \nCartoonGAN          tensorflow   https://github.com/mnicnc404/CartoonGan-tensorflow            èªå¸¦é¢è®­ç»      é¢è®­ç»æ¨¡å:\n                                                                                                          http://cg.cs.tsinghua.edu.cn/people/~Yongjin/CartoonGAN-Models.rarï¼\n                                                                                                          ææè¾å·®ï¼å¾çç»èä¿çä¸è¶³ï¼\nAnimeGAN            tensorflow   https://github.com/TachibanaYoshino/AnimeGAN                  x          pytorch å®ç°ï¼https://github.com/XuHangkun/AnimeGAN_in_Pytorch\nAnimeGANv2          tensorflow   https://github.com/TachibanaYoshino/AnimeGANv2                x ï½ æææªç¥   \nWhite-box Cartoon   tensorflow   https://github.com/SystemErrorWang/White-box-Cartoonization   èªå¸¦é¢è®­ç»      æææå¥½ï¼åºç¨ï¼https://github.com/margaretmz/cartoonizer-with-tflite\n\nhttps://github.com/zhen8838/AnimeStylized ç¨ pytorch å®ç°äºä»¥ä¸å ç§ GANï¼ä½æ¯è®­ç»åºçææååçæå·®å¼\n\n\n# ç¸å³éè¯»\n\n * Making Anime Faces With StyleGAN\n * AnimeGANå°ç°å®ç§çå¨æ¼«åï¼è¶è¶æ¸åçCartoonGAN\n * AIçµé­ç»æââæä¸ææé³çæ¬¾âåèº«æ¼«ç»âåçææ¯äº\n\n\n# 2. çäººç¨ç¼ç\n\nGANimation: Anatomically-aware Facial Animation from a Single Image\n\nAn Out-of-the-Box Replicate of GANimation using PyTorch, pretrained weights are available! https://github.com/donydchen/ganimation_replicate\n\n\n# facial-action-units introduce\n\n\n# paper : FLNet: Landmark Driven Fetching and Learning Network for Faithful Talking Facial Animation Synthesis\n\n * Facial Action Units (AUs) Based Methods\n   * GANimation: Anatomically-aware Facial Animation from a Single Image\n * Landmark Driven Methods\n   * First Order Motion Model for Image Animation ï¼èªçç£ç¹å¾ç¹è¯å«ï¼\n\nFLNet èåäºä»¥ä¸ä¸¤ä¸ªæ¹æ³\n\n\n# 3. æ£å¾\n\näººè¸è¯å«ï¼https://github.com/cmusatyalab/openface https://github.com/Hsintao/pfld_106_face_landmarks https://github.com/polarisZhao/PFLD-pytorch\n\n\n# 4. Scaling\n\nNAME                ATTR                             NOTE                                                GITHUB\nvideo2x             x                                åªæ¯åºç¨æ¡æ¶ï¼éè¦ä¸è¿°ç®æ³é©±å¨                                     https://github.com/k4yt3x/video2x\nReal-SR             x                                winner of CVPR NTIRE 2020 Challenge on Real-World   https://github.com/Tencent/Real-SR\n                                                     Super-Resolution\nBSRGAN ï½ x ï½ 2021   https://github.com/cszn/BSRGAN                                                       \n\nUSRNet ï½ x ï½ CVPR 2020 ï½ https://github.com/cszn/USRNet waifu2x | x | x | https://github.com/nagadomi/waifu2x/ RCAN ï½ x ï½ ECCV 2018 ï½ https://github.com/xinntao/BasicSR ESRGAN | æ¯ RCAN æ´æåºç°ï¼è½ç¶ PSNR å¼æ¯ RCAN ç¨ä½ï¼ä½è§è§æææ´é« | ECCV 2018 | https://github.com/xinntao/ESRGAN Anime4K | x | non-machine-learning based | https://github.com/bloc97/Anime4K SRMD | x | CVPR 2018 | https://github.com/cszn/KAIR\n\nreferenceï¼https://blog.csdn.net/gwplovekimi/article/details/83041627\n\n\n# å»ç¥\n\n * hdrnet\n   * https://github.com/google/hdrnet\n     * https://groups.csail.mit.edu/graphics/hdrnet/\n   * https://github.com/creotiv/hdrnet-pytorch\n * Image-Adaptive-3DLUT\n   * https://github.com/HuiZeng/Image-Adaptive-3DLUT\n\n\n# 5. ä¼è´¨æ¨¡å\n\nNAME                               DESCRIPTION                                                  TYPE      CODE                                                            NOTE\nface-alignment                     2D and 3D Face alignment library                             pytorch   https://github.com/1adrianb/face-alignment                      x\nface_recognition                   simplest facial recognition api                              dlib      https://github.com/ageitgey/face_recognition                    x\nfirst-order-model                  the source code for the paper First Order Motion Model for   pytorch   https://github.com/AliaksandrSiarohin/first-order-model         x\n                                   Image Animation\nMMDetection                        æå¼ºçç®æ æ£æµ                                                      pytorch   https://github.com/open-mmlab/mmdetection                       x\nBringing-Old-Photos-Back-to-Life   Bringing Old Photo Back to Life (CVPR 2020 oral)             pytorch   https://github.com/microsoft/Bringing-Old-Photos-Back-to-Life   x\n\nå¤´åå¨æï¼https://github.com/alievk/avatarify-python å¨æ¼«è¯å«ï¼https://github.com/soruly/trace.moe ï¼ï¼æ°æ®æºï¼https://anilist.co/animeï¼\n\nModels https://github.com/tensorflow/models\n\nåå¾åç±»ï¼ https://github.com/wusaifei/garbage_classify\n\n\n# 6. Notes\n\n\n# 1. æé¡¹è®°å½\n\n 1. tensorflow çæ¬\n\n * tensorflow==1.12.0 -> python[version='>=3.6,â¤ï¸.7.0a0']\n\n 2. å¾çè¯»å\n\nLIB      TYPE         CHANNELS\nopencv   numpy ç±»å     é»è®¤ BGRï¼shape ä¸º HWC\nPIL      PILä¸­çå·ä½çç±»å   æ ¹æ®å¾åæ ¼å¼ï¼ä¸è¬ä¸º RGBï¼shape ä¸º HWC\n\npytorch ä¸­ä½¿ç¨ torchvision.datasets æ¨¡åè¯»åå¾åï¼è¾åºçæ°æ®ç±»åä¸º PILImageï¼å¹¶ä¸å¾åä¸­çæ¯ä¸ä¸ªæ°æ®å¤§å°èå´å·²ç»ä¸åæ¯[0,255]ï¼èæ¯[0,1].\n\n 3. å¸¸ç¨æ°æ®éï¼imagenet\n\n\n# 2. æ·±åº¦éè¯»\n\n * è®­ç»GANsä¸å¹´æå­¦å°ç10ä¸ªæè®­\n * çºµè§è½»éåå·ç§¯ç¥ç»ç½ç»ï¼SqueezeNetãMobileNetãShuffleNetãXception\n * æºå¨å­¦ä¹ ï¼åç§ä¼åå¨Optimizerçæ»ç»ä¸æ¯è¾\n\nçè§£ Normalizeï¼ https://blog.csdn.net/qq_35027690/article/details/103742697 Softmaxï¼https://zhuanlan.zhihu.com/p/67759205\n\nhttps://tools.fun/",normalizedContent:"# 1. å¨æ¼«é£æ ¼è½¬æ¢\n\ngan                 type         code                                                          online     note\ncartoongan          pytorch      https://github.com/znxlwm/pytorch-cartoongan                  x          \ncartoongan          tensorflow   https://github.com/mnicnc404/cartoongan-tensorflow            èªå¸¦é¢è®­ç»      é¢è®­ç»æ¨¡å:\n                                                                                                          http://cg.cs.tsinghua.edu.cn/people/~yongjin/cartoongan-models.rarï¼\n                                                                                                          ææè¾å·®ï¼å¾çç»èä¿çä¸è¶³ï¼\nanimegan            tensorflow   https://github.com/tachibanayoshino/animegan                  x          pytorch å®ç°ï¼https://github.com/xuhangkun/animegan_in_pytorch\nanimeganv2          tensorflow   https://github.com/tachibanayoshino/animeganv2                x ï½ æææªç¥   \nwhite-box cartoon   tensorflow   https://github.com/systemerrorwang/white-box-cartoonization   èªå¸¦é¢è®­ç»      æææå¥½ï¼åºç¨ï¼https://github.com/margaretmz/cartoonizer-with-tflite\n\nhttps://github.com/zhen8838/animestylized ç¨ pytorch å®ç°äºä»¥ä¸å ç§ ganï¼ä½æ¯è®­ç»åºçææååçæå·®å¼\n\n\n# ç¸å³éè¯»\n\n * making anime faces with stylegan\n * animeganå°ç°å®ç§çå¨æ¼«åï¼è¶è¶æ¸åçcartoongan\n * aiçµé­ç»æââæä¸ææé³çæ¬¾âåèº«æ¼«ç»âåçææ¯äº\n\n\n# 2. çäººç¨ç¼ç\n\nganimation: anatomically-aware facial animation from a single image\n\nan out-of-the-box replicate of ganimation using pytorch, pretrained weights are available! https://github.com/donydchen/ganimation_replicate\n\n\n# facial-action-units introduce\n\n\n# paper : flnet: landmark driven fetching and learning network for faithful talking facial animation synthesis\n\n * facial action units (aus) based methods\n   * ganimation: anatomically-aware facial animation from a single image\n * landmark driven methods\n   * first order motion model for image animation ï¼èªçç£ç¹å¾ç¹è¯å«ï¼\n\nflnet èåäºä»¥ä¸ä¸¤ä¸ªæ¹æ³\n\n\n# 3. æ£å¾\n\näººè¸è¯å«ï¼https://github.com/cmusatyalab/openface https://github.com/hsintao/pfld_106_face_landmarks https://github.com/polariszhao/pfld-pytorch\n\n\n# 4. scaling\n\nname                attr                             note                                                github\nvideo2x             x                                åªæ¯åºç¨æ¡æ¶ï¼éè¦ä¸è¿°ç®æ³é©±å¨                                     https://github.com/k4yt3x/video2x\nreal-sr             x                                winner of cvpr ntire 2020 challenge on real-world   https://github.com/tencent/real-sr\n                                                     super-resolution\nbsrgan ï½ x ï½ 2021   https://github.com/cszn/bsrgan                                                       \n\nusrnet ï½ x ï½ cvpr 2020 ï½ https://github.com/cszn/usrnet waifu2x | x | x | https://github.com/nagadomi/waifu2x/ rcan ï½ x ï½ eccv 2018 ï½ https://github.com/xinntao/basicsr esrgan | æ¯ rcan æ´æåºç°ï¼è½ç¶ psnr å¼æ¯ rcan ç¨ä½ï¼ä½è§è§æææ´é« | eccv 2018 | https://github.com/xinntao/esrgan anime4k | x | non-machine-learning based | https://github.com/bloc97/anime4k srmd | x | cvpr 2018 | https://github.com/cszn/kair\n\nreferenceï¼https://blog.csdn.net/gwplovekimi/article/details/83041627\n\n\n# å»ç¥\n\n * hdrnet\n   * https://github.com/google/hdrnet\n     * https://groups.csail.mit.edu/graphics/hdrnet/\n   * https://github.com/creotiv/hdrnet-pytorch\n * image-adaptive-3dlut\n   * https://github.com/huizeng/image-adaptive-3dlut\n\n\n# 5. ä¼è´¨æ¨¡å\n\nname                               description                                                  type      code                                                            note\nface-alignment                     2d and 3d face alignment library                             pytorch   https://github.com/1adrianb/face-alignment                      x\nface_recognition                   simplest facial recognition api                              dlib      https://github.com/ageitgey/face_recognition                    x\nfirst-order-model                  the source code for the paper first order motion model for   pytorch   https://github.com/aliaksandrsiarohin/first-order-model         x\n                                   image animation\nmmdetection                        æå¼ºçç®æ æ£æµ                                                      pytorch   https://github.com/open-mmlab/mmdetection                       x\nbringing-old-photos-back-to-life   bringing old photo back to life (cvpr 2020 oral)             pytorch   https://github.com/microsoft/bringing-old-photos-back-to-life   x\n\nå¤´åå¨æï¼https://github.com/alievk/avatarify-python å¨æ¼«è¯å«ï¼https://github.com/soruly/trace.moe ï¼ï¼æ°æ®æºï¼https://anilist.co/animeï¼\n\nmodels https://github.com/tensorflow/models\n\nåå¾åç±»ï¼ https://github.com/wusaifei/garbage_classify\n\n\n# 6. notes\n\n\n# 1. æé¡¹è®°å½\n\n 1. tensorflow çæ¬\n\n * tensorflow==1.12.0 -> python[version='>=3.6,â¤ï¸.7.0a0']\n\n 2. å¾çè¯»å\n\nlib      type         channels\nopencv   numpy ç±»å     é»è®¤ bgrï¼shape ä¸º hwc\npil      pilä¸­çå·ä½çç±»å   æ ¹æ®å¾åæ ¼å¼ï¼ä¸è¬ä¸º rgbï¼shape ä¸º hwc\n\npytorch ä¸­ä½¿ç¨ torchvision.datasets æ¨¡åè¯»åå¾åï¼è¾åºçæ°æ®ç±»åä¸º pilimageï¼å¹¶ä¸å¾åä¸­çæ¯ä¸ä¸ªæ°æ®å¤§å°èå´å·²ç»ä¸åæ¯[0,255]ï¼èæ¯[0,1].\n\n 3. å¸¸ç¨æ°æ®éï¼imagenet\n\n\n# 2. æ·±åº¦éè¯»\n\n * è®­ç»gansä¸å¹´æå­¦å°ç10ä¸ªæè®­\n * çºµè§è½»éåå·ç§¯ç¥ç»ç½ç»ï¼squeezenetãmobilenetãshufflenetãxception\n * æºå¨å­¦ä¹ ï¼åç§ä¼åå¨optimizerçæ»ç»ä¸æ¯è¾\n\nçè§£ normalizeï¼ https://blog.csdn.net/qq_35027690/article/details/103742697 softmaxï¼https://zhuanlan.zhihu.com/p/67759205\n\nhttps://tools.fun/",charsets:{cjk:!0}},{title:"æºå¨å­¦ä¹ è¯ä¼°ææ :åç±»",frontmatter:{title:"æºå¨å­¦ä¹ è¯ä¼°ææ :åç±»",date:"2021-02-22T09:50:00.000Z",description:"åç±»ä»»å¡çæ§è½åº¦é",categories:["imgproc"],tags:["AUCãROC"],permalink:null},regularPath:"/blog/skills/ai/auc_roc.html",relativePath:"blog/skills/ai/auc_roc.md",key:"v-7103a3ed",path:"/blog/skills/ai/auc_roc.html",headersStr:null,content:"https://zhuanlan.zhihu.com/p/46714763 https://zhuanlan.zhihu.com/p/84035782\n\nä»AUC å¤æ­åç±»å¨ï¼é¢æµæ¨¡åï¼ä¼å£çæ åï¼\n\n * AUC = 1ï¼æ¯å®ç¾åç±»å¨ã\n * AUC = [0.85, 0.95], ææå¾å¥½\n * AUC = [0.7, 0.85], ææä¸è¬\n * AUC = [0.5, 0.7],ææè¾ä½ï¼ä½ç¨äºé¢æµè¡ç¥¨å·²ç»å¾ä¸éäº\n * AUC = 0.5ï¼è·éæºçæµä¸æ ·ï¼ä¾ï¼ä¸¢éæ¿ï¼ï¼æ¨¡åæ²¡æé¢æµä»·å¼ã\n * AUC < 0.5ï¼æ¯éæºçæµè¿å·®ï¼ä½åªè¦æ»æ¯åé¢æµèè¡ï¼å°±ä¼äºéæºçæµã\n\nhttps://www.zhihu.com/question/39840928",normalizedContent:"https://zhuanlan.zhihu.com/p/46714763 https://zhuanlan.zhihu.com/p/84035782\n\nä»auc å¤æ­åç±»å¨ï¼é¢æµæ¨¡åï¼ä¼å£çæ åï¼\n\n * auc = 1ï¼æ¯å®ç¾åç±»å¨ã\n * auc = [0.85, 0.95], ææå¾å¥½\n * auc = [0.7, 0.85], ææä¸è¬\n * auc = [0.5, 0.7],ææè¾ä½ï¼ä½ç¨äºé¢æµè¡ç¥¨å·²ç»å¾ä¸éäº\n * auc = 0.5ï¼è·éæºçæµä¸æ ·ï¼ä¾ï¼ä¸¢éæ¿ï¼ï¼æ¨¡åæ²¡æé¢æµä»·å¼ã\n * auc < 0.5ï¼æ¯éæºçæµè¿å·®ï¼ä½åªè¦æ»æ¯åé¢æµèè¡ï¼å°±ä¼äºéæºçæµã\n\nhttps://www.zhihu.com/question/39840928",charsets:{cjk:!0}},{title:"å¤§æ°æ®æ¶æçè®º",frontmatter:{title:"å¤§æ°æ®æ¶æçè®º",date:"2020-04-13T00:00:00.000Z",description:"å¤§æ°æ®æ¶æçè®º",categories:["blog","skills","bigdata"],tags:[null],permalink:null},regularPath:"/blog/skills/ai/bigdata_arch_theory.html",relativePath:"blog/skills/ai/bigdata_arch_theory.md",key:"v-5240d527",path:"/blog/skills/ai/bigdata_arch_theory.html",headers:[{level:2,title:"LAMBDA æ¶æ",slug:"lambda-æ¶æ",normalizedTitle:"lambda æ¶æ",charIndex:14},{level:3,title:"æ°æ®çæ¬è´¨",slug:"æ°æ®çæ¬è´¨",normalizedTitle:"æ°æ®çæ¬è´¨",charIndex:795},{level:3,title:"æ»ç»",slug:"æ»ç»",normalizedTitle:"æ»ç»",charIndex:875}],headersStr:"LAMBDA æ¶æ æ°æ®çæ¬è´¨ æ»ç»",content:"# å¤§æ°æ®æ¶æçè®º\n\n\n# LAMBDA æ¶æ\n\nMarzè®¤ä¸ºå¤§æ°æ®ç³»ç»åºå·æä»¥ä¸çå³é®ç¹æ§ï¼\n\n * Robust and fault-tolerantï¼å®¹éæ§åé²æ£æ§ï¼\n   * å¯¹å¤§è§æ¨¡åå¸å¼ç³»ç»æ¥è¯´ï¼æºå¨æ¯ä¸å¯é çï¼å¯è½ä¼å½æºï¼ä½æ¯ç³»ç»éè¦æ¯å¥å£®ãè¡ä¸ºæ­£ç¡®çï¼å³ä½¿æ¯éå°æºå¨éè¯¯ãé¤äºæºå¨éè¯¯ï¼äººæ´å¯è½ä¼ç¯éè¯¯ãå¨è½¯ä»¶å¼åä¸­é¾åä¼æä¸äºBugï¼ç³»ç»å¿é¡»å¯¹æBugçç¨åºåå¥çéè¯¯æ°æ®æè¶³å¤çéåºè½åï¼æä»¥æ¯æºå¨å®¹éæ§æ´å éè¦çå®¹éæ§æ¯äººä¸ºæä½å®¹éæ§ãå¯¹äºå¤§è§æ¨¡çåå¸å¼ç³»ç»æ¥è¯´ï¼äººåæºå¨çéè¯¯æ¯å¤©é½å¯è½ä¼åçï¼å¦ä½åºå¯¹äººåæºå¨çéè¯¯ï¼è®©ç³»ç»è½å¤ä»éè¯¯ä¸­å¿«éæ¢å¤å°¤å¶éè¦ã\n * Low latency reads and updatesï¼ä½å»¶æ¶ï¼ï¼å¾å¤åºç¨å¯¹äºè¯»ååæä½çå»¶æ¶è¦æ±éå¸¸é«ï¼è¦æ±å¯¹æ´æ°åæ¥è¯¢çååºæ¯ä½å»¶æ¶çã\n * Scalableï¼æ¨ªåæ©å®¹ï¼ï¼å½æ°æ®é/è´è½½å¢å¤§æ¶ï¼å¯æ©å±æ§çç³»ç»éè¿å¢å æ´å¤çæºå¨èµæºæ¥ç»´ææ§è½ãä¹å°±æ¯å¸¸è¯´çç³»ç»éè¦çº¿æ§å¯æ©å±ï¼éå¸¸éç¨scale outï¼éè¿å¢å æºå¨çä¸ªæ°ï¼èä¸æ¯scale upï¼éè¿å¢å¼ºæºå¨çæ§è½ï¼ã\n * Generalï¼éç¨æ§ï¼ï¼ç³»ç»éè¦è½å¤éåºå¹¿æ³çåºç¨ï¼åæ¬éèé¢åãç¤¾äº¤ç½ç»ãçµå­åå¡æ°æ®åæç­ã\n * Extensibleï¼å¯æ©å±ï¼ï¼éè¦å¢å æ°åè½ãæ°ç¹æ§æ¶ï¼å¯æ©å±çç³»ç»è½ä»¥æå°çå¼åä»£ä»·æ¥å¢å æ°åè½ã\n * Allows ad hoc queriesï¼æ¹ä¾¿æ¥è¯¢ï¼ï¼æ°æ®ä¸­è´å«æä»·å¼ï¼éè¦è½å¤æ¹ä¾¿ãå¿«éçæ¥è¯¢åºæéè¦çæ°æ®ã\n * Minimal maintenanceï¼æäºç»´æ¤ï¼ï¼ç³»ç»è¦æ³åå°æäºç»´æ¤ï¼å¶å³é®æ¯æ§å¶å¶å¤ææ§ï¼è¶æ¯å¤æçç³»ç»è¶å®¹æåºéãè¶é¾ç»´æ¤ã\n * Debuggableï¼æè°è¯ï¼ï¼å½åºé®é¢æ¶ï¼ç³»ç»éè¦æè¶³å¤çä¿¡æ¯æ¥è°è¯éè¯¯ï¼æ¾å°é®é¢çæ ¹æºãå¶å³é®æ¯è½å¤è¿½æ ¹æº¯æºå°æ¯ä¸ªæ°æ®çæç¹ã\n\n\n# æ°æ®çæ¬è´¨\n\n 1. æ°æ®çç¹æ§ï¼When & What\n 2. æ°æ®çå­å¨ï¼Store Everything Rawly and Immutably\n\n\n# æ»ç»\n\nLambdaæ¶æéè¿å¯¹æ°æ®åæ¥è¯¢çæ¬è´¨è®¤è¯ï¼èåäºä¸å¯åæ§ï¼Immunabilityï¼ï¼è¯»ååç¦»åå¤ææ§éç¦»ç­ä¸ç³»åæ¶æååï¼å°å¤§æ°æ®å¤çç³»ç»ååä¸ºBatch Layer, Speed LayeråServing Layerä¸å±ï¼ä»èè®¾è®¡åºä¸ä¸ªè½æ»¡è¶³å®æ¶å¤§æ°æ®ç³»ç»å³é®ç¹æ§ï¼å¦é«å®¹éãä½å»¶æ¶åå¯æ©å±ç­ï¼çæ¶æãLambdaæ¶æä½ä¸ºä¸ä¸ªéç¨çå¤§æ°æ®å¤çæ¡æ¶ï¼å¯ä»¥å¾æ¹ä¾¿çéæHadoopï¼Kafkaï¼Stormï¼Sparkï¼Hbaseç­åç±»å¤§æ°æ®ç»ä»¶ã\n\nkappa",normalizedContent:"# å¤§æ°æ®æ¶æçè®º\n\n\n# lambda æ¶æ\n\nmarzè®¤ä¸ºå¤§æ°æ®ç³»ç»åºå·æä»¥ä¸çå³é®ç¹æ§ï¼\n\n * robust and fault-tolerantï¼å®¹éæ§åé²æ£æ§ï¼\n   * å¯¹å¤§è§æ¨¡åå¸å¼ç³»ç»æ¥è¯´ï¼æºå¨æ¯ä¸å¯é çï¼å¯è½ä¼å½æºï¼ä½æ¯ç³»ç»éè¦æ¯å¥å£®ãè¡ä¸ºæ­£ç¡®çï¼å³ä½¿æ¯éå°æºå¨éè¯¯ãé¤äºæºå¨éè¯¯ï¼äººæ´å¯è½ä¼ç¯éè¯¯ãå¨è½¯ä»¶å¼åä¸­é¾åä¼æä¸äºbugï¼ç³»ç»å¿é¡»å¯¹æbugçç¨åºåå¥çéè¯¯æ°æ®æè¶³å¤çéåºè½åï¼æä»¥æ¯æºå¨å®¹éæ§æ´å éè¦çå®¹éæ§æ¯äººä¸ºæä½å®¹éæ§ãå¯¹äºå¤§è§æ¨¡çåå¸å¼ç³»ç»æ¥è¯´ï¼äººåæºå¨çéè¯¯æ¯å¤©é½å¯è½ä¼åçï¼å¦ä½åºå¯¹äººåæºå¨çéè¯¯ï¼è®©ç³»ç»è½å¤ä»éè¯¯ä¸­å¿«éæ¢å¤å°¤å¶éè¦ã\n * low latency reads and updatesï¼ä½å»¶æ¶ï¼ï¼å¾å¤åºç¨å¯¹äºè¯»ååæä½çå»¶æ¶è¦æ±éå¸¸é«ï¼è¦æ±å¯¹æ´æ°åæ¥è¯¢çååºæ¯ä½å»¶æ¶çã\n * scalableï¼æ¨ªåæ©å®¹ï¼ï¼å½æ°æ®é/è´è½½å¢å¤§æ¶ï¼å¯æ©å±æ§çç³»ç»éè¿å¢å æ´å¤çæºå¨èµæºæ¥ç»´ææ§è½ãä¹å°±æ¯å¸¸è¯´çç³»ç»éè¦çº¿æ§å¯æ©å±ï¼éå¸¸éç¨scale outï¼éè¿å¢å æºå¨çä¸ªæ°ï¼èä¸æ¯scale upï¼éè¿å¢å¼ºæºå¨çæ§è½ï¼ã\n * generalï¼éç¨æ§ï¼ï¼ç³»ç»éè¦è½å¤éåºå¹¿æ³çåºç¨ï¼åæ¬éèé¢åãç¤¾äº¤ç½ç»ãçµå­åå¡æ°æ®åæç­ã\n * extensibleï¼å¯æ©å±ï¼ï¼éè¦å¢å æ°åè½ãæ°ç¹æ§æ¶ï¼å¯æ©å±çç³»ç»è½ä»¥æå°çå¼åä»£ä»·æ¥å¢å æ°åè½ã\n * allows ad hoc queriesï¼æ¹ä¾¿æ¥è¯¢ï¼ï¼æ°æ®ä¸­è´å«æä»·å¼ï¼éè¦è½å¤æ¹ä¾¿ãå¿«éçæ¥è¯¢åºæéè¦çæ°æ®ã\n * minimal maintenanceï¼æäºç»´æ¤ï¼ï¼ç³»ç»è¦æ³åå°æäºç»´æ¤ï¼å¶å³é®æ¯æ§å¶å¶å¤ææ§ï¼è¶æ¯å¤æçç³»ç»è¶å®¹æåºéãè¶é¾ç»´æ¤ã\n * debuggableï¼æè°è¯ï¼ï¼å½åºé®é¢æ¶ï¼ç³»ç»éè¦æè¶³å¤çä¿¡æ¯æ¥è°è¯éè¯¯ï¼æ¾å°é®é¢çæ ¹æºãå¶å³é®æ¯è½å¤è¿½æ ¹æº¯æºå°æ¯ä¸ªæ°æ®çæç¹ã\n\n\n# æ°æ®çæ¬è´¨\n\n 1. æ°æ®çç¹æ§ï¼when & what\n 2. æ°æ®çå­å¨ï¼store everything rawly and immutably\n\n\n# æ»ç»\n\nlambdaæ¶æéè¿å¯¹æ°æ®åæ¥è¯¢çæ¬è´¨è®¤è¯ï¼èåäºä¸å¯åæ§ï¼immunabilityï¼ï¼è¯»ååç¦»åå¤ææ§éç¦»ç­ä¸ç³»åæ¶æååï¼å°å¤§æ°æ®å¤çç³»ç»ååä¸ºbatch layer, speed layeråserving layerä¸å±ï¼ä»èè®¾è®¡åºä¸ä¸ªè½æ»¡è¶³å®æ¶å¤§æ°æ®ç³»ç»å³é®ç¹æ§ï¼å¦é«å®¹éãä½å»¶æ¶åå¯æ©å±ç­ï¼çæ¶æãlambdaæ¶æä½ä¸ºä¸ä¸ªéç¨çå¤§æ°æ®å¤çæ¡æ¶ï¼å¯ä»¥å¾æ¹ä¾¿çéæhadoopï¼kafkaï¼stormï¼sparkï¼hbaseç­åç±»å¤§æ°æ®ç»ä»¶ã\n\nkappa",charsets:{cjk:!0}},{title:"PCAåçæ¨å¯¼",frontmatter:{title:"PCAåçæ¨å¯¼",date:"2020-04-13T00:00:00.000Z",description:"PCAåçæ¨å¯¼",categories:["blog","skills","bigdata"],tags:[null],permalink:null},regularPath:"/blog/skills/ai/derivation_of_PCA.html",relativePath:"blog/skills/ai/derivation_of_PCA.md",key:"v-5e7e6c7d",path:"/blog/skills/ai/derivation_of_PCA.html",headers:[{level:2,title:"çè®ºåºç¡",slug:"çè®ºåºç¡",normalizedTitle:"çè®ºåºç¡",charIndex:14},{level:2,title:"æ ·æ¬é¢å¤ç",slug:"æ ·æ¬é¢å¤ç",normalizedTitle:"æ ·æ¬é¢å¤ç",charIndex:802},{level:2,title:"ç¸å³å¬å¼æ¨å¯¼ï¼",slug:"ç¸å³å¬å¼æ¨å¯¼",normalizedTitle:"ç¸å³å¬å¼æ¨å¯¼ï¼",charIndex:868},{level:2,title:"éç»´ç®æ ",slug:"éç»´ç®æ ",normalizedTitle:"éç»´ç®æ ",charIndex:1353},{level:2,title:"æ¨å¯¼è¿ç¨",slug:"æ¨å¯¼è¿ç¨",normalizedTitle:"æ¨å¯¼è¿ç¨",charIndex:1487}],headersStr:"çè®ºåºç¡ æ ·æ¬é¢å¤ç ç¸å³å¬å¼æ¨å¯¼ï¼ éç»´ç®æ  æ¨å¯¼è¿ç¨",content:"# PCAåçæ¨å¯¼\n\n\n# çè®ºåºç¡\n\n> 1ãç©éµç¸ä¹çç©çè§£é\n\nä¸¤ä¸ªç©éµç¸ä¹çæä¹æ¯å°å³è¾¹ç©éµä¸­çæ¯ä¸åååéåæ¢å°å·¦è¾¹ç©éµä¸­æ¯ä¸è¡è¡åéä¸ºåºæè¡¨ç¤ºçç©ºé´ä¸­å»ã\n\n> 2ãåæ¹å·®çæä¹\n\nNç»´åéä¸­çä¸¤ä¸ªçº¬åº¦ aãb çåæ¹å·®è¡¨ç¤ºä¸¤ä¸ªçº¬åº¦ä¸çç¸å³æ§ãç¸å³æ§è¶å¤§ï¼åæ¹å·®è¶å¤§; åæ¹å·®ä¸º0è¡¨ç¤ºä¸¤ä¸ªçº¬åº¦å®å¨ç¬ç«ã\n\n> 3ãä¸è¬ç, åéAçè¡¨ç¤ºæ¹æ³\n\nA={a1a2â¯an}A=\\left\\{\\begin{matrix} a_1 \\\\ a_2 \\\\ \\cdots \\\\ a_n \\end{matrix} \\right\\} A=â©â¨â§ a1 a2 â¯an â­â¬â«\n\nAT={a1a2â¯an}A^T=\\left\\{\\begin{matrix} a_1 & a_2& \\cdots & a_n \\end{matrix} \\right\\} AT={a1 a2 â¯ an }\n\n> 4ãå®å¯¹ç§°ç©éµçæ§è´¨(å®å¯¹ç§°ç©éµå¯¹è§å)\n\nä¸ä¸ªnè¡nåçå®å¯¹ç§°ç©éµä¸å®å¯ä»¥æ¾å°nä¸ªåä½æ­£äº¤ç¹å¾åéï¼è®¾è¿nä¸ªç¹å¾åéä¸ºï¼\n\ne1,e2,â¯â,ene_1,e_2,\\cdots,e_n e1 ,e2 ,â¯,en\n\nå°å¶æåç»æç©éµï¼\n\nE={e1e2â¯en}E=\\left\\{ \\begin{matrix} e_1&e_2&\\cdots&e_n \\end{matrix} \\right\\} E={e1 e2 â¯ en }\n\nåå¯¹å¶åæ¹å·®ç©éµCæå¦ä¸ç»è®ºï¼\n\nETCE=Î={Î»1Î»1â¯Î»n}E^TCE=\\Lambda=\\left\\{ \\begin{matrix} \\lambda_1 &&& \\\\ & \\lambda_1&& \\\\ &&\\cdots& \\\\ &&&\\lambda_n \\end{matrix} \\right\\} ETCE=Î=â©â¨â§ Î»1 Î»1 â¯ Î»n â­â¬â«\n\nå¶å¯¹è§åç´ ä¸ºä¸ªç¹å¾åéå¯¹åºçç¹å¾å¼ã\n\n\n# æ ·æ¬é¢å¤ç\n\n> æ ·æ¬å½ä¸å\n\n * æ¯ä¸ªç»´åº¦é½åå»ç»´åº¦ä¸æææ ·æ¬çå¹³åå¼\n * éç»´åï¼æ ·æ¬çæ¹å·®è¶å¤§ä¿ççåå§ä¿¡æ¯è¶å¤\n\n\n# ç¸å³å¬å¼æ¨å¯¼ï¼\n\nA. ç±ç©éµçæ¹å·®å¬å¼ï¼\n\nVar(a)=1mâi=1m(aiâÎ¼)2Var(a)=\\frac{1}{m}\\sum_{i=1}^{m}(a_i-\\mu)^2 Var(a)=m1 i=1âm (ai âÎ¼)2\n\nå¯¹äºå½ä¸ååçXç©éµï¼å¾å°çYçæ¯è¡(æ¯ä¸ªç»´åº¦)çåå¼ä¾æ§ä¸º0æä»¥æï¼\n\nVar(a)=1mâi=1m(ai)2Var(a)=\\frac{1}{m}\\sum_{i=1}^{m}(a_i)^2 Var(a)=m1 i=1âm (ai )2\n\nB. ç±ç©éµçåæ¹å·®å¬å¼ï¼\n\nVar(a)=1mâi=1m(aiâÎ¼)(biâÎ¼)Var(a)=\\frac{1}{m}\\sum_{i=1}^{m}(a_i-\\mu)(b_i-\\mu) Var(a)=m1 i=1âm (ai âÎ¼)(bi âÎ¼)\n\nå¯¹äºå½ä¸ååçXç©éµï¼å¾å°çYçæ¯è¡(æ¯ä¸ªç»´åº¦)çåå¼ä¾æ§ä¸º0æä»¥æï¼\n\nVar(a)=1mâi=1m(aibi)Var(a)=\\frac{1}{m}\\sum_{i=1}^{m}(a_ib_i) Var(a)=m1 i=1âm (ai bi )\n\n\n# éç»´ç®æ \n\nå°ä¸ç»Nç»´åééä¸ºKç»´(0<K<N), å¶ç®æ æ¯éæ©Kä¸ªåä½æ­£äº¤åº, ä½¿å¾åå§æ°æ®åæ¢å°è¿ç»åºä¸å, åå­æ®µä¸¤ä¸¤é´åæ¹å·®ä¸º0, èå­æ®µåçæ¹å·®åå°½å¯è½å¤§(å¨æ­£äº¤ççº¦æä¸ï¼åæå¤§çKä¸ªæ¹å·®)\n\n> PCA å½ä¸ååçç¹æ§ä¹ä¸ : æ¯ä¸ªç»´åº¦çåå¼ä¸º0\n\n\n# æ¨å¯¼è¿ç¨\n\n> æ¦è¿°: å°ä¸ç»nç»´åéékç»´(0<k<n), å¶ç®æ æ¯éæ©kä¸ªåä½æ­£äº¤åº, ä½¿å¾åå§æ°æ®åæ¢å°è¿ç»åºä¸å, åå­æ®µä¸¤ä¸¤é´åæ¹å·®ä¸º0, èå­æ®µåçæ¹å·®åå°½å¯è½å¤§(å¨æ­£äº¤ççº¦æä¸ï¼åæå¤§çkä¸ªæ¹å·®)\n\næmä¸ªnç»´çæ ·æ¬éXï¼å¦ä¸ï¼\n\nX={A1A2â¯Am}X=\\left\\{ \\begin{matrix} A_1 & A_2 \\cdots A_m \\end{matrix} \\right\\} X={A1 A2 â¯Am }\n\nækä¸ªnç»´åä½åéè¡¨ç¤ºçåéç©ºé´Pï¼å¦ä¸ï¼\n\nP={P1TP2Tâ¯PkT}P=\\left\\{\\begin{matrix} P_1^T \\\\ P_2^T \\\\ \\cdots \\\\ P_k^T \\end{matrix} \\right\\} P=â©â¨â§ P1T P2T â¯PkT â­â¬â«\n\nè¦å°Xéç»´ï¼å³å¨å½ 0<k<n æ¶ï¼å­å¨Pï¼ä½¿å¾ï¼\n\nY=PXY=PX Y=PX\n\nå³ï¼\n\nY={Y1Y2â¯Ym}Y=\\left\\{ \\begin{matrix} Y_1 & Y_2 \\cdots Y_m \\end{matrix} \\right\\} Y={Y1 Y2 â¯Ym }\n\nå¶ä¸­æ¯ä¸é¡¹é½æ¯kç»´çåéã\n\næ­¤æ¶ï¼æä»¬å¯ç¥ï¼\n    åä½åéç©ºé´ç©éµ P ä¸º ï¼k x n\n    åå§æ ·æ¬æ°æ®ç©éµ X ä¸º ï¼n x m\n    è½¬æ¢åçæ°æ®ç©éµ Y ä¸º ï¼k x m\n\n\n1\n2\n3\n4\n\n\nç±çè®ºåºç¡å¯ç¥ï¼\n\n 1. ä¸ºäºä½¿Yå°½å¯è½å¤çä¿çXä¸­çä¿¡æ¯ï¼å°±è¦ä½¿éç»´åçæ ·æ¬ç¦»æ£ç¨åº¦æå¤§ï¼å³è¦ä½¿å¾Yçæ¹å·®æå¤§\n 2. éè¿æ¹å·®æå¤§åï¼å¯ä»¥éæ©åºç¬¬ä¸ä¸ªç»´åº¦ï¼åç»­çç»´åº¦éæ©ä¾ç¶è¦ä¿çå°½å¯è½å¤çåå§ä¿¡æ¯ï¼æä»¥ä¸å¸æä¸¤ä¸ªçº¬åº¦é´å­å¨ç¸å³æ§ï¼å³æ¯ä¸ªç»´åº¦çåæ¹å·®åå¼ä¸º0ã\n\nå³ï¼æç»è¦è¾¾å°çç®çä¸å­æ®µåæ¹å·®ä»¥åå­æ®µé´åæ¹å·®æå¯åå³ç³»ï¼å æ­¤æä»¬å¸æè½å°ä¸¤èç»ä¸è¡¨ç¤ºãä»ç»è§å¯åç°ï¼ä¸¤èåå¯ä»¥è¡¨ç¤ºä¸ºåç§¯å½¢å¼ï¼èåç§¯ä¸ç©éµç¸ä¹å¯åç¸å³ã\n\nåçä¸è¿°å¬å¼å¾å°çç©éµCï¼\n\nC=1mXXTC=\\frac{1}{m}XX^T C=m1 XXT\n\nå¦æXæ¯å½ä¸ååçç©éµï¼ç©éµCæä»¥ä¸æ§è´¨(æåä¸¤ä¸ªç»è®ºéè¦ç»åâç¸å³å¬å¼æ¨å¯¼AåBâ)ï¼\n\n * æ¯ç©éµXçåæ¹å·®ç©éµ\n * æ¯å¯¹ç§°ç©éµ\n * å¯¹è§çº¿åå«ä¸ºåä¸ªç»´åº¦çæ¹å·®\n * ç¬¬iè¡jååjè¡iåçåç´ ç¸åï¼è¡¨ç¤ºiåjä¸¤ä¸ªå­æ®µçåæ¹å·®\n\nç±æ­¤å¯ç¥ï¼ä¸ºäºè¾¾å°ä¸è¿°çéç»´ç®çï¼å³éè¦ç©éµYçåæ¹å·®ç©éµå¯¹è§åï¼é¤å¯¹è§çº¿å¤çå¶å®åç´ åä¸º0ï¼å¹¶ä¸å°å¨å¯¹è§çº¿ä¸çåç´ æå¤§å°ä»ä¸å°ä¸æåã\n\næ¥ä¸æ¥ï¼æä»¬çä¸åç©éµä¸åºåæ¢åç©éµçåæ¹å·®ç©éµçå³ç³»:è®¾åå§æ°æ®ç©éµXå¯¹åºçåæ¹å·®ç©éµä¸ºCï¼èPæ¯ä¸ç»åºæè¡ç»æçç©éµï¼è®¾ Y=PXï¼åYä¸ºXå¯¹Eååºåæ¢åçæ°æ®ãè®¾Yçåæ¹å·®ç©éµä¸ºDï¼åæä»¥ä¸æ¨å¯¼ï¼\n\nD=1mYYT=1m(PX)(PX)T=1mPXXTPT=P(1mXXT)PT=PCPTD=\\frac{1}{m}YY^T =\\frac{1}{m}(PX)(PX)^T =\\frac{1}{m}PXX^TP^T =P(\\frac{1}{m}XX^T)P^T =PCP^T D=m1 YYT=m1 (PX)(PX)T=m1 PXXTPT=P(m1 XXT)PT=PCPT\n\næä»¥ï¼å¯ä»¥åç°æä»¬è¦æ¾çå°±æ¯è½è®©åå§åæ¹å·®ç©éµå¯¹è§åçPã\n\næ ¹æ®çè®ºåºç¡4(å®å¯¹ç§°ç©éµçæ§è´¨)ï¼\n\nETCE=ÎE^TCE=\\Lambda ETCE=Î\n\næ¾å°æä»¬éè¦çç©éµPï¼\n\nP=ETP=E^T P=ET\n\nPæ¯åæ¹å·®ç©éµçç¹å¾åéåä½ååæè¡æååºçç©éµï¼å¶ä¸­æ¯ä¸è¡é½æ¯Cçä¸ä¸ªç¹å¾åéãå¦æå°Pæç§\n\nÎ\\Lambda Î\n\nä¸­ç¹å¾å¼çä»å¤§å°å°ï¼å°ç¹å¾åéä»ä¸å°ä¸æåï¼åç¨Pçåkè¡ç»æçk*nç»´ç©éµä¹ä»¥åå§æ°æ®ç©éµXï¼å°±å¾å°æä»¬éè¦çéç»´åçæ°æ®ç©éµYã\n\n> åè http://www.360doc.com/content/13/1124/02/9482_331688889.shtml",normalizedContent:"# pcaåçæ¨å¯¼\n\n\n# çè®ºåºç¡\n\n> 1ãç©éµç¸ä¹çç©çè§£é\n\nä¸¤ä¸ªç©éµç¸ä¹çæä¹æ¯å°å³è¾¹ç©éµä¸­çæ¯ä¸åååéåæ¢å°å·¦è¾¹ç©éµä¸­æ¯ä¸è¡è¡åéä¸ºåºæè¡¨ç¤ºçç©ºé´ä¸­å»ã\n\n> 2ãåæ¹å·®çæä¹\n\nnç»´åéä¸­çä¸¤ä¸ªçº¬åº¦ aãb çåæ¹å·®è¡¨ç¤ºä¸¤ä¸ªçº¬åº¦ä¸çç¸å³æ§ãç¸å³æ§è¶å¤§ï¼åæ¹å·®è¶å¤§; åæ¹å·®ä¸º0è¡¨ç¤ºä¸¤ä¸ªçº¬åº¦å®å¨ç¬ç«ã\n\n> 3ãä¸è¬ç, åéaçè¡¨ç¤ºæ¹æ³\n\na={a1a2â¯an}a=\\left\\{\\begin{matrix} a_1 \\\\ a_2 \\\\ \\cdots \\\\ a_n \\end{matrix} \\right\\} a=â©â¨â§ a1 a2 â¯an â­â¬â«\n\nat={a1a2â¯an}a^t=\\left\\{\\begin{matrix} a_1 & a_2& \\cdots & a_n \\end{matrix} \\right\\} at={a1 a2 â¯ an }\n\n> 4ãå®å¯¹ç§°ç©éµçæ§è´¨(å®å¯¹ç§°ç©éµå¯¹è§å)\n\nä¸ä¸ªnè¡nåçå®å¯¹ç§°ç©éµä¸å®å¯ä»¥æ¾å°nä¸ªåä½æ­£äº¤ç¹å¾åéï¼è®¾è¿nä¸ªç¹å¾åéä¸ºï¼\n\ne1,e2,â¯â,ene_1,e_2,\\cdots,e_n e1 ,e2 ,â¯,en\n\nå°å¶æåç»æç©éµï¼\n\ne={e1e2â¯en}e=\\left\\{ \\begin{matrix} e_1&e_2&\\cdots&e_n \\end{matrix} \\right\\} e={e1 e2 â¯ en }\n\nåå¯¹å¶åæ¹å·®ç©éµcæå¦ä¸ç»è®ºï¼\n\netce=Î»={Î»1Î»1â¯Î»n}e^tce=\\lambda=\\left\\{ \\begin{matrix} \\lambda_1 &&& \\\\ & \\lambda_1&& \\\\ &&\\cdots& \\\\ &&&\\lambda_n \\end{matrix} \\right\\} etce=Î»=â©â¨â§ Î»1 Î»1 â¯ Î»n â­â¬â«\n\nå¶å¯¹è§åç´ ä¸ºä¸ªç¹å¾åéå¯¹åºçç¹å¾å¼ã\n\n\n# æ ·æ¬é¢å¤ç\n\n> æ ·æ¬å½ä¸å\n\n * æ¯ä¸ªç»´åº¦é½åå»ç»´åº¦ä¸æææ ·æ¬çå¹³åå¼\n * éç»´åï¼æ ·æ¬çæ¹å·®è¶å¤§ä¿ççåå§ä¿¡æ¯è¶å¤\n\n\n# ç¸å³å¬å¼æ¨å¯¼ï¼\n\na. ç±ç©éµçæ¹å·®å¬å¼ï¼\n\nvar(a)=1mâi=1m(aiâÎ¼)2var(a)=\\frac{1}{m}\\sum_{i=1}^{m}(a_i-\\mu)^2 var(a)=m1 i=1âm (ai âÎ¼)2\n\nå¯¹äºå½ä¸ååçxç©éµï¼å¾å°çyçæ¯è¡(æ¯ä¸ªç»´åº¦)çåå¼ä¾æ§ä¸º0æä»¥æï¼\n\nvar(a)=1mâi=1m(ai)2var(a)=\\frac{1}{m}\\sum_{i=1}^{m}(a_i)^2 var(a)=m1 i=1âm (ai )2\n\nb. ç±ç©éµçåæ¹å·®å¬å¼ï¼\n\nvar(a)=1mâi=1m(aiâÎ¼)(biâÎ¼)var(a)=\\frac{1}{m}\\sum_{i=1}^{m}(a_i-\\mu)(b_i-\\mu) var(a)=m1 i=1âm (ai âÎ¼)(bi âÎ¼)\n\nå¯¹äºå½ä¸ååçxç©éµï¼å¾å°çyçæ¯è¡(æ¯ä¸ªç»´åº¦)çåå¼ä¾æ§ä¸º0æä»¥æï¼\n\nvar(a)=1mâi=1m(aibi)var(a)=\\frac{1}{m}\\sum_{i=1}^{m}(a_ib_i) var(a)=m1 i=1âm (ai bi )\n\n\n# éç»´ç®æ \n\nå°ä¸ç»nç»´åééä¸ºkç»´(0<k<n), å¶ç®æ æ¯éæ©kä¸ªåä½æ­£äº¤åº, ä½¿å¾åå§æ°æ®åæ¢å°è¿ç»åºä¸å, åå­æ®µä¸¤ä¸¤é´åæ¹å·®ä¸º0, èå­æ®µåçæ¹å·®åå°½å¯è½å¤§(å¨æ­£äº¤ççº¦æä¸ï¼åæå¤§çkä¸ªæ¹å·®)\n\n> pca å½ä¸ååçç¹æ§ä¹ä¸ : æ¯ä¸ªç»´åº¦çåå¼ä¸º0\n\n\n# æ¨å¯¼è¿ç¨\n\n> æ¦è¿°: å°ä¸ç»nç»´åéékç»´(0<k<n), å¶ç®æ æ¯éæ©kä¸ªåä½æ­£äº¤åº, ä½¿å¾åå§æ°æ®åæ¢å°è¿ç»åºä¸å, åå­æ®µä¸¤ä¸¤é´åæ¹å·®ä¸º0, èå­æ®µåçæ¹å·®åå°½å¯è½å¤§(å¨æ­£äº¤ççº¦æä¸ï¼åæå¤§çkä¸ªæ¹å·®)\n\næmä¸ªnç»´çæ ·æ¬éxï¼å¦ä¸ï¼\n\nx={a1a2â¯am}x=\\left\\{ \\begin{matrix} a_1 & a_2 \\cdots a_m \\end{matrix} \\right\\} x={a1 a2 â¯am }\n\nækä¸ªnç»´åä½åéè¡¨ç¤ºçåéç©ºé´pï¼å¦ä¸ï¼\n\np={p1tp2tâ¯pkt}p=\\left\\{\\begin{matrix} p_1^t \\\\ p_2^t \\\\ \\cdots \\\\ p_k^t \\end{matrix} \\right\\} p=â©â¨â§ p1t p2t â¯pkt â­â¬â«\n\nè¦å°xéç»´ï¼å³å¨å½ 0<k<n æ¶ï¼å­å¨pï¼ä½¿å¾ï¼\n\ny=pxy=px y=px\n\nå³ï¼\n\ny={y1y2â¯ym}y=\\left\\{ \\begin{matrix} y_1 & y_2 \\cdots y_m \\end{matrix} \\right\\} y={y1 y2 â¯ym }\n\nå¶ä¸­æ¯ä¸é¡¹é½æ¯kç»´çåéã\n\næ­¤æ¶ï¼æä»¬å¯ç¥ï¼\n    åä½åéç©ºé´ç©éµ p ä¸º ï¼k x n\n    åå§æ ·æ¬æ°æ®ç©éµ x ä¸º ï¼n x m\n    è½¬æ¢åçæ°æ®ç©éµ y ä¸º ï¼k x m\n\n\n1\n2\n3\n4\n\n\nç±çè®ºåºç¡å¯ç¥ï¼\n\n 1. ä¸ºäºä½¿yå°½å¯è½å¤çä¿çxä¸­çä¿¡æ¯ï¼å°±è¦ä½¿éç»´åçæ ·æ¬ç¦»æ£ç¨åº¦æå¤§ï¼å³è¦ä½¿å¾yçæ¹å·®æå¤§\n 2. éè¿æ¹å·®æå¤§åï¼å¯ä»¥éæ©åºç¬¬ä¸ä¸ªç»´åº¦ï¼åç»­çç»´åº¦éæ©ä¾ç¶è¦ä¿çå°½å¯è½å¤çåå§ä¿¡æ¯ï¼æä»¥ä¸å¸æä¸¤ä¸ªçº¬åº¦é´å­å¨ç¸å³æ§ï¼å³æ¯ä¸ªç»´åº¦çåæ¹å·®åå¼ä¸º0ã\n\nå³ï¼æç»è¦è¾¾å°çç®çä¸å­æ®µåæ¹å·®ä»¥åå­æ®µé´åæ¹å·®æå¯åå³ç³»ï¼å æ­¤æä»¬å¸æè½å°ä¸¤èç»ä¸è¡¨ç¤ºãä»ç»è§å¯åç°ï¼ä¸¤èåå¯ä»¥è¡¨ç¤ºä¸ºåç§¯å½¢å¼ï¼èåç§¯ä¸ç©éµç¸ä¹å¯åç¸å³ã\n\nåçä¸è¿°å¬å¼å¾å°çç©éµcï¼\n\nc=1mxxtc=\\frac{1}{m}xx^t c=m1 xxt\n\nå¦æxæ¯å½ä¸ååçç©éµï¼ç©éµcæä»¥ä¸æ§è´¨(æåä¸¤ä¸ªç»è®ºéè¦ç»åâç¸å³å¬å¼æ¨å¯¼aåbâ)ï¼\n\n * æ¯ç©éµxçåæ¹å·®ç©éµ\n * æ¯å¯¹ç§°ç©éµ\n * å¯¹è§çº¿åå«ä¸ºåä¸ªç»´åº¦çæ¹å·®\n * ç¬¬iè¡jååjè¡iåçåç´ ç¸åï¼è¡¨ç¤ºiåjä¸¤ä¸ªå­æ®µçåæ¹å·®\n\nç±æ­¤å¯ç¥ï¼ä¸ºäºè¾¾å°ä¸è¿°çéç»´ç®çï¼å³éè¦ç©éµyçåæ¹å·®ç©éµå¯¹è§åï¼é¤å¯¹è§çº¿å¤çå¶å®åç´ åä¸º0ï¼å¹¶ä¸å°å¨å¯¹è§çº¿ä¸çåç´ æå¤§å°ä»ä¸å°ä¸æåã\n\næ¥ä¸æ¥ï¼æä»¬çä¸åç©éµä¸åºåæ¢åç©éµçåæ¹å·®ç©éµçå³ç³»:è®¾åå§æ°æ®ç©éµxå¯¹åºçåæ¹å·®ç©éµä¸ºcï¼èpæ¯ä¸ç»åºæè¡ç»æçç©éµï¼è®¾ y=pxï¼åyä¸ºxå¯¹eååºåæ¢åçæ°æ®ãè®¾yçåæ¹å·®ç©éµä¸ºdï¼åæä»¥ä¸æ¨å¯¼ï¼\n\nd=1myyt=1m(px)(px)t=1mpxxtpt=p(1mxxt)pt=pcptd=\\frac{1}{m}yy^t =\\frac{1}{m}(px)(px)^t =\\frac{1}{m}pxx^tp^t =p(\\frac{1}{m}xx^t)p^t =pcp^t d=m1 yyt=m1 (px)(px)t=m1 pxxtpt=p(m1 xxt)pt=pcpt\n\næä»¥ï¼å¯ä»¥åç°æä»¬è¦æ¾çå°±æ¯è½è®©åå§åæ¹å·®ç©éµå¯¹è§åçpã\n\næ ¹æ®çè®ºåºç¡4(å®å¯¹ç§°ç©éµçæ§è´¨)ï¼\n\netce=Î»e^tce=\\lambda etce=Î»\n\næ¾å°æä»¬éè¦çç©éµpï¼\n\np=etp=e^t p=et\n\npæ¯åæ¹å·®ç©éµçç¹å¾åéåä½ååæè¡æååºçç©éµï¼å¶ä¸­æ¯ä¸è¡é½æ¯cçä¸ä¸ªç¹å¾åéãå¦æå°pæç§\n\nÎ»\\lambda Î»\n\nä¸­ç¹å¾å¼çä»å¤§å°å°ï¼å°ç¹å¾åéä»ä¸å°ä¸æåï¼åç¨pçåkè¡ç»æçk*nç»´ç©éµä¹ä»¥åå§æ°æ®ç©éµxï¼å°±å¾å°æä»¬éè¦çéç»´åçæ°æ®ç©éµyã\n\n> åè http://www.360doc.com/content/13/1124/02/9482_331688889.shtml",charsets:{cjk:!0}},{title:"NN è®ºæéè¯»",frontmatter:{title:"NN è®ºæéè¯»",date:"2021-03-10T09:50:00.000Z",description:"ç¥ç»ç½ç»è®ºæéè¯»ãç¿»è¯",categories:["imgproc","pixel2pixel"],tags:[null],permalink:null},regularPath:"/blog/skills/ai/image_papers.html",relativePath:"blog/skills/ai/image_papers.md",key:"v-633581c2",path:"/blog/skills/ai/image_papers.html",headers:[{level:2,title:"Abstract",slug:"abstract",normalizedTitle:"abstract",charIndex:82},{level:2,title:"1. Introduction",slug:"_1-introduction",normalizedTitle:"1. introduction",charIndex:442},{level:2,title:"2. Related Work",slug:"_2-related-work",normalizedTitle:"2. related work",charIndex:890},{level:2,title:"3. Method",slug:"_3-method",normalizedTitle:"3. method",charIndex:1300},{level:3,title:"3.1 Objective",slug:"_3-1-objective",normalizedTitle:"3.1 objective",charIndex:1541},{level:3,title:"3.2 Network architectures",slug:"_3-2-network-architectures",normalizedTitle:"3.2 network architectures",charIndex:1811},{level:3,title:"3.3 Optimization and inference",slug:"_3-3-optimization-and-inference",normalizedTitle:"3.3 optimization and inference",charIndex:2751},{level:2,title:"4. Experiments",slug:"_4-experiments",normalizedTitle:"4. experiments",charIndex:3267},{level:3,title:"4.2 Analysis of the objective function",slug:"_4-2-analysis-of-the-objective-function",normalizedTitle:"4.2 analysis of the objective function",charIndex:3687},{level:3,title:"4.3 Analysis of the generator architecture",slug:"_4-3-analysis-of-the-generator-architecture",normalizedTitle:"4.3 analysis of the generator architecture",charIndex:4645},{level:3,title:"4.4 From PixelGANs to PatchGANs to ImageGANs",slug:"_4-4-from-pixelgans-to-patchgans-to-imagegans",normalizedTitle:"4.4 from pixelgans to patchgans to imagegans",charIndex:4937},{level:3,title:"4.5 Perceptual validation",slug:"_4-5-perceptual-validation",normalizedTitle:"4.5 perceptual validation",charIndex:5575},{level:3,title:"4.6 Semantic segmentation",slug:"_4-6-semantic-segmentation",normalizedTitle:"4.6 semantic segmentation",charIndex:5761},{level:3,title:"4.7. Community-driven Research",slug:"_4-7-community-driven-research",normalizedTitle:"4.7. community-driven research",charIndex:6236},{level:2,title:"5. Conclusion",slug:"_5-conclusion",normalizedTitle:"5. conclusion",charIndex:6440},{level:2,title:"Abstract",slug:"abstract-2",normalizedTitle:"abstract",charIndex:82},{level:2,title:"Deconvolution & Overlap",slug:"deconvolution-overlap",normalizedTitle:"deconvolution &amp; overlap",charIndex:null},{level:2,title:"Overlap & Learning",slug:"overlap-learning",normalizedTitle:"overlap &amp; learning",charIndex:null},{level:2,title:"Better Upsampling",slug:"better-upsampling",normalizedTitle:"better upsampling",charIndex:8271},{level:2,title:"Image Generation Results",slug:"image-generation-results",normalizedTitle:"image generation results",charIndex:8865},{level:2,title:"Artifacts in Gradients",slug:"artifacts-in-gradients",normalizedTitle:"artifacts in gradients",charIndex:9397},{level:2,title:"Conclusion",slug:"conclusion",normalizedTitle:"conclusion",charIndex:6443}],headersStr:"Abstract 1. Introduction 2. Related Work 3. Method 3.1 Objective 3.2 Network architectures 3.3 Optimization and inference 4. Experiments 4.2 Analysis of the objective function 4.3 Analysis of the generator architecture 4.4 From PixelGANs to PatchGANs to ImageGANs 4.5 Perceptual validation 4.6 Semantic segmentation 4.7. Community-driven Research 5. Conclusion Abstract Deconvolution & Overlap Overlap & Learning Better Upsampling Image Generation Results Artifacts in Gradients Conclusion",content:'# è®ºæéè¯»æè¦\n\n\n# Image-to-Image Translation with Conditional Adversarial Networks\n\n\n# Abstract\n\néå¯¹ è½¬åè¾å¥å¾åå°ä¸ç§å³èçè¾åº(image-to-image, map pixels to pixels)ç±»åçä»»å¡ï¼æåºäºä¸ç§éç¨ç architecture å objectiveï¼åªæ¯ä½¿ç¨ä¸åçæ°æ®å³å¯æ»¡è¶³åç§ä»»å¡\n\nä¸è¬æ¥è¯´ï¼Conditional adversarial nets å¨è¿ç±»ä»»å¡ä¸­æä¸ä¿çè¡¨ç°ãè¿äºç½ç»ä¸ä»å­¦ä¹ å°äº è¾å¥å°è¾åº çæ å°ï¼è¿å­¦ä¹ å°äºä¸ä¸ªç¨äºè®­ç»è¿ä¸ªæ å°ç loss functionãå¦å¤ï¼æä»¬è¯æäºï¼è¿ç§æ¹æ³å¨ä»¥ä¸ä»»å¡ä¸­é½æ¯åæææçï¼ä» (semantic) label maps åæç§çãä»å¾åè½®å»éæå®æ´å¾å½¢ãå¾åçè²ï¼ä»¥åå¶ä»çç±»ä¼¼ä»»å¡ãèä¸ï¼ä¸ç¨è¿è¡ parametersãloss function çè°æ´å°±å¯ä»¥è¾¾å°æ¯è¾åççç»æã\n\n\n# 1. Introduction\n\nä½¿ç¨ CNNs ä»¥åéå¯¹æ§è®¾è®¡ç lossï¼ä¹å¯ä»¥è¾¾å°ä¸éçææãä½æ¯è¿è¦æ±ç²¾å¿çè®¾è®¡æå¤±å½æ°ãå¦æç®åçä½¿ç¨è¾å¥ãè¾åºçæ¬§å¼è·ç¦»ä½ä¸ºæå¤±å½æ°ï¼ä¼å¤§æ¦çå¾å°æ¯è¾æ¨¡ç³çç»æï¼è¿æ¯å ä¸ºä¸ºäºä½¿æ¬§å¼è·ç¦»æå°åï¼ç½ç»ä¼æ´å¾åäºå°åççè¾åºå¹³ååï¼è¿ä¼é ææ¨¡ç³ã\n\nä¸è¬çï¼æä»¬ä¸äºä¸ä¸ç¥è¯æè½å¤è®¾è®¡åºåççæå¤±å½æ°ï¼ä»¥ä½¿å¾ CNNs å¯ä»¥ææçæ¶æåºç¬¦åæä»¬é¢æçç»æã\n\nå¹¸è¿çäºï¼éè¿ GANsï¼æä»¬å¯ä»¥æå®æ´é«çº¬åº¦çç®æ (å¦ï¼ä½¿è¾åºä¸ç°å®æ æ³åºå)ï¼å°±è½èªä¸»å­¦ä¹ åºéåäºæç¨æ°æ®ãææç®æ ç loss å½æ°ãä¹å°±æ¯è¯´ï¼GANs å¯ä»¥éè¿ä½¿ç¨ä¸åçæ°æ®ï¼èªä¸»å­¦ä¹ å°æ»¡è¶³æä»¬éè¦çæå¤±å½æ°ãè¿å¨ä»¥åæ¯éè¦ä½¿ç¨ä¸åçæå¤±å½æ°æè½åå°çã\n\næ¬è®ºæçä¸»è¦è´¡ç®æï¼\n\n 1. cGANs å¯ä»¥å¯¹å¤ç§ image-to-image é®é¢äº§çåççç»æ\n 2. æåºä¸ä¸ªç®åå¹¶ä¸è¶³ä»¥åå¾è¯å¥½çç»æçæ¡æ¶ï¼å¹¶åæå ç§éè¦çä½ç³»ç»æçææãCode is available\n\n\n# 2. Related Work\n\nStructured losses for image modeling éå¯¹ image-to-image è½¬æ¢é®é¢å»ºæ¨¡çæå¤±å½æ°ï¼éå¸¸è¢«è¡¨è¾¾æåç´ çº§(per-pixel)çåç±»æåå½æ¹ç¨å¼ãè¿äºæ¹ç¨å¼è®¤ä¸ºè§£ç©ºé´æ¯"unstructured"ï¼ä¹å°±æ¯è¯´æ¯ä¸ªè¾åºçpixelè¢«è®¤ä¸ºå¨æ¡ä»¶ä¸ç¬ç«äºç»å®è¾å¥å¾åçææå¶ä»åç´ ã\n\nç¸åï¼cGANsä¼å­¦ä¹ ç»ææ§æå¤±ãç»æåçæå¤±ä¼æ©ç½è¾åºçèåéç½®ãçè®ºä¸ï¼cGANsçæå¤±å½æ°å¯ä»¥å¯¹è¾å¥åè¾åºé´çä»»ä½ä¸åç»æè¿è¡æ©ç½ã\n\näºå®ä¸ï¼å¨æ­¤ä¹åå·²ç»æå¾å¤ä½¿ç¨ cGANSs æ¥è§£å³å¾åçæé®é¢ãæ¬æä¸ä»ä»¬çå ä¸ªä¸åçå°æ¹å¨äº generator å discriminator çæ¡æ¶éæ©ä¸ãæä»¬ççæå¨ä½¿ç¨ "U-Net"-based æ¡æ¶ï¼è¯å¤å¨ä½¿ç¨äºå·ç§¯ç½ç»çåç¦»å¨ "PatchGAN"ï¼å®åªæ©ç½ patch è§æ¨¡çå¾åç»æï¼ã\n\n\n# 3. Method\n\nGANs are generative models that learn a mapping from random noise vector z to output image y, G : z â y [24]. In contrast, conditional GANs learn a mapping from observed image x and random noise vector z, to y, G : {x, z} â y\n\n\n# 3.1 Objective\n\n\n\nè¿ééè¦æ³¨æçæ¯ z æ¯å¿é¡»çãä»¥å¾ç cGANs ä½¿ç¨å·²ç»æè¯å°è¿ç¹ï¼å¹¶ä¸éå¸¸éç¨ Gaussian noise ä½ä¸º z æ¥å¾®è°è¾å¥ã\n\nå¨æåçå®éªä¸­ï¼æä»¬ä½¿ç¨äºè¿ç§ç­ç¥ï¼ä½æ²¡æææï¼çæå¨å¥½åå¿½ç¥äºè¿ä¸ªåªé³ãç¸åï¼å¯¹äºæç»æ¨¡åï¼æä»¬ä»ä»¥ dropout çå½¢å¼æä¾åªé³ï¼å¹¶åºç¨äº è®­ç»åæµè¯æ¶ççæå¨çå å±ã\n\nå°½ç®¡éç¨äº dropout åªå£°ï¼æä»¬è§å¯å°æä»¬çç½ç»è¾åºçéæºæ§ä¾ç¶å¾å°ãè®¾è®¡å¯äº§çæ´å¤§éæºæ§çæ¡ä»¶GANï¼ä»èæè·ä»ä»¬å»ºæ¨¡çæ¡ä»¶åå¸çå®å¨çµï¼æ¯å½åå·¥ä½æ¬èæªå³çéè¦é®é¢ã\n\n\n# 3.2 Network architectures\n\n 1. Generator with skips\n\nä¸ä¸ª image-to-image è½¬æ¢é®é¢çå®ä¹ç¹å¾æ¯ï¼ä»ä»¬å°é«åè¾¨ççè¾å¥ç½æ ¼æ å°å°é«åè¾¨ççè¾åºç½æ ¼ãæ­¤å¤ï¼å¯¹äºæä»¬èèçé®é¢ï¼è¾å¥åè¾åºçè¡¨é¢å¤è§ä¸åï¼ä½æ¯ä¸¤èæ¯ç¸ååºç¡ç»æçææå¾ãæä»¥ï¼è¾å¥ä¸è¾åºä¸­çç»ææ¯å¤§è´å¯¹é½çãæä»¬å´ç»è¿äºäºé¡¹æ¥è®¾è®¡çææ¶æã\n\nä¸äºä»¥åè§£å³è¿ç±»é®é¢çæ¹æ³æ¯ä½¿ç¨ encoder-decoder networkãè¿ç§ç½ç»è¦æ±ææçä¿¡æ¯æµéè¦éè¿ææçå±ï¼åæ¬ç¶é¢å±ãå¯¹äºè®¸å¤å¾åç¿»è¯é®é¢ï¼æå¾å¤åºå±ä¿¡æ¯å¨è¾å¥åè¾åºä¹é´å±äº«ï¼å°±æ¯è¯´ï¼å¸æå°è¿äºä¿¡æ¯ç´æ¥ç©¿æ¢­å¨ç½ç»ä¸ãä¾å¦ï¼å¨å¾åçè²çæåµä¸ï¼è¾å¥åè¾åºå±äº«æ¾èè¾¹ç¼çä½ç½®ï¼\n\nä¸ºäºç»çæå¨ä¸ç§é¿åæ­¤ç±»ä¿¡æ¯ç¶é¢çæ¹æ³ï¼æä»¬æç§â U-Netâçä¸è¬å½¢ç¶æ·»å äºè·³è¿è¿æ¥ãå·ä½æ¥è¯´ï¼æä»¬å¨ç¬¬iå±åç¬¬n-iå±ä¹é´æ·»å è·³è¿è¿æ¥ï¼å¶ä¸­næ¯å±çæ»æ°ãæ¯ä¸ªè·³è¿è¿æ¥ä»å°ç¬¬iå±åç¬¬n-iå±çææééè¿æ¥å¨ä¸èµ·ã\n\n 2. Markovian discriminator (PatchGAN)\n\nä¼æå¨ç¥ï¼L2 å L1 loss å¨å¾åçæä»»å¡ä¸­ä¼äº§çæ¨¡ç³ç»æãå°½ç®¡è¿äºæå¤±å¹¶ä¸è½é¼å±é«é¢çæ¸æ°åº¦ï¼å°½ç®¡å¦æ­¤ï¼å®ä»¬å¨è®¸å¤æåµä¸ä»è½åç¡®æè·ä½é¢ä¿¡æ¯ãå¯¹äºè¿éçé®é¢ï¼ç¡®å®æ¯è¿æ ·ï¼æä»¬ä¸éè¦å¨æ°çæ¡æ¶æ¥å¼ºåä½é¢ä¿¡æ¯çæ­£ç¡®æ§ï¼L1 å·²ç»åäºã\n\nä¾é  L1 æ¥å¼ºå¶ä½é¢æ­£ç¡®æ§ï¼è¿ä¿ä½¿å° GAN å¤å«å¨éå¶ä¸ºä»å¯¹é«é¢ç»æä¿¡æ¯è¿è¡å»ºæ¨¡ãä¸ºäºå¯¹é«é¢ä¿¡æ¯å»ºæ¨¡ï¼å°æ³¨æåéä¸­å¨æ¬å°å¾å patch ä¸­çç»æå°±è¶³å¤äºãå æ­¤ï¼æä»¬è®¾è®¡äºè¢«ç§°ä¸º PatchGAN çå¤å«æ¶æï¼å®ä»å¯¹ patch è§æ¨¡çç»æè¿è¡æ©ç½ãè¿ä¸ªå¤å«å¨å°è¯å»åç±»å¾åä¸­ç N * N ä¸ª patch æ¯çæ¯åãæä»¬å¯¹è¯¥å¾åè¿è¡å·ç§¯è¿ç®ï¼å¯¹ææååºæ±å¹³åå¼ä»¥æä¾ D çæç»è¾åºã\n\nä¸æä¸­ï¼æä»¬è¯æäºï¼N å¯ä»¥æ¯å¾åå°å¾å¤ï¼ä¹ä¾ç¶å¯ä»¥çæé«è´¨éçç»æãè¿æ¯æå©çï¼å ä¸ºè¾å°ç PatchGAN å·æè¾å°çåæ°ï¼è¿è¡éåº¦æ´å¿«ï¼å¹¶ä¸å¯ä»¥éç¨äºä»»æå¤§å¾åãè¿æ ·çé´å«å¨å¯ä»¥ææå°å°å¾åå»ºæ¨¡ä¸ºé©¬å°å¯å¤«éæºåºï¼åè®¾åç´ ä¹é´çç¬ç«æ§ç¸å·®å¤§äº patch ç´å¾ã\n\n\n# 3.3 Optimization and inference\n\näºä¼åæä»¬çç½ç»ï¼æä»¬éµå¾ª GAN ä¸­çæ åæ¹æ³ï¼å¨ D çä¸ä¸ªæ¢¯åº¦ä¸éæ­¥éª¤ä¸ G çä¸ä¸ªæ­¥éª¤ä¹é´äº¤æ¿ãå¦åå§ GAN è®ºæå»ºè®®çé£æ ·ï¼ä¸æ¯è®­ç» G ä»¥ä½¿ log(1 â D(xï¼G(xï¼z)) æå°åï¼èæ¯è®­ç»ä»¥æå¤§å log(D(xï¼G(xï¼z))ãæ­¤å¤ï¼æä»¬å¨ä¼å D çåæ¶å°ç®æ é¤ä»¥2ï¼è¿ä¼éä½ D ç¸å¯¹äº G çå­¦ä¹ çãæä»¬ä½¿ç¨ minibatch SGD å åºç¨ Adam æ±è§£å¨ï¼æå®åæ°ï¼å­¦ä¹ ç=0.0002ãÎ²1=0.5, Î²2=0.999ã\n\nå¨æ¨çæ¶ï¼æä»¬ä»¥åè®­ç»é¶æ®µå®å¨ç¸åçæ¹å¼è¿è¡ çæå¨ç½ç»ãè¿åéå¸¸çåè®®ä¸å¤ªä¸æ ·ï¼å¨æµè¯é¶æ®µï¼æä»¬ä½¿ç¨äº dropout ä¸è®­ç»é¶æ®µç¸åçæ¹å¼ï¼å¹¶ä¸æä»¬ä½¿ç¨æµè¯ batch çç»è®¡ä¿¡æ¯è¿è¡ batch normalizationï¼èä¸æ¯è®­ç»æ¹æ¬¡çæ±æ»ç»è®¡ä¿¡æ¯ãè¿ç§æ¹æ³è¿è¡ batch normalization æ¶ï¼è®¾ç½® batch size ä¸º 1 æ¶è¢«ç§°ä¸ºâå®ä¾å½ä¸åâï¼å¹¶å·²è¯æå¨å¾åçæä»»å¡ä¸­ææãå¨æä»¬çå®éªä¸­ï¼æä»¬ä½¿ç¨ batch size ä»äº1å°10ä¹é´ï¼å·ä½åå³äºå®éªã\n\n\n# 4. Experiments\n\nä¸ºäºæ¢ç´¢ cGANs çæ®éæ§ï¼æä»¬å¨åç§ä»»å¡åæ°æ®éä¸æµè¯äºè¿ç§æ¹æ³ï¼åæ¬ å¾å½¢ä»»å¡ï¼ä¾å¦ç§ççæï¼åè§è§ä»»å¡ï¼ä¾å¦è¯­ä¹åå²ï¼\n\n 1. Semantic labels â photoo, trained on the Cityscapes dataset\n 2. Architectural labels â photo, trained on CMP Facades\n 3. Mapâaerial photo, trained on data scraped from Google Maps\n 4. BW â color photos\n 5. Edges â photo\n 6. Sketch â photo\n 7. Day â night\n 8. Thermal â color photos\n 9. Photo with missing pixels â inpainted photo\n\n\n# 4.2 Analysis of the objective function\n\nå¨ final objective ä¸­ï¼åªé¨åæ¯è¾éè¦å¢ï¼æä»¬è¿è¡æ¶èç ç©¶æ¥éç¦» L1 ãGAN é¡¹çå½±åï¼ä»¥æ¯è¾ cGAN å GAN åå«ä½ç¨å¨è¾å¥ä¸çææã\n\nè®ºæä¸­ç Figure 4 æ¾ç¤ºäºè¿äºååå¨ two labels â photo é®é¢ä¸çå®æ§å½±åï¼\n\n * ä»L1ä¼å¯¼è´åçä½æ¨¡ç³çç»æ\n * åç¬ä½¿ç¨cGANï¼å° Î»=0ï¼ç»åºäºæ´æ¸æ°çç»æï¼ä½å¨æäºåºç¨ç¨åºä¸å¼å¥äºè§è§ççµ\n * å°ä¸¤ä¸ªé¨åå å¨ä¸èµ·ï¼Î»= 100ï¼åå°äºè¿äºä¼ªå\n\nä½¿ç¨ FCN-score éåè¿äºå¨ cityscapes labels â photo ä»»å¡ä¸­çè§å¯ç ç©¶(è®ºæ Table 1)ï¼\n\n * åºäº GAN çç®æ ä»»å¡å¾åæ´é«ï¼ä¹å°±æ¯è¯´ åæçå¾ååå«æ´å¤çå¯è¯å«ç»æ\n * å¨è¡¡éè¾å¥åè¾åºå¹éåº¦çæå¤±å½æ°ä¸ï¼cGAN è¡¨ç°çè¦æ¯ GAN å¥½çå¤ã\n   * æä»¬æµè¯äºä» final objective ä¸­å»æ conditioning é¨åçå½±åï¼åç°ï¼æ­¤æ¶çæå¤±å½æ°ä¸ä¼æ©ç½è¾å¥åè¾åºä¹é´çä¸å¹éï¼åªå³å¿æ¯å¦è¾åºçèµ·æ¥å¾çå®ãæ£æ¥ç»æè¡¨æï¼çæå¨å´©æºäºï¼ä¸ç®¡è¾å¥çç§çå¦ä½é½äº§çäºå ä¹å®å¨ç¸åçè¾åºã\n * å¦å¤ï¼æ·»å  L1 é¡¹ä¹ä¼é¼å± è¾åºå°éè¾å¥ï¼å ä¸º L1 æå¤±ä¼å¯¹æ­£ç¡®å¹éè¾å¥ç ground truth è¾åºä¸å¯è½ä¸æ­£ç¡®çåæè¾åºä¹é´çè·ç¦»è¿è¡æ©ç½ã\n * ç¸åºå°ï¼L1 + GAN å¨åå»ºå°éè¾å¥æ ç­¾å¾çé¼çæ¸²ææ¶ä¹æ¯ææçãç»åææé¡¹ï¼L1 + cGAN æ§è¡çåæ ·çå¥½ã\n\nColorfulness cGANs çä¸ä¸ªå¼äººæ³¨ç®çå½±åå°±æ¯ å®ä¼äº§ç sharp imagesï¼å¹»æ³åºçå³ä½¿å¨è¾å¥æ ç­¾å¾ä¸­ä¸å­å¨çç©ºé´ç»æãæäººå°±å¼å§æ³è±¡ cGANs å¨åè°±çº¬åº¦ä¹æç±»ä¼¼çâéåâä½ç¨ï¼ä¾å¦ï¼ä½¿å¾å¾åå·ææ´å ä¸°å¯çè²å½©ãå°±å L1 å¨ä¸è½ç²¾ç¡®å®ä½è¾¹ç¼çä½ç½®æ¶ä¼æ¿åæ¨¡ç³ä¸æ ·ï¼å®ä¹ä¼å¨ä¸ç¡®å®åç´ åºéç¨å ç§å¯è½çé¢è²å¼ä¸­çåªç§æ¶æ¿å±é¢è²ä¸ºå¹³åç°è²ãç¹å«æ¯ï¼éè¿å¨å¯è½çé¢è²ä¸éæ©æ¡ä»¶æ¦çå¯åº¦å½æ°çä¸­å¼ï¼å¯ä»¥ä½¿L1æå°ãå¦ä¸æ¹é¢ï¼å¯¹ææ§æå¤±ååä¸å¯ä»¥åæè½å¤æè¯å°ç°è²è¾åºæ¯ä¸ç°å®çï¼å¹¶é¼å±å¹éçå®çé¢è²åå¸ã\n\n\n# 4.3 Analysis of the generator architecture\n\nU-Net æ¶æåè®¸ä½ç»´åº¦ä¿¡æ¯å¿«æ·çç©¿è¶ç½ç»ï¼è¿ä¼å¸¦æ¥æ´å¥½çç»æåï¼éè¿å¯¹æ¯ U-Net å encoder-decoder(ç®åçç§»é¤ U-Net ä¸­ç skip connections å½¢æ) å¨ cityscape generation ä»»å¡ä¸çè¡¨ç°ï¼æä»¬äºè§£å°ï¼\n\n 1. å¨æä»¬çå®éªä¸­ï¼encoder-decoder æ æ³å­¦ä¹ çæé¼ççå¾å\n 2. U-Net ä¸ä»å¨ä½¿ç¨ cGANs æ¶ ä¼äº encoder-decoderï¼å¨ä½¿ç¨ L1 loss æ¶ï¼ä¹ææ´å ä¼è¶çç»æ\n\n\n# 4.4 From PixelGANs to PatchGANs to ImageGANs\n\næä»¬æµè¯äºæ¹åé´å«å¨æåéç patch size N çåç§ææï¼ä» 1Ã1 ç âPixelGANâ å° 286Ã286 çæ´å¾ "ImageGAN"ã\n\nPixelGAN å¯¹ç©ºé´æ¸æ°åº¦æ²¡æç¹å«çå½±åï¼ä½æ¯å¯ä»¥å¢å ç»æçè²å½©ãé¢è²ç´æ¹å¾å¹éæ¯ä¸ä¸ªå¾åå¤çé¢åå¸¸è§çé®é¢ï¼ä¹è®¸ PixelGAN ä¼æ¯ä¸ä¸ªææ½åçè½»éåè§£å³æ¹æ¡ã\n\nä½¿ç¨ 16Ã16 PatchGAN è¶³ä»¥ä¿è¿éå©çè¾åºï¼å¹¶è·å¾è¯å¥½çFCNå¾åï¼ä½ä¹å¯¼è´ tiling artifactsã70Ã70 PatchGAN ç¼è§£äºè¿äºé®é¢å¹¶è·å¾æ´å¥½çåæ°ãç¼©æ¾å°è¶åºè¿ä¸ªèå´ï¼å°å®æ´ç 286Ã286 ImageGANï¼ä¼¼ä¹å¹¶æ²¡ææ¹åç»æçè§è§è´¨éï¼å¹¶ä¸ï¼äºå®ä¸å¾å°äºç¸å¯¹ä½çå¤çåæ°ãè¿ä¹è®¸æ¯å ä¸º ImageGAN æ¯ 70 Ã 70 PatchGAN ææ´å¤çåæ°åæ´å¤§çæ·±åº¦ï¼ä»èæ´å é¾ä»¥è®­ç»é æçã\n\nFully-convolutional translation PatchGAN çä¼å¿æ¯åºå® patch å¤§å°çå¤å«å¨å¯ä»¥éç¨äºä»»æå¤§çå¾åãæä»¬ä¹å¯ä»¥å°çæå¨å·ç§¯çåºç¨äºæ¯è®­ç»ç¨çå¾åæ´å¤§çå¾åä¸ãæä»¬å¨ map â aerial ä»»å¡ä¸æµè¯äºè¿ç§åæ³ãæä»¬å¨ 512Ã512 çå¾çä¸æµè¯äºç¨ 256Ã256 çå¾åè®­ç»å¾å°ççæå¨ï¼ææå¨ è®ºæç Figure 8 ä¸­å¯ä»¥çåºææè¿æ¯ä¸ä¿çã\n\n\n# 4.5 Perceptual validation\n\næä»¬å¨ mapâaerial å grayscaleâcolor ä»»å¡ä¸éªè¯äºç»æç perceptual realismï¼ææ§ç°å®ä¸»ä¹ï¼ï¼ï¼ï¼ãç¨å¿æ¿èæ¥æµè¯çæçç»æï¼çæ¯å¦è½å¤éªè¿å¿æ¿èï¼ä¸è¬æåµä¸ï¼æä»¬çæ¹æ³(ä½¿ç¨ L1+cGANs)ææ´å ä¼è¶çè¡¨ç°ï¼é¤éå«çæ¹æ³æ¯éå¯¹ç¹å®é®é¢è¿è¡äºä¸é¨è®¾è®¡ãä¼åã\n\n\n# 4.6 Semantic segmentation\n\nææ¡ä»¶ç GAN ä¼¼ä¹å¯ä»¥ææè§£å³è¾åºé«åº¦ç»èåææå½±ç±»çé®é¢ï¼è¿å¨å¾åå¤çåå¾å½¢ä»»å¡ä¸­å¾å¸¸è§ãé£ä¹å¨è§è§é®é¢ï¼å¦è¯­ä¹åå²ï¼ä¸çè¡¨ç°å¦ä½å¢ï¼è¿ç±»é®é¢çç¹ç¹æ¯ï¼è¾å¥æ¯è¾åºæ´å¤æã\n\nä¸ºäºå¼å§å¯¹æ­¤è¿è¡æµè¯ï¼æä»¬è®­ç»äºä¸ä¸ª cGANï¼å¸¦/ä¸å¸¦ L1 æå¤±ï¼ç¨äº cityscape photoâlabels ä»»å¡ãè®ºæ Figure 10 æ¾ç¤ºäºå®æ§ç»æï¼åç±»åç¡®æ§çå®éæ¥åå¨è®ºæ Table 6 ä¸­ãæè¶£çæ¯ï¼è®­ç»åºçä¸å¸¦ L1 æå¤±ç cGAN è½å¤å¨åçç¨åº¦çåç¡®æ§ä¸è§£å³è¿ä¸ªé®é¢ãæ®æä»¬æç¥ï¼è¿æ¯ GAN æåçæâæ ç­¾âçé¦æ¬¡æ¼ç¤ºï¼è¿äº"æ ç­¾"æ¯å·æè¿ç»­ååä¸å ä¹ç¦»æ£çå¼ï¼èä¸æ¯âå¾åâãå°½ç®¡ cGAN åå¾äºä¸äºæåï¼ä½ä»ä»¬è¿è¿ä¸æ¯è§£å³ä¸é¢è¿ä¸ªé®é¢çæä½³æ¹æ³ï¼å¦è®ºæ Table 6 æç¤ºï¼ä»ä½¿ç¨ L1 åå½å¯ä»¥è·å¾æ¯ cGAN æ´å¥½çåæ°ãæä»¬è®¤ä¸ºï¼å¯¹äºè§è§é®é¢ï¼ç®æ ï¼å³é¢æµæ¥è¿ ground truth çäº§åºï¼å¯è½ä¸å¦å¾å½¢ä»»å¡é£ä¹å«ç³ï¼å L1 è¿æ ·çéå»ºæå¤±å°±è¶³å¤äº\n\n\n# 4.7. Community-driven Research\n\nèªä»æååå¸è®ºæåæä»¬ç pix2pix ä»£ç ï¼Twitterç¤¾åºï¼åæ¬è®¡ç®æºè§è§åå¾å½¢ä»ä¸äººåä»¥åè§è§èºæ¯å®¶ï¼é½ææåå°å°æä»¬çæ¡æ¶åºç¨äºåç§æ°é¢çå¾åå°å¾åçç¿»è¯ä»»å¡ï¼è¿è¿è¶åºäºåå§è®ºæãå°½ç®¡æäºæ¯åºäº pix2pix è¿è¡äºä¿®æ¹ï¼ä½æ¯ï¼ä»ä»¬è¯æäºæä»¬çæ¹æ³ä½ä¸º image-to-image è½¬æ¢é®é¢çä¸ç§éç¨çååå·¥å·çåæ¯ã\n\n\n# 5. Conclusion\n\næ¬æçç»æè¡¨æï¼æ¡ä»¶å¯¹æç½ç»æ¯è®¸å¤ image-to-image è½¬æ¢ä»»å¡çæåéçæ¹æ³ï¼ç¹å«æ¯é£äºæ¶åé«åº¦ç»æåå¾å½¢è¾åºçä»»å¡ãè¿äºç½ç»å¯ä»¥å­¦å°éåºäºæå¤´çä»»å¡åæ°æ®ç lossï¼è¿å°±è®©è¿äºç½ç»å¯ä»¥éç¨äºåç§åæ ·çè®¾ç½®ã\n\n----------------------------------------\n\n\n# Deconvolution and Checkerboard Artifacts\n\n> paper: Deconvolution and Checkerboard Artifacts\n\n\n# Abstract\n\nå½æä»¬éå¸¸ä»ç»å°è§å¯ç±ç¥ç»ç½ç»çæçå¾åæ¶ï¼æä»¬ç»å¸¸ä¼çå°ä¸ç§å¥æªçæ£çç¶ä¼ªåå¾æ¡ãè¿ç§ç°è±¡å¨ä¸äºæ¨¡åä¸­å°¤ä¸ºææ¾ï¼ä½æ¯æè¿çæ¨¡åä¸­æå¾å¤§ä¸é¨åé½è¡¨ç°åºäºè¿ç§è¡ä¸ºã\n\né¾ä»¥çè§£çæ¯ï¼æ£çæ ¼å¾æ¡å¨è²å½©æµççå¾åä¸­å¾å¾æä¸ºçªåºãè¿æ¯æä¹åäºï¼ç¥ç»ç½ç»è®¨åé²è³çè²å½©åï¼è¿äºä¼ªåçå®éåå å®éä¸éå¸¸ç®åï¼è¿æ¯é¿åå®ä»¬çæ¹æ³ã\n\n\n# Deconvolution & Overlap\n\nå½æä»¬è®©ç¥ç»ç½ç»çæå¾åæ¶ï¼æä»¬éå¸¸ä¼æ ¹æ®ä½åè¾¨çï¼é«æ°´å¹³çæè¿°æ¥æå»ºå®ä»¬ãè¿ä½¿ç½ç»å¯ä»¥æè¿°ç²ç³å¾åï¼ç¶åå¡«åç»èä¿¡æ¯ã\n\nä¸ºäºåå°è¿ä¸ç¹ï¼æä»¬éè¦æç§æ¹æ³å°ä½åè¾¨ççå¾åè½¬æ¢æé«åè¾¨ççå¾åãéå¸¸ï¼æä»¬éè¿ Deconvolution æä½æ¥æ§è¡æ­¤æä½ãç²ç¥å°è®²ï¼Deconvolution å±åè®¸æ¨¡åä½¿ç¨å°å¾åä¸­çæ¯ä¸ªç¹æ¥âç»å¶âè¾å¤§å¾åä¸­çæ­£æ¹å½¢ã\n\nï¼åå·ç§¯å·æå¤ç§è§£éåä¸åçåç§°ï¼åæ¬âè½¬ç½®å·ç§¯âãä¸ºç®æ´èµ·è§ï¼æä»¬å¨æ¬æä¸­ä½¿ç¨âåå·ç§¯âè¿ä¸ªåç§°ãï¼\n\nä¸å¹¸çæ¯ï¼åå·ç§¯å¾å®¹æåºç°âä¸ååçéå âï¼å¨æäºå°æ¹æ¯å¨å¶ä»å°æ¹æ¾ç½®æ´å¤çéå»ç»ç»ãç¹å«æ¯ï¼å½åæ ¸å¤§å°ï¼è¾åºçªå£å¤§å°ï¼æ æ³è¢«æ­¥å¹ï¼é¡¶é¨åç¹ä¹é´çé´è·ï¼æ´é¤æ¶ï¼åå·ç§¯å·æä¸ååçéå ãå°½ç®¡ååä¸ç½ç»å¯ä»¥ä»ç»å°å­¦ä¹ æéæ¥é¿åè¿ç§æåµï¼æä»¬å°å¨åé¢è¯¦ç»è®¨è®ºï¼ï¼ä½å®éä¸ç¥ç»ç½ç»å´å¨åªåé¿åè¿ç§æåµã\n\néå å¾æ¡ä¹ä»¥äºç»´å½¢å¼å½¢æãä¸¤æ ¹è½´ä¸çä¸ååéå é¨åä¼ç¸äºå å ï¼ä»èå½¢æä¸ä¸ªååå¹åº¦å¤§çæ£çç¶ç¹å¾å¾æ¡ã\n\nå®éä¸ï¼ä¸ååçéå å¨äºç»´ä¸å¾å¾æ´å æç«¯ï¼å ä¸ºä¸¤ä¸ªå¾æ¡ç¸ä¹å¨ä¸èµ·ï¼æä»¥ä¸åååº¦å¹³æ¹ãä¾å¦ï¼å¨ä¸ç»´ä¸­ï¼æ­¥å¹2ï¼å¤§å°3çåå·ç§¯å·æä¸äºè¾åºï¼å¶è¾å¥æ°éæ¯å¶ä»è¾å¥çä¸¤åï¼ä½æ¯å¨äºç»´ä¸­ï¼è¿åæååä¹ä¸ã\n\nç°å¨ï¼ç¥ç»ç½ç»å¨åå»ºå¾åæ¶éå¸¸ä½¿ç¨å¤å±åå·ç§¯ï¼ä»ä¸ç³»åè¾ä½åè¾¨ççæè¿°ä¸­è¿­ä»£æå»ºè¾å¤§çå¾åãè¿äºå å çåå·ç§¯å¯è½ä¼æ¶é¤ä¼ªå½±ï¼ä½å®ä»¬éå¸¸ä¼å¤åï¼ä»èå¨åç§è§æ¨¡ä¸åå»ºä¼ªå½±ã\n\næ­¥å¹1åå·ç§¯-å¨æåæ¨¡åä¸­éå¸¸è¢«è§ä¸ºæåä¸å± - å¨æå¶ä¼ªåæ¹é¢éå¸¸ææãä»ä»¬å¯ä»¥å é¤ååå¶å¤§å°çé¢çä¼ªåï¼å¹¶åå°å¶ä»é¢çå°äºå¶å¤§å°çä¼ªåãä½æ¯ï¼æ­£å¦è®¸å¤ææ°æ¨¡åä¸­æçå°çé£æ ·ï¼ä¼ªå½±ä»å¯è½æ³æ¼åºå»ã\n\né¤äºæä»¬ä¸é¢è§å¯å°çç±»ä¼¼äºé«é¢æ£çæ ¼çä¼ªåå¤ï¼æ©æçåå·ç§¯è¿å¯ä»¥åå»ºä½é¢ä¼ªåï¼æä»¬å°å¨åé¢å¯¹æ­¤è¿è¡è¯¦ç»ä»ç»ã\n\nå½è¾åºä¸å¯»å¸¸çé¢è²æ¶ï¼è¿äºä¼ªåå¾å¾æçªåºãç±äºç¥ç»ç½ç»å±éå¸¸ä¼æåå·®ï¼å°å­¦ä¹ å¼æ·»å å°è¾åºä¸­ï¼ï¼å æ­¤å¾å®¹æè¾åºå¹³åé¢è²ãé¢è²ï¼å¦äº®çº¢è²ï¼ä¸å¹³åé¢è²çè·ç¦»è¶è¿ï¼åå·ç§¯å°±éè¦è´¡ç®è¶å¤ã\n\n\n# Overlap & Learning\n\nç¨ä¸ååçéå æ¥æèäºç©æ¯ä¸ç§è½ç¶ç®ååä½æç¨çæ¡æ¶æ¹æ³ãä¸ç®¡å¥½åï¼æä»¬çæ¨¡åé½ä¸ºå®ä»¬çåå·ç§¯å­¦ä¹ æéã\n\nä»çè®ºä¸è®²ï¼æä»¬çæ¨¡åå¯ä»¥å­¦ä¹ ä»ç»å°åå°ä¸ååéå çä½ç½®ï¼ä»èä½¿è¾åºååå¹³è¡¡ã\n\nè¿æ¯ä¸é¡¹æ£æçå¹³è¡¡æä½ï¼å°¤å¶æ¯å½æå¤ä¸ªééäº¤äºæ¶ãé¿åä¼ªåä¼æ¾çéå¶å¯è½çè¿æ»¤å¨ï¼ä»èçºç²æ¨¡åå®¹éãå¨å®è·µä¸­ï¼ç¥ç»ç½ç»åªåå­¦ä¹ å®å¨é¿åè¿äºæ¨¡å¼ã\n\nå®éä¸ï¼ä¸ä»éå ä¸ååçæ¨¡åä¸è½é¿åè¿ç§æåµï¼èä¸éå ååçæ¨¡åç»å¸¸å­¦ä¹ å°å¯¼è´ç¸ä¼¼ä¼ªåçåæ ¸ï¼å°½ç®¡è¿ä¸æ¯ååéå æ¹å¼çé»è®¤è¡ä¸ºï¼ä½å³ä½¿éå åå·ç§¯ä¹ä»ç¶å¾å®¹æä¼å¯¼è´ä¼ªåã\n\nå®å¨é¿åä¼ªåä»ç¶æ¯å¯¹è¿æ»¤å¨çéè¦éå¶ï¼å¹¶ä¸å¨å®è·µä¸­ï¼ä¼ªåä»ç¶å­å¨äºè¿äºæ¨¡åä¸­ï¼å°½ç®¡å®ä»¬çèµ·æ¥è¾ä¸ºæ¸©åã\n\nè¿éå¯è½æå¾å¤å ç´ å¨èµ·ä½ç¨ãä¾å¦ï¼å¨çæå¯¹æç½ç»ï¼GANï¼çæåµä¸ï¼ä¸ä¸ªé®é¢å¯è½æ¯é´å«å¨åå¶æ¢¯åº¦ï¼æä»¬å°å¨åé¢åè®¨è®ºï¼ãä½æ¯é®é¢çå¾å¤§ä¸é¨åä¼¼ä¹æ¯åå·ç§¯ãæå¥½è¯´ï¼åå·ç§¯æ¯èå¼±çï¼å ä¸ºå³ä½¿å¾ä»ç»å°éæ©å¤§å°ï¼åå·ç§¯ä¹å¾å®¹æä»£è¡¨ä¼ªååå»ºå½æ°ãæç³ç³çæ¯ï¼åå»ºä¼ªåæ¯åå·ç§¯çé»è®¤è¡ä¸ºã\n\næ¯å¦æå¶ä»æ¹æ³å¯ä»¥å¯¹ä¼ªåå·ææ´é«çæµæåï¼\n\n\n# Better Upsampling\n\nä¸ºé¿åè¿äºä¼ªåï¼æä»¬å¸æä½¿ç¨ regular deconvolutionï¼âè½¬ç½®å·ç§¯âï¼çæ¿ä»£æ¹æ³ãä¸åå·ç§¯ä¸åï¼è¿ç§åä¸éæ ·çæ¹æ³ä¸åºå°ä¼ªåä½ä¸ºå¶é»è®¤è¡ä¸ºãçæ³æåµä¸ï¼å®ä¼èµ°å¾æ´è¿ï¼å¹¶ä¸ååäºæ­¤ç±»å·¥ä»¶ã\n\nä¸ç§æ¹æ³æ¯ç¡®ä¿æ¨ä½¿ç¨çåæ ¸å¤§å°è¢«æ­¥å¹é¤å°½ï¼ä»èé¿åäºéå é®é¢ãè¿ç­æäºâäºåç´ å·ç§¯âï¼è¯¥ææ¯æè¿å¨å¾åè¶åè¾¨çæ¹é¢è·å¾äºæåãä½æ¯ï¼å°½ç®¡è¿ç§æ¹æ³ææå¸®å©ï¼ä½æ¯åå·ç§¯ä»ç¶å¾å®¹æé·å¥åå»ºä¼ªåçè¿ç¨ä¸­ã\n\nå¦ä¸ç§æ¹æ³æ¯ä»å·ç§¯å°è®¡ç®ç¹å¾ä¸­åç¦»åºè¾é«åè¾¨ççä¸éæ ·ãä¾å¦ï¼æ¨å¯ä»¥è°æ´å¾åå¤§å°ï¼ä½¿ç¨æè¿é»æå¼æåçº¿æ§æå¼ï¼ï¼ç¶åè¿è¡å·ç§¯å±ãè¿ä¼¼ä¹æ¯ä¸ç§èªç¶çæ¹æ³ï¼å¹¶ä¸å¤§è´ç±»ä¼¼çæ¹æ³å¨å¾åè¶åè¾¨çä¸­ææå¾å¥½ã\n\nè§£å·ç§¯åä¸åçå¤§å°è°æ´å·ç§¯æ¹æ³é½æ¯çº¿æ§è¿ç®ï¼å¯ä»¥è§£éä¸ºç©éµãè¿æ¯æ¥çå®ä»¬ä¹é´å·®å¼çæç¨æ¹æ³ãåå·ç§¯å¨æ¯ä¸ªè¾åºçªå£é½æå¯ä¸çæ¡ç®ï¼èresize-convolutionåéå«äºæéç»å®ï¼ä»¥é»æ­¢é«é¢ä¼ªåã\n\næä»¬æ¾ç»ä½¿ç¨æè¿é»æå¼æ³åå¾äºæå¥½çç»æï¼åæ¶å¨ä½¿åçº¿æ§è°æ´å¤§å°çå·¥ä½ä¸­éå°äºå°é¾ãè¿å¯è½ä»æå³çï¼å¯¹äºæä»¬çæ¨¡åï¼æè¿é»å±æ°å¥½ä¸éå¯¹åå·ç§¯ä¼åçè¶åæ°éåä½¿ç¨ãè¿å¯è½æåºäºå¤©ççä½¿ç¨åçº¿æ§æå¼å¯è½ä¼éå°æ£æçé®é¢ï¼å ä¸ºå®è¿äºå¼ºçå°æµæäºé«é¢å¾åç¹å¾ãæä»¬ä¸è®¤ä¸ºè¿ä¸¤ç§æ¹æ³é½æ¯ä¸éæ ·çæç»è§£å³æ¹æ¡ï¼ä½å®ä»¬ç¡®å®å¯ä»¥ä¿®å¤æ£çç¶å·¥ä»¶ã\n\n\n# Image Generation Results\n\næä»¬çç»éªæ¯ï¼å¨å¤ç§æåµä¸ï¼æè¿é»è°æ´å¤§å°ååè¿è¡å·ç§¯ææéå¸¸å¥½ãæä»¬åç°è¿ç§æ¹æ³å¯ä¸ºæ¨æä¾å¸®å©çä¸ä¸ªä¾å­æ¯âçæå¯¹æç½ç»âãç®åå°å°æ ååå·ç§¯å±åæ¢ä¸ºæè¿é»è°æ´å¤§å°ï¼ç¶ååè¿è¡å·ç§¯ï¼å°å¯¼è´ä¸åé¢ççä¼ªåæ¶å¤±ã\n\näºå®ä¸ï¼å¨è¿è¡ä»»ä½è®­ç»ä¹åå°±å¯ä»¥çå°ä¼ªåçå·®å¼ãå¦ææä»¬ä½¿ç¨éæºæéå¯¹å¶è¿è¡äºåå§åï¼å¹¶æ¥ççæå¨çæçå¾åï¼é£ä¹æä»¬å·²ç»å¯ä»¥çå°è¿äºä¼ªåï¼\n\nè¿è¡¨æä¼ªåæ¯ç±äºè¿ç§çæå¾åçæ¹æ³ï¼èä¸æ¯å¯¹æè®­ç»ãï¼è¿ä¹è¡¨ææä»¬å¯ä»¥å¨æ²¡ææ¢éè®­ç»æ¨¡ååé¦å¨æçæåµä¸ï¼å­¦ä¹ å°å¾å¤å¥½ççæå¨è®¾è®¡ãï¼\n\nç¸ä¿¡è¿äºä¼ªå½±ä¸æ¯GANç¹æçå¦ä¸ä¸ªåå æ¯ï¼æä»¬å¨å¶ä»ç±»åçæ¨¡åä¸­çå°äºå®ä»¬ï¼å¹¶ä¸åç°å½æä»¬åæ¢å°è°æ´å¤§å°å·ç§¯ä¸éæ ·æ¶ï¼å®ä»¬ä¹ä¼æ¶å¤±ãä¾å¦ï¼èèå®æ¶èºæ¯é£æ ¼è½¬ç§»ï¼å¶ä¸­è®­ç»ç¥ç»ç½ç»ç´æ¥çææ ·å¼è½¬ç§»çå¾åãæä»¬åç°å®ä»¬å¾å®¹æåå°æ£çä¼ªåçå½±åï¼å°¤å¶æ¯å¨ææ¬å¹¶æªæç¡®æµå¶å®ä»¬çæåµä¸ï¼ãä½æ¯ï¼å°åå·ç§¯å±åæ¢ä¸ºè°æ´å¤§å°å·ç§¯å±ä¼ä½¿ä¼ªåæ¶å¤±ã\n\nGoogle Brainå¢éå³å°åè¡¨çè®ºæå°å¨æ´å¨é¢çå®éªåææ°ç»æä¸­è¯æè¯¥ææ¯çä¼å¿ã ï¼æä»¬éæ©åç¬ä»ç»æ­¤ææ¯ï¼æ¯å ä¸ºæä»¬è®¤ä¸ºå®å¼å¾è¿è¡æ´è¯¦ç»çè®¨è®ºï¼å¹¶ä¸æ¶åå¤ç¯è®ºæãï¼\n\n\n# Artifacts in Gradients\n\næ¯å½æä»¬è®¡ç®å·ç§¯å±çæ¢¯åº¦æ¶ï¼æä»¬é½ä¼å¨ååéåä¸è¿è¡åå·ç§¯ï¼transposed convolutionï¼ãå°±åæä»¬ä½¿ç¨åå·ç§¯çæå¾åæ¶ä¸æ ·ï¼è¿ä¼å¯¼è´æ¸åä¸­çæ£çæ ¼å¾æ¡ã\n\nç¹å¾å¯è§åç¤¾åºå·²ç»ç¥éå¾åæ¨¡åæ¢¯åº¦ä¸­å­å¨é«é¢âåªå£°âï¼è¿æ¯ä¸ä¸ªéå¤§ææãä»¥æç§æ¹å¼ï¼ç¹å¾å¯è§åæ¹æ³å¿é¡»è¡¥å¿è¿ç§åªå£°ã\n\nä¾å¦ï¼DeepDream ä¼¼ä¹ä»¥å¤ç§æ¹å¼å¼èµ·ä¼ªå½±ä¹é´çç ´åæ§å¹²æ°ï¼ä¾å¦åæ¶ä¼åè®¸å¤åè½ï¼ä»¥åå¨è®¸å¤åç§»åæ¯ä¾ä¸è¿è¡ä¼åãç¹å«æ¯ï¼å¨ä¸ååç§»éå¤è¿è¡ä¼åçâæå¨âæ¶é¤äºä¸äºæ£çä¼ªåã ï¼å°½ç®¡æäºä¼ªåæ¯æä»¬çæ åæ£çæ ¼å¾æ¡ï¼èå¶ä»ä¼ªåæ¯ç»ç»æ§è¾å·®çé«é¢å¾æ¡ãæä»¬è®¤ä¸ºï¼è¿äºæ¯ç±æå¤§åå¹¶å¼èµ·çãæå¤§åå¹¶ä»¥åä¸Geodesics of learned representationsä¸­çé«é¢ä¼ªåç¸å³èãï¼\n\nç¹å¾å¯è§åçææ°å·¥ä½ï¼ä¾å¦DeepDreaming with TensorFlowï¼å·²æç¡®è¯å«å¹¶è¡¥å¿äºè¿äºé«é¢æ¢¯åº¦åéãäººä»¬æ³ç¥éï¼æ´å¥½çç¥ç»ç½ç»æ¶ææ¯å¦å¯ä»¥ä½¿è¿äºå·¥ä½åå¾ä¸å¿è¦ã\n\nè¿äºæ¢¯åº¦ä¼ªå½±ä¼å½±åGANåï¼å¦ææ¢¯åº¦ä¼ªå½±å¯ä»¥å½±ååºäºç¹å¾å¯è§åä¸­çç¥ç»ç½ç»æ¢¯åº¦ä¼åçå¾åï¼é£ä¹æä»¬ä¹å¯ä»¥é¢æå®ä¼å½±åç±çæå¨åæ°åçå¾åæï¼å ä¸ºå®ä»¬ç±GANä¸­çé´å«å¨è¿è¡äºä¼åãæä»¬åç°å¨æäºæåµä¸ç¡®å®ä¼åçè¿ç§æåµãå½çæå¨æ¢ä¸åæä¹ä¸åææ£çå¾æ¡æ¶ï¼é´å«å¨ä¸­çå¤§å·ç§¯ä¼å¯¼è´å®ä»¬ã\n\nç®åå°ä¸æ¸æ¥è¿äºæ¢¯åº¦ä¼ªåçå¹¿æ³å«ä¹æ¯ä»ä¹ãèèå®ä»¬çä¸ç§æ¹æ³æ¯ï¼æäºç¥ç»ååºæ¬ä¸å¯ä»¥ä»»æå°è·å¾å¶é»å±çè®¸å¤åçæ¢¯åº¦ãç­æå°ï¼åºäºååççç±ï¼ç½ç»å°æ¯å¶ä»åç´ æ´å³å¿è¾å¥ä¸­çæäºåç´ ãè¿äºå¬èµ·æ¥é½ä¸æ¯çæ³çã\n\nä¼¼ä¹æäºåç´ æ¯å¶ä»åç´ å¯¹ç½ç»è¾åºçå½±åæ´å¤§ï¼å¯è½ä¼å¤¸å¤§å¯¹ææ§åä¾ãç±äºå¯¼æ°éä¸­å¨å°éåç´ ä¸ï¼å æ­¤è¿äºåç´ çè¾å°æå¨å¯è½ä¼äº§çè¾å¤§çå½±åãæä»¬å°æªå¯¹æ­¤è¿è¡è°æ¥ã\n\n\n# Conclusion\n\nä½¿ç¨åå·ç§¯çæå¾åçæ åæ¹æ³å°½ç®¡åå¾äºæåä½å­å¨ä¸äºçè®ºä¸ç®åçé®é¢ï¼è¿äºé®é¢ä¼å¯¼è´çæçå¾åä¸­åºç°ä¼ªåãä½¿ç¨æ²¡æè¿äºé®é¢çèªç¶æ¿ä»£æ¹æ³ä¼å¯¼è´ä¼ªåæ¶å¤±ï¼ç±»ä¼¼çè®ºç¹è¡¨æï¼standard strided convolutional å±ä¹å¯è½å­å¨é®é¢ï¼ã',normalizedContent:'# è®ºæéè¯»æè¦\n\n\n# image-to-image translation with conditional adversarial networks\n\n\n# abstract\n\néå¯¹ è½¬åè¾å¥å¾åå°ä¸ç§å³èçè¾åº(image-to-image, map pixels to pixels)ç±»åçä»»å¡ï¼æåºäºä¸ç§éç¨ç architecture å objectiveï¼åªæ¯ä½¿ç¨ä¸åçæ°æ®å³å¯æ»¡è¶³åç§ä»»å¡\n\nä¸è¬æ¥è¯´ï¼conditional adversarial nets å¨è¿ç±»ä»»å¡ä¸­æä¸ä¿çè¡¨ç°ãè¿äºç½ç»ä¸ä»å­¦ä¹ å°äº è¾å¥å°è¾åº çæ å°ï¼è¿å­¦ä¹ å°äºä¸ä¸ªç¨äºè®­ç»è¿ä¸ªæ å°ç loss functionãå¦å¤ï¼æä»¬è¯æäºï¼è¿ç§æ¹æ³å¨ä»¥ä¸ä»»å¡ä¸­é½æ¯åæææçï¼ä» (semantic) label maps åæç§çãä»å¾åè½®å»éæå®æ´å¾å½¢ãå¾åçè²ï¼ä»¥åå¶ä»çç±»ä¼¼ä»»å¡ãèä¸ï¼ä¸ç¨è¿è¡ parametersãloss function çè°æ´å°±å¯ä»¥è¾¾å°æ¯è¾åççç»æã\n\n\n# 1. introduction\n\nä½¿ç¨ cnns ä»¥åéå¯¹æ§è®¾è®¡ç lossï¼ä¹å¯ä»¥è¾¾å°ä¸éçææãä½æ¯è¿è¦æ±ç²¾å¿çè®¾è®¡æå¤±å½æ°ãå¦æç®åçä½¿ç¨è¾å¥ãè¾åºçæ¬§å¼è·ç¦»ä½ä¸ºæå¤±å½æ°ï¼ä¼å¤§æ¦çå¾å°æ¯è¾æ¨¡ç³çç»æï¼è¿æ¯å ä¸ºä¸ºäºä½¿æ¬§å¼è·ç¦»æå°åï¼ç½ç»ä¼æ´å¾åäºå°åççè¾åºå¹³ååï¼è¿ä¼é ææ¨¡ç³ã\n\nä¸è¬çï¼æä»¬ä¸äºä¸ä¸ç¥è¯æè½å¤è®¾è®¡åºåççæå¤±å½æ°ï¼ä»¥ä½¿å¾ cnns å¯ä»¥ææçæ¶æåºç¬¦åæä»¬é¢æçç»æã\n\nå¹¸è¿çäºï¼éè¿ gansï¼æä»¬å¯ä»¥æå®æ´é«çº¬åº¦çç®æ (å¦ï¼ä½¿è¾åºä¸ç°å®æ æ³åºå)ï¼å°±è½èªä¸»å­¦ä¹ åºéåäºæç¨æ°æ®ãææç®æ ç loss å½æ°ãä¹å°±æ¯è¯´ï¼gans å¯ä»¥éè¿ä½¿ç¨ä¸åçæ°æ®ï¼èªä¸»å­¦ä¹ å°æ»¡è¶³æä»¬éè¦çæå¤±å½æ°ãè¿å¨ä»¥åæ¯éè¦ä½¿ç¨ä¸åçæå¤±å½æ°æè½åå°çã\n\næ¬è®ºæçä¸»è¦è´¡ç®æï¼\n\n 1. cgans å¯ä»¥å¯¹å¤ç§ image-to-image é®é¢äº§çåççç»æ\n 2. æåºä¸ä¸ªç®åå¹¶ä¸è¶³ä»¥åå¾è¯å¥½çç»æçæ¡æ¶ï¼å¹¶åæå ç§éè¦çä½ç³»ç»æçææãcode is available\n\n\n# 2. related work\n\nstructured losses for image modeling éå¯¹ image-to-image è½¬æ¢é®é¢å»ºæ¨¡çæå¤±å½æ°ï¼éå¸¸è¢«è¡¨è¾¾æåç´ çº§(per-pixel)çåç±»æåå½æ¹ç¨å¼ãè¿äºæ¹ç¨å¼è®¤ä¸ºè§£ç©ºé´æ¯"unstructured"ï¼ä¹å°±æ¯è¯´æ¯ä¸ªè¾åºçpixelè¢«è®¤ä¸ºå¨æ¡ä»¶ä¸ç¬ç«äºç»å®è¾å¥å¾åçææå¶ä»åç´ ã\n\nç¸åï¼cgansä¼å­¦ä¹ ç»ææ§æå¤±ãç»æåçæå¤±ä¼æ©ç½è¾åºçèåéç½®ãçè®ºä¸ï¼cgansçæå¤±å½æ°å¯ä»¥å¯¹è¾å¥åè¾åºé´çä»»ä½ä¸åç»æè¿è¡æ©ç½ã\n\näºå®ä¸ï¼å¨æ­¤ä¹åå·²ç»æå¾å¤ä½¿ç¨ cganss æ¥è§£å³å¾åçæé®é¢ãæ¬æä¸ä»ä»¬çå ä¸ªä¸åçå°æ¹å¨äº generator å discriminator çæ¡æ¶éæ©ä¸ãæä»¬ççæå¨ä½¿ç¨ "u-net"-based æ¡æ¶ï¼è¯å¤å¨ä½¿ç¨äºå·ç§¯ç½ç»çåç¦»å¨ "patchgan"ï¼å®åªæ©ç½ patch è§æ¨¡çå¾åç»æï¼ã\n\n\n# 3. method\n\ngans are generative models that learn a mapping from random noise vector z to output image y, g : z â y [24]. in contrast, conditional gans learn a mapping from observed image x and random noise vector z, to y, g : {x, z} â y\n\n\n# 3.1 objective\n\n\n\nè¿ééè¦æ³¨æçæ¯ z æ¯å¿é¡»çãä»¥å¾ç cgans ä½¿ç¨å·²ç»æè¯å°è¿ç¹ï¼å¹¶ä¸éå¸¸éç¨ gaussian noise ä½ä¸º z æ¥å¾®è°è¾å¥ã\n\nå¨æåçå®éªä¸­ï¼æä»¬ä½¿ç¨äºè¿ç§ç­ç¥ï¼ä½æ²¡æææï¼çæå¨å¥½åå¿½ç¥äºè¿ä¸ªåªé³ãç¸åï¼å¯¹äºæç»æ¨¡åï¼æä»¬ä»ä»¥ dropout çå½¢å¼æä¾åªé³ï¼å¹¶åºç¨äº è®­ç»åæµè¯æ¶ççæå¨çå å±ã\n\nå°½ç®¡éç¨äº dropout åªå£°ï¼æä»¬è§å¯å°æä»¬çç½ç»è¾åºçéæºæ§ä¾ç¶å¾å°ãè®¾è®¡å¯äº§çæ´å¤§éæºæ§çæ¡ä»¶ganï¼ä»èæè·ä»ä»¬å»ºæ¨¡çæ¡ä»¶åå¸çå®å¨çµï¼æ¯å½åå·¥ä½æ¬èæªå³çéè¦é®é¢ã\n\n\n# 3.2 network architectures\n\n 1. generator with skips\n\nä¸ä¸ª image-to-image è½¬æ¢é®é¢çå®ä¹ç¹å¾æ¯ï¼ä»ä»¬å°é«åè¾¨ççè¾å¥ç½æ ¼æ å°å°é«åè¾¨ççè¾åºç½æ ¼ãæ­¤å¤ï¼å¯¹äºæä»¬èèçé®é¢ï¼è¾å¥åè¾åºçè¡¨é¢å¤è§ä¸åï¼ä½æ¯ä¸¤èæ¯ç¸ååºç¡ç»æçææå¾ãæä»¥ï¼è¾å¥ä¸è¾åºä¸­çç»ææ¯å¤§è´å¯¹é½çãæä»¬å´ç»è¿äºäºé¡¹æ¥è®¾è®¡çææ¶æã\n\nä¸äºä»¥åè§£å³è¿ç±»é®é¢çæ¹æ³æ¯ä½¿ç¨ encoder-decoder networkãè¿ç§ç½ç»è¦æ±ææçä¿¡æ¯æµéè¦éè¿ææçå±ï¼åæ¬ç¶é¢å±ãå¯¹äºè®¸å¤å¾åç¿»è¯é®é¢ï¼æå¾å¤åºå±ä¿¡æ¯å¨è¾å¥åè¾åºä¹é´å±äº«ï¼å°±æ¯è¯´ï¼å¸æå°è¿äºä¿¡æ¯ç´æ¥ç©¿æ¢­å¨ç½ç»ä¸ãä¾å¦ï¼å¨å¾åçè²çæåµä¸ï¼è¾å¥åè¾åºå±äº«æ¾èè¾¹ç¼çä½ç½®ï¼\n\nä¸ºäºç»çæå¨ä¸ç§é¿åæ­¤ç±»ä¿¡æ¯ç¶é¢çæ¹æ³ï¼æä»¬æç§â u-netâçä¸è¬å½¢ç¶æ·»å äºè·³è¿è¿æ¥ãå·ä½æ¥è¯´ï¼æä»¬å¨ç¬¬iå±åç¬¬n-iå±ä¹é´æ·»å è·³è¿è¿æ¥ï¼å¶ä¸­næ¯å±çæ»æ°ãæ¯ä¸ªè·³è¿è¿æ¥ä»å°ç¬¬iå±åç¬¬n-iå±çææééè¿æ¥å¨ä¸èµ·ã\n\n 2. markovian discriminator (patchgan)\n\nä¼æå¨ç¥ï¼l2 å l1 loss å¨å¾åçæä»»å¡ä¸­ä¼äº§çæ¨¡ç³ç»æãå°½ç®¡è¿äºæå¤±å¹¶ä¸è½é¼å±é«é¢çæ¸æ°åº¦ï¼å°½ç®¡å¦æ­¤ï¼å®ä»¬å¨è®¸å¤æåµä¸ä»è½åç¡®æè·ä½é¢ä¿¡æ¯ãå¯¹äºè¿éçé®é¢ï¼ç¡®å®æ¯è¿æ ·ï¼æä»¬ä¸éè¦å¨æ°çæ¡æ¶æ¥å¼ºåä½é¢ä¿¡æ¯çæ­£ç¡®æ§ï¼l1 å·²ç»åäºã\n\nä¾é  l1 æ¥å¼ºå¶ä½é¢æ­£ç¡®æ§ï¼è¿ä¿ä½¿å° gan å¤å«å¨éå¶ä¸ºä»å¯¹é«é¢ç»æä¿¡æ¯è¿è¡å»ºæ¨¡ãä¸ºäºå¯¹é«é¢ä¿¡æ¯å»ºæ¨¡ï¼å°æ³¨æåéä¸­å¨æ¬å°å¾å patch ä¸­çç»æå°±è¶³å¤äºãå æ­¤ï¼æä»¬è®¾è®¡äºè¢«ç§°ä¸º patchgan çå¤å«æ¶æï¼å®ä»å¯¹ patch è§æ¨¡çç»æè¿è¡æ©ç½ãè¿ä¸ªå¤å«å¨å°è¯å»åç±»å¾åä¸­ç n * n ä¸ª patch æ¯çæ¯åãæä»¬å¯¹è¯¥å¾åè¿è¡å·ç§¯è¿ç®ï¼å¯¹ææååºæ±å¹³åå¼ä»¥æä¾ d çæç»è¾åºã\n\nä¸æä¸­ï¼æä»¬è¯æäºï¼n å¯ä»¥æ¯å¾åå°å¾å¤ï¼ä¹ä¾ç¶å¯ä»¥çæé«è´¨éçç»æãè¿æ¯æå©çï¼å ä¸ºè¾å°ç patchgan å·æè¾å°çåæ°ï¼è¿è¡éåº¦æ´å¿«ï¼å¹¶ä¸å¯ä»¥éç¨äºä»»æå¤§å¾åãè¿æ ·çé´å«å¨å¯ä»¥ææå°å°å¾åå»ºæ¨¡ä¸ºé©¬å°å¯å¤«éæºåºï¼åè®¾åç´ ä¹é´çç¬ç«æ§ç¸å·®å¤§äº patch ç´å¾ã\n\n\n# 3.3 optimization and inference\n\näºä¼åæä»¬çç½ç»ï¼æä»¬éµå¾ª gan ä¸­çæ åæ¹æ³ï¼å¨ d çä¸ä¸ªæ¢¯åº¦ä¸éæ­¥éª¤ä¸ g çä¸ä¸ªæ­¥éª¤ä¹é´äº¤æ¿ãå¦åå§ gan è®ºæå»ºè®®çé£æ ·ï¼ä¸æ¯è®­ç» g ä»¥ä½¿ log(1 â d(xï¼g(xï¼z)) æå°åï¼èæ¯è®­ç»ä»¥æå¤§å log(d(xï¼g(xï¼z))ãæ­¤å¤ï¼æä»¬å¨ä¼å d çåæ¶å°ç®æ é¤ä»¥2ï¼è¿ä¼éä½ d ç¸å¯¹äº g çå­¦ä¹ çãæä»¬ä½¿ç¨ minibatch sgd å åºç¨ adam æ±è§£å¨ï¼æå®åæ°ï¼å­¦ä¹ ç=0.0002ãÎ²1=0.5, Î²2=0.999ã\n\nå¨æ¨çæ¶ï¼æä»¬ä»¥åè®­ç»é¶æ®µå®å¨ç¸åçæ¹å¼è¿è¡ çæå¨ç½ç»ãè¿åéå¸¸çåè®®ä¸å¤ªä¸æ ·ï¼å¨æµè¯é¶æ®µï¼æä»¬ä½¿ç¨äº dropout ä¸è®­ç»é¶æ®µç¸åçæ¹å¼ï¼å¹¶ä¸æä»¬ä½¿ç¨æµè¯ batch çç»è®¡ä¿¡æ¯è¿è¡ batch normalizationï¼èä¸æ¯è®­ç»æ¹æ¬¡çæ±æ»ç»è®¡ä¿¡æ¯ãè¿ç§æ¹æ³è¿è¡ batch normalization æ¶ï¼è®¾ç½® batch size ä¸º 1 æ¶è¢«ç§°ä¸ºâå®ä¾å½ä¸åâï¼å¹¶å·²è¯æå¨å¾åçæä»»å¡ä¸­ææãå¨æä»¬çå®éªä¸­ï¼æä»¬ä½¿ç¨ batch size ä»äº1å°10ä¹é´ï¼å·ä½åå³äºå®éªã\n\n\n# 4. experiments\n\nä¸ºäºæ¢ç´¢ cgans çæ®éæ§ï¼æä»¬å¨åç§ä»»å¡åæ°æ®éä¸æµè¯äºè¿ç§æ¹æ³ï¼åæ¬ å¾å½¢ä»»å¡ï¼ä¾å¦ç§ççæï¼åè§è§ä»»å¡ï¼ä¾å¦è¯­ä¹åå²ï¼\n\n 1. semantic labels â photoo, trained on the cityscapes dataset\n 2. architectural labels â photo, trained on cmp facades\n 3. mapâaerial photo, trained on data scraped from google maps\n 4. bw â color photos\n 5. edges â photo\n 6. sketch â photo\n 7. day â night\n 8. thermal â color photos\n 9. photo with missing pixels â inpainted photo\n\n\n# 4.2 analysis of the objective function\n\nå¨ final objective ä¸­ï¼åªé¨åæ¯è¾éè¦å¢ï¼æä»¬è¿è¡æ¶èç ç©¶æ¥éç¦» l1 ãgan é¡¹çå½±åï¼ä»¥æ¯è¾ cgan å gan åå«ä½ç¨å¨è¾å¥ä¸çææã\n\nè®ºæä¸­ç figure 4 æ¾ç¤ºäºè¿äºååå¨ two labels â photo é®é¢ä¸çå®æ§å½±åï¼\n\n * ä»l1ä¼å¯¼è´åçä½æ¨¡ç³çç»æ\n * åç¬ä½¿ç¨cganï¼å° Î»=0ï¼ç»åºäºæ´æ¸æ°çç»æï¼ä½å¨æäºåºç¨ç¨åºä¸å¼å¥äºè§è§ççµ\n * å°ä¸¤ä¸ªé¨åå å¨ä¸èµ·ï¼Î»= 100ï¼åå°äºè¿äºä¼ªå\n\nä½¿ç¨ fcn-score éåè¿äºå¨ cityscapes labels â photo ä»»å¡ä¸­çè§å¯ç ç©¶(è®ºæ table 1)ï¼\n\n * åºäº gan çç®æ ä»»å¡å¾åæ´é«ï¼ä¹å°±æ¯è¯´ åæçå¾ååå«æ´å¤çå¯è¯å«ç»æ\n * å¨è¡¡éè¾å¥åè¾åºå¹éåº¦çæå¤±å½æ°ä¸ï¼cgan è¡¨ç°çè¦æ¯ gan å¥½çå¤ã\n   * æä»¬æµè¯äºä» final objective ä¸­å»æ conditioning é¨åçå½±åï¼åç°ï¼æ­¤æ¶çæå¤±å½æ°ä¸ä¼æ©ç½è¾å¥åè¾åºä¹é´çä¸å¹éï¼åªå³å¿æ¯å¦è¾åºçèµ·æ¥å¾çå®ãæ£æ¥ç»æè¡¨æï¼çæå¨å´©æºäºï¼ä¸ç®¡è¾å¥çç§çå¦ä½é½äº§çäºå ä¹å®å¨ç¸åçè¾åºã\n * å¦å¤ï¼æ·»å  l1 é¡¹ä¹ä¼é¼å± è¾åºå°éè¾å¥ï¼å ä¸º l1 æå¤±ä¼å¯¹æ­£ç¡®å¹éè¾å¥ç ground truth è¾åºä¸å¯è½ä¸æ­£ç¡®çåæè¾åºä¹é´çè·ç¦»è¿è¡æ©ç½ã\n * ç¸åºå°ï¼l1 + gan å¨åå»ºå°éè¾å¥æ ç­¾å¾çé¼çæ¸²ææ¶ä¹æ¯ææçãç»åææé¡¹ï¼l1 + cgan æ§è¡çåæ ·çå¥½ã\n\ncolorfulness cgans çä¸ä¸ªå¼äººæ³¨ç®çå½±åå°±æ¯ å®ä¼äº§ç sharp imagesï¼å¹»æ³åºçå³ä½¿å¨è¾å¥æ ç­¾å¾ä¸­ä¸å­å¨çç©ºé´ç»æãæäººå°±å¼å§æ³è±¡ cgans å¨åè°±çº¬åº¦ä¹æç±»ä¼¼çâéåâä½ç¨ï¼ä¾å¦ï¼ä½¿å¾å¾åå·ææ´å ä¸°å¯çè²å½©ãå°±å l1 å¨ä¸è½ç²¾ç¡®å®ä½è¾¹ç¼çä½ç½®æ¶ä¼æ¿åæ¨¡ç³ä¸æ ·ï¼å®ä¹ä¼å¨ä¸ç¡®å®åç´ åºéç¨å ç§å¯è½çé¢è²å¼ä¸­çåªç§æ¶æ¿å±é¢è²ä¸ºå¹³åç°è²ãç¹å«æ¯ï¼éè¿å¨å¯è½çé¢è²ä¸éæ©æ¡ä»¶æ¦çå¯åº¦å½æ°çä¸­å¼ï¼å¯ä»¥ä½¿l1æå°ãå¦ä¸æ¹é¢ï¼å¯¹ææ§æå¤±ååä¸å¯ä»¥åæè½å¤æè¯å°ç°è²è¾åºæ¯ä¸ç°å®çï¼å¹¶é¼å±å¹éçå®çé¢è²åå¸ã\n\n\n# 4.3 analysis of the generator architecture\n\nu-net æ¶æåè®¸ä½ç»´åº¦ä¿¡æ¯å¿«æ·çç©¿è¶ç½ç»ï¼è¿ä¼å¸¦æ¥æ´å¥½çç»æåï¼éè¿å¯¹æ¯ u-net å encoder-decoder(ç®åçç§»é¤ u-net ä¸­ç skip connections å½¢æ) å¨ cityscape generation ä»»å¡ä¸çè¡¨ç°ï¼æä»¬äºè§£å°ï¼\n\n 1. å¨æä»¬çå®éªä¸­ï¼encoder-decoder æ æ³å­¦ä¹ çæé¼ççå¾å\n 2. u-net ä¸ä»å¨ä½¿ç¨ cgans æ¶ ä¼äº encoder-decoderï¼å¨ä½¿ç¨ l1 loss æ¶ï¼ä¹ææ´å ä¼è¶çç»æ\n\n\n# 4.4 from pixelgans to patchgans to imagegans\n\næä»¬æµè¯äºæ¹åé´å«å¨æåéç patch size n çåç§ææï¼ä» 1Ã1 ç âpixelganâ å° 286Ã286 çæ´å¾ "imagegan"ã\n\npixelgan å¯¹ç©ºé´æ¸æ°åº¦æ²¡æç¹å«çå½±åï¼ä½æ¯å¯ä»¥å¢å ç»æçè²å½©ãé¢è²ç´æ¹å¾å¹éæ¯ä¸ä¸ªå¾åå¤çé¢åå¸¸è§çé®é¢ï¼ä¹è®¸ pixelgan ä¼æ¯ä¸ä¸ªææ½åçè½»éåè§£å³æ¹æ¡ã\n\nä½¿ç¨ 16Ã16 patchgan è¶³ä»¥ä¿è¿éå©çè¾åºï¼å¹¶è·å¾è¯å¥½çfcnå¾åï¼ä½ä¹å¯¼è´ tiling artifactsã70Ã70 patchgan ç¼è§£äºè¿äºé®é¢å¹¶è·å¾æ´å¥½çåæ°ãç¼©æ¾å°è¶åºè¿ä¸ªèå´ï¼å°å®æ´ç 286Ã286 imageganï¼ä¼¼ä¹å¹¶æ²¡ææ¹åç»æçè§è§è´¨éï¼å¹¶ä¸ï¼äºå®ä¸å¾å°äºç¸å¯¹ä½çå¤çåæ°ãè¿ä¹è®¸æ¯å ä¸º imagegan æ¯ 70 Ã 70 patchgan ææ´å¤çåæ°åæ´å¤§çæ·±åº¦ï¼ä»èæ´å é¾ä»¥è®­ç»é æçã\n\nfully-convolutional translation patchgan çä¼å¿æ¯åºå® patch å¤§å°çå¤å«å¨å¯ä»¥éç¨äºä»»æå¤§çå¾åãæä»¬ä¹å¯ä»¥å°çæå¨å·ç§¯çåºç¨äºæ¯è®­ç»ç¨çå¾åæ´å¤§çå¾åä¸ãæä»¬å¨ map â aerial ä»»å¡ä¸æµè¯äºè¿ç§åæ³ãæä»¬å¨ 512Ã512 çå¾çä¸æµè¯äºç¨ 256Ã256 çå¾åè®­ç»å¾å°ççæå¨ï¼ææå¨ è®ºæç figure 8 ä¸­å¯ä»¥çåºææè¿æ¯ä¸ä¿çã\n\n\n# 4.5 perceptual validation\n\næä»¬å¨ mapâaerial å grayscaleâcolor ä»»å¡ä¸éªè¯äºç»æç perceptual realismï¼ææ§ç°å®ä¸»ä¹ï¼ï¼ï¼ï¼ãç¨å¿æ¿èæ¥æµè¯çæçç»æï¼çæ¯å¦è½å¤éªè¿å¿æ¿èï¼ä¸è¬æåµä¸ï¼æä»¬çæ¹æ³(ä½¿ç¨ l1+cgans)ææ´å ä¼è¶çè¡¨ç°ï¼é¤éå«çæ¹æ³æ¯éå¯¹ç¹å®é®é¢è¿è¡äºä¸é¨è®¾è®¡ãä¼åã\n\n\n# 4.6 semantic segmentation\n\nææ¡ä»¶ç gan ä¼¼ä¹å¯ä»¥ææè§£å³è¾åºé«åº¦ç»èåææå½±ç±»çé®é¢ï¼è¿å¨å¾åå¤çåå¾å½¢ä»»å¡ä¸­å¾å¸¸è§ãé£ä¹å¨è§è§é®é¢ï¼å¦è¯­ä¹åå²ï¼ä¸çè¡¨ç°å¦ä½å¢ï¼è¿ç±»é®é¢çç¹ç¹æ¯ï¼è¾å¥æ¯è¾åºæ´å¤æã\n\nä¸ºäºå¼å§å¯¹æ­¤è¿è¡æµè¯ï¼æä»¬è®­ç»äºä¸ä¸ª cganï¼å¸¦/ä¸å¸¦ l1 æå¤±ï¼ç¨äº cityscape photoâlabels ä»»å¡ãè®ºæ figure 10 æ¾ç¤ºäºå®æ§ç»æï¼åç±»åç¡®æ§çå®éæ¥åå¨è®ºæ table 6 ä¸­ãæè¶£çæ¯ï¼è®­ç»åºçä¸å¸¦ l1 æå¤±ç cgan è½å¤å¨åçç¨åº¦çåç¡®æ§ä¸è§£å³è¿ä¸ªé®é¢ãæ®æä»¬æç¥ï¼è¿æ¯ gan æåçæâæ ç­¾âçé¦æ¬¡æ¼ç¤ºï¼è¿äº"æ ç­¾"æ¯å·æè¿ç»­ååä¸å ä¹ç¦»æ£çå¼ï¼èä¸æ¯âå¾åâãå°½ç®¡ cgan åå¾äºä¸äºæåï¼ä½ä»ä»¬è¿è¿ä¸æ¯è§£å³ä¸é¢è¿ä¸ªé®é¢çæä½³æ¹æ³ï¼å¦è®ºæ table 6 æç¤ºï¼ä»ä½¿ç¨ l1 åå½å¯ä»¥è·å¾æ¯ cgan æ´å¥½çåæ°ãæä»¬è®¤ä¸ºï¼å¯¹äºè§è§é®é¢ï¼ç®æ ï¼å³é¢æµæ¥è¿ ground truth çäº§åºï¼å¯è½ä¸å¦å¾å½¢ä»»å¡é£ä¹å«ç³ï¼å l1 è¿æ ·çéå»ºæå¤±å°±è¶³å¤äº\n\n\n# 4.7. community-driven research\n\nèªä»æååå¸è®ºæåæä»¬ç pix2pix ä»£ç ï¼twitterç¤¾åºï¼åæ¬è®¡ç®æºè§è§åå¾å½¢ä»ä¸äººåä»¥åè§è§èºæ¯å®¶ï¼é½ææåå°å°æä»¬çæ¡æ¶åºç¨äºåç§æ°é¢çå¾åå°å¾åçç¿»è¯ä»»å¡ï¼è¿è¿è¶åºäºåå§è®ºæãå°½ç®¡æäºæ¯åºäº pix2pix è¿è¡äºä¿®æ¹ï¼ä½æ¯ï¼ä»ä»¬è¯æäºæä»¬çæ¹æ³ä½ä¸º image-to-image è½¬æ¢é®é¢çä¸ç§éç¨çååå·¥å·çåæ¯ã\n\n\n# 5. conclusion\n\næ¬æçç»æè¡¨æï¼æ¡ä»¶å¯¹æç½ç»æ¯è®¸å¤ image-to-image è½¬æ¢ä»»å¡çæåéçæ¹æ³ï¼ç¹å«æ¯é£äºæ¶åé«åº¦ç»æåå¾å½¢è¾åºçä»»å¡ãè¿äºç½ç»å¯ä»¥å­¦å°éåºäºæå¤´çä»»å¡åæ°æ®ç lossï¼è¿å°±è®©è¿äºç½ç»å¯ä»¥éç¨äºåç§åæ ·çè®¾ç½®ã\n\n----------------------------------------\n\n\n# deconvolution and checkerboard artifacts\n\n> paper: deconvolution and checkerboard artifacts\n\n\n# abstract\n\nå½æä»¬éå¸¸ä»ç»å°è§å¯ç±ç¥ç»ç½ç»çæçå¾åæ¶ï¼æä»¬ç»å¸¸ä¼çå°ä¸ç§å¥æªçæ£çç¶ä¼ªåå¾æ¡ãè¿ç§ç°è±¡å¨ä¸äºæ¨¡åä¸­å°¤ä¸ºææ¾ï¼ä½æ¯æè¿çæ¨¡åä¸­æå¾å¤§ä¸é¨åé½è¡¨ç°åºäºè¿ç§è¡ä¸ºã\n\né¾ä»¥çè§£çæ¯ï¼æ£çæ ¼å¾æ¡å¨è²å½©æµççå¾åä¸­å¾å¾æä¸ºçªåºãè¿æ¯æä¹åäºï¼ç¥ç»ç½ç»è®¨åé²è³çè²å½©åï¼è¿äºä¼ªåçå®éåå å®éä¸éå¸¸ç®åï¼è¿æ¯é¿åå®ä»¬çæ¹æ³ã\n\n\n# deconvolution & overlap\n\nå½æä»¬è®©ç¥ç»ç½ç»çæå¾åæ¶ï¼æä»¬éå¸¸ä¼æ ¹æ®ä½åè¾¨çï¼é«æ°´å¹³çæè¿°æ¥æå»ºå®ä»¬ãè¿ä½¿ç½ç»å¯ä»¥æè¿°ç²ç³å¾åï¼ç¶åå¡«åç»èä¿¡æ¯ã\n\nä¸ºäºåå°è¿ä¸ç¹ï¼æä»¬éè¦æç§æ¹æ³å°ä½åè¾¨ççå¾åè½¬æ¢æé«åè¾¨ççå¾åãéå¸¸ï¼æä»¬éè¿ deconvolution æä½æ¥æ§è¡æ­¤æä½ãç²ç¥å°è®²ï¼deconvolution å±åè®¸æ¨¡åä½¿ç¨å°å¾åä¸­çæ¯ä¸ªç¹æ¥âç»å¶âè¾å¤§å¾åä¸­çæ­£æ¹å½¢ã\n\nï¼åå·ç§¯å·æå¤ç§è§£éåä¸åçåç§°ï¼åæ¬âè½¬ç½®å·ç§¯âãä¸ºç®æ´èµ·è§ï¼æä»¬å¨æ¬æä¸­ä½¿ç¨âåå·ç§¯âè¿ä¸ªåç§°ãï¼\n\nä¸å¹¸çæ¯ï¼åå·ç§¯å¾å®¹æåºç°âä¸ååçéå âï¼å¨æäºå°æ¹æ¯å¨å¶ä»å°æ¹æ¾ç½®æ´å¤çéå»ç»ç»ãç¹å«æ¯ï¼å½åæ ¸å¤§å°ï¼è¾åºçªå£å¤§å°ï¼æ æ³è¢«æ­¥å¹ï¼é¡¶é¨åç¹ä¹é´çé´è·ï¼æ´é¤æ¶ï¼åå·ç§¯å·æä¸ååçéå ãå°½ç®¡ååä¸ç½ç»å¯ä»¥ä»ç»å°å­¦ä¹ æéæ¥é¿åè¿ç§æåµï¼æä»¬å°å¨åé¢è¯¦ç»è®¨è®ºï¼ï¼ä½å®éä¸ç¥ç»ç½ç»å´å¨åªåé¿åè¿ç§æåµã\n\néå å¾æ¡ä¹ä»¥äºç»´å½¢å¼å½¢æãä¸¤æ ¹è½´ä¸çä¸ååéå é¨åä¼ç¸äºå å ï¼ä»èå½¢æä¸ä¸ªååå¹åº¦å¤§çæ£çç¶ç¹å¾å¾æ¡ã\n\nå®éä¸ï¼ä¸ååçéå å¨äºç»´ä¸å¾å¾æ´å æç«¯ï¼å ä¸ºä¸¤ä¸ªå¾æ¡ç¸ä¹å¨ä¸èµ·ï¼æä»¥ä¸åååº¦å¹³æ¹ãä¾å¦ï¼å¨ä¸ç»´ä¸­ï¼æ­¥å¹2ï¼å¤§å°3çåå·ç§¯å·æä¸äºè¾åºï¼å¶è¾å¥æ°éæ¯å¶ä»è¾å¥çä¸¤åï¼ä½æ¯å¨äºç»´ä¸­ï¼è¿åæååä¹ä¸ã\n\nç°å¨ï¼ç¥ç»ç½ç»å¨åå»ºå¾åæ¶éå¸¸ä½¿ç¨å¤å±åå·ç§¯ï¼ä»ä¸ç³»åè¾ä½åè¾¨ççæè¿°ä¸­è¿­ä»£æå»ºè¾å¤§çå¾åãè¿äºå å çåå·ç§¯å¯è½ä¼æ¶é¤ä¼ªå½±ï¼ä½å®ä»¬éå¸¸ä¼å¤åï¼ä»èå¨åç§è§æ¨¡ä¸åå»ºä¼ªå½±ã\n\næ­¥å¹1åå·ç§¯-å¨æåæ¨¡åä¸­éå¸¸è¢«è§ä¸ºæåä¸å± - å¨æå¶ä¼ªåæ¹é¢éå¸¸ææãä»ä»¬å¯ä»¥å é¤ååå¶å¤§å°çé¢çä¼ªåï¼å¹¶åå°å¶ä»é¢çå°äºå¶å¤§å°çä¼ªåãä½æ¯ï¼æ­£å¦è®¸å¤ææ°æ¨¡åä¸­æçå°çé£æ ·ï¼ä¼ªå½±ä»å¯è½æ³æ¼åºå»ã\n\né¤äºæä»¬ä¸é¢è§å¯å°çç±»ä¼¼äºé«é¢æ£çæ ¼çä¼ªåå¤ï¼æ©æçåå·ç§¯è¿å¯ä»¥åå»ºä½é¢ä¼ªåï¼æä»¬å°å¨åé¢å¯¹æ­¤è¿è¡è¯¦ç»ä»ç»ã\n\nå½è¾åºä¸å¯»å¸¸çé¢è²æ¶ï¼è¿äºä¼ªåå¾å¾æçªåºãç±äºç¥ç»ç½ç»å±éå¸¸ä¼æåå·®ï¼å°å­¦ä¹ å¼æ·»å å°è¾åºä¸­ï¼ï¼å æ­¤å¾å®¹æè¾åºå¹³åé¢è²ãé¢è²ï¼å¦äº®çº¢è²ï¼ä¸å¹³åé¢è²çè·ç¦»è¶è¿ï¼åå·ç§¯å°±éè¦è´¡ç®è¶å¤ã\n\n\n# overlap & learning\n\nç¨ä¸ååçéå æ¥æèäºç©æ¯ä¸ç§è½ç¶ç®ååä½æç¨çæ¡æ¶æ¹æ³ãä¸ç®¡å¥½åï¼æä»¬çæ¨¡åé½ä¸ºå®ä»¬çåå·ç§¯å­¦ä¹ æéã\n\nä»çè®ºä¸è®²ï¼æä»¬çæ¨¡åå¯ä»¥å­¦ä¹ ä»ç»å°åå°ä¸ååéå çä½ç½®ï¼ä»èä½¿è¾åºååå¹³è¡¡ã\n\nè¿æ¯ä¸é¡¹æ£æçå¹³è¡¡æä½ï¼å°¤å¶æ¯å½æå¤ä¸ªééäº¤äºæ¶ãé¿åä¼ªåä¼æ¾çéå¶å¯è½çè¿æ»¤å¨ï¼ä»èçºç²æ¨¡åå®¹éãå¨å®è·µä¸­ï¼ç¥ç»ç½ç»åªåå­¦ä¹ å®å¨é¿åè¿äºæ¨¡å¼ã\n\nå®éä¸ï¼ä¸ä»éå ä¸ååçæ¨¡åä¸è½é¿åè¿ç§æåµï¼èä¸éå ååçæ¨¡åç»å¸¸å­¦ä¹ å°å¯¼è´ç¸ä¼¼ä¼ªåçåæ ¸ï¼å°½ç®¡è¿ä¸æ¯ååéå æ¹å¼çé»è®¤è¡ä¸ºï¼ä½å³ä½¿éå åå·ç§¯ä¹ä»ç¶å¾å®¹æä¼å¯¼è´ä¼ªåã\n\nå®å¨é¿åä¼ªåä»ç¶æ¯å¯¹è¿æ»¤å¨çéè¦éå¶ï¼å¹¶ä¸å¨å®è·µä¸­ï¼ä¼ªåä»ç¶å­å¨äºè¿äºæ¨¡åä¸­ï¼å°½ç®¡å®ä»¬çèµ·æ¥è¾ä¸ºæ¸©åã\n\nè¿éå¯è½æå¾å¤å ç´ å¨èµ·ä½ç¨ãä¾å¦ï¼å¨çæå¯¹æç½ç»ï¼ganï¼çæåµä¸ï¼ä¸ä¸ªé®é¢å¯è½æ¯é´å«å¨åå¶æ¢¯åº¦ï¼æä»¬å°å¨åé¢åè®¨è®ºï¼ãä½æ¯é®é¢çå¾å¤§ä¸é¨åä¼¼ä¹æ¯åå·ç§¯ãæå¥½è¯´ï¼åå·ç§¯æ¯èå¼±çï¼å ä¸ºå³ä½¿å¾ä»ç»å°éæ©å¤§å°ï¼åå·ç§¯ä¹å¾å®¹æä»£è¡¨ä¼ªååå»ºå½æ°ãæç³ç³çæ¯ï¼åå»ºä¼ªåæ¯åå·ç§¯çé»è®¤è¡ä¸ºã\n\næ¯å¦æå¶ä»æ¹æ³å¯ä»¥å¯¹ä¼ªåå·ææ´é«çæµæåï¼\n\n\n# better upsampling\n\nä¸ºé¿åè¿äºä¼ªåï¼æä»¬å¸æä½¿ç¨ regular deconvolutionï¼âè½¬ç½®å·ç§¯âï¼çæ¿ä»£æ¹æ³ãä¸åå·ç§¯ä¸åï¼è¿ç§åä¸éæ ·çæ¹æ³ä¸åºå°ä¼ªåä½ä¸ºå¶é»è®¤è¡ä¸ºãçæ³æåµä¸ï¼å®ä¼èµ°å¾æ´è¿ï¼å¹¶ä¸ååäºæ­¤ç±»å·¥ä»¶ã\n\nä¸ç§æ¹æ³æ¯ç¡®ä¿æ¨ä½¿ç¨çåæ ¸å¤§å°è¢«æ­¥å¹é¤å°½ï¼ä»èé¿åäºéå é®é¢ãè¿ç­æäºâäºåç´ å·ç§¯âï¼è¯¥ææ¯æè¿å¨å¾åè¶åè¾¨çæ¹é¢è·å¾äºæåãä½æ¯ï¼å°½ç®¡è¿ç§æ¹æ³ææå¸®å©ï¼ä½æ¯åå·ç§¯ä»ç¶å¾å®¹æé·å¥åå»ºä¼ªåçè¿ç¨ä¸­ã\n\nå¦ä¸ç§æ¹æ³æ¯ä»å·ç§¯å°è®¡ç®ç¹å¾ä¸­åç¦»åºè¾é«åè¾¨ççä¸éæ ·ãä¾å¦ï¼æ¨å¯ä»¥è°æ´å¾åå¤§å°ï¼ä½¿ç¨æè¿é»æå¼æåçº¿æ§æå¼ï¼ï¼ç¶åè¿è¡å·ç§¯å±ãè¿ä¼¼ä¹æ¯ä¸ç§èªç¶çæ¹æ³ï¼å¹¶ä¸å¤§è´ç±»ä¼¼çæ¹æ³å¨å¾åè¶åè¾¨çä¸­ææå¾å¥½ã\n\nè§£å·ç§¯åä¸åçå¤§å°è°æ´å·ç§¯æ¹æ³é½æ¯çº¿æ§è¿ç®ï¼å¯ä»¥è§£éä¸ºç©éµãè¿æ¯æ¥çå®ä»¬ä¹é´å·®å¼çæç¨æ¹æ³ãåå·ç§¯å¨æ¯ä¸ªè¾åºçªå£é½æå¯ä¸çæ¡ç®ï¼èresize-convolutionåéå«äºæéç»å®ï¼ä»¥é»æ­¢é«é¢ä¼ªåã\n\næä»¬æ¾ç»ä½¿ç¨æè¿é»æå¼æ³åå¾äºæå¥½çç»æï¼åæ¶å¨ä½¿åçº¿æ§è°æ´å¤§å°çå·¥ä½ä¸­éå°äºå°é¾ãè¿å¯è½ä»æå³çï¼å¯¹äºæä»¬çæ¨¡åï¼æè¿é»å±æ°å¥½ä¸éå¯¹åå·ç§¯ä¼åçè¶åæ°éåä½¿ç¨ãè¿å¯è½æåºäºå¤©ççä½¿ç¨åçº¿æ§æå¼å¯è½ä¼éå°æ£æçé®é¢ï¼å ä¸ºå®è¿äºå¼ºçå°æµæäºé«é¢å¾åç¹å¾ãæä»¬ä¸è®¤ä¸ºè¿ä¸¤ç§æ¹æ³é½æ¯ä¸éæ ·çæç»è§£å³æ¹æ¡ï¼ä½å®ä»¬ç¡®å®å¯ä»¥ä¿®å¤æ£çç¶å·¥ä»¶ã\n\n\n# image generation results\n\næä»¬çç»éªæ¯ï¼å¨å¤ç§æåµä¸ï¼æè¿é»è°æ´å¤§å°ååè¿è¡å·ç§¯ææéå¸¸å¥½ãæä»¬åç°è¿ç§æ¹æ³å¯ä¸ºæ¨æä¾å¸®å©çä¸ä¸ªä¾å­æ¯âçæå¯¹æç½ç»âãç®åå°å°æ ååå·ç§¯å±åæ¢ä¸ºæè¿é»è°æ´å¤§å°ï¼ç¶ååè¿è¡å·ç§¯ï¼å°å¯¼è´ä¸åé¢ççä¼ªåæ¶å¤±ã\n\näºå®ä¸ï¼å¨è¿è¡ä»»ä½è®­ç»ä¹åå°±å¯ä»¥çå°ä¼ªåçå·®å¼ãå¦ææä»¬ä½¿ç¨éæºæéå¯¹å¶è¿è¡äºåå§åï¼å¹¶æ¥ççæå¨çæçå¾åï¼é£ä¹æä»¬å·²ç»å¯ä»¥çå°è¿äºä¼ªåï¼\n\nè¿è¡¨æä¼ªåæ¯ç±äºè¿ç§çæå¾åçæ¹æ³ï¼èä¸æ¯å¯¹æè®­ç»ãï¼è¿ä¹è¡¨ææä»¬å¯ä»¥å¨æ²¡ææ¢éè®­ç»æ¨¡ååé¦å¨æçæåµä¸ï¼å­¦ä¹ å°å¾å¤å¥½ççæå¨è®¾è®¡ãï¼\n\nç¸ä¿¡è¿äºä¼ªå½±ä¸æ¯ganç¹æçå¦ä¸ä¸ªåå æ¯ï¼æä»¬å¨å¶ä»ç±»åçæ¨¡åä¸­çå°äºå®ä»¬ï¼å¹¶ä¸åç°å½æä»¬åæ¢å°è°æ´å¤§å°å·ç§¯ä¸éæ ·æ¶ï¼å®ä»¬ä¹ä¼æ¶å¤±ãä¾å¦ï¼èèå®æ¶èºæ¯é£æ ¼è½¬ç§»ï¼å¶ä¸­è®­ç»ç¥ç»ç½ç»ç´æ¥çææ ·å¼è½¬ç§»çå¾åãæä»¬åç°å®ä»¬å¾å®¹æåå°æ£çä¼ªåçå½±åï¼å°¤å¶æ¯å¨ææ¬å¹¶æªæç¡®æµå¶å®ä»¬çæåµä¸ï¼ãä½æ¯ï¼å°åå·ç§¯å±åæ¢ä¸ºè°æ´å¤§å°å·ç§¯å±ä¼ä½¿ä¼ªåæ¶å¤±ã\n\ngoogle brainå¢éå³å°åè¡¨çè®ºæå°å¨æ´å¨é¢çå®éªåææ°ç»æä¸­è¯æè¯¥ææ¯çä¼å¿ã ï¼æä»¬éæ©åç¬ä»ç»æ­¤ææ¯ï¼æ¯å ä¸ºæä»¬è®¤ä¸ºå®å¼å¾è¿è¡æ´è¯¦ç»çè®¨è®ºï¼å¹¶ä¸æ¶åå¤ç¯è®ºæãï¼\n\n\n# artifacts in gradients\n\næ¯å½æä»¬è®¡ç®å·ç§¯å±çæ¢¯åº¦æ¶ï¼æä»¬é½ä¼å¨ååéåä¸è¿è¡åå·ç§¯ï¼transposed convolutionï¼ãå°±åæä»¬ä½¿ç¨åå·ç§¯çæå¾åæ¶ä¸æ ·ï¼è¿ä¼å¯¼è´æ¸åä¸­çæ£çæ ¼å¾æ¡ã\n\nç¹å¾å¯è§åç¤¾åºå·²ç»ç¥éå¾åæ¨¡åæ¢¯åº¦ä¸­å­å¨é«é¢âåªå£°âï¼è¿æ¯ä¸ä¸ªéå¤§ææãä»¥æç§æ¹å¼ï¼ç¹å¾å¯è§åæ¹æ³å¿é¡»è¡¥å¿è¿ç§åªå£°ã\n\nä¾å¦ï¼deepdream ä¼¼ä¹ä»¥å¤ç§æ¹å¼å¼èµ·ä¼ªå½±ä¹é´çç ´åæ§å¹²æ°ï¼ä¾å¦åæ¶ä¼åè®¸å¤åè½ï¼ä»¥åå¨è®¸å¤åç§»åæ¯ä¾ä¸è¿è¡ä¼åãç¹å«æ¯ï¼å¨ä¸ååç§»éå¤è¿è¡ä¼åçâæå¨âæ¶é¤äºä¸äºæ£çä¼ªåã ï¼å°½ç®¡æäºä¼ªåæ¯æä»¬çæ åæ£çæ ¼å¾æ¡ï¼èå¶ä»ä¼ªåæ¯ç»ç»æ§è¾å·®çé«é¢å¾æ¡ãæä»¬è®¤ä¸ºï¼è¿äºæ¯ç±æå¤§åå¹¶å¼èµ·çãæå¤§åå¹¶ä»¥åä¸geodesics of learned representationsä¸­çé«é¢ä¼ªåç¸å³èãï¼\n\nç¹å¾å¯è§åçææ°å·¥ä½ï¼ä¾å¦deepdreaming with tensorflowï¼å·²æç¡®è¯å«å¹¶è¡¥å¿äºè¿äºé«é¢æ¢¯åº¦åéãäººä»¬æ³ç¥éï¼æ´å¥½çç¥ç»ç½ç»æ¶ææ¯å¦å¯ä»¥ä½¿è¿äºå·¥ä½åå¾ä¸å¿è¦ã\n\nè¿äºæ¢¯åº¦ä¼ªå½±ä¼å½±åganåï¼å¦ææ¢¯åº¦ä¼ªå½±å¯ä»¥å½±ååºäºç¹å¾å¯è§åä¸­çç¥ç»ç½ç»æ¢¯åº¦ä¼åçå¾åï¼é£ä¹æä»¬ä¹å¯ä»¥é¢æå®ä¼å½±åç±çæå¨åæ°åçå¾åæï¼å ä¸ºå®ä»¬ç±ganä¸­çé´å«å¨è¿è¡äºä¼åãæä»¬åç°å¨æäºæåµä¸ç¡®å®ä¼åçè¿ç§æåµãå½çæå¨æ¢ä¸åæä¹ä¸åææ£çå¾æ¡æ¶ï¼é´å«å¨ä¸­çå¤§å·ç§¯ä¼å¯¼è´å®ä»¬ã\n\nç®åå°ä¸æ¸æ¥è¿äºæ¢¯åº¦ä¼ªåçå¹¿æ³å«ä¹æ¯ä»ä¹ãèèå®ä»¬çä¸ç§æ¹æ³æ¯ï¼æäºç¥ç»ååºæ¬ä¸å¯ä»¥ä»»æå°è·å¾å¶é»å±çè®¸å¤åçæ¢¯åº¦ãç­æå°ï¼åºäºååççç±ï¼ç½ç»å°æ¯å¶ä»åç´ æ´å³å¿è¾å¥ä¸­çæäºåç´ ãè¿äºå¬èµ·æ¥é½ä¸æ¯çæ³çã\n\nä¼¼ä¹æäºåç´ æ¯å¶ä»åç´ å¯¹ç½ç»è¾åºçå½±åæ´å¤§ï¼å¯è½ä¼å¤¸å¤§å¯¹ææ§åä¾ãç±äºå¯¼æ°éä¸­å¨å°éåç´ ä¸ï¼å æ­¤è¿äºåç´ çè¾å°æå¨å¯è½ä¼äº§çè¾å¤§çå½±åãæä»¬å°æªå¯¹æ­¤è¿è¡è°æ¥ã\n\n\n# conclusion\n\nä½¿ç¨åå·ç§¯çæå¾åçæ åæ¹æ³å°½ç®¡åå¾äºæåä½å­å¨ä¸äºçè®ºä¸ç®åçé®é¢ï¼è¿äºé®é¢ä¼å¯¼è´çæçå¾åä¸­åºç°ä¼ªåãä½¿ç¨æ²¡æè¿äºé®é¢çèªç¶æ¿ä»£æ¹æ³ä¼å¯¼è´ä¼ªåæ¶å¤±ï¼ç±»ä¼¼çè®ºç¹è¡¨æï¼standard strided convolutional å±ä¹å¯è½å­å¨é®é¢ï¼ã',charsets:{cjk:!0}},{title:"å¾åå¤çåºç¡",frontmatter:{title:"å¾åå¤çåºç¡",date:"2019-12-18T00:00:00.000Z",description:"å¾åå¤çåºç¡",categories:["blog","skills","imgproc"],tags:[null],permalink:null},regularPath:"/blog/skills/ai/imgproc_base.html",relativePath:"blog/skills/ai/imgproc_base.md",key:"v-4b4d8c9f",path:"/blog/skills/ai/imgproc_base.html",headers:[{level:2,title:"å·ç§¯æ ¸(æ»¤æ³¢å¨)",slug:"å·ç§¯æ ¸-æ»¤æ³¢å¨",normalizedTitle:"å·ç§¯æ ¸(æ»¤æ³¢å¨)",charIndex:13},{level:3,title:"è§åè¦æ±ï¼",slug:"è§åè¦æ±",normalizedTitle:"è§åè¦æ±ï¼",charIndex:26},{level:3,title:"æ¦å¿µ",slug:"æ¦å¿µ",normalizedTitle:"æ¦å¿µ",charIndex:332},{level:2,title:"ç´æ¹å¾",slug:"ç´æ¹å¾",normalizedTitle:"ç´æ¹å¾",charIndex:541},{level:2,title:"ä»¿å°åæ¢",slug:"ä»¿å°åæ¢",normalizedTitle:"ä»¿å°åæ¢",charIndex:633},{level:2,title:"ncnn",slug:"ncnn",normalizedTitle:"ncnn",charIndex:796}],headersStr:"å·ç§¯æ ¸(æ»¤æ³¢å¨) è§åè¦æ±ï¼ æ¦å¿µ ç´æ¹å¾ ä»¿å°åæ¢ ncnn",content:"# å¾åå¤çåºç¡\n\n\n# å·ç§¯æ ¸(æ»¤æ³¢å¨)\n\n\n# è§åè¦æ±ï¼\n\n 1. æ»¤æ³¢å¨çå¤§å°åºè¯¥æ¯å¥æ°ï¼è¿æ ·å®ææä¸ä¸ªä¸­å¿ï¼ä¾å¦3x3ï¼5x5ãæä¸­å¿äºï¼ä¹æäºåå¾çç§°å¼ï¼ä¾å¦5x5å¤§å°çæ ¸çåå¾å°±æ¯2ã\n    * ä¿è¯éç¹(å·ç§¯æ ¸çä¸­å¿)åå¥½å¨ä¸­é´ï¼æ¹ä¾¿ä»¥æ¨¡åä¸­å¿ä¸ºæ åè¿è¡æ»å¨å·ç§¯\n 2. æ»¤æ³¢å¨ç©éµææçåç´ ä¹ååºè¯¥è¦ç­äº1ï¼è¿æ¯ä¸ºäºä¿è¯æ»¤æ³¢ååå¾åçäº®åº¦ä¿æä¸åã(éç¡¬æ§è¦æ±)\n    * å¦ææ»¤æ³¢å¨ç©éµææåç´ ä¹åå¤§äº1ï¼é£ä¹æ»¤æ³¢åçå¾åå°±ä¼æ¯åå¾åæ´äº®ï¼åä¹ï¼å¦æå°äº1ï¼é£ä¹å¾å°çå¾åå°±ä¼åæãå¦æåä¸º0ï¼å¾åä¸ä¼åé»ï¼ä½ä¹ä¼éå¸¸æã\n 3. å¯¹äºæ»¤æ³¢åçç»æï¼å¯è½ä¼åºç°è´æ°æèå¤§äº255çæ°å¼ãå¯¹è¿ç§æåµï¼å°ä»ä»¬ç´æ¥æªæ­å°0å255ä¹é´.\n\n\n# æ¦å¿µ\n\n * å·ç§¯æ ¸å¤§å°(Kernel Size)ï¼æ­¥é¿ï¼Strideï¼ å¡«åï¼Paddingï¼è¾å¥åè¾åºééæ°ï¼Input & Output Channelsï¼\n * æ©å¼ å·ç§¯ï¼Dilated Convolutionï¼ï¼\n   * æåéï¼reception fieldï¼\n   * æ©å¼ ç(dilation rate): æçæ¯å·ç§¯æ ¸çç¹çé´éæ°éï¼æ¯å¦å¸¸è§çå·ç§¯æä½dilatation rateä¸º1ã\n\n\n# ç´æ¹å¾\n\nç´æ¹å¾å½ä¸åï¼ Histogram Normalization ï¼ ï¼ å¢å å¯¹æ¯åº¦ ç´æ¹å¾åè¡¡åï¼ Histogram Equalization ï¼ ï¼ å¢å å¯¹æ¯åº¦\n\n\n# ä»¿å°åæ¢\n\nhttps://blog.csdn.net/momata/article/details/106943599\n\nhttps://github.com/gzr2017/ImageProcessing100Wen/blob/master/Question_51_60/answers/answer_58.py\n\n\n# ncnn\n\næ¨¡åå¯è§åï¼https://lutzroeder.github.io/netron/\n\nncnn å¨å¤ç dbnet æ¨¡åæ¶ï¼\n\n 1. æé¿è¾¹ è· åå­ãèæ¶ çå³ç³»å¯å\n 2. æµè¯ä¸­ï¼æé¿è¾¹ 5000 ä»¥åï¼å¯ä»¥æ§å¶å°åå­æ¶èå¨400Må, æ®éç 2000 x 3000 çæå¤§åå­æ¶èå¨ 100M å·¦å³\n 3. æµè¯ä¸­ï¼éå¶é«å®½æ¯æå¤§æ¯ä¾ä¸º20ï¼è·äºä¸æ¿å°çæµè¯æ°æ®ï¼æ²¡æååºç°å¼å¸¸",normalizedContent:"# å¾åå¤çåºç¡\n\n\n# å·ç§¯æ ¸(æ»¤æ³¢å¨)\n\n\n# è§åè¦æ±ï¼\n\n 1. æ»¤æ³¢å¨çå¤§å°åºè¯¥æ¯å¥æ°ï¼è¿æ ·å®ææä¸ä¸ªä¸­å¿ï¼ä¾å¦3x3ï¼5x5ãæä¸­å¿äºï¼ä¹æäºåå¾çç§°å¼ï¼ä¾å¦5x5å¤§å°çæ ¸çåå¾å°±æ¯2ã\n    * ä¿è¯éç¹(å·ç§¯æ ¸çä¸­å¿)åå¥½å¨ä¸­é´ï¼æ¹ä¾¿ä»¥æ¨¡åä¸­å¿ä¸ºæ åè¿è¡æ»å¨å·ç§¯\n 2. æ»¤æ³¢å¨ç©éµææçåç´ ä¹ååºè¯¥è¦ç­äº1ï¼è¿æ¯ä¸ºäºä¿è¯æ»¤æ³¢ååå¾åçäº®åº¦ä¿æä¸åã(éç¡¬æ§è¦æ±)\n    * å¦ææ»¤æ³¢å¨ç©éµææåç´ ä¹åå¤§äº1ï¼é£ä¹æ»¤æ³¢åçå¾åå°±ä¼æ¯åå¾åæ´äº®ï¼åä¹ï¼å¦æå°äº1ï¼é£ä¹å¾å°çå¾åå°±ä¼åæãå¦æåä¸º0ï¼å¾åä¸ä¼åé»ï¼ä½ä¹ä¼éå¸¸æã\n 3. å¯¹äºæ»¤æ³¢åçç»æï¼å¯è½ä¼åºç°è´æ°æèå¤§äº255çæ°å¼ãå¯¹è¿ç§æåµï¼å°ä»ä»¬ç´æ¥æªæ­å°0å255ä¹é´.\n\n\n# æ¦å¿µ\n\n * å·ç§¯æ ¸å¤§å°(kernel size)ï¼æ­¥é¿ï¼strideï¼ å¡«åï¼paddingï¼è¾å¥åè¾åºééæ°ï¼input & output channelsï¼\n * æ©å¼ å·ç§¯ï¼dilated convolutionï¼ï¼\n   * æåéï¼reception fieldï¼\n   * æ©å¼ ç(dilation rate): æçæ¯å·ç§¯æ ¸çç¹çé´éæ°éï¼æ¯å¦å¸¸è§çå·ç§¯æä½dilatation rateä¸º1ã\n\n\n# ç´æ¹å¾\n\nç´æ¹å¾å½ä¸åï¼ histogram normalization ï¼ ï¼ å¢å å¯¹æ¯åº¦ ç´æ¹å¾åè¡¡åï¼ histogram equalization ï¼ ï¼ å¢å å¯¹æ¯åº¦\n\n\n# ä»¿å°åæ¢\n\nhttps://blog.csdn.net/momata/article/details/106943599\n\nhttps://github.com/gzr2017/imageprocessing100wen/blob/master/question_51_60/answers/answer_58.py\n\n\n# ncnn\n\næ¨¡åå¯è§åï¼https://lutzroeder.github.io/netron/\n\nncnn å¨å¤ç dbnet æ¨¡åæ¶ï¼\n\n 1. æé¿è¾¹ è· åå­ãèæ¶ çå³ç³»å¯å\n 2. æµè¯ä¸­ï¼æé¿è¾¹ 5000 ä»¥åï¼å¯ä»¥æ§å¶å°åå­æ¶èå¨400må, æ®éç 2000 x 3000 çæå¤§åå­æ¶èå¨ 100m å·¦å³\n 3. æµè¯ä¸­ï¼éå¶é«å®½æ¯æå¤§æ¯ä¾ä¸º20ï¼è·äºä¸æ¿å°çæµè¯æ°æ®ï¼æ²¡æååºç°å¼å¸¸",charsets:{cjk:!0}},{title:"PyTorchå¥é¨(å¿«éãæ·±åº¦)",frontmatter:{title:"PyTorchå¥é¨(å¿«éãæ·±åº¦)",date:"2021-02-18T00:00:00.000Z",description:"å¿«éåææ·±åº¦ç PyTorch å¥é¨",categories:["pytorch"],tags:[null],permalink:null},regularPath:"/blog/skills/ai/pytorch_base.html",relativePath:"blog/skills/ai/pytorch_base.md",key:"v-cc5c4542",path:"/blog/skills/ai/pytorch_base.html",headers:[{level:2,title:"1 åºç¡åç´ ",slug:"_1-åºç¡åç´ ",normalizedTitle:"1 åºç¡åç´ ",charIndex:23},{level:3,title:"1.1 Tensor",slug:"_1-1-tensor",normalizedTitle:"1.1 tensor",charIndex:34},{level:3,title:"1.2 Autograd",slug:"_1-2-autograd",normalizedTitle:"1.2 autograd",charIndex:603},{level:3,title:"1.3 NN && Loss",slug:"_1-3-nn-loss",normalizedTitle:"1.3 nn &amp;&amp; loss",charIndex:null},{level:3,title:"1.4 Device",slug:"_1-4-device",normalizedTitle:"1.4 device",charIndex:1889},{level:2,title:"2 æ¨¡å(Module)",slug:"_2-æ¨¡å-module",normalizedTitle:"2 æ¨¡å(module)",charIndex:3093},{level:3,title:"2.1 ä¿å­åå è½½",slug:"_2-1-ä¿å­åå è½½",normalizedTitle:"2.1 ä¿å­åå è½½",charIndex:3110},{level:3,title:"2.2 ç½ç»ç»æ",slug:"_2-2-ç½ç»ç»æ",normalizedTitle:"2.2 ç½ç»ç»æ",charIndex:3957},{level:3,title:"2.3 æå",slug:"_2-3-æå",normalizedTitle:"2.3 æå",charIndex:4874},{level:3,title:"2.4 ç»æ",slug:"_2-4-ç»æ",normalizedTitle:"2.4 ç»æ",charIndex:7683},{level:2,title:"3 æ°æ®åæ¢æä½",slug:"_3-æ°æ®åæ¢æä½",normalizedTitle:"3 æ°æ®åæ¢æä½",charIndex:8684},{level:3,title:"å¸¸ç¨æ¹æ³(å±ï¼5ç±»22ç§)",slug:"å¸¸ç¨æ¹æ³-å±-5ç±»22ç§",normalizedTitle:"å¸¸ç¨æ¹æ³(å±ï¼5ç±»22ç§)",charIndex:8804},{level:2,title:"4 æ°æ®å è½½",slug:"_4-æ°æ®å è½½",normalizedTitle:"4 æ°æ®å è½½",charIndex:10903},{level:3,title:"æ°æ®éæ ·(åå)",slug:"æ°æ®éæ ·-åå",normalizedTitle:"æ°æ®éæ ·(åå)",charIndex:12528},{level:2,title:"5 æå¤±å½æ°",slug:"_5-æå¤±å½æ°",normalizedTitle:"5 æå¤±å½æ°",charIndex:13962},{level:2,title:"6 ä¼åå¨",slug:"_6-ä¼åå¨",normalizedTitle:"6 ä¼åå¨",charIndex:15340},{level:2,title:"7 æ°æ®æ æ³¨",slug:"_7-æ°æ®æ æ³¨",normalizedTitle:"7 æ°æ®æ æ³¨",charIndex:16730},{level:2,title:"To Be Continue ....",slug:"to-be-continue",normalizedTitle:"to be continue ....",charIndex:17347},{level:2,title:"Reference",slug:"reference",normalizedTitle:"reference",charIndex:17591}],headersStr:"1 åºç¡åç´  1.1 Tensor 1.2 Autograd 1.3 NN && Loss 1.4 Device 2 æ¨¡å(Module) 2.1 ä¿å­åå è½½ 2.2 ç½ç»ç»æ 2.3 æå 2.4 ç»æ 3 æ°æ®åæ¢æä½ å¸¸ç¨æ¹æ³(å±ï¼5ç±»22ç§) 4 æ°æ®å è½½ æ°æ®éæ ·(åå) 5 æå¤±å½æ° 6 ä¼åå¨ 7 æ°æ®æ æ³¨ To Be Continue .... Reference",content:'# PyTorchå¥é¨: å¿«éãæ·±åº¦\n\n\n# 1 åºç¡åç´ \n\n\n# 1.1 Tensor\n\nTensorçå¸¸è§æä½æä½ï¼åæ¬æ¢ä½ãç´¢å¼ãåçãæ°å­¦è¿ç®ãçº¿æ§ç®æ³åéæºæ°ç­ç­ã\n\né¤äº CharTensor ä¹å¤ï¼ææç tensor é½å¯ä»¥å¾æ¹ä¾¿çå¨ CPUåGPU è¿ç®ä¹é´ç¸äºè½¬æ¢:\n\n    tor = torch.ones(5)\n    if torch.cuda.is_available():\n        tor_cuda = tor.cuda()\n        tor_cpu = tor_cuda.cpu()\n\n\n1\n2\n3\n4\n\n\nè¿éå¼ºè°ä¸ Torch ç Tensor å numpy ç array ç¸äºè½¬æ¢ï¼GPU tensor ä¸è½ç´æ¥è½¬ä¸º numpy æ°ç»ï¼å¿é¡»åè½¬å° CPU tensorï¼\n\n    import numpy as np\n\n    a_np = np.ones(5)\n    a_tor = torch.ones(5)\n\n    b_np = a_tor.numpy()\n    b_tor = torch.from_numpy(a_np)\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\nè¿éè¦æ³¨æçæ¯ï¼Torch ç Tensor å numpy ç array ä¼å±äº«ä»ä»¬çå­å¨ç©ºé´ï¼ä¿®æ¹ä¸ä¸ªä¼å¯¼è´å¦å¤çä¸ä¸ªä¹è¢«ä¿®æ¹ã\n\nmore docs...\n\n\n# 1.2 Autograd\n\nautograd åæä¾ Tensor æææä½çèªå¨æ±å¯¼æ¹æ³ãè¿æ¯ä¸ä¸ªè¿è¡æ¶å®ä¹çæ¡æ¶ï¼è¿æå³çä½ çååä¼ æ­æ¯æ ¹æ®ä½ ä»£ç è¿è¡çæ¹å¼æ¥å®ä¹çï¼å æ­¤æ¯ä¸è½®è¿­ä»£é½å¯ä»¥åä¸ç¸åã\n\nautograd åä¸­æä¸¤ä¸ªéå¸¸éè¦çç±»ï¼Variable å Functionï¼äºèç¸äºèç³»å¹¶ä¸æå»ºäºä¸ä¸ªæè¿°æ´ä¸ªè¿ç®è¿ç¨çæ ç¯å¾ã\n\nå¶ä¸­ï¼Function å®ç°äºä½¿ç¨èªå¨æ±å¯¼æ¹æ³çåé¦ååé¦çå®ä¹ãæ¯ä¸ªVariableçæä½é½ä¼çæè³å°ä¸ä¸ªç¬ç«çFunctionèç¹ï¼ä¸çæäºVariableçå½æ°ç¸è¿ä¹åè®°å½ä¸æä½åå²ã\n\nautograd.Variable æ¯è¿ä¸ªåä¸­ææ ¸å¿çç±»ãå®æä¸ä¸ªå¸¸ç¨å±æ§ï¼\n\n * data ï¼ ç¨äºè®¿é®åå§ç tensor\n   * Variable åè£äºä¸ä¸ª Tensorï¼å¹¶ä¸å ä¹æ¯æææçå®ä¹å¨å¶ä¸çæä½ã\n * creator ï¼ å¼ç¨äºä¸ä¸ªåå»º Variable ç Functionã(é¤äºç¨æ·åå»ºç Variable ä¸­ç creator å±æ§æ¯ None)\n * grad ï¼ å³äºè¿ä¸ Variable çæ¢¯åº¦åéä¸­å­å¨äºæ­¤å±æ§\n\nå½éè¿ Variable å®ä¹äºå®æ´è®¡ç®åï¼å¯ä»¥è°ç¨è®¡ç®ç»æç .backward() æ¥èªå¨è®¡ç®åºææçæ¢¯åº¦ãå½ç¶ï¼ä¹å¯ä»¥æå® Variable ä¸è®¡ç®æ¢¯åº¦ï¼å¦ï¼æå® requires_grad=Falseã\n\næèï¼å¦æ a = Variable(torch.randn(5, 5), requires_grad=True) + Variable(torch.randn(5, 5), requires_grad=False), é£ä¸ª a.requires_grad æ¯ä»ä¹ï¼\n\nmore docs...\n\n\n# 1.3 NN && Loss\n\nå¨ pytorch ä¸­ï¼å¯ä»¥ä½¿ç¨ torch.nn åè¿è¡ç¥ç»ç½ç»çæå»ºãnn.Moduleä¸­åå«çç¥ç»ç½ç»çå±ï¼åæ¶forward(input)æ¹æ³è½å¤å°outputè¿è¡è¿åã\n\nä¸ä¸ªå¸åçç¥ç»ç½ç»çè®­ç»è¿ç¨æ¯è¿æ ·çï¼\n\n 1. å®ä¹ä¸ä¸ªæçå¯å­¦ä¹ çåæ°ï¼æèæéï¼çç¥ç»ç½ç»\n 2. å¯¹çä¸ä¸ªè¾å¥çæ°æ®éè¿è¡è¿­ä»£:\n    1. ç¨ç¥ç»ç½ç»å¯¹è¾å¥è¿è¡å¤ç\n    2. è®¡ç®ä»£ä»·å¼ (å¯¹è¾åºå¼çä¿®æ­£å°åºæå¤å°)\n    3. éè¿ optimizer(ä¼åå¨) å¯¹æå¤±å½æ°è¿è¡æ¢¯åº¦è®¡ç®ï¼å¹¶å°æ¢¯åº¦ä¼ æ­åç¥ç»ç½ç»çåæ°ä¸­\n    4. æ´æ°ç½ç»ä¸­çæé\n    * éå¸¸ä½¿ç¨ç®åçæ´æ°è§å: weight = weight + learning_rate * gradient\n\nå¨ä¸è¿°è¿ä¸ªè¿ç¨ä¸­ï¼torch.nn.Module (ç¥ç»ç½ç»æ¨¡å) æ¯ææ ç½ç»çåºç¡ï¼å¯ä»¥ç¬ç«ç¨ä½ä¸ä¸ªç½ç»ï¼ä¹å¯ä»¥éè¿ç»ååä¸ªç½ç»å±å½¢æç¥ç»ç½ç»è¿è¡è®¡ç®ãæ¨¡åçç»åï¼å¯ä»¥éè¿ä»¥ä¸æ¹å¼å½¢æï¼\n\nè porch.optim å ptorch.nn.MSELossç­æå¤±å½æ°ï¼åæ¯å¨ç½ç»è®¡ç®è¿ç¨ä¸­è¿è¡è¿­ä»£ä¼åå¿ä¸å¯å°çé¨åã\n\ndocs...\n\n\n# 1.4 Device\n\nå¨ pytorch ä¸­ï¼æä»¬å¯ä»¥éæ©å° tensor è¿è¡å¨ cpu æè gpu ä¸ï¼å¦ä¸ææè¿°çæ¹å¼ï¼tensor.cpu() æ tensor.gpu() å°±å¯ä»¥ç®åçå®ç° cpu å gpu çéæ©æåæ¢ã\n\næäºæ¶åï¼æä»¬æ³å¨ä»£ç çå¨å±ä½ç½®ä¸æå®ä½¿ç¨çè®¾å¤ç±»åï¼ç¶åå°±å¯ä»¥ä¸ç¨ä¿®æ¹çå°ä»£ç è·å¨ gpu æè cpu ä¸ï¼è¿ä¹å¾å®¹æå®ç°ï¼\n\nif gpu_id == -1:\n  device = torch.device("cpu")\nelse:\n  device = torch.device("cuda")\n  torch.cuda.set_device(gpu_id)\n  # torch.cuda.set_device("cuda:1,2") # æå®å¤å¼ æ¾å¡\n\nones = tensor.ones(5).to(device)\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\næ³¨æå°ï¼ä½¿ç¨ cuda æ¶ï¼æä»¬æå®äº gpu_id, å¦æä¸æ¾ç¤ºçè®¾ç½®ï¼é»è®¤ä½¿ç¨ cuda:0ï¼å³ç³»ç»çç¬¬ä¸åæ¾å¡ã\n\nå¦æå¨ä¸ä¸ªèç¹ä¸æå¤å gpuï¼åå«è·åä¸ä¸ªæ¨¡åçä¸ååæ°ï¼è¿æ¶æä»¬å¯ä»¥éè¿ set_device() æ¾ç¤ºçå°æ¨¡ååéå°æä¸ä¸ª cuda ä¸ãè¿æå¶ä»æ¹æ³å¯ä»¥å®ç°åï¼\n\næï¼å¯ä»¥éè¿ CUDA_VISIBLE_DEVICES ç¯å¢åéæ¥éå¶ CUDA ç¨åºæè½ä½¿ç¨ç GPU è®¾å¤ãCUDA åºç¨è¿è¡æ¶ï¼CUDA å°éåå½åå¯è§çè®¾å¤ï¼å¹¶ä»é¶å¼å§ä¸ºå¯è§è®¾å¤ç¼å·ãè¿æ ·ï¼å°±å¯ä»¥è®©æä»¬çç¨åºé½è®¤ä¸ºèªå·±çå°ç gpu æ¯é¶å·å¼å§ç¼å·çè®¾å¤ã\n\n  CUDA_VISIBLE_DEVICES=0,2,3 ./cuda_executable\n\n\n1\n\n\nä¹å°±æ¯è¯´éè¿è¿ä¸ªç¯å¢åéï¼å¯ä»¥ä½¿å¾ç³»ç»ä¸­ GPU è®¾å¤çç¼å· å CUDAåºç¨çå°çè®¾å¤ç¼å·äº§çä¸ä¸è´ãä½¿ç¨å¾å½çè¯ï¼å¯ä»¥éè¿çµæ´»çéç½® CUDA_VISIBLE_DEVICES ç¯å¢åéä¸º CUDA åºç¨åééè¦çç¡¬ä»¶èµæºã\n\nå¦æä¸º CUDA_VISIBLE_DEVICES è®¾ç½®äºä¸å­å¨çè®¾å¤ï¼ææå®éè®¾å¤å°è¢«éèï¼CUDA åºç¨å°æ æ³ä½¿ç¨ GPU è®¾å¤ï¼å¦æè®¾å¤åºåæ¯å­å¨åä¸å­å¨è®¾å¤çæ··åï¼é£ä¹ä¸å­å¨è®¾å¤åçææå­å¨è®¾å¤å°è¢«éæ°ç¼å·ï¼ä¸å­å¨è®¾å¤ä¹åçææè®¾å¤å°è¢«å±è½ã\n\nå½ç¶ï¼å¯¹äºå¨ä»£ç åéè¿ä»£ç ä¿®æ¹å¯è§è®¾å¤çæåµï¼åªæå¨ä»£ç è®¿é® GPU è®¾å¤ä¹åè®¾ç½® CUDA_VISIBLE_DEVICES åéæææã\n\nè¿éæä»¬æå°äºå¤ä¸ª GPU è®¾å¤ï¼èªç¶ä¼æ³å°å½è®­ç»è¿­ä»£æ¬¡æ°æèepochè¶³å¤å¤§çæ¶åå¸æç¨å¤ä¸ª GPU æ¥å éè®­ç»ãä¸è¬æä»¬ä¼ä½¿ç¨ï¼net = torch.nn.DataParallel(net, device_ids=[0, 1]) æ¥å®ç°ä½¿ç¨å¤ä¸ª GPU è®­ç»æ¨¡åãæ´å¤å³äºå¤å¡çåå®¹...\n\n\n# 2 æ¨¡å(Module)\n\n\n# 2.1 ä¿å­åå è½½\n\npytorch ä¸­æ¨¡åçå­å¨ååå è½½é½æ¯è¾ç®åï¼ä¸è¬æä¸¤ç§æ¹å¼ï¼ç¤ºä¾ä»£ç å¦ä¸ï¼\n\n * ä¿å­æ´ä¸ªç½ç»ï¼ä¿¡æ¯å¨ï¼\n   \n     torch.save(model, PATH) \n     model = torch.load(PATH)\n   \n   \n   1\n   2\n   \n * ä¿å­ç½ç»ä¸­çåæ°ï¼éåº¦å¿«ï¼å ç©ºé´å°ï¼\n   \n     # save\n     torch.save(model.state_dict(), PATH)\n     # load\n     model = MyModel(*args, **kwargs)\n     model.load_state_dict(torch.load(PATH), strict=True)\n     model.eval()\n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   \n\nload_state_dict() æ¯ nn.Module çä¸ä¸ªAPIï¼å©ç¨æ¨¡åæä»¶ååºåååå¾å°ç Dict æ¥åå§åå½åçæ¨¡åãéè¦æ³¨æ strict åæ°ï¼é»è®¤å¼æ¯ Trueãå æ­¤å¨åå§åæ¶åï¼è¯¥å½æ°ä¼ä¸¥æ ¼æ¯è¾æº Dict åç®æ  Dict ç key æ¯å¦å®å¨ä¸æ ·ãå¦æ strict=Falseï¼åå°ä¸ä¼è¿è¡è¿æ ·çä¸¥æ ¼æ£æ¥ï¼åªækeyä¸æ ·çæä¼è¿è¡èµå¼ã\n\nçå°è¿éï¼æ¯å¦å¥½å¥å­å¨çæ¨¡åæä»¶(.pth)éé½åå«äºä»ä¹ä¿¡æ¯ï¼æ¯å¦ï¼æ¨¡åçç½ç»ç»æãmodel.state_dict å·ä½æ¯ä»ä¹åå®¹å¢... æ¥ä¸æ¥æä»¬å°±çç module éé½åå«äºä»ä¹å§ã\n\næ³¨æï¼ä½¿ç¨ torch.nn.DataParallel è®­ç»çæ¨¡åè¦ä¿å­çè¯ï¼æå¥½ä½¿ç¨ torch.save(model.module.state_dict(), PATH)ãè¿æ ·çè¯ï¼å¨éæ°å è½½ pthæ¨¡åæä»¶ çæ¶åï¼ä¼ææå¤§ççµæ´»æ§ï¼èä¸æ¯åºç°ä¸å¤§å  unexpected keysåmissed keys\n\n\n# 2.2 ç½ç»ç»æ\n\n# æ¨¡å\n\næä»¬åæ¥çç torch.load ç½ç»åï¼å¾å°çæ¯ä»ä¹åå®¹ï¼\n\n  for k in model.keys():\n    print(k)  \n\n\n1\n2\n\n\nåç°å è½½åçæ¨¡åæåä¸ªé®å¼, è§å¯å¶ä¸­çåå®¹ï¼å¯ä»¥åç°ï¼\n\nKEY         TYPE          ç¨é\nmodel       OrderedDict   ç¸å½äº model.state_dict() çå¼,\n                          å­å¨çææçæ¯ä¸å±çåæ°åç§°ä»¥åå¯¹åºçåæ°å¼ï¼éè¦æ³¨æçæ¯ï¼åæ°åç§°å¯è½å¾é¿\noptimizer   dict          ç¸å½äº optimizer.state_dict() çå¼, ç¨éï¼?\nscheduler   dict          ?\niteration   int           ?\n\næ³¨æï¼è¿éçå°çæ¯éè¿ torch.load å è½½æ¨¡åæä»¶åå¾å°ç dictï¼éè¦è½¬æ¢ä¸ºå·ä½ç Model å¯¹è±¡æè½è¢«ç»§ç»­ä½¿ç¨(ç»§ç»­è®­ç» æ æµè¯)\n\n# ç»æ\n\nä¸è¬æä»¬è¦äºè§£å¶ç½ç»ç»æï¼å¾å¾å°å¶å¯è§åæ¯å¸¸ç¨çæ¹å¼ãä»¥å¸¸è§ç pytorch ç .pth æ¨¡åæä»¶ä¸ºä¾:\n\n * ä½¿ç¨ netron å¯è§åå·¥å·ã\n   1. å®è£netronï¼åè github-Netron\n   2. æ³¨æ, ä¿å­ç½ç»æ¶è¦ä¿å­å®æ´ç»æï¼ä¸è½åªä¿å­åæ°ï¼å¦åä¸æ­£å¸¸å·¥ä½\n * ä½¿ç¨ tensorwatch (å¾®è½¯)\n   1. å®è£ãä½¿ç¨ï¼åè github-tensorwatch\n   2. åè½å¼ºå¤§ï¼TensorWatch is under heavy development with a goal of providing a platform for debugging machine learning in one easy to use, extensible, and hackable package.\n\nå¦å¤ï¼è¿å¯ä»¥ç´æ¥ä½¿ç¨ print(model_obj) (ä¾é __repr__æºå¶)æå°åºæ¨¡åçç¸å³ä¿¡æ¯ï¼ç»ååºç½ç»ä¿¡æ¯ã\n\n\n# 2.3 æå\n\nç®åçäºè§£ pytorch åï¼æä»¬ç¥éï¼ææå®ä¹çç½ç»ç»æé½å¿é¡»è¦ç»§æ¿ï¼torch.nn.Module ç±»ãä¾å¦ï¼\n\n  class MyModel(nn.Module):\n    def __init__(self):\n      super(MyModel, self).__init__()\n      self.my_tensor = torch.randn(1) # æ¨¡åç±»æååé\n      self.register_buffer(\'my_buffer\', torch.randn(1)) # èªå®ä¹ buffer\n      # éè¿ä¸¤ç§æ¹å¼å®ä¹ paramter\n      self.p1 = nn.paramter.Paramter(torch.tensor(1.0))\n      print(self._parameters)\n      self.p2 = nn.Paramter(torch.tensor(2.0))\n      print(self._parameters)\n      \n    def forward(self, x):\n      return x\t\n\n  model = MyModel()\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\næ¥ç torch.nn.Module ç±»å®ç°ï¼ä¼åç°å¶åå«äºä»¥ä¸æååéï¼\n\nåå­                            ç±»å            ç¨é\n_modules                      OrderedDict   å¯ä»¥éè¿ model.state_dict() å¾å°å¶ä¸­çå¼\n_parameters                   OrderedDict   \n_buffers                      OrderedDict   \n_state_dict_hooks             OrderedDict   \n_load_state_dict_pre_hooks    OrderedDict   \n_forward_pre_hooks            OrderedDict   \n_forward_hooks                OrderedDict   \n_backward_hooks               OrderedDict   \n_non_persistent_buffers_set   set           \n\n# _parameters\n\nå­å¨çå¼ç±»åä¸ºï¼nn.parameter.Paramterï¼ä¹å°±æ¯æ¨¡åä¸­å­å¨çåæ°ãä¸è¬çï¼å®å°±æ¯è®­ç»è¿ç¨ä¸­éè¦æ±è§£çåæ°ï¼ä¹å°±æ¯è¯´éè¦è¿è¡ååä¼ æ­ãæä»¥ï¼å®æä¸ä¸ªç¹ç¹æ¯ï¼é»è®¤ç requires_grad=Trueã\n\nè¿ééè¿ä¸ä¸ªç®åç Module æ¥äºè§£ä¸ _parametersãä¾å¦ï¼æ¨¡å torch.nn.Linear éå¸¸ç± weightåbias åæ°ç»æï¼\n\n  # å®ä¹ä¸ä¸ª module\n  fc = torch.nn.Linear(2,2)\n\n  # è¯»å _parameters: æ¹å¼a\n  fc._parameters\n  \n  # è¯»å _parameters: æ¹å¼b\n  for n, p in fc.named_parameters():\n    pring(n, p)\n  \n  # è¯»å _parameters: æ¹å¼c\n  for p in fc.parameters():\n    print(p)\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\næ³¨æï¼ æµè¯ä»£ç æ¶ï¼ä¼åç° requires_grad å±æ§é»è®¤ä¸º Trueãå¦å¤å°±æ¯ï¼æ¨èåè¾¹ä¸¤ç§éè¿è¿­ä»£å¨çæ¹å¼è¿è¡è¯»åï¼ä»¥é¿ååæ°éå¸¸å¤æ¶ï¼ç¬¬ä¸ç§æ¹å¼å ç¨è¿å¤èµæºã è¿éæä¸ä¸ï¼weight(æé) å bias(åç½®é) çä½ç¨ï¼weight å³å®ç½ç»çå½¢ç¶ï¼biasç»ç½ç»å¢å å¹³ç§»(æ³å)çè½å\n\nå¦æè¿è¡äº MyModel æ¨¡åå®ä¹çä»£ç ï¼å°±ä¼åç°ä¸ä¸ªå¥æªçç°è±¡ï¼self.p1 å self.p2 èµå¼åï¼æ¨¡åç _parameters åæ°é½ä¼åçç¸åºçåå(è¢«å å¥å°äº_parametersä¸­)ï¼è¿æ¯æä¹åäºå¢ï¼\n\n 1. é¦åè¿è¡super(MyModel, self).init()ï¼è¿æ ·MyModelå°±åå§åäº_paramtersç­ä¸ç³»åçOrderDictï¼æ­¤æ¶ææåéè¿é½æ¯ç©ºçã\n 2. self.p1 = nn.paramter.Paramter(torch.tensor(1.0)): è¿è¡ä»£ç ä¼è§¦å nn.Module é¢å®ä¹å¥½ç setattr å½æ°ãæºç çæ®µå¦ä¸ï¼\n\n  def __setattr__(self, name, value):\n    ...\n    params = self.__dict__.get(\'_parameters\')\n    if isinstance(value, Parameter):\n      if params is None:\n        raise AttributeError(\n          "cannot assign parameters before Module.__init__() call")\n      remove_from(self.__dict__, self._buffers, self._modules)\n      self.register_parameter(name, value)\n    ...\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\nåç° setattr å½æ°çä½ç¨ï¼ç®åè¯´å°±æ¯æ£æ¥å®ä¹çåæ°ç±»å, å¦ææ­£ç¡®å°±ç»§ç»­è°ç¨ register_parameter å½æ°è¿è¡æ³¨åï¼è¿ä¸ªå½æ°å°±æ´ç®åäºï¼æä»¬ç®åå³å¿çå°±æ¯å®åäºä¸é¢è¿ä»¶äº\n\n  def register_parameter(self,name,param):\n    ...\n    self._parameters[name]=param\n    ...\n\n\n1\n2\n3\n4\n\n\nå¦å¤ï¼ setattr è¿å¯ä»¥å¤ç Module ç±»åï¼å½ value æ¯ nn.Module ç±»åæ¶ï¼ä¹ä¼è¿è¡ç¸åºçå¤çå¨ä½ã\n\n# _buffers\n\nå _parameters ç¨äºååä¼ æ­ä¸åï¼ä¸è¬ç¨äºå­å¨éè¦æä¹åï¼ä½åä¸æ¯ç½ç»(ä¸éè¦åä¸ååä¼ æ­ç)åæ°ï¼ä½¿ç¨æ¹å¼ï¼self.register_buffer(\'my_buffer\', torch.randn(1))\n\n\n# 2.4 ç»æ\n\nå¨æå»ºæ°çæ¨¡åæ¶ï¼å¯ä»¥éè¿å¤ä¸ªå°æ¨¡åç»åå½¢æå¤æçç½ç»æ¨¡åï¼å¦ï¼\n\n  # ä¸»å¨è®¾ç½® name \n  from collections import OrderedDict\n  model = nn.Sequential(OrderedDict([ (\'conv1\', nn.Conv2d(1,20,5)), (\'relu1\', nn.ReLU())]))\n\n  # èªå¨è®¾ç½® name: ä»¥å¨ layers ä¸­çç´¢å¼ä¸º name\n  layers = []\n  layers.append(nn.Conv2d(curr_dim, 3, kernel_size=7, stride=1, padding=3, bias=False))\n  layers.append(nn.Tanh())\n  model = nn.Sequential(*layers)\n\n  # èªå¨è®¾ç½® name: ä»¥å¨ layers ä¸­çç´¢å¼ä¸º name\n  model = nn.ModuleList([nn.Conv2d(curr_dim, 3), nn.Tanh()]))\n\n  # æ¥çç½ç»ç»æ\n  print(model)\n\n  # æ¥çæ¨¡åçåæ°åè¡¨\n  params=model.state_dict() \n  for k,v in params.items():\n    print(k, v)    #æå°ç½ç»çåéåãparam\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n\n\néè¿ä¸æï¼æä»¬ç¥é model.state_dict å­å¨äºç½ç»æ¨¡åçç¸å³åæ°ä¿¡æ¯ï¼è¿ä¸ªä¿¡æ¯å­å¨å¨ OrderedDict ä¸­ï¼é£ä¹ key å value ååå«æ¯ä»ä¹å¢ï¼\n\néè¿ä¸è¿°ç¤ºä¾ä»£ç ï¼æä»¬å¯ä»¥æ¥ç state_dict çåå®¹ï¼è¿éä¸»è¦è¯´æä¸ key ççæï¼å¶æ ¼å¼ä¸ºï¼prefix + param_name_in_module + name + "." [ + ... ]ï¼å¦ææ¨¡åè¿­ä»£ï¼åç»§ç»­è¿ä¸ªæ ¼å¼ç´å°æç»çåéãå¶ä¸­ï¼prefix é»è®¤ä¸º ââï¼name å¦ææ²¡æä¸»å¨å£°æï¼åé»è®¤ä¸ºç»åæ¨¡åç layers ä¸­çç´¢å¼.\n\næèï¼å¦æå layers éæ·»å  [nn.Conv2d(), nn.Conv2d()] ä¼æä¹æ ·ï¼\n\n\n# 3 æ°æ®åæ¢æä½\n\nè¿éä¸»è¦ä»ç»ä¸ Pytorch ä¸­ torchvision.transforms æä¾çå ç§æ°æ®å¢å¼ºå½æ°çä½¿ç¨ãå¨å è½½æ°æ®æ¶ï¼å¯ä»¥éè¿æå® transforms.Compose() æ¹ä¾¿ãé«æçè¿è¡æ°æ®é¢å¤çã\n\n\n# å¸¸ç¨æ¹æ³(å±ï¼5ç±»22ç§)\n\næµè¯ä»£ç ï¼\n\n  from torchvision import transforms\n  from PIL import Image\n  import torch\n  \n  img = Image.open("img_path")\n  transform = transforms.Compose([\n    transforms.ToTensor(),\n    transforms.ToPILImage()\n    # ... more\n  ])\n  new_img = transform(img)\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n# åºç¡æä½\n\n# transforms.ToTensor()\n\n# transforms.Lambda()\n\n  lambd = lambda x: TF.rotate(x, 100)\n  transforms.Lambda(lambd)\n\n\n1\n2\n\n\nApply a user-defined lambda as a transform. æ ¹æ®ç¨æ·èªå®ä¹çæ¹å¼è¿è¡åæ¢\n\n# transforms.ToPILImage()\n\n# transforms.Normalize(mean, std)\n\n# éæºåºç¨\n\n# transforms.RandomApply(transforms, p=0.5)\n\nç»å®ä¸å®æ¦çä»ä¸ç» transformations åºç¨\n\n# transforms.RandomChoice(transforms)\n\nApply single transformation randomly picked from a list\n\n# transforms.RandomOrder\n\nApply a list of transformations in a random order\n\n# åªè£ãå¡«å\n\n# transforms.Resize()\n\n# transforms.Pad()\n\npadding_modeï¼å¡«åçæ¨¡å¼ï¼constant, edgeï¼å¡«åå¼ä¸ºè¾¹ç¼ï¼, reflect (ä»è¾¹ç¼å¾åä¸ä¸ªåç´ å¼å§åéå) or symmetricï¼ä»è¾¹ç¼åéåï¼\n\n# transforms.CenterCrop\n\nCrops the given PIL Image at the center\n\n# transforms.RandomCrop\n\nCrop the given PIL Image at a random location. éæºè¿è¡è£åª\n\n# transforms.RandomResizedCrop\n\nCrop the given PIL Image to random size and aspect ratio. è£åªç»å®ç PIL å¾åå°éæºçå°ºå¯¸åé¿å®½æ¯ã\n\n# transforms.FiveCrop\n\nå°ç»å®ç PIL å¾åè£åªæåä¸ªè§åä¸­é´çè£åª\n\n# transforms.TenCrop\n\nè£åªä¸å¼ å¾çç 4 ä¸ªè§ä»¥åä¸­é´å¾å°æå®å¤§å°çå¾çï¼å¹¶ä¸è¿è¡æ°´å¹³ç¿»è½¬ / ç«ç´ç¿»è½¬ å± 10 å¼ \n\n# ä»¿å°åæ¢\n\n# transforms.RandomHorizontalFlip(p=0.5) ãtransforms.RandomVerticalFlip(p=0.5)\n\nHorizontally/Vertically flip the given PIL Image randomly with a given probability. æä¸å®æ¦çè¿è¡æ°´å¹³ / ç«ç´ç¿»è½¬\n\n# transforms.RandomRotation\n\nä¸å®è§åº¦æè½¬å¾å\n\n# transforms.RandomAffine\n\nä¿æå¾åä¸­å¿ä¸åçéæºä»¿å°åæ¢ï¼å¯ä»¥è¿è¡éå¿ææ¬²çåå\n\n# transforms.RandomPerspective\n\nå¯¹ç»å®ç PIL å¾åä»¥ç»å®çæ¦çéæºè¿è¡éè§åæ¢\n\n# transforms.LinearTransformation()\n\nå¸¸åºç¨äº ç½åï¼ä»¥å»é¤è¾å¥æ°æ®çåä½ä¿¡æ¯ãåè®¾è®­ç»æ°æ®æ¯å¾åï¼ç±äºå¾åä¸­ç¸é»åç´ ä¹é´å·æå¾å¼ºçç¸å³æ§ï¼æä»¥ç¨äºè®­ç»æ¶è¾å¥æ¯åä½çï¼ç½åçç®çå°±æ¯éä½è¾å¥çåä½æ§ã\n\n# é¢è²ç¸å³\n\n# transforms.ColorJitter\n\nRandomly change the brightness, contrast and saturation of an image. éæºæ¹åå¾åçäº®åº¦ãå¯¹æ¯åº¦åé¥±ååº¦\n\n# transforms.Grayscale\n\nè½¬æ¢å¾åç°åº¦ã\n\n# transforms.RandomGrayscale\n\nRandomly convert image to grayscale with a probability of p (default 0.1). ä»¥ä¸å®çæ¦çå¯¹å¾åè¿è¡ç°åº¦åï¼è½¬æ¢åçå¾çè¿æ¯ 3 ééç\n\nmore docs...\n\n\n# 4 æ°æ®å è½½\n\npytorch ä¸­å¯¹æ°æ®éåå¤ççæ¹æ³éä¸­å¨ torch.utils.data åä¸­ï¼ä¸»è¦åå«äºä»¥ä¸æ¹æ³ï¼\n\nCLASS                                                      DESCRIPTION                       ADDITIONS\ntorch.utils.data.Dataset                                   ä¸ä¸ªæ½è±¡ç±»ï¼ ææå¶ä»ç±»çæ°æ®éç±»é½åºè¯¥æ¯å®çå­ç±»         å¶å­ç±»å¿é¡»éè½½ä¸¤ä¸ªéè¦çå½æ°ï¼len(æä¾æ°æ®éçå¤§å°ï¼ãgetitem(æ¯ææ´æ°ç´¢å¼)\ntorch.utils.data.TensorDataset                             å°è£ætensorçæ°æ®éï¼æ¯ä¸ä¸ªæ ·æ¬é½éè¿ç´¢å¼å¼ éæ¥è·å¾     \ntorch.utils.data.ConcatDataset                             è¿æ¥ä¸åçæ°æ®éä»¥æææ´å¤§çæ°æ°æ®é                \ntorch.utils.data.Subset(dataset, indices)                  è·åæå®ä¸ä¸ªç´¢å¼åºåå¯¹åºçå­æ°æ®é                 \ntorch.utils.data.DataLoader                                æ°æ®å è½½å¨, ç»åäºä¸ä¸ªæ°æ®éåéæ ·å¨ï¼å¹¶æä¾å³äºæ°æ®çè¿­ä»£å¨   \ntorch.utils.data.random_split(dataset, lengths)            æç§ç»å®çé¿åº¦å°æ°æ®éååææ²¡æéå çæ°æ°æ®éç»å         \n                                                                                             \ntorch.utils.data.Sampler(data_source)                      ææéæ ·çå¨çåºç±»                         æ¯ä¸ªéæ ·å¨å­ç±»é½éè¦æä¾ iter æ¹-æ³ä»¥æ¹ä¾¿è¿­ä»£å¨è¿è¡ç´¢å¼ åä¸ä¸ª lenæ¹æ³ ä»¥æ¹ä¾¿è¿åè¿­ä»£å¨çé¿åº¦ã\ntorch.utils.data.SequentialSampler                         é¡ºåºéæ ·æ ·æ¬ï¼å§ç»æç§åä¸ä¸ªé¡ºåº                  \ntorch.utils.data.RandomSampler                             æ æ¾åå°éæºéæ ·æ ·æ¬åç´                       \ntorch.utils.data.SubsetRandomSampler                       æ æ¾åå°æç§ç»å®çç´¢å¼åè¡¨éæ ·æ ·æ¬åç´                \ntorch.utils.data.WeightedRandomSampler                     æç§ç»å®çæ¦çæ¥éæ ·æ ·æ¬                      \ntorch.utils.data.BatchSampler(sampler, batch_size,         å¨ä¸ä¸ªbatchä¸­å°è£ä¸ä¸ªå¶ä»çéæ ·å¨               \ndrop_last)\ntorch.utils.data.distributed.DistributedSampler(dataset,   éæ ·å¨å¯ä»¥çº¦ææ°æ®å è½½è¿æ°æ®éçå­é                \nnum_replicas=None, rank=None)\n\n\n# æ°æ®éæ ·(åå)\n\nå¨è¿è¡è®­ç»æ¶ï¼å¸¸å°ç¨äºè®­ç»çæ°æ®éåå²æ 8:2 ä¸¤é¨åï¼ä¸é¨åç¨äºè®­ç»ï¼å¦ä¸é¨åç¨äºæ¯ä¸ª epoch ç»æåç testï¼ä»¥å¤æ­å½åæ¨¡åçæ¶æææã\n\nåå©ä¸æä¸­æè¿°çæ¹æ³ï¼æä»¬å¸¸ç¨çåå²æ¹æ³å¦ä¸ï¼\n\n 1. random_split\n\ntrain_size = int(0.8 * len(full_dataset))\ntest_size = len(full_dataset) - train_size\ntrain_dataset, test_dataset = torch.utils.data.random_split(full_dataset, [train_size, test_size])\n\n\n1\n2\n3\n\n\nè¿ä¸ªè¿ç¨çææç­åäºï¼æå¨å¯¹æ°æ®ç´¢å¼è¿è¡shuffleåè¿è¡ååã\n\n 2. SubsetRandomSampler\n\n...\n\ndataset = MyCustomDataset(my_path)\nbatch_size = 16\nvalidation_split = .2\nshuffle_dataset = True\nrandom_seed= 42\n\n# Creating data indices for training and validation splits:\ndataset_size = len(dataset)\nindices = list(range(dataset_size))\nsplit = int(np.floor(validation_split * dataset_size))\nif shuffle_dataset :\n    np.random.seed(random_seed)\n    np.random.shuffle(indices)\ntrain_indices, val_indices = indices[split:], indices[:split]\n\n# Creating PT data samplers and loaders:\ntrain_sampler = SubsetRandomSampler(train_indices)\nvalid_sampler = SubsetRandomSampler(val_indices)\n\ntrain_loader = torch.utils.data.DataLoader(dataset, batch_size=batch_size, sampler=train_sampler)\nvalidation_loader = torch.utils.data.DataLoader(dataset, batch_size=batch_size, sampler=valid_sampler)\n\n# Usage Example:\nnum_epochs = 10\nfor epoch in range(num_epochs):\n    # Train:   \n    for batch_index, (faces, labels) in enumerate(train_loader):\n        # ...\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n\n\nmore docs...\n\n\n# 5 æå¤±å½æ°\n\npytorch ä¸­å¸¸ç¨ç loss æï¼\n\nNAME                   DESCRIBE                   FEATURE                                                      NOTE\nL1 Loss                ç»å¯¹å¼è¯¯å·®                      ä¸»è¦åºç¨å¨åå½ä»»å¡                                                    \nMSE Loss(L2Loss)       åæ¹è¯¯å·®                       ä¸»è¦åºç¨å¨åå½ä»»å¡                                                    \nCrossEntropy Loss      äº¤åçµ                        ä¸»è¦åºç¨å¨å¤åç±»é®é¢ä¸­(äºåç±»ä¹å¯ä»¥ç¨)                                         å®éä¸å®æ¯ç±nn.LogSoftmax()ånn.NLLLoss()ç»æ\nBCE Loss               äºåç±»çäº¤åçµ(ä¸¥æ ¼æç§äº¤åçµçå¬å¼å»ç®)      ä¸è¬åºç¨å¨åæ ç­¾äºåç±»åå¤æ ç­¾äºåç±»                                           \nBCEWithLogits Loss     æ Sigmoid å BCELoss åæä¸æ­¥                                                                å¦ææ³ç¨BCEæå¤±ï¼æ¨èè¿ç§ï¼ä¸éè¦èªå·±åsigmoidé£é¨å\nMultiLabelMarginLoss                              ç¨äºä¸ä¸ªæ ·æ¬å±äºå¤ä¸ªç±»å«æ¶çåç±»ä»»å¡                                           \nNLLLoss                è´å¯¹æ°ä¼¼ç¶æå¤±                    ä¸»è¦åºç¨å¨åç±»ä»»å¡                                                    \nSmoothL1Loss           å¶å®æ¯L2LossåL1Lossçç»å        å½é¢æµå¼åground truthå·®å«è¾å°çæ¶åï¼ç»å¯¹å¼å·®å°äº betaï¼ä½¿ç¨æ¯L2ï¼å½å·®å«å¤§æ¶ï¼ä½¿ç¨ L1 çå¹³ç§»   \nFocal Loss             ä¸»è¦æ¯ä¸ºäºè§£å³é¾ææ ·æ¬æ°éä¸å¹³è¡¡           åªæ¯éå¯¹äºåç±»é®é¢                                                    æ³¨æï¼æåºå«äºæ­£è´æ ·æ¬æ°éä¸å¹³è¡¡, é¾æç¨åº¦å³æåç¨åº¦\nGHM Loss               Focal Loss çåçº§ç                                                                         \n\nmore docs...\n\n\n# 6 ä¼åå¨\n\npytorch ä¸­å¸¸ç¨ç optimizer æï¼\n\nNAME       DESCRIBE                                      GOOD                                                          BAD                    NOTE\nSGD        éæºæ¢¯åº¦ä¸é                                        å¯¹æ¢¯åº¦çè¦æ±å¾ä½ï¼è®¡ç®æ¢¯åº¦å¿«ï¼ãèå¯¹äºå¼å¥çåªå£°ï¼å¤§éççè®ºåå®è·µå·¥ä½è¯æï¼åªè¦åªå£°ä¸æ¯ç¹å«å¤§ï¼SGDé½è½å¾å¥½å°æ¶æã   1.SGDå¨éæºéæ©æ¢¯åº¦çåæ¶ä¼å¼å¥åªå£°   \n                                                                                                                       2.å®¹æé·å¥å±é¨æä¼è§£\nMomentum   SGD çåçº§çï¼ä½¿ç¨å¨éçSGDï¼ä¸»è¦ææ³æ¯å¼å¥ä¸ä¸ªç§¯æåå²æ¢¯åº¦ä¿¡æ¯å¨éæ¥å éSGD   å¨éä¸»è¦è§£å³SGDçä¸¤ä¸ªé®é¢:                                                                      ææä¸ç±»ä¼¼äºå°çåä¸æ»å¨çæ¶åå¸¦ä¸äºæ¯æ§\n                                                         1.éæºæ¢¯åº¦çæ¹æ³ï¼å¼å¥çåªå£°ï¼\n                                                         2.è§£å³äºHessianç©éµçæé®é¢(å¯ä»¥çè§£ä¸ºï¼SGD å¨æ¶æè¿ç¨ä¸­åæ­£ç¡®æ¢¯åº¦ç¸æ¯æ¥åæå¨æ¯è¾å¤§çé®é¢)\nRMSProp    èªéåºå­¦ä¹ çä¼åç®æ³ï¼Momentumçåçº§ç                       ç¸å¯¹äºAdagradï¼ç±äºåäºä¸ªå æå¹³åï¼é¿åäºå­¦ä¹ çè¶æ¥è¶ä½ççé®é¢                                                  å¨ç»éªä¸å·²ç»è¢«è¯ææ¯ä¸ç§ææä¸å®ç¨çæ·±åº¦ç¥ç»ç½ç»ä¼åç®æ³ãç®åå®æ¯æ·±åº¦å­¦ä¹ ä»ä¸èç»å¸¸éç¨çä¼åæ¹æ³ä¹ä¸ã\nAdam       èªéåºå­¦ä¹ çä¼åç®æ³ï¼RMSProp çåçº§ç                       ç¸æ¯äºç¼ºå°ä¿®æ­£å å­å¯¼è´äºé¶ç©ä¼°è®¡å¯è½å¨è®­ç»åæå·æå¾é«åç½®çRMSProp                                                éå¸¸è¢«è®¤ä¸ºå¯¹è¶åæ°çéæ©ç¸å½é²æ£ãä¸è¬æ¯RMSPropè¦å¥½ä¸ç¹ã\n\nææå¦ä¸(å¾çæ¥æºäºäºèç½)ï¼\n\n * æ²é¢ä¸\n   \n * å­å¨éç¹çæ²é¢\n   \n\næ³¨æå°ï¼ä¸¤ä¸ªå¨éä¼åå¨ Momentum å NAG ä»¥å SGD é½é¡ºå¿è¿å¥äºéç¹ãä½ä¸¤ä¸ªå¨éä¼åå¨å¨éç¹æå¨äºä¸ä¼ï¼ä½æç»éç¦»äºéç¹å¹¶è¿éå°ä¸éï¼è SGD å´å§ç»åçå¨äºéç¹ã\n\nå¨å®éåºç¨ä¸­ï¼éæ©åªç§ä¼åå¨åºç»åå·ä½é®é¢ï¼åæ¶ï¼ä¹ä¼åå¨çéæ©ä¹åå³äºä½¿ç¨èå¯¹ä¼åå¨ççæç¨åº¦ï¼æ¯å¦åæ°çè°èç­ç­ï¼ã\n\nmore docs...\n\n\n# 7 æ°æ®æ æ³¨\n\næ°æ®æ æ³¨å·¥å·ï¼\n\nhttps://github.com/topics/annotation-tool\nhttps://github.com/mingx9527/Data_Label_Tools\n  https://github.com/heartexlabs/label-studio\n  https://github.com/tzutalin/labelImg\n  https://github.com/jsbroks/coco-annotator\n  https://github.com/opencv/cvat\n  https://github.com/microsoft/VoTT\n  https://github.com/wkentaro/labelme\n  https://github.com/abreheret/PixelAnnotationTool\n  https://www.robots.ox.ac.uk/~vgg/software/via/\n  https://github.com/Labelbox/Labelbox\n  https://github.com/UniversalDataTool/universal-data-tool\n  https://github.com/DataTurks/DataTurks\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\n\n# To Be Continue ....\n\npytorch-lightning\n  https://pytorch-lightning.readthedocs.io/en/1.0.2/trainer.html\n  https://github.com/3017218062/Pytorch-Lightning-Learning\n  https://blog.csdn.net/weixin_46062098/article/details/109713240\n\n\n1\n2\n3\n4\n\n\n\n# Reference\n\n * github pytorch examples',normalizedContent:'# pytorchå¥é¨: å¿«éãæ·±åº¦\n\n\n# 1 åºç¡åç´ \n\n\n# 1.1 tensor\n\ntensorçå¸¸è§æä½æä½ï¼åæ¬æ¢ä½ãç´¢å¼ãåçãæ°å­¦è¿ç®ãçº¿æ§ç®æ³åéæºæ°ç­ç­ã\n\né¤äº chartensor ä¹å¤ï¼ææç tensor é½å¯ä»¥å¾æ¹ä¾¿çå¨ cpuågpu è¿ç®ä¹é´ç¸äºè½¬æ¢:\n\n    tor = torch.ones(5)\n    if torch.cuda.is_available():\n        tor_cuda = tor.cuda()\n        tor_cpu = tor_cuda.cpu()\n\n\n1\n2\n3\n4\n\n\nè¿éå¼ºè°ä¸ torch ç tensor å numpy ç array ç¸äºè½¬æ¢ï¼gpu tensor ä¸è½ç´æ¥è½¬ä¸º numpy æ°ç»ï¼å¿é¡»åè½¬å° cpu tensorï¼\n\n    import numpy as np\n\n    a_np = np.ones(5)\n    a_tor = torch.ones(5)\n\n    b_np = a_tor.numpy()\n    b_tor = torch.from_numpy(a_np)\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\nè¿éè¦æ³¨æçæ¯ï¼torch ç tensor å numpy ç array ä¼å±äº«ä»ä»¬çå­å¨ç©ºé´ï¼ä¿®æ¹ä¸ä¸ªä¼å¯¼è´å¦å¤çä¸ä¸ªä¹è¢«ä¿®æ¹ã\n\nmore docs...\n\n\n# 1.2 autograd\n\nautograd åæä¾ tensor æææä½çèªå¨æ±å¯¼æ¹æ³ãè¿æ¯ä¸ä¸ªè¿è¡æ¶å®ä¹çæ¡æ¶ï¼è¿æå³çä½ çååä¼ æ­æ¯æ ¹æ®ä½ ä»£ç è¿è¡çæ¹å¼æ¥å®ä¹çï¼å æ­¤æ¯ä¸è½®è¿­ä»£é½å¯ä»¥åä¸ç¸åã\n\nautograd åä¸­æä¸¤ä¸ªéå¸¸éè¦çç±»ï¼variable å functionï¼äºèç¸äºèç³»å¹¶ä¸æå»ºäºä¸ä¸ªæè¿°æ´ä¸ªè¿ç®è¿ç¨çæ ç¯å¾ã\n\nå¶ä¸­ï¼function å®ç°äºä½¿ç¨èªå¨æ±å¯¼æ¹æ³çåé¦ååé¦çå®ä¹ãæ¯ä¸ªvariableçæä½é½ä¼çæè³å°ä¸ä¸ªç¬ç«çfunctionèç¹ï¼ä¸çæäºvariableçå½æ°ç¸è¿ä¹åè®°å½ä¸æä½åå²ã\n\nautograd.variable æ¯è¿ä¸ªåä¸­ææ ¸å¿çç±»ãå®æä¸ä¸ªå¸¸ç¨å±æ§ï¼\n\n * data ï¼ ç¨äºè®¿é®åå§ç tensor\n   * variable åè£äºä¸ä¸ª tensorï¼å¹¶ä¸å ä¹æ¯æææçå®ä¹å¨å¶ä¸çæä½ã\n * creator ï¼ å¼ç¨äºä¸ä¸ªåå»º variable ç functionã(é¤äºç¨æ·åå»ºç variable ä¸­ç creator å±æ§æ¯ none)\n * grad ï¼ å³äºè¿ä¸ variable çæ¢¯åº¦åéä¸­å­å¨äºæ­¤å±æ§\n\nå½éè¿ variable å®ä¹äºå®æ´è®¡ç®åï¼å¯ä»¥è°ç¨è®¡ç®ç»æç .backward() æ¥èªå¨è®¡ç®åºææçæ¢¯åº¦ãå½ç¶ï¼ä¹å¯ä»¥æå® variable ä¸è®¡ç®æ¢¯åº¦ï¼å¦ï¼æå® requires_grad=falseã\n\næèï¼å¦æ a = variable(torch.randn(5, 5), requires_grad=true) + variable(torch.randn(5, 5), requires_grad=false), é£ä¸ª a.requires_grad æ¯ä»ä¹ï¼\n\nmore docs...\n\n\n# 1.3 nn && loss\n\nå¨ pytorch ä¸­ï¼å¯ä»¥ä½¿ç¨ torch.nn åè¿è¡ç¥ç»ç½ç»çæå»ºãnn.moduleä¸­åå«çç¥ç»ç½ç»çå±ï¼åæ¶forward(input)æ¹æ³è½å¤å°outputè¿è¡è¿åã\n\nä¸ä¸ªå¸åçç¥ç»ç½ç»çè®­ç»è¿ç¨æ¯è¿æ ·çï¼\n\n 1. å®ä¹ä¸ä¸ªæçå¯å­¦ä¹ çåæ°ï¼æèæéï¼çç¥ç»ç½ç»\n 2. å¯¹çä¸ä¸ªè¾å¥çæ°æ®éè¿è¡è¿­ä»£:\n    1. ç¨ç¥ç»ç½ç»å¯¹è¾å¥è¿è¡å¤ç\n    2. è®¡ç®ä»£ä»·å¼ (å¯¹è¾åºå¼çä¿®æ­£å°åºæå¤å°)\n    3. éè¿ optimizer(ä¼åå¨) å¯¹æå¤±å½æ°è¿è¡æ¢¯åº¦è®¡ç®ï¼å¹¶å°æ¢¯åº¦ä¼ æ­åç¥ç»ç½ç»çåæ°ä¸­\n    4. æ´æ°ç½ç»ä¸­çæé\n    * éå¸¸ä½¿ç¨ç®åçæ´æ°è§å: weight = weight + learning_rate * gradient\n\nå¨ä¸è¿°è¿ä¸ªè¿ç¨ä¸­ï¼torch.nn.module (ç¥ç»ç½ç»æ¨¡å) æ¯ææ ç½ç»çåºç¡ï¼å¯ä»¥ç¬ç«ç¨ä½ä¸ä¸ªç½ç»ï¼ä¹å¯ä»¥éè¿ç»ååä¸ªç½ç»å±å½¢æç¥ç»ç½ç»è¿è¡è®¡ç®ãæ¨¡åçç»åï¼å¯ä»¥éè¿ä»¥ä¸æ¹å¼å½¢æï¼\n\nè porch.optim å ptorch.nn.mselossç­æå¤±å½æ°ï¼åæ¯å¨ç½ç»è®¡ç®è¿ç¨ä¸­è¿è¡è¿­ä»£ä¼åå¿ä¸å¯å°çé¨åã\n\ndocs...\n\n\n# 1.4 device\n\nå¨ pytorch ä¸­ï¼æä»¬å¯ä»¥éæ©å° tensor è¿è¡å¨ cpu æè gpu ä¸ï¼å¦ä¸ææè¿°çæ¹å¼ï¼tensor.cpu() æ tensor.gpu() å°±å¯ä»¥ç®åçå®ç° cpu å gpu çéæ©æåæ¢ã\n\næäºæ¶åï¼æä»¬æ³å¨ä»£ç çå¨å±ä½ç½®ä¸æå®ä½¿ç¨çè®¾å¤ç±»åï¼ç¶åå°±å¯ä»¥ä¸ç¨ä¿®æ¹çå°ä»£ç è·å¨ gpu æè cpu ä¸ï¼è¿ä¹å¾å®¹æå®ç°ï¼\n\nif gpu_id == -1:\n  device = torch.device("cpu")\nelse:\n  device = torch.device("cuda")\n  torch.cuda.set_device(gpu_id)\n  # torch.cuda.set_device("cuda:1,2") # æå®å¤å¼ æ¾å¡\n\nones = tensor.ones(5).to(device)\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\næ³¨æå°ï¼ä½¿ç¨ cuda æ¶ï¼æä»¬æå®äº gpu_id, å¦æä¸æ¾ç¤ºçè®¾ç½®ï¼é»è®¤ä½¿ç¨ cuda:0ï¼å³ç³»ç»çç¬¬ä¸åæ¾å¡ã\n\nå¦æå¨ä¸ä¸ªèç¹ä¸æå¤å gpuï¼åå«è·åä¸ä¸ªæ¨¡åçä¸ååæ°ï¼è¿æ¶æä»¬å¯ä»¥éè¿ set_device() æ¾ç¤ºçå°æ¨¡ååéå°æä¸ä¸ª cuda ä¸ãè¿æå¶ä»æ¹æ³å¯ä»¥å®ç°åï¼\n\næï¼å¯ä»¥éè¿ cuda_visible_devices ç¯å¢åéæ¥éå¶ cuda ç¨åºæè½ä½¿ç¨ç gpu è®¾å¤ãcuda åºç¨è¿è¡æ¶ï¼cuda å°éåå½åå¯è§çè®¾å¤ï¼å¹¶ä»é¶å¼å§ä¸ºå¯è§è®¾å¤ç¼å·ãè¿æ ·ï¼å°±å¯ä»¥è®©æä»¬çç¨åºé½è®¤ä¸ºèªå·±çå°ç gpu æ¯é¶å·å¼å§ç¼å·çè®¾å¤ã\n\n  cuda_visible_devices=0,2,3 ./cuda_executable\n\n\n1\n\n\nä¹å°±æ¯è¯´éè¿è¿ä¸ªç¯å¢åéï¼å¯ä»¥ä½¿å¾ç³»ç»ä¸­ gpu è®¾å¤çç¼å· å cudaåºç¨çå°çè®¾å¤ç¼å·äº§çä¸ä¸è´ãä½¿ç¨å¾å½çè¯ï¼å¯ä»¥éè¿çµæ´»çéç½® cuda_visible_devices ç¯å¢åéä¸º cuda åºç¨åééè¦çç¡¬ä»¶èµæºã\n\nå¦æä¸º cuda_visible_devices è®¾ç½®äºä¸å­å¨çè®¾å¤ï¼ææå®éè®¾å¤å°è¢«éèï¼cuda åºç¨å°æ æ³ä½¿ç¨ gpu è®¾å¤ï¼å¦æè®¾å¤åºåæ¯å­å¨åä¸å­å¨è®¾å¤çæ··åï¼é£ä¹ä¸å­å¨è®¾å¤åçææå­å¨è®¾å¤å°è¢«éæ°ç¼å·ï¼ä¸å­å¨è®¾å¤ä¹åçææè®¾å¤å°è¢«å±è½ã\n\nå½ç¶ï¼å¯¹äºå¨ä»£ç åéè¿ä»£ç ä¿®æ¹å¯è§è®¾å¤çæåµï¼åªæå¨ä»£ç è®¿é® gpu è®¾å¤ä¹åè®¾ç½® cuda_visible_devices åéæææã\n\nè¿éæä»¬æå°äºå¤ä¸ª gpu è®¾å¤ï¼èªç¶ä¼æ³å°å½è®­ç»è¿­ä»£æ¬¡æ°æèepochè¶³å¤å¤§çæ¶åå¸æç¨å¤ä¸ª gpu æ¥å éè®­ç»ãä¸è¬æä»¬ä¼ä½¿ç¨ï¼net = torch.nn.dataparallel(net, device_ids=[0, 1]) æ¥å®ç°ä½¿ç¨å¤ä¸ª gpu è®­ç»æ¨¡åãæ´å¤å³äºå¤å¡çåå®¹...\n\n\n# 2 æ¨¡å(module)\n\n\n# 2.1 ä¿å­åå è½½\n\npytorch ä¸­æ¨¡åçå­å¨ååå è½½é½æ¯è¾ç®åï¼ä¸è¬æä¸¤ç§æ¹å¼ï¼ç¤ºä¾ä»£ç å¦ä¸ï¼\n\n * ä¿å­æ´ä¸ªç½ç»ï¼ä¿¡æ¯å¨ï¼\n   \n     torch.save(model, path) \n     model = torch.load(path)\n   \n   \n   1\n   2\n   \n * ä¿å­ç½ç»ä¸­çåæ°ï¼éåº¦å¿«ï¼å ç©ºé´å°ï¼\n   \n     # save\n     torch.save(model.state_dict(), path)\n     # load\n     model = mymodel(*args, **kwargs)\n     model.load_state_dict(torch.load(path), strict=true)\n     model.eval()\n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   \n\nload_state_dict() æ¯ nn.module çä¸ä¸ªapiï¼å©ç¨æ¨¡åæä»¶ååºåååå¾å°ç dict æ¥åå§åå½åçæ¨¡åãéè¦æ³¨æ strict åæ°ï¼é»è®¤å¼æ¯ trueãå æ­¤å¨åå§åæ¶åï¼è¯¥å½æ°ä¼ä¸¥æ ¼æ¯è¾æº dict åç®æ  dict ç key æ¯å¦å®å¨ä¸æ ·ãå¦æ strict=falseï¼åå°ä¸ä¼è¿è¡è¿æ ·çä¸¥æ ¼æ£æ¥ï¼åªækeyä¸æ ·çæä¼è¿è¡èµå¼ã\n\nçå°è¿éï¼æ¯å¦å¥½å¥å­å¨çæ¨¡åæä»¶(.pth)éé½åå«äºä»ä¹ä¿¡æ¯ï¼æ¯å¦ï¼æ¨¡åçç½ç»ç»æãmodel.state_dict å·ä½æ¯ä»ä¹åå®¹å¢... æ¥ä¸æ¥æä»¬å°±çç module éé½åå«äºä»ä¹å§ã\n\næ³¨æï¼ä½¿ç¨ torch.nn.dataparallel è®­ç»çæ¨¡åè¦ä¿å­çè¯ï¼æå¥½ä½¿ç¨ torch.save(model.module.state_dict(), path)ãè¿æ ·çè¯ï¼å¨éæ°å è½½ pthæ¨¡åæä»¶ çæ¶åï¼ä¼ææå¤§ççµæ´»æ§ï¼èä¸æ¯åºç°ä¸å¤§å  unexpected keysåmissed keys\n\n\n# 2.2 ç½ç»ç»æ\n\n# æ¨¡å\n\næä»¬åæ¥çç torch.load ç½ç»åï¼å¾å°çæ¯ä»ä¹åå®¹ï¼\n\n  for k in model.keys():\n    print(k)  \n\n\n1\n2\n\n\nåç°å è½½åçæ¨¡åæåä¸ªé®å¼, è§å¯å¶ä¸­çåå®¹ï¼å¯ä»¥åç°ï¼\n\nkey         type          ç¨é\nmodel       ordereddict   ç¸å½äº model.state_dict() çå¼,\n                          å­å¨çææçæ¯ä¸å±çåæ°åç§°ä»¥åå¯¹åºçåæ°å¼ï¼éè¦æ³¨æçæ¯ï¼åæ°åç§°å¯è½å¾é¿\noptimizer   dict          ç¸å½äº optimizer.state_dict() çå¼, ç¨éï¼?\nscheduler   dict          ?\niteration   int           ?\n\næ³¨æï¼è¿éçå°çæ¯éè¿ torch.load å è½½æ¨¡åæä»¶åå¾å°ç dictï¼éè¦è½¬æ¢ä¸ºå·ä½ç model å¯¹è±¡æè½è¢«ç»§ç»­ä½¿ç¨(ç»§ç»­è®­ç» æ æµè¯)\n\n# ç»æ\n\nä¸è¬æä»¬è¦äºè§£å¶ç½ç»ç»æï¼å¾å¾å°å¶å¯è§åæ¯å¸¸ç¨çæ¹å¼ãä»¥å¸¸è§ç pytorch ç .pth æ¨¡åæä»¶ä¸ºä¾:\n\n * ä½¿ç¨ netron å¯è§åå·¥å·ã\n   1. å®è£netronï¼åè github-netron\n   2. æ³¨æ, ä¿å­ç½ç»æ¶è¦ä¿å­å®æ´ç»æï¼ä¸è½åªä¿å­åæ°ï¼å¦åä¸æ­£å¸¸å·¥ä½\n * ä½¿ç¨ tensorwatch (å¾®è½¯)\n   1. å®è£ãä½¿ç¨ï¼åè github-tensorwatch\n   2. åè½å¼ºå¤§ï¼tensorwatch is under heavy development with a goal of providing a platform for debugging machine learning in one easy to use, extensible, and hackable package.\n\nå¦å¤ï¼è¿å¯ä»¥ç´æ¥ä½¿ç¨ print(model_obj) (ä¾é __repr__æºå¶)æå°åºæ¨¡åçç¸å³ä¿¡æ¯ï¼ç»ååºç½ç»ä¿¡æ¯ã\n\n\n# 2.3 æå\n\nç®åçäºè§£ pytorch åï¼æä»¬ç¥éï¼ææå®ä¹çç½ç»ç»æé½å¿é¡»è¦ç»§æ¿ï¼torch.nn.module ç±»ãä¾å¦ï¼\n\n  class mymodel(nn.module):\n    def __init__(self):\n      super(mymodel, self).__init__()\n      self.my_tensor = torch.randn(1) # æ¨¡åç±»æååé\n      self.register_buffer(\'my_buffer\', torch.randn(1)) # èªå®ä¹ buffer\n      # éè¿ä¸¤ç§æ¹å¼å®ä¹ paramter\n      self.p1 = nn.paramter.paramter(torch.tensor(1.0))\n      print(self._parameters)\n      self.p2 = nn.paramter(torch.tensor(2.0))\n      print(self._parameters)\n      \n    def forward(self, x):\n      return x\t\n\n  model = mymodel()\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\næ¥ç torch.nn.module ç±»å®ç°ï¼ä¼åç°å¶åå«äºä»¥ä¸æååéï¼\n\nåå­                            ç±»å            ç¨é\n_modules                      ordereddict   å¯ä»¥éè¿ model.state_dict() å¾å°å¶ä¸­çå¼\n_parameters                   ordereddict   \n_buffers                      ordereddict   \n_state_dict_hooks             ordereddict   \n_load_state_dict_pre_hooks    ordereddict   \n_forward_pre_hooks            ordereddict   \n_forward_hooks                ordereddict   \n_backward_hooks               ordereddict   \n_non_persistent_buffers_set   set           \n\n# _parameters\n\nå­å¨çå¼ç±»åä¸ºï¼nn.parameter.paramterï¼ä¹å°±æ¯æ¨¡åä¸­å­å¨çåæ°ãä¸è¬çï¼å®å°±æ¯è®­ç»è¿ç¨ä¸­éè¦æ±è§£çåæ°ï¼ä¹å°±æ¯è¯´éè¦è¿è¡ååä¼ æ­ãæä»¥ï¼å®æä¸ä¸ªç¹ç¹æ¯ï¼é»è®¤ç requires_grad=trueã\n\nè¿ééè¿ä¸ä¸ªç®åç module æ¥äºè§£ä¸ _parametersãä¾å¦ï¼æ¨¡å torch.nn.linear éå¸¸ç± weightåbias åæ°ç»æï¼\n\n  # å®ä¹ä¸ä¸ª module\n  fc = torch.nn.linear(2,2)\n\n  # è¯»å _parameters: æ¹å¼a\n  fc._parameters\n  \n  # è¯»å _parameters: æ¹å¼b\n  for n, p in fc.named_parameters():\n    pring(n, p)\n  \n  # è¯»å _parameters: æ¹å¼c\n  for p in fc.parameters():\n    print(p)\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\næ³¨æï¼ æµè¯ä»£ç æ¶ï¼ä¼åç° requires_grad å±æ§é»è®¤ä¸º trueãå¦å¤å°±æ¯ï¼æ¨èåè¾¹ä¸¤ç§éè¿è¿­ä»£å¨çæ¹å¼è¿è¡è¯»åï¼ä»¥é¿ååæ°éå¸¸å¤æ¶ï¼ç¬¬ä¸ç§æ¹å¼å ç¨è¿å¤èµæºã è¿éæä¸ä¸ï¼weight(æé) å bias(åç½®é) çä½ç¨ï¼weight å³å®ç½ç»çå½¢ç¶ï¼biasç»ç½ç»å¢å å¹³ç§»(æ³å)çè½å\n\nå¦æè¿è¡äº mymodel æ¨¡åå®ä¹çä»£ç ï¼å°±ä¼åç°ä¸ä¸ªå¥æªçç°è±¡ï¼self.p1 å self.p2 èµå¼åï¼æ¨¡åç _parameters åæ°é½ä¼åçç¸åºçåå(è¢«å å¥å°äº_parametersä¸­)ï¼è¿æ¯æä¹åäºå¢ï¼\n\n 1. é¦åè¿è¡super(mymodel, self).init()ï¼è¿æ ·mymodelå°±åå§åäº_paramtersç­ä¸ç³»åçorderdictï¼æ­¤æ¶ææåéè¿é½æ¯ç©ºçã\n 2. self.p1 = nn.paramter.paramter(torch.tensor(1.0)): è¿è¡ä»£ç ä¼è§¦å nn.module é¢å®ä¹å¥½ç setattr å½æ°ãæºç çæ®µå¦ä¸ï¼\n\n  def __setattr__(self, name, value):\n    ...\n    params = self.__dict__.get(\'_parameters\')\n    if isinstance(value, parameter):\n      if params is none:\n        raise attributeerror(\n          "cannot assign parameters before module.__init__() call")\n      remove_from(self.__dict__, self._buffers, self._modules)\n      self.register_parameter(name, value)\n    ...\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\nåç° setattr å½æ°çä½ç¨ï¼ç®åè¯´å°±æ¯æ£æ¥å®ä¹çåæ°ç±»å, å¦ææ­£ç¡®å°±ç»§ç»­è°ç¨ register_parameter å½æ°è¿è¡æ³¨åï¼è¿ä¸ªå½æ°å°±æ´ç®åäºï¼æä»¬ç®åå³å¿çå°±æ¯å®åäºä¸é¢è¿ä»¶äº\n\n  def register_parameter(self,name,param):\n    ...\n    self._parameters[name]=param\n    ...\n\n\n1\n2\n3\n4\n\n\nå¦å¤ï¼ setattr è¿å¯ä»¥å¤ç module ç±»åï¼å½ value æ¯ nn.module ç±»åæ¶ï¼ä¹ä¼è¿è¡ç¸åºçå¤çå¨ä½ã\n\n# _buffers\n\nå _parameters ç¨äºååä¼ æ­ä¸åï¼ä¸è¬ç¨äºå­å¨éè¦æä¹åï¼ä½åä¸æ¯ç½ç»(ä¸éè¦åä¸ååä¼ æ­ç)åæ°ï¼ä½¿ç¨æ¹å¼ï¼self.register_buffer(\'my_buffer\', torch.randn(1))\n\n\n# 2.4 ç»æ\n\nå¨æå»ºæ°çæ¨¡åæ¶ï¼å¯ä»¥éè¿å¤ä¸ªå°æ¨¡åç»åå½¢æå¤æçç½ç»æ¨¡åï¼å¦ï¼\n\n  # ä¸»å¨è®¾ç½® name \n  from collections import ordereddict\n  model = nn.sequential(ordereddict([ (\'conv1\', nn.conv2d(1,20,5)), (\'relu1\', nn.relu())]))\n\n  # èªå¨è®¾ç½® name: ä»¥å¨ layers ä¸­çç´¢å¼ä¸º name\n  layers = []\n  layers.append(nn.conv2d(curr_dim, 3, kernel_size=7, stride=1, padding=3, bias=false))\n  layers.append(nn.tanh())\n  model = nn.sequential(*layers)\n\n  # èªå¨è®¾ç½® name: ä»¥å¨ layers ä¸­çç´¢å¼ä¸º name\n  model = nn.modulelist([nn.conv2d(curr_dim, 3), nn.tanh()]))\n\n  # æ¥çç½ç»ç»æ\n  print(model)\n\n  # æ¥çæ¨¡åçåæ°åè¡¨\n  params=model.state_dict() \n  for k,v in params.items():\n    print(k, v)    #æå°ç½ç»çåéåãparam\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n\n\néè¿ä¸æï¼æä»¬ç¥é model.state_dict å­å¨äºç½ç»æ¨¡åçç¸å³åæ°ä¿¡æ¯ï¼è¿ä¸ªä¿¡æ¯å­å¨å¨ ordereddict ä¸­ï¼é£ä¹ key å value ååå«æ¯ä»ä¹å¢ï¼\n\néè¿ä¸è¿°ç¤ºä¾ä»£ç ï¼æä»¬å¯ä»¥æ¥ç state_dict çåå®¹ï¼è¿éä¸»è¦è¯´æä¸ key ççæï¼å¶æ ¼å¼ä¸ºï¼prefix + param_name_in_module + name + "." [ + ... ]ï¼å¦ææ¨¡åè¿­ä»£ï¼åç»§ç»­è¿ä¸ªæ ¼å¼ç´å°æç»çåéãå¶ä¸­ï¼prefix é»è®¤ä¸º ââï¼name å¦ææ²¡æä¸»å¨å£°æï¼åé»è®¤ä¸ºç»åæ¨¡åç layers ä¸­çç´¢å¼.\n\næèï¼å¦æå layers éæ·»å  [nn.conv2d(), nn.conv2d()] ä¼æä¹æ ·ï¼\n\n\n# 3 æ°æ®åæ¢æä½\n\nè¿éä¸»è¦ä»ç»ä¸ pytorch ä¸­ torchvision.transforms æä¾çå ç§æ°æ®å¢å¼ºå½æ°çä½¿ç¨ãå¨å è½½æ°æ®æ¶ï¼å¯ä»¥éè¿æå® transforms.compose() æ¹ä¾¿ãé«æçè¿è¡æ°æ®é¢å¤çã\n\n\n# å¸¸ç¨æ¹æ³(å±ï¼5ç±»22ç§)\n\næµè¯ä»£ç ï¼\n\n  from torchvision import transforms\n  from pil import image\n  import torch\n  \n  img = image.open("img_path")\n  transform = transforms.compose([\n    transforms.totensor(),\n    transforms.topilimage()\n    # ... more\n  ])\n  new_img = transform(img)\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n# åºç¡æä½\n\n# transforms.totensor()\n\n# transforms.lambda()\n\n  lambd = lambda x: tf.rotate(x, 100)\n  transforms.lambda(lambd)\n\n\n1\n2\n\n\napply a user-defined lambda as a transform. æ ¹æ®ç¨æ·èªå®ä¹çæ¹å¼è¿è¡åæ¢\n\n# transforms.topilimage()\n\n# transforms.normalize(mean, std)\n\n# éæºåºç¨\n\n# transforms.randomapply(transforms, p=0.5)\n\nç»å®ä¸å®æ¦çä»ä¸ç» transformations åºç¨\n\n# transforms.randomchoice(transforms)\n\napply single transformation randomly picked from a list\n\n# transforms.randomorder\n\napply a list of transformations in a random order\n\n# åªè£ãå¡«å\n\n# transforms.resize()\n\n# transforms.pad()\n\npadding_modeï¼å¡«åçæ¨¡å¼ï¼constant, edgeï¼å¡«åå¼ä¸ºè¾¹ç¼ï¼, reflect (ä»è¾¹ç¼å¾åä¸ä¸ªåç´ å¼å§åéå) or symmetricï¼ä»è¾¹ç¼åéåï¼\n\n# transforms.centercrop\n\ncrops the given pil image at the center\n\n# transforms.randomcrop\n\ncrop the given pil image at a random location. éæºè¿è¡è£åª\n\n# transforms.randomresizedcrop\n\ncrop the given pil image to random size and aspect ratio. è£åªç»å®ç pil å¾åå°éæºçå°ºå¯¸åé¿å®½æ¯ã\n\n# transforms.fivecrop\n\nå°ç»å®ç pil å¾åè£åªæåä¸ªè§åä¸­é´çè£åª\n\n# transforms.tencrop\n\nè£åªä¸å¼ å¾çç 4 ä¸ªè§ä»¥åä¸­é´å¾å°æå®å¤§å°çå¾çï¼å¹¶ä¸è¿è¡æ°´å¹³ç¿»è½¬ / ç«ç´ç¿»è½¬ å± 10 å¼ \n\n# ä»¿å°åæ¢\n\n# transforms.randomhorizontalflip(p=0.5) ãtransforms.randomverticalflip(p=0.5)\n\nhorizontally/vertically flip the given pil image randomly with a given probability. æä¸å®æ¦çè¿è¡æ°´å¹³ / ç«ç´ç¿»è½¬\n\n# transforms.randomrotation\n\nä¸å®è§åº¦æè½¬å¾å\n\n# transforms.randomaffine\n\nä¿æå¾åä¸­å¿ä¸åçéæºä»¿å°åæ¢ï¼å¯ä»¥è¿è¡éå¿ææ¬²çåå\n\n# transforms.randomperspective\n\nå¯¹ç»å®ç pil å¾åä»¥ç»å®çæ¦çéæºè¿è¡éè§åæ¢\n\n# transforms.lineartransformation()\n\nå¸¸åºç¨äº ç½åï¼ä»¥å»é¤è¾å¥æ°æ®çåä½ä¿¡æ¯ãåè®¾è®­ç»æ°æ®æ¯å¾åï¼ç±äºå¾åä¸­ç¸é»åç´ ä¹é´å·æå¾å¼ºçç¸å³æ§ï¼æä»¥ç¨äºè®­ç»æ¶è¾å¥æ¯åä½çï¼ç½åçç®çå°±æ¯éä½è¾å¥çåä½æ§ã\n\n# é¢è²ç¸å³\n\n# transforms.colorjitter\n\nrandomly change the brightness, contrast and saturation of an image. éæºæ¹åå¾åçäº®åº¦ãå¯¹æ¯åº¦åé¥±ååº¦\n\n# transforms.grayscale\n\nè½¬æ¢å¾åç°åº¦ã\n\n# transforms.randomgrayscale\n\nrandomly convert image to grayscale with a probability of p (default 0.1). ä»¥ä¸å®çæ¦çå¯¹å¾åè¿è¡ç°åº¦åï¼è½¬æ¢åçå¾çè¿æ¯ 3 ééç\n\nmore docs...\n\n\n# 4 æ°æ®å è½½\n\npytorch ä¸­å¯¹æ°æ®éåå¤ççæ¹æ³éä¸­å¨ torch.utils.data åä¸­ï¼ä¸»è¦åå«äºä»¥ä¸æ¹æ³ï¼\n\nclass                                                      description                       additions\ntorch.utils.data.dataset                                   ä¸ä¸ªæ½è±¡ç±»ï¼ ææå¶ä»ç±»çæ°æ®éç±»é½åºè¯¥æ¯å®çå­ç±»         å¶å­ç±»å¿é¡»éè½½ä¸¤ä¸ªéè¦çå½æ°ï¼len(æä¾æ°æ®éçå¤§å°ï¼ãgetitem(æ¯ææ´æ°ç´¢å¼)\ntorch.utils.data.tensordataset                             å°è£ætensorçæ°æ®éï¼æ¯ä¸ä¸ªæ ·æ¬é½éè¿ç´¢å¼å¼ éæ¥è·å¾     \ntorch.utils.data.concatdataset                             è¿æ¥ä¸åçæ°æ®éä»¥æææ´å¤§çæ°æ°æ®é                \ntorch.utils.data.subset(dataset, indices)                  è·åæå®ä¸ä¸ªç´¢å¼åºåå¯¹åºçå­æ°æ®é                 \ntorch.utils.data.dataloader                                æ°æ®å è½½å¨, ç»åäºä¸ä¸ªæ°æ®éåéæ ·å¨ï¼å¹¶æä¾å³äºæ°æ®çè¿­ä»£å¨   \ntorch.utils.data.random_split(dataset, lengths)            æç§ç»å®çé¿åº¦å°æ°æ®éååææ²¡æéå çæ°æ°æ®éç»å         \n                                                                                             \ntorch.utils.data.sampler(data_source)                      ææéæ ·çå¨çåºç±»                         æ¯ä¸ªéæ ·å¨å­ç±»é½éè¦æä¾ iter æ¹-æ³ä»¥æ¹ä¾¿è¿­ä»£å¨è¿è¡ç´¢å¼ åä¸ä¸ª lenæ¹æ³ ä»¥æ¹ä¾¿è¿åè¿­ä»£å¨çé¿åº¦ã\ntorch.utils.data.sequentialsampler                         é¡ºåºéæ ·æ ·æ¬ï¼å§ç»æç§åä¸ä¸ªé¡ºåº                  \ntorch.utils.data.randomsampler                             æ æ¾åå°éæºéæ ·æ ·æ¬åç´                       \ntorch.utils.data.subsetrandomsampler                       æ æ¾åå°æç§ç»å®çç´¢å¼åè¡¨éæ ·æ ·æ¬åç´                \ntorch.utils.data.weightedrandomsampler                     æç§ç»å®çæ¦çæ¥éæ ·æ ·æ¬                      \ntorch.utils.data.batchsampler(sampler, batch_size,         å¨ä¸ä¸ªbatchä¸­å°è£ä¸ä¸ªå¶ä»çéæ ·å¨               \ndrop_last)\ntorch.utils.data.distributed.distributedsampler(dataset,   éæ ·å¨å¯ä»¥çº¦ææ°æ®å è½½è¿æ°æ®éçå­é                \nnum_replicas=none, rank=none)\n\n\n# æ°æ®éæ ·(åå)\n\nå¨è¿è¡è®­ç»æ¶ï¼å¸¸å°ç¨äºè®­ç»çæ°æ®éåå²æ 8:2 ä¸¤é¨åï¼ä¸é¨åç¨äºè®­ç»ï¼å¦ä¸é¨åç¨äºæ¯ä¸ª epoch ç»æåç testï¼ä»¥å¤æ­å½åæ¨¡åçæ¶æææã\n\nåå©ä¸æä¸­æè¿°çæ¹æ³ï¼æä»¬å¸¸ç¨çåå²æ¹æ³å¦ä¸ï¼\n\n 1. random_split\n\ntrain_size = int(0.8 * len(full_dataset))\ntest_size = len(full_dataset) - train_size\ntrain_dataset, test_dataset = torch.utils.data.random_split(full_dataset, [train_size, test_size])\n\n\n1\n2\n3\n\n\nè¿ä¸ªè¿ç¨çææç­åäºï¼æå¨å¯¹æ°æ®ç´¢å¼è¿è¡shuffleåè¿è¡ååã\n\n 2. subsetrandomsampler\n\n...\n\ndataset = mycustomdataset(my_path)\nbatch_size = 16\nvalidation_split = .2\nshuffle_dataset = true\nrandom_seed= 42\n\n# creating data indices for training and validation splits:\ndataset_size = len(dataset)\nindices = list(range(dataset_size))\nsplit = int(np.floor(validation_split * dataset_size))\nif shuffle_dataset :\n    np.random.seed(random_seed)\n    np.random.shuffle(indices)\ntrain_indices, val_indices = indices[split:], indices[:split]\n\n# creating pt data samplers and loaders:\ntrain_sampler = subsetrandomsampler(train_indices)\nvalid_sampler = subsetrandomsampler(val_indices)\n\ntrain_loader = torch.utils.data.dataloader(dataset, batch_size=batch_size, sampler=train_sampler)\nvalidation_loader = torch.utils.data.dataloader(dataset, batch_size=batch_size, sampler=valid_sampler)\n\n# usage example:\nnum_epochs = 10\nfor epoch in range(num_epochs):\n    # train:   \n    for batch_index, (faces, labels) in enumerate(train_loader):\n        # ...\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n\n\nmore docs...\n\n\n# 5 æå¤±å½æ°\n\npytorch ä¸­å¸¸ç¨ç loss æï¼\n\nname                   describe                   feature                                                      note\nl1 loss                ç»å¯¹å¼è¯¯å·®                      ä¸»è¦åºç¨å¨åå½ä»»å¡                                                    \nmse loss(l2loss)       åæ¹è¯¯å·®                       ä¸»è¦åºç¨å¨åå½ä»»å¡                                                    \ncrossentropy loss      äº¤åçµ                        ä¸»è¦åºç¨å¨å¤åç±»é®é¢ä¸­(äºåç±»ä¹å¯ä»¥ç¨)                                         å®éä¸å®æ¯ç±nn.logsoftmax()ånn.nllloss()ç»æ\nbce loss               äºåç±»çäº¤åçµ(ä¸¥æ ¼æç§äº¤åçµçå¬å¼å»ç®)      ä¸è¬åºç¨å¨åæ ç­¾äºåç±»åå¤æ ç­¾äºåç±»                                           \nbcewithlogits loss     æ sigmoid å bceloss åæä¸æ­¥                                                                å¦ææ³ç¨bceæå¤±ï¼æ¨èè¿ç§ï¼ä¸éè¦èªå·±åsigmoidé£é¨å\nmultilabelmarginloss                              ç¨äºä¸ä¸ªæ ·æ¬å±äºå¤ä¸ªç±»å«æ¶çåç±»ä»»å¡                                           \nnllloss                è´å¯¹æ°ä¼¼ç¶æå¤±                    ä¸»è¦åºç¨å¨åç±»ä»»å¡                                                    \nsmoothl1loss           å¶å®æ¯l2lossål1lossçç»å        å½é¢æµå¼åground truthå·®å«è¾å°çæ¶åï¼ç»å¯¹å¼å·®å°äº betaï¼ä½¿ç¨æ¯l2ï¼å½å·®å«å¤§æ¶ï¼ä½¿ç¨ l1 çå¹³ç§»   \nfocal loss             ä¸»è¦æ¯ä¸ºäºè§£å³é¾ææ ·æ¬æ°éä¸å¹³è¡¡           åªæ¯éå¯¹äºåç±»é®é¢                                                    æ³¨æï¼æåºå«äºæ­£è´æ ·æ¬æ°éä¸å¹³è¡¡, é¾æç¨åº¦å³æåç¨åº¦\nghm loss               focal loss çåçº§ç                                                                         \n\nmore docs...\n\n\n# 6 ä¼åå¨\n\npytorch ä¸­å¸¸ç¨ç optimizer æï¼\n\nname       describe                                      good                                                          bad                    note\nsgd        éæºæ¢¯åº¦ä¸é                                        å¯¹æ¢¯åº¦çè¦æ±å¾ä½ï¼è®¡ç®æ¢¯åº¦å¿«ï¼ãèå¯¹äºå¼å¥çåªå£°ï¼å¤§éççè®ºåå®è·µå·¥ä½è¯æï¼åªè¦åªå£°ä¸æ¯ç¹å«å¤§ï¼sgdé½è½å¾å¥½å°æ¶æã   1.sgdå¨éæºéæ©æ¢¯åº¦çåæ¶ä¼å¼å¥åªå£°   \n                                                                                                                       2.å®¹æé·å¥å±é¨æä¼è§£\nmomentum   sgd çåçº§çï¼ä½¿ç¨å¨éçsgdï¼ä¸»è¦ææ³æ¯å¼å¥ä¸ä¸ªç§¯æåå²æ¢¯åº¦ä¿¡æ¯å¨éæ¥å ésgd   å¨éä¸»è¦è§£å³sgdçä¸¤ä¸ªé®é¢:                                                                      ææä¸ç±»ä¼¼äºå°çåä¸æ»å¨çæ¶åå¸¦ä¸äºæ¯æ§\n                                                         1.éæºæ¢¯åº¦çæ¹æ³ï¼å¼å¥çåªå£°ï¼\n                                                         2.è§£å³äºhessianç©éµçæé®é¢(å¯ä»¥çè§£ä¸ºï¼sgd å¨æ¶æè¿ç¨ä¸­åæ­£ç¡®æ¢¯åº¦ç¸æ¯æ¥åæå¨æ¯è¾å¤§çé®é¢)\nrmsprop    èªéåºå­¦ä¹ çä¼åç®æ³ï¼momentumçåçº§ç                       ç¸å¯¹äºadagradï¼ç±äºåäºä¸ªå æå¹³åï¼é¿åäºå­¦ä¹ çè¶æ¥è¶ä½ççé®é¢                                                  å¨ç»éªä¸å·²ç»è¢«è¯ææ¯ä¸ç§ææä¸å®ç¨çæ·±åº¦ç¥ç»ç½ç»ä¼åç®æ³ãç®åå®æ¯æ·±åº¦å­¦ä¹ ä»ä¸èç»å¸¸éç¨çä¼åæ¹æ³ä¹ä¸ã\nadam       èªéåºå­¦ä¹ çä¼åç®æ³ï¼rmsprop çåçº§ç                       ç¸æ¯äºç¼ºå°ä¿®æ­£å å­å¯¼è´äºé¶ç©ä¼°è®¡å¯è½å¨è®­ç»åæå·æå¾é«åç½®çrmsprop                                                éå¸¸è¢«è®¤ä¸ºå¯¹è¶åæ°çéæ©ç¸å½é²æ£ãä¸è¬æ¯rmspropè¦å¥½ä¸ç¹ã\n\nææå¦ä¸(å¾çæ¥æºäºäºèç½)ï¼\n\n * æ²é¢ä¸\n   \n * å­å¨éç¹çæ²é¢\n   \n\næ³¨æå°ï¼ä¸¤ä¸ªå¨éä¼åå¨ momentum å nag ä»¥å sgd é½é¡ºå¿è¿å¥äºéç¹ãä½ä¸¤ä¸ªå¨éä¼åå¨å¨éç¹æå¨äºä¸ä¼ï¼ä½æç»éç¦»äºéç¹å¹¶è¿éå°ä¸éï¼è sgd å´å§ç»åçå¨äºéç¹ã\n\nå¨å®éåºç¨ä¸­ï¼éæ©åªç§ä¼åå¨åºç»åå·ä½é®é¢ï¼åæ¶ï¼ä¹ä¼åå¨çéæ©ä¹åå³äºä½¿ç¨èå¯¹ä¼åå¨ççæç¨åº¦ï¼æ¯å¦åæ°çè°èç­ç­ï¼ã\n\nmore docs...\n\n\n# 7 æ°æ®æ æ³¨\n\næ°æ®æ æ³¨å·¥å·ï¼\n\nhttps://github.com/topics/annotation-tool\nhttps://github.com/mingx9527/data_label_tools\n  https://github.com/heartexlabs/label-studio\n  https://github.com/tzutalin/labelimg\n  https://github.com/jsbroks/coco-annotator\n  https://github.com/opencv/cvat\n  https://github.com/microsoft/vott\n  https://github.com/wkentaro/labelme\n  https://github.com/abreheret/pixelannotationtool\n  https://www.robots.ox.ac.uk/~vgg/software/via/\n  https://github.com/labelbox/labelbox\n  https://github.com/universaldatatool/universal-data-tool\n  https://github.com/dataturks/dataturks\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\n\n# to be continue ....\n\npytorch-lightning\n  https://pytorch-lightning.readthedocs.io/en/1.0.2/trainer.html\n  https://github.com/3017218062/pytorch-lightning-learning\n  https://blog.csdn.net/weixin_46062098/article/details/109713240\n\n\n1\n2\n3\n4\n\n\n\n# reference\n\n * github pytorch examples',charsets:{cjk:!0}},{title:"Single Image Super Resolution",frontmatter:{title:"Single Image Super Resolution",date:"2021-04-25T19:41:00.000Z",description:"è¶åè¾¨ç",categories:["imgproc"],tags:["SISR"],permalink:null},regularPath:"/blog/skills/ai/super_resolution.html",relativePath:"blog/skills/ai/super_resolution.md",key:"v-386d6b3f",path:"/blog/skills/ai/super_resolution.html",headers:[{level:2,title:"1. è°ç ",slug:"_1-è°ç ",normalizedTitle:"1. è°ç ",charIndex:36},{level:2,title:"3. Reference",slug:"_3-reference",normalizedTitle:"3. reference",charIndex:1874}],headersStr:"1. è°ç  3. Reference",content:"# Single Image Super Resolution\n\n\n# 1. è°ç \n\ndone: 2021-04-25\n\nNAME      ATTR                                  PUBLISHED   NOTE                                                GITHUB\nvideo2x   x                                     x           åªæ¯åºç¨æ¡æ¶ï¼éè¦ä¸è¿°ç®æ³é©±å¨                                     https://github.com/k4yt3x/video2x\nBSRGAN    x                                     2021        x                                                   https://github.com/cszn/BSRGAN\nReal-SR   ç¸å½æ¢ï¼æ¯USRNetæ¢å¾å¤                        2020        winner of CVPR NTIRE 2020 Challenge on Real-World   https://github.com/Tencent/Real-SR\n                                                            Super-Resolution\nUSRNet    å°å¾çéåº¦å¨ç§çº§ï¼æææ¯ RCAN å¥½ï¼èªæµæ¯ Real-SR ä¹è¦å¥½   CVPR 2020   x                                                   https://github.com/cszn/USRNet\nwaifu2x   x                                     x           github ç star æ¯è¾å¤                                   https://github.com/nagadomi/waifu2x/\nRCAN      x                                     ECCV 2018   x                                                   https://github.com/xinntao/BasicSR\nESRGAN    x                                     ECCV 2018   æ¯ RCAN æ´æåºç°ï¼è½ç¶ PSNR å¼æ¯ RCAN ç¨ä½ï¼ä½è§è§æææ´é«              https://github.com/xinntao/ESRGAN\nSRMD      x                                     x           CVPR 2018                                           https://github.com/cszn/KAIR\nAnime4K   x                                     x           non-machine-learning based                          https://github.com/bloc97/Anime4K\n\néå¯¹æ¨¡ææ°æ®è®­ç»çSISRæ¨¡åé¾ä»¥æ³åå°çå®åºæ¯çé®é¢ï¼ä½èè®¤ä¸ºæå»ºä¸ä¸ªçå®è¶åæ°æ®éå¾æå¿è¦æ§ãéè¿å¯¹åä¸åºæ¯éç¨åä¸ç¸æºä»¥ä¸åçç¦è·ééæ°æ®çæ¹æ³æå»ºäºä¸ä¸ªçå®çRealSRæ°æ®é\n\nè¿æå¾å¤å¶ä»çç®æ³ï¼æ¯å¦ https://github.com/cszn/KAIR å https://github.com/xinntao/BasicSR ä¸­é½å®ç°äºå¾å¤å¶ä»ç®æ³...\n\n * image-super-resolution: https://github.com/idealo/image-super-resolution\n * åç¼©ï¼https://github.com/caoscott/SReC\n\n\n# 3. Reference\n\n * https://blog.csdn.net/gwplovekimi/article/details/83041627\n * https://zhuanlan.zhihu.com/p/143380729",normalizedContent:"# single image super resolution\n\n\n# 1. è°ç \n\ndone: 2021-04-25\n\nname      attr                                  published   note                                                github\nvideo2x   x                                     x           åªæ¯åºç¨æ¡æ¶ï¼éè¦ä¸è¿°ç®æ³é©±å¨                                     https://github.com/k4yt3x/video2x\nbsrgan    x                                     2021        x                                                   https://github.com/cszn/bsrgan\nreal-sr   ç¸å½æ¢ï¼æ¯usrnetæ¢å¾å¤                        2020        winner of cvpr ntire 2020 challenge on real-world   https://github.com/tencent/real-sr\n                                                            super-resolution\nusrnet    å°å¾çéåº¦å¨ç§çº§ï¼æææ¯ rcan å¥½ï¼èªæµæ¯ real-sr ä¹è¦å¥½   cvpr 2020   x                                                   https://github.com/cszn/usrnet\nwaifu2x   x                                     x           github ç star æ¯è¾å¤                                   https://github.com/nagadomi/waifu2x/\nrcan      x                                     eccv 2018   x                                                   https://github.com/xinntao/basicsr\nesrgan    x                                     eccv 2018   æ¯ rcan æ´æåºç°ï¼è½ç¶ psnr å¼æ¯ rcan ç¨ä½ï¼ä½è§è§æææ´é«              https://github.com/xinntao/esrgan\nsrmd      x                                     x           cvpr 2018                                           https://github.com/cszn/kair\nanime4k   x                                     x           non-machine-learning based                          https://github.com/bloc97/anime4k\n\néå¯¹æ¨¡ææ°æ®è®­ç»çsisræ¨¡åé¾ä»¥æ³åå°çå®åºæ¯çé®é¢ï¼ä½èè®¤ä¸ºæå»ºä¸ä¸ªçå®è¶åæ°æ®éå¾æå¿è¦æ§ãéè¿å¯¹åä¸åºæ¯éç¨åä¸ç¸æºä»¥ä¸åçç¦è·ééæ°æ®çæ¹æ³æå»ºäºä¸ä¸ªçå®çrealsræ°æ®é\n\nè¿æå¾å¤å¶ä»çç®æ³ï¼æ¯å¦ https://github.com/cszn/kair å https://github.com/xinntao/basicsr ä¸­é½å®ç°äºå¾å¤å¶ä»ç®æ³...\n\n * image-super-resolution: https://github.com/idealo/image-super-resolution\n * åç¼©ï¼https://github.com/caoscott/srec\n\n\n# 3. reference\n\n * https://blog.csdn.net/gwplovekimi/article/details/83041627\n * https://zhuanlan.zhihu.com/p/143380729",charsets:{cjk:!0}},{title:"docker åºç¡ç¥è¯",frontmatter:{title:"docker åºç¡ç¥è¯",date:"2019-12-18T00:00:00.000Z",lastmod:null,description:"docker åºç¡ç¥è¯æ±æ»ï¼ä»¥åå¸¸è§æä½",categories:["skills","devops"],tags:[null],permalink:null},regularPath:"/blog/skills/devops/docker-base.html",relativePath:"blog/skills/devops/docker-base.md",key:"v-0e5e6773",path:"/blog/skills/devops/docker-base.html",headers:[{level:2,title:"éç½®æº",slug:"éç½®æº",normalizedTitle:"éç½®æº",charIndex:67},{level:2,title:"dockerfile",slug:"dockerfile",normalizedTitle:"dockerfile",charIndex:278},{level:2,title:"å¤é¶æ®µæå»º",slug:"å¤é¶æ®µæå»º",normalizedTitle:"å¤é¶æ®µæå»º",charIndex:4153},{level:2,title:"æ°æ®ç®¡ç",slug:"æ°æ®ç®¡ç",normalizedTitle:"æ°æ®ç®¡ç",charIndex:4163},{level:2,title:"Docker ä¸åå®¢",slug:"docker-ä¸åå®¢",normalizedTitle:"docker ä¸åå®¢",charIndex:5263},{level:2,title:"Docker åºå±å®ç°",slug:"docker-åºå±å®ç°",normalizedTitle:"docker åºå±å®ç°",charIndex:5850},{level:2,title:"operations",slug:"operations",normalizedTitle:"operations",charIndex:5898},{level:2,title:"å®¹å¨",slug:"å®¹å¨",normalizedTitle:"å®¹å¨",charIndex:29}],headersStr:"éç½®æº dockerfile å¤é¶æ®µæå»º æ°æ®ç®¡ç Docker ä¸åå®¢ Docker åºå±å®ç° operations å®¹å¨",content:'# Docker åºç¡ä½¿ç¨æå\n\néåï¼ Image ï¼ãå®¹å¨ ï¼ Container ï¼ãä»åºï¼ Repository ï¼\n\n\n# éç½®æº\n\n * éç½®å½åimage ä¸è½½æº\n   * vi /etc/docker/daemon.json\n   \n       {\n           "registry-mirrors": [\n               "https://registry.docker-cn.com"\n           ]\n       }\n   \n   \n   1\n   2\n   3\n   4\n   5\n   \n\n\n# dockerfile\n\n * å¸¸ç¨å½ä»¤\n   * COPY\n     * æ ¼å¼: COPY [--chown=<user>:<group>] <æºè·¯å¾>... <ç®æ è·¯å¾>\n   * ADD\n     * ADD å COPY çæ ¼å¼åæ§è´¨åºæ¬ä¸è´ï¼ä½æ¯å¨ COPY åºç¡ä¸å¢å äºä¸äºåè½ã\n     * å¨ COPY å ADD ä¸­éæ©æ¶ï¼å¯ä»¥éµå¾ªè¿æ ·çååï¼å¤å¶åä½¿ç¨ COPYï¼ä»å¨éè¦èªå¨è§£åçåºåä½¿ç¨ ADDã\n     * æ³¨æï¼ADD æä»¤ä¼ä»¤éåæå»ºç¼å­å¤±æï¼ä»èå¯è½ä¼ä»¤éåæå»ºåå¾æ¯è¾ç¼æ¢ã\n     \n         ADD [--chown=<user>:<group>] <æºè·¯å¾>... <ç®æ è·¯å¾>\n     \n     \n     1\n     \n   * RUN\n     * æ¯ä¸ä¸ª RUN é½æ¯å¯å¨ä¸ä¸ªå®¹å¨ãæ§è¡å½ä»¤ãç¶åæäº¤å­å¨å±æä»¶åæ´\n   * CMD\n     * CMD ç¨äºæå®é»è®¤çå®¹å¨ä¸»è¿ç¨çå¯å¨å½ä»¤ï¼æä»¤çæ ¼å¼å RUN ç¸ä¼¼ï¼ä¹æ¯ä¸¤ç§æ ¼å¼ï¼\n       * shell æ ¼å¼ï¼CMD <å½ä»¤>\n         * è¿ç§æ ¼å¼ä¸ï¼å®éçå½ä»¤ä¼è¢«åè£ä¸º sh -c çåæ°çå½¢å¼è¿è¡æ§è¡ãå³ï¼CMD [ "sh", "-c", <å½ä»¤> ]\n       * exec æ ¼å¼ï¼CMD ["å¯æ§è¡æä»¶", "åæ°1", "åæ°2"...]\n         * è¿ç§æ ¼å¼ä¸ï¼å½åæ¶æå®äº ENTRYPOINT æä»¤æ¶ï¼ç¸å½äºå° CMD çåå®¹ä½ä¸ºåæ°ä¼ ç» ENTRYPOINT æä»¤\n     * docker run æ§è¡æ¶ï¼è·å¨éåååé¢çæ¯ commandï¼è¿è¡æ¶ä¼æ¿æ¢ CMD çé»è®¤å¼ã\n     * å¯å¨å®¹å¨å°±æ¯å¯å¨å®¹å¨åºç¨è¿ç¨ï¼å®¹å¨å°±æ¯ä¸ºäºä¸»è¿ç¨èå­å¨çï¼ä¸»è¿ç¨éåºï¼å®¹å¨å°±å¤±å»äºå­å¨çæä¹ï¼ä»èéåºã\n       \n           ä¾å¦ï¼dockerfile ä¸­: CMD service nginx start æ¯èµ·ä¸å°é¢æ(çæºä¸­ä¸æ ·ç)ä½ç¨çã\n       \n           ä½¿ç¨ service nginx start å½ä»¤ï¼åæ¯å¸æ upstart æ¥ä»¥åå°å®æ¤è¿ç¨å½¢å¼å¯å¨ nginx æå¡ãç¶èå®éæ§è¡çæ¯ï¼CMD [ "sh", "-c", "service nginx start"]ï¼å æ­¤ä¸»è¿ç¨å®éä¸æ¯ shãé£ä¹å½ service nginx start å½ä»¤ç»æåï¼sh ä½ä¸ºä¸»è¿ç¨éåºäºï¼å®¹å¨èªç¶å°±éåºã\n       \n           æ­£ç¡®çåæ³æ¯ç´æ¥æ§è¡ nginx å¯æ§è¡æä»¶ï¼å¹¶ä¸è¦æ±ä»¥åå°å½¢å¼è¿è¡ãæ¯å¦ï¼CMD ["nginx", "-g", "daemon off;"]\n       \n       \n       1\n       2\n       3\n       4\n       5\n       \n   * ENTRYPOINT å¥å£ç¹\n     * ç®çå CMD ä¸æ ·ï¼é½æ¯æå®å®¹å¨å¯å¨ç¨åºååæ°ã\n     * ENTRYPOINT å¨è¿è¡æ¶ä¹å¯ä»¥æ¿ä»£ï¼ä¸è¿æ¯ CMD è¦ç¥æ¾ç¹çï¼éè¦éè¿ docker run çåæ° --entrypoint æ¥æå®\n     * ä½¿ç¨åºæ¯\n       * è®©éååæåå½ä»¤ä¸æ ·ä½¿ç¨\n         * éè¦ dockerfile ä¸­æå®çå¯å¨å½ä»¤ï¼è½å¤åæ®éå½ä»¤ä¸æ ·æ¥æ¶è¿è¡æ¶æå®çé¢å¤åæ°\n       * åºç¨è¿è¡åçåå¤å·¥ä½\n         * å°é¢å¤çå·¥ä½åæèæ¬ï¼ç¶åæ¾å¥ ENTRYPOINT ä¸­å»æ§è¡ï¼èè¿ä¸ªèæ¬ä¼å°æ¥å°çåæ°(ä¹å°±æ¯ CMD)ä½ä¸ºå½ä»¤ï¼å¨èæ¬æåæ§è¡ãæ¯å¦å®æ¹éå redis ä¸­å°±æ¯è¿ä¹åçã\n     * reference:\n       * ENTRYPOINT å¥å£ç¹\n   * ENV è®¾ç½®ç¯å¢åé\n     * æ ¼å¼æä¸¤ç§ï¼\n       \n           ENV <key> <value>\n           ENV <key1>=<value1> <key2>=<value2>...\n       \n       \n       1\n       2\n       \n   * WORKDIR æå®å·¥ä½ç®å½\n     * æ ¼å¼: WORKDIR <å·¥ä½ç®å½è·¯å¾>\n     * ä½ç¨\n       * æ¹åå·¥ä½ç®å½å¹¶å½±åä»¥åçå±\n   * USER æå®å½åç¨æ·\n     * æ ¼å¼: USER <ç¨æ·å>[:<ç¨æ·ç»>]\n     * ä½ç¨\n       * USER å WORKDIR ç¸ä¼¼ï¼é½æ¯æ¹åç¯å¢ç¶æå¹¶å½±åä»¥åçå±ãWORKDIR æ¯æ¹åå·¥ä½ç®å½ï¼USER åæ¯æ¹åä¹åå±æ§è¡ RUN, CMD ä»¥å ENTRYPOINT è¿ç±»å½ä»¤çèº«ä»½\n   * ARG æå»ºåæ°\n     * æ ¼å¼: ARG <åæ°å>[=<é»è®¤å¼>]\n   * VOLUME å®ä¹å¿åå·\n     * ä¼å¨è¿è¡æ¶èªå¨æè½½ä¸ºå¿åå·, æ ¼å¼ä¸ºï¼\n       \n           VOLUME ["<è·¯å¾1>", "<è·¯å¾2>"...]\n           VOLUME <è·¯å¾>\n       \n       \n       1\n       2\n       \n     * note\n       * å½èªå¨æè½½å¿åå·æ¶ï¼ä¼å¨å®¿ä¸»æºç /var/lib/docker/volumes/ éæºéç½®ä¸ä¸ªç®å½ï¼æ å°å°å®¹å¨å(VOLUMEå£°æ)çæè½½è·¯å¾\n       * è¿è¡æ¶å¯ä»¥è¦çè¿ä¸ªæè½½è®¾ç½®:\n         \n         å°å®¿ä¸»ç /tmp/data æ å°å°å®¹å¨ç /data\n             docker run -d -v /tmp/data:/data xxxx\n         \n         \n         1\n         2\n         \n   * EXPOSE å£°æç«¯å£\n     * æ ¼å¼: EXPOSE <ç«¯å£1> [<ç«¯å£2>...]\n     * æ­¤æä»¤æ¯å£°æè¿è¡æ¶å®¹å¨æä¾æå¡ç«¯å£ï¼è¿åªæ¯ä¸ä¸ªå£°æï¼å¨è¿è¡æ¶å¹¶ä¸ä¼å ä¸ºè¿ä¸ªå£°æåºç¨å°±ä¼å¼å¯è¿ä¸ªç«¯å£çæå¡ã\n     * ä½ç¨\n       * å¨è¿è¡æ¶ä½¿ç¨éæºç«¯å£æ å°æ¶ï¼ä¹å°±æ¯ docker run -P æ¶ï¼ä¼èªå¨éæºæ å° EXPOSE çç«¯å£ã\n       * ä¾å¦ï¼\n         \n         expose:\n             - "3000"        # å¨å¯å¨å®¹å¨æ¶éè¿-P(æ³¨ææ¯å¤§å)ï¼Dockerä¸»æºä¼èªå¨åéä¸ä¸ªç«¯å£è½¬åå°æå®ç3000ç«¯å£\n                             # æèï¼ä½¿ç¨ -p åå¯ä»¥å·ä½æå®åªä¸ªæ¬å°ç«¯å£æ å°è¿æ¥ã\n         \n         \n         1\n         2\n         3\n         \n   * PORTS\n     \n     ports:\n         - "8000:80"     # ç»å®å®¹å¨ç80ç«¯å£å°ä¸»æºç8000ç«¯å£\n         - "443"         # ç»å®å®¹å¨ç443ç«¯å£å°ä¸»æºçä»»æç«¯å£ï¼å®¹å¨å¯å¨æ¶éæºåéç»å®çä¸»æºç«¯å£å·\n     \n     \n     1\n     2\n     3\n     \n   * HEALTHCHECK å¥åº·æ£æ¥\n     * æ ¼å¼\n       \n           HEALTHCHECK [éé¡¹] CMD <å½ä»¤>ï¼è®¾ç½®æ£æ¥å®¹å¨å¥åº·ç¶åµçå½ä»¤\n           HEALTHCHECK NONEï¼å¦æåºç¡éåæå¥åº·æ£æ¥æä»¤ï¼ä½¿ç¨è¿è¡å¯ä»¥å±è½æå¶å¥åº·æ£æ¥æä»¤\n       \n           HEALTHCHECK æ¯æä¸åéé¡¹ï¼\n               --interval=<é´é>ï¼ä¸¤æ¬¡å¥åº·æ£æ¥çé´éï¼é»è®¤ä¸º 30 ç§ï¼\n               --timeout=<æ¶é¿>ï¼å¥åº·æ£æ¥å½ä»¤è¿è¡è¶æ¶æ¶é´ï¼å¦æè¶è¿è¿ä¸ªæ¶é´ï¼æ¬æ¬¡å¥åº·æ£æ¥å°±è¢«è§ä¸ºå¤±è´¥ï¼é»è®¤ 30 ç§ï¼\n               --retries=<æ¬¡æ°>ï¼å½è¿ç»­å¤±è´¥æå®æ¬¡æ°åï¼åå°å®¹å¨ç¶æè§ä¸º unhealthyï¼é»è®¤ 3 æ¬¡ã\n       \n       \n       1\n       2\n       3\n       4\n       5\n       6\n       7\n       \n     * ä½ç¨\n       * å½å¨ä¸ä¸ªéåæå®äº HEALTHCHECK æä»¤åï¼ç¨å¶å¯å¨å®¹å¨ï¼åå§ç¶æä¼ä¸º startingï¼å¨ HEALTHCHECK æä»¤æ£æ¥æåååä¸º healthyï¼å¦æè¿ç»­ä¸å®æ¬¡æ°å¤±è´¥ï¼åä¼åä¸º unhealthy\n     * note\n       * å¨ HEALTHCHECK [éé¡¹] CMD åé¢çå½ä»¤ï¼æ ¼å¼å ENTRYPOINT ä¸æ ·ï¼åä¸º shell å exec æ ¼å¼ãå½ä»¤çè¿åå¼æ è¯å¥åº·æ£æ¥æ¯å¦æåï¼0ï¼æåï¼1ï¼å¤±è´¥ï¼2ï¼ä¿çï¼ä¸è¦ä½¿ç¨è¿ä¸ªå¼ã\n       * å CMD, ENTRYPOINT ä¸æ ·ï¼HEALTHCHECK åªå¯ä»¥åºç°ä¸æ¬¡ï¼å¦æåäºå¤ä¸ªï¼åªææåä¸ä¸ªçæã\n\n\n# å¤é¶æ®µæå»º\n\n\n# æ°æ®ç®¡ç\n\n# æ°æ®å·\n\n * å®ä¹\n   * æ°æ®å· æ¯ä¸ä¸ªå¯ä¾ä¸ä¸ªæå¤ä¸ªå®¹å¨ä½¿ç¨çç¹æ®ç®å½ï¼å®ç»è¿ UFSï¼å¯ä»¥æä¾å¾å¤æç¨çç¹æ§:\n     * æ°æ®å· å¯ä»¥å¨å®¹å¨ä¹é´å±äº«åéç¨\n     * å¯¹ æ°æ®å· çä¿®æ¹ä¼ç«é©¬çæ\n     * å¯¹ æ°æ®å· çæ´æ°ï¼ä¸ä¼å½±åéå\n     * æ°æ®å· é»è®¤ä¼ä¸ç´å­å¨ï¼å³ä½¿å®¹å¨è¢«å é¤\n * å¸¸ç¨å½ä»¤\n   \n       docker volume create my-vol\n       docker volume ls\n       docker volume inspect my-vol\n       docker volume rm my-vol\n       docker run -d -P --name web -v my-vol:/wepapp training/webapp python app.py\n       docker run -d -P --name web --mount source=my-vol,target=/webapp training/webapp python app.py\n       \n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   7\n   \n * è¯´æ\n   * æ°æ®å· æ¯è¢«è®¾è®¡ç¨æ¥æä¹åæ°æ®çï¼å®ççå½å¨æç¬ç«äºå®¹å¨ï¼Docker ä¸ä¼å¨å®¹å¨è¢«å é¤åèªå¨å é¤ æ°æ®å·ï¼å¹¶ä¸ä¹ä¸å­å¨åå¾åæ¶è¿æ ·çæºå¶æ¥å¤çæ²¡æä»»ä½å®¹å¨å¼ç¨ç æ°æ®å·ã\n   * å¦æéè¦å¨å é¤å®¹å¨çåæ¶ç§»é¤æ°æ®å·ãå¯ä»¥å¨å é¤å®¹å¨çæ¶åä½¿ç¨ docker rm -v è¿ä¸ªå½ä»¤ã\n   * æ ä¸»çæ°æ®å·å¯è½ä¼å æ®å¾å¤ç©ºé´ï¼è¦æ¸çè¯·ä½¿ç¨ä»¥ä¸å½ä»¤: docker volume prune\n\n# æè½½ä¸»æºç®å½\n\n * ä½¿ç¨ --mount æ è®°å¯ä»¥æå®æè½½ä¸ä¸ªæ¬å°ä¸»æºçç®å½(å¿é¡»æ¯ç»å¯¹è·¯å¾)å°å®¹å¨ä¸­å»\n * -v && --mount\n   * ä½¿ç¨ -v åæ°æ¶, å¦ææ¬å°ç®å½ä¸å­å¨ Docker ä¼èªå¨ä¸ºä½ åå»ºä¸ä¸ªæä»¶å¤¹\n   * ä½¿ç¨ --mount åæ°æ¶, å¦ææ¬å°ç®å½ä¸å­å¨ï¼Docker ä¼æ¥é\n * Docker æè½½ä¸»æºç®å½çé»è®¤æéæ¯ è¯»åï¼ç¨æ·ä¹å¯ä»¥éè¿å¢å  readonly æå®ä¸º åªè¯»\n   \n     -v /src/webapp:/opt/webapp:ro\n     --mount type=bind,source=/src/webapp,target=/opt/webapp,readonly \n   \n   \n   1\n   2\n   \n\n\n# Docker ä¸åå®¢\n\n# Docker Compose\n\n * å®ä½\n   * Compose å®ä½æ¯ å®ä¹åè¿è¡å¤ä¸ª Docker å®¹å¨çåºç¨ãå®åè®¸ç¨æ·éè¿ä¸ä¸ªåç¬ç docker-compose.yml æ¨¡æ¿æä»¶æ¥å®ä¹ä¸ç»ç¸å³èçåºç¨å®¹å¨ä¸ºä¸ä¸ªé¡¹ç®(project)\n   * Compose çé»è®¤ç®¡çå¯¹è±¡æ¯é¡¹ç®ï¼éè¿å­å½ä»¤å¯¹é¡¹ç®ä¸­çä¸ç»å®¹å¨è¿è¡ä¾¿æ·å°çå½å¨æç®¡ç\n * Compose ä¸­ä¸¤ä¸ªéè¦çæ¦å¿µï¼\n   * æå¡ (service)ï¼ä¸ä¸ªåºç¨çå®¹å¨ï¼å®éä¸å¯ä»¥åæ¬è¥å¹²è¿è¡ç¸åéåçå®¹å¨å®ä¾ã\n   * é¡¹ç® (project)ï¼ç±ä¸ç»å³èçåºç¨å®¹å¨ç»æçä¸ä¸ªå®æ´ä¸å¡ååï¼å¨ docker-compose.yml æä»¶ä¸­å®ä¹ã\n * å½ä»¤\n   * docker-compose\n\n# Docker Machine\n\n * å®ä½\n   * è´è´£å¨å¤ç§å¹³å°ä¸å¿«éå®è£ Docker ç¯å¢ãDocker Machine é¡¹ç®åºäº Go è¯­è¨å®ç°ï¼ç®åå¨ Github ä¸è¿è¡ç»´æ¤ã\n\n# Docker Swarm\n\n * å®ä½\n   * æä¾ Docker å®¹å¨éç¾¤æå¡ï¼æ¯ Docker å®æ¹å¯¹å®¹å¨äºçæè¿è¡æ¯æçæ ¸å¿æ¹æ¡ã\n   * ä½¿ç¨å®ï¼ç¨æ·å¯ä»¥å°å¤ä¸ª Docker ä¸»æºå°è£ä¸ºåä¸ªå¤§åçèæ Docker ä¸»æºï¼å¿«éæé ä¸å¥å®¹å¨äºå¹³å°ã\n\n\n# Docker åºå±å®ç°\n\n * TODO\n * reference\n   * åºå±å®ç°\n\n\n# operations\n\n//> delete\ndocker rm $(docker ps -q -a) \ndocker rmi $(docker images -q) \n\n//> create and run container\ndocker run -itd --hostname [x] --name [x] [image_id] /bin/bash\n\n//> create and run container and mount shared directory\ndocker run -it --hostname [x] --name [x] -v [absolute path in host]:[absolute path in docker][:ro] [image] /bin/bash\n//> create and run container having shared directory based on \'--volumes-from\'\ndocker run -it --hostname [x] --name [x] --volumes-from [container_id with \'-v\'] [image] /bin/bash\n\n//> net\ndocker run -it -h centos.xxx.docker -v /home/centos:/shared -w /home/xxx --net host --name xxx  centos6.7 /bin/bash\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n\n\n\n# å®¹å¨\n\nä»ä¹æ¯å®¹å¨ï¼ å¨ä»ç»å®¹å¨çå·ä½æ¦å¿µä¹åï¼åç®ååé¡¾ä¸ä¸æä½ç³»ç»æ¯å¦ä½ç®¡çè¿ç¨çã\n\né¦åï¼å½æä»¬ç»å½å°æä½ç³»ç»ä¹åï¼å¯ä»¥éè¿ ps ç­æä½çå°åå¼åæ ·çè¿ç¨ï¼è¿äºè¿ç¨åæ¬ç³»ç»èªå¸¦çæå¡åç¨æ·çåºç¨è¿ç¨ãé£ä¹ï¼è¿äºè¿ç¨é½æä»ä¹æ ·çç¹ç¹ï¼\n\n * ç¬¬ä¸ï¼è¿äºè¿ç¨å¯ä»¥ç¸äºçå°ãç¸äºéä¿¡ï¼\n * ç¬¬äºï¼å®ä»¬ä½¿ç¨çæ¯åä¸ä¸ªæä»¶ç³»ç»ï¼å¯ä»¥å¯¹åä¸ä¸ªæä»¶è¿è¡è¯»åæä½ï¼\n * ç¬¬ä¸ï¼è¿äºè¿ç¨ä¼ä½¿ç¨ç¸åçç³»ç»èµæºã\n\nè¿æ ·çä¸ä¸ªç¹ç¹ä¼å¸¦æ¥ä»ä¹é®é¢å¢ï¼\n\n * å ä¸ºè¿äºè¿ç¨è½å¤ç¸äºçå°å¹¶ä¸è¿è¡éä¿¡ï¼é«çº§æéçè¿ç¨å¯ä»¥æ»å»å¶ä»è¿ç¨ï¼\n * å ä¸ºå®ä»¬ä½¿ç¨çæ¯åä¸ä¸ªæä»¶ç³»ç»ï¼å æ­¤ä¼å¸¦æ¥ä¸¤ä¸ªé®é¢ï¼è¿äºè¿ç¨å¯ä»¥å¯¹äºå·²æçæ°æ®è¿è¡å¢å æ¹æ¥ï¼å·æé«çº§æéçè¿ç¨å¯è½ä¼å°å¶ä»è¿ç¨çæ°æ®å é¤æï¼ç ´åæå¶ä»è¿ç¨çæ­£å¸¸è¿è¡ï¼æ­¤å¤ï¼è¿ç¨ä¸è¿ç¨ä¹é´çä¾èµå¯è½ä¼å­å¨å²çªï¼å¦æ­¤ä¸æ¥å°±ä¼ç»è¿ç»´å¸¦æ¥å¾å¤§çååï¼\n * å ä¸ºè¿äºè¿ç¨ä½¿ç¨çæ¯åä¸ä¸ªå®¿ä¸»æºçèµæºï¼åºç¨ä¹é´å¯è½ä¼å­å¨èµæºæ¢å çé®é¢ï¼å½ä¸ä¸ªåºç¨éè¦æ¶èå¤§é CPU ååå­èµæºçæ¶åï¼å°±å¯è½ä¼ç ´åå¶ä»åºç¨çè¿è¡ï¼å¯¼è´å¶ä»åºç¨æ æ³æ­£å¸¸å°æä¾æå¡ã\n\néå¯¹ä¸è¿°çä¸ä¸ªé®é¢ï¼å¦ä½ä¸ºè¿ç¨æä¾ä¸ä¸ªç¬ç«çè¿è¡ç¯å¢å¢ï¼\n\n * éå¯¹ä¸åè¿ç¨ä½¿ç¨åä¸ä¸ªæä»¶ç³»ç»æé æçé®é¢èè¨ï¼Linux å Unix æä½ç³»ç»å¯ä»¥éè¿ chroot ç³»ç»è°ç¨å°å­ç®å½åææ ¹ç®å½ï¼è¾¾å°è§å¾çº§å«çéç¦»ï¼è¿ç¨å¨ chroot çå¸®å©ä¸å¯ä»¥å·æç¬ç«çæä»¶ç³»ç»ï¼å¯¹äºè¿æ ·çæä»¶ç³»ç»è¿è¡å¢å æ¹æ¥ä¸ä¼å½±åå°å¶ä»è¿ç¨ï¼\n * å ä¸ºè¿ç¨ä¹é´ç¸äºå¯è§å¹¶ä¸å¯ä»¥ç¸äºéä¿¡ï¼ä½¿ç¨ Namespace ææ¯æ¥å®ç°è¿ç¨å¨èµæºçè§å¾ä¸è¿è¡éç¦»ãå¨ chroot å Namespace çå¸®å©ä¸ï¼è¿ç¨å°±è½å¤è¿è¡å¨ä¸ä¸ªç¬ç«çç¯å¢ä¸äºï¼\n * ä½å¨ç¬ç«çç¯å¢ä¸ï¼è¿ç¨æä½¿ç¨çè¿æ¯åä¸ä¸ªæä½ç³»ç»çèµæºï¼ä¸äºè¿ç¨å¯è½ä¼ä¾µèææ´ä¸ªç³»ç»çèµæºãä¸ºäºåå°è¿ç¨å½¼æ­¤ä¹é´çå½±åï¼å¯ä»¥éè¿ Cgroup æ¥éå¶å¶èµæºä½¿ç¨çï¼è®¾ç½®å¶è½å¤ä½¿ç¨ç CPU ä»¥ååå­éã\n\né£ä¹ï¼åºè¯¥å¦ä½å®ä¹è¿æ ·çè¿ç¨éåå¢ï¼\n\nå¶å®ï¼å®¹å¨å°±æ¯ä¸ä¸ªè§å¾éç¦»ãèµæºå¯éå¶ãç¬ç«æä»¶ç³»ç»çè¿ç¨éåãæè°âè§å¾éç¦»âå°±æ¯è½å¤çå°é¨åè¿ç¨ä»¥åå·æç¬ç«çä¸»æºåç­ï¼æ§å¶èµæºä½¿ç¨çåæ¯å¯ä»¥å¯¹äºåå­å¤§å°ä»¥å CPU ä½¿ç¨ä¸ªæ°ç­è¿è¡éå¶ãå®¹å¨å°±æ¯ä¸ä¸ªè¿ç¨éåï¼å®å°ç³»ç»çå¶ä»èµæºéç¦»å¼æ¥ï¼å·æèªå·±ç¬ç«çèµæºè§å¾ã\n\nå®¹å¨å·æä¸ä¸ªç¬ç«çæä»¶ç³»ç»ï¼å ä¸ºä½¿ç¨çæ¯ç³»ç»çèµæºï¼æä»¥å¨ç¬ç«çæä»¶ç³»ç»åä¸éè¦å·å¤åæ ¸ç¸å³çä»£ç æèå·¥å·ï¼æä»¬åªéè¦æä¾å®¹å¨æéçäºè¿å¶æä»¶ãéç½®æä»¶ä»¥åä¾èµå³å¯ãåªè¦å®¹å¨è¿è¡æ¶æéçæä»¶éåé½è½å¤å·å¤ï¼é£ä¹è¿ä¸ªå®¹å¨å°±è½å¤è¿è¡èµ·æ¥ã\n\nç»¼ä¸æè¿°ï¼æä»¬å°è¿äºå®¹å¨è¿è¡æ¶æéè¦çææçæä»¶éåç§°ä¹ä¸ºå®¹å¨éåã',normalizedContent:'# docker åºç¡ä½¿ç¨æå\n\néåï¼ image ï¼ãå®¹å¨ ï¼ container ï¼ãä»åºï¼ repository ï¼\n\n\n# éç½®æº\n\n * éç½®å½åimage ä¸è½½æº\n   * vi /etc/docker/daemon.json\n   \n       {\n           "registry-mirrors": [\n               "https://registry.docker-cn.com"\n           ]\n       }\n   \n   \n   1\n   2\n   3\n   4\n   5\n   \n\n\n# dockerfile\n\n * å¸¸ç¨å½ä»¤\n   * copy\n     * æ ¼å¼: copy [--chown=<user>:<group>] <æºè·¯å¾>... <ç®æ è·¯å¾>\n   * add\n     * add å copy çæ ¼å¼åæ§è´¨åºæ¬ä¸è´ï¼ä½æ¯å¨ copy åºç¡ä¸å¢å äºä¸äºåè½ã\n     * å¨ copy å add ä¸­éæ©æ¶ï¼å¯ä»¥éµå¾ªè¿æ ·çååï¼å¤å¶åä½¿ç¨ copyï¼ä»å¨éè¦èªå¨è§£åçåºåä½¿ç¨ addã\n     * æ³¨æï¼add æä»¤ä¼ä»¤éåæå»ºç¼å­å¤±æï¼ä»èå¯è½ä¼ä»¤éåæå»ºåå¾æ¯è¾ç¼æ¢ã\n     \n         add [--chown=<user>:<group>] <æºè·¯å¾>... <ç®æ è·¯å¾>\n     \n     \n     1\n     \n   * run\n     * æ¯ä¸ä¸ª run é½æ¯å¯å¨ä¸ä¸ªå®¹å¨ãæ§è¡å½ä»¤ãç¶åæäº¤å­å¨å±æä»¶åæ´\n   * cmd\n     * cmd ç¨äºæå®é»è®¤çå®¹å¨ä¸»è¿ç¨çå¯å¨å½ä»¤ï¼æä»¤çæ ¼å¼å run ç¸ä¼¼ï¼ä¹æ¯ä¸¤ç§æ ¼å¼ï¼\n       * shell æ ¼å¼ï¼cmd <å½ä»¤>\n         * è¿ç§æ ¼å¼ä¸ï¼å®éçå½ä»¤ä¼è¢«åè£ä¸º sh -c çåæ°çå½¢å¼è¿è¡æ§è¡ãå³ï¼cmd [ "sh", "-c", <å½ä»¤> ]\n       * exec æ ¼å¼ï¼cmd ["å¯æ§è¡æä»¶", "åæ°1", "åæ°2"...]\n         * è¿ç§æ ¼å¼ä¸ï¼å½åæ¶æå®äº entrypoint æä»¤æ¶ï¼ç¸å½äºå° cmd çåå®¹ä½ä¸ºåæ°ä¼ ç» entrypoint æä»¤\n     * docker run æ§è¡æ¶ï¼è·å¨éåååé¢çæ¯ commandï¼è¿è¡æ¶ä¼æ¿æ¢ cmd çé»è®¤å¼ã\n     * å¯å¨å®¹å¨å°±æ¯å¯å¨å®¹å¨åºç¨è¿ç¨ï¼å®¹å¨å°±æ¯ä¸ºäºä¸»è¿ç¨èå­å¨çï¼ä¸»è¿ç¨éåºï¼å®¹å¨å°±å¤±å»äºå­å¨çæä¹ï¼ä»èéåºã\n       \n           ä¾å¦ï¼dockerfile ä¸­: cmd service nginx start æ¯èµ·ä¸å°é¢æ(çæºä¸­ä¸æ ·ç)ä½ç¨çã\n       \n           ä½¿ç¨ service nginx start å½ä»¤ï¼åæ¯å¸æ upstart æ¥ä»¥åå°å®æ¤è¿ç¨å½¢å¼å¯å¨ nginx æå¡ãç¶èå®éæ§è¡çæ¯ï¼cmd [ "sh", "-c", "service nginx start"]ï¼å æ­¤ä¸»è¿ç¨å®éä¸æ¯ shãé£ä¹å½ service nginx start å½ä»¤ç»æåï¼sh ä½ä¸ºä¸»è¿ç¨éåºäºï¼å®¹å¨èªç¶å°±éåºã\n       \n           æ­£ç¡®çåæ³æ¯ç´æ¥æ§è¡ nginx å¯æ§è¡æä»¶ï¼å¹¶ä¸è¦æ±ä»¥åå°å½¢å¼è¿è¡ãæ¯å¦ï¼cmd ["nginx", "-g", "daemon off;"]\n       \n       \n       1\n       2\n       3\n       4\n       5\n       \n   * entrypoint å¥å£ç¹\n     * ç®çå cmd ä¸æ ·ï¼é½æ¯æå®å®¹å¨å¯å¨ç¨åºååæ°ã\n     * entrypoint å¨è¿è¡æ¶ä¹å¯ä»¥æ¿ä»£ï¼ä¸è¿æ¯ cmd è¦ç¥æ¾ç¹çï¼éè¦éè¿ docker run çåæ° --entrypoint æ¥æå®\n     * ä½¿ç¨åºæ¯\n       * è®©éååæåå½ä»¤ä¸æ ·ä½¿ç¨\n         * éè¦ dockerfile ä¸­æå®çå¯å¨å½ä»¤ï¼è½å¤åæ®éå½ä»¤ä¸æ ·æ¥æ¶è¿è¡æ¶æå®çé¢å¤åæ°\n       * åºç¨è¿è¡åçåå¤å·¥ä½\n         * å°é¢å¤çå·¥ä½åæèæ¬ï¼ç¶åæ¾å¥ entrypoint ä¸­å»æ§è¡ï¼èè¿ä¸ªèæ¬ä¼å°æ¥å°çåæ°(ä¹å°±æ¯ cmd)ä½ä¸ºå½ä»¤ï¼å¨èæ¬æåæ§è¡ãæ¯å¦å®æ¹éå redis ä¸­å°±æ¯è¿ä¹åçã\n     * reference:\n       * entrypoint å¥å£ç¹\n   * env è®¾ç½®ç¯å¢åé\n     * æ ¼å¼æä¸¤ç§ï¼\n       \n           env <key> <value>\n           env <key1>=<value1> <key2>=<value2>...\n       \n       \n       1\n       2\n       \n   * workdir æå®å·¥ä½ç®å½\n     * æ ¼å¼: workdir <å·¥ä½ç®å½è·¯å¾>\n     * ä½ç¨\n       * æ¹åå·¥ä½ç®å½å¹¶å½±åä»¥åçå±\n   * user æå®å½åç¨æ·\n     * æ ¼å¼: user <ç¨æ·å>[:<ç¨æ·ç»>]\n     * ä½ç¨\n       * user å workdir ç¸ä¼¼ï¼é½æ¯æ¹åç¯å¢ç¶æå¹¶å½±åä»¥åçå±ãworkdir æ¯æ¹åå·¥ä½ç®å½ï¼user åæ¯æ¹åä¹åå±æ§è¡ run, cmd ä»¥å entrypoint è¿ç±»å½ä»¤çèº«ä»½\n   * arg æå»ºåæ°\n     * æ ¼å¼: arg <åæ°å>[=<é»è®¤å¼>]\n   * volume å®ä¹å¿åå·\n     * ä¼å¨è¿è¡æ¶èªå¨æè½½ä¸ºå¿åå·, æ ¼å¼ä¸ºï¼\n       \n           volume ["<è·¯å¾1>", "<è·¯å¾2>"...]\n           volume <è·¯å¾>\n       \n       \n       1\n       2\n       \n     * note\n       * å½èªå¨æè½½å¿åå·æ¶ï¼ä¼å¨å®¿ä¸»æºç /var/lib/docker/volumes/ éæºéç½®ä¸ä¸ªç®å½ï¼æ å°å°å®¹å¨å(volumeå£°æ)çæè½½è·¯å¾\n       * è¿è¡æ¶å¯ä»¥è¦çè¿ä¸ªæè½½è®¾ç½®:\n         \n         å°å®¿ä¸»ç /tmp/data æ å°å°å®¹å¨ç /data\n             docker run -d -v /tmp/data:/data xxxx\n         \n         \n         1\n         2\n         \n   * expose å£°æç«¯å£\n     * æ ¼å¼: expose <ç«¯å£1> [<ç«¯å£2>...]\n     * æ­¤æä»¤æ¯å£°æè¿è¡æ¶å®¹å¨æä¾æå¡ç«¯å£ï¼è¿åªæ¯ä¸ä¸ªå£°æï¼å¨è¿è¡æ¶å¹¶ä¸ä¼å ä¸ºè¿ä¸ªå£°æåºç¨å°±ä¼å¼å¯è¿ä¸ªç«¯å£çæå¡ã\n     * ä½ç¨\n       * å¨è¿è¡æ¶ä½¿ç¨éæºç«¯å£æ å°æ¶ï¼ä¹å°±æ¯ docker run -p æ¶ï¼ä¼èªå¨éæºæ å° expose çç«¯å£ã\n       * ä¾å¦ï¼\n         \n         expose:\n             - "3000"        # å¨å¯å¨å®¹å¨æ¶éè¿-p(æ³¨ææ¯å¤§å)ï¼dockerä¸»æºä¼èªå¨åéä¸ä¸ªç«¯å£è½¬åå°æå®ç3000ç«¯å£\n                             # æèï¼ä½¿ç¨ -p åå¯ä»¥å·ä½æå®åªä¸ªæ¬å°ç«¯å£æ å°è¿æ¥ã\n         \n         \n         1\n         2\n         3\n         \n   * ports\n     \n     ports:\n         - "8000:80"     # ç»å®å®¹å¨ç80ç«¯å£å°ä¸»æºç8000ç«¯å£\n         - "443"         # ç»å®å®¹å¨ç443ç«¯å£å°ä¸»æºçä»»æç«¯å£ï¼å®¹å¨å¯å¨æ¶éæºåéç»å®çä¸»æºç«¯å£å·\n     \n     \n     1\n     2\n     3\n     \n   * healthcheck å¥åº·æ£æ¥\n     * æ ¼å¼\n       \n           healthcheck [éé¡¹] cmd <å½ä»¤>ï¼è®¾ç½®æ£æ¥å®¹å¨å¥åº·ç¶åµçå½ä»¤\n           healthcheck noneï¼å¦æåºç¡éåæå¥åº·æ£æ¥æä»¤ï¼ä½¿ç¨è¿è¡å¯ä»¥å±è½æå¶å¥åº·æ£æ¥æä»¤\n       \n           healthcheck æ¯æä¸åéé¡¹ï¼\n               --interval=<é´é>ï¼ä¸¤æ¬¡å¥åº·æ£æ¥çé´éï¼é»è®¤ä¸º 30 ç§ï¼\n               --timeout=<æ¶é¿>ï¼å¥åº·æ£æ¥å½ä»¤è¿è¡è¶æ¶æ¶é´ï¼å¦æè¶è¿è¿ä¸ªæ¶é´ï¼æ¬æ¬¡å¥åº·æ£æ¥å°±è¢«è§ä¸ºå¤±è´¥ï¼é»è®¤ 30 ç§ï¼\n               --retries=<æ¬¡æ°>ï¼å½è¿ç»­å¤±è´¥æå®æ¬¡æ°åï¼åå°å®¹å¨ç¶æè§ä¸º unhealthyï¼é»è®¤ 3 æ¬¡ã\n       \n       \n       1\n       2\n       3\n       4\n       5\n       6\n       7\n       \n     * ä½ç¨\n       * å½å¨ä¸ä¸ªéåæå®äº healthcheck æä»¤åï¼ç¨å¶å¯å¨å®¹å¨ï¼åå§ç¶æä¼ä¸º startingï¼å¨ healthcheck æä»¤æ£æ¥æåååä¸º healthyï¼å¦æè¿ç»­ä¸å®æ¬¡æ°å¤±è´¥ï¼åä¼åä¸º unhealthy\n     * note\n       * å¨ healthcheck [éé¡¹] cmd åé¢çå½ä»¤ï¼æ ¼å¼å entrypoint ä¸æ ·ï¼åä¸º shell å exec æ ¼å¼ãå½ä»¤çè¿åå¼æ è¯å¥åº·æ£æ¥æ¯å¦æåï¼0ï¼æåï¼1ï¼å¤±è´¥ï¼2ï¼ä¿çï¼ä¸è¦ä½¿ç¨è¿ä¸ªå¼ã\n       * å cmd, entrypoint ä¸æ ·ï¼healthcheck åªå¯ä»¥åºç°ä¸æ¬¡ï¼å¦æåäºå¤ä¸ªï¼åªææåä¸ä¸ªçæã\n\n\n# å¤é¶æ®µæå»º\n\n\n# æ°æ®ç®¡ç\n\n# æ°æ®å·\n\n * å®ä¹\n   * æ°æ®å· æ¯ä¸ä¸ªå¯ä¾ä¸ä¸ªæå¤ä¸ªå®¹å¨ä½¿ç¨çç¹æ®ç®å½ï¼å®ç»è¿ ufsï¼å¯ä»¥æä¾å¾å¤æç¨çç¹æ§:\n     * æ°æ®å· å¯ä»¥å¨å®¹å¨ä¹é´å±äº«åéç¨\n     * å¯¹ æ°æ®å· çä¿®æ¹ä¼ç«é©¬çæ\n     * å¯¹ æ°æ®å· çæ´æ°ï¼ä¸ä¼å½±åéå\n     * æ°æ®å· é»è®¤ä¼ä¸ç´å­å¨ï¼å³ä½¿å®¹å¨è¢«å é¤\n * å¸¸ç¨å½ä»¤\n   \n       docker volume create my-vol\n       docker volume ls\n       docker volume inspect my-vol\n       docker volume rm my-vol\n       docker run -d -p --name web -v my-vol:/wepapp training/webapp python app.py\n       docker run -d -p --name web --mount source=my-vol,target=/webapp training/webapp python app.py\n       \n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   7\n   \n * è¯´æ\n   * æ°æ®å· æ¯è¢«è®¾è®¡ç¨æ¥æä¹åæ°æ®çï¼å®ççå½å¨æç¬ç«äºå®¹å¨ï¼docker ä¸ä¼å¨å®¹å¨è¢«å é¤åèªå¨å é¤ æ°æ®å·ï¼å¹¶ä¸ä¹ä¸å­å¨åå¾åæ¶è¿æ ·çæºå¶æ¥å¤çæ²¡æä»»ä½å®¹å¨å¼ç¨ç æ°æ®å·ã\n   * å¦æéè¦å¨å é¤å®¹å¨çåæ¶ç§»é¤æ°æ®å·ãå¯ä»¥å¨å é¤å®¹å¨çæ¶åä½¿ç¨ docker rm -v è¿ä¸ªå½ä»¤ã\n   * æ ä¸»çæ°æ®å·å¯è½ä¼å æ®å¾å¤ç©ºé´ï¼è¦æ¸çè¯·ä½¿ç¨ä»¥ä¸å½ä»¤: docker volume prune\n\n# æè½½ä¸»æºç®å½\n\n * ä½¿ç¨ --mount æ è®°å¯ä»¥æå®æè½½ä¸ä¸ªæ¬å°ä¸»æºçç®å½(å¿é¡»æ¯ç»å¯¹è·¯å¾)å°å®¹å¨ä¸­å»\n * -v && --mount\n   * ä½¿ç¨ -v åæ°æ¶, å¦ææ¬å°ç®å½ä¸å­å¨ docker ä¼èªå¨ä¸ºä½ åå»ºä¸ä¸ªæä»¶å¤¹\n   * ä½¿ç¨ --mount åæ°æ¶, å¦ææ¬å°ç®å½ä¸å­å¨ï¼docker ä¼æ¥é\n * docker æè½½ä¸»æºç®å½çé»è®¤æéæ¯ è¯»åï¼ç¨æ·ä¹å¯ä»¥éè¿å¢å  readonly æå®ä¸º åªè¯»\n   \n     -v /src/webapp:/opt/webapp:ro\n     --mount type=bind,source=/src/webapp,target=/opt/webapp,readonly \n   \n   \n   1\n   2\n   \n\n\n# docker ä¸åå®¢\n\n# docker compose\n\n * å®ä½\n   * compose å®ä½æ¯ å®ä¹åè¿è¡å¤ä¸ª docker å®¹å¨çåºç¨ãå®åè®¸ç¨æ·éè¿ä¸ä¸ªåç¬ç docker-compose.yml æ¨¡æ¿æä»¶æ¥å®ä¹ä¸ç»ç¸å³èçåºç¨å®¹å¨ä¸ºä¸ä¸ªé¡¹ç®(project)\n   * compose çé»è®¤ç®¡çå¯¹è±¡æ¯é¡¹ç®ï¼éè¿å­å½ä»¤å¯¹é¡¹ç®ä¸­çä¸ç»å®¹å¨è¿è¡ä¾¿æ·å°çå½å¨æç®¡ç\n * compose ä¸­ä¸¤ä¸ªéè¦çæ¦å¿µï¼\n   * æå¡ (service)ï¼ä¸ä¸ªåºç¨çå®¹å¨ï¼å®éä¸å¯ä»¥åæ¬è¥å¹²è¿è¡ç¸åéåçå®¹å¨å®ä¾ã\n   * é¡¹ç® (project)ï¼ç±ä¸ç»å³èçåºç¨å®¹å¨ç»æçä¸ä¸ªå®æ´ä¸å¡ååï¼å¨ docker-compose.yml æä»¶ä¸­å®ä¹ã\n * å½ä»¤\n   * docker-compose\n\n# docker machine\n\n * å®ä½\n   * è´è´£å¨å¤ç§å¹³å°ä¸å¿«éå®è£ docker ç¯å¢ãdocker machine é¡¹ç®åºäº go è¯­è¨å®ç°ï¼ç®åå¨ github ä¸è¿è¡ç»´æ¤ã\n\n# docker swarm\n\n * å®ä½\n   * æä¾ docker å®¹å¨éç¾¤æå¡ï¼æ¯ docker å®æ¹å¯¹å®¹å¨äºçæè¿è¡æ¯æçæ ¸å¿æ¹æ¡ã\n   * ä½¿ç¨å®ï¼ç¨æ·å¯ä»¥å°å¤ä¸ª docker ä¸»æºå°è£ä¸ºåä¸ªå¤§åçèæ docker ä¸»æºï¼å¿«éæé ä¸å¥å®¹å¨äºå¹³å°ã\n\n\n# docker åºå±å®ç°\n\n * todo\n * reference\n   * åºå±å®ç°\n\n\n# operations\n\n//> delete\ndocker rm $(docker ps -q -a) \ndocker rmi $(docker images -q) \n\n//> create and run container\ndocker run -itd --hostname [x] --name [x] [image_id] /bin/bash\n\n//> create and run container and mount shared directory\ndocker run -it --hostname [x] --name [x] -v [absolute path in host]:[absolute path in docker][:ro] [image] /bin/bash\n//> create and run container having shared directory based on \'--volumes-from\'\ndocker run -it --hostname [x] --name [x] --volumes-from [container_id with \'-v\'] [image] /bin/bash\n\n//> net\ndocker run -it -h centos.xxx.docker -v /home/centos:/shared -w /home/xxx --net host --name xxx  centos6.7 /bin/bash\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n\n\n\n# å®¹å¨\n\nä»ä¹æ¯å®¹å¨ï¼ å¨ä»ç»å®¹å¨çå·ä½æ¦å¿µä¹åï¼åç®ååé¡¾ä¸ä¸æä½ç³»ç»æ¯å¦ä½ç®¡çè¿ç¨çã\n\né¦åï¼å½æä»¬ç»å½å°æä½ç³»ç»ä¹åï¼å¯ä»¥éè¿ ps ç­æä½çå°åå¼åæ ·çè¿ç¨ï¼è¿äºè¿ç¨åæ¬ç³»ç»èªå¸¦çæå¡åç¨æ·çåºç¨è¿ç¨ãé£ä¹ï¼è¿äºè¿ç¨é½æä»ä¹æ ·çç¹ç¹ï¼\n\n * ç¬¬ä¸ï¼è¿äºè¿ç¨å¯ä»¥ç¸äºçå°ãç¸äºéä¿¡ï¼\n * ç¬¬äºï¼å®ä»¬ä½¿ç¨çæ¯åä¸ä¸ªæä»¶ç³»ç»ï¼å¯ä»¥å¯¹åä¸ä¸ªæä»¶è¿è¡è¯»åæä½ï¼\n * ç¬¬ä¸ï¼è¿äºè¿ç¨ä¼ä½¿ç¨ç¸åçç³»ç»èµæºã\n\nè¿æ ·çä¸ä¸ªç¹ç¹ä¼å¸¦æ¥ä»ä¹é®é¢å¢ï¼\n\n * å ä¸ºè¿äºè¿ç¨è½å¤ç¸äºçå°å¹¶ä¸è¿è¡éä¿¡ï¼é«çº§æéçè¿ç¨å¯ä»¥æ»å»å¶ä»è¿ç¨ï¼\n * å ä¸ºå®ä»¬ä½¿ç¨çæ¯åä¸ä¸ªæä»¶ç³»ç»ï¼å æ­¤ä¼å¸¦æ¥ä¸¤ä¸ªé®é¢ï¼è¿äºè¿ç¨å¯ä»¥å¯¹äºå·²æçæ°æ®è¿è¡å¢å æ¹æ¥ï¼å·æé«çº§æéçè¿ç¨å¯è½ä¼å°å¶ä»è¿ç¨çæ°æ®å é¤æï¼ç ´åæå¶ä»è¿ç¨çæ­£å¸¸è¿è¡ï¼æ­¤å¤ï¼è¿ç¨ä¸è¿ç¨ä¹é´çä¾èµå¯è½ä¼å­å¨å²çªï¼å¦æ­¤ä¸æ¥å°±ä¼ç»è¿ç»´å¸¦æ¥å¾å¤§çååï¼\n * å ä¸ºè¿äºè¿ç¨ä½¿ç¨çæ¯åä¸ä¸ªå®¿ä¸»æºçèµæºï¼åºç¨ä¹é´å¯è½ä¼å­å¨èµæºæ¢å çé®é¢ï¼å½ä¸ä¸ªåºç¨éè¦æ¶èå¤§é cpu ååå­èµæºçæ¶åï¼å°±å¯è½ä¼ç ´åå¶ä»åºç¨çè¿è¡ï¼å¯¼è´å¶ä»åºç¨æ æ³æ­£å¸¸å°æä¾æå¡ã\n\néå¯¹ä¸è¿°çä¸ä¸ªé®é¢ï¼å¦ä½ä¸ºè¿ç¨æä¾ä¸ä¸ªç¬ç«çè¿è¡ç¯å¢å¢ï¼\n\n * éå¯¹ä¸åè¿ç¨ä½¿ç¨åä¸ä¸ªæä»¶ç³»ç»æé æçé®é¢èè¨ï¼linux å unix æä½ç³»ç»å¯ä»¥éè¿ chroot ç³»ç»è°ç¨å°å­ç®å½åææ ¹ç®å½ï¼è¾¾å°è§å¾çº§å«çéç¦»ï¼è¿ç¨å¨ chroot çå¸®å©ä¸å¯ä»¥å·æç¬ç«çæä»¶ç³»ç»ï¼å¯¹äºè¿æ ·çæä»¶ç³»ç»è¿è¡å¢å æ¹æ¥ä¸ä¼å½±åå°å¶ä»è¿ç¨ï¼\n * å ä¸ºè¿ç¨ä¹é´ç¸äºå¯è§å¹¶ä¸å¯ä»¥ç¸äºéä¿¡ï¼ä½¿ç¨ namespace ææ¯æ¥å®ç°è¿ç¨å¨èµæºçè§å¾ä¸è¿è¡éç¦»ãå¨ chroot å namespace çå¸®å©ä¸ï¼è¿ç¨å°±è½å¤è¿è¡å¨ä¸ä¸ªç¬ç«çç¯å¢ä¸äºï¼\n * ä½å¨ç¬ç«çç¯å¢ä¸ï¼è¿ç¨æä½¿ç¨çè¿æ¯åä¸ä¸ªæä½ç³»ç»çèµæºï¼ä¸äºè¿ç¨å¯è½ä¼ä¾µèææ´ä¸ªç³»ç»çèµæºãä¸ºäºåå°è¿ç¨å½¼æ­¤ä¹é´çå½±åï¼å¯ä»¥éè¿ cgroup æ¥éå¶å¶èµæºä½¿ç¨çï¼è®¾ç½®å¶è½å¤ä½¿ç¨ç cpu ä»¥ååå­éã\n\né£ä¹ï¼åºè¯¥å¦ä½å®ä¹è¿æ ·çè¿ç¨éåå¢ï¼\n\nå¶å®ï¼å®¹å¨å°±æ¯ä¸ä¸ªè§å¾éç¦»ãèµæºå¯éå¶ãç¬ç«æä»¶ç³»ç»çè¿ç¨éåãæè°âè§å¾éç¦»âå°±æ¯è½å¤çå°é¨åè¿ç¨ä»¥åå·æç¬ç«çä¸»æºåç­ï¼æ§å¶èµæºä½¿ç¨çåæ¯å¯ä»¥å¯¹äºåå­å¤§å°ä»¥å cpu ä½¿ç¨ä¸ªæ°ç­è¿è¡éå¶ãå®¹å¨å°±æ¯ä¸ä¸ªè¿ç¨éåï¼å®å°ç³»ç»çå¶ä»èµæºéç¦»å¼æ¥ï¼å·æèªå·±ç¬ç«çèµæºè§å¾ã\n\nå®¹å¨å·æä¸ä¸ªç¬ç«çæä»¶ç³»ç»ï¼å ä¸ºä½¿ç¨çæ¯ç³»ç»çèµæºï¼æä»¥å¨ç¬ç«çæä»¶ç³»ç»åä¸éè¦å·å¤åæ ¸ç¸å³çä»£ç æèå·¥å·ï¼æä»¬åªéè¦æä¾å®¹å¨æéçäºè¿å¶æä»¶ãéç½®æä»¶ä»¥åä¾èµå³å¯ãåªè¦å®¹å¨è¿è¡æ¶æéçæä»¶éåé½è½å¤å·å¤ï¼é£ä¹è¿ä¸ªå®¹å¨å°±è½å¤è¿è¡èµ·æ¥ã\n\nç»¼ä¸æè¿°ï¼æä»¬å°è¿äºå®¹å¨è¿è¡æ¶æéè¦çææçæä»¶éåç§°ä¹ä¸ºå®¹å¨éåã',charsets:{cjk:!0}},{title:"k8s-ipvsè¿æ¥ä¿æ",frontmatter:{title:"k8s-ipvsè¿æ¥ä¿æ",date:"2019-10-15T00:00:00.000Z",description:"k8s ipvs recorder",categories:["skills","devops"],tags:[null],permalink:null},regularPath:"/blog/skills/devops/ipvs_in_k8s.html",relativePath:"blog/skills/devops/ipvs_in_k8s.md",key:"v-35163721",path:"/blog/skills/devops/ipvs_in_k8s.html",headers:[{level:2,title:"IPVS å¨ k8s ä¸­è¿æ¥ä¿æå¼åçé®é¢ï¼",slug:"ipvs-å¨-k8s-ä¸­è¿æ¥ä¿æå¼åçé®é¢",normalizedTitle:"ipvs å¨ k8s ä¸­è¿æ¥ä¿æå¼åçé®é¢ï¼",charIndex:2},{level:3,title:"èµ·å ",slug:"èµ·å ",normalizedTitle:"èµ·å ",charIndex:29},{level:3,title:"åæ­¥ç¡®è®¤",slug:"åæ­¥ç¡®è®¤",normalizedTitle:"åæ­¥ç¡®è®¤",charIndex:264},{level:3,title:"ç¥è¯ç¹åå¤",slug:"ç¥è¯ç¹åå¤",normalizedTitle:"ç¥è¯ç¹åå¤",charIndex:446},{level:3,title:"å³é®ç¹",slug:"å³é®ç¹",normalizedTitle:"å³é®ç¹",charIndex:2414},{level:3,title:"æ©å±",slug:"æ©å±",normalizedTitle:"æ©å±",charIndex:3008}],headersStr:"IPVS å¨ k8s ä¸­è¿æ¥ä¿æå¼åçé®é¢ï¼ èµ·å  åæ­¥ç¡®è®¤ ç¥è¯ç¹åå¤ å³é®ç¹ æ©å±",content:"# IPVS å¨ k8s ä¸­è¿æ¥ä¿æå¼åçé®é¢ï¼\n\n\n# èµ·å \n\nå¨å°ä¸å¡(å°é¨åé¿è¿æ¥)è¿ç§»è³k8séç¾¤æ¶, é¡¹ç®è½å¤å¹³ç¨³è¿è¡, ä½æ¯å¨æµè¯ç¯å¢åå¸æ¶å´ç»å¸¸éå°ï¼åååå¸æååç1åéå·¦å³ï¼websocketè¿æ¥åºç°ï¼504 bad handshakeã\n\nè¿ä¸éè¯¯å¼èµ·äºæä»¬çæ³¨æï¼å ä¸ºå¨åk8sé¨ç½²æ¶æ¯éè¿éç½® readiness æ¥ä¿è¯æå¡æ­£å¸¸å¯è®¿é®ãåæ¶, éå°é®é¢çè¿ä¸æå¡ svcA æ¯åå®ä¾é¨ç½²ã\n\nk8s çæ¬å¤§äº 1.8 æ¶ï¼é»è®¤éç¨ç ipvsãæä»¬çéç¾¤ k8s çåºå±è´è½½éç¨çæ¯ ipvsã\n\n\n# åæ­¥ç¡®è®¤\n\néå°é®é¢å, åç¡®è®¤äºéè¿lbè®¿é®ãå¨éç¾¤åéè¿nodeportè®¿é® ä»¥å ç´æ¥cluster ipè®¿é®æ¯å¦æ­£å¸¸ãç»ç¡®è®¤ï¼éç¾¤åéè¿nodeportä¸è½æ­£å¸¸è®¿é®, ç´æ¥cluster ipæ­£å¸¸ãæ­¤æ¶å¯ä»¥å°é®é¢ç¼©å°å° ipvs è·¯ç±ç¸å³çåå®¹ã\n\nç»è¾è®¯è¿ç»´åå­¦æéï¼æä»¬æ³¨æå° ipvs çä¸ä¸ªéç½®åæ°ï¼persistence_timeout\n\n\n# ç¥è¯ç¹åå¤\n\n * ipvs å·¥ä½æ¨¡å\n   * LVS DRåçè¯¦è§£å¾\n     * \n   * LVS FULLNATæ¨¡å¼\n     * \n   * LVS NATåçè¯¦è§£å¾\n     * \n   * LVS TUNåç\n     * \n * è¿æ¥ä¿æï¼\n   * lvs-persistent-connection\n * ipvs:\n   * ipvs éè¿ipvsadmå½ä»¤åLVSåæ ¸æäº¤é\n   * åæ°éç½®ï¼\n     \n         éç½®å¨å±åæ°ï¼ä½äºç®å½/proc/sys/net/ipv4/vs/ä¸:\n         è·åç»è®¡ä¿¡æ¯ï¼ä½äºç®å½/proc/net/ä¸:\n     \n     \n     1\n     2\n     \n     * /proc/net/ip_vs\n       * è·åå½åLVSåæ ¸éç½®ï¼åæ¬VSåRSç¸å³ä¿¡æ¯ï¼åipvsadm -lnï¼\n       \n           IP Virtual Server version 1.2.1 (size=1048576) - è¿ésizeæ¯æè¿æ¥hashè¡¨å¤§å°ï¼\n           Prot LocalAddress:Port Scheduler Flags\n               -> RemoteAddress:Port Forward Weight ActiveConn InActConn\n           TCP 0ADC0108:0050 rr - vsä¿¡æ¯ï¼vipåvport 16è¿å¶ï¼è°åº¦ç®æ³rrï¼\n               -> C0A8010B:0050 Route 1 0 0 - rsä¿¡æ¯ï¼ripårport 16è¿å¶ï¼æå¼ä¸º1ï¼\n               -> C0A8010A:0050 Route 1 0 0 \n       \n           - ActiveConnæ¯æestablishedç¶æçè¿æ¥ä¸ªæ°ï¼\n           - InActConnæ¯æéestablishedç¶æçè¿æ¥ä¸ªæ°ï¼\n       \n       \n       1\n       2\n       3\n       4\n       5\n       6\n       7\n       8\n       9\n       \n     * /proc/net/ip_vs_conn\n       * è·åææè¿æ¥ä¿¡æ¯ï¼å»ºè®®ä¸è¦ç¨è¯¥å½ä»¤ï¼å ä¸ºè¿æ¥æ°å¾å¤æ¶ï¼CPUå¼éä¼å¾å¤§ï¼\n       \n           Pro FromIP FPrt ToIP TPrt DestIP DPrt State Expires\n           - ç¨æ·ipåport vs ipåport rs ipåport tcpç¶ææºç¶æ è¿æ¥è¶æ¶å©ä½çæ¶é´\n       \n       \n       1\n       2\n       \n     * /proc/net/ip_vs_stats\n     * /proc/sys/net/ipv4/vs/expire_nodest_conn\n       * é»è®¤å¼ä¸º0ï¼å½LVSè½¬åæ°æ®åï¼åç°ç®çRSæ æï¼å é¤ï¼æ¶ï¼ä¼ä¸¢å¼è¯¥æ°æ®åï¼ä½ä¸å é¤ç¸åºè¿æ¥ï¼è¿æ ·è®¾è®¡çèèæ¯ï¼RSæ¢å¤æ¶ï¼å¦æClientåRS socketè¿æ²¡æè¶æ¶ï¼å å¯ä»¥ç»§ç»­éè®¯;\n       * å¦æå°è¯¥åæ°ç½®1ï¼åé©¬ä¸éæ¾ç¸åº è¿æ¥ï¼ä¸ªäººå»ºè®®éç¨é»è®¤å¼ï¼éç½®ä¸º0ï¼\n     * /proc/sys/net/ipv4/vs/expire_quiescent_template\n       * é»è®¤å¼ä¸º0ï¼å½RSçweightå¼=0ï¼å¦ï¼å¥åº·æ£æµå¤±è´¥ï¼åºç¨ç¨åºå°RS weightç½®0ï¼æ¶ï¼ä¼è¯ä¿æçæ°å»ºè¿æ¥ è¿ä¼ç»§ç»­è°åº¦å°è¯¥RSä¸ï¼\n       * å¦æéç½®ä¸º1ï¼åé©¬ä¸å° ä¼è¯ä¿æçè¿æ¥æ¨¡æ¿ ç½®ä¸ºæ æï¼éæ°è°åº¦æ°çRSï¼å¦ææä¼è¯ä¿æçä¸å¡ï¼å»ºè®®è¯¥å¼ éç½®ä¸º1ï¼\n     * /proc/sys/net/ipv4/vs/nat_icmp_send\n       * é»è®¤å¼ä¸º0ï¼å»ºè®®éç¨é»è®¤å¼ï¼ä¸º0ï¼\n       * å¦æç½®ä¸º1ï¼å½LVSæ¶å°RSåéåºæ¥çæ°æ®åï¼ä½æ²¡ææ¾å°ç¸åºè¿æ¥æ¶ï¼ååéç®çä¸å¯è¾¾ï¼ç«¯å£ä¸å¯è¾¾ï¼çICMPç»RSï¼\n     * /proc/sys/net/ipv4/vs/sync_threshold\n       * é»è®¤å¼ä¸º 3 50ï¼\n       * è¿ä¸ªåæ°åè¿æ¥åæ­¥ç¸å³ï¼LVSæ¶å°3ä¸ªååï¼å¼å§å¯å¨åæ­¥ï¼ä¹åï¼æ¯æ¶å°50ä¸ªåï¼å¯å¨ä¸æ¬¡åæ­¥ï¼å¯ä»¥æ ¹æ®LVSçæµéï¼å¯ä»¥è°æ´è¿æ¥åæ­¥çé¢çï¼ä»èæ§å¶åæ­¥çç³»ç»å¼éï¼\n\n\n# å³é®ç¹\n\nå¨é®é¢åçæ¶ï¼éè¿ ipvsadm -Ln | grep 10.111.103.161 -A3 æ¥çipvsè·¯ç±è¡¨åç°ï¼å·²ç»æ æçpodçripä¾ç¶å­å¨ï¼åªä¸è¿weight=0ã\n\nèç³»ä¸è¿°çç¸å³éç½®ä¼åç°ï¼å½æå¡åå¸æ¶ï¼åå°æ°podåå»ºå¹¶æ³¨åripå°ipvsï¼åå°æ§podå é¤ï¼ï¼ä½æ¯ä½æ¯ï¼ï¼æ§podå é¤æ¶ä¸æ¯åºè¯¥æå¯¹åºçripå é¤æåï¼\n\nå½æ§podå é¤æ¶ï¼å·²æè¿æ¥è¢«æ­å¼ï¼å®¢æ·ç«¯è§¦åéè¿æºå¶ï¼ä½å ä¸ºipvsçè¿æ¥ä¿æç¹æ§ï¼ä¼ä¾ç¶è·¯ç±å°æ§podå¯¹åºçrip(è½ç¶æ­¤æ¶weightä¸º0)ãè¿å°±æ¯é®é¢çæ ¹æº~\n\næä¹è¿æ¥ï¼Persistenceï¼çé®é¢ãæä¹è¿æ¥ä½¿ä¸ä¸ªå®¢æ·ç«¯å¨è¶æ¶æ¶é´åï¼ipvsadmin -påæ°æå®ï¼keepalivedçéç½®æä»¶persistence_timeoutæä»¤ï¼ä¼æç»­è¿æ¥å°åä¸å°åç«¯æå¡å¨\n\næ·±ç©¶åç°ï¼1.12 çkube-proxyæ´æ¹äºå®ç°ï¼ipvs ä¸å¦ææ conn å­å¨å°±ä¸å é¤ ripï¼åªæ¯å°å¶æéè®¾ç½®ä¸º0\n\n * è§£å³æ¹æ¡\n   \n   * å°åæ° /proc/sys/net/ipv4/vs/expire_quiescent_template è®¾ç½®ä¸º 1\n\n * æ³¨æ\n   \n   * ä¹æä»¥ä¸è°æ´ persistence_timeout æ¯å ä¸ºï¼ftp ä»¥å ssl ç­ä¼ä¾èµæ­¤ç¹æ§ï¼è¯¦è§ï¼persistence\n\n\n# æ©å±\n\n * k8s ä¸­ç ipvs æ¯ NAT æ¨¡å¼\n   * ipvs æ¯ä¸ä¸ªåæ ¸æçåå±è´è½½åè¡¡ï¼æ¯æNATãGatewayä»¥åIPIPé§éæ¨¡å¼ï¼Gatewayæ¨¡å¼æ§è½æå¥½ï¼ä½LBåRSä¸è½è·¨å­ç½ï¼IPIPæ§è½æ¬¡ä¹ï¼éè¿ipipé§éè§£å³è·¨ç½æ®µä¼ è¾é®é¢ï¼å æ­¤è½å¤æ¯æè·¨å­ç½ãèNATæ¨¡å¼æ²¡æéå¶ï¼è¿ä¹æ¯å¯ä¸ä¸ç§æ¯æç«¯å£æ å°çæ¨¡å¼ã\n   * ç±äº Kubernetes Service éè¦ä½¿ç¨ç«¯å£æ å°åè½ï¼å æ­¤kube-proxyå¿ç¶åªè½ä½¿ç¨ipvsçNATæ¨¡å¼ã\n * k8s ä¸­ä¸ºäºæµéè½åè·¯è¿åï¼\n   * ç±äº ipvs ç NAT æ¨¡å¼æ¯ dnatï¼ä¸åsnatï¼æä»¥éè¦è·iptableséåï¼å¢å snat\n     \n         -A KUBE-MARK-MASQ -j MARK --set-xmark 0x4000/0x4000\n     \n     \n     1\n     \n   * k8s ç snat æ¯å¨ mangle è¡¨ç POSTROUTING é¾ä¸è¿è¡çï¼ä¸è¬æ¥è¯´ï¼éè¦å¼å¯ä»¥ä¸åæ°ï¼æè½å®ç°è¿ä¸åè½ï¼\n     \n         sysctl net.ipv4.vs.conntrack=1\n     \n     \n     1\n     \n * ipvsæ¯dnatï¼ä¸åsnatï¼æä»¥å¦æåçº¯ä½¿ç¨ipvsï¼ä¼è¯è´è½½åè¡¡æ¯å¯ä»¥ç; ä½æ¯ï¼k8sä½¿ç¨ipvsï¼å¿é¡»è·iptableséåï¼è¿å¾å å¤ä¸ªsnatï¼è¿æ ·å¯¹äºipvsæ¥è¯´ï¼ææçæ¥æºipå°±åæä¸æ ·çäºï¼ä½¿ç¨ä¼è¯è´è½½åè¡¡æ¯å¦å°±æé®é¢äºå¢ï¼ + ä¸ä¼ï¼å ä¸ºï¼ipvs å·¥ä½å¨ PREROUTING ä¸ï¼è snat åçå¨ POSTROUTING é¾ä¸\n * svcæä¸ªåæ° ExternalTrafficPolicy è®¾ç½®ä¸º local æ¶ï¼å¯ä»¥é¿å k8s çè·¨èç¹è·¯ç±",normalizedContent:"# ipvs å¨ k8s ä¸­è¿æ¥ä¿æå¼åçé®é¢ï¼\n\n\n# èµ·å \n\nå¨å°ä¸å¡(å°é¨åé¿è¿æ¥)è¿ç§»è³k8séç¾¤æ¶, é¡¹ç®è½å¤å¹³ç¨³è¿è¡, ä½æ¯å¨æµè¯ç¯å¢åå¸æ¶å´ç»å¸¸éå°ï¼åååå¸æååç1åéå·¦å³ï¼websocketè¿æ¥åºç°ï¼504 bad handshakeã\n\nè¿ä¸éè¯¯å¼èµ·äºæä»¬çæ³¨æï¼å ä¸ºå¨åk8sé¨ç½²æ¶æ¯éè¿éç½® readiness æ¥ä¿è¯æå¡æ­£å¸¸å¯è®¿é®ãåæ¶, éå°é®é¢çè¿ä¸æå¡ svca æ¯åå®ä¾é¨ç½²ã\n\nk8s çæ¬å¤§äº 1.8 æ¶ï¼é»è®¤éç¨ç ipvsãæä»¬çéç¾¤ k8s çåºå±è´è½½éç¨çæ¯ ipvsã\n\n\n# åæ­¥ç¡®è®¤\n\néå°é®é¢å, åç¡®è®¤äºéè¿lbè®¿é®ãå¨éç¾¤åéè¿nodeportè®¿é® ä»¥å ç´æ¥cluster ipè®¿é®æ¯å¦æ­£å¸¸ãç»ç¡®è®¤ï¼éç¾¤åéè¿nodeportä¸è½æ­£å¸¸è®¿é®, ç´æ¥cluster ipæ­£å¸¸ãæ­¤æ¶å¯ä»¥å°é®é¢ç¼©å°å° ipvs è·¯ç±ç¸å³çåå®¹ã\n\nç»è¾è®¯è¿ç»´åå­¦æéï¼æä»¬æ³¨æå° ipvs çä¸ä¸ªéç½®åæ°ï¼persistence_timeout\n\n\n# ç¥è¯ç¹åå¤\n\n * ipvs å·¥ä½æ¨¡å\n   * lvs dråçè¯¦è§£å¾\n     * \n   * lvs fullnatæ¨¡å¼\n     * \n   * lvs natåçè¯¦è§£å¾\n     * \n   * lvs tunåç\n     * \n * è¿æ¥ä¿æï¼\n   * lvs-persistent-connection\n * ipvs:\n   * ipvs éè¿ipvsadmå½ä»¤ålvsåæ ¸æäº¤é\n   * åæ°éç½®ï¼\n     \n         éç½®å¨å±åæ°ï¼ä½äºç®å½/proc/sys/net/ipv4/vs/ä¸:\n         è·åç»è®¡ä¿¡æ¯ï¼ä½äºç®å½/proc/net/ä¸:\n     \n     \n     1\n     2\n     \n     * /proc/net/ip_vs\n       * è·åå½ålvsåæ ¸éç½®ï¼åæ¬vsårsç¸å³ä¿¡æ¯ï¼åipvsadm -lnï¼\n       \n           ip virtual server version 1.2.1 (size=1048576) - è¿ésizeæ¯æè¿æ¥hashè¡¨å¤§å°ï¼\n           prot localaddress:port scheduler flags\n               -> remoteaddress:port forward weight activeconn inactconn\n           tcp 0adc0108:0050 rr - vsä¿¡æ¯ï¼vipåvport 16è¿å¶ï¼è°åº¦ç®æ³rrï¼\n               -> c0a8010b:0050 route 1 0 0 - rsä¿¡æ¯ï¼ripårport 16è¿å¶ï¼æå¼ä¸º1ï¼\n               -> c0a8010a:0050 route 1 0 0 \n       \n           - activeconnæ¯æestablishedç¶æçè¿æ¥ä¸ªæ°ï¼\n           - inactconnæ¯æéestablishedç¶æçè¿æ¥ä¸ªæ°ï¼\n       \n       \n       1\n       2\n       3\n       4\n       5\n       6\n       7\n       8\n       9\n       \n     * /proc/net/ip_vs_conn\n       * è·åææè¿æ¥ä¿¡æ¯ï¼å»ºè®®ä¸è¦ç¨è¯¥å½ä»¤ï¼å ä¸ºè¿æ¥æ°å¾å¤æ¶ï¼cpuå¼éä¼å¾å¤§ï¼\n       \n           pro fromip fprt toip tprt destip dprt state expires\n           - ç¨æ·ipåport vs ipåport rs ipåport tcpç¶ææºç¶æ è¿æ¥è¶æ¶å©ä½çæ¶é´\n       \n       \n       1\n       2\n       \n     * /proc/net/ip_vs_stats\n     * /proc/sys/net/ipv4/vs/expire_nodest_conn\n       * é»è®¤å¼ä¸º0ï¼å½lvsè½¬åæ°æ®åï¼åç°ç®çrsæ æï¼å é¤ï¼æ¶ï¼ä¼ä¸¢å¼è¯¥æ°æ®åï¼ä½ä¸å é¤ç¸åºè¿æ¥ï¼è¿æ ·è®¾è®¡çèèæ¯ï¼rsæ¢å¤æ¶ï¼å¦æclientårs socketè¿æ²¡æè¶æ¶ï¼å å¯ä»¥ç»§ç»­éè®¯;\n       * å¦æå°è¯¥åæ°ç½®1ï¼åé©¬ä¸éæ¾ç¸åº è¿æ¥ï¼ä¸ªäººå»ºè®®éç¨é»è®¤å¼ï¼éç½®ä¸º0ï¼\n     * /proc/sys/net/ipv4/vs/expire_quiescent_template\n       * é»è®¤å¼ä¸º0ï¼å½rsçweightå¼=0ï¼å¦ï¼å¥åº·æ£æµå¤±è´¥ï¼åºç¨ç¨åºå°rs weightç½®0ï¼æ¶ï¼ä¼è¯ä¿æçæ°å»ºè¿æ¥ è¿ä¼ç»§ç»­è°åº¦å°è¯¥rsä¸ï¼\n       * å¦æéç½®ä¸º1ï¼åé©¬ä¸å° ä¼è¯ä¿æçè¿æ¥æ¨¡æ¿ ç½®ä¸ºæ æï¼éæ°è°åº¦æ°çrsï¼å¦ææä¼è¯ä¿æçä¸å¡ï¼å»ºè®®è¯¥å¼ éç½®ä¸º1ï¼\n     * /proc/sys/net/ipv4/vs/nat_icmp_send\n       * é»è®¤å¼ä¸º0ï¼å»ºè®®éç¨é»è®¤å¼ï¼ä¸º0ï¼\n       * å¦æç½®ä¸º1ï¼å½lvsæ¶å°rsåéåºæ¥çæ°æ®åï¼ä½æ²¡ææ¾å°ç¸åºè¿æ¥æ¶ï¼ååéç®çä¸å¯è¾¾ï¼ç«¯å£ä¸å¯è¾¾ï¼çicmpç»rsï¼\n     * /proc/sys/net/ipv4/vs/sync_threshold\n       * é»è®¤å¼ä¸º 3 50ï¼\n       * è¿ä¸ªåæ°åè¿æ¥åæ­¥ç¸å³ï¼lvsæ¶å°3ä¸ªååï¼å¼å§å¯å¨åæ­¥ï¼ä¹åï¼æ¯æ¶å°50ä¸ªåï¼å¯å¨ä¸æ¬¡åæ­¥ï¼å¯ä»¥æ ¹æ®lvsçæµéï¼å¯ä»¥è°æ´è¿æ¥åæ­¥çé¢çï¼ä»èæ§å¶åæ­¥çç³»ç»å¼éï¼\n\n\n# å³é®ç¹\n\nå¨é®é¢åçæ¶ï¼éè¿ ipvsadm -ln | grep 10.111.103.161 -a3 æ¥çipvsè·¯ç±è¡¨åç°ï¼å·²ç»æ æçpodçripä¾ç¶å­å¨ï¼åªä¸è¿weight=0ã\n\nèç³»ä¸è¿°çç¸å³éç½®ä¼åç°ï¼å½æå¡åå¸æ¶ï¼åå°æ°podåå»ºå¹¶æ³¨åripå°ipvsï¼åå°æ§podå é¤ï¼ï¼ä½æ¯ä½æ¯ï¼ï¼æ§podå é¤æ¶ä¸æ¯åºè¯¥æå¯¹åºçripå é¤æåï¼\n\nå½æ§podå é¤æ¶ï¼å·²æè¿æ¥è¢«æ­å¼ï¼å®¢æ·ç«¯è§¦åéè¿æºå¶ï¼ä½å ä¸ºipvsçè¿æ¥ä¿æç¹æ§ï¼ä¼ä¾ç¶è·¯ç±å°æ§podå¯¹åºçrip(è½ç¶æ­¤æ¶weightä¸º0)ãè¿å°±æ¯é®é¢çæ ¹æº~\n\næä¹è¿æ¥ï¼persistenceï¼çé®é¢ãæä¹è¿æ¥ä½¿ä¸ä¸ªå®¢æ·ç«¯å¨è¶æ¶æ¶é´åï¼ipvsadmin -påæ°æå®ï¼keepalivedçéç½®æä»¶persistence_timeoutæä»¤ï¼ä¼æç»­è¿æ¥å°åä¸å°åç«¯æå¡å¨\n\næ·±ç©¶åç°ï¼1.12 çkube-proxyæ´æ¹äºå®ç°ï¼ipvs ä¸å¦ææ conn å­å¨å°±ä¸å é¤ ripï¼åªæ¯å°å¶æéè®¾ç½®ä¸º0\n\n * è§£å³æ¹æ¡\n   \n   * å°åæ° /proc/sys/net/ipv4/vs/expire_quiescent_template è®¾ç½®ä¸º 1\n\n * æ³¨æ\n   \n   * ä¹æä»¥ä¸è°æ´ persistence_timeout æ¯å ä¸ºï¼ftp ä»¥å ssl ç­ä¼ä¾èµæ­¤ç¹æ§ï¼è¯¦è§ï¼persistence\n\n\n# æ©å±\n\n * k8s ä¸­ç ipvs æ¯ nat æ¨¡å¼\n   * ipvs æ¯ä¸ä¸ªåæ ¸æçåå±è´è½½åè¡¡ï¼æ¯ænatãgatewayä»¥åipipé§éæ¨¡å¼ï¼gatewayæ¨¡å¼æ§è½æå¥½ï¼ä½lbårsä¸è½è·¨å­ç½ï¼ipipæ§è½æ¬¡ä¹ï¼éè¿ipipé§éè§£å³è·¨ç½æ®µä¼ è¾é®é¢ï¼å æ­¤è½å¤æ¯æè·¨å­ç½ãènatæ¨¡å¼æ²¡æéå¶ï¼è¿ä¹æ¯å¯ä¸ä¸ç§æ¯æç«¯å£æ å°çæ¨¡å¼ã\n   * ç±äº kubernetes service éè¦ä½¿ç¨ç«¯å£æ å°åè½ï¼å æ­¤kube-proxyå¿ç¶åªè½ä½¿ç¨ipvsçnatæ¨¡å¼ã\n * k8s ä¸­ä¸ºäºæµéè½åè·¯è¿åï¼\n   * ç±äº ipvs ç nat æ¨¡å¼æ¯ dnatï¼ä¸åsnatï¼æä»¥éè¦è·iptableséåï¼å¢å snat\n     \n         -a kube-mark-masq -j mark --set-xmark 0x4000/0x4000\n     \n     \n     1\n     \n   * k8s ç snat æ¯å¨ mangle è¡¨ç postrouting é¾ä¸è¿è¡çï¼ä¸è¬æ¥è¯´ï¼éè¦å¼å¯ä»¥ä¸åæ°ï¼æè½å®ç°è¿ä¸åè½ï¼\n     \n         sysctl net.ipv4.vs.conntrack=1\n     \n     \n     1\n     \n * ipvsæ¯dnatï¼ä¸åsnatï¼æä»¥å¦æåçº¯ä½¿ç¨ipvsï¼ä¼è¯è´è½½åè¡¡æ¯å¯ä»¥ç; ä½æ¯ï¼k8sä½¿ç¨ipvsï¼å¿é¡»è·iptableséåï¼è¿å¾å å¤ä¸ªsnatï¼è¿æ ·å¯¹äºipvsæ¥è¯´ï¼ææçæ¥æºipå°±åæä¸æ ·çäºï¼ä½¿ç¨ä¼è¯è´è½½åè¡¡æ¯å¦å°±æé®é¢äºå¢ï¼ + ä¸ä¼ï¼å ä¸ºï¼ipvs å·¥ä½å¨ prerouting ä¸ï¼è snat åçå¨ postrouting é¾ä¸\n * svcæä¸ªåæ° externaltrafficpolicy è®¾ç½®ä¸º local æ¶ï¼å¯ä»¥é¿å k8s çè·¨èç¹è·¯ç±",charsets:{cjk:!0}},{title:"kubernetes ç®è¿°",frontmatter:{title:"kubernetes ç®è¿°",date:"2019-12-18T00:00:00.000Z",categories:["kubernetes","istio","envoy","mesh services"],keywords:["envoy","k8s","istio","mesh services"],description:"kubernetes åºç¡ç¥è¯æ±æ»ï¼ä»¥åmesh services---å Kubernetes æ¶ä»£çå¾®æå¡",tags:[null],permalink:null},regularPath:"/blog/skills/devops/k8s_base.html",relativePath:"blog/skills/devops/k8s_base.md",key:"v-75c42f42",path:"/blog/skills/devops/k8s_base.html",headers:[{level:2,title:"summary",slug:"summary",normalizedTitle:"summary",charIndex:17},{level:2,title:"Network",slug:"network",normalizedTitle:"network",charIndex:1028},{level:2,title:"kubernetes details",slug:"kubernetes-details",normalizedTitle:"kubernetes details",charIndex:1587},{level:2,title:"istio summary",slug:"istio-summary",normalizedTitle:"istio summary",charIndex:2567},{level:2,title:"reference",slug:"reference",normalizedTitle:"reference",charIndex:1802}],headersStr:"summary Network kubernetes details istio summary reference",content:'# Kubernetes\n\n\n# summary\n\n * æ¬è´¨ï¼\n   \n   * Kubernetes çæ¬è´¨æ¯åºç¨ççå½å¨æç®¡çï¼å·ä½æ¥è¯´å°±æ¯é¨ç½²åç®¡çï¼æ©ç¼©å®¹ãèªå¨æ¢å¤ãåå¸ï¼ãä¸ºå¾®æå¡æä¾äºå¯æ©å±ãé«å¼¹æ§çé¨ç½²åç®¡çå¹³å°ã\n   \n       At its core, k8s is a database(etcd). With "watchers" & "controllers" that react to changes in the DB. \n       The controllers are what make it Kubernetes. \n       This pluggability and extensibility is part of its "secret sauce"\n   \n   \n   1\n   2\n   3\n   \n\n * xDSï¼\n   \n   * xDS åè®®æ§å¶äº Istio Service Mesh ä¸­æææµéçå·ä½è¡ä¸ºï¼å¯ä»¥è¿è¡æ´å å®åãç²¾åçç®¡çæµé\n\n * k8sæ¶æå¦ä¸:\n   \n   * \n\n * åä¸ªæ¨¡åä¹é´çå·¥ä½æµï¼\n   \n   * \n\næ»çæ¥è¯´ï¼k8s ç±ä»¥ä¸å é¨åç»æï¼\n\n * kube-apiserver ::: æä¾ç»ä¸æ¥å£\n * kube-controller-manager ::: è´è´£èµæºç®¡çåæ­¥\n   * Replication Controller\n   * Service Controller\n   * ResourceQuota Controller\n   * Namespace Controller\n   * Node Controller\n   * .etc\n * kube-scheduler ::: è´è½½èµæºä¸podçå¹é\n * kube-proxy ::: è´è´£k8sä¸­çç½ç»éç½®\n * kubelet ::: ç®¡çpodççå½å¨æ\n\nå¶ä¸­ï¼å¸¸è§çèµæºç±»åæï¼\n\n * Config MapsãDaemon SetsãDeploymentsãEventsãEndpointsãIngressãJobsãNodesãNamespacesãPodsãPersistent VolumeãReplic SetsãSecretsãServicesãService AccountsãStateful Sets, and more...\n\n\n# Network\n\n * ç½ç»æ¶æ\n   \n   * æ¶æå¾\n   * ä¼ç¼ºç¹\n   * istio\n\n * ç½ç»æ¶æåå±å­¦ä¹ ä¼ç¼ºç¹\n\n * å®å¶ç½ç»\n\n * é®é¢å®ä½\n\n * CRI(container runtime interface)\n   \n   * CRI integrations\n     * containerd(with cri-containerd)\n     * cri-o\n     * docker\n     * frakti\n     * rktlet\n   * cri-containerd\n     * a containerd based implementation of CRI\n\n * CNI(container network interface)\n   \n   * notes\n     * kubernetes ä½¿ç¨ CNI ç»ä»¶å®¹å¨ç½ç»\n     * å½ POD åå»ºåéæ¯æ¶ï¼kubernetes å°è°ç¨ CNI æä»¶æ¥å£çæç½ç»éç½®\n     * CNI æä»¶å°çæèæNICï¼å°å¶æè½½å¨ä¸»æºçç½ç»ä¸ï¼å¹¶å POD ç namespace å³è\n   * Calico\n     * åºäºä¸å±è·¯ç±(BGPè·¯ç±åè®®)ï¼ä¸ä¾èµäºå±è½¯ä»¶\n   * Flannel\n\n\n# kubernetes details\n\n * k8s pauseå®¹å¨:\n   * å¨podä¸­æä»»Linuxå½åç©ºé´å±äº«çåºç¡ï¼\n     * æ¯ä¸ªPodéè¿è¡çä¸ä¸ªç¹æ®çè¢«ç§°ä¹ä¸ºPauseçå®¹å¨ï¼å¶ä»å®¹å¨åä¸ºä¸å¡å®¹å¨ï¼è¿äºä¸å¡å®¹å¨å±äº«Pauseå®¹å¨çç½ç»æ åVolumeæè½½å·ï¼å æ­¤ä»ä»¬ä¹é´éä¿¡åæ°æ®äº¤æ¢æ´ä¸ºé«æ\n   * å¯ç¨pidå½åç©ºé´ï¼å¼å¯initè¿ç¨\n     * æ¯åä¸ä¸ªpodä¸­ï¼å¶ä»å®¹å¨1å·è¿ç¨çç¶è¿ç¨\n   * reference: almighty-pause-container\n * k8s externalIPs:\n   * LoadBalancer è¿ç§è®¿é®éç¾¤åçæ¹å¼ï¼ä¼èªå¨åå»º externalIPs (éè¦äºæå¡åæä¾ç¸åºæ¯æ)\n   * reference: service-discovery\n * k8s kubeproxy:\n   * Service å®ç°è´è½½åè¡¡ï¼Load Balanceï¼åè½ï¼èªå¨æè¯·æ±æµéåå¸å°åç«¯ææçæå¡ä¸ï¼è¿ä¸åè½çå³é®ï¼å°±æ¯ kube-proxyã\n     * kube-proxy è¿è¡å¨æ¯ä¸ªèç¹ä¸ï¼çå¬ API Server ä¸­æå¡å¯¹è±¡çååï¼éè¿ç®¡ç iptables æ¥å®ç°ç½ç»çè½¬åã\n   * kube-proxy æä¸¤ç§å®ç° service çæ¹æ¡ï¼userspace å iptables\n     * userspace æ¯å¨ç¨æ·ç©ºé´çå¬ä¸ä¸ªç«¯å£ï¼ææç service é½è½¬åå°è¿ä¸ªç«¯å£ï¼ç¶å kube-proxy å¨åé¨åºç¨å±å¯¹å¶è¿è¡è½¬åãå ä¸ºæ¯å¨ç¨æ·ç©ºé´è¿è¡è½¬åï¼æä»¥æçä¹ä¸é«\n     * iptables å®å¨å®ç° iptables æ¥å®ç° serviceï¼æ¯ç®åé»è®¤çæ¹å¼ï¼ä¹æ¯æ¨èçæ¹å¼ï¼æçå¾é«ï¼åªæåæ ¸ä¸­ netfilter ä¸äºæèï¼ã\n   * é®é¢ï¼k8s kubeproxy å¨ istio ä¸­æ¯å¦æç¨ï¼æçè¯ï¼è½åæ¥ä»ä¹æ ·çä½ç¨\n * ä¸å¸¸ç¨çéè¦å½ä»¤\n\n    kubectl api-resources -o wide: limit:  >= 1.11.0\n    kubectl explain: eg. kubectl explain replicaset --api-version apps/v1\t\n\n\n1\n2\n\n\n\n# istio summary\n\n * envoy ç4ç§DS(discovery Service):Discovery Serviceå°±æ¯é¨ç½²å¨æ§å¶é¢çï¼å¨istioä¸­ï¼æ¯Pilotã\n   1. listenerï¼ä¹å³envoyæ¢ç¶æ¯proxyï¼ä¸é¨åè½¬åï¼å°±å¾çå¬ä¸ä¸ªç«¯å£ï¼æ¥å¥è¯·æ±ï¼ç¶åæè½å¤æ ¹æ®ç­ç¥è½¬åï¼è¿ä¸ªçå¬çç«¯å£ç§°ä¸ºlistener\n   2. endpointï¼æ¯ç®æ çipå°ååç«¯å£ï¼è¿ä¸ªæ¯proxyæç»å°è¯·æ±è½¬åå°çå°æ¹ã\n   3. clusterï¼ä¸ä¸ªclusteræ¯å·æå®å¨ç¸åè¡ä¸ºçå¤ä¸ªendpointï¼ä¹å³å¦ææä¸ä¸ªå®¹å¨å¨è¿è¡ï¼å°±ä¼æä¸ä¸ªIPåç«¯å£ï¼ä½æ¯é¨ç½²çæ¯å®å¨ç¸åçä¸ä¸ªæå¡ï¼ä»ä»¬ç»æä¸ä¸ªClusterï¼ä»clusterå°endpointçè¿ç¨ç§°ä¸ºè´è½½åè¡¡ï¼å¯ä»¥è½®è¯¢ç­ã\n   4. routeï¼ææ¶åå¤ä¸ªclusterå·æç±»ä¼¼çåè½ï¼ä½æ¯æ¯ä¸åççæ¬å·ï¼å¯ä»¥éè¿routeè§åï¼éæ©å°è¯·æ±è·¯ç±å°æä¸ä¸ªçæ¬å·ï¼ä¹å³æä¸ä¸ªclusterã\n\n\n# reference\n\n * istio-handbook\n * ibm-opentech-ma\n\nhttps://kubernetes.feisky.xyz/ https://sookocheff.com/post/kubernetes/understanding-kubernetes-networking-model/\n\néå¯ k8s deployment çæ¹å¼ï¼ kubectl rollout restart deployment your_deployment_name æ´æ¹ deployment æä»¶(æ´æ¹labelãimageç­ææé¨å)ï¼å¹¶éæ° apply\n\nconntrack',normalizedContent:'# kubernetes\n\n\n# summary\n\n * æ¬è´¨ï¼\n   \n   * kubernetes çæ¬è´¨æ¯åºç¨ççå½å¨æç®¡çï¼å·ä½æ¥è¯´å°±æ¯é¨ç½²åç®¡çï¼æ©ç¼©å®¹ãèªå¨æ¢å¤ãåå¸ï¼ãä¸ºå¾®æå¡æä¾äºå¯æ©å±ãé«å¼¹æ§çé¨ç½²åç®¡çå¹³å°ã\n   \n       at its core, k8s is a database(etcd). with "watchers" & "controllers" that react to changes in the db. \n       the controllers are what make it kubernetes. \n       this pluggability and extensibility is part of its "secret sauce"\n   \n   \n   1\n   2\n   3\n   \n\n * xdsï¼\n   \n   * xds åè®®æ§å¶äº istio service mesh ä¸­æææµéçå·ä½è¡ä¸ºï¼å¯ä»¥è¿è¡æ´å å®åãç²¾åçç®¡çæµé\n\n * k8sæ¶æå¦ä¸:\n   \n   * \n\n * åä¸ªæ¨¡åä¹é´çå·¥ä½æµï¼\n   \n   * \n\næ»çæ¥è¯´ï¼k8s ç±ä»¥ä¸å é¨åç»æï¼\n\n * kube-apiserver ::: æä¾ç»ä¸æ¥å£\n * kube-controller-manager ::: è´è´£èµæºç®¡çåæ­¥\n   * replication controller\n   * service controller\n   * resourcequota controller\n   * namespace controller\n   * node controller\n   * .etc\n * kube-scheduler ::: è´è½½èµæºä¸podçå¹é\n * kube-proxy ::: è´è´£k8sä¸­çç½ç»éç½®\n * kubelet ::: ç®¡çpodççå½å¨æ\n\nå¶ä¸­ï¼å¸¸è§çèµæºç±»åæï¼\n\n * config mapsãdaemon setsãdeploymentsãeventsãendpointsãingressãjobsãnodesãnamespacesãpodsãpersistent volumeãreplic setsãsecretsãservicesãservice accountsãstateful sets, and more...\n\n\n# network\n\n * ç½ç»æ¶æ\n   \n   * æ¶æå¾\n   * ä¼ç¼ºç¹\n   * istio\n\n * ç½ç»æ¶æåå±å­¦ä¹ ä¼ç¼ºç¹\n\n * å®å¶ç½ç»\n\n * é®é¢å®ä½\n\n * cri(container runtime interface)\n   \n   * cri integrations\n     * containerd(with cri-containerd)\n     * cri-o\n     * docker\n     * frakti\n     * rktlet\n   * cri-containerd\n     * a containerd based implementation of cri\n\n * cni(container network interface)\n   \n   * notes\n     * kubernetes ä½¿ç¨ cni ç»ä»¶å®¹å¨ç½ç»\n     * å½ pod åå»ºåéæ¯æ¶ï¼kubernetes å°è°ç¨ cni æä»¶æ¥å£çæç½ç»éç½®\n     * cni æä»¶å°çæèænicï¼å°å¶æè½½å¨ä¸»æºçç½ç»ä¸ï¼å¹¶å pod ç namespace å³è\n   * calico\n     * åºäºä¸å±è·¯ç±(bgpè·¯ç±åè®®)ï¼ä¸ä¾èµäºå±è½¯ä»¶\n   * flannel\n\n\n# kubernetes details\n\n * k8s pauseå®¹å¨:\n   * å¨podä¸­æä»»linuxå½åç©ºé´å±äº«çåºç¡ï¼\n     * æ¯ä¸ªpodéè¿è¡çä¸ä¸ªç¹æ®çè¢«ç§°ä¹ä¸ºpauseçå®¹å¨ï¼å¶ä»å®¹å¨åä¸ºä¸å¡å®¹å¨ï¼è¿äºä¸å¡å®¹å¨å±äº«pauseå®¹å¨çç½ç»æ åvolumeæè½½å·ï¼å æ­¤ä»ä»¬ä¹é´éä¿¡åæ°æ®äº¤æ¢æ´ä¸ºé«æ\n   * å¯ç¨pidå½åç©ºé´ï¼å¼å¯initè¿ç¨\n     * æ¯åä¸ä¸ªpodä¸­ï¼å¶ä»å®¹å¨1å·è¿ç¨çç¶è¿ç¨\n   * reference: almighty-pause-container\n * k8s externalips:\n   * loadbalancer è¿ç§è®¿é®éç¾¤åçæ¹å¼ï¼ä¼èªå¨åå»º externalips (éè¦äºæå¡åæä¾ç¸åºæ¯æ)\n   * reference: service-discovery\n * k8s kubeproxy:\n   * service å®ç°è´è½½åè¡¡ï¼load balanceï¼åè½ï¼èªå¨æè¯·æ±æµéåå¸å°åç«¯ææçæå¡ä¸ï¼è¿ä¸åè½çå³é®ï¼å°±æ¯ kube-proxyã\n     * kube-proxy è¿è¡å¨æ¯ä¸ªèç¹ä¸ï¼çå¬ api server ä¸­æå¡å¯¹è±¡çååï¼éè¿ç®¡ç iptables æ¥å®ç°ç½ç»çè½¬åã\n   * kube-proxy æä¸¤ç§å®ç° service çæ¹æ¡ï¼userspace å iptables\n     * userspace æ¯å¨ç¨æ·ç©ºé´çå¬ä¸ä¸ªç«¯å£ï¼ææç service é½è½¬åå°è¿ä¸ªç«¯å£ï¼ç¶å kube-proxy å¨åé¨åºç¨å±å¯¹å¶è¿è¡è½¬åãå ä¸ºæ¯å¨ç¨æ·ç©ºé´è¿è¡è½¬åï¼æä»¥æçä¹ä¸é«\n     * iptables å®å¨å®ç° iptables æ¥å®ç° serviceï¼æ¯ç®åé»è®¤çæ¹å¼ï¼ä¹æ¯æ¨èçæ¹å¼ï¼æçå¾é«ï¼åªæåæ ¸ä¸­ netfilter ä¸äºæèï¼ã\n   * é®é¢ï¼k8s kubeproxy å¨ istio ä¸­æ¯å¦æç¨ï¼æçè¯ï¼è½åæ¥ä»ä¹æ ·çä½ç¨\n * ä¸å¸¸ç¨çéè¦å½ä»¤\n\n    kubectl api-resources -o wide: limit:  >= 1.11.0\n    kubectl explain: eg. kubectl explain replicaset --api-version apps/v1\t\n\n\n1\n2\n\n\n\n# istio summary\n\n * envoy ç4ç§ds(discovery service):discovery serviceå°±æ¯é¨ç½²å¨æ§å¶é¢çï¼å¨istioä¸­ï¼æ¯pilotã\n   1. listenerï¼ä¹å³envoyæ¢ç¶æ¯proxyï¼ä¸é¨åè½¬åï¼å°±å¾çå¬ä¸ä¸ªç«¯å£ï¼æ¥å¥è¯·æ±ï¼ç¶åæè½å¤æ ¹æ®ç­ç¥è½¬åï¼è¿ä¸ªçå¬çç«¯å£ç§°ä¸ºlistener\n   2. endpointï¼æ¯ç®æ çipå°ååç«¯å£ï¼è¿ä¸ªæ¯proxyæç»å°è¯·æ±è½¬åå°çå°æ¹ã\n   3. clusterï¼ä¸ä¸ªclusteræ¯å·æå®å¨ç¸åè¡ä¸ºçå¤ä¸ªendpointï¼ä¹å³å¦ææä¸ä¸ªå®¹å¨å¨è¿è¡ï¼å°±ä¼æä¸ä¸ªipåç«¯å£ï¼ä½æ¯é¨ç½²çæ¯å®å¨ç¸åçä¸ä¸ªæå¡ï¼ä»ä»¬ç»æä¸ä¸ªclusterï¼ä»clusterå°endpointçè¿ç¨ç§°ä¸ºè´è½½åè¡¡ï¼å¯ä»¥è½®è¯¢ç­ã\n   4. routeï¼ææ¶åå¤ä¸ªclusterå·æç±»ä¼¼çåè½ï¼ä½æ¯æ¯ä¸åççæ¬å·ï¼å¯ä»¥éè¿routeè§åï¼éæ©å°è¯·æ±è·¯ç±å°æä¸ä¸ªçæ¬å·ï¼ä¹å³æä¸ä¸ªclusterã\n\n\n# reference\n\n * istio-handbook\n * ibm-opentech-ma\n\nhttps://kubernetes.feisky.xyz/ https://sookocheff.com/post/kubernetes/understanding-kubernetes-networking-model/\n\néå¯ k8s deployment çæ¹å¼ï¼ kubectl rollout restart deployment your_deployment_name æ´æ¹ deployment æä»¶(æ´æ¹labelãimageç­ææé¨å)ï¼å¹¶éæ° apply\n\nconntrack',charsets:{cjk:!0}},{title:"K8Sç½ç»ä¹éç¾¤å¤è®¿é®serviceçæ¹å¼",frontmatter:{title:"K8Sç½ç»ä¹éç¾¤å¤è®¿é®serviceçæ¹å¼",date:"2019-12-18T00:00:00.000Z",description:"K8Sç½ç»ä¹éç¾¤å¤è®¿é®serviceçæ¹å¼",categories:["skills","devops"],tags:[null],permalink:null},regularPath:"/blog/skills/devops/k8s_net_expose.html",relativePath:"blog/skills/devops/k8s_net_expose.md",key:"v-897ab682",path:"/blog/skills/devops/k8s_net_expose.html",headers:[{level:2,title:"NodePort",slug:"nodeport",normalizedTitle:"nodeport",charIndex:110},{level:2,title:"LoadBalancer:",slug:"loadbalancer",normalizedTitle:"loadbalancer:",charIndex:462},{level:2,title:"Ingress",slug:"ingress",normalizedTitle:"ingress",charIndex:122}],headersStr:"NodePort LoadBalancer: Ingress",content:"# K8Sç½ç»ä¹éç¾¤å¤è®¿é®serviceçæ¹å¼\n\nk8s service ç cluster ip åªè½ä¾éç¾¤åé¨è®¿é®ä½¿ç¨ï¼å¦ææ³å° service æ´é²ç»å¤é¨è¯¥æä¹åï¼\n\nk8s æä¾äºä»¥ä¸å ç§æ¹å¼æ¥å®ç°è¿ä¸ª\n\n * NodePort\n * Ingress\n * LoadBalancer\n\n\n# NodePort\n\nNodePort æå¡æ¯å¼å¯¼å¤é¨æµéå° k8s æå¡çæåºç¡çæ¹å¼ã\n\næ­£å¦ NodePort è¿ä¸ªåå­æç¤ºï¼å¨ææ k8s èç¹ä¸å¼æ¾ä¸ä¸ªç¹å®ç«¯å£ï¼ä»»ä½åéå°è¯¥ç«¯å£çæµéé½è¢«è½¬åå°å¯¹åºæå¡ãè¿ä¸ªç«¯å£å¯ä»¥èªå·±æå®ï¼å¦æä¸æå®çè¯ï¼ç³»ç»å°éæ©ä¸ä¸ªéæºç«¯å£ã\n\n\n\nè¿ç§æ¹æ³æè®¸å¤ç¼ºç¹ï¼\n\n * æ¯ä¸ªç«¯å£åªè½æ¯ä¸ç§æå¡\n * ç«¯å£(é»è®¤)èå´åªè½æ¯ 30000-32767\n * å¦æèç¹ç IP å°ååçåå(éç¾¤æ©/ç¼©å®¹)ï¼æä»¬éè¦è½å¤çè¿ç§æåµã\n\nåºäºä»¥ä¸åå ï¼ä¸å»ºè®®å¨çäº§ç¯å¢ä¸ç¨è¿ç§æ¹å¼æ´é²æå¡ãä½æ¯å¯¹ demo åºç¨ç­ä¸´æ¶åºç¨ä½¿ç¨è¿ç§æ¹å¼ï¼æ çæ¯å¾æ¹ä¾¿çï¼ä¸éè¦ç³è¯·é¢å¤çæè´µçèµæºã\n\n\n# LoadBalancer:\n\nLoadBalancer æ¯æ´é² k8s service å° internet çæ åæ¹å¼ãè¿ç§æ¹å¼çå®ç°ï¼éè¦ä¾èµ äºæä¾å çæ¯æãéè¿è¿ç§æ¹å¼ï¼æ¥èªå¤é¨è´è½½åè¡¡å¨çæµéå°ç´æ¥æå° backend pod ä¸ï¼ä¸è¿å®éå®ä»¬æ¯å¦ä½å·¥ä½çï¼è¿è¦ä¾èµäºäºæä¾åã\n\nLoadBalancer çå·¥ä½æ¹å¼ï¼æ¯å¨éç¾¤å¤åå»ºä¸ä¸ª lb (æ¥æç¬ç«ç ip å°å)ï¼å¹¶ä¸ææç»è¿ lb çæµéè½¬åå°æå® portï¼ç»è¿è¿ä¸ª port åæµéä¼è¢«è½¬åå°æå®ç k8s æå¡ãè¿ä¸ªè¿ç¨ä¸­ï¼æ²¡æè¿æ»¤ãæ²¡æè·¯ç±..., åæ¶, ç±äºå®å·¥ä½å¨ Layer 4ï¼æä»¥å ä¹å¯ä»¥å¤çä»»ææµéç±»åï¼å¦ï¼HTTP, TCP, UDP, Websockets, gRPC, or whatever\n\nLoadBalancer æ¹å¼çæå¤§ä¸è¶³æ¯ï¼æ¯ä¸ªéè¦æ´é²ç» internet çæå¡é½è¦ä¸ä¸ªæ¥æç¬ç« ip å°åç lbï¼å¹¶ä¸éè¦ä¸ºæ­¤æ¯ä»è´¹ç¨ã\n\n\n\n\n# Ingress\n\nIngress ä¸åäºä¸æç NodePortãLoadBalancerï¼å®äºå®ä¸ä¸æ¯ä¸ç§æå¡ç±»å, èæ¯ä¸ç§èµæºç±»åï¼æ¯ä¸ä¸ª Ingress Controller çè§åéåãè Ingress Controller å®éä¸å°±æ¯ä¸ä¸ªè§£æ Ingress è§åçéç¾¤å serviceã\n\næ³¨æï¼Ingress æ¯è§åï¼Ingress Controller è¿è¡è§åè§£æãæ§è¡ï¼ä»ä»¬é½æ²¡ææ¶åå¦ä½æ´é²èªå·±å° internetï¼è¿ä¸ªè¿æ¯éè¦ Ingress Controller åå©åæè®²å°ç NodePort æè LoadBalancer æ¥å®ç°ã\n\nService Type ç¤ºä¾:\n\n\n    Type=ClusterIP\n    Type=NodePort\n    Type=LoadBalancer\n\n\n1\n2\n3\n4\n\n\nIngress ç¤ºä¾\n\n    apiVersion: networking.k8s.io/v1beta1\n    kind: Ingress\n    metadata:\n    name: test-ingress\n    annotations:\n        nginx.ingress.kubernetes.io/rewrite-target: /\n    spec:\n    rules:\n    - http:\n        paths:\n        - path: /testpath\n            pathType: Prefix\n            backend:\n            serviceName: test\n            servicePort: 80\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\n\n\nå¨ k8s éç¾¤ä¸­æå¸¸è§ç ingress controller å°±æ¯ nginxï¼æ­¤æ¶ Ingress Controller çä½ç¨å°±æ¯çå¬ Ingress è§åçååï¼å¹¶è§£ææå¯¹åºç nginx è§åï¼å¹¶åå¥ nginx éç½®(/etc/nginx.conf)ã\n\néè¿ä½¿ç¨ Ingressï¼æä»¬å¯ä»¥åå¾å¤ä¸åçäºæï¼å ä¸ºæå¾å¤ä¸åç±»åç Ingress controller æ¥æåç§åæ ·çè½åãé»è®¤ç GKE ingress controller ä¼ä¸ºæå¡åå»ºä¸ä¸ª HTTP(S) Load Balancerã è¿å°±åè®¸ç¨åºäº path å subdomain çæ¹å¼è·¯ç±å°åç«¯æå¡ãä¾å¦ï¼å¯ä»¥éè¿ foo.yourdomain.com å°è¾¾ foo serviceï¼å¨ yourdomain.com/bar/ ä¸çè·¯å¾è·¯ç±å° bar service.\n\nIngress å¯è½æ¯åè½æå¼ºå¤§çæ´é²æå¡çæ¹å¼ï¼ä½æ¯ä¹æ¯æå¤æçãæåç§åæ ·ç Ingress controller çå®ç°æ¹å¼ï¼å¦ the Google Cloud Load Balancer, Nginx, Contour, Istio, and more. ä¹æå¾å¤ Ingress controllers çæä»¶ï¼å¦ the cert-manager å¯ä»¥èªå¨è¿è¡ SSL è®¤è¯ã\n\nIngress æ¯ç¨åä¸ä¸ª ip æ´é²å¤ä¸ªæå¡(å¯ä»¥éè¿è¿ L7 åè®®è¿è¡è·¯ç±)çææç¨çæ¹å¼ãè¿æ ·çè¯ï¼åªéè¦æ¯ä»ä¸ä¸ª load balancer çè´¹ç¨ãåæ¶ï¼Ingress éå¸¦äºå¾å¤æç¨çç¹æ§ï¼å¦ï¼SSLãAuthãRouting, etc\n\n\n# æè\n\n * å¦ææä»¬æ¯äºååçè¯ï¼ä¼æä¹æ¥å®ç° LoadBalancer ? å¯¹è´è½½åè¡¡ãæºipä¿çç­é®é¢å¦ä½å¤ç\n\n\n# reference\n\n * services-networking-ingress\n * create-external-load-balancer\n * ingress-vs-load-balancer",normalizedContent:"# k8sç½ç»ä¹éç¾¤å¤è®¿é®serviceçæ¹å¼\n\nk8s service ç cluster ip åªè½ä¾éç¾¤åé¨è®¿é®ä½¿ç¨ï¼å¦ææ³å° service æ´é²ç»å¤é¨è¯¥æä¹åï¼\n\nk8s æä¾äºä»¥ä¸å ç§æ¹å¼æ¥å®ç°è¿ä¸ª\n\n * nodeport\n * ingress\n * loadbalancer\n\n\n# nodeport\n\nnodeport æå¡æ¯å¼å¯¼å¤é¨æµéå° k8s æå¡çæåºç¡çæ¹å¼ã\n\næ­£å¦ nodeport è¿ä¸ªåå­æç¤ºï¼å¨ææ k8s èç¹ä¸å¼æ¾ä¸ä¸ªç¹å®ç«¯å£ï¼ä»»ä½åéå°è¯¥ç«¯å£çæµéé½è¢«è½¬åå°å¯¹åºæå¡ãè¿ä¸ªç«¯å£å¯ä»¥èªå·±æå®ï¼å¦æä¸æå®çè¯ï¼ç³»ç»å°éæ©ä¸ä¸ªéæºç«¯å£ã\n\n\n\nè¿ç§æ¹æ³æè®¸å¤ç¼ºç¹ï¼\n\n * æ¯ä¸ªç«¯å£åªè½æ¯ä¸ç§æå¡\n * ç«¯å£(é»è®¤)èå´åªè½æ¯ 30000-32767\n * å¦æèç¹ç ip å°ååçåå(éç¾¤æ©/ç¼©å®¹)ï¼æä»¬éè¦è½å¤çè¿ç§æåµã\n\nåºäºä»¥ä¸åå ï¼ä¸å»ºè®®å¨çäº§ç¯å¢ä¸ç¨è¿ç§æ¹å¼æ´é²æå¡ãä½æ¯å¯¹ demo åºç¨ç­ä¸´æ¶åºç¨ä½¿ç¨è¿ç§æ¹å¼ï¼æ çæ¯å¾æ¹ä¾¿çï¼ä¸éè¦ç³è¯·é¢å¤çæè´µçèµæºã\n\n\n# loadbalancer:\n\nloadbalancer æ¯æ´é² k8s service å° internet çæ åæ¹å¼ãè¿ç§æ¹å¼çå®ç°ï¼éè¦ä¾èµ äºæä¾å çæ¯æãéè¿è¿ç§æ¹å¼ï¼æ¥èªå¤é¨è´è½½åè¡¡å¨çæµéå°ç´æ¥æå° backend pod ä¸ï¼ä¸è¿å®éå®ä»¬æ¯å¦ä½å·¥ä½çï¼è¿è¦ä¾èµäºäºæä¾åã\n\nloadbalancer çå·¥ä½æ¹å¼ï¼æ¯å¨éç¾¤å¤åå»ºä¸ä¸ª lb (æ¥æç¬ç«ç ip å°å)ï¼å¹¶ä¸ææç»è¿ lb çæµéè½¬åå°æå® portï¼ç»è¿è¿ä¸ª port åæµéä¼è¢«è½¬åå°æå®ç k8s æå¡ãè¿ä¸ªè¿ç¨ä¸­ï¼æ²¡æè¿æ»¤ãæ²¡æè·¯ç±..., åæ¶, ç±äºå®å·¥ä½å¨ layer 4ï¼æä»¥å ä¹å¯ä»¥å¤çä»»ææµéç±»åï¼å¦ï¼http, tcp, udp, websockets, grpc, or whatever\n\nloadbalancer æ¹å¼çæå¤§ä¸è¶³æ¯ï¼æ¯ä¸ªéè¦æ´é²ç» internet çæå¡é½è¦ä¸ä¸ªæ¥æç¬ç« ip å°åç lbï¼å¹¶ä¸éè¦ä¸ºæ­¤æ¯ä»è´¹ç¨ã\n\n\n\n\n# ingress\n\ningress ä¸åäºä¸æç nodeportãloadbalancerï¼å®äºå®ä¸ä¸æ¯ä¸ç§æå¡ç±»å, èæ¯ä¸ç§èµæºç±»åï¼æ¯ä¸ä¸ª ingress controller çè§åéåãè ingress controller å®éä¸å°±æ¯ä¸ä¸ªè§£æ ingress è§åçéç¾¤å serviceã\n\næ³¨æï¼ingress æ¯è§åï¼ingress controller è¿è¡è§åè§£æãæ§è¡ï¼ä»ä»¬é½æ²¡ææ¶åå¦ä½æ´é²èªå·±å° internetï¼è¿ä¸ªè¿æ¯éè¦ ingress controller åå©åæè®²å°ç nodeport æè loadbalancer æ¥å®ç°ã\n\nservice type ç¤ºä¾:\n\n\n    type=clusterip\n    type=nodeport\n    type=loadbalancer\n\n\n1\n2\n3\n4\n\n\ningress ç¤ºä¾\n\n    apiversion: networking.k8s.io/v1beta1\n    kind: ingress\n    metadata:\n    name: test-ingress\n    annotations:\n        nginx.ingress.kubernetes.io/rewrite-target: /\n    spec:\n    rules:\n    - http:\n        paths:\n        - path: /testpath\n            pathtype: prefix\n            backend:\n            servicename: test\n            serviceport: 80\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\n\n\nå¨ k8s éç¾¤ä¸­æå¸¸è§ç ingress controller å°±æ¯ nginxï¼æ­¤æ¶ ingress controller çä½ç¨å°±æ¯çå¬ ingress è§åçååï¼å¹¶è§£ææå¯¹åºç nginx è§åï¼å¹¶åå¥ nginx éç½®(/etc/nginx.conf)ã\n\néè¿ä½¿ç¨ ingressï¼æä»¬å¯ä»¥åå¾å¤ä¸åçäºæï¼å ä¸ºæå¾å¤ä¸åç±»åç ingress controller æ¥æåç§åæ ·çè½åãé»è®¤ç gke ingress controller ä¼ä¸ºæå¡åå»ºä¸ä¸ª http(s) load balancerã è¿å°±åè®¸ç¨åºäº path å subdomain çæ¹å¼è·¯ç±å°åç«¯æå¡ãä¾å¦ï¼å¯ä»¥éè¿ foo.yourdomain.com å°è¾¾ foo serviceï¼å¨ yourdomain.com/bar/ ä¸çè·¯å¾è·¯ç±å° bar service.\n\ningress å¯è½æ¯åè½æå¼ºå¤§çæ´é²æå¡çæ¹å¼ï¼ä½æ¯ä¹æ¯æå¤æçãæåç§åæ ·ç ingress controller çå®ç°æ¹å¼ï¼å¦ the google cloud load balancer, nginx, contour, istio, and more. ä¹æå¾å¤ ingress controllers çæä»¶ï¼å¦ the cert-manager å¯ä»¥èªå¨è¿è¡ ssl è®¤è¯ã\n\ningress æ¯ç¨åä¸ä¸ª ip æ´é²å¤ä¸ªæå¡(å¯ä»¥éè¿è¿ l7 åè®®è¿è¡è·¯ç±)çææç¨çæ¹å¼ãè¿æ ·çè¯ï¼åªéè¦æ¯ä»ä¸ä¸ª load balancer çè´¹ç¨ãåæ¶ï¼ingress éå¸¦äºå¾å¤æç¨çç¹æ§ï¼å¦ï¼sslãauthãrouting, etc\n\n\n# æè\n\n * å¦ææä»¬æ¯äºååçè¯ï¼ä¼æä¹æ¥å®ç° loadbalancer ? å¯¹è´è½½åè¡¡ãæºipä¿çç­é®é¢å¦ä½å¤ç\n\n\n# reference\n\n * services-networking-ingress\n * create-external-load-balancer\n * ingress-vs-load-balancer",charsets:{cjk:!0}},{title:"K8Sç½ç»ä¹ç½ç»æ¡æ¶",frontmatter:{title:"K8Sç½ç»ä¹ç½ç»æ¡æ¶",date:"2019-12-18T00:00:00.000Z",description:"K8Sç½ç»ä¹ç½ç»æ¡æ¶",categories:["skills","devops"],tags:[null],permalink:null},regularPath:"/blog/skills/devops/k8s_net_mode.html",relativePath:"blog/skills/devops/k8s_net_mode.md",key:"v-41809442",path:"/blog/skills/devops/k8s_net_mode.html",headers:[{level:2,title:"æ¨¡å",slug:"æ¨¡å",normalizedTitle:"æ¨¡å",charIndex:383},{level:2,title:"æ¹æ¡",slug:"æ¹æ¡",normalizedTitle:"æ¹æ¡",charIndex:778},{level:3,title:"åå¤",slug:"åå¤",normalizedTitle:"åå¤",charIndex:785},{level:3,title:"CNI ç®ä»",slug:"cni-ç®ä»",normalizedTitle:"cni ç®ä»",charIndex:2386},{level:3,title:"å®ç°",slug:"å®ç°",normalizedTitle:"å®ç°",charIndex:1092}],headersStr:"æ¨¡å æ¹æ¡ åå¤ CNI ç®ä» å®ç°",content:"# K8Sç½ç»ä¹ç½ç»æ¡æ¶\n\nç½ç»æ¯ k8s çä¸ä¸ªæ ¸å¿é¨åï¼ä½æ¯ç²¾åçäºè§£å¶é¢æçå·¥ä½æ¹å¼å¯è½ä¼æ¯è¾å°é¾ãæ»çæ¥è¯´ï¼æåä¸ªä¸åçç½ç»é®é¢éè¦è§£å³ï¼\n\n * Highly-coupled container-to-container communications\n * Pod-to-Pod communications\n * Pod-to-Service communications: this is covered by services.\n * External-to-Service communications\n\nå¶ä¸­ï¼é«åº¦è¦åçå®¹å¨å°å®¹å¨éä¿¡ï¼å¯ä»¥éè¿ pod æºå¶ï¼åä¸ä¸ª pod ä¸­çå®¹å¨ å±äº« pause å®¹å¨ç network namespaceï¼æ¥è§£å³ã\n\næ¬æä¸»è¦å³æ³¨ pod-to-pod çéä¿¡ï¼å¦å¤ä¸¤ä¸ªé®é¢ï¼åç»­ç³»ååæ¥ä»ç»ã\n\n\n# æ¨¡å\n\nåå®å¤§å®¶å·²ç»å¯¹ k8s çåºç¡åç´ æ¯è¾çæäºãå¨ k8s çç½ç»æå»ºè¿ç¨ä¸­ï¼å¯¹å®¹å¨ç½ç»æ¯ååºäºä¸äºéå¶ï¼ä¹å°±æ¯ k8s çå®¹å¨ç½ç»æ¨¡åã\n\nè¿äºéå¶å¦ä¸ï¼\n\n * ä»»æ pod ä¹é´å¯ä»¥ç´æ¥éä¿¡ï¼æ éç»è¿å°åè½¬æ¢(NAT)\n * ä»»æ pod ä¸å¶å®¿ä¸» node ä¹é´æ¯å¯ä»¥ç´æ¥éä¿¡çï¼æ éç»è¿å°åè½¬æ¢(NAT)\n * æ¯ä¸ª pod é½æ¥æä¸ä¸ªç¬ç« ip å°åï¼pod åææå®¹å¨å±äº«ä¸ä¸ªç½ç»å½åç©ºé´\n\nå¯ä»¥çåºï¼k8s å°éç¾¤åææ pod é½æ¾å¨ä¸ä¸ªç´æ¥è¿éçæå¹³ç½ç»ä¸­ï¼pod ä¹é´å¯ä»¥éè¿ ip ç´æ¥è®¿é®ãå¨ä¸ä¸ª pod ä¸­çåºç¨å¨ éæ©ç«¯å£ãæå¡åç°ãåºç¨éç½®ç­æä½æ¶ï¼å¯ä»¥è¡¨ç°çå VMs æè ç©çæº ä¸æ ·ã\n\néè¿è¿æ ·è®¾è®¡ï¼k8s ç½ç»å¯ä»¥å¾å®¹æåå°ï¼å°ä¸ä¸ª K8s ç³»ç»ä¸ºå¤é¨ä¸çæä¾æå¡çæ¶åï¼ä»ç½ç»çè§åº¦å¾å®¹æå¼æ¸æ¥ï¼å¤é¨æ°æ®æä¹è¿æ¥å°å®¹å¨åçåºç¨ã\n\n\n# æ¹æ¡\n\n\n# åå¤\n\n# docker ç½ç»æ¦è¿°\n\næä»¬ç¥éï¼å¨å¯å¨ docker åï¼docker engine ä¼å¨å®¿ä¸»æºéæ°å¢ä¸ä¸ªç½ç»è®¾å¤ï¼docker0 ç½æ¡¥(Bridge)ï¼èåå»ºç docker å®¹å¨çç½ç»é»è®¤æåµä¸ä¼è¢«åéå¨ä¸ä¸ªä»¥ docker0 ä¸ºç½å³çèæå­ç½ä¸­ï¼éè¿ vethå¯¹ è¿æ¥ docker0 å å®¹å¨åé¨ã\n\næ»ä½æ¥è¯´ï¼å°±æ¯ docker éè¿ network namespace åäºå®¹å¨åå®¿ä¸»æºçç½ç»éç¦», åç¨ vethå¯¹ å°å®¹å¨åå®¿ä¸»æºä¸¤ä¸ª network namespace è¿æ¥èµ·æ¥ï¼å¹¶å° veth çä¸ç«¯è¿æ¥å° docker0 (ç½æ¡¥, å¨nodeçroot namespaceå)ï¼å®ç° å®¹å¨é´ãåå®¿ä¸»æºçç½ç»äºéã\n\n# k8s çç½ç»ç¶åµ\n\nå¯¹äº k8s ç³»ç»æ¥è¯´ï¼æ¯æå¤ç§ container runtime æ¯ä¸ä»¶éå¸¸éè¦çäºæï¼å½ç¶ï¼Docker åªæ¯å¶ä¸­ä¹ä¸ã\n\nèéç½®ç½ç»ç¯å¢åªæ¯ container runtime çä¸ä¸ªæ¹é¢ãæä»¥ï¼å½äººä»¬é®âk8s æ¯å¦ä¼æ¯æ CNMâçæ¶åï¼å¶å®æ¯å¨é®âk8s æ¯å¦ä¼å¨ Docker runtime ä¸­æ¯æ CNM driversâãç¡®å®ï¼k8s å°æªå¨ Docker runtime ä¸­éç¨ CNM/libnetworkãèæ¯å¯¹ CoreOS æåºç Container Network Interface (CNI) æ¨¡åå¾æå´è¶£ã\n\nè¿éå¯¹ CNM åä¸ªç®åè¯´æ:\n    CNM æ¯ç± docker æåºçç½ç»åè®®ï¼å®è¦è§£å³çé®é¢å CNI æ¯éåçãç®å CNM åªè½ä½¿ç¨å¨ docker ä¸­ï¼è CNI å¯ä»¥ä½¿ç¨å¨ä»»ä½å®¹å¨è¿è¡æ¶ãCNM ä¸»è¦ç¨æ¥å®ç° docker èªèº«çç½ç»é®é¢ï¼ä¹å°±æ¯ docker network å­å½ä»¤æä¾çåè½ã \n\n\n1\n2\n\n\nä¸ºä»ä¹ä¸ç¨ CNM å¢ï¼why-kubernetes-doesnt-use-libnetworkéæè¾ä¸ºè¯¦ç»çä»ç»ï¼æ¬æåªåä¸ªç®åçæè¿°ã\n\n 1. Docker ç âlocalâ(bridge) driver æ¦å¿µ å¨ k8s éç¾¤ä¸­ï¼ä¸è¬ç±å°å 3~5 å°ï¼å¤å 100+ èç¹ç»æãå¦æç½ç»è®¾è®¡ï¼ä¾ç¶å docker é£æ ·ä»¥ docker0 ä¸ºç½å³å°±ä¼åºç°é®é¢ï¼docker ç½ç»æ¯ä¸ºåä¸å°å®¿ä¸»æºçå®¹å¨éä¿¡è®¾è®¡çï¼èæ ¹æ®ä¸æ k8s çç½ç»è¦æ±ï¼pod éè¦è½è·¨ä¸»æºä¸å¶ä» pod ç´æ¥éä¿¡ã\n\n 2. Docker ç âglobalâ(overlay) driver æ¦å¿µ ä¾èµäº libkv è¿ä¸éå¸¸åºå±ç key-value å­å¨æ½è±¡ï¼è¦å¨ k8s ä¸­æ¯æ Dockerâs overlay driver, å°±éè¦æ¯æè¿ä¸å­å¨æ½è±¡ï¼è¿ä¼é æ k8s æ¬æ¥æ¯æ³éè¿Docker networking æ¥ç®åäºæï¼ä½æ¯å´ææ¾çæ´å å¤æåäºã\n\n 3. CNI å¨è®¾è®¡å²å­¦ä¸ä¸ k8s ä¿æä¸è´(It follows the UNIX philosophy of doing one thing well)ãä¸æ¯ CNM ç®åå¾å¤ï¼ä¸éè¦å®æ¤ç¨åºï¼å¹¶ä¸å¯ä»¥è·¨å¹³å°\n\næä»¥ä¸ºäºæ»¡è¶³ k8s çç½ç»è®¾è®¡è¦æ±ï¼å°±éè¦ä¸ç§ CNI æä»¶ï¼å®å®ç°äºè®©ä¸å node ä¸ç pod å®ç°æ éç»è¿æ¾å¼çå°åè½¬æ¢(NAT)è¿è¡éä¿¡çæºå¶ãåæ¶ï¼ç±äºæ¯éè¿ ip ç´æ¥éä¿¡ï¼æä»¥ ip ä¸è½éå¤ï¼è¿å°±è¿éè¦ä¸ç§ ä¸º pod ç»ä¸åé ip çæºå¶ã\n\næ»¡è¶³ k8s ç½ç»è®¾è®¡è¦æ±çæä»¶å·²ç»æå¾å¤ï¼æå´è¶£çè¯ï¼å¨å®æ¹ææ¡£ä¸å¯ä»¥ççæåªäºç½ç»æä»¶å¯ä»¥ä½¿ç¨ï¼https://kubernetes.io/docs/concepts/cluster-administration/networking/#how-to-achieve-this\n\n\n1\n\n\n\n# CNI ç®ä»\n\nCNI(Conteinre Network Interface) æ¯ google å CoreOS ä¸»å¯¼å¶å®çå®¹å¨ç½ç»æ åï¼å®æ¬èº«å¹¶ä¸æ¯å®ç°æèä»£ç ï¼åªæ¯ä¸ä¸ªæ å(å¯ä»¥çè§£æä¸ä¸ªåè®®)ãå®ç»¼åèèäºçµæ´»æ§ãæ©å±æ§ãip åéãå¤ç½å¡ç­å ç´ ï¼æ¨å¨ä¸ºå®¹å¨å¹³å°æä¾ç½ç»çæ ååã\n\nç®åå­å¨ç½ç»æ¹æ¡ flannelãcalicoãopenvswitchãweaveãipvlan ç­ï¼è¿äºæ¹æ¡æ¥å£åä½¿ç¨æ¹æ³é½ä¸å°½ç¸åï¼èä¸åçå®¹å¨å¹³å°é½éè¦ç½ç»åè½ï¼å®ä»¬ä¹é´çééå¦ææ²¡æç»ä¸çæ åï¼ä¼æå¾å¤§çå·¥ä½éåéå¤å³å¨ãè CNI çåºç°ï¼å°±æ¯ä¸ºäºè§£å³è¿æ ·çé®é¢ï¼ä½¿å¾ä¸åçå®¹å¨å¹³å°(æ¯å¦ kubernetesãmesos å rkt)è½å¤éè¿ç¸åçæ¥å£è°ç¨ä¸åçç½ç»ç»ä»¶ã\n\nè¿ä¸ªåè®®è¿æ¥äºä¸¤ä¸ªç»ä»¶ï¼å®¹å¨ç®¡çç³»ç»(å¦ rkt æ k8s)åç½ç»æä»¶ãå®ä»¬ä¹é´éè¿ JSON æ ¼å¼çæä»¶è¿è¡éä¿¡ï¼å®ç°å®¹å¨çç½ç»åè½ãå·ä½çäºæé½æ¯æä»¶æ¥å®ç°çï¼åæ¬ï¼åå»ºå®¹å¨ç½ç»ç©ºé´(network namespace)ãæç½ç»æ¥å£(interface)æ¾å°å¯¹åºçç½ç»ç©ºé´ãç»ç½ç»æ¥å£åé IP ç­ç­ã\n\n\n\n# CNI è®¾è®¡èé\n\nCNIè®¾è®¡çæ¶åèèäºä»¥ä¸é®é¢ï¼\n\n * å®¹å¨è¿è¡æ¶å¿é¡»å¨è°ç¨ä»»ä½æä»¶ä¹åä¸ºå®¹å¨åå»ºä¸ä¸ªæ°çç½ç»å½åç©ºé´\n * å®¹å¨è¿è¡æ¶å¿é¡»ç¡®å®è¿ä¸ªå®¹å¨åºå±äºåªä¸ªç½ç»ï¼å¹¶ä¸ºæ¯ä¸ªç½ç»ç¡®å®åªäºæä»¶å¿é¡»è¢«æ§è¡\n * ç½ç»éç½®éç¨JSONæ ¼å¼\n * å®¹å¨è¿è¡æ¶å¿é¡»æé¡ºåºä¸ºæ¯ä¸ªç½ç»æ§è¡ç¸åºçæä»¶ï¼å°å®¹å¨æ·»å å°æ¯ä¸ªç½ç»ä¸­\n * å¨å®æå®¹å¨çå½å¨æåï¼è¿è¡æ¶å¿é¡»ä»¥ç¸åçé¡ºåºæ§è¡æä»¶ï¼ç¸å¯¹äºæ§è¡æ·»å å®¹å¨çé¡ºåºï¼ä»¥å°å®¹å¨ä¸ç½ç»æ­å¼è¿æ¥\n * å®¹å¨è¿è¡æ¶ä¸è½ä¸ºåä¸å®¹å¨è°ç¨å¹¶è¡æä½ï¼ä½å¯ä»¥ä¸ºä¸åçå®¹å¨è°ç¨å¹¶è¡æä½\n * å®¹å¨è¿è¡æ¶å¿é¡»ä¸ºå®¹å¨è®¢éADDåDELæä½ï¼è¿æ ·ADDåé¢æ»æ¯è·çç¸åºçDELã DELå¯è½è·çé¢å¤çDELï¼ä½æ¯ï¼æä»¶åºè¯¥åè®¸å¤çå¤ä¸ªDELï¼å³æä»¶DELåºè¯¥æ¯å¹ç­çï¼ã\n * å®¹å¨å¿é¡»ç± ContainerID å¯ä¸æ è¯ãå­å¨ç¶æçæä»¶åºè¯¥ä½¿ç¨ï¼ç½ç»åç§°ï¼å®¹å¨IDï¼çä¸»é®æ¥å®æã\n * è¿è¡æ¶ä¸è½è°ç¨åä¸ä¸ªç½ç»åç§°æå®¹å¨IDæ§è¡ä¸¤æ¬¡ADDï¼æ²¡æç¸åºçDELï¼ãæ¢å¥è¯è¯´ï¼ç»å®çå®¹å¨IDå¿é¡»åªè½æ·»å å°ç¹å®çç½ç»ä¸æ¬¡ã\n\nCNIæä»¶\n\n * CNIæä»¶å¿é¡»å®ç°ä¸ä¸ªå¯æ§è¡æä»¶ï¼è¿ä¸ªæä»¶å¯ä»¥è¢«å®¹å¨ç®¡çç³»ç»è°ç¨\n * CNIæä»¶è´è´£å°ç½ç»æ¥å£æå¥å®¹å¨ç½ç»å½åç©ºé´ï¼ä¾å¦ï¼vethå¯¹çä¸ç«¯ï¼ï¼å¹¶å¨ä¸»æºä¸è¿è¡ä»»ä½å¿è¦çæ¹åï¼ä¾å¦å°vethçå¦ä¸ç«¯è¿æ¥å°ç½æ¡¥ï¼ãç¶åå°IPåéç»æ¥å£ï¼å¹¶éè¿è°ç¨éå½çIPAM(IP Address Management)æä»¶æ¥è®¾ç½®ä¸âIPå°åç®¡çâé¨åä¸è´çè·¯ç±ã\n\n\n# å®ç°\n\n# å®¹å¨åå»º\n\næ¥ä¸æ¥ï¼æä»¬è·é pod åå»ºè¿ç¨ï¼çç pod çç½ç»æå»ºãk8s pod çç½ç»æ¯è¿æ ·åå»ºçï¼\n\n 1. é¦å kubelet åå»ºåºç¡å®¹å¨ pause çæå¯¹åºç network namespace\n 2. ç¶å kubelet è°ç¨ç½ç» CNI driverï¼ç±å®æ ¹æ®éç½®è°ç¨å·ä½ç CNI æä»¶\n 3. ç¶å CNI æä»¶ç»åºç¡å®¹å¨éç½®ç½ç»\n 4. æååå»º pod ä¸­å¶ä»å®¹å¨å±äº«ä½¿ç¨åºç¡å®¹å¨çç½ç»\n\nå¸¸è§ç CNI æä»¶å®ç°æ¹æ¡æï¼\n\n * é§éæ¹æ¡\n   * é§éæ¹æ¡å¨IaaSå±çç½ç»ä¸­åºç¨ä¹æ¯è¾å¤ï¼å°podåå¸å¨ä¸ä¸ªå¤§äºå±çç½ç»è§æ¨¡ä¸ãç½ç»ææç®åï¼ä½éçèç¹è§æ¨¡çå¢é¿å¤æåº¦ä¼æåã\n   * å¦ï¼\n     * Weaveï¼UDPå¹¿æ­ï¼æ¬æºå»ºç«æ°çBRï¼éè¿PCAPäºé\n     * Open vSwitchï¼OVSï¼ï¼åºäºVxLanåGREåè®®ï¼ä½æ¯æ§è½æ¹é¢æå¤±æ¯è¾ä¸¥é\n     * Flannelï¼UDPå¹¿æ­ï¼VxLan\n * è·¯ç±æ¹æ¡\n   * è·¯ç±æ¹æ¡ä¸è¬æ¯ä»3å±æè2å±å®ç°éç¦»åè·¨ä¸»æºå®¹å¨äºéçï¼åºäºé®é¢ä¹å¾å®¹æææ¥ã\n   * å¦\n     * Calicoï¼åºäºBGPåè®®çè·¯ç±æ¹æ¡ï¼æ¯æå¾ç»è´çACLæ§å¶ï¼å¯¹æ··åäºäº²ååº¦æ¯è¾é«ã\n     * Macvlanï¼ä»é»è¾åKernelå±æ¥çéç¦»æ§åæ§è½æä¼çæ¹æ¡ï¼åºäºäºå±éç¦»ï¼æä»¥éè¦äºå±è·¯ç±å¨æ¯æï¼å¤§å¤æ°äºæå¡åä¸æ¯æï¼æä»¥æ··åäºä¸æ¯è¾é¾ä»¥å®ç°ã\n\nè¿äºæä»¶åæä¼å¿ï¼ä¹å¨äºç¸åé´å­¦ä¹ ä¼ç¹ãè¿éä»ç»ä¸å¸¸è§ç flannelãcalicoï¼\n\n# Flannel\n\nflannel æ¯ç± CoreOS å¼åçä¸ä¸ªæ¯è¾ç®åç overlay ç½ç»ï¼å¯è½æ¯ç®åæåæ¬¢è¿ç CNI æä»¶äºãä¸è¬æ¥è¯´ï¼flannel å·²ç»è½å¤æ»¡è¶³å¤§å¤æ°çä½¿ç¨åºæ¯äºï¼å¹¶ä¸æ§è½ä¹æ¯è¾å¥½ï¼æä»¥ï¼ä¸è¬æ¥è¯´ï¼åªæå¨ flannel ä¸è½æ»¡è¶³éè¦çæ¶åï¼æèèä½¿ç¨å¶ä»ç CNI æä»¶ã\n\nflannel çå·¥ä½æµç¨å¤§è´å¦ä¸ï¼\n\n * é¦åå¨å¯å¨ K8S Controller Manager æ¶ï¼éè¦æå®éç¾¤ç pod ip èå´ï¼--cluster-cidr=172.16.0.0/16, å¹¶å¼å¯ä¸º node åé ip éé¡¹ï¼--allocate-node-cidrs=true\n * Controller Managerä¼æä¸ºæ¯ä¸ªnodeåéçIPèå´ä¿å­å° etcd ä¸­ (flannel ä¹ä¼ä½¿ç¨ etcd æ¥å­å¨å®çç¶æä¿¡æ¯)\n * æ°å»º pod æ¶ï¼flannel ä¼ä» etcd ä¸­ååºå±äºè¯¥ node ç ip åéç» podï¼åå¨ etcd ä¸­è®°å½ä¸è¿ä¸ª pod ç ip\n * è¿æ · etcd ä¸­å°±ä¼å­æä¸å¼  node ip ä¸ pod id å¯¹åºçâè·¯ç±è¡¨â\n\nflannel çè·¯ç±æµç¨ï¼\n\n * å½ pod å¨åä¸ä¸ª node ä¹åéä¿¡æ¶ï¼éè¿ docker bridge å³å¯\n * å½ pod éè¦è·¨ node éä¿¡æ¶ï¼æ°æ®åç»è¿ node ä¸­çè·¯ç±ä¼å° flannel(flanneld) ä¸­ï¼flannel éè¿ etcd æ¥è¯¢å°ç®ç pod ip ç node ipï¼ä½¿ç¨flannelçBackendså¯¹æ°æ®åè¿è¡åè£ï¼åéç»ç®çnodeå¤çãç®çnodeæ¿å°æ°æ®ååè§£å¼å°è£ï¼æ¿å°åå§æ°æ®åï¼åéè¿nodeçè·¯ç±éå°ç¸åºçpodã\n\nflannel æå¤ç§ä¸åç Backends (å¦ udpï¼VxLanãhost-gw)æ¥è¿è¡ å°ååè·¯ç±ï¼é»è®¤çä¹æ¯æ¨èçæ¹å¼æ¯ï¼VxLanï¼ç¸å¯¹äºå¶ä»çå®ç°ï¼å®æä¾äºè¾å¥½çæ§è½åéè¦è¾å°çäººå·¥å¹²é¢ã\n\n\n\n# Calico\n\nCalico æ¯ä¸ä¸ªçº¯ä¸å±çæ°æ®ä¸­å¿ç½ç»æ¹æ¡ï¼ä¸éè¦Overlayï¼ï¼å¹¶ä¸ä¸OpenStackãKubernetesãAWSãGCEç­IaaSåå®¹å¨å¹³å°é½æè¯å¥½çéæãå®ä¸ºæ¯ä¸ªå®¹å¨ä¼åéä¸ä¸ªå¯è·¯ç±çIPï¼ç±äºéä¿¡æ¶ä¸éè¦è§£ååå°åï¼ç½ç»æ§è½æèå°ï¼æäºææ¥ã\n\nCalicoå¨æ¯ä¸ä¸ªèç¹å©ç¨ Linux Kernel å®ç°äºä¸ä¸ªé«æç vRouter æ¥è´è´£æ°æ®è½¬åï¼èæ¯ä¸ª vRouter éè¿ BGP åè®®è´è´£æèªå·±ä¸è¿è¡ç workload çè·¯ç±ä¿¡æ¯åæ´ä¸ª Calico ç½ç»åä¼ æ­ã\n\nå°è§æ¨¡é¨ç½²ç Calico ç½ç»å¯ä»¥ç´æ¥äºèï¼å¤§è§æ¨¡ä¸å¯éè¿æå®ç BGP route reflector æ¥å®æã è¿æ ·ä¿è¯æç»ææç workload ä¹é´çæ°æ®æµéé½æ¯éè¿ IP è·¯ç±çæ¹å¼å®æäºèçãCalicoèç¹ç»ç½å¯ä»¥ç´æ¥å©ç¨æ°æ®ä¸­å¿çç½ç»ç»æ(æ è®ºæ¯L2æèL3)ï¼ä¸éè¦é¢å¤çNATï¼é§éæèOverlay Networkã\n\n\n\nCalicoä¸»è¦ç± FelixãetcdãBGP client ä»¥å BGP Route Reflector ç»æ\n\n * Felixï¼Calico Agentï¼æ¯ä¸ªèç¹é½éè¦è¿è¡ï¼ä¸»è¦è´è´£éç½®è·¯ç±ãéç½®ACLsãæ¥åç¶æï¼ç¡®ä¿Endpointçè¿éç¶æ\n * BGP Client: ä¸»è¦è´è´£æ Felix åå¥ Kernel çè·¯ç±ä¿¡æ¯ååå°å½å Calico ç½ç»å¶ä»èç¹ï¼ç¡®ä¿ Workload é´çéä¿¡çæææ§\n * Etcd: åå¸å¼é®å¼å­å¨ï¼ä¸»è¦è´è´£å­å¨ç½ç»ä¿¡æ¯ï¼ç¡®ä¿ Calico ç½ç»ç¶æçåç¡®æ§\n * BGP Route Reflector: å¤§è§æ¨¡é¨ç½²æ¶ä½¿ç¨ï¼ä½ä¸ºBGP clientçä¸­å¿è¿æ¥ç¹, æå¼ææèç¹äºèç mesh æ¨¡å¼ï¼é¿åæ¯ä¸ªèç¹äºè, éè¿ä¸ä¸ªæèå¤ä¸ªBGP Route Reflectoræ¥å®æéä¸­å¼çè·¯ç±åå\n\nCalicoçä¸è¶³\n\n * ä¸æ¯æå¤ç§æ·ç½ç»çéç¦»åè½ï¼å¨å¤ç§æ·åºæ¯ä¸ä¼æç½ç»å®å¨é®é¢\n * Calicoæ§å¶å¹³é¢çè®¾è®¡è¦æ±ç©çç½ç»å¾æ¯L2 Fabricï¼è¿æ ·vRouteré´é½æ¯ç´æ¥å¯è¾¾ç\n\n\n# é®é¢\n\n * docker0ãcni0ãkube-ipvs0 çåºå«\n\n\n# reference\n\n * Cluster Networking\n * network design-proposals\n * CNI (Container Network Interface)\n * CNM (Container Network Model)\n * understanding-kubernetes-networking-model",normalizedContent:"# k8sç½ç»ä¹ç½ç»æ¡æ¶\n\nç½ç»æ¯ k8s çä¸ä¸ªæ ¸å¿é¨åï¼ä½æ¯ç²¾åçäºè§£å¶é¢æçå·¥ä½æ¹å¼å¯è½ä¼æ¯è¾å°é¾ãæ»çæ¥è¯´ï¼æåä¸ªä¸åçç½ç»é®é¢éè¦è§£å³ï¼\n\n * highly-coupled container-to-container communications\n * pod-to-pod communications\n * pod-to-service communications: this is covered by services.\n * external-to-service communications\n\nå¶ä¸­ï¼é«åº¦è¦åçå®¹å¨å°å®¹å¨éä¿¡ï¼å¯ä»¥éè¿ pod æºå¶ï¼åä¸ä¸ª pod ä¸­çå®¹å¨ å±äº« pause å®¹å¨ç network namespaceï¼æ¥è§£å³ã\n\næ¬æä¸»è¦å³æ³¨ pod-to-pod çéä¿¡ï¼å¦å¤ä¸¤ä¸ªé®é¢ï¼åç»­ç³»ååæ¥ä»ç»ã\n\n\n# æ¨¡å\n\nåå®å¤§å®¶å·²ç»å¯¹ k8s çåºç¡åç´ æ¯è¾çæäºãå¨ k8s çç½ç»æå»ºè¿ç¨ä¸­ï¼å¯¹å®¹å¨ç½ç»æ¯ååºäºä¸äºéå¶ï¼ä¹å°±æ¯ k8s çå®¹å¨ç½ç»æ¨¡åã\n\nè¿äºéå¶å¦ä¸ï¼\n\n * ä»»æ pod ä¹é´å¯ä»¥ç´æ¥éä¿¡ï¼æ éç»è¿å°åè½¬æ¢(nat)\n * ä»»æ pod ä¸å¶å®¿ä¸» node ä¹é´æ¯å¯ä»¥ç´æ¥éä¿¡çï¼æ éç»è¿å°åè½¬æ¢(nat)\n * æ¯ä¸ª pod é½æ¥æä¸ä¸ªç¬ç« ip å°åï¼pod åææå®¹å¨å±äº«ä¸ä¸ªç½ç»å½åç©ºé´\n\nå¯ä»¥çåºï¼k8s å°éç¾¤åææ pod é½æ¾å¨ä¸ä¸ªç´æ¥è¿éçæå¹³ç½ç»ä¸­ï¼pod ä¹é´å¯ä»¥éè¿ ip ç´æ¥è®¿é®ãå¨ä¸ä¸ª pod ä¸­çåºç¨å¨ éæ©ç«¯å£ãæå¡åç°ãåºç¨éç½®ç­æä½æ¶ï¼å¯ä»¥è¡¨ç°çå vms æè ç©çæº ä¸æ ·ã\n\néè¿è¿æ ·è®¾è®¡ï¼k8s ç½ç»å¯ä»¥å¾å®¹æåå°ï¼å°ä¸ä¸ª k8s ç³»ç»ä¸ºå¤é¨ä¸çæä¾æå¡çæ¶åï¼ä»ç½ç»çè§åº¦å¾å®¹æå¼æ¸æ¥ï¼å¤é¨æ°æ®æä¹è¿æ¥å°å®¹å¨åçåºç¨ã\n\n\n# æ¹æ¡\n\n\n# åå¤\n\n# docker ç½ç»æ¦è¿°\n\næä»¬ç¥éï¼å¨å¯å¨ docker åï¼docker engine ä¼å¨å®¿ä¸»æºéæ°å¢ä¸ä¸ªç½ç»è®¾å¤ï¼docker0 ç½æ¡¥(bridge)ï¼èåå»ºç docker å®¹å¨çç½ç»é»è®¤æåµä¸ä¼è¢«åéå¨ä¸ä¸ªä»¥ docker0 ä¸ºç½å³çèæå­ç½ä¸­ï¼éè¿ vethå¯¹ è¿æ¥ docker0 å å®¹å¨åé¨ã\n\næ»ä½æ¥è¯´ï¼å°±æ¯ docker éè¿ network namespace åäºå®¹å¨åå®¿ä¸»æºçç½ç»éç¦», åç¨ vethå¯¹ å°å®¹å¨åå®¿ä¸»æºä¸¤ä¸ª network namespace è¿æ¥èµ·æ¥ï¼å¹¶å° veth çä¸ç«¯è¿æ¥å° docker0 (ç½æ¡¥, å¨nodeçroot namespaceå)ï¼å®ç° å®¹å¨é´ãåå®¿ä¸»æºçç½ç»äºéã\n\n# k8s çç½ç»ç¶åµ\n\nå¯¹äº k8s ç³»ç»æ¥è¯´ï¼æ¯æå¤ç§ container runtime æ¯ä¸ä»¶éå¸¸éè¦çäºæï¼å½ç¶ï¼docker åªæ¯å¶ä¸­ä¹ä¸ã\n\nèéç½®ç½ç»ç¯å¢åªæ¯ container runtime çä¸ä¸ªæ¹é¢ãæä»¥ï¼å½äººä»¬é®âk8s æ¯å¦ä¼æ¯æ cnmâçæ¶åï¼å¶å®æ¯å¨é®âk8s æ¯å¦ä¼å¨ docker runtime ä¸­æ¯æ cnm driversâãç¡®å®ï¼k8s å°æªå¨ docker runtime ä¸­éç¨ cnm/libnetworkãèæ¯å¯¹ coreos æåºç container network interface (cni) æ¨¡åå¾æå´è¶£ã\n\nè¿éå¯¹ cnm åä¸ªç®åè¯´æ:\n    cnm æ¯ç± docker æåºçç½ç»åè®®ï¼å®è¦è§£å³çé®é¢å cni æ¯éåçãç®å cnm åªè½ä½¿ç¨å¨ docker ä¸­ï¼è cni å¯ä»¥ä½¿ç¨å¨ä»»ä½å®¹å¨è¿è¡æ¶ãcnm ä¸»è¦ç¨æ¥å®ç° docker èªèº«çç½ç»é®é¢ï¼ä¹å°±æ¯ docker network å­å½ä»¤æä¾çåè½ã \n\n\n1\n2\n\n\nä¸ºä»ä¹ä¸ç¨ cnm å¢ï¼why-kubernetes-doesnt-use-libnetworkéæè¾ä¸ºè¯¦ç»çä»ç»ï¼æ¬æåªåä¸ªç®åçæè¿°ã\n\n 1. docker ç âlocalâ(bridge) driver æ¦å¿µ å¨ k8s éç¾¤ä¸­ï¼ä¸è¬ç±å°å 3~5 å°ï¼å¤å 100+ èç¹ç»æãå¦æç½ç»è®¾è®¡ï¼ä¾ç¶å docker é£æ ·ä»¥ docker0 ä¸ºç½å³å°±ä¼åºç°é®é¢ï¼docker ç½ç»æ¯ä¸ºåä¸å°å®¿ä¸»æºçå®¹å¨éä¿¡è®¾è®¡çï¼èæ ¹æ®ä¸æ k8s çç½ç»è¦æ±ï¼pod éè¦è½è·¨ä¸»æºä¸å¶ä» pod ç´æ¥éä¿¡ã\n\n 2. docker ç âglobalâ(overlay) driver æ¦å¿µ ä¾èµäº libkv è¿ä¸éå¸¸åºå±ç key-value å­å¨æ½è±¡ï¼è¦å¨ k8s ä¸­æ¯æ dockerâs overlay driver, å°±éè¦æ¯æè¿ä¸å­å¨æ½è±¡ï¼è¿ä¼é æ k8s æ¬æ¥æ¯æ³éè¿docker networking æ¥ç®åäºæï¼ä½æ¯å´ææ¾çæ´å å¤æåäºã\n\n 3. cni å¨è®¾è®¡å²å­¦ä¸ä¸ k8s ä¿æä¸è´(it follows the unix philosophy of doing one thing well)ãä¸æ¯ cnm ç®åå¾å¤ï¼ä¸éè¦å®æ¤ç¨åºï¼å¹¶ä¸å¯ä»¥è·¨å¹³å°\n\næä»¥ä¸ºäºæ»¡è¶³ k8s çç½ç»è®¾è®¡è¦æ±ï¼å°±éè¦ä¸ç§ cni æä»¶ï¼å®å®ç°äºè®©ä¸å node ä¸ç pod å®ç°æ éç»è¿æ¾å¼çå°åè½¬æ¢(nat)è¿è¡éä¿¡çæºå¶ãåæ¶ï¼ç±äºæ¯éè¿ ip ç´æ¥éä¿¡ï¼æä»¥ ip ä¸è½éå¤ï¼è¿å°±è¿éè¦ä¸ç§ ä¸º pod ç»ä¸åé ip çæºå¶ã\n\næ»¡è¶³ k8s ç½ç»è®¾è®¡è¦æ±çæä»¶å·²ç»æå¾å¤ï¼æå´è¶£çè¯ï¼å¨å®æ¹ææ¡£ä¸å¯ä»¥ççæåªäºç½ç»æä»¶å¯ä»¥ä½¿ç¨ï¼https://kubernetes.io/docs/concepts/cluster-administration/networking/#how-to-achieve-this\n\n\n1\n\n\n\n# cni ç®ä»\n\ncni(conteinre network interface) æ¯ google å coreos ä¸»å¯¼å¶å®çå®¹å¨ç½ç»æ åï¼å®æ¬èº«å¹¶ä¸æ¯å®ç°æèä»£ç ï¼åªæ¯ä¸ä¸ªæ å(å¯ä»¥çè§£æä¸ä¸ªåè®®)ãå®ç»¼åèèäºçµæ´»æ§ãæ©å±æ§ãip åéãå¤ç½å¡ç­å ç´ ï¼æ¨å¨ä¸ºå®¹å¨å¹³å°æä¾ç½ç»çæ ååã\n\nç®åå­å¨ç½ç»æ¹æ¡ flannelãcalicoãopenvswitchãweaveãipvlan ç­ï¼è¿äºæ¹æ¡æ¥å£åä½¿ç¨æ¹æ³é½ä¸å°½ç¸åï¼èä¸åçå®¹å¨å¹³å°é½éè¦ç½ç»åè½ï¼å®ä»¬ä¹é´çééå¦ææ²¡æç»ä¸çæ åï¼ä¼æå¾å¤§çå·¥ä½éåéå¤å³å¨ãè cni çåºç°ï¼å°±æ¯ä¸ºäºè§£å³è¿æ ·çé®é¢ï¼ä½¿å¾ä¸åçå®¹å¨å¹³å°(æ¯å¦ kubernetesãmesos å rkt)è½å¤éè¿ç¸åçæ¥å£è°ç¨ä¸åçç½ç»ç»ä»¶ã\n\nè¿ä¸ªåè®®è¿æ¥äºä¸¤ä¸ªç»ä»¶ï¼å®¹å¨ç®¡çç³»ç»(å¦ rkt æ k8s)åç½ç»æä»¶ãå®ä»¬ä¹é´éè¿ json æ ¼å¼çæä»¶è¿è¡éä¿¡ï¼å®ç°å®¹å¨çç½ç»åè½ãå·ä½çäºæé½æ¯æä»¶æ¥å®ç°çï¼åæ¬ï¼åå»ºå®¹å¨ç½ç»ç©ºé´(network namespace)ãæç½ç»æ¥å£(interface)æ¾å°å¯¹åºçç½ç»ç©ºé´ãç»ç½ç»æ¥å£åé ip ç­ç­ã\n\n\n\n# cni è®¾è®¡èé\n\ncniè®¾è®¡çæ¶åèèäºä»¥ä¸é®é¢ï¼\n\n * å®¹å¨è¿è¡æ¶å¿é¡»å¨è°ç¨ä»»ä½æä»¶ä¹åä¸ºå®¹å¨åå»ºä¸ä¸ªæ°çç½ç»å½åç©ºé´\n * å®¹å¨è¿è¡æ¶å¿é¡»ç¡®å®è¿ä¸ªå®¹å¨åºå±äºåªä¸ªç½ç»ï¼å¹¶ä¸ºæ¯ä¸ªç½ç»ç¡®å®åªäºæä»¶å¿é¡»è¢«æ§è¡\n * ç½ç»éç½®éç¨jsonæ ¼å¼\n * å®¹å¨è¿è¡æ¶å¿é¡»æé¡ºåºä¸ºæ¯ä¸ªç½ç»æ§è¡ç¸åºçæä»¶ï¼å°å®¹å¨æ·»å å°æ¯ä¸ªç½ç»ä¸­\n * å¨å®æå®¹å¨çå½å¨æåï¼è¿è¡æ¶å¿é¡»ä»¥ç¸åçé¡ºåºæ§è¡æä»¶ï¼ç¸å¯¹äºæ§è¡æ·»å å®¹å¨çé¡ºåºï¼ä»¥å°å®¹å¨ä¸ç½ç»æ­å¼è¿æ¥\n * å®¹å¨è¿è¡æ¶ä¸è½ä¸ºåä¸å®¹å¨è°ç¨å¹¶è¡æä½ï¼ä½å¯ä»¥ä¸ºä¸åçå®¹å¨è°ç¨å¹¶è¡æä½\n * å®¹å¨è¿è¡æ¶å¿é¡»ä¸ºå®¹å¨è®¢éaddådelæä½ï¼è¿æ ·addåé¢æ»æ¯è·çç¸åºçdelã delå¯è½è·çé¢å¤çdelï¼ä½æ¯ï¼æä»¶åºè¯¥åè®¸å¤çå¤ä¸ªdelï¼å³æä»¶delåºè¯¥æ¯å¹ç­çï¼ã\n * å®¹å¨å¿é¡»ç± containerid å¯ä¸æ è¯ãå­å¨ç¶æçæä»¶åºè¯¥ä½¿ç¨ï¼ç½ç»åç§°ï¼å®¹å¨idï¼çä¸»é®æ¥å®æã\n * è¿è¡æ¶ä¸è½è°ç¨åä¸ä¸ªç½ç»åç§°æå®¹å¨idæ§è¡ä¸¤æ¬¡addï¼æ²¡æç¸åºçdelï¼ãæ¢å¥è¯è¯´ï¼ç»å®çå®¹å¨idå¿é¡»åªè½æ·»å å°ç¹å®çç½ç»ä¸æ¬¡ã\n\ncniæä»¶\n\n * cniæä»¶å¿é¡»å®ç°ä¸ä¸ªå¯æ§è¡æä»¶ï¼è¿ä¸ªæä»¶å¯ä»¥è¢«å®¹å¨ç®¡çç³»ç»è°ç¨\n * cniæä»¶è´è´£å°ç½ç»æ¥å£æå¥å®¹å¨ç½ç»å½åç©ºé´ï¼ä¾å¦ï¼vethå¯¹çä¸ç«¯ï¼ï¼å¹¶å¨ä¸»æºä¸è¿è¡ä»»ä½å¿è¦çæ¹åï¼ä¾å¦å°vethçå¦ä¸ç«¯è¿æ¥å°ç½æ¡¥ï¼ãç¶åå°ipåéç»æ¥å£ï¼å¹¶éè¿è°ç¨éå½çipam(ip address management)æä»¶æ¥è®¾ç½®ä¸âipå°åç®¡çâé¨åä¸è´çè·¯ç±ã\n\n\n# å®ç°\n\n# å®¹å¨åå»º\n\næ¥ä¸æ¥ï¼æä»¬è·é pod åå»ºè¿ç¨ï¼çç pod çç½ç»æå»ºãk8s pod çç½ç»æ¯è¿æ ·åå»ºçï¼\n\n 1. é¦å kubelet åå»ºåºç¡å®¹å¨ pause çæå¯¹åºç network namespace\n 2. ç¶å kubelet è°ç¨ç½ç» cni driverï¼ç±å®æ ¹æ®éç½®è°ç¨å·ä½ç cni æä»¶\n 3. ç¶å cni æä»¶ç»åºç¡å®¹å¨éç½®ç½ç»\n 4. æååå»º pod ä¸­å¶ä»å®¹å¨å±äº«ä½¿ç¨åºç¡å®¹å¨çç½ç»\n\nå¸¸è§ç cni æä»¶å®ç°æ¹æ¡æï¼\n\n * é§éæ¹æ¡\n   * é§éæ¹æ¡å¨iaaså±çç½ç»ä¸­åºç¨ä¹æ¯è¾å¤ï¼å°podåå¸å¨ä¸ä¸ªå¤§äºå±çç½ç»è§æ¨¡ä¸ãç½ç»ææç®åï¼ä½éçèç¹è§æ¨¡çå¢é¿å¤æåº¦ä¼æåã\n   * å¦ï¼\n     * weaveï¼udpå¹¿æ­ï¼æ¬æºå»ºç«æ°çbrï¼éè¿pcapäºé\n     * open vswitchï¼ovsï¼ï¼åºäºvxlanågreåè®®ï¼ä½æ¯æ§è½æ¹é¢æå¤±æ¯è¾ä¸¥é\n     * flannelï¼udpå¹¿æ­ï¼vxlan\n * è·¯ç±æ¹æ¡\n   * è·¯ç±æ¹æ¡ä¸è¬æ¯ä»3å±æè2å±å®ç°éç¦»åè·¨ä¸»æºå®¹å¨äºéçï¼åºäºé®é¢ä¹å¾å®¹æææ¥ã\n   * å¦\n     * calicoï¼åºäºbgpåè®®çè·¯ç±æ¹æ¡ï¼æ¯æå¾ç»è´çaclæ§å¶ï¼å¯¹æ··åäºäº²ååº¦æ¯è¾é«ã\n     * macvlanï¼ä»é»è¾åkernelå±æ¥çéç¦»æ§åæ§è½æä¼çæ¹æ¡ï¼åºäºäºå±éç¦»ï¼æä»¥éè¦äºå±è·¯ç±å¨æ¯æï¼å¤§å¤æ°äºæå¡åä¸æ¯æï¼æä»¥æ··åäºä¸æ¯è¾é¾ä»¥å®ç°ã\n\nè¿äºæä»¶åæä¼å¿ï¼ä¹å¨äºç¸åé´å­¦ä¹ ä¼ç¹ãè¿éä»ç»ä¸å¸¸è§ç flannelãcalicoï¼\n\n# flannel\n\nflannel æ¯ç± coreos å¼åçä¸ä¸ªæ¯è¾ç®åç overlay ç½ç»ï¼å¯è½æ¯ç®åæåæ¬¢è¿ç cni æä»¶äºãä¸è¬æ¥è¯´ï¼flannel å·²ç»è½å¤æ»¡è¶³å¤§å¤æ°çä½¿ç¨åºæ¯äºï¼å¹¶ä¸æ§è½ä¹æ¯è¾å¥½ï¼æä»¥ï¼ä¸è¬æ¥è¯´ï¼åªæå¨ flannel ä¸è½æ»¡è¶³éè¦çæ¶åï¼æèèä½¿ç¨å¶ä»ç cni æä»¶ã\n\nflannel çå·¥ä½æµç¨å¤§è´å¦ä¸ï¼\n\n * é¦åå¨å¯å¨ k8s controller manager æ¶ï¼éè¦æå®éç¾¤ç pod ip èå´ï¼--cluster-cidr=172.16.0.0/16, å¹¶å¼å¯ä¸º node åé ip éé¡¹ï¼--allocate-node-cidrs=true\n * controller managerä¼æä¸ºæ¯ä¸ªnodeåéçipèå´ä¿å­å° etcd ä¸­ (flannel ä¹ä¼ä½¿ç¨ etcd æ¥å­å¨å®çç¶æä¿¡æ¯)\n * æ°å»º pod æ¶ï¼flannel ä¼ä» etcd ä¸­ååºå±äºè¯¥ node ç ip åéç» podï¼åå¨ etcd ä¸­è®°å½ä¸è¿ä¸ª pod ç ip\n * è¿æ · etcd ä¸­å°±ä¼å­æä¸å¼  node ip ä¸ pod id å¯¹åºçâè·¯ç±è¡¨â\n\nflannel çè·¯ç±æµç¨ï¼\n\n * å½ pod å¨åä¸ä¸ª node ä¹åéä¿¡æ¶ï¼éè¿ docker bridge å³å¯\n * å½ pod éè¦è·¨ node éä¿¡æ¶ï¼æ°æ®åç»è¿ node ä¸­çè·¯ç±ä¼å° flannel(flanneld) ä¸­ï¼flannel éè¿ etcd æ¥è¯¢å°ç®ç pod ip ç node ipï¼ä½¿ç¨flannelçbackendså¯¹æ°æ®åè¿è¡åè£ï¼åéç»ç®çnodeå¤çãç®çnodeæ¿å°æ°æ®ååè§£å¼å°è£ï¼æ¿å°åå§æ°æ®åï¼åéè¿nodeçè·¯ç±éå°ç¸åºçpodã\n\nflannel æå¤ç§ä¸åç backends (å¦ udpï¼vxlanãhost-gw)æ¥è¿è¡ å°ååè·¯ç±ï¼é»è®¤çä¹æ¯æ¨èçæ¹å¼æ¯ï¼vxlanï¼ç¸å¯¹äºå¶ä»çå®ç°ï¼å®æä¾äºè¾å¥½çæ§è½åéè¦è¾å°çäººå·¥å¹²é¢ã\n\n\n\n# calico\n\ncalico æ¯ä¸ä¸ªçº¯ä¸å±çæ°æ®ä¸­å¿ç½ç»æ¹æ¡ï¼ä¸éè¦overlayï¼ï¼å¹¶ä¸ä¸openstackãkubernetesãawsãgceç­iaasåå®¹å¨å¹³å°é½æè¯å¥½çéæãå®ä¸ºæ¯ä¸ªå®¹å¨ä¼åéä¸ä¸ªå¯è·¯ç±çipï¼ç±äºéä¿¡æ¶ä¸éè¦è§£ååå°åï¼ç½ç»æ§è½æèå°ï¼æäºææ¥ã\n\ncalicoå¨æ¯ä¸ä¸ªèç¹å©ç¨ linux kernel å®ç°äºä¸ä¸ªé«æç vrouter æ¥è´è´£æ°æ®è½¬åï¼èæ¯ä¸ª vrouter éè¿ bgp åè®®è´è´£æèªå·±ä¸è¿è¡ç workload çè·¯ç±ä¿¡æ¯åæ´ä¸ª calico ç½ç»åä¼ æ­ã\n\nå°è§æ¨¡é¨ç½²ç calico ç½ç»å¯ä»¥ç´æ¥äºèï¼å¤§è§æ¨¡ä¸å¯éè¿æå®ç bgp route reflector æ¥å®æã è¿æ ·ä¿è¯æç»ææç workload ä¹é´çæ°æ®æµéé½æ¯éè¿ ip è·¯ç±çæ¹å¼å®æäºèçãcalicoèç¹ç»ç½å¯ä»¥ç´æ¥å©ç¨æ°æ®ä¸­å¿çç½ç»ç»æ(æ è®ºæ¯l2æèl3)ï¼ä¸éè¦é¢å¤çnatï¼é§éæèoverlay networkã\n\n\n\ncalicoä¸»è¦ç± felixãetcdãbgp client ä»¥å bgp route reflector ç»æ\n\n * felixï¼calico agentï¼æ¯ä¸ªèç¹é½éè¦è¿è¡ï¼ä¸»è¦è´è´£éç½®è·¯ç±ãéç½®aclsãæ¥åç¶æï¼ç¡®ä¿endpointçè¿éç¶æ\n * bgp client: ä¸»è¦è´è´£æ felix åå¥ kernel çè·¯ç±ä¿¡æ¯ååå°å½å calico ç½ç»å¶ä»èç¹ï¼ç¡®ä¿ workload é´çéä¿¡çæææ§\n * etcd: åå¸å¼é®å¼å­å¨ï¼ä¸»è¦è´è´£å­å¨ç½ç»ä¿¡æ¯ï¼ç¡®ä¿ calico ç½ç»ç¶æçåç¡®æ§\n * bgp route reflector: å¤§è§æ¨¡é¨ç½²æ¶ä½¿ç¨ï¼ä½ä¸ºbgp clientçä¸­å¿è¿æ¥ç¹, æå¼ææèç¹äºèç mesh æ¨¡å¼ï¼é¿åæ¯ä¸ªèç¹äºè, éè¿ä¸ä¸ªæèå¤ä¸ªbgp route reflectoræ¥å®æéä¸­å¼çè·¯ç±åå\n\ncalicoçä¸è¶³\n\n * ä¸æ¯æå¤ç§æ·ç½ç»çéç¦»åè½ï¼å¨å¤ç§æ·åºæ¯ä¸ä¼æç½ç»å®å¨é®é¢\n * calicoæ§å¶å¹³é¢çè®¾è®¡è¦æ±ç©çç½ç»å¾æ¯l2 fabricï¼è¿æ ·vrouteré´é½æ¯ç´æ¥å¯è¾¾ç\n\n\n# é®é¢\n\n * docker0ãcni0ãkube-ipvs0 çåºå«\n\n\n# reference\n\n * cluster networking\n * network design-proposals\n * cni (container network interface)\n * cnm (container network model)\n * understanding-kubernetes-networking-model",charsets:{cjk:!0}},{title:"K8Sç½ç»ä¹serviceé´çéä¿¡",frontmatter:{title:"K8Sç½ç»ä¹serviceé´çéä¿¡",date:"2021-01-05T21:36:12.000Z",description:"K8Sç½ç»ä¹serviceé´çéä¿¡",categories:["skills","devops"],tags:[null],permalink:null},regularPath:"/blog/skills/devops/k8s_net_srv.html",relativePath:"blog/skills/devops/k8s_net_srv.md",key:"v-66696d37",path:"/blog/skills/devops/k8s_net_srv.html",headers:[{level:2,title:"ipvs çç¹ç¹",slug:"ipvs-çç¹ç¹",normalizedTitle:"ipvs çç¹ç¹",charIndex:115},{level:2,title:"æ­£æ",slug:"æ­£æ",normalizedTitle:"æ­£æ",charIndex:742},{level:2,title:"å®è·µ",slug:"å®è·µ",normalizedTitle:"å®è·µ",charIndex:5580},{level:2,title:"æè",slug:"æè",normalizedTitle:"æè",charIndex:5765},{level:2,title:"è¯´æ",slug:"è¯´æ",normalizedTitle:"è¯´æ",charIndex:5862},{level:2,title:"reference",slug:"reference",normalizedTitle:"reference",charIndex:2276}],headersStr:"ipvs çç¹ç¹ æ­£æ å®è·µ æè è¯´æ reference",content:"# K8Sç½ç»ä¹serviceé´çéä¿¡\n\nä» k8s 1.8 å¼å§ï¼kube-proxy ç»ä»¶å¨ iptablesæ¨¡å¼åç¨æ·æ¨¡å¼ ä¹å¤å¢å äº ipvsæ¨¡å¼çæ¯æãä» k8s 1.12 å¼å§ï¼ipvsæ¨¡å¼æä¸ºé»è®¤æä½æ¨¡å¼ã\n\n\n# ipvs çç¹ç¹\n\nipvsæ¨¡å¼ ä¸ iptablesæ¨¡å¼ çä¸åä¹å¤å¨äºï¼\n\n 1. ipvs å¨å¤§åéç¾¤ä¸æä¾äºæ´å¥½çæ©å±æ§ å æ§è½\n    \n    ä¸ä¸ªä¾å­ï¼å¨5000èç¹éç¾¤ä¸­ä½¿ç¨ NodePort æå¡ï¼å¦ææä»¬æ2000ä¸ªæå¡å¹¶ä¸æ¯ä¸ªæå¡æ10ä¸ª podï¼è¿å°å¨æ¯ä¸ªå·¥ä½èç¹ä¸è³å°äº§ç20000ä¸ª iptable è®°å½ï¼è¿å¯è½ä½¿åæ ¸éå¸¸ç¹å¿ã\n\n 2. ipvs æä¾äºæ´å ä¼éåä¸°å¯çè´è½½åè¡¡ç®æ³\n    \n    ä¾å¦ï¼least load, least connections, locality, weighted, etc.\n\n 3. ipvs æ¯æ server çå¥åº·æ£æ¥ å è¿æ¥éè¯ ç­ç­\n\nipvsæ¨¡å¼ä¹ä¼ä½¿ç¨ IPTABLESï¼ ä»¥å¤ç packet filtering, SNAT, masquerade. ç¡®åçè¯´æ¯ï¼ipvsæ¨¡å¼ä¼ä½¿ç¨ ipset å­å¨éè¦éè¦ DROP æ masquared çæµéçæºæç®æ å°å, ä»¥ç¡®ä¿ IPTABLES è§åæ°ä¿æç¨³å®, æ è®ºéç¾¤éæå¤å° serviceã\n\nå¦å¤ï¼ipvs éè¦å¯¹vs(èææå¡ä¹å°±æ¯vip)è¿è¡ç®¡çï¼ç±äº ipvs ç DNAT é©å­æå¨ INPUT é¾ä¸ï¼å æ­¤å¿é¡»è¦è®©åæ ¸è¯å« VIP(cluster-ip) æ¯æ¬æºç IPãk8s éè¿è®¾ç½®å° service cluster ip ç»å®å°èæç½å¡ kube-ipvs0 æ¥å®ç°è¿ä¸ç¹ã\n\n\n# æ­£æ\n\nåå®éç¾¤æä¸¤ä¸ªæå¡ï¼gate(1 pod)ãsrv_a(3 pods), ä» gate ç pod åèµ·è¯·æ± å° srv ç cluster ipãæä»¬æ¥ççï¼æ´ä¸ªé¾è·¯çç¶æå§ã\n\né¦åï¼è·åå°ä¸¤ä¸ªæå¡åç¸å³podçipå°åï¼\n\n * cluster ï¼ kubectl get service --all-namespaces\n * podï¼kubectl get pod --all-namespaces | grep '[service name]'\n\nå¨æçæµè¯éç¾¤ï¼ip ä¿¡æ¯å¦ä¸ï¼\n\nservice:\n    srv_a                     NodePort       10.105.159.33    <none>           8000:32502/TCP     7d\n    gate                      NodePort       10.105.159.203   <none>           8000:30610/TCP     7d\npod:\n    gate-747d45c4bd-tmk62                1/1       Running            0          6d     10.105.130.70    xx.xx.xx.xx\n\n    srv_a-64c7ddc54d-48hsd               1/1       Running            0          23h    10.105.130.151   xx.xx.xx.xx\n    srv_a-64c7ddc54d-fc87r               1/1       Running            0          23h    10.105.130.153   xx.xx.xx.xx\n    srv_a-64c7ddc54d-qbs95               1/1       Running            0          23h    10.105.130.152   xx.xx.xx.xx\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\nä» pod åºæ¥çæ°æ®åä¼ä» docker å®¹å¨åéè¿ veth pair è®¾å¤è¿å¥å®¿ä¸» Node ç network namespaceãéè¿ å®¿ä¸»Node çè·¯ç±è½¬ååè½ï¼æ°æ®åè¿å¥å°äº iptable ç PREROUTING chain ä¸­ï¼æä»¬æ¥çè¿ä¸ªchainï¼\n\niptables -nL -t nat | grep PREROUTING -A5\n\n#:\n    Chain PREROUTING (policy ACCEPT)\n    target     prot opt source               destination\n    KUBE-SERVICES  all  --  0.0.0.0/0            0.0.0.0/0            /* kubernetes service portals */\n\n\n1\n2\n3\n4\n5\n6\n\n\næ­¤æ¶ï¼æ°æ®åæºip ä¸º pod ipï¼æºç«¯å£ä¸ºéæºç«¯å£ï¼ç®æ ip ä¸º cluster ipï¼ç®æ port ä¸ºæå® portã\n\næ®è¿ä¸ªchainï¼æ°æ®åä¼è¿å¥å° KUBE-SERVICES ä¸­ã\n\niptables -nL -t nat | grep 'KUBE-SERVICES' -A5\n\n#:\n    Chain KUBE-SERVICES (2 references)\n    target     prot opt source               destination\n    KUBE-MARK-MASQ  all  --  0.0.0.0/0            0.0.0.0/0            match-set KUBE-CLUSTER-IP dst,dst\n    KUBE-MARK-MASQ  all  --  0.0.0.0/0            0.0.0.0/0            match-set KUBE-LOAD-BALANCER-MASQ dst,dst\n    KUBE-MARK-MASQ  tcp  --  0.0.0.0/0            0.0.0.0/0            tcp match-set KUBE-NODE-PORT-TCP dst\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\nè¿ééè¦æ³¨æä¸ï¼ä¼æ ¹æ® ipset çä¸åï¼KUBE-SERVICES æå¤æ¡è§åãè¿ä¸ªéè¦æ ¹æ®ï¼å·ä½çè®¿é®æ¹å¼ï¼æ¥å³å®å·ä½ä½¿ç¨åªä¸ªè§åã\n\nå¨è¿éï¼æä»¬ä½¿ç¨çæ¯éç¾¤å cluster ip è®¿é®æå¡çæ¹å¼ï¼æä»¥ï¼æ°æ®åä¼å¹éipset KUBE-CLUSTER-IPãå¨è¿éå¹éäºè¿ä¸ªipsetä¹åè¿å¥äº KUBE-MARK-MASQ è¿ä¸ªè§åé¾ã(ipsetæ¯linuxçåæ ¸æ°æ®ç»æï¼å¯ä»¥å­å¨ä¸äºipåç«¯å£çä¿¡æ¯ï¼ipvsæ¨¡å¼çéç¾¤éè¿å¨iptableä¸­å¹éipsetï¼è¿æ ·åå°äºiptableä¸­çentryæ°é)\n\nå¯ä»¥éè¿æ¥ç KUBE-CLUSTER-IP è¿ä¸ª ipset æ¥éªè¯ä¸ match-set å¹éè§åï¼\n\n// srv-a ç cluster ip: 10.105.159.33\nipset list KUBE-CLUSTER-IP | grep '10.105.159.33' \n\n#:\n    10.105.159.33,tcp:8000\n\n\n1\n2\n3\n4\n5\n\n\nåå° KUBE-MARK-MASQ è¿ä¸ª iptable é¾ï¼ççå®åäºä»ä¹ã\n\niptables -nL -t nat | grep 'Chain KUBE-MARK-MASQ' -A5\n\n#:\n    Chain KUBE-MARK-MASQ (3 references)\n    target     prot opt source               destination\n    MARK       all  --  0.0.0.0/0            0.0.0.0/0            MARK or 0x4000\n\n\n1\n2\n3\n4\n5\n6\n\n\nKUBE-MARK-MASQ å¯¹ææç items åäº mark æ è®° 0x4000 !!!\n\nä»¥ä¸æ¯åçå¨ PREROUTING chain è¿ç¨ä¸­ï¼æ¥ä¸æ¥æ°æ®åä¼æ¥å° INPUT chain è¿æ¯ FORWARD chain å¢ï¼æ­£å¦ä¸ææå°çï¼ipvs å·¥ä½å¨ INPUT chainï¼æä»¥éè¦å°æ°æ®åå¼å¥ INPUT chainï¼è¿ä¸ªæ¯éè¿ï¼k8s éè¿è®¾ç½®å° service cluster ip ç»å®å°èæç½å¡ kube-ipvs0 æ¥å®ç°çãå®æç»å®ä¹åï¼åæ ¸å°±ä¼è¯å« VIP(cluster-ip) ä¸ºæ¬æºç IP, ä½¿å¾æ°æ®åå¾å°è¿ä¸æ­¥å¤çãéè¿ ip addr | grep kube å¾å®¹æç¡®è®¤è¿ä¸ªç»å®ã\n\nå°è¿éï¼æ°æ®åå·²ç»å°äº ipvsãæä»¬æ¥çç ipvs å¯¹è·¯ç±çæ§å¶ï¼\n\nipvsadm -L | grep '10.105.159.33' -A4\n\n#ï¼\n    TCP  10.105.159.33:irdmi rr\n        -> 10.105.130.151:irdmi         Masq    1      0          0\n        -> 10.105.130.152:irdmi         Masq    1      0          0\n        -> 10.105.130.153:irdmi         Masq    1      0          0\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\nå¯ä»¥çå°ï¼ipvs å° vip æ å°æ3ä¸ª endpoints ï¼å¹¶ä¸ä½¿ç¨round robinçåéæ¹å¼ï¼åéæéä¸º1ï¼ä¹å°±æ¯ååçå®ç°è´è½½åè¡¡ãipvs æ ¹æ®è¿ä¸ªéç½®å¨ INPUT chain å®æè¿ä¸ª DNAT æä½ãè¿æ¶, æºip ä¸º pod ipï¼æºç«¯å£ä¸ºéæºç«¯å£ï¼ç®æ ip ä¸ºæ å°éæ©ç pod ipï¼ç®æ  port ä¸ºæ å°éæ©ç portã\n\nç¶åï¼å°æ°æ®éå¥ POSTROUTING chainï¼ èè¿ä¸ª chain ç´æ¥è½¬åå° KUBE-POSTROUTING ä¸­ï¼\n\niptables -nL -t nat | grep 'Chain POSTROUTING' -A5\n\n#:\n    Chain POSTROUTING (policy ACCEPT)\n    target     prot opt source               destination\n    KUBE-POSTROUTING  all  --  0.0.0.0/0            0.0.0.0/0            /* kubernetes postrouting rules */\n    IP-MASQ-AGENT  all  --  0.0.0.0/0            0.0.0.0/0            /* ip-masq-agent: ensure nat POSTROUTING directs all non-LOCAL destination traffic to our custom IP-MASQ-AGENT chain */ ADDRTYPE match dst-type !LOCAL\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\næä»¬æ¥çç KUBE-POSTROUTING:\n\niptables -nL -t nat | grep 'Chain KUBE-POSTROUTING' -A5\n\n#:\n    Chain KUBE-POSTROUTING (1 references)\n    target     prot opt source               destination\n    MASQUERADE  all  --  0.0.0.0/0            0.0.0.0/0            /* kubernetes service traffic requiring SNAT */ mark match 0x4000/0x4000\n    MASQUERADE  all  --  0.0.0.0/0            0.0.0.0/0            match-set KUBE-LOOP-BACK dst,dst,src\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\nå¹éå°å¨ KUBE-MARK-MASQ ä¸­åçæ è®° 0x4000 æ¶ï¼å¯¹æ°æ®åå MASQUERADE ä¼ªè£ï¼ä¹å°±æ¯åä¸ªå SNAT æä½ï¼ææºå°åæ¿æ¢æè¿å°å®¿ä¸»æºä¸ç CNI ç½æ¡¥å°åãå°è¿éæä»¬çæ°æ®åæºipä¸ºä¸ä¸è·³è·¯ç±æä½¿ç¨ç½è·¯è®¾å¤çipï¼ç®æ  ipä¸º ipvs æ å°å°ç real ipï¼ç¶åæ ¹æ® host network namespace çè·¯ç±è¡¨åä¸ä¸è·³è·¯ç±éæ©ã\n\næ­¤æ¶ï¼åçç®æ å°åå·²ç»å°äºå·ä½çpodï¼ä¼éè¿ k8s çåºå±ç½ç»(flannel ç­)ï¼å°è¾¾ç®çå°ã\n\nä¸ºä»ä¹åªå¯¹ æ è®° 0x4000 çåè¿è¡ SNAT å¤çå¢ï¼è¿æ¯ä¸ºäºé¿åè¯¯æä½ï¼åªææäºæ è®°çåï¼ææ¯ k8s åé¨çæ°æ®ã\n\n\n# å®è·µ\n\næåï¼æä»¬éè¿ tcpdump æåçç tcp sync åçæµåï¼\n\ntcpdump -i any '((host 10.105.159.33 and port 8000) or (host 10.105.130.70 and not port 8000))' | grep '\\[S\\]'\n\n\n1\n\n\nå¯ä»¥çå°æ°æ®åçæºãç®æ  ip çååè¿ç¨ã\n\n\n# æè\n\n * ä¸ºä»ä¹ k8s ä¸­éè¦ä½¿ç¨ ipvs ç nat æ¨¡å¼ï¼å¯ä»¥ä½¿ç¨å¶ä»æ¨¡å¼åï¼\n * éè¿ node_ip:node_port æ¹å¼è®¿é® service çè¿ç¨æ¯æä¹æ ·çï¼\n\n\n# è¯´æ\n\n * 10.105.159.33:irdmi ä¸­ç irdmi\n   * irdmi æ¯ç«¯å£æå¯¹åºçæå¡ï¼å·ä½å¯ä»¥æ¥çï¼/etc/services æä»¶ (åå«ç½ç»æå¡åå®ä»¬æ å°ç«¯å£çåè¡¨)\n\n\n# reference\n\n * k8s ipvs",normalizedContent:"# k8sç½ç»ä¹serviceé´çéä¿¡\n\nä» k8s 1.8 å¼å§ï¼kube-proxy ç»ä»¶å¨ iptablesæ¨¡å¼åç¨æ·æ¨¡å¼ ä¹å¤å¢å äº ipvsæ¨¡å¼çæ¯æãä» k8s 1.12 å¼å§ï¼ipvsæ¨¡å¼æä¸ºé»è®¤æä½æ¨¡å¼ã\n\n\n# ipvs çç¹ç¹\n\nipvsæ¨¡å¼ ä¸ iptablesæ¨¡å¼ çä¸åä¹å¤å¨äºï¼\n\n 1. ipvs å¨å¤§åéç¾¤ä¸æä¾äºæ´å¥½çæ©å±æ§ å æ§è½\n    \n    ä¸ä¸ªä¾å­ï¼å¨5000èç¹éç¾¤ä¸­ä½¿ç¨ nodeport æå¡ï¼å¦ææä»¬æ2000ä¸ªæå¡å¹¶ä¸æ¯ä¸ªæå¡æ10ä¸ª podï¼è¿å°å¨æ¯ä¸ªå·¥ä½èç¹ä¸è³å°äº§ç20000ä¸ª iptable è®°å½ï¼è¿å¯è½ä½¿åæ ¸éå¸¸ç¹å¿ã\n\n 2. ipvs æä¾äºæ´å ä¼éåä¸°å¯çè´è½½åè¡¡ç®æ³\n    \n    ä¾å¦ï¼least load, least connections, locality, weighted, etc.\n\n 3. ipvs æ¯æ server çå¥åº·æ£æ¥ å è¿æ¥éè¯ ç­ç­\n\nipvsæ¨¡å¼ä¹ä¼ä½¿ç¨ iptablesï¼ ä»¥å¤ç packet filtering, snat, masquerade. ç¡®åçè¯´æ¯ï¼ipvsæ¨¡å¼ä¼ä½¿ç¨ ipset å­å¨éè¦éè¦ drop æ masquared çæµéçæºæç®æ å°å, ä»¥ç¡®ä¿ iptables è§åæ°ä¿æç¨³å®, æ è®ºéç¾¤éæå¤å° serviceã\n\nå¦å¤ï¼ipvs éè¦å¯¹vs(èææå¡ä¹å°±æ¯vip)è¿è¡ç®¡çï¼ç±äº ipvs ç dnat é©å­æå¨ input é¾ä¸ï¼å æ­¤å¿é¡»è¦è®©åæ ¸è¯å« vip(cluster-ip) æ¯æ¬æºç ipãk8s éè¿è®¾ç½®å° service cluster ip ç»å®å°èæç½å¡ kube-ipvs0 æ¥å®ç°è¿ä¸ç¹ã\n\n\n# æ­£æ\n\nåå®éç¾¤æä¸¤ä¸ªæå¡ï¼gate(1 pod)ãsrv_a(3 pods), ä» gate ç pod åèµ·è¯·æ± å° srv ç cluster ipãæä»¬æ¥ççï¼æ´ä¸ªé¾è·¯çç¶æå§ã\n\né¦åï¼è·åå°ä¸¤ä¸ªæå¡åç¸å³podçipå°åï¼\n\n * cluster ï¼ kubectl get service --all-namespaces\n * podï¼kubectl get pod --all-namespaces | grep '[service name]'\n\nå¨æçæµè¯éç¾¤ï¼ip ä¿¡æ¯å¦ä¸ï¼\n\nservice:\n    srv_a                     nodeport       10.105.159.33    <none>           8000:32502/tcp     7d\n    gate                      nodeport       10.105.159.203   <none>           8000:30610/tcp     7d\npod:\n    gate-747d45c4bd-tmk62                1/1       running            0          6d     10.105.130.70    xx.xx.xx.xx\n\n    srv_a-64c7ddc54d-48hsd               1/1       running            0          23h    10.105.130.151   xx.xx.xx.xx\n    srv_a-64c7ddc54d-fc87r               1/1       running            0          23h    10.105.130.153   xx.xx.xx.xx\n    srv_a-64c7ddc54d-qbs95               1/1       running            0          23h    10.105.130.152   xx.xx.xx.xx\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\nä» pod åºæ¥çæ°æ®åä¼ä» docker å®¹å¨åéè¿ veth pair è®¾å¤è¿å¥å®¿ä¸» node ç network namespaceãéè¿ å®¿ä¸»node çè·¯ç±è½¬ååè½ï¼æ°æ®åè¿å¥å°äº iptable ç prerouting chain ä¸­ï¼æä»¬æ¥çè¿ä¸ªchainï¼\n\niptables -nl -t nat | grep prerouting -a5\n\n#:\n    chain prerouting (policy accept)\n    target     prot opt source               destination\n    kube-services  all  --  0.0.0.0/0            0.0.0.0/0            /* kubernetes service portals */\n\n\n1\n2\n3\n4\n5\n6\n\n\næ­¤æ¶ï¼æ°æ®åæºip ä¸º pod ipï¼æºç«¯å£ä¸ºéæºç«¯å£ï¼ç®æ ip ä¸º cluster ipï¼ç®æ port ä¸ºæå® portã\n\næ®è¿ä¸ªchainï¼æ°æ®åä¼è¿å¥å° kube-services ä¸­ã\n\niptables -nl -t nat | grep 'kube-services' -a5\n\n#:\n    chain kube-services (2 references)\n    target     prot opt source               destination\n    kube-mark-masq  all  --  0.0.0.0/0            0.0.0.0/0            match-set kube-cluster-ip dst,dst\n    kube-mark-masq  all  --  0.0.0.0/0            0.0.0.0/0            match-set kube-load-balancer-masq dst,dst\n    kube-mark-masq  tcp  --  0.0.0.0/0            0.0.0.0/0            tcp match-set kube-node-port-tcp dst\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\nè¿ééè¦æ³¨æä¸ï¼ä¼æ ¹æ® ipset çä¸åï¼kube-services æå¤æ¡è§åãè¿ä¸ªéè¦æ ¹æ®ï¼å·ä½çè®¿é®æ¹å¼ï¼æ¥å³å®å·ä½ä½¿ç¨åªä¸ªè§åã\n\nå¨è¿éï¼æä»¬ä½¿ç¨çæ¯éç¾¤å cluster ip è®¿é®æå¡çæ¹å¼ï¼æä»¥ï¼æ°æ®åä¼å¹éipset kube-cluster-ipãå¨è¿éå¹éäºè¿ä¸ªipsetä¹åè¿å¥äº kube-mark-masq è¿ä¸ªè§åé¾ã(ipsetæ¯linuxçåæ ¸æ°æ®ç»æï¼å¯ä»¥å­å¨ä¸äºipåç«¯å£çä¿¡æ¯ï¼ipvsæ¨¡å¼çéç¾¤éè¿å¨iptableä¸­å¹éipsetï¼è¿æ ·åå°äºiptableä¸­çentryæ°é)\n\nå¯ä»¥éè¿æ¥ç kube-cluster-ip è¿ä¸ª ipset æ¥éªè¯ä¸ match-set å¹éè§åï¼\n\n// srv-a ç cluster ip: 10.105.159.33\nipset list kube-cluster-ip | grep '10.105.159.33' \n\n#:\n    10.105.159.33,tcp:8000\n\n\n1\n2\n3\n4\n5\n\n\nåå° kube-mark-masq è¿ä¸ª iptable é¾ï¼ççå®åäºä»ä¹ã\n\niptables -nl -t nat | grep 'chain kube-mark-masq' -a5\n\n#:\n    chain kube-mark-masq (3 references)\n    target     prot opt source               destination\n    mark       all  --  0.0.0.0/0            0.0.0.0/0            mark or 0x4000\n\n\n1\n2\n3\n4\n5\n6\n\n\nkube-mark-masq å¯¹ææç items åäº mark æ è®° 0x4000 !!!\n\nä»¥ä¸æ¯åçå¨ prerouting chain è¿ç¨ä¸­ï¼æ¥ä¸æ¥æ°æ®åä¼æ¥å° input chain è¿æ¯ forward chain å¢ï¼æ­£å¦ä¸ææå°çï¼ipvs å·¥ä½å¨ input chainï¼æä»¥éè¦å°æ°æ®åå¼å¥ input chainï¼è¿ä¸ªæ¯éè¿ï¼k8s éè¿è®¾ç½®å° service cluster ip ç»å®å°èæç½å¡ kube-ipvs0 æ¥å®ç°çãå®æç»å®ä¹åï¼åæ ¸å°±ä¼è¯å« vip(cluster-ip) ä¸ºæ¬æºç ip, ä½¿å¾æ°æ®åå¾å°è¿ä¸æ­¥å¤çãéè¿ ip addr | grep kube å¾å®¹æç¡®è®¤è¿ä¸ªç»å®ã\n\nå°è¿éï¼æ°æ®åå·²ç»å°äº ipvsãæä»¬æ¥çç ipvs å¯¹è·¯ç±çæ§å¶ï¼\n\nipvsadm -l | grep '10.105.159.33' -a4\n\n#ï¼\n    tcp  10.105.159.33:irdmi rr\n        -> 10.105.130.151:irdmi         masq    1      0          0\n        -> 10.105.130.152:irdmi         masq    1      0          0\n        -> 10.105.130.153:irdmi         masq    1      0          0\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\nå¯ä»¥çå°ï¼ipvs å° vip æ å°æ3ä¸ª endpoints ï¼å¹¶ä¸ä½¿ç¨round robinçåéæ¹å¼ï¼åéæéä¸º1ï¼ä¹å°±æ¯ååçå®ç°è´è½½åè¡¡ãipvs æ ¹æ®è¿ä¸ªéç½®å¨ input chain å®æè¿ä¸ª dnat æä½ãè¿æ¶, æºip ä¸º pod ipï¼æºç«¯å£ä¸ºéæºç«¯å£ï¼ç®æ ip ä¸ºæ å°éæ©ç pod ipï¼ç®æ  port ä¸ºæ å°éæ©ç portã\n\nç¶åï¼å°æ°æ®éå¥ postrouting chainï¼ èè¿ä¸ª chain ç´æ¥è½¬åå° kube-postrouting ä¸­ï¼\n\niptables -nl -t nat | grep 'chain postrouting' -a5\n\n#:\n    chain postrouting (policy accept)\n    target     prot opt source               destination\n    kube-postrouting  all  --  0.0.0.0/0            0.0.0.0/0            /* kubernetes postrouting rules */\n    ip-masq-agent  all  --  0.0.0.0/0            0.0.0.0/0            /* ip-masq-agent: ensure nat postrouting directs all non-local destination traffic to our custom ip-masq-agent chain */ addrtype match dst-type !local\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\næä»¬æ¥çç kube-postrouting:\n\niptables -nl -t nat | grep 'chain kube-postrouting' -a5\n\n#:\n    chain kube-postrouting (1 references)\n    target     prot opt source               destination\n    masquerade  all  --  0.0.0.0/0            0.0.0.0/0            /* kubernetes service traffic requiring snat */ mark match 0x4000/0x4000\n    masquerade  all  --  0.0.0.0/0            0.0.0.0/0            match-set kube-loop-back dst,dst,src\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\nå¹éå°å¨ kube-mark-masq ä¸­åçæ è®° 0x4000 æ¶ï¼å¯¹æ°æ®åå masquerade ä¼ªè£ï¼ä¹å°±æ¯åä¸ªå snat æä½ï¼ææºå°åæ¿æ¢æè¿å°å®¿ä¸»æºä¸ç cni ç½æ¡¥å°åãå°è¿éæä»¬çæ°æ®åæºipä¸ºä¸ä¸è·³è·¯ç±æä½¿ç¨ç½è·¯è®¾å¤çipï¼ç®æ  ipä¸º ipvs æ å°å°ç real ipï¼ç¶åæ ¹æ® host network namespace çè·¯ç±è¡¨åä¸ä¸è·³è·¯ç±éæ©ã\n\næ­¤æ¶ï¼åçç®æ å°åå·²ç»å°äºå·ä½çpodï¼ä¼éè¿ k8s çåºå±ç½ç»(flannel ç­)ï¼å°è¾¾ç®çå°ã\n\nä¸ºä»ä¹åªå¯¹ æ è®° 0x4000 çåè¿è¡ snat å¤çå¢ï¼è¿æ¯ä¸ºäºé¿åè¯¯æä½ï¼åªææäºæ è®°çåï¼ææ¯ k8s åé¨çæ°æ®ã\n\n\n# å®è·µ\n\næåï¼æä»¬éè¿ tcpdump æåçç tcp sync åçæµåï¼\n\ntcpdump -i any '((host 10.105.159.33 and port 8000) or (host 10.105.130.70 and not port 8000))' | grep '\\[s\\]'\n\n\n1\n\n\nå¯ä»¥çå°æ°æ®åçæºãç®æ  ip çååè¿ç¨ã\n\n\n# æè\n\n * ä¸ºä»ä¹ k8s ä¸­éè¦ä½¿ç¨ ipvs ç nat æ¨¡å¼ï¼å¯ä»¥ä½¿ç¨å¶ä»æ¨¡å¼åï¼\n * éè¿ node_ip:node_port æ¹å¼è®¿é® service çè¿ç¨æ¯æä¹æ ·çï¼\n\n\n# è¯´æ\n\n * 10.105.159.33:irdmi ä¸­ç irdmi\n   * irdmi æ¯ç«¯å£æå¯¹åºçæå¡ï¼å·ä½å¯ä»¥æ¥çï¼/etc/services æä»¶ (åå«ç½ç»æå¡åå®ä»¬æ å°ç«¯å£çåè¡¨)\n\n\n# reference\n\n * k8s ipvs",charsets:{cjk:!0}},{title:"K8S ç rolling update",frontmatter:{title:"K8S ç rolling update",date:"2020-06-05T00:00:00.000Z",description:"k8s rolling update",categories:["skills","devops"],tags:[null],permalink:null},regularPath:"/blog/skills/devops/k8s_rolling_update.html",relativePath:"blog/skills/devops/k8s_rolling_update.md",key:"v-71519a9f",path:"/blog/skills/devops/k8s_rolling_update.html",headers:[{level:2,title:"æµè¯",slug:"æµè¯",normalizedTitle:"æµè¯",charIndex:337},{level:2,title:"ç»æ",slug:"ç»æ",normalizedTitle:"ç»æ",charIndex:879},{level:2,title:"ç»è®º",slug:"ç»è®º",normalizedTitle:"ç»è®º",charIndex:2713},{level:2,title:"é",slug:"é",normalizedTitle:"é",charIndex:2815}],headersStr:"æµè¯ ç»æ ç»è®º é",content:"# K8S ä¹ rolling update\n\næè¿ä¸ä¸ªéè¦ä¸å¡å¨æ¥å¥äºååä»£çåï¼å¨æå¡åå¸æ¶åºç°è¯·æ± 502 çé®é¢ï¼ä»¥æ­¤ä¸ºå¥æºï¼æ³äºè§£ä¸ k8s çæ»å¨åçº§è¿ç¨ä¸­åçäºä»ä¹ã\n\nåæ¥æä»¥ä¸ºï¼å¨æå®ä»¥ä¸åæ°æ¶(åå®éç¾¤èµæºåè¶³)ï¼å¹¶ä¸æä»¬èªå·±çæå¡å¯ä»¥åå° gracefull terminate çè¯ï¼æ´ä¸ªç³»ç»çè®ºä¸å¯ä»¥åå°å®ç¾è¿æ¸¡è¿ç§»\n\nstrategy:\n    rollingUpdate:\n      maxSurge: 1\n      maxUnavailable: 0\n    type: RollingUpdate\n\nterminationGracePeriodSeconds: 30\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\nä½æ¯ï¼å®éä¸ä¼æå¾®å¼±çè¿æ¸¡æ(å¨æµè¯éç¾¤150mså·¦å³)ã\n\n\n# æµè¯\n\næçæµè¯æå¡ï¼å¨èµæºåè¶³ç k8s éç¾¤åï¼é¨ç½²ä¸¤ä¸ªæå¡ï¼åæ¶ï¼å¨éç¾¤å¤ä»¥ qps=100 çéåº¦æç»­è¯·æ± gateway:\n\ngateway\n    åè½ï¼ååä»£çå°åç«¯æå¡(serv)\n    å®ä¾ï¼1 pod\nserv\n    åè½ï¼ç®åçæ¥è¯¢åè½\n    å®ä¾ï¼1 pod\n\n\n1\n2\n3\n4\n5\n6\n\n\néè¿æµè¯èæ¬(è§ææ«)è§¦å rolling update, å¹¶ä½¿ç¨ tcpdump æååæ¢è¿ç¨ä¸­ç tcp åç¶åµï¼è¿å¯ä»¥éè¿ä¸è¿° shell è§å¯ ipvs ä¸­è·¯ç±ååæåµï¼\n\nwhile [ True ];do\n    kubectl get pods -o wide --namespace=test | grep $serv_name\n    ipvsadm -Ln | grep $serv_cluster_ip -A4\n    sleep 0.1s\n    echo \"================>\"\ndone\n\n\n1\n2\n3\n4\n5\n6\n\n\nè¿éå¯¹ä¸ºä»ä¹ä½¿ç¨èæ¬è¿è¡æä½åä¸ªè¯´æï¼å ä¸ºå¨æ»å¨åçº§è¿ç¨ä¸­ï¼æ°æ§ pod ç ip å±å­çæ¶é´å¾ç­ï¼æä»¥æ³éè¿èæ¬ï¼èªå¨æè·åç¸å³ ip åï¼è¿è¡çæ§ã\n\n\n# ç»æ\n\nåçè·¯ç±ååæåµ\n\n================>\n+ kubectl get pods -o wide --namespace=test | grep serv\nserv-7989c475cd-qpdvn                    0/1       Running            0          8s        10.102.102.176   10.46.xxx.xxx\nserv-7bdc4d8476-zk9wc                    1/1       Running            0          2m        10.102.102.199   10.46.xxx.xxx\n+ ipvsadm -Ln | grep 10.101.102.33 -A4\nTCP  10.101.102.33:8000 rr\n  -> 10.102.102.199:8000          Masq    1      0          1871\n+ sleep 0.1s\n\n================>\n+ '[' True ']'\n+ kubectl get pods -o wide --namespace=test | grep serv\nserv-7989c475cd-qpdvn                    1/1       Running            0          8s        10.102.102.176   10.46.xxx.xxx\nserv-7bdc4d8476-zk9wc                    1/1       Terminating        0          2m        10.102.102.199   10.46.xxx.xxx\n+ ipvsadm -Ln\n+ grep 10.101.102.33 -A4\nTCP  10.101.102.33:8000 rr\n  -> 10.102.102.176:8000          Masq    1      0          11\n  -> 10.102.102.199:8000          Masq    1      0          1896\n+ sleep 0.1s\n\n================>\n+ '[' True ']'\n+ kubectl get pods -o wide --namespace=test\n+ grep serv\nserv-7989c475cd-qpdvn                    1/1       Running            0          9s        10.102.102.176   10.46.xxx.xxx\nserv-7bdc4d8476-zk9wc                    1/1       Terminating        0          2m        10.102.102.199   10.46.xxx.xxx\n+ ipvsadm -Ln\n+ grep 10.101.102.33 -A4\nTCP  10.101.102.33:8000 rr\n  -> 10.102.102.176:8000          Masq    1      2          53\n+ sleep 0.1s\n\n================>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n\n\nåæ¥çç tcpdump çæåç¶åµ(åå®¹å¤ªé¿å°±ä¸æ¾å·ä½åå®¹äºï¼æå´è¶£çå¯ä»¥èªè¡æµè¯)ï¼\n\nå¯ä»¥çå°ï¼\n1. ç®æ ä¸º ip 10.102.102.199 çè¯·æ±ä¼åºç° 100ms å·¦å³çï¼æååº sync ä½æ²¡æç®æ  ip çç¡®è®¤å\n2. ç®æ ä¸º ip 10.102.102.199 æ ip 10.102.102.176 çè¯·æ±å±å­ï¼å¤§æ¦æç»­ 40ms\n3. åªå©ä¸ç®æ ä¸º ip 10.102.102.176 çè¯·æ±\n\n\n1\n2\n3\n4\n\n\n\n# ç»è®º\n\næ»ä½æ¥çï¼å¨æå¡è½å¤ä¼ééåºçæåµä¸ï¼k8s å¯ä»¥åå°å ä¹å®ç¾ç rolling updateï¼å¨å¤§å¤æ°æåµä¸å®å¨è½å¤æ»¡è¶³æä»¬çéè¦ãå¦ææå¶ä»éè¦çè¯ï¼å¯ä»¥èªè¡æ ¹æ®ä¸å¡è¿è¡éå½çè°æ´ã\n\n\n# é\n\n * æµè¯èæ¬\n\n    # ! /bin/bash\n    set +x\n\n    namespace='test'\n    gate_name='test-gateway'\n    serv_name='test-serv'\n    serv_pod_cnt=2\n\n    gate_cluster_ip=`kubectl get service $gate_name --namespace=$namespace | grep $gate_name | awk '{print($3)}'`\n    serv_cluster_ip=`kubectl get service $serv_name --namespace=$namespace | grep $serv_name | awk '{print($3)}'`\n\n    `kubectl apply -f $serv_name.yaml  --namespace=test`\n\n    while [ True ]; do\n        ipstr=`kubectl get pods -o wide --namespace=$namespace | grep $serv_name | awk '{print($6)}'`\n        if [[ $ipstr == *\"none\"* ]]; then \n            continue\n        fi\n        iparr=(${ipstr// /})\n        if [ ${#iparr[@]} -eq $serv_pod_cnt ]; then\n            break\n        fi \n        sleep 0.1s\n    done\n\n    echo ${iparr[@]}\n\n    hosts=\"(host $gate_cluster_ip) or (host $serv_cluster_ip)\"\n    for (( i=0;i<${#iparr[@]};i++ )); do \n        hosts=$hosts\" or (host  ${iparr[i]})\"\n    done\n\n    cmd_tcpdump=\"tcpdump -i any '($hosts)' | grep '\\[S\\]' > a.txt\"\n    `$cmd_tcpdump`\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n",normalizedContent:"# k8s ä¹ rolling update\n\næè¿ä¸ä¸ªéè¦ä¸å¡å¨æ¥å¥äºååä»£çåï¼å¨æå¡åå¸æ¶åºç°è¯·æ± 502 çé®é¢ï¼ä»¥æ­¤ä¸ºå¥æºï¼æ³äºè§£ä¸ k8s çæ»å¨åçº§è¿ç¨ä¸­åçäºä»ä¹ã\n\nåæ¥æä»¥ä¸ºï¼å¨æå®ä»¥ä¸åæ°æ¶(åå®éç¾¤èµæºåè¶³)ï¼å¹¶ä¸æä»¬èªå·±çæå¡å¯ä»¥åå° gracefull terminate çè¯ï¼æ´ä¸ªç³»ç»çè®ºä¸å¯ä»¥åå°å®ç¾è¿æ¸¡è¿ç§»\n\nstrategy:\n    rollingupdate:\n      maxsurge: 1\n      maxunavailable: 0\n    type: rollingupdate\n\nterminationgraceperiodseconds: 30\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\nä½æ¯ï¼å®éä¸ä¼æå¾®å¼±çè¿æ¸¡æ(å¨æµè¯éç¾¤150mså·¦å³)ã\n\n\n# æµè¯\n\næçæµè¯æå¡ï¼å¨èµæºåè¶³ç k8s éç¾¤åï¼é¨ç½²ä¸¤ä¸ªæå¡ï¼åæ¶ï¼å¨éç¾¤å¤ä»¥ qps=100 çéåº¦æç»­è¯·æ± gateway:\n\ngateway\n    åè½ï¼ååä»£çå°åç«¯æå¡(serv)\n    å®ä¾ï¼1 pod\nserv\n    åè½ï¼ç®åçæ¥è¯¢åè½\n    å®ä¾ï¼1 pod\n\n\n1\n2\n3\n4\n5\n6\n\n\néè¿æµè¯èæ¬(è§ææ«)è§¦å rolling update, å¹¶ä½¿ç¨ tcpdump æååæ¢è¿ç¨ä¸­ç tcp åç¶åµï¼è¿å¯ä»¥éè¿ä¸è¿° shell è§å¯ ipvs ä¸­è·¯ç±ååæåµï¼\n\nwhile [ true ];do\n    kubectl get pods -o wide --namespace=test | grep $serv_name\n    ipvsadm -ln | grep $serv_cluster_ip -a4\n    sleep 0.1s\n    echo \"================>\"\ndone\n\n\n1\n2\n3\n4\n5\n6\n\n\nè¿éå¯¹ä¸ºä»ä¹ä½¿ç¨èæ¬è¿è¡æä½åä¸ªè¯´æï¼å ä¸ºå¨æ»å¨åçº§è¿ç¨ä¸­ï¼æ°æ§ pod ç ip å±å­çæ¶é´å¾ç­ï¼æä»¥æ³éè¿èæ¬ï¼èªå¨æè·åç¸å³ ip åï¼è¿è¡çæ§ã\n\n\n# ç»æ\n\nåçè·¯ç±ååæåµ\n\n================>\n+ kubectl get pods -o wide --namespace=test | grep serv\nserv-7989c475cd-qpdvn                    0/1       running            0          8s        10.102.102.176   10.46.xxx.xxx\nserv-7bdc4d8476-zk9wc                    1/1       running            0          2m        10.102.102.199   10.46.xxx.xxx\n+ ipvsadm -ln | grep 10.101.102.33 -a4\ntcp  10.101.102.33:8000 rr\n  -> 10.102.102.199:8000          masq    1      0          1871\n+ sleep 0.1s\n\n================>\n+ '[' true ']'\n+ kubectl get pods -o wide --namespace=test | grep serv\nserv-7989c475cd-qpdvn                    1/1       running            0          8s        10.102.102.176   10.46.xxx.xxx\nserv-7bdc4d8476-zk9wc                    1/1       terminating        0          2m        10.102.102.199   10.46.xxx.xxx\n+ ipvsadm -ln\n+ grep 10.101.102.33 -a4\ntcp  10.101.102.33:8000 rr\n  -> 10.102.102.176:8000          masq    1      0          11\n  -> 10.102.102.199:8000          masq    1      0          1896\n+ sleep 0.1s\n\n================>\n+ '[' true ']'\n+ kubectl get pods -o wide --namespace=test\n+ grep serv\nserv-7989c475cd-qpdvn                    1/1       running            0          9s        10.102.102.176   10.46.xxx.xxx\nserv-7bdc4d8476-zk9wc                    1/1       terminating        0          2m        10.102.102.199   10.46.xxx.xxx\n+ ipvsadm -ln\n+ grep 10.101.102.33 -a4\ntcp  10.101.102.33:8000 rr\n  -> 10.102.102.176:8000          masq    1      2          53\n+ sleep 0.1s\n\n================>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n\n\nåæ¥çç tcpdump çæåç¶åµ(åå®¹å¤ªé¿å°±ä¸æ¾å·ä½åå®¹äºï¼æå´è¶£çå¯ä»¥èªè¡æµè¯)ï¼\n\nå¯ä»¥çå°ï¼\n1. ç®æ ä¸º ip 10.102.102.199 çè¯·æ±ä¼åºç° 100ms å·¦å³çï¼æååº sync ä½æ²¡æç®æ  ip çç¡®è®¤å\n2. ç®æ ä¸º ip 10.102.102.199 æ ip 10.102.102.176 çè¯·æ±å±å­ï¼å¤§æ¦æç»­ 40ms\n3. åªå©ä¸ç®æ ä¸º ip 10.102.102.176 çè¯·æ±\n\n\n1\n2\n3\n4\n\n\n\n# ç»è®º\n\næ»ä½æ¥çï¼å¨æå¡è½å¤ä¼ééåºçæåµä¸ï¼k8s å¯ä»¥åå°å ä¹å®ç¾ç rolling updateï¼å¨å¤§å¤æ°æåµä¸å®å¨è½å¤æ»¡è¶³æä»¬çéè¦ãå¦ææå¶ä»éè¦çè¯ï¼å¯ä»¥èªè¡æ ¹æ®ä¸å¡è¿è¡éå½çè°æ´ã\n\n\n# é\n\n * æµè¯èæ¬\n\n    # ! /bin/bash\n    set +x\n\n    namespace='test'\n    gate_name='test-gateway'\n    serv_name='test-serv'\n    serv_pod_cnt=2\n\n    gate_cluster_ip=`kubectl get service $gate_name --namespace=$namespace | grep $gate_name | awk '{print($3)}'`\n    serv_cluster_ip=`kubectl get service $serv_name --namespace=$namespace | grep $serv_name | awk '{print($3)}'`\n\n    `kubectl apply -f $serv_name.yaml  --namespace=test`\n\n    while [ true ]; do\n        ipstr=`kubectl get pods -o wide --namespace=$namespace | grep $serv_name | awk '{print($6)}'`\n        if [[ $ipstr == *\"none\"* ]]; then \n            continue\n        fi\n        iparr=(${ipstr// /})\n        if [ ${#iparr[@]} -eq $serv_pod_cnt ]; then\n            break\n        fi \n        sleep 0.1s\n    done\n\n    echo ${iparr[@]}\n\n    hosts=\"(host $gate_cluster_ip) or (host $serv_cluster_ip)\"\n    for (( i=0;i<${#iparr[@]};i++ )); do \n        hosts=$hosts\" or (host  ${iparr[i]})\"\n    done\n\n    cmd_tcpdump=\"tcpdump -i any '($hosts)' | grep '\\[s\\]' > a.txt\"\n    `$cmd_tcpdump`\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n",charsets:{cjk:!0}},{title:"OpenTracing ç®ä»",frontmatter:{title:"OpenTracing ç®ä»",date:"2020-04-13T00:00:00.000Z",description:"OpenTracing ç®ä»",permalink:null,categories:["blog","skills","devops"],tags:[null]},regularPath:"/blog/skills/devops/opentracing_overview.html",relativePath:"blog/skills/devops/opentracing_overview.md",key:"v-6ca7651f",path:"/blog/skills/devops/opentracing_overview.html",headers:[{level:2,title:"OpenTracing ç®ä»",slug:"opentracing-ç®ä»",normalizedTitle:"opentracing ç®ä»",charIndex:2},{level:3,title:"opentracing å³é®è¯",slug:"opentracing-å³é®è¯",normalizedTitle:"opentracing å³é®è¯",charIndex:148},{level:3,title:"opentracing å®ç°å¯¹æ¯",slug:"opentracing-å®ç°å¯¹æ¯",normalizedTitle:"opentracing å®ç°å¯¹æ¯",charIndex:1033},{level:3,title:"jaeger",slug:"jaeger",normalizedTitle:"jaeger",charIndex:1229},{level:3,title:"zipkin",slug:"zipkin",normalizedTitle:"zipkin",charIndex:1439}],headersStr:"OpenTracing ç®ä» opentracing å³é®è¯ opentracing å®ç°å¯¹æ¯ jaeger zipkin",content:'# OpenTracing ç®ä»\n\n * reference\n   * The OpenTracing Semantic Specification\n   * OpenTracing API for Go\n   * ä»Zipkinå°Jaegerï¼Uberçåå¸å¼è¿½è¸ªä¹étchannel\n\n\n# opentracing å³é®è¯\n\n * åºæ¬æ¹æ³ï¼Inject, Extract, å Carriers Span å¯ä»¥åå«å¾å¤çtagsãlogsåbaggageï¼ä½æ¯å§ç»éè¦ä¸ä¸ªé«åº¦æ¦æ¬çoperation name\n * åè¯è§£é\n   * Trace : ä¸ä¸ª trace ä»£è¡¨äºä¸ä¸ªäºå¡æèæµç¨å¨åå¸å¼ç³»ç»ä¸­çæ§è¡è¿ç¨\n   * Span : ä¸ä¸ª span ä»£è¡¨å¨åå¸å¼ç³»ç»ä¸­å®æçåä¸ªå·¥ä½ååãä¹åå«å¶ä» span ç"å¼ç¨"ï¼è¿åè®¸å°å¤ä¸ª spans ç»åæä¸ä¸ªå®æ´ç Trace\n     \n         æ¯ä¸ª span æ ¹æ® OpenTracing è§èå°è£ä»¥ä¸åå®¹ï¼\n             æä½åç§°\n             å¼å§æ¶é´åç»ææ¶é´\n             span Tags key:value \n             span Logs key:value \n             SpanContext\n     \n     \n     1\n     2\n     3\n     4\n     5\n     6\n     \n     * Tags : Span tags(è·¨åº¦æ ç­¾)å¯ä»¥çè§£ä¸ºç¨æ·èªå®ä¹ç Span æ³¨éãä¾¿äºæ¥è¯¢ãè¿æ»¤åçè§£è·è¸ªæ°æ®\n     * Logs : Span logs(è·¨åº¦æ¥å¿)å¯ä»¥è®°å½ Span åç¹å®æ¶é´æäºä»¶çæ¥å¿ä¿¡æ¯ãä¸»è¦ç¨äºæè·ç¹å® Span çæ¥å¿ä¿¡æ¯ä»¥ååºç¨ç¨åºæ¬èº«çå¶ä»ä¿¡æ¯è¾åº\n     * SpanContext : SpanContext ä»£è¡¨è·¨è¶è¿ç¨è¾¹çï¼ä¼ éå°å­çº§ Span çç¶æãå¸¸ç¨åå¨è·¨åAPIè¾¹çæ¶çä¸ä¸æä¼ éã\n   * Baggage Items : Baggage Items å¯ä»¥çè§£ä¸º trace å¨å±è¿è¡ä¸­é¢å¤ä¼ è¾çæ°æ®éå\n * å®ç°\n   * grpc : éè¿éå  tracer çä¿¡æ¯å° context æ¥å®ç°è·¨è¶è¾¹çä¼ é\n   * http : éè¿éå  tracer çä¿¡æ¯å° header æ¥å®ç°è·¨è¶è¾¹çä¼ é\n\n\n# opentracing å®ç°å¯¹æ¯\n\näº§ååç§°         åå        å¼åè¯­è¨   OPENTRACINGæ å   ä¾µå¥æ§    æ¶ææ§                                                       å³ç­æ¯æ                                    å¯è§å            ä½æ¶è     å»¶å±æ§\njaeger       uber      go     å®å¨              é¨åä¾µå¥   æ¶ææ§é«ï¼ UDPåè®®ä¼ è¾æ°æ®(å¨Uberä»»æç»å®çä¸ä¸ªJaegerå®è£å¯ä»¥å¾å®¹æå°æ¯å¤©å¤çå åäº¿spans)   å³ç­æ¯æè¾å¥½ï¼å¹¶ä¸åºå±æ¯æmetricsææ                   æ¥è¡¨ä¸ä¸°å¯ï¼UIæ¯è¾ç®å   æ¶èä½     jaegeræ¯è¾å¤æï¼ä½¿ç¨æ¡æ¶è¾å¤ãä½ç»è¿uberå¤§è§æ¨¡ä½¿ç¨ï¼å»¶å±æ§å¥½\nzipkin       twitter   java   é¨å              ä¾µå¥æ§å¼º   æ¶ææ§å¥½                                                      å³ç­ä¸è¬(åè½åä¸ï¼çæ§ç»´åº¦åçæ§ä¿¡æ¯ä¸å¤ä¸°å¯ãæ²¡æåè­¦åè½)         æ°æ®æ¥è¡¨ä¸°å¯         ç³»ç»å¼éå°   å»¶å±æ§å¥½\nskywalking   åä¸º        java   å®å¨              ä¾µå¥æ§ä½   æ¶ææ§å¥½                                                      è½ç¶è°ç¨é¾è·¯æ´ç»åï¼ä½ä½èå¨æ§è½åè¿½è¸ªç»ç²åº¦ä¹é´ä¿æäºæ¯è¾å¥½çå¹³è¡¡ãå³ç­å¥½   æ°æ®æ¥è¡¨ä¸°å¯         æ¶èè¾ä½    å»¶å±æ§éå¸¸å¥½ï¼æ°´å¹³çè®ºä¸æ éæ©å±\n\n\n# jaeger\n\n\n\n * æ ¸å¿ç»ä»¶\n   * Jaegeræ ¸å¿åç«¯ç»ä»¶ï¼jaeger-agentãjaeger-collectorãjaeger-query\n   * å¶ä¸­ jaeger-agentãjaeger-collector é½å¯ä»¥éè¿åå¸å¼é¨ç½² éå LB å¾å®¹æåå°æ¨ªåæ©å±ï¼æä»¥å¯¹äºä¸å¡ä½éè¾å¤§çåºæ¯å¾æä¼å¿\n * æä¹å\n   * Collectors require a persistent storage backend. Cassandra 3.x (default) and ElasticSearch are the primary supported storage backends. There is ongoing work to add support for MySQL and ScyllaDB.\n * éæ ·æ¹å¼\n   * åºå®éæ ·ãéæºéæ ·ãéæµéæ ·ç­ï¼éæ ·æ¹å¼ä¸°å¯\n * é¨ç½²\n   * all in one\n     \n     (ä¸éåçäº§ç¯å¢)\n         docker run -d -e COLLECTOR_ZIPKIN_HTTP_PORT=9411 -p 5775:5775/udp -p 6831:6831/udp -p 6832:6832/udp -p 5778:5778 -p 16686:16686 -p 14268:14268 -p 9411:9411 jaegertracing/all-in-one:latest \n     \n     \n     1\n     2\n     \n   * ç¬ç«é¨ç½²\n     \n         docker run -d --rm -p 14268:14268 -p 9411:9411 jaegertracing/jaeger-collector /go/bin/collector-linux --es.server-urls=http://localhost:9200\n     \n         docker run -d --rm -p 5775:5775/udp -p 6831:6831/udp -p 6832:6832/udp -p 5778:5778/tcp jaegertracing/jaeger-agent /go/bin/agent-linux --collector.host-port=jaeger-collector.jaeger-infra.svc:14267\n     \n         docker run -d --rm -p 16686:16686 jaegertracing/jaeger-query /go/bin/query-linux -es.server-urls=http://localhost:9200\n     \n     \n     1\n     2\n     3\n     4\n     5\n     \n   * ç«¯å£è¯´æ\n     \n         ç«¯å£\tåè®®\tæå±æ¨¡å\t     åè½\n         5775\tUDP\tagent\t     éè¿å¼å®¹æ§Thriftåè®®ï¼æ¥æ¶Zipkin thriftç±»åæ°æ®\n         6831\tUDP\tagent\t     éè¿å¼å®¹æ§Thriftåè®®ï¼æ¥æ¶Jaeger thriftç±»åæ°æ®\n         6832\tUDP\tagent\t     éè¿äºè¿å¶Thriftåè®®ï¼æ¥æ¶Jaeger thriftç±»åæ°æ®\n         5778\tHTTP\tagent\t     éç½®æ§å¶æå¡æ¥å£\n         16686\tHTTP\tquery\t     å®¢æ·ç«¯åç«¯çé¢å±ç¤ºç«¯å£\n         14268\tHTTP\tcollector    æ¥æ¶å®¢æ·ç«¯Zipkin thriftç±»åæ°æ®\n         14267\tHTTP\tcollector    æ¥æ¶å®¢æ·ç«¯Jaeger thriftç±»åæ°æ®\n         9411\tHTTP\tcollector    Zipkinå¼å®¹endpoint\n     \n     \n     1\n     2\n     3\n     4\n     5\n     6\n     7\n     8\n     9\n     \n * reference\n   * jaegertracing docs\n\n\n# zipkin\n\n\n\n * æä¹å\n   * CassandraãElasticSearchåMySQL\n * éæ ·æ¹å¼\n   * éæºæ¦çéæ ·\n * zikpin ä½¿ç¨ç¤ºä¾(å¯ä»¥èªå·±å®ç°grpc.StatsHandleræ¥å®å¶ååè½)ï¼\n   \n       import (\n           zipkin "github.com/openzipkin/zipkin-go"\n           zipkingrpc "github.com/openzipkin/zipkin-go/middleware/grpc"\n           zipkinrephttp "github.com/openzipkin/zipkin-go/reporter/http"\n       )\n   \n       func client() {\n           opts := []grpc.DialOption{\n               grpc.WithInsecure(),\n               func() grpc.DialOption {\n                   tracer, _ := zipkin.NewTracer(zipkinrephttp.NewReporter("http://127.0.0.1:9411/api/v2/spans"),  zipkin.WithSampler(zipkin.AlwaysSample))\n                   return grpc.WithStatsHandler(zipkingrpc.NewClientHandler(tracer))\n               }()\n           }\n           conn, err := grpc.Dial(fmt.Sprintf("%v:%v", svcData.Address, svcData.Port), opts ...)\n           ...\n       } \n   \n       func server() {\n           tracer, _ := zipkin.NewTracer(zipkinrephttp.NewReporter("http://127.0.0.1:9411/api/v2/spans"), zipkin.WithSampler(zipkin.AlwaysSample))\n           opt = append(opt, grpc.StatsHandler(zipkingrpc.NewServerHandler(tracer)))\n           ...\n           wserver.Server = grpc.NewServer(opt...)\n       } \n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   7\n   8\n   9\n   10\n   11\n   12\n   13\n   14\n   15\n   16\n   17\n   18\n   19\n   20\n   21\n   22\n   23\n   24\n   ',normalizedContent:'# opentracing ç®ä»\n\n * reference\n   * the opentracing semantic specification\n   * opentracing api for go\n   * ä»zipkinå°jaegerï¼uberçåå¸å¼è¿½è¸ªä¹étchannel\n\n\n# opentracing å³é®è¯\n\n * åºæ¬æ¹æ³ï¼inject, extract, å carriers span å¯ä»¥åå«å¾å¤çtagsãlogsåbaggageï¼ä½æ¯å§ç»éè¦ä¸ä¸ªé«åº¦æ¦æ¬çoperation name\n * åè¯è§£é\n   * trace : ä¸ä¸ª trace ä»£è¡¨äºä¸ä¸ªäºå¡æèæµç¨å¨åå¸å¼ç³»ç»ä¸­çæ§è¡è¿ç¨\n   * span : ä¸ä¸ª span ä»£è¡¨å¨åå¸å¼ç³»ç»ä¸­å®æçåä¸ªå·¥ä½ååãä¹åå«å¶ä» span ç"å¼ç¨"ï¼è¿åè®¸å°å¤ä¸ª spans ç»åæä¸ä¸ªå®æ´ç trace\n     \n         æ¯ä¸ª span æ ¹æ® opentracing è§èå°è£ä»¥ä¸åå®¹ï¼\n             æä½åç§°\n             å¼å§æ¶é´åç»ææ¶é´\n             span tags key:value \n             span logs key:value \n             spancontext\n     \n     \n     1\n     2\n     3\n     4\n     5\n     6\n     \n     * tags : span tags(è·¨åº¦æ ç­¾)å¯ä»¥çè§£ä¸ºç¨æ·èªå®ä¹ç span æ³¨éãä¾¿äºæ¥è¯¢ãè¿æ»¤åçè§£è·è¸ªæ°æ®\n     * logs : span logs(è·¨åº¦æ¥å¿)å¯ä»¥è®°å½ span åç¹å®æ¶é´æäºä»¶çæ¥å¿ä¿¡æ¯ãä¸»è¦ç¨äºæè·ç¹å® span çæ¥å¿ä¿¡æ¯ä»¥ååºç¨ç¨åºæ¬èº«çå¶ä»ä¿¡æ¯è¾åº\n     * spancontext : spancontext ä»£è¡¨è·¨è¶è¿ç¨è¾¹çï¼ä¼ éå°å­çº§ span çç¶æãå¸¸ç¨åå¨è·¨åapiè¾¹çæ¶çä¸ä¸æä¼ éã\n   * baggage items : baggage items å¯ä»¥çè§£ä¸º trace å¨å±è¿è¡ä¸­é¢å¤ä¼ è¾çæ°æ®éå\n * å®ç°\n   * grpc : éè¿éå  tracer çä¿¡æ¯å° context æ¥å®ç°è·¨è¶è¾¹çä¼ é\n   * http : éè¿éå  tracer çä¿¡æ¯å° header æ¥å®ç°è·¨è¶è¾¹çä¼ é\n\n\n# opentracing å®ç°å¯¹æ¯\n\näº§ååç§°         åå        å¼åè¯­è¨   opentracingæ å   ä¾µå¥æ§    æ¶ææ§                                                       å³ç­æ¯æ                                    å¯è§å            ä½æ¶è     å»¶å±æ§\njaeger       uber      go     å®å¨              é¨åä¾µå¥   æ¶ææ§é«ï¼ udpåè®®ä¼ è¾æ°æ®(å¨uberä»»æç»å®çä¸ä¸ªjaegerå®è£å¯ä»¥å¾å®¹æå°æ¯å¤©å¤çå åäº¿spans)   å³ç­æ¯æè¾å¥½ï¼å¹¶ä¸åºå±æ¯æmetricsææ                   æ¥è¡¨ä¸ä¸°å¯ï¼uiæ¯è¾ç®å   æ¶èä½     jaegeræ¯è¾å¤æï¼ä½¿ç¨æ¡æ¶è¾å¤ãä½ç»è¿uberå¤§è§æ¨¡ä½¿ç¨ï¼å»¶å±æ§å¥½\nzipkin       twitter   java   é¨å              ä¾µå¥æ§å¼º   æ¶ææ§å¥½                                                      å³ç­ä¸è¬(åè½åä¸ï¼çæ§ç»´åº¦åçæ§ä¿¡æ¯ä¸å¤ä¸°å¯ãæ²¡æåè­¦åè½)         æ°æ®æ¥è¡¨ä¸°å¯         ç³»ç»å¼éå°   å»¶å±æ§å¥½\nskywalking   åä¸º        java   å®å¨              ä¾µå¥æ§ä½   æ¶ææ§å¥½                                                      è½ç¶è°ç¨é¾è·¯æ´ç»åï¼ä½ä½èå¨æ§è½åè¿½è¸ªç»ç²åº¦ä¹é´ä¿æäºæ¯è¾å¥½çå¹³è¡¡ãå³ç­å¥½   æ°æ®æ¥è¡¨ä¸°å¯         æ¶èè¾ä½    å»¶å±æ§éå¸¸å¥½ï¼æ°´å¹³çè®ºä¸æ éæ©å±\n\n\n# jaeger\n\n\n\n * æ ¸å¿ç»ä»¶\n   * jaegeræ ¸å¿åç«¯ç»ä»¶ï¼jaeger-agentãjaeger-collectorãjaeger-query\n   * å¶ä¸­ jaeger-agentãjaeger-collector é½å¯ä»¥éè¿åå¸å¼é¨ç½² éå lb å¾å®¹æåå°æ¨ªåæ©å±ï¼æä»¥å¯¹äºä¸å¡ä½éè¾å¤§çåºæ¯å¾æä¼å¿\n * æä¹å\n   * collectors require a persistent storage backend. cassandra 3.x (default) and elasticsearch are the primary supported storage backends. there is ongoing work to add support for mysql and scylladb.\n * éæ ·æ¹å¼\n   * åºå®éæ ·ãéæºéæ ·ãéæµéæ ·ç­ï¼éæ ·æ¹å¼ä¸°å¯\n * é¨ç½²\n   * all in one\n     \n     (ä¸éåçäº§ç¯å¢)\n         docker run -d -e collector_zipkin_http_port=9411 -p 5775:5775/udp -p 6831:6831/udp -p 6832:6832/udp -p 5778:5778 -p 16686:16686 -p 14268:14268 -p 9411:9411 jaegertracing/all-in-one:latest \n     \n     \n     1\n     2\n     \n   * ç¬ç«é¨ç½²\n     \n         docker run -d --rm -p 14268:14268 -p 9411:9411 jaegertracing/jaeger-collector /go/bin/collector-linux --es.server-urls=http://localhost:9200\n     \n         docker run -d --rm -p 5775:5775/udp -p 6831:6831/udp -p 6832:6832/udp -p 5778:5778/tcp jaegertracing/jaeger-agent /go/bin/agent-linux --collector.host-port=jaeger-collector.jaeger-infra.svc:14267\n     \n         docker run -d --rm -p 16686:16686 jaegertracing/jaeger-query /go/bin/query-linux -es.server-urls=http://localhost:9200\n     \n     \n     1\n     2\n     3\n     4\n     5\n     \n   * ç«¯å£è¯´æ\n     \n         ç«¯å£\tåè®®\tæå±æ¨¡å\t     åè½\n         5775\tudp\tagent\t     éè¿å¼å®¹æ§thriftåè®®ï¼æ¥æ¶zipkin thriftç±»åæ°æ®\n         6831\tudp\tagent\t     éè¿å¼å®¹æ§thriftåè®®ï¼æ¥æ¶jaeger thriftç±»åæ°æ®\n         6832\tudp\tagent\t     éè¿äºè¿å¶thriftåè®®ï¼æ¥æ¶jaeger thriftç±»åæ°æ®\n         5778\thttp\tagent\t     éç½®æ§å¶æå¡æ¥å£\n         16686\thttp\tquery\t     å®¢æ·ç«¯åç«¯çé¢å±ç¤ºç«¯å£\n         14268\thttp\tcollector    æ¥æ¶å®¢æ·ç«¯zipkin thriftç±»åæ°æ®\n         14267\thttp\tcollector    æ¥æ¶å®¢æ·ç«¯jaeger thriftç±»åæ°æ®\n         9411\thttp\tcollector    zipkinå¼å®¹endpoint\n     \n     \n     1\n     2\n     3\n     4\n     5\n     6\n     7\n     8\n     9\n     \n * reference\n   * jaegertracing docs\n\n\n# zipkin\n\n\n\n * æä¹å\n   * cassandraãelasticsearchåmysql\n * éæ ·æ¹å¼\n   * éæºæ¦çéæ ·\n * zikpin ä½¿ç¨ç¤ºä¾(å¯ä»¥èªå·±å®ç°grpc.statshandleræ¥å®å¶ååè½)ï¼\n   \n       import (\n           zipkin "github.com/openzipkin/zipkin-go"\n           zipkingrpc "github.com/openzipkin/zipkin-go/middleware/grpc"\n           zipkinrephttp "github.com/openzipkin/zipkin-go/reporter/http"\n       )\n   \n       func client() {\n           opts := []grpc.dialoption{\n               grpc.withinsecure(),\n               func() grpc.dialoption {\n                   tracer, _ := zipkin.newtracer(zipkinrephttp.newreporter("http://127.0.0.1:9411/api/v2/spans"),  zipkin.withsampler(zipkin.alwayssample))\n                   return grpc.withstatshandler(zipkingrpc.newclienthandler(tracer))\n               }()\n           }\n           conn, err := grpc.dial(fmt.sprintf("%v:%v", svcdata.address, svcdata.port), opts ...)\n           ...\n       } \n   \n       func server() {\n           tracer, _ := zipkin.newtracer(zipkinrephttp.newreporter("http://127.0.0.1:9411/api/v2/spans"), zipkin.withsampler(zipkin.alwayssample))\n           opt = append(opt, grpc.statshandler(zipkingrpc.newserverhandler(tracer)))\n           ...\n           wserver.server = grpc.newserver(opt...)\n       } \n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   7\n   8\n   9\n   10\n   11\n   12\n   13\n   14\n   15\n   16\n   17\n   18\n   19\n   20\n   21\n   22\n   23\n   24\n   ',charsets:{cjk:!0}},{title:"MS Shell Link æ ¼å¼ç®æ",frontmatter:{title:"MS Shell Link æ ¼å¼ç®æ",date:"2021-11-11T19:32:00.000Z",lastmod:null,description:"MS Shell Link æ ¼å¼è§£æ",categories:["skills"],tags:["ole","ms shell link"],permalink:null},regularPath:"/blog/skills/office/ms_shellink.html",relativePath:"blog/skills/office/ms_shellink.md",key:"v-15864453",path:"/blog/skills/office/ms_shellink.html",headers:[{level:2,title:"Shell Link Binary File Format",slug:"shell-link-binary-file-format",normalizedTitle:"shell link binary file format",charIndex:150},{level:3,title:"ShellLinkHeader",slug:"shelllinkheader",normalizedTitle:"shelllinkheader",charIndex:434},{level:3,title:"LinkTargetIDList",slug:"linktargetidlist",normalizedTitle:"linktargetidlist",charIndex:517},{level:2,title:"Reference",slug:"reference",normalizedTitle:"reference",charIndex:1181}],headersStr:"Shell Link Binary File Format ShellLinkHeader LinkTargetIDList Reference",content:'# MS-SHLLINK\n\nå¯¹äº window ä¸ç "å¿«æ·æ¹å¼" åè½ï¼å¤§å®¶åºè¯¥é½æ¯è¾çæäºãå®ä¸»è¦ç¨äºå¿«éè®¿é®å¦ä¸ä¸ªä½ç½®ï¼æè·¯å¾ï¼ãå¨UNIXç³»ç»ä¸­ï¼ç§°ä¸ºç¬¦å·é¾æ¥ï¼èå¨Windowsä¸­ï¼è¿æ ·çæä»¶è¢«ç§°ä¸º "shell link"ãShell-Link çæä»¶ååç¼ä¸º".LNK"ï¼æä»¶åå®¹æ¯æç§ Shell Link Binary File Format çè§èï¼å®ä¹çäºè¿å¶æ°æ®å¯¹è±¡ï¼å¶ä¸­åå«äºå¯ç¨äºè®¿é®å¦ä¸ä¸ªæ°æ®å¯¹è±¡çä¿¡æ¯ã\n\nShell linkéå¸¸ç¨äºæ¯æåºç¨ç¨åºå¯å¨åé¾æ¥æ¹æ¡ï¼ä¾å¦å¯¹è±¡é¾æ¥ååµå¥ï¼OLEï¼ã\n\n\n# Shell Link Binary File Format\n\nLNK æä»¶æ ¼å¼å¯ä»¥è¡¨è¾¾å¦ä¸ï¼SHELL_LINK = SHELL_LINK_HEADER [LINKTARGET_IDLIST] [LINKINFO] [STRING_DATA] *EXTRA_DATA, å¶ä¸­\n\n * SHELL_LINK_HEADERï¼\n   * ä¸ä¸ªShellLinkHeaderç»æï¼åå«äºç¡®è®¤ä¿¡æ¯ï¼æ¶é´æ³ï¼ä»¥åææä¸äºå¯éç»ææ¯å¦å­å¨çflags\n * LINKTARGET_IDLISTï¼\n   * ä¸ä¸ªå¯éçLinkTargetIDListç»æï¼æå®äºlinkçtarget\n * LINKINFO\n   * ä¸ä¸ªå¯éçLinkInfoç»æï¼ææäºå¤çlink targetå¿éçä¿¡æ¯\n * STRING_DATA\n   * 0ä¸ªæå¤ä¸ªStringDataç»æï¼ç¨äºä¼ éç¨æ·æ¥å£åè·¯å¾æ è¯ä¿¡æ¯\n * EXTRA_DATA\n   * 0ä¸ªæå¤ä¸ªåExtraDataç»æ\n\néè¦æ³¨æçæ¯ï¼è¥æ ç¹æ®è¯´æï¼MS-SHLLINK ææ¡£ä¸­å®ä¹çæ°æ®ç»æçå­èåºé½æ¯ little-endian.\n\n\n# ShellLinkHeader\n\nå¨ [MS-SHLLINK]: Shell Link (.LNK) Binary File Format ä¸­æè¯¦ç»è¯´æï¼è¿éä¸åèµè¿°ã\n\n\n# LinkTargetIDList\n\nå¨ [MS-SHLLINK]: Shell Link (.LNK) Binary File Format ä¸­è¯´æå¦ä¸ï¼\n\n+ LinkTargetIDList\n    + IDListSize (2 bytes)\n    + IDList (variable)\n        + ItemIDList (variable)\n            + ItemIDSize (2 bytes)\n            + Data (variable)\n        + TerminalID (2 bytes)\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\nå¯ä»¥çå°ï¼Data å­æ®µæ²¡ææ´å ç»èçè¯´æï¼è¿éå¯¹å¶åè¿ä¸æ­¥è¡¥åã\n\n\n# Reference\n\n * [MS-SHLLINK]: Shell Link (.LNK) Binary File Format\n * CVE-2020-0729ï¼Windows LNKè¿ç¨ä»£ç æ§è¡æ¼æ´åæ',normalizedContent:'# ms-shllink\n\nå¯¹äº window ä¸ç "å¿«æ·æ¹å¼" åè½ï¼å¤§å®¶åºè¯¥é½æ¯è¾çæäºãå®ä¸»è¦ç¨äºå¿«éè®¿é®å¦ä¸ä¸ªä½ç½®ï¼æè·¯å¾ï¼ãå¨unixç³»ç»ä¸­ï¼ç§°ä¸ºç¬¦å·é¾æ¥ï¼èå¨windowsä¸­ï¼è¿æ ·çæä»¶è¢«ç§°ä¸º "shell link"ãshell-link çæä»¶ååç¼ä¸º".lnk"ï¼æä»¶åå®¹æ¯æç§ shell link binary file format çè§èï¼å®ä¹çäºè¿å¶æ°æ®å¯¹è±¡ï¼å¶ä¸­åå«äºå¯ç¨äºè®¿é®å¦ä¸ä¸ªæ°æ®å¯¹è±¡çä¿¡æ¯ã\n\nshell linkéå¸¸ç¨äºæ¯æåºç¨ç¨åºå¯å¨åé¾æ¥æ¹æ¡ï¼ä¾å¦å¯¹è±¡é¾æ¥ååµå¥ï¼oleï¼ã\n\n\n# shell link binary file format\n\nlnk æä»¶æ ¼å¼å¯ä»¥è¡¨è¾¾å¦ä¸ï¼shell_link = shell_link_header [linktarget_idlist] [linkinfo] [string_data] *extra_data, å¶ä¸­\n\n * shell_link_headerï¼\n   * ä¸ä¸ªshelllinkheaderç»æï¼åå«äºç¡®è®¤ä¿¡æ¯ï¼æ¶é´æ³ï¼ä»¥åææä¸äºå¯éç»ææ¯å¦å­å¨çflags\n * linktarget_idlistï¼\n   * ä¸ä¸ªå¯éçlinktargetidlistç»æï¼æå®äºlinkçtarget\n * linkinfo\n   * ä¸ä¸ªå¯éçlinkinfoç»æï¼ææäºå¤çlink targetå¿éçä¿¡æ¯\n * string_data\n   * 0ä¸ªæå¤ä¸ªstringdataç»æï¼ç¨äºä¼ éç¨æ·æ¥å£åè·¯å¾æ è¯ä¿¡æ¯\n * extra_data\n   * 0ä¸ªæå¤ä¸ªåextradataç»æ\n\néè¦æ³¨æçæ¯ï¼è¥æ ç¹æ®è¯´æï¼ms-shllink ææ¡£ä¸­å®ä¹çæ°æ®ç»æçå­èåºé½æ¯ little-endian.\n\n\n# shelllinkheader\n\nå¨ [ms-shllink]: shell link (.lnk) binary file format ä¸­æè¯¦ç»è¯´æï¼è¿éä¸åèµè¿°ã\n\n\n# linktargetidlist\n\nå¨ [ms-shllink]: shell link (.lnk) binary file format ä¸­è¯´æå¦ä¸ï¼\n\n+ linktargetidlist\n    + idlistsize (2 bytes)\n    + idlist (variable)\n        + itemidlist (variable)\n            + itemidsize (2 bytes)\n            + data (variable)\n        + terminalid (2 bytes)\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\nå¯ä»¥çå°ï¼data å­æ®µæ²¡ææ´å ç»èçè¯´æï¼è¿éå¯¹å¶åè¿ä¸æ­¥è¡¥åã\n\n\n# reference\n\n * [ms-shllink]: shell link (.lnk) binary file format\n * cve-2020-0729ï¼windows lnkè¿ç¨ä»£ç æ§è¡æ¼æ´åæ',charsets:{cjk:!0}},{title:"Office æ ¼å¼ç®æ",frontmatter:{title:"Office æ ¼å¼ç®æ",date:"2021-06-18T13:50:00.000Z",lastmod:null,description:"Office æ ¼å¼ç®æï¼æ¥æ¾ å® ä»¥è¿è¡çæ¯æ£æµ",categories:["skills"],tags:["ole","ms-cfb","office"],permalink:null},regularPath:"/blog/skills/office/ole_office.html",relativePath:"blog/skills/office/ole_office.md",key:"v-a254d0c2",path:"/blog/skills/office/ole_office.html",headers:[{level:2,title:"ä¸ãMalware",slug:"ä¸ãmalware",normalizedTitle:"ä¸ãmalware",charIndex:922},{level:3,title:"1.1 æ¼æ´",slug:"_1-1-æ¼æ´",normalizedTitle:"1.1 æ¼æ´",charIndex:1029},{level:3,title:"1.2 å®çæ¯",slug:"_1-2-å®çæ¯",normalizedTitle:"1.2 å®çæ¯",charIndex:1202},{level:3,title:"1.3 Embedded",slug:"_1-3-embedded",normalizedTitle:"1.3 embedded",charIndex:2797},{level:2,title:"äºãMS-CFB",slug:"äºãms-cfb",normalizedTitle:"äºãms-cfb",charIndex:2937},{level:2,title:"OLE",slug:"ole",normalizedTitle:"ole",charIndex:119},{level:3,title:"OLE æ ¼å¼",slug:"ole-æ ¼å¼",normalizedTitle:"ole æ ¼å¼",charIndex:5058},{level:3,title:"VBA Project æ ¼å¼",slug:"vba-project-æ ¼å¼",normalizedTitle:"vba project æ ¼å¼",charIndex:8015},{level:3,title:"Microsoft Office Excel 4.0",slug:"microsoft-office-excel-4-0",normalizedTitle:"microsoft office excel 4.0",charIndex:11043},{level:3,title:"DOC",slug:"doc",normalizedTitle:"doc",charIndex:15056},{level:3,title:"PPT",slug:"ppt",normalizedTitle:"ppt",charIndex:603},{level:3,title:"XLS",slug:"xls",normalizedTitle:"xls",charIndex:2439},{level:2,title:"OOXML",slug:"ooxml",normalizedTitle:"ooxml",charIndex:153},{level:3,title:"1. Name Representation",slug:"_1-name-representation",normalizedTitle:"1. name representation",charIndex:20827},{level:3,title:"2. Cell References & Name",slug:"_2-cell-references-name",normalizedTitle:"2. cell references &amp; name",charIndex:null},{level:3,title:"3. Formulas and expressions",slug:"_3-formulas-and-expressions",normalizedTitle:"3. formulas and expressions",charIndex:22310},{level:2,title:"MS-Office çå¶ä»å½¢å¼",slug:"ms-office-çå¶ä»å½¢å¼",normalizedTitle:"ms-office çå¶ä»å½¢å¼",charIndex:23232},{level:2,title:"RTF",slug:"rtf",normalizedTitle:"rtf",charIndex:23830},{level:3,title:"æ£åº",slug:"æ£åº",normalizedTitle:"æ£åº",charIndex:23946},{level:3,title:"æ¸ç",slug:"æ¸ç",normalizedTitle:"æ¸ç",charIndex:24354},{level:2,title:"Reference",slug:"reference",normalizedTitle:"reference",charIndex:2701}],headersStr:"ä¸ãMalware 1.1 æ¼æ´ 1.2 å®çæ¯ 1.3 Embedded äºãMS-CFB OLE OLE æ ¼å¼ VBA Project æ ¼å¼ Microsoft Office Excel 4.0 DOC PPT XLS OOXML 1. Name Representation 2. Cell References & Name 3. Formulas and expressions MS-Office çå¶ä»å½¢å¼ RTF æ£åº æ¸ç Reference",content:'# Office æ ¼å¼ç®æ\n\nç®åå¸¸è§ç Microsoft Office æ ¼å¼ä¸»è¦åä¸º 97 ~ 2003 å 2007 ~ ä¸¤ç§æ ¼å¼ãMicrosoft Office 97 ~ 2003 çæä»¶æ ¼å¼é½æ¯ç± MS-CFB ç»ææ¥è¡¨ç¤ºç OLE æä»¶ãMicrosoft Office 2007 ~åæ¯ç± OOXML æ ¼å¼çæä»¶ç»æåç¼©èæç zip åæ¥å­å¨ã\n\nè OOXML åæ¯ä»¥ XML æä»¶ä¸ºåºç¡çï¼æä»¥ï¼æ¦æ¬çè¯´ï¼Officeææ¡£ä¸»è¦åºäº oleãxmlãooxml è¿ä¸ç§æä»¶æ ¼å¼æå»ºèµ·æ¥çã\n\nå¸¸è§çæä»¶æ©å±åä»¥åç¨éå¦ä¸ï¼\n\nEXTENSIONS       USAGE                                          REMARK\ndocãxlsãppt      å±äº 97-2003 ç Office                            \ndocxãxlsxãpptx   å±äº 2007 ~ ç Office ææ¡£ï¼ä½æ²¡æå¯ç¨å®                   \ndocmãxlsmãpptm   å±äºå¯ç¨äºå®ç 2007 ~ ç Office ææ¡£ï¼å¯ä»¥å­å¨ Visual Basic   \n                 Applicationsï¼VBAï¼å®ä»£ç \nppsx             æ¯ 2007 ç PPT çä¸ç§æ ¼å¼ï¼æå¼å°±æ¯å¹»ç¯çæ­æ¾æ¨¡å¼                 \n\næç§æä»¬å¸¸è§çè®¤ç¥ï¼ä¸ä¸ªææ¡£åºå½åå«ä»¥ä¸å ä¸ªé¨åï¼\n\n 1. ææ¡£åå®¹\n    * å¯è½æ¶åå¯¹ embedded objects æ external objects çå¼ç¨\n    * ææ¡£çå±ç¤ºç¸å³ï¼å­ä½ãé¡µé¢å¤§å°ãæå°æ¹å¼ç­ç­\n 2. ææ¡£å·¥å·\n    * ä¸ºäºæ´å¥½ãæ´æ¹ä¾¿çæä½ææ¡£åå®¹è¿è¡ç¼è¾ãå±ç¤ºãæç¤ºä»¥åå¶ä»åè½ï¼èæä¾çä¸äºè·ææ¡£ç¸å³çç»ä»¶ï¼å¦ vbaãformulaãanimation ç­ç­\n 3. ææ¡£å±æ§\n    * å¦ï¼åä½æ¶é´ãä½èãæåä¿®æ¹æ¶é´ç­ç­\n 4. ä¿æ¤æªæ½\n    * ç­¾å\n    * è¯»(æå¼)ãå ä¿æ¤\n\n\n# ä¸ãMalware\n\nç±äº ms-office æä»¶çå¹¿æ³ä½¿ç¨ï¼æ¶æè½¯ä»¶ä½èå¯¹å¶è¿è¡äºååçææãå©ç¨ï¼å¬çåºäºä¸ç³»åéå¯¹è¿äºææ¡£ççæ¯ï¼æä¸­å¸¸å¸¸è¢«ç¨äºæ¶æç®ççç»ä»¶æèæ¹å¼æï¼å®çæ¯ãæ¼æ´å©ç¨ãåµå¥æä»¶\n\n\n# 1.1 æ¼æ´\n\næ¼æ´å©ç¨æ¯æè½¯ä»¶èªèº«ç¼ºé·è¢«æ»å»èå©ç¨æ¥æ§è¡é«å±å¨ä½ï¼å¦å©ç¨ ole çç¹ç¹è°ç¨ç¬¬ä¸æ¹ç»ä»¶å¹¶æ§è¡ï¼æ æº¢åºé æçä»»æä»£ç æ§è¡æ¼æ´(CVE-2017-11882) ç­ç­ï¼å¸¸è§çæ¼æ´æï¼\n\n * CVE-2017-11882\n * CVE-2018-0802\n * CVE-2019-0801\n * CVE-2021-40444\n\n\n# 1.2 å®çæ¯\n\nå®ï¼Macroï¼æ¯ ms-office æä¾çä¸ç§å©ç¨ä¸ç³»åç¬ç«ç office å½ä»¤æ¥å®ç°ä»»å¡æ§è¡çèªå¨åï¼ä»¥ç®åæ¥å¸¸å·¥ä½çå·¥å·ãå½åç ms-office æ¯ä½¿ç¨ Visual Basic for Applicationsï¼VBAï¼ç¼åçï¼å®æ¯ Microsoft ç Visual Basic ç¼ç¨è¯­è¨ä¸é¨ä¸º Office æå¡çä¸ç§åä½ãVBA å¯å¨å¤§å¤æ° Office ç¨åºä¸­ä½¿ç¨ï¼ä¾å¦ Accessï¼Excelï¼Outlookï¼PowerPointï¼Projectï¼Publisherï¼Visio å Word ç­ç­ã\n\nå®çæ¯ä¸»è¦æ¯å©ç¨ å® æ¥è¿è¡ææåä¼ æ­ãå®å©ç¨å®è¯­è¨çåè½å¯å­å¨ææ¡£ææ¨¡æ¿ä¸­ï¼ä¸æ¦å¸¦æå®çæ¯çææ¡£è¢«æå¼ï¼å®å°±å¯è½ä¼æ§è¡ï¼èå®çæ¯å°±ä¼è¢«æ¿æ´»ã\n\nå®çä¸»è¦ææè·¯å¾å¤§è´å¦ä¸ï¼åä¸ªOfficeææ¡£ => Officeææ¡£æ¨¡æ¿ => å¤ä¸ªOfficeææ¡£ã\n\nå¸¸è§çå®ä¸»è¦å­å¨äºä»¥ä¸ä¸¤ç§å½¢å¼(vba && xlm)ï¼\n\næ­¤å¤ï¼è¿æä¸ç§æ»å»æ¹å¼è¢«ç§°ä¸ºãæ¨¡æ¿æ³¨å¥ãï¼å®éä¸è¿æ¯ä¸è¿°ä¸¤ç§ macros çå©ç¨ï¼ä¸è¿åå®¹å¯è½ä¼éæ¶åçåå\n\n * \n\næ­¤å¤ï¼å®çæ¯å¸¸å¸¸ç¨ä»¥ä¸æ¹å¼ä¿æ¤ãéèèªå·±ï¼\n\n 1. ç¦æ­¢æç¤ºä¿¡æ¯\n\nOn Error Resume Next                     \'å¦æåçéè¯¯ï¼ä¸å¼¹åºåºéçªå£ï¼ç»§ç»­æ§è¡ä¸é¢è¯­å¥\nApplication.DisplayAlerts = wdAlertsNone \'ä¸å¼¹åºè­¦åçªå£\nApplication.DisplayStatusBar = False     \'ä¸æ¾ç¤ºç¶ææ ï¼ä»¥åæ¾ç¤ºå®çè¿è¡ç¶æ\nOptions.VirusProtection = False          \'å³é­çæ¯ä¿æ¤åè½ï¼è¿è¡åå¦æåå«å®ï¼ä¸æç¤º\n\n\n1\n2\n3\n4\n\n 2. å±è½å½ä»¤èåï¼ä¸è®¸æ¥çå®\n\n\' Disableæèå é¤ç¹å®èåé¡¹ï¼ç¨æ¥ä½¿âå·¥å·âå®âèåå¤±æçè¯­å¥ï¼\nCommandBars(âToolsâ).Controls(16).Enabled = False\n\n\n1\n2\n\n 3. éèå®ççå®ä»£ç \n\n * å¨âèªå¨å®âä¸­ï¼ä¸åæ¬ä»»ä½æææç ´åçä»£ç ï¼ä½åå«äºåå»ºãæ§è¡åå é¤æ°å®ï¼å®éè¿è¡ææåç ´åçå®ï¼çä»£ç ï¼å°å®ä»£ç å­ä½é¢è²è®¾ç½®æä¸èæ¯ä¸æ ·çç½è²ç­\n * âèªå¨å®â æ¯æå©ç¨ AutoExecãAutoNewãAutoOpenãAutoCloseãAutoExit èªå¨è§¦åæ§è¡çå®\n\n 4. ææ¡£å¯ç ä¿æ¤\n\n * æå¼ææ¡£æ¶éè¦å¯ç  æè æ¥çvbaèæ¬æ¶éè¦å¯ç \n\nå¦å¤ï¼çæ¯ä½èå¸¸ç¨å¯ç éé¸ææ®µä»¥å¢å æ£æµé¾åº¦ï¼äºå®ä¸ä¹å¾ææãè¿ç§æ¹æ³çå¨ç§°æ¯ï¼VelvetSweatshop Default Password Ployã\n\n * å¯¹è±¡ï¼Excel 4.0 xls 97 ~ files with a compromised macro\n * è¡¨ç°ï¼XLS files appear password protected but arenât, opening automatically to install malware from compromised macros.\n * åå ï¼Excel ä¼é¦åå°è¯ä½¿ç¨é»è®¤å¯ç  \'VelvetSweatshop\' ä»¥ read-only æ¨¡å¼æå¼æä»¶ï¼å¦æå¤±è´¥æ¶ï¼ååç¨æ·è¦æ±è¾å¥å¯ç ã(This read-only technique has been known about for over 10 years.)\n * Reference\n   * https://threatpost.com/hackers-update-age-old-excel-4-0-macro-attack/154898/\n\n\n# 1.3 Embedded\n\nå©ç¨å¤åææ¡£å¯ä»¥ååµå¶å®ææ¡£çç¹æ§ï¼å¯ä»¥åµå¥å¦ï¼\n\n * imagesãvideoãaudio\n * other streams, eg. rtfãpdfãdocx ... (rtfãdocxç­å¤åææ¡£åå¯ä»¥ç»§ç»­åµå¥... MY GOD ~)\n\n\n# äºãMS-CFB\n\nç»å¸¸è¢«ç§°ä¸º OLE(Object Linking and Embedded)ï¼å®éä¸ OLE (æ¯ä¸ç§é¢åå¯¹è±¡çææ¯)åå«çåå®¹æ´å¤ï¼æ¯ COM ææ¯çåºç¡ï¼è CFB åªæ¯ OLE ä¸­å³äºæä»¶æ ¼å¼çä¸ç§æè¿°ã\n\nå¤åææ¡£çç©çç»ææ¯è¾ç®åï¼\n\n * \n\næ³¨æï¼Compound File Header (512 bytes)ä¹ä¼ç¬å ä¸ä¸ª sector, æ²¡æç¨å°çå°æ¹å¡«å 0.\n\nè¿éæ¯é»è¾ç»æï¼\n\n * \n\nææ¡£ä¸­çåå®¹é½ä»¥ stream æ¥ä¿æå·ä½åå®¹ï¼storage æ¥ç»ç» stream çç»æãèè¿äºåå®¹å¨æä»¶ä¸­çä½ç½®ãæ¥æ¾æ¹å¼ãè§£è¯»æ¹å¼ï¼å°±ç± Directory Entry Array æ¥è¡¨è¾¾ã\n\nå¤åææ¡£çç»æéå¸¸ç±»ä¼¼ FAT æä»¶ç³»ç»ï¼storage ç¸å½äº directoryï¼stream ç¸å½äº fileãä¸ºäºæä»¶çå¿«éå®ä½ï¼æä»¬éè¦ç¸åºçååºç´¢å¼è¡¨(DiFat å Fat)ãå¨ å¤åææ¡£ä¸­ï¼ä¸ºäºèçç©ºé´ï¼ä¼å° sector ååæç­é¿ç short-sector ç¨äºå°å¯¹è±¡(short-stream)çå­å¨ï¼èå®çç´¢å¼éè¦ Mini-Fatã\n\nç±äº CFB æä»¶ç± sectors ç»æï¼è¿éç»ä¸ç§°å¼ä¸ºï¼\n\n * msat (master sector allocation table)ï¼åå DiFat\n * sat (sector allocation table)ï¼åå Fat\n * ssat (short-sector allocation table)\n * stream\n * short_stream\n\nä»ä»¬çåè½å¦ä¸ï¼\n\n * msat è¡¨åå«äºç¨äºæé  sat è¡¨ç sectors ç sid\n * sat è¡¨åå«äºå¾å¤ sid é¾(æç¹å®ç sid æ è¯é¾æ¡ç»æ)\n   * æ¯ä¸ª sid é¾ä¸ç sectors èåææäºä¸ä¸ªå®æ´ç object (å¦ï¼streamãstorageãdirectory entry arrayãssat ...)çç©çå­å¨ã\n * ssat è¡¨åå«äºå¾å¤ ssid é¾(æç¹å®ç ssid æ è¯é¾æ¡ç»æ)\n   * æ¯ä¸ª ssid é¾ä¸ç short-sectors èåææäºä¸ä¸ªå®æ´ç short-stream\n\nå°è¿éï¼æä»¬å¤§æ¦å¯ä»¥æ³å°ä¸ºäºè§£æ CFB ç»æï¼éè¦ç¥éä»¥ä¸å ä¸ªåå®¹ï¼\n\n 1. Directory Entry çç»æ å å­æ¾ä½ç½®\n 2. msat è¡¨å¨æä»¶ä¸­çä½ç½®\n 3. stream å short-stream çåå²ç¹ï¼ä»ä¹æåµä¸ç¨ stream ä»ä¹æ¶åç¨ short-stream\n 4. short-sector å­å¨äºåªäº sector ä¸­\n 5. ssid å­å¨äºåªäº sector ä¸­\n\nè¿äºåå®¹å°±å­æ¾å¨ Compound File Header å Directory Entry Root ä¸­ã\n\n\n# OLE\n\nOLE, Object Linking and Embeddedã\n\nå¾®è½¯å¨ 1991 å¹´å¶å®ç OLE1.0 è§èï¼ä¸»è¦è§£å³å¤ä¸ªåºç¨ç¨åºä¹é´çéä¿¡åæ¶æ¯ä¼ éé®é¢ï¼å¾®è½¯å¸æç¬¬ä¸æ¹å¼ååè½å¤éµå®è¿ä¸ªè§èï¼ä»¥ä½¿å¨å½æ¶çWindowså¹³å°ä¸çåºç¨ç¨åºè½å¤ç¸äºåè°å·¥ä½ï¼æ´å¤§çæé«å·¥ä½æçãç¶èäºä¸æ¿è¿ï¼åªæå¾å°çè½¯ä»¶å¼ååæ¯æå®ãä¸ºæ­¤ï¼å¾®è½¯äº1993 å¹´åå¸äºæ°çè§è OLE2.0ï¼å®å¨åæçåºç¡ä¸å®åå¹¶å¢å¼ºäºä»¥ä¸åæ¹é¢çæ§è½ï¼\n\n 1. OLEèªå¨åï¼ä¸ä¸ªç¨åºæè®¡åå°æ§å¶å¦ä¸ä¸ªç¨åºçè½åã\n 2. OLEæ§ä»¶ï¼å°åçç»ä»¶ç¨åºï¼å¯åµå¥å°å¦å¤çç¨åºï¼æä¾èªå·±çä¸æåè½ã\n 3. OLEææ¡£ï¼å®åäºæ©æçæ··åææ¡£åè½ï¼ä¸ä»æ¯æç®åé¾æ¥ååµå¥ï¼è¿æ¯æå¨ä½æ¿æ´»ãææ¾ç­åè½ã\n\nå¼ºå¤§çåè½ä½¿å¾å¾å¤çå¼ååå¼å§æ¯ææ°ç OLE ææ¯ï¼å ä¸ºå¾®è½¯å¨ OLE2.0 ä¸­å»ºç«äº COMï¼Component Object Modelå³ç»ä»¶å¯¹è±¡æ¨¡å¼ï¼è§èã\n\nOLE ç¸å³çåºç¡æ¦å¿µæï¼\n\n * å®¹å¨ï¼\n   * å®¹å¨æ¯ä¸ä¸ªå®¢æ·ç¨åºï¼å®å·æç³è¯·å¹¶ä½¿ç¨å¶å®COMç»ä»¶éè¿æ¥å£ä¸ºå¶å®ç¨åºå®ç°çåè½ï¼\n * æå¡å¨ï¼\n   * æå¡å¨éè¿ç¹å®çæ¥å£å°èªå·±å®æçä¸äºåè½ï¼æä¾ç»ä½¿ç¨èªå·±çåºç¨ç¨åºï¼ä¾å¦ç»ç¬ç¨åºæ¯ä¸ä¸ªææ¡£æå¡å¨ï¼å®æä¾åå»ºå¹¶ç¼è¾BMP å¾åçåè½ï¼ãå½æå¼Wordï¼éæ©ãæå¥ãèåä¸çãå¯¹è±¡...ãé¡¹ï¼æ¨å¯ä»¥çå°å¨æ¨çç³»ç»ä¸­å­å¨åªäºææ¡£æå¡å¨ï¼æ­¤æ¶çWordä»¥ææ¡£å®¹å¨çèº«ä»½åºç°ã\n * å¨ä½æ¿æ´»ï¼\n   * å½æ¨åå»æå¥çå¯¹è±¡ååç°Wordçèåæäºæ¹åæææ¡£æå¡å¨ç¨åºçèåï¼å¯ä»¥å¨å½åçç¯å¢ä¸ç¼è¾å¯¹è±¡ï¼è¿ç§°ä¸ºå¨ä½æ¿æ´»ã\n\nç®åçè¯´ï¼OLE æ¯ä¸ç§å¯ä»¥ç¨æ¥åå»ºå¤æææ¡£çææ¯ï¼è¿äºå¤æææ¡£å¯ä»¥åå«æ¥èªä¸åæ¸ éï¼æ°æ®æºï¼çä¿¡æ¯ï¼å¹¶ä¿çå¶åå§å±æ§ãä¾å¦ï¼ä¸ä¸ªæ¯æ OLE çææ¡£ï¼ä¾å¦wordï¼è½å¤æ¯æåµå¥çè¡¨æ ¼å¯¹è±¡ï¼å¹¶ä¸åµå¥çææ¡£ä¼ä¿çææåæ¥çå±æ§ãå¦æç¨æ·æç®ç¼è¾åµå¥çæ°æ®ï¼windows æä½ç³»ç»ä¼æ¿æ´»åæ¥çåºç¨ç¨åºï¼å¦excelï¼å¹¶è½½å¥è¿ä¸ªåµå¥çææ¡£ã\n\n\n# OLE æ ¼å¼\n\nOLE æä»¶ç Property Sets éè¿ä»¥ä¸ä¸¤ä¸ª stream å­å¨:\n\n * "\\005SummaryInformation"\n * "\\005DocumentSummaryInformation"\n\nè¿ä¸¤ä¸ª stream é½ä»¥ PropertySetStream ç»æ(è§ MS-OSHARED ç section3.2.1 )å¼å¤´ã\n\nOLEæä»¶ä¸­åå«çå¸¸è§åå®¹ä¸»è¦æï¼\n\n# 1. linked or embedded object\n\nåå«åµå¥ãé¾æ¥å¯¹è±¡çå®¹å¨ææ¡£çé»è¾å¸å±å¦ä¸å¾ï¼\n\n * OLEStream\n   * OLE2.0 ä¸­ï¼ç±å¤åææ¡£çä»¥ "\\1Ole" ä¸ºåç stream object åå«ãOLEStream structure è¡¨è¿°äºå­å¨å¯¹è±¡æ¯ç¨äº linked object è¿æ¯ embedded objectãå½æ­¤ç»ææ¯ä¸º linked object æå® storage object æ¶ï¼å®è¿æå®äºå¯¹æ­¤é¾æ¥å¯¹è±¡çå¼ç¨ã\n * CompObjStream\n   * OLE2.0 ä¸­ï¼åä¸º "\\1CompObj" çæµï¼ä¸»è¦ç¨äºæè¿° Clipboard Formatãç¨äºæ¾ç¤ºçlinked object æ embedded object çåå­ã\n * Embedded Object Native Data\n   * OLE1.0 ä¸­ï¼å¶ç± EmbeddedObject structure ç NativeData field æå®ã\n   * OLE2.0 ä¸­ï¼Native Data çæå®æ¹å¼æä»¥ä¸ä¸¤ç§ï¼å¯ä»¥äºæ¢ä½¿ç¨ï¼\n     * ç±å¤åææ¡£çä»¥ "\\1Ole10Native" ä¸ºåç stream object åå«ãå¦ OLENativeStream structure ç NativeData field ææå®ã\n     * ç± creating application åå»ºç stream objects å¯ä»¥åå« native dataãæ­¤ç±»æµå¯¹è±¡æ¯ creating application çç§æå¯¹è±¡ï¼æªå¨ææ¡£ä¸­è¯´æã\n       * creating application: An application whose data is stored in or referenced by documents from other applications.\n * Embedded Object Presentation Data\n   * ç¨äºæå®å¦ä½å¨ container application ä¸­æ¾ç¤º linked or embedded object å¯¹è±¡\n   * OLE1.0 ä¸­ï¼å¶ç± EmbeddedObject structure ç Presentation field æå®\n   * OLE2.0 ä¸­ï¼ç±å¤åææ¡£çä»¥ "\\2OlePres" ä¸ºåç¼(åè·ç3ä¸ªåè¿å¶æ°å­ï¼å¹¶ä¸æå¤åªè½æ999ä¸ªPresentations)ç stream objects æå®ãæ¯ä¸ä¸ª stream é½åå«ä¸ä¸ª OLEPresentationStream structureã\n\n# 2. å®\n\nå¸¸è§ç å® æä¸¤ç§ï¼vba å ms-excel4.0, å®ä»¬åºç°çä¸»è¦ä½ç½®æï¼\n\n * vba project\n   * office97 ~ 2003: vba project storage\n   * office2007 ~ : vbaProject.bin\n * microsoft office excel 4.0\n   * office97 ~ 2003: book\\workbook stream\n     * æ³¨ï¼ä¸»è¦éè¿ BIFF æ ¼å¼ä¿å­äº formulaãdrawing group ç­åå®¹\n   * office2007 ~ : macrosheets\n     * Microsoft 365 æ°å¢ LAMBDA function\n * macro template\n   * office2007 ~ : /[xx]/_rels/settings.xml.rels ä¸­å¼ç¨å¤é¨(è¿ç¨)æ¨¡æ¿æä»¶\n * VbaProjectStg\n   * binary powerpoint document ä¸­ç¨äºæå®ä¸ä¸ªç¨äº VBA project çç»æåå­å¨\n\n# 3. officeart\n\n * office97 ~ 2003:\n   * worddocumentãbook\\workbookã\'powerpoint document\' stream\n     * Office Drawing Binary File Format (MS-ODRAW)ï¼This file format is also known as OfficeArt.\n * office2007 ~ :\n   * TODO\n\n# 4. encryption and obfuscation\n\nè¯¦è§ Office æ ¼å¼ç®æ - Crypto\n\nè¿ééè¦æ³¨æçæ¯ vba project çä¿æ¤(å¾ç¡®è®¤)ï¼\n\n * vba project\n   * å¯ä»¥å¯¹å¶ä¸­ç stream è®¾ç½®ç¬ç«çå¯ç  (æªç¡®è®¤)\n     * VBA uses a reversible encryption algorithm for selected data.\n   * PROJECT Stream: ProjectProtectionState\n     * ProjectProtectionState: "CMG="0705D8E3D8EDDBF1DBF1DBF1DBF1"" specifies no sources are restricted access to the VBA project. The value is obfuscated by Data Encryption (section 2.4.3).\n     * ProjectPassword (section 2.3.1.16): "DPB="0E0CD1ECDFF4E7F5E7F5E7"" specifies the VBA project has no password. The value is obfuscated by Data Encryption (section 2.4.3).\n     * ProjectVisibilityState (section 2.3.1.17): "GC="1517CAF1D6F9D7F9D706"" specifies the VBA project is visible. The value is obfuscated by Data Encryption (section 2.4.3).\n     * LibName: "VBE" specifies a built in name for the VBA Automation type library.\n\n\n# VBA Project æ ¼å¼\n\nVBA project æ¯ç±ä¸ç³»å records ç»æçç»æãå¶ä¸­æ¯ä¸ª record é½å®ä¹äº project çä¸è¦ç´ ä¹ä¸çé¨ååå®¹ãæ¯ä¸ª record é½æ¯ä»¥ç»æå¼å¤´ï¼ID(2 bytes) + Size(4 bytes) + ...\n\nproject çä¸è¦ç´ æï¼project information, project references, and project items.\n\n# 1. project information\n\nole ä¸­ VBA å­å¨(storage)ç»æå¦ä¸ï¼\n\n\n\nå¶ä¸­ Project Root Storage æ¯ä¸ä¸ªç¬ç«ç storageãä¾å¦ï¼OLE æä»¶ä¸­ç Macros storageã\n\n * VBA Storage\n   * sub-structure\n     * _VBA_PROJECT Stream\n       * MUST\n       * åå«äº VBA project çåºç¡ä¿¡æ¯ï¼å¦ï¼çæ¬å·(ç¨äºå è½½æ­¤ç»æçå©ä½åå®¹) ç­\n     * dir Stream\n       * MUST\n       * ææ VBA project properties, project references, å module properties\n       * The entire stream MUST be compressed as specified in Compression\n     * "Module Stream"\n       * VBA project ä¸­çæ¯ä¸ª module å¿é¡»æ¥æä¸ä¸ª Module Stream\n       * VBA project ä¸­ modules çæºç ãæ­¤ stream çåå­ç± MODULESTREAMNAME æå®ã\n     * SRP Streams\n       * Optional\n       * æå® ç¹å®å®ç°åçæ¬ç¸å³ çæ§è½ç¼å­çæµãå¿é¡»æ¯è¯»åæ¶å¿½ç¥ãåå¥æ¶ä¸å¾åºç°ã\n * PROJECT Stream\n   * MUST\n   * VBA Project Properties, å¦ å·¥ç¨çç®å½ç»æãèæ¬ç±»åãmoduleçå¯ç¼è¾çªå£çä¿¡æ¯ç­ç­, ä»¥åä¸äº VBA project çéå ä¿¡æ¯ï¼å¦ï¼ProjectPasswordãProjectVisibilityState ç­ æ³¨ï¼[MS-OVBA] - v20200219 ç 2.3.1.3 ProjectModule æèæ¬ç±»åçç¸å³è¯´æ\n * PROJECTwm Stream\n   * Optional\n   * åå«äºç¨äº module name å¨ multibyte character set (MBCS) å UTF-16 ä¹é´äºç¸æ å°çä¿¡æ¯\n * PROJECTlk Stream\n   * Optional\n   * åå«äº VBA project ä¸­ç ActiveX controls ç license ä¿¡æ¯\n * Designer Storages\n   * Optional\n   * æ¯ä¸ª vba project ä¸­ç designer module é½å¿å®æä¸ä¸ªä¸ä¹å¯¹åºç designer storage ï¼æ­¤ storage çåå­ç± dir stream ä¸­ç¸å³ module ä¸­ç MODULESTREAMNAME record æå®ã\n   * æ¯ä¸ª designer storage å¿å®æä¸ä¸ª VBFrame Stream\n     * VBFrame Streamï¼ç¨äºæè¿° designer module çå±æ§ä¿¡æ¯ï¼æ­¤ stream çåå­å¿é¡»æ¯ä»¥ UTF-16 character 0x0003 å¼å¤´ç´§æ¥çæ¯ UTF-16 ç "VBFrame"ã\n   * å¦ææ­¤ designer æ¯ä¸ä¸ª Office Form ActiveX control, é£ä¹æ­¤ storage å¿å®åå« [MS-OFORMS] section 2ä¸­æè¿°çå¿é¡» storages å streamsã\n\n# 2. project references\n\ndir Stream ä¸­ç records åå«äº VBA project å¯¹å¤é¨èµæºå¼ç¨çä¿¡æ¯ãä¸»è¦æä¸ç±»ï¼REFERENCECONTROLãREFERENCEREGISTEREDãREFERENCEPROJECTã\n\n# 3. project items\n\nVBA project åå«ä¸ç³»åç¨äºåµå¥ macros ç project itemsãè project item æ¯ç±å¤ä¸ª records ç»åå®ä¹ãä¸»è¦æä»¥ä¸ 5 ç§ project item(è¯¦è§ MS-OVBA ææ¡£): project package, document modules, procedural modules, class modules å designer modulesã\n\n# 4. pcode\n\nå®å¹¶ä¸å¹¿ä¸ºäººç¥ï¼ä¸è¬æ¥è¯´ VBA ç¼åçå®ä»¥ä¸ç§ä¸åçå¯æ§è¡å½¢å¼å­å¨ï¼æ¯ç§å½¢å¼é½å¯ä»¥æ¯å¨è¿è¡æ¶å®éæ§è¡çåå®¹ï¼å·ä½åå³äºå·ä½æåµ. å®ä»¬æ¯ï¼\n\n * source code\n   * è¿æ¯æä¸ºæä»¬çç¥çå½¢å¼ãä½å¤§å¤æ°æåµä¸ï¼office ä¼å®å¨å¿½ç¥æºä»£ç ã\n   * äºå®ä¸ï¼å é¤æºä»£ç æ¯å¯è½çï¼ä½å®ä»ç¶å¯ä»¥æ¯«æ é®é¢å°æ§è¡(ä» pcode)\n     * è¿ç§å¨èå©ç¨ææ¯è¢«ç§°ä¸º VBA Stomping\n * p-code\n   * å½æ¯è¡ vba èæ¬è¢«è¾å¥å° vba ç¼è¾å¨ä¸­æ¶ï¼å®ä¼ç«å³è¢«ç¼è¯æ pcode å¹¶å­å¨å°æ¨¡åæµä¸­ã pcode æ­£æ¯å¤§é¨åæ¶é´è¢«æ§è¡çä»£ç ã\n   * äºå®ä¸ï¼å³ä½¿å¨ vba ç¼è¾å¨ä¸­æå¼å®æ¨¡åçæºç ï¼æ¾ç¤ºçä¹ä¸æ¯è§£ååçæºç ï¼èæ¯åç¼è¯ææºç ç pcodeã\n   * åªæå¨ä½¿ç¨ä¸åå»ºææ¡£æ¶ä½¿ç¨ç vba çæ¬ä¸åç office çæ¬ä¸æå¼ææ¡£æ¶ï¼æä¼å°å­å¨çåç¼©æºä»£ç éæ°ç¼è¯ä¸º pcodeï¼ç¶åæ§è¡è¯¥ pcode\n   * è¿ä½¿å¾å¯ä»¥å¨æ¯æ vba çä»»ä½çæ¬ç office ä¸æå¼åå« vba çææ¡£ï¼å¹¶ä½¿åé¨çå®ä¿æå¯æ§è¡ï¼å°½ç®¡ä¸åçæ¬ç vba ä½¿ç¨ä¸å(ä¸å¼å®¹)ç pcode æä»¤ã\n * dxecodes\n   * å½ pcode è³å°è¢«æ§è¡è¿ä¸æ¬¡åï¼å®ä¼ä»¥è¿ä¸æ­¥æ è®°åå½¢å¼å­å¨å¨ææ¡£çå¶ä»å°æ¹(å¨æµä¸­ï¼å¶åç§°ä»¥ _SRP å¼å¤´ï¼åè·ä¸ä¸ªæ°å­)ãä»é£éå®å¯ä»¥æ§è¡å¾æ´å¿«ã\n   * ä½æ¯ execode çæ ¼å¼æå¶å¤æï¼å¹¶ä¸ç¹å®äºåå»ºå®ä»¬çç¹å® Office çæ¬(ä¸æ¯ VBA çæ¬)ãè¿ä½¿å¾å®ä»¬çéç¨æ§å¾å·®ã\n   * æ­¤å¤ï¼å®ä»¬çå­å¨ä¸æ¯å¿éç --- å®ä»¬å¯ä»¥è¢«å é¤å¹¶ä¸å®å°è¿è¡å¾å¾å¥½(ä» pcode)\n\nç»¼ä¸ï¼æä»¬å¯ä»¥ç¥éï¼\n\n * source çéç¨æ§æå¥½ï¼ä½åªæå¨ pcode ä¸è½ä½¿ç¨æ¶ï¼æä¼è¢«ä½¿ç¨\n * execodes çéç¨æ§æå·®ï¼ä½æ§è¡å¾æå¿«\n * p-code åæ¯æ§è¡éåº¦åéç¨æ§çæä¸­ï¼ä¹æ¯ç¨çæ¯è¾å¹¿æ³çå½¢å¼\n\nå æ­¤ï¼æä»¬æå¿è¦è§£æ pcodeï¼å·ä½å¯ä»¥åèï¼github.com/bontchev/pcodedmp\n\n\n# Microsoft Office Excel 4.0\n\nMicrosoft Office Excel 4.0, ä¸»è¦å­å¨äº MS-XLS ç book\\workbook stream ä¸­ãæ­¤ stream ä»¥ BIFF8(Binary Interchange File Format) æ ¼å¼ç»ç»åä¸ªç»èã\n\nStream ç±ä»¥ä¸å é¨åç»æï¼\n\n * Globals Substream\n   * æè¿° workbook ä¸­çå¨å±å±æ§åæ°æ®\n     * æ³¨æ LblãShrFmla æ°æ®\n * Chart Sheet Substream\n * Dialog Sheet Substream\n * Macro Sheet Substream\n * Worksheet Substream\n\nä½¿ç¨ Excel 4 Macros çä¸äºç»èï¼\n\n * ä½¿ç¨ relative named range æ¶ï¼å½æ°ä¸»ä½åç»æä¹é´çååæ ¼è·ç¦»å¿é¡»é½ç¸åï¼å¦åå¯è½ä¼è®¡ç®åºéè¯¯çç»æã\n * Office 2007 ~ ä¸­ï¼ä»»ä½å¸¦æ Excel 4 Macro çæä»¶é½å¿é¡»å¦å­ä¸ºå¯ç¨å®çå·¥ä½ç°¿ (.xlsm)ï¼å°è¯å¦å­ä¸ºæ å Excel æä»¶å°è§¦åä»¥ä¸éè¯¯æ¶æ¯:\n * ä»»ä½åå«æ°ç»çå½æ°ï¼ä¾å¦ GET.WORKSPACE(37) æ NAMES() é½åºè¯¥åå«å¨ INDEX å½æ°ä¸­: å¦ï¼=INDEX(GET.WORKSPACE(37),!A1)ï¼å¨è¿ä¸ªä¾å­ä¸­ï¼A1 åå«åºè¯¥æ£ç´¢çæ°ç»ä¸­çæ°å­ï¼ä¾å¦å¦æ A1 åå«å¼ 2ï¼å®å°è¿å GET.WORKSPACE(37) æ°ç»ä¸­çç¬¬äºé¡¹ã\n * ä½¿ç¨ Macro Worksheet æ¶ï¼å·¥ä½è¡¨è®¾ç½®ä¸ºæ¾ç¤ºå¬å¼ï¼èä¸æ¯å¬å¼çç»æãå¯ä»¥ä½¿ç¨ Ctrl + | å¨å¬å¼è§å¾åç»æè§å¾ä¹é´åæ¢ã\n\n# PtgExpãShrFmlaãArray\n\nPtgExp ä¸è¬ä¼åºç°å¨ formula çç¬¬ä¸ä¸ª rgce åç´ ãæ­¤æ¶ï¼å®è¡¨ç¤ºå½åååæ ¼æ¯ array formula æ shared formula çä¸é¨åã\n\nPtgExp.row å PtgExp.col æå®äºä¸ä¸ªå¨å½å sheet ä¸­ç cell\n\n * è¿ä¸ª cell ä¹æ¯ array formula æ shared formula çä¸é¨å\n   * ä¹å°±æ¯è¯´å¿å®æä¸ä¸ª formula record ç row == PtgExp.row && col == PtgExp.col\n     * ç´§è·çè¿ä¸ª formula record çå¿å®æ¯ä¸ä¸ª ShrFmla record æè Array record\n     * ä¹å°±æ¯è¯´è¿ä¸ª PtgExp æåäºä½¿ç¨æ­¤ array formula æ shared formula çåºåä¸­ç the first cell\n       * éå«ï¼æ¥æ PtgExp ç formula record æ»¡è¶³ï¼record.row == PtgExp.row && record.col == PtgExp.col æ¶ï¼å®åè¾¹ä¸å®è·ç ShrFmla record æ Array record\n   * è¿ä¸ª formula record å®ä¹äºåºåä¸­ä½¿ç¨ array formula æ shared formula ç the first cell\n\nShrFmla(shared formula record)\n\n * æ­¤ record åå¿å®æä¸ä¸ª formula recordï¼è¿ä¸ª formula record æå®äºä½¿ç¨æ­¤ shared formula çåºåä¸­ç the first cell\n * å¶å®ä½¿ç¨äºæ­¤ shared formula ç formula records åç»­ä¼åºç°ï¼ä½ä¸ä¸å®æ¯è¿ç»­ç\n * ä½¿ç¨äºæ­¤ shared formula ç formula records ä¼æ Formula.fShrFmla bit è¢«ç½®ä½ï¼åæ¶ Formula.cell å¿å®ä½äº ShrFmla.ref æå®çåºåå\n\nArray(array formula record)\n\n * æ­¤ record åå¿å®æä¸ä¸ª Formula recordï¼è¿ä¸ª formula record æå®äºä½¿ç¨æ­¤ array formula çåºåä¸­ç the first cell\n * å¶å®ä½¿ç¨äºæ­¤ array formula ç formula records åç»­ä¼åºç°ï¼ä½ä¸ä¸å®æ¯è¿ç»­ç\n * ä½¿ç¨äºæ­¤ array formula ç formula records å¿å®æ Formula.cell ä½äº Array.ref æå®çåºååï¼åæ¶è¿äºä½¿ç¨ array formula ç formula ç rgce å¿å®ä»¥ PtgExp å¼å¤´ã\n\n# è§£æè¿ç¨ä¸­éå°çé®é¢\n\n * RgceLoc å¯ä»¥æç§ RgceLocRel æ¥è§£æï¼ä»¥ç®åè§£ææµç¨ã\n * è§£æ formula çè¿ç¨ä¸­ï¼ä¼éå° "is part of a revision or not" çåæ¯æµç¨ï¼è¿éæ¶åä»¥ä¸ä¸ä¸ªæ¦å¿µï¼\n   * UserBView Record:\n     * fPersonalView : MUST be 0 if this is not a shared workbook.\n   * Revision Stream\n     * An instance of the Revision Stream specifies the revision logs (section 2.2.11.2) and revision records (section 2.2.11.3) for a shared workbook (section 2.2.11).\n     * The name of this stream MUST be "Revision Log". A file MUST contain at most one Revision Stream. The Revision Stream MUST exist if the workbook is a shared workbook.\n   * Revision Records\n     * a series of records. è¯¦æå¯ä»¥åè [MS-XLS] ææ¡£ã\n * external referencesï¼\n   * Supporting Link åå«äº Self-ReferencingãSame-Sheet ReferencingãExternal Workbook Referencing ç­ç­ç±»åã\n * name manager:\n   * LblRecord : (å³è name å sheet)\n     * åç½®åå­çç´¢å¼ï¼å¯è½ç± 1 æ 2 å­èè¡¨ç¤º\n     * NameParsedFormula å¯è½åºç° ptgRef3d ç ixti == 0xFFFFï¼æ­¤æ¶ï¼æ­¤æ¶çç»ææªè¢«ææ¡£è®°å½ï¼\n       * we can reproduce it: make a macro sheet in ooxml and export it to xls.\n       \n         \t\tuint8_t ptg = uint8_t(data[cce_offset] & 0x7f);\n         \t\tif (ptg == ptgRef3d || ptg == ptgRef3dA || ptg == ptgRef3dV) {\n         \t\t\tuint16_t ixti = *(uint16_t*)(data + cce_offset + 1);\n         \t\t\tif (ixti > 0xFF00 && record->cce >= 15 + 3) {\n         \t\t\t\tassert(record->itab == 0 || record->itab == 1);\n             uint16_t iscope_1base = (record->itab == 1) ? record->reserved1 : record->itab;\n         \t\t\t\tuint16_t isheet_0base_a = *(uint16_t*)(data + cce_offset + 11);\n         \t\t\t\tuint16_t isheet_0base_b = *(uint16_t*)(data + cce_offset + 13);\n         \t\t\t\tassert(isheet_0base_a == isheet_0base_b);\n         \t\t\t\tauto row = *(uint16_t*)(data + cce_offset + 15);\n         \t\t\t\tauto col = (uint16_t)*(uint8_t*)(data + cce_offset + 17);\n         \t\t\t}\n         \t\t}\n         \t}\n       \n       \n       1\n       2\n       3\n       4\n       5\n       6\n       7\n       8\n       9\n       10\n       11\n       12\n       13\n       14\n       \n * Rgce ç ACTUAL_PTG_SIZE è·å®éæåµä¸ç¬¦å\n\n\n# DOC\n\nä¸ä¸ª doc ææ¡£åºå½ç±ä»¥ä¸å ä¸ªé¨åç»æï¼\n\n 1. WordDocument stream\n    * æä¸ä¸ª FIB structure å¨æµçèµ·å§ä½ç½®\n 2. Table stream\n    * 1Table æè 0Table æµå¿å®å­å¨ãå½äºèåæ¶å­å¨æ¶ï¼base.fWhichTblStm æå®çä¸ºæææµï¼å¿½ç¥å¶ä»å³å¯ã\n    * å¦æææ¡£è¢«å å¯çè¯ï¼ä¼æä¸ä¸ª EncryptionHeader ç»æå¨æµçèµ·å§ä½ç½®ãåä¹ï¼å¦æææ¡£æ²¡æå å¯ï¼åæ­¤æµæ²¡æé¢å®ä¹çç»æã\n    * å­å¨äºææ¡£çææ¬ä¿¡æ¯\n 3. Data stream\n    * æ²¡æé¢å®ä¹çç»æï¼ä¹ä¸æ¯å¿å®å­å¨ãå®åå«çæ¯ FIB æ æä»¶çå¶å®é¨åçå¼ç¨æ°æ®ï¼ä¹å°±æ¯è¯´å¦ææ²¡æå¼ç¨æ°æ®çè¯ï¼è¿ä¸ªæµæ²¡æå­å¨çå¿è¦\n 4. ObjectPool storage\n    * Object Pool storage åå«ä¸äºç¨äºæä¹å embedded OLE objects ç storagesãå¦æææ¡£æ²¡æ embedded OLE objects æ¶ï¼æ¯ä¸ä¼åºç°æ­¤ storage çã\n    * æ¯ä¸ä¸ªä½äº ObjectPool storage ä¸­ç storage é½æä¸ä¸ª ObjInfo Stream (åä¸º "\\003ObjInfo")ï¼è¿ä¸ªæµéå­æ¾çç¨äºæè¿° embedded OLE object ä¿¡æ¯ç ODT structureã\n      * embedded OLE object ç¸å³çå¶ä»æµçæè¿°å¯ä»¥åè Embedded Object Native Data ç¸å³åå®¹\n    * æ¯ä¸ª sub-storage é½å­å¨äºä¸ä¸ªç¨æ·åµå¥(embedded)çæä»¶ãå¹¶ä¸ï¼æ¯ä¸ª sub-storage é½æ¯ä»¥: ä¸åçº¿"_" + 10ä¸ªdigits ç»æï¼å¦ _1557814583\n      * å³èå¼ç¨çå³é®è¯ï¼sprmCFOle2ãsprmCPicLocation\n 5. Summary Information\n    * Summary Information stream\n    * Document Summary Information stream\n    * Encrypt stream\n      * åä¸º encryption çæµï¼åªæå½ä»¥ä¸ä¸¤ä¸ªæ¡ä»¶åæ¶æ»¡è¶³æä¼åºç°ï¼ææ¡£è¢« RC4 CryptoAPI å å¯ï¼ å¹¶ä¸ï¼EncryptionHeader.Flags ç fDocProps æ è®°è¢«ç½®ä½\n 6. Macros stream\n    * vba project\n 7. Signature\n    * åè MS-OFFCRYPTO ä¸­çè¯´æã\n 8. Protected Content\n\n * ç± IRMDS æè¿°çæ¹å¼è¿è¡ä¿æ¤çåå®¹, å¨ MS-OFFCRYPTO ææè¿°ã\n\n\n# PPT\n\næç§ [MS-PPT] - v20210817 ï¼pageno 28 ä¸­ Part 1 ~ 11 çæè¿°ï¼å³å¯è§£åºå®æ´ç ppt ææ¡£åå®¹ã\n\næ³¨æï¼the UserEditAtom record closest to the end of the PointPower Document stream\n\nå¶ä¸­ï¼ææç¨äº presentation çææ¬é½å­å¨å¨ "PowerPoint Document" stream ä¸­ï¼ææç¨äº presentation ç images é½å­å¨å¨Pictures stream ä¸­ï¼ä¸è¿ï¼Embedded files æ²¡æå­å¨å¨ç¬ç«ç storagesï¼èæ¯è¢«èåå° "PowerPoint Document" stream ä¸­ï¼æ­¤å¤ï¼è¿äº embedded files å¨å­å¨æ¶ï¼æäºä¼è¢«åç¼©æäºå´ä¸ä¼ã\n\n# External Objects\n\nSlides å¯ä»¥åå«è¿æ¥å°å¤é¨ç objectsãæ­æ¾ ppt çäººå¯ä»¥å¨å¹»ç¯çæ¾æ æé´æ¿æ´»é¾æ¥å¯¹è±¡ä»¥è®¿é®å¤é¨èµæºãExternal Objects çä¾å­æ embedded and linked audio, linked video, embedded and linked OLE objects, ä»¥å hyperlinksã\n\nä¹å°±æ¯è¯´ Embedded or Linked Object å¨ ppt ä¸­çå­å¨å½¢å¼å°±æ¯ External Objectsã\n\næå³æ External Objects çè®°å½ï¼è¯·åé [MS-PPT] External Object Types (section 2.10) ç¸å³åå®¹ãç®åçè¯´ï¼ä¸ºäºè§£æåº External Objectsï¼æä»¬éè¦å³æ³¨ï¼\n\n * ExternalOleObjectStg 0x1011 , ç¨äºå¯¹è±¡å­å¨(å¦æænä¸ªåä¼ænä¸ªæ­¤ç±»åç record)\n * DocumentContainer 0x03E8 , ç¨äºæè¿°ææ¡£å¯¹è±¡\n   * DocInfoListContainer 0x07D0\n     * VBAInfoContainer 0x03FF\n       * VBAInfoAtom 0x0400\n   * ExObjListContainer 0x0409\n     * storage for compressed/uncompressed OLE/VBA/ActiveX control data, å¦ VbaProjectStg\n   * SoundCollectionContainer\n   * DrawingGroupContainer\n\nä¹å°±æ¯è¯´è¦é¦åæ¾å° DocumentContainerï¼\n\n1. æé  PersistDirectory\n  Current User Stream\n    CurrentUserAtom Record\n      offsetToCurrentEdit field\n  |--\x3ePowerPoint Document Stream\n  |\t\tUserEditAtom\n  |\t\t\toffsetPersistDirectory field\n  |\t\tPersistDirectoryAtom\n  UserEditAtom.offsetLastEdit (Repeat until offsetLastEdit is 0x000000)\n\n2. å®ä½ DocumentContainer\n  UserEditAtom.docPersistIdRef\n    DocumentContainer Record\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\nå³äºé´å« embedded OLE object å¯¹è±¡çå·ä½æ­¥éª¤å¯ä»¥åè [MS-PPT] 2.1.2 PowerPoint Document Stream part 9 ç¸å³åå®¹\n\nå³äºé´å« linked OLE object å¯¹è±¡çå·ä½æ­¥éª¤å¯ä»¥åè [MS-PPT] 2.1.2 PowerPoint Document Stream part 10 ç¸å³åå®¹\n\n\n# XLS\n\nä¸ä¸ª xls æä»¶æå¤åªè½ä¸ä¸ª Component Object Streamã ä¸ä¸ª xls æä»¶æå¤åªè½ä¸ä¸ª OLE Streamã ä¸ä¸ª xls æä»¶æå¤åªè½ä¸ä¸ª Control Streamã\n\nWorkBook stream ä¸­å­å¨äº excel ä¸­ææç text å formulasã\n\n# Embedded or Linked Object\n\nå¨ Excel ç workbook ä¸­åµå¥ä¸ä¸ªæä»¶çè¯ï¼è¿äºæä»¶ä¼è¢«å­å¨å¨åä¸º "MBD + éæºç8ä¸ªåå­è¿å¶æ°å­" ç Embedding Storages ä¸­ã\n\næ¯ä¸ª Embedding Storage é½è¡¨ç¤ºäºä¸ä¸ªåºäº storage-based æä¹åç embedded OLE object æ ActiveX control å¯¹è±¡ãåæ¶ï¼æä¹åå¨ Embedding Storage çå¯¹è±¡å¿å®æä¸ä¸ªç¸å³èç Obj record å¨ worksheet substreamãmacro sheet substream æ dialog sheet substream ä¸­ï¼å¹¶ä¸ cmo.ot == 8ï¼pictFlags.fPrstm == pictFlags.fDde == 0ã\n\nä¸è¿ä¸åç±»åçæä»¶å¨ Embedding Storage ä¸­çå½¢å¼æäºä¸ä¸æ ·ï¼å¦ï¼\n\n 1. å¦æ embedded file æ¯å¦å¤ä¸ä¸ª binary Office document, é£ä¹è¿ä¸ª embedded file ä¸­ç storages å streams ä¼è¢«å½æå¯¹åºçèç¹åæ ·å­å¨å¨ MDB storage ä¸­\n 2. å¦æ embedded file æ¯ä¸ä¸ª Open XML document, é£ä¹è¿ä¸ª embedded file ä¼è¢«å®æ´å­å¨å¨åä¸º "Package" ç stream ä¸­\n\nä¸ä¸ª Link Storage æå®ä¸ä¸ª linked OLE object åä»»æå¶ä»çé»è®¤æ°æ®æè¡¨ç¤ºä¸ºå¶å»ºç«çç¼å­ãå®çåå­å¿å®æ¯ç±ï¼"LNK" + 8ä¸ªåå­è¿å¶æ°å­ æ è¯ãæä¹åå¨ Link Storage çå¯¹è±¡å¿å®æä¸ä¸ªç¸å³èç Obj record (Obj.pictFmla.lPosInCtlStm)å¨ worksheet substreamãmacro sheet substream æ dialog sheet substream ä¸­ï¼å¹¶ä¸ cmo.ot == 8ï¼pictFlags.fPrstm == pictFlags.fDde == 0ã\n\n\n# OOXML\n\nOOXML(Office Open XML File Formats), ç®åæ¥è¯´ï¼OOXML æ¯ä¸ä¸ªåºäº XML çææ¡£æ ¼å¼æ åï¼ææ©æ¯å¾®è½¯ Office2007 çäº§åå¼åææ¯è§èï¼åæ¯æä¸º Ecma(ECMA-376) çæ åï¼æåæ¹è¿æ¨å¹¿æä¸ºäº ISO å IEC (as ISO/IEC 29500) çå½éææ¡£æ ¼å¼æ åãä¹å°±æ¯è¯´ï¼éè¿ OOXML æ åï¼æä»¬è½å¤å¨ä¸ä¾èµ Office äº§åçæåµä¸ï¼å¨ä»»ä½å¹³å°è¯»åOffice Wordï¼PPT å Excel æä»¶ã\n\nOOXML çä¸»è¦ç®å½ç»æå¦ä¸æç¤ºï¼\n\nOOXML\nâââ [Content_Types].xml // æè¿°ææ¡£åä¸ªé¨åçContentTypeï¼åå©è§£æææ¡£\nâ           \nââ docProps        // ms-office éè¦æ­¤åå®¹ä»¥æå¼æä»¶ï¼è wps ä¸éè¦\nâ   âââ app.xml    //ç¨åºçº§å«çææ¡£å±æ§ï¼å¦ï¼é¡µæ°ãææ¬è¡æ°ãç¨åºçæ¬ç­\nâ   âââ core.xml   //ç¨æ·å¡«åçææ¡£å±æ§ï¼å¦ï¼æ é¢ãä¸»é¢ãä½èç­\nâ\nââ _rels\nâ   âââ .rels      //æè¿°åä¸ªé¨åä¹é´çå³ç³»\nâ\nââ word / xl / ppt\n    âââ document.xml     //word\n    âââ fontTable.xml    //wordï¼é¡µè\n    â\n    âââ workbook.xml     // xl\n    âââ worksheets       // xl\n    â    âââ sheet1.xml\n    âââ macrosheets      // xl, microsoft excel 4.0 macros\n    â      âââ _rels\n    â      âÂ Â  âââ sheet1.xml.rels\n    â      âââ sheet1.xml\n    |\n    |ââ presentation.xml // ppt\n    |\n    |ââ embeddings       //all, optional, å­æ¾ embedded files\n    |     âââ a\n    |     âââ b\n    â\n    |ââ vbaData.xml      //all, vbaå±æ§ï¼æ¯å¦auoopenï¼æ¯å¦å å¯\n    |ââ vbaProject.bin   //all, è®°å½ vba project ä¿¡æ¯, ole æ ¼å¼\n    |\n    ââ theme             //all, è®°å½æ ·å¼ï¼é¢è²ç¼å·ï¼å­ä½å¤§å°ç­ç­\n    â    âââ theme1.xml\n    â\n    ââ _rels             //all, relationships\n    |    âââ settings.xml.rels   // æå® æ¨¡æ¿ å¼ç¨\n    â    âââ document.xml.rels   // ä½¿ç¨ ID å URL æ¥å®ä¹ææ¡£åé¶ä»¶\n    |    âââ workbook.xml.rels   // ä½¿ç¨ ID å URL æ¥å®ä¹ææ¡£åé¶ä»¶\n    â    âââ vbaProject.bin.rels // vba\n    â \n    âââ printerSettings //all, Reference to Printer Settings Data\n    â....âââ printerSettings1.bin\n    â\n    ââ styles.xml       //all\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n\n\n\n# 1. Name Representation\n\næ è®ºæ¯ definedNames ä¸­å®ä¹çï¼è¿æ¯è¡¨æ ¼æ¾ç¤ºçåå­ï¼è¿äºéè¦å±ç¤ºçåå­é½åºå½å¨ docProps\\app.xml ä¸­ä½ä¸º Application-Defined File Properties é¨åè¢«å®ä¹ï¼å¦ä¸ï¼\n\n<TitlesOfParts>\n <vt:vector size="[0-9]+" baseType="lpstr">\n  <vt:lpstr>Sheet1</vt:lpstr>\n  <vt:lpstr>Sheet2</vt:lpstr>\n  <vt:lpstr>Sheet3</vt:lpstr>\n  <vt:lpstr>value1</vt:lpstr>\n  <vt:lpstr>value2</vt:lpstr>\n </vt:vector>\n</TitlesOfParts>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# 2. Cell References & Name\n\nexcelä¸­å¯ä»¥ç» å½æ°ãcellãsheetãçè³ä»»æä¸æ®µææ¬æå¾å½¢ç­å®ä¹åå­(ä¹è¢«ç§°ä¸º bookmark)ï¼å¹¶éè¿åå­æ¥å¼ç¨å¯¹åºçåå®¹ï¼å¼ç¨æ¹å¼åè\n\n * ECMA-376-Fifth-Edition-Part-1 --- 18.17.2.3 Cell References\n * ECMA-376-Fifth-Edition-Part-1 --- 18.17.2.5 Names\n\nname çç»æå½¢å¼ï¼\n\nname = [ workbook-name, "!" ], [letter | "_" | "\\"], [ letter | decimal-digit | "_" | "." ] ;\n\n\n1\n\n\nå¶ä¸­ name ä¸è½åå«ä»¥ä¸å ç§æ ¼å½¢å¼ï¼\n\n * TRUE or FALSE\n * user-defined-function-name\n * cell-reference\n\nfunction-name çç»æå½¢å¼ï¼\n\nfunction-name= prefixed-function-name | predefined-function-name | user-defined-function-name ;\n\npredefined-function-name= "ABS" | "ACOS" | "ACOSH" | ( any of the other functions defined in Â§18.17.7) ;\nprefixed-function-name= "ISO.", predefined-function-name | "ECMA.", predefined-function-name ; \nuser-defined-function-name= letter, [ letter | decimal-digit | "." ] ;\n\n\n1\n2\n3\n4\n5\n\n\nå¶ä¸­ function-name ä¸è½åå«ä»¥ä¸å ç§æ ¼å½¢å¼ï¼\n\n * TRUE or FALSE\n * name\n * cell-reference\n\nCell Reference çå½¢å¼æä¸¤ç§ï¼R1C1-Style å A1-Style\n\noperator æä»¥ä¸å ç§æ ¼å¼ï¼\n\n":" | comma | space | "^" | "*" | "/" | "+" | "-" | "&" | "=" | "<>" | "<" | "<=" | ">" | ">=" | "%" ;\n\n\n1\n\n\n\n# 3. Formulas and expressions\n\n * ECMA-376-Fifth-Edition-Part-1 --- 17.16.3 Formulas and expressions\n\nA field instruction can involve a calculation via a formula, which is simply an expression that is an arbitrary complex arithmetic expressionï¼å¦ï¼\n\n<sheetData>\n\t\t<row r="2" spans="4:4" x14ac:dyDescent="0.25">\n\t\t\t<c r="D2" s="1" t="b">\n\t\t\t\t<f>FORMULA()=FORMULA()=FORMULA(\'Buk1\'!E11,\'Buk2\'!B12)=FORMULA(\'Buk2\'!H5,\'Buk3\'!H3)=FORMULA(\'Buk3\'!C9,\'Buk4\'!C2)=FORMULA(\'Buk4\'!I8,\'Buk5\'!F2)=FORMULA(\'Buk5\'!B12,\'Buk6\'!B10)=FORMULA(\'Buk6\'!G3,\'Buk7\'!I2)=FORMULA(\'Buk7\'!D13,\'Buk1\'!A3)=FORMULA(\'Buk3\'!H3&amp;\'Ss1\'!O6&amp;\'Ss1\'!D16&amp;\'Ss1\'!K13&amp;\'Ss1\'!R12&amp;\'Ss1\'!R14,D3)=FORMULA(\'Buk3\'!H3&amp;\'Buk7\'!I2&amp;\'Buk4\'!C2&amp;\'Buk5\'!F2&amp;\'Buk5\'!F2&amp;Ss1br2!B3&amp;\'Buk1\'!A3&amp;Ss1br2!D5&amp;\'Buk6\'!B10&amp;Ss1br2!G3&amp;\'Buk7\'!I2&amp;\'Buk7\'!I2&amp;Ss1br2!B9,D17)</f>\n\t\t\t\t<v>1</v>\n\t\t\t</c>\n\t\t</row>\n\t</sheetData>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# MS-Office çå¶ä»å½¢å¼\n\nä½¿ç¨ MS-Office è½¯ä»¶å¯ä»¥å° office æä»¶éè¿"å¦å­ä¸º"ä¿å­ä¸º xmlãmhtmlãhtml ç­æ ¼å¼çææ¬æä»¶ï¼å¹¶ä¸ï¼å¯ä»¥åæ¬¡éè¿ MS-Office è½¯ä»¶æå¼ãç¼è¾ã\n\nå¦å¤ï¼è¿äºè½¬æ¢èæçææ¬ç±»åçææ¡£ï¼è¢«å å¯åï¼æ¯ä¸ä¸ª ole æä»¶ã\n\nè¢«è½¬æ¢èæç xml æä»¶ï¼å¨ç»æä¸ä¿æäºè· binary å½¢å¼ç office æä»¶ä¸è´ï¼å¹¶ä¸ä¸ä¸å¯¹åºãå¦ï¼contentType ä¸º "application/vnd.ms-office.vbaProject" ç binaryData æ°æ®, å°±æ¯äºè¿å¶å½¢å¼ç vbaProject åå®¹ base64 åçç»æã\n\nè¿éè¦æ³¨æçæ¯ï¼å¨è§£æ binData ç±»åçæ°æ®æ¶ï¼å¯è½ä¼éå° mso(ActiveMine) æä»¶ãè¿æ¯ä¸ç§æä»¶åä¸º *.mso åæ¶ MIME Types ä¸º application/x-mso çç»ææªå¬å¼çæä»¶æ ¼å¼(åè activemime-format )ã\n\nMSOæä»¶æ¯å°Microsoft Officeææ¡£ä¿å­ä¸ºç½é¡µæ¶åå»ºçå®å¼ç¨æä»¶ãå®åå«æå³åå§æä»¶ä¸­åå«çå®åOLEï¼å¯¹è±¡é¾æ¥ååµå¥ï¼å¯¹è±¡çä¿¡æ¯ï¼å¹¶ä¸å¯ä»¥è¢«åå»ºçç½é¡µä½ä¸ºæ ·å¼è¡¨å¼ç¨ãMSOæä»¶å¯ä»¥ç¨ææ¬ç¼è¾å¨æ¥çï¼ä½ç±äºåå®¹æ¯ç¼ç çï¼å æ­¤æ æ³è¯»åãå¤§å¤æ°ç¨æ·åªä¼å°MSOæä»¶ä½ä¸ºçµå­é®ä»¶çéä»¶ã\n\n\n# RTF\n\nå¯ææ¬æ ¼å¼ï¼Rtfï¼rich text tormatï¼æ¯å¾®è½¯çææ¬åå¾åä¿¡æ¯äº¤æ¢æå®çæ ¼å¼ãRtfæä»¶å¯ä»¥ååä¸ºæä»¶å¤´åææ¡£åºä¸¤ä¸ªé¨åç»æãæä»¶å¤´åææ¡£åºç±ææ¬ãæ§å¶å­åæ§å¶ç¬¦ç»æï¼åæ¶å©ç¨{â¦}æ¥è¡¨æå±çº§å³ç³»ã\n\n\n# æ£åº\n\n * hash (å¿½ç¥å¤§å°åãç©ºå­ç¬¦)\n   * function\n   * stream\n * æ¨¡ç³å¹é\n   * ç®åçæ¨¡å¼å¹é\n   * eg.\n     * æç´¢å° ï¼VirtualProtectExãWriteProcessMemoryãCreateRemoteThreadãVirtualAllocEx\n     * Shell Environ$("comspec") & " /c attrib -S -h """ & Application.StartupPath & "\\K4.XLS""", vbMinimizedFocus\n     * Shell ("\\jdq\\cc$\\b.exe")\n     * If .Lines(1, 1) = "APMP" & .Lines(1, 2) <> "KILL" Then ........ End If\n     * æ··æ·çæä»¶ï¼çµ ï¼\n\n\n# æ¸ç\n\n * æ¹é¤\n   * function\n     * æ¿æ¢å½æ°åå®¹ä¸ºç©ºæ ¼\n   * stream :\n     * å° stream ç size ç½® 0ï¼åæ¶æ¹é¤ç¬¬ä¸ä¸ªæåºåå®¹ï¼æ­å¼åå®¹æåºé¾\n     * ä¸è¬æ¥è¯´ï¼åªä¿®æ¹ size å°±å¯ä»¥è®© office è½¯ä»¶æ æ³è¯»åç¸å³åå®¹ãä½å¶ä»æè½¯å¯è½ä¼ç»§ç»­æ¥æ¯ï¼æ¯ç« stream çå¶ä»ä¿¡æ¯ä¾ç¶ææï¼å¯ä»¥å¨å®¹éæåµä¸è¿ååºæ¥ malicious åå®¹ã\n     * æ³¨æï¼å¶å®é¨åå¯¹ macro çå¼ç¨ï¼å¦ï¼\n       * doc ä¸­ fcCmds ä¼éè¿ macro names å¼ç¨å¯¹åºçå®ï¼æä»¥\n         1. æ ¹æ®éè¦å° document æµä¸­ç fcCmds å lcbCmds æå¼ç¨çæ°æ®\n         2. ç²æ´çå° document æµä¸­ç fcCmds å lcbCmds é½ç½®ç©º\n * è¿å\n   * è¿åè¢«å å¯ç ´åçæä»¶åå®¹\n     * çæ¯æææ¶æ¯ææºä¼æä½åæçæ­£å¸¸ vba èæ¬çï¼æ¯å¦ï¼å å¯ï¼ç®åè¿æ²¡è§å°æ­¤ç±»æ ·æ¬ï¼ã\n\n\n# Reference\n\n * MS-Office-Extensions\n\n * MS-Office File Formats\n\n * [MS-OVBA] - v20210817\n\n * [MS-OFFCRYPTO] - v20210817\n\n * [MS-XLS] - v20210817\n\n * [MS-DOC] - v20210817\n\n * [MS-PPT] - v20210817\n\n * [MS-OLEDS] - v20210625\n\n * Introducing the Office (2007) Open XML File Formats\n\n * Microsoft Office Excel 97 - 2007 Binary File Format (.xls) Specification\n\n * OLE1.0 and OLE2.0 Formats\n\n * Microsoft Office Word 2003\n   \n   * Microsoft Office Word 2003 Preview\n   * The XML Files: XML in Microsoft Office Word 2003\n\n * [ç¿»è¯]æ»å»äºéæ§-ä»¥OLEä¸ºä¾\n   \n   * Attacking Interoperability: An OLE Edition\n\n * å®çæ¯å¸¸ç¨çä¸äºtrick\n\n * Old school: evil Excel 4.0 macros (XLM)\n\n * oletools\n\n * DidierStevens\n   \n   * oledump-py\n   * oledump.py\n   * msoffcrypto-crack.py\n\n * 0xevilc0de\n   \n   * Maldoc uses template injection for macro execution\n   * Excel 4 Macros â Get.Workspace Reference\n   * Removing Passwords from VBA Projects\n   * Maldoc uses RC4 to hide PowerShell script, retrieves payload from DNS TXT record\n   * Maldoc uses Windows API to perform process hollowing\n\n * jstrosch\n   \n   * malware-samples\n\n * spiderlabs\n   \n   * spiderlabs-blog\n\n * Template Injection\n   \n   * malware-samples: Word Doc uses Template Injection\n\n * å¤åææ¡£æä»¶æ ¼å¼ç ç©¶\n\n * VelvetSweatshop: Default Passwords Can Still Make a Difference\n\n * REMnux: Analyze Documents',normalizedContent:'# office æ ¼å¼ç®æ\n\nç®åå¸¸è§ç microsoft office æ ¼å¼ä¸»è¦åä¸º 97 ~ 2003 å 2007 ~ ä¸¤ç§æ ¼å¼ãmicrosoft office 97 ~ 2003 çæä»¶æ ¼å¼é½æ¯ç± ms-cfb ç»ææ¥è¡¨ç¤ºç ole æä»¶ãmicrosoft office 2007 ~åæ¯ç± ooxml æ ¼å¼çæä»¶ç»æåç¼©èæç zip åæ¥å­å¨ã\n\nè ooxml åæ¯ä»¥ xml æä»¶ä¸ºåºç¡çï¼æä»¥ï¼æ¦æ¬çè¯´ï¼officeææ¡£ä¸»è¦åºäº oleãxmlãooxml è¿ä¸ç§æä»¶æ ¼å¼æå»ºèµ·æ¥çã\n\nå¸¸è§çæä»¶æ©å±åä»¥åç¨éå¦ä¸ï¼\n\nextensions       usage                                          remark\ndocãxlsãppt      å±äº 97-2003 ç office                            \ndocxãxlsxãpptx   å±äº 2007 ~ ç office ææ¡£ï¼ä½æ²¡æå¯ç¨å®                   \ndocmãxlsmãpptm   å±äºå¯ç¨äºå®ç 2007 ~ ç office ææ¡£ï¼å¯ä»¥å­å¨ visual basic   \n                 applicationsï¼vbaï¼å®ä»£ç \nppsx             æ¯ 2007 ç ppt çä¸ç§æ ¼å¼ï¼æå¼å°±æ¯å¹»ç¯çæ­æ¾æ¨¡å¼                 \n\næç§æä»¬å¸¸è§çè®¤ç¥ï¼ä¸ä¸ªææ¡£åºå½åå«ä»¥ä¸å ä¸ªé¨åï¼\n\n 1. ææ¡£åå®¹\n    * å¯è½æ¶åå¯¹ embedded objects æ external objects çå¼ç¨\n    * ææ¡£çå±ç¤ºç¸å³ï¼å­ä½ãé¡µé¢å¤§å°ãæå°æ¹å¼ç­ç­\n 2. ææ¡£å·¥å·\n    * ä¸ºäºæ´å¥½ãæ´æ¹ä¾¿çæä½ææ¡£åå®¹è¿è¡ç¼è¾ãå±ç¤ºãæç¤ºä»¥åå¶ä»åè½ï¼èæä¾çä¸äºè·ææ¡£ç¸å³çç»ä»¶ï¼å¦ vbaãformulaãanimation ç­ç­\n 3. ææ¡£å±æ§\n    * å¦ï¼åä½æ¶é´ãä½èãæåä¿®æ¹æ¶é´ç­ç­\n 4. ä¿æ¤æªæ½\n    * ç­¾å\n    * è¯»(æå¼)ãå ä¿æ¤\n\n\n# ä¸ãmalware\n\nç±äº ms-office æä»¶çå¹¿æ³ä½¿ç¨ï¼æ¶æè½¯ä»¶ä½èå¯¹å¶è¿è¡äºååçææãå©ç¨ï¼å¬çåºäºä¸ç³»åéå¯¹è¿äºææ¡£ççæ¯ï¼æä¸­å¸¸å¸¸è¢«ç¨äºæ¶æç®ççç»ä»¶æèæ¹å¼æï¼å®çæ¯ãæ¼æ´å©ç¨ãåµå¥æä»¶\n\n\n# 1.1 æ¼æ´\n\næ¼æ´å©ç¨æ¯æè½¯ä»¶èªèº«ç¼ºé·è¢«æ»å»èå©ç¨æ¥æ§è¡é«å±å¨ä½ï¼å¦å©ç¨ ole çç¹ç¹è°ç¨ç¬¬ä¸æ¹ç»ä»¶å¹¶æ§è¡ï¼æ æº¢åºé æçä»»æä»£ç æ§è¡æ¼æ´(cve-2017-11882) ç­ç­ï¼å¸¸è§çæ¼æ´æï¼\n\n * cve-2017-11882\n * cve-2018-0802\n * cve-2019-0801\n * cve-2021-40444\n\n\n# 1.2 å®çæ¯\n\nå®ï¼macroï¼æ¯ ms-office æä¾çä¸ç§å©ç¨ä¸ç³»åç¬ç«ç office å½ä»¤æ¥å®ç°ä»»å¡æ§è¡çèªå¨åï¼ä»¥ç®åæ¥å¸¸å·¥ä½çå·¥å·ãå½åç ms-office æ¯ä½¿ç¨ visual basic for applicationsï¼vbaï¼ç¼åçï¼å®æ¯ microsoft ç visual basic ç¼ç¨è¯­è¨ä¸é¨ä¸º office æå¡çä¸ç§åä½ãvba å¯å¨å¤§å¤æ° office ç¨åºä¸­ä½¿ç¨ï¼ä¾å¦ accessï¼excelï¼outlookï¼powerpointï¼projectï¼publisherï¼visio å word ç­ç­ã\n\nå®çæ¯ä¸»è¦æ¯å©ç¨ å® æ¥è¿è¡ææåä¼ æ­ãå®å©ç¨å®è¯­è¨çåè½å¯å­å¨ææ¡£ææ¨¡æ¿ä¸­ï¼ä¸æ¦å¸¦æå®çæ¯çææ¡£è¢«æå¼ï¼å®å°±å¯è½ä¼æ§è¡ï¼èå®çæ¯å°±ä¼è¢«æ¿æ´»ã\n\nå®çä¸»è¦ææè·¯å¾å¤§è´å¦ä¸ï¼åä¸ªofficeææ¡£ => officeææ¡£æ¨¡æ¿ => å¤ä¸ªofficeææ¡£ã\n\nå¸¸è§çå®ä¸»è¦å­å¨äºä»¥ä¸ä¸¤ç§å½¢å¼(vba && xlm)ï¼\n\næ­¤å¤ï¼è¿æä¸ç§æ»å»æ¹å¼è¢«ç§°ä¸ºãæ¨¡æ¿æ³¨å¥ãï¼å®éä¸è¿æ¯ä¸è¿°ä¸¤ç§ macros çå©ç¨ï¼ä¸è¿åå®¹å¯è½ä¼éæ¶åçåå\n\n * \n\næ­¤å¤ï¼å®çæ¯å¸¸å¸¸ç¨ä»¥ä¸æ¹å¼ä¿æ¤ãéèèªå·±ï¼\n\n 1. ç¦æ­¢æç¤ºä¿¡æ¯\n\non error resume next                     \'å¦æåçéè¯¯ï¼ä¸å¼¹åºåºéçªå£ï¼ç»§ç»­æ§è¡ä¸é¢è¯­å¥\napplication.displayalerts = wdalertsnone \'ä¸å¼¹åºè­¦åçªå£\napplication.displaystatusbar = false     \'ä¸æ¾ç¤ºç¶ææ ï¼ä»¥åæ¾ç¤ºå®çè¿è¡ç¶æ\noptions.virusprotection = false          \'å³é­çæ¯ä¿æ¤åè½ï¼è¿è¡åå¦æåå«å®ï¼ä¸æç¤º\n\n\n1\n2\n3\n4\n\n 2. å±è½å½ä»¤èåï¼ä¸è®¸æ¥çå®\n\n\' disableæèå é¤ç¹å®èåé¡¹ï¼ç¨æ¥ä½¿âå·¥å·âå®âèåå¤±æçè¯­å¥ï¼\ncommandbars(âtoolsâ).controls(16).enabled = false\n\n\n1\n2\n\n 3. éèå®ççå®ä»£ç \n\n * å¨âèªå¨å®âä¸­ï¼ä¸åæ¬ä»»ä½æææç ´åçä»£ç ï¼ä½åå«äºåå»ºãæ§è¡åå é¤æ°å®ï¼å®éè¿è¡ææåç ´åçå®ï¼çä»£ç ï¼å°å®ä»£ç å­ä½é¢è²è®¾ç½®æä¸èæ¯ä¸æ ·çç½è²ç­\n * âèªå¨å®â æ¯æå©ç¨ autoexecãautonewãautoopenãautocloseãautoexit èªå¨è§¦åæ§è¡çå®\n\n 4. ææ¡£å¯ç ä¿æ¤\n\n * æå¼ææ¡£æ¶éè¦å¯ç  æè æ¥çvbaèæ¬æ¶éè¦å¯ç \n\nå¦å¤ï¼çæ¯ä½èå¸¸ç¨å¯ç éé¸ææ®µä»¥å¢å æ£æµé¾åº¦ï¼äºå®ä¸ä¹å¾ææãè¿ç§æ¹æ³çå¨ç§°æ¯ï¼velvetsweatshop default password ployã\n\n * å¯¹è±¡ï¼excel 4.0 xls 97 ~ files with a compromised macro\n * è¡¨ç°ï¼xls files appear password protected but arenât, opening automatically to install malware from compromised macros.\n * åå ï¼excel ä¼é¦åå°è¯ä½¿ç¨é»è®¤å¯ç  \'velvetsweatshop\' ä»¥ read-only æ¨¡å¼æå¼æä»¶ï¼å¦æå¤±è´¥æ¶ï¼ååç¨æ·è¦æ±è¾å¥å¯ç ã(this read-only technique has been known about for over 10 years.)\n * reference\n   * https://threatpost.com/hackers-update-age-old-excel-4-0-macro-attack/154898/\n\n\n# 1.3 embedded\n\nå©ç¨å¤åææ¡£å¯ä»¥ååµå¶å®ææ¡£çç¹æ§ï¼å¯ä»¥åµå¥å¦ï¼\n\n * imagesãvideoãaudio\n * other streams, eg. rtfãpdfãdocx ... (rtfãdocxç­å¤åææ¡£åå¯ä»¥ç»§ç»­åµå¥... my god ~)\n\n\n# äºãms-cfb\n\nç»å¸¸è¢«ç§°ä¸º ole(object linking and embedded)ï¼å®éä¸ ole (æ¯ä¸ç§é¢åå¯¹è±¡çææ¯)åå«çåå®¹æ´å¤ï¼æ¯ com ææ¯çåºç¡ï¼è cfb åªæ¯ ole ä¸­å³äºæä»¶æ ¼å¼çä¸ç§æè¿°ã\n\nå¤åææ¡£çç©çç»ææ¯è¾ç®åï¼\n\n * \n\næ³¨æï¼compound file header (512 bytes)ä¹ä¼ç¬å ä¸ä¸ª sector, æ²¡æç¨å°çå°æ¹å¡«å 0.\n\nè¿éæ¯é»è¾ç»æï¼\n\n * \n\nææ¡£ä¸­çåå®¹é½ä»¥ stream æ¥ä¿æå·ä½åå®¹ï¼storage æ¥ç»ç» stream çç»æãèè¿äºåå®¹å¨æä»¶ä¸­çä½ç½®ãæ¥æ¾æ¹å¼ãè§£è¯»æ¹å¼ï¼å°±ç± directory entry array æ¥è¡¨è¾¾ã\n\nå¤åææ¡£çç»æéå¸¸ç±»ä¼¼ fat æä»¶ç³»ç»ï¼storage ç¸å½äº directoryï¼stream ç¸å½äº fileãä¸ºäºæä»¶çå¿«éå®ä½ï¼æä»¬éè¦ç¸åºçååºç´¢å¼è¡¨(difat å fat)ãå¨ å¤åææ¡£ä¸­ï¼ä¸ºäºèçç©ºé´ï¼ä¼å° sector ååæç­é¿ç short-sector ç¨äºå°å¯¹è±¡(short-stream)çå­å¨ï¼èå®çç´¢å¼éè¦ mini-fatã\n\nç±äº cfb æä»¶ç± sectors ç»æï¼è¿éç»ä¸ç§°å¼ä¸ºï¼\n\n * msat (master sector allocation table)ï¼åå difat\n * sat (sector allocation table)ï¼åå fat\n * ssat (short-sector allocation table)\n * stream\n * short_stream\n\nä»ä»¬çåè½å¦ä¸ï¼\n\n * msat è¡¨åå«äºç¨äºæé  sat è¡¨ç sectors ç sid\n * sat è¡¨åå«äºå¾å¤ sid é¾(æç¹å®ç sid æ è¯é¾æ¡ç»æ)\n   * æ¯ä¸ª sid é¾ä¸ç sectors èåææäºä¸ä¸ªå®æ´ç object (å¦ï¼streamãstorageãdirectory entry arrayãssat ...)çç©çå­å¨ã\n * ssat è¡¨åå«äºå¾å¤ ssid é¾(æç¹å®ç ssid æ è¯é¾æ¡ç»æ)\n   * æ¯ä¸ª ssid é¾ä¸ç short-sectors èåææäºä¸ä¸ªå®æ´ç short-stream\n\nå°è¿éï¼æä»¬å¤§æ¦å¯ä»¥æ³å°ä¸ºäºè§£æ cfb ç»æï¼éè¦ç¥éä»¥ä¸å ä¸ªåå®¹ï¼\n\n 1. directory entry çç»æ å å­æ¾ä½ç½®\n 2. msat è¡¨å¨æä»¶ä¸­çä½ç½®\n 3. stream å short-stream çåå²ç¹ï¼ä»ä¹æåµä¸ç¨ stream ä»ä¹æ¶åç¨ short-stream\n 4. short-sector å­å¨äºåªäº sector ä¸­\n 5. ssid å­å¨äºåªäº sector ä¸­\n\nè¿äºåå®¹å°±å­æ¾å¨ compound file header å directory entry root ä¸­ã\n\n\n# ole\n\nole, object linking and embeddedã\n\nå¾®è½¯å¨ 1991 å¹´å¶å®ç ole1.0 è§èï¼ä¸»è¦è§£å³å¤ä¸ªåºç¨ç¨åºä¹é´çéä¿¡åæ¶æ¯ä¼ éé®é¢ï¼å¾®è½¯å¸æç¬¬ä¸æ¹å¼ååè½å¤éµå®è¿ä¸ªè§èï¼ä»¥ä½¿å¨å½æ¶çwindowså¹³å°ä¸çåºç¨ç¨åºè½å¤ç¸äºåè°å·¥ä½ï¼æ´å¤§çæé«å·¥ä½æçãç¶èäºä¸æ¿è¿ï¼åªæå¾å°çè½¯ä»¶å¼ååæ¯æå®ãä¸ºæ­¤ï¼å¾®è½¯äº1993 å¹´åå¸äºæ°çè§è ole2.0ï¼å®å¨åæçåºç¡ä¸å®åå¹¶å¢å¼ºäºä»¥ä¸åæ¹é¢çæ§è½ï¼\n\n 1. oleèªå¨åï¼ä¸ä¸ªç¨åºæè®¡åå°æ§å¶å¦ä¸ä¸ªç¨åºçè½åã\n 2. oleæ§ä»¶ï¼å°åçç»ä»¶ç¨åºï¼å¯åµå¥å°å¦å¤çç¨åºï¼æä¾èªå·±çä¸æåè½ã\n 3. oleææ¡£ï¼å®åäºæ©æçæ··åææ¡£åè½ï¼ä¸ä»æ¯æç®åé¾æ¥ååµå¥ï¼è¿æ¯æå¨ä½æ¿æ´»ãææ¾ç­åè½ã\n\nå¼ºå¤§çåè½ä½¿å¾å¾å¤çå¼ååå¼å§æ¯ææ°ç ole ææ¯ï¼å ä¸ºå¾®è½¯å¨ ole2.0 ä¸­å»ºç«äº comï¼component object modelå³ç»ä»¶å¯¹è±¡æ¨¡å¼ï¼è§èã\n\nole ç¸å³çåºç¡æ¦å¿µæï¼\n\n * å®¹å¨ï¼\n   * å®¹å¨æ¯ä¸ä¸ªå®¢æ·ç¨åºï¼å®å·æç³è¯·å¹¶ä½¿ç¨å¶å®comç»ä»¶éè¿æ¥å£ä¸ºå¶å®ç¨åºå®ç°çåè½ï¼\n * æå¡å¨ï¼\n   * æå¡å¨éè¿ç¹å®çæ¥å£å°èªå·±å®æçä¸äºåè½ï¼æä¾ç»ä½¿ç¨èªå·±çåºç¨ç¨åºï¼ä¾å¦ç»ç¬ç¨åºæ¯ä¸ä¸ªææ¡£æå¡å¨ï¼å®æä¾åå»ºå¹¶ç¼è¾bmp å¾åçåè½ï¼ãå½æå¼wordï¼éæ©ãæå¥ãèåä¸çãå¯¹è±¡...ãé¡¹ï¼æ¨å¯ä»¥çå°å¨æ¨çç³»ç»ä¸­å­å¨åªäºææ¡£æå¡å¨ï¼æ­¤æ¶çwordä»¥ææ¡£å®¹å¨çèº«ä»½åºç°ã\n * å¨ä½æ¿æ´»ï¼\n   * å½æ¨åå»æå¥çå¯¹è±¡ååç°wordçèåæäºæ¹åæææ¡£æå¡å¨ç¨åºçèåï¼å¯ä»¥å¨å½åçç¯å¢ä¸ç¼è¾å¯¹è±¡ï¼è¿ç§°ä¸ºå¨ä½æ¿æ´»ã\n\nç®åçè¯´ï¼ole æ¯ä¸ç§å¯ä»¥ç¨æ¥åå»ºå¤æææ¡£çææ¯ï¼è¿äºå¤æææ¡£å¯ä»¥åå«æ¥èªä¸åæ¸ éï¼æ°æ®æºï¼çä¿¡æ¯ï¼å¹¶ä¿çå¶åå§å±æ§ãä¾å¦ï¼ä¸ä¸ªæ¯æ ole çææ¡£ï¼ä¾å¦wordï¼è½å¤æ¯æåµå¥çè¡¨æ ¼å¯¹è±¡ï¼å¹¶ä¸åµå¥çææ¡£ä¼ä¿çææåæ¥çå±æ§ãå¦æç¨æ·æç®ç¼è¾åµå¥çæ°æ®ï¼windows æä½ç³»ç»ä¼æ¿æ´»åæ¥çåºç¨ç¨åºï¼å¦excelï¼å¹¶è½½å¥è¿ä¸ªåµå¥çææ¡£ã\n\n\n# ole æ ¼å¼\n\nole æä»¶ç property sets éè¿ä»¥ä¸ä¸¤ä¸ª stream å­å¨:\n\n * "\\005summaryinformation"\n * "\\005documentsummaryinformation"\n\nè¿ä¸¤ä¸ª stream é½ä»¥ propertysetstream ç»æ(è§ ms-oshared ç section3.2.1 )å¼å¤´ã\n\noleæä»¶ä¸­åå«çå¸¸è§åå®¹ä¸»è¦æï¼\n\n# 1. linked or embedded object\n\nåå«åµå¥ãé¾æ¥å¯¹è±¡çå®¹å¨ææ¡£çé»è¾å¸å±å¦ä¸å¾ï¼\n\n * olestream\n   * ole2.0 ä¸­ï¼ç±å¤åææ¡£çä»¥ "\\1ole" ä¸ºåç stream object åå«ãolestream structure è¡¨è¿°äºå­å¨å¯¹è±¡æ¯ç¨äº linked object è¿æ¯ embedded objectãå½æ­¤ç»ææ¯ä¸º linked object æå® storage object æ¶ï¼å®è¿æå®äºå¯¹æ­¤é¾æ¥å¯¹è±¡çå¼ç¨ã\n * compobjstream\n   * ole2.0 ä¸­ï¼åä¸º "\\1compobj" çæµï¼ä¸»è¦ç¨äºæè¿° clipboard formatãç¨äºæ¾ç¤ºçlinked object æ embedded object çåå­ã\n * embedded object native data\n   * ole1.0 ä¸­ï¼å¶ç± embeddedobject structure ç nativedata field æå®ã\n   * ole2.0 ä¸­ï¼native data çæå®æ¹å¼æä»¥ä¸ä¸¤ç§ï¼å¯ä»¥äºæ¢ä½¿ç¨ï¼\n     * ç±å¤åææ¡£çä»¥ "\\1ole10native" ä¸ºåç stream object åå«ãå¦ olenativestream structure ç nativedata field ææå®ã\n     * ç± creating application åå»ºç stream objects å¯ä»¥åå« native dataãæ­¤ç±»æµå¯¹è±¡æ¯ creating application çç§æå¯¹è±¡ï¼æªå¨ææ¡£ä¸­è¯´æã\n       * creating application: an application whose data is stored in or referenced by documents from other applications.\n * embedded object presentation data\n   * ç¨äºæå®å¦ä½å¨ container application ä¸­æ¾ç¤º linked or embedded object å¯¹è±¡\n   * ole1.0 ä¸­ï¼å¶ç± embeddedobject structure ç presentation field æå®\n   * ole2.0 ä¸­ï¼ç±å¤åææ¡£çä»¥ "\\2olepres" ä¸ºåç¼(åè·ç3ä¸ªåè¿å¶æ°å­ï¼å¹¶ä¸æå¤åªè½æ999ä¸ªpresentations)ç stream objects æå®ãæ¯ä¸ä¸ª stream é½åå«ä¸ä¸ª olepresentationstream structureã\n\n# 2. å®\n\nå¸¸è§ç å® æä¸¤ç§ï¼vba å ms-excel4.0, å®ä»¬åºç°çä¸»è¦ä½ç½®æï¼\n\n * vba project\n   * office97 ~ 2003: vba project storage\n   * office2007 ~ : vbaproject.bin\n * microsoft office excel 4.0\n   * office97 ~ 2003: book\\workbook stream\n     * æ³¨ï¼ä¸»è¦éè¿ biff æ ¼å¼ä¿å­äº formulaãdrawing group ç­åå®¹\n   * office2007 ~ : macrosheets\n     * microsoft 365 æ°å¢ lambda function\n * macro template\n   * office2007 ~ : /[xx]/_rels/settings.xml.rels ä¸­å¼ç¨å¤é¨(è¿ç¨)æ¨¡æ¿æä»¶\n * vbaprojectstg\n   * binary powerpoint document ä¸­ç¨äºæå®ä¸ä¸ªç¨äº vba project çç»æåå­å¨\n\n# 3. officeart\n\n * office97 ~ 2003:\n   * worddocumentãbook\\workbookã\'powerpoint document\' stream\n     * office drawing binary file format (ms-odraw)ï¼this file format is also known as officeart.\n * office2007 ~ :\n   * todo\n\n# 4. encryption and obfuscation\n\nè¯¦è§ office æ ¼å¼ç®æ - crypto\n\nè¿ééè¦æ³¨æçæ¯ vba project çä¿æ¤(å¾ç¡®è®¤)ï¼\n\n * vba project\n   * å¯ä»¥å¯¹å¶ä¸­ç stream è®¾ç½®ç¬ç«çå¯ç  (æªç¡®è®¤)\n     * vba uses a reversible encryption algorithm for selected data.\n   * project stream: projectprotectionstate\n     * projectprotectionstate: "cmg="0705d8e3d8eddbf1dbf1dbf1dbf1"" specifies no sources are restricted access to the vba project. the value is obfuscated by data encryption (section 2.4.3).\n     * projectpassword (section 2.3.1.16): "dpb="0e0cd1ecdff4e7f5e7f5e7"" specifies the vba project has no password. the value is obfuscated by data encryption (section 2.4.3).\n     * projectvisibilitystate (section 2.3.1.17): "gc="1517caf1d6f9d7f9d706"" specifies the vba project is visible. the value is obfuscated by data encryption (section 2.4.3).\n     * libname: "vbe" specifies a built in name for the vba automation type library.\n\n\n# vba project æ ¼å¼\n\nvba project æ¯ç±ä¸ç³»å records ç»æçç»æãå¶ä¸­æ¯ä¸ª record é½å®ä¹äº project çä¸è¦ç´ ä¹ä¸çé¨ååå®¹ãæ¯ä¸ª record é½æ¯ä»¥ç»æå¼å¤´ï¼id(2 bytes) + size(4 bytes) + ...\n\nproject çä¸è¦ç´ æï¼project information, project references, and project items.\n\n# 1. project information\n\nole ä¸­ vba å­å¨(storage)ç»æå¦ä¸ï¼\n\n\n\nå¶ä¸­ project root storage æ¯ä¸ä¸ªç¬ç«ç storageãä¾å¦ï¼ole æä»¶ä¸­ç macros storageã\n\n * vba storage\n   * sub-structure\n     * _vba_project stream\n       * must\n       * åå«äº vba project çåºç¡ä¿¡æ¯ï¼å¦ï¼çæ¬å·(ç¨äºå è½½æ­¤ç»æçå©ä½åå®¹) ç­\n     * dir stream\n       * must\n       * ææ vba project properties, project references, å module properties\n       * the entire stream must be compressed as specified in compression\n     * "module stream"\n       * vba project ä¸­çæ¯ä¸ª module å¿é¡»æ¥æä¸ä¸ª module stream\n       * vba project ä¸­ modules çæºç ãæ­¤ stream çåå­ç± modulestreamname æå®ã\n     * srp streams\n       * optional\n       * æå® ç¹å®å®ç°åçæ¬ç¸å³ çæ§è½ç¼å­çæµãå¿é¡»æ¯è¯»åæ¶å¿½ç¥ãåå¥æ¶ä¸å¾åºç°ã\n * project stream\n   * must\n   * vba project properties, å¦ å·¥ç¨çç®å½ç»æãèæ¬ç±»åãmoduleçå¯ç¼è¾çªå£çä¿¡æ¯ç­ç­, ä»¥åä¸äº vba project çéå ä¿¡æ¯ï¼å¦ï¼projectpasswordãprojectvisibilitystate ç­ æ³¨ï¼[ms-ovba] - v20200219 ç 2.3.1.3 projectmodule æèæ¬ç±»åçç¸å³è¯´æ\n * projectwm stream\n   * optional\n   * åå«äºç¨äº module name å¨ multibyte character set (mbcs) å utf-16 ä¹é´äºç¸æ å°çä¿¡æ¯\n * projectlk stream\n   * optional\n   * åå«äº vba project ä¸­ç activex controls ç license ä¿¡æ¯\n * designer storages\n   * optional\n   * æ¯ä¸ª vba project ä¸­ç designer module é½å¿å®æä¸ä¸ªä¸ä¹å¯¹åºç designer storage ï¼æ­¤ storage çåå­ç± dir stream ä¸­ç¸å³ module ä¸­ç modulestreamname record æå®ã\n   * æ¯ä¸ª designer storage å¿å®æä¸ä¸ª vbframe stream\n     * vbframe streamï¼ç¨äºæè¿° designer module çå±æ§ä¿¡æ¯ï¼æ­¤ stream çåå­å¿é¡»æ¯ä»¥ utf-16 character 0x0003 å¼å¤´ç´§æ¥çæ¯ utf-16 ç "vbframe"ã\n   * å¦ææ­¤ designer æ¯ä¸ä¸ª office form activex control, é£ä¹æ­¤ storage å¿å®åå« [ms-oforms] section 2ä¸­æè¿°çå¿é¡» storages å streamsã\n\n# 2. project references\n\ndir stream ä¸­ç records åå«äº vba project å¯¹å¤é¨èµæºå¼ç¨çä¿¡æ¯ãä¸»è¦æä¸ç±»ï¼referencecontrolãreferenceregisteredãreferenceprojectã\n\n# 3. project items\n\nvba project åå«ä¸ç³»åç¨äºåµå¥ macros ç project itemsãè project item æ¯ç±å¤ä¸ª records ç»åå®ä¹ãä¸»è¦æä»¥ä¸ 5 ç§ project item(è¯¦è§ ms-ovba ææ¡£): project package, document modules, procedural modules, class modules å designer modulesã\n\n# 4. pcode\n\nå®å¹¶ä¸å¹¿ä¸ºäººç¥ï¼ä¸è¬æ¥è¯´ vba ç¼åçå®ä»¥ä¸ç§ä¸åçå¯æ§è¡å½¢å¼å­å¨ï¼æ¯ç§å½¢å¼é½å¯ä»¥æ¯å¨è¿è¡æ¶å®éæ§è¡çåå®¹ï¼å·ä½åå³äºå·ä½æåµ. å®ä»¬æ¯ï¼\n\n * source code\n   * è¿æ¯æä¸ºæä»¬çç¥çå½¢å¼ãä½å¤§å¤æ°æåµä¸ï¼office ä¼å®å¨å¿½ç¥æºä»£ç ã\n   * äºå®ä¸ï¼å é¤æºä»£ç æ¯å¯è½çï¼ä½å®ä»ç¶å¯ä»¥æ¯«æ é®é¢å°æ§è¡(ä» pcode)\n     * è¿ç§å¨èå©ç¨ææ¯è¢«ç§°ä¸º vba stomping\n * p-code\n   * å½æ¯è¡ vba èæ¬è¢«è¾å¥å° vba ç¼è¾å¨ä¸­æ¶ï¼å®ä¼ç«å³è¢«ç¼è¯æ pcode å¹¶å­å¨å°æ¨¡åæµä¸­ã pcode æ­£æ¯å¤§é¨åæ¶é´è¢«æ§è¡çä»£ç ã\n   * äºå®ä¸ï¼å³ä½¿å¨ vba ç¼è¾å¨ä¸­æå¼å®æ¨¡åçæºç ï¼æ¾ç¤ºçä¹ä¸æ¯è§£ååçæºç ï¼èæ¯åç¼è¯ææºç ç pcodeã\n   * åªæå¨ä½¿ç¨ä¸åå»ºææ¡£æ¶ä½¿ç¨ç vba çæ¬ä¸åç office çæ¬ä¸æå¼ææ¡£æ¶ï¼æä¼å°å­å¨çåç¼©æºä»£ç éæ°ç¼è¯ä¸º pcodeï¼ç¶åæ§è¡è¯¥ pcode\n   * è¿ä½¿å¾å¯ä»¥å¨æ¯æ vba çä»»ä½çæ¬ç office ä¸æå¼åå« vba çææ¡£ï¼å¹¶ä½¿åé¨çå®ä¿æå¯æ§è¡ï¼å°½ç®¡ä¸åçæ¬ç vba ä½¿ç¨ä¸å(ä¸å¼å®¹)ç pcode æä»¤ã\n * dxecodes\n   * å½ pcode è³å°è¢«æ§è¡è¿ä¸æ¬¡åï¼å®ä¼ä»¥è¿ä¸æ­¥æ è®°åå½¢å¼å­å¨å¨ææ¡£çå¶ä»å°æ¹(å¨æµä¸­ï¼å¶åç§°ä»¥ _srp å¼å¤´ï¼åè·ä¸ä¸ªæ°å­)ãä»é£éå®å¯ä»¥æ§è¡å¾æ´å¿«ã\n   * ä½æ¯ execode çæ ¼å¼æå¶å¤æï¼å¹¶ä¸ç¹å®äºåå»ºå®ä»¬çç¹å® office çæ¬(ä¸æ¯ vba çæ¬)ãè¿ä½¿å¾å®ä»¬çéç¨æ§å¾å·®ã\n   * æ­¤å¤ï¼å®ä»¬çå­å¨ä¸æ¯å¿éç --- å®ä»¬å¯ä»¥è¢«å é¤å¹¶ä¸å®å°è¿è¡å¾å¾å¥½(ä» pcode)\n\nç»¼ä¸ï¼æä»¬å¯ä»¥ç¥éï¼\n\n * source çéç¨æ§æå¥½ï¼ä½åªæå¨ pcode ä¸è½ä½¿ç¨æ¶ï¼æä¼è¢«ä½¿ç¨\n * execodes çéç¨æ§æå·®ï¼ä½æ§è¡å¾æå¿«\n * p-code åæ¯æ§è¡éåº¦åéç¨æ§çæä¸­ï¼ä¹æ¯ç¨çæ¯è¾å¹¿æ³çå½¢å¼\n\nå æ­¤ï¼æä»¬æå¿è¦è§£æ pcodeï¼å·ä½å¯ä»¥åèï¼github.com/bontchev/pcodedmp\n\n\n# microsoft office excel 4.0\n\nmicrosoft office excel 4.0, ä¸»è¦å­å¨äº ms-xls ç book\\workbook stream ä¸­ãæ­¤ stream ä»¥ biff8(binary interchange file format) æ ¼å¼ç»ç»åä¸ªç»èã\n\nstream ç±ä»¥ä¸å é¨åç»æï¼\n\n * globals substream\n   * æè¿° workbook ä¸­çå¨å±å±æ§åæ°æ®\n     * æ³¨æ lblãshrfmla æ°æ®\n * chart sheet substream\n * dialog sheet substream\n * macro sheet substream\n * worksheet substream\n\nä½¿ç¨ excel 4 macros çä¸äºç»èï¼\n\n * ä½¿ç¨ relative named range æ¶ï¼å½æ°ä¸»ä½åç»æä¹é´çååæ ¼è·ç¦»å¿é¡»é½ç¸åï¼å¦åå¯è½ä¼è®¡ç®åºéè¯¯çç»æã\n * office 2007 ~ ä¸­ï¼ä»»ä½å¸¦æ excel 4 macro çæä»¶é½å¿é¡»å¦å­ä¸ºå¯ç¨å®çå·¥ä½ç°¿ (.xlsm)ï¼å°è¯å¦å­ä¸ºæ å excel æä»¶å°è§¦åä»¥ä¸éè¯¯æ¶æ¯:\n * ä»»ä½åå«æ°ç»çå½æ°ï¼ä¾å¦ get.workspace(37) æ names() é½åºè¯¥åå«å¨ index å½æ°ä¸­: å¦ï¼=index(get.workspace(37),!a1)ï¼å¨è¿ä¸ªä¾å­ä¸­ï¼a1 åå«åºè¯¥æ£ç´¢çæ°ç»ä¸­çæ°å­ï¼ä¾å¦å¦æ a1 åå«å¼ 2ï¼å®å°è¿å get.workspace(37) æ°ç»ä¸­çç¬¬äºé¡¹ã\n * ä½¿ç¨ macro worksheet æ¶ï¼å·¥ä½è¡¨è®¾ç½®ä¸ºæ¾ç¤ºå¬å¼ï¼èä¸æ¯å¬å¼çç»æãå¯ä»¥ä½¿ç¨ ctrl + | å¨å¬å¼è§å¾åç»æè§å¾ä¹é´åæ¢ã\n\n# ptgexpãshrfmlaãarray\n\nptgexp ä¸è¬ä¼åºç°å¨ formula çç¬¬ä¸ä¸ª rgce åç´ ãæ­¤æ¶ï¼å®è¡¨ç¤ºå½åååæ ¼æ¯ array formula æ shared formula çä¸é¨åã\n\nptgexp.row å ptgexp.col æå®äºä¸ä¸ªå¨å½å sheet ä¸­ç cell\n\n * è¿ä¸ª cell ä¹æ¯ array formula æ shared formula çä¸é¨å\n   * ä¹å°±æ¯è¯´å¿å®æä¸ä¸ª formula record ç row == ptgexp.row && col == ptgexp.col\n     * ç´§è·çè¿ä¸ª formula record çå¿å®æ¯ä¸ä¸ª shrfmla record æè array record\n     * ä¹å°±æ¯è¯´è¿ä¸ª ptgexp æåäºä½¿ç¨æ­¤ array formula æ shared formula çåºåä¸­ç the first cell\n       * éå«ï¼æ¥æ ptgexp ç formula record æ»¡è¶³ï¼record.row == ptgexp.row && record.col == ptgexp.col æ¶ï¼å®åè¾¹ä¸å®è·ç shrfmla record æ array record\n   * è¿ä¸ª formula record å®ä¹äºåºåä¸­ä½¿ç¨ array formula æ shared formula ç the first cell\n\nshrfmla(shared formula record)\n\n * æ­¤ record åå¿å®æä¸ä¸ª formula recordï¼è¿ä¸ª formula record æå®äºä½¿ç¨æ­¤ shared formula çåºåä¸­ç the first cell\n * å¶å®ä½¿ç¨äºæ­¤ shared formula ç formula records åç»­ä¼åºç°ï¼ä½ä¸ä¸å®æ¯è¿ç»­ç\n * ä½¿ç¨äºæ­¤ shared formula ç formula records ä¼æ formula.fshrfmla bit è¢«ç½®ä½ï¼åæ¶ formula.cell å¿å®ä½äº shrfmla.ref æå®çåºåå\n\narray(array formula record)\n\n * æ­¤ record åå¿å®æä¸ä¸ª formula recordï¼è¿ä¸ª formula record æå®äºä½¿ç¨æ­¤ array formula çåºåä¸­ç the first cell\n * å¶å®ä½¿ç¨äºæ­¤ array formula ç formula records åç»­ä¼åºç°ï¼ä½ä¸ä¸å®æ¯è¿ç»­ç\n * ä½¿ç¨äºæ­¤ array formula ç formula records å¿å®æ formula.cell ä½äº array.ref æå®çåºååï¼åæ¶è¿äºä½¿ç¨ array formula ç formula ç rgce å¿å®ä»¥ ptgexp å¼å¤´ã\n\n# è§£æè¿ç¨ä¸­éå°çé®é¢\n\n * rgceloc å¯ä»¥æç§ rgcelocrel æ¥è§£æï¼ä»¥ç®åè§£ææµç¨ã\n * è§£æ formula çè¿ç¨ä¸­ï¼ä¼éå° "is part of a revision or not" çåæ¯æµç¨ï¼è¿éæ¶åä»¥ä¸ä¸ä¸ªæ¦å¿µï¼\n   * userbview record:\n     * fpersonalview : must be 0 if this is not a shared workbook.\n   * revision stream\n     * an instance of the revision stream specifies the revision logs (section 2.2.11.2) and revision records (section 2.2.11.3) for a shared workbook (section 2.2.11).\n     * the name of this stream must be "revision log". a file must contain at most one revision stream. the revision stream must exist if the workbook is a shared workbook.\n   * revision records\n     * a series of records. è¯¦æå¯ä»¥åè [ms-xls] ææ¡£ã\n * external referencesï¼\n   * supporting link åå«äº self-referencingãsame-sheet referencingãexternal workbook referencing ç­ç­ç±»åã\n * name manager:\n   * lblrecord : (å³è name å sheet)\n     * åç½®åå­çç´¢å¼ï¼å¯è½ç± 1 æ 2 å­èè¡¨ç¤º\n     * nameparsedformula å¯è½åºç° ptgref3d ç ixti == 0xffffï¼æ­¤æ¶ï¼æ­¤æ¶çç»ææªè¢«ææ¡£è®°å½ï¼\n       * we can reproduce it: make a macro sheet in ooxml and export it to xls.\n       \n         \t\tuint8_t ptg = uint8_t(data[cce_offset] & 0x7f);\n         \t\tif (ptg == ptgref3d || ptg == ptgref3da || ptg == ptgref3dv) {\n         \t\t\tuint16_t ixti = *(uint16_t*)(data + cce_offset + 1);\n         \t\t\tif (ixti > 0xff00 && record->cce >= 15 + 3) {\n         \t\t\t\tassert(record->itab == 0 || record->itab == 1);\n             uint16_t iscope_1base = (record->itab == 1) ? record->reserved1 : record->itab;\n         \t\t\t\tuint16_t isheet_0base_a = *(uint16_t*)(data + cce_offset + 11);\n         \t\t\t\tuint16_t isheet_0base_b = *(uint16_t*)(data + cce_offset + 13);\n         \t\t\t\tassert(isheet_0base_a == isheet_0base_b);\n         \t\t\t\tauto row = *(uint16_t*)(data + cce_offset + 15);\n         \t\t\t\tauto col = (uint16_t)*(uint8_t*)(data + cce_offset + 17);\n         \t\t\t}\n         \t\t}\n         \t}\n       \n       \n       1\n       2\n       3\n       4\n       5\n       6\n       7\n       8\n       9\n       10\n       11\n       12\n       13\n       14\n       \n * rgce ç actual_ptg_size è·å®éæåµä¸ç¬¦å\n\n\n# doc\n\nä¸ä¸ª doc ææ¡£åºå½ç±ä»¥ä¸å ä¸ªé¨åç»æï¼\n\n 1. worddocument stream\n    * æä¸ä¸ª fib structure å¨æµçèµ·å§ä½ç½®\n 2. table stream\n    * 1table æè 0table æµå¿å®å­å¨ãå½äºèåæ¶å­å¨æ¶ï¼base.fwhichtblstm æå®çä¸ºæææµï¼å¿½ç¥å¶ä»å³å¯ã\n    * å¦æææ¡£è¢«å å¯çè¯ï¼ä¼æä¸ä¸ª encryptionheader ç»æå¨æµçèµ·å§ä½ç½®ãåä¹ï¼å¦æææ¡£æ²¡æå å¯ï¼åæ­¤æµæ²¡æé¢å®ä¹çç»æã\n    * å­å¨äºææ¡£çææ¬ä¿¡æ¯\n 3. data stream\n    * æ²¡æé¢å®ä¹çç»æï¼ä¹ä¸æ¯å¿å®å­å¨ãå®åå«çæ¯ fib æ æä»¶çå¶å®é¨åçå¼ç¨æ°æ®ï¼ä¹å°±æ¯è¯´å¦ææ²¡æå¼ç¨æ°æ®çè¯ï¼è¿ä¸ªæµæ²¡æå­å¨çå¿è¦\n 4. objectpool storage\n    * object pool storage åå«ä¸äºç¨äºæä¹å embedded ole objects ç storagesãå¦æææ¡£æ²¡æ embedded ole objects æ¶ï¼æ¯ä¸ä¼åºç°æ­¤ storage çã\n    * æ¯ä¸ä¸ªä½äº objectpool storage ä¸­ç storage é½æä¸ä¸ª objinfo stream (åä¸º "\\003objinfo")ï¼è¿ä¸ªæµéå­æ¾çç¨äºæè¿° embedded ole object ä¿¡æ¯ç odt structureã\n      * embedded ole object ç¸å³çå¶ä»æµçæè¿°å¯ä»¥åè embedded object native data ç¸å³åå®¹\n    * æ¯ä¸ª sub-storage é½å­å¨äºä¸ä¸ªç¨æ·åµå¥(embedded)çæä»¶ãå¹¶ä¸ï¼æ¯ä¸ª sub-storage é½æ¯ä»¥: ä¸åçº¿"_" + 10ä¸ªdigits ç»æï¼å¦ _1557814583\n      * å³èå¼ç¨çå³é®è¯ï¼sprmcfole2ãsprmcpiclocation\n 5. summary information\n    * summary information stream\n    * document summary information stream\n    * encrypt stream\n      * åä¸º encryption çæµï¼åªæå½ä»¥ä¸ä¸¤ä¸ªæ¡ä»¶åæ¶æ»¡è¶³æä¼åºç°ï¼ææ¡£è¢« rc4 cryptoapi å å¯ï¼ å¹¶ä¸ï¼encryptionheader.flags ç fdocprops æ è®°è¢«ç½®ä½\n 6. macros stream\n    * vba project\n 7. signature\n    * åè ms-offcrypto ä¸­çè¯´æã\n 8. protected content\n\n * ç± irmds æè¿°çæ¹å¼è¿è¡ä¿æ¤çåå®¹, å¨ ms-offcrypto ææè¿°ã\n\n\n# ppt\n\næç§ [ms-ppt] - v20210817 ï¼pageno 28 ä¸­ part 1 ~ 11 çæè¿°ï¼å³å¯è§£åºå®æ´ç ppt ææ¡£åå®¹ã\n\næ³¨æï¼the usereditatom record closest to the end of the pointpower document stream\n\nå¶ä¸­ï¼ææç¨äº presentation çææ¬é½å­å¨å¨ "powerpoint document" stream ä¸­ï¼ææç¨äº presentation ç images é½å­å¨å¨pictures stream ä¸­ï¼ä¸è¿ï¼embedded files æ²¡æå­å¨å¨ç¬ç«ç storagesï¼èæ¯è¢«èåå° "powerpoint document" stream ä¸­ï¼æ­¤å¤ï¼è¿äº embedded files å¨å­å¨æ¶ï¼æäºä¼è¢«åç¼©æäºå´ä¸ä¼ã\n\n# external objects\n\nslides å¯ä»¥åå«è¿æ¥å°å¤é¨ç objectsãæ­æ¾ ppt çäººå¯ä»¥å¨å¹»ç¯çæ¾æ æé´æ¿æ´»é¾æ¥å¯¹è±¡ä»¥è®¿é®å¤é¨èµæºãexternal objects çä¾å­æ embedded and linked audio, linked video, embedded and linked ole objects, ä»¥å hyperlinksã\n\nä¹å°±æ¯è¯´ embedded or linked object å¨ ppt ä¸­çå­å¨å½¢å¼å°±æ¯ external objectsã\n\næå³æ external objects çè®°å½ï¼è¯·åé [ms-ppt] external object types (section 2.10) ç¸å³åå®¹ãç®åçè¯´ï¼ä¸ºäºè§£æåº external objectsï¼æä»¬éè¦å³æ³¨ï¼\n\n * externaloleobjectstg 0x1011 , ç¨äºå¯¹è±¡å­å¨(å¦æænä¸ªåä¼ænä¸ªæ­¤ç±»åç record)\n * documentcontainer 0x03e8 , ç¨äºæè¿°ææ¡£å¯¹è±¡\n   * docinfolistcontainer 0x07d0\n     * vbainfocontainer 0x03ff\n       * vbainfoatom 0x0400\n   * exobjlistcontainer 0x0409\n     * storage for compressed/uncompressed ole/vba/activex control data, å¦ vbaprojectstg\n   * soundcollectioncontainer\n   * drawinggroupcontainer\n\nä¹å°±æ¯è¯´è¦é¦åæ¾å° documentcontainerï¼\n\n1. æé  persistdirectory\n  current user stream\n    currentuseratom record\n      offsettocurrentedit field\n  |--\x3epowerpoint document stream\n  |\t\tusereditatom\n  |\t\t\toffsetpersistdirectory field\n  |\t\tpersistdirectoryatom\n  usereditatom.offsetlastedit (repeat until offsetlastedit is 0x000000)\n\n2. å®ä½ documentcontainer\n  usereditatom.docpersistidref\n    documentcontainer record\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\nå³äºé´å« embedded ole object å¯¹è±¡çå·ä½æ­¥éª¤å¯ä»¥åè [ms-ppt] 2.1.2 powerpoint document stream part 9 ç¸å³åå®¹\n\nå³äºé´å« linked ole object å¯¹è±¡çå·ä½æ­¥éª¤å¯ä»¥åè [ms-ppt] 2.1.2 powerpoint document stream part 10 ç¸å³åå®¹\n\n\n# xls\n\nä¸ä¸ª xls æä»¶æå¤åªè½ä¸ä¸ª component object streamã ä¸ä¸ª xls æä»¶æå¤åªè½ä¸ä¸ª ole streamã ä¸ä¸ª xls æä»¶æå¤åªè½ä¸ä¸ª control streamã\n\nworkbook stream ä¸­å­å¨äº excel ä¸­ææç text å formulasã\n\n# embedded or linked object\n\nå¨ excel ç workbook ä¸­åµå¥ä¸ä¸ªæä»¶çè¯ï¼è¿äºæä»¶ä¼è¢«å­å¨å¨åä¸º "mbd + éæºç8ä¸ªåå­è¿å¶æ°å­" ç embedding storages ä¸­ã\n\næ¯ä¸ª embedding storage é½è¡¨ç¤ºäºä¸ä¸ªåºäº storage-based æä¹åç embedded ole object æ activex control å¯¹è±¡ãåæ¶ï¼æä¹åå¨ embedding storage çå¯¹è±¡å¿å®æä¸ä¸ªç¸å³èç obj record å¨ worksheet substreamãmacro sheet substream æ dialog sheet substream ä¸­ï¼å¹¶ä¸ cmo.ot == 8ï¼pictflags.fprstm == pictflags.fdde == 0ã\n\nä¸è¿ä¸åç±»åçæä»¶å¨ embedding storage ä¸­çå½¢å¼æäºä¸ä¸æ ·ï¼å¦ï¼\n\n 1. å¦æ embedded file æ¯å¦å¤ä¸ä¸ª binary office document, é£ä¹è¿ä¸ª embedded file ä¸­ç storages å streams ä¼è¢«å½æå¯¹åºçèç¹åæ ·å­å¨å¨ mdb storage ä¸­\n 2. å¦æ embedded file æ¯ä¸ä¸ª open xml document, é£ä¹è¿ä¸ª embedded file ä¼è¢«å®æ´å­å¨å¨åä¸º "package" ç stream ä¸­\n\nä¸ä¸ª link storage æå®ä¸ä¸ª linked ole object åä»»æå¶ä»çé»è®¤æ°æ®æè¡¨ç¤ºä¸ºå¶å»ºç«çç¼å­ãå®çåå­å¿å®æ¯ç±ï¼"lnk" + 8ä¸ªåå­è¿å¶æ°å­ æ è¯ãæä¹åå¨ link storage çå¯¹è±¡å¿å®æä¸ä¸ªç¸å³èç obj record (obj.pictfmla.lposinctlstm)å¨ worksheet substreamãmacro sheet substream æ dialog sheet substream ä¸­ï¼å¹¶ä¸ cmo.ot == 8ï¼pictflags.fprstm == pictflags.fdde == 0ã\n\n\n# ooxml\n\nooxml(office open xml file formats), ç®åæ¥è¯´ï¼ooxml æ¯ä¸ä¸ªåºäº xml çææ¡£æ ¼å¼æ åï¼ææ©æ¯å¾®è½¯ office2007 çäº§åå¼åææ¯è§èï¼åæ¯æä¸º ecma(ecma-376) çæ åï¼æåæ¹è¿æ¨å¹¿æä¸ºäº iso å iec (as iso/iec 29500) çå½éææ¡£æ ¼å¼æ åãä¹å°±æ¯è¯´ï¼éè¿ ooxml æ åï¼æä»¬è½å¤å¨ä¸ä¾èµ office äº§åçæåµä¸ï¼å¨ä»»ä½å¹³å°è¯»åoffice wordï¼ppt å excel æä»¶ã\n\nooxml çä¸»è¦ç®å½ç»æå¦ä¸æç¤ºï¼\n\nooxml\nâââ [content_types].xml // æè¿°ææ¡£åä¸ªé¨åçcontenttypeï¼åå©è§£æææ¡£\nâ           \nââ docprops        // ms-office éè¦æ­¤åå®¹ä»¥æå¼æä»¶ï¼è wps ä¸éè¦\nâ   âââ app.xml    //ç¨åºçº§å«çææ¡£å±æ§ï¼å¦ï¼é¡µæ°ãææ¬è¡æ°ãç¨åºçæ¬ç­\nâ   âââ core.xml   //ç¨æ·å¡«åçææ¡£å±æ§ï¼å¦ï¼æ é¢ãä¸»é¢ãä½èç­\nâ\nââ _rels\nâ   âââ .rels      //æè¿°åä¸ªé¨åä¹é´çå³ç³»\nâ\nââ word / xl / ppt\n    âââ document.xml     //word\n    âââ fonttable.xml    //wordï¼é¡µè\n    â\n    âââ workbook.xml     // xl\n    âââ worksheets       // xl\n    â    âââ sheet1.xml\n    âââ macrosheets      // xl, microsoft excel 4.0 macros\n    â      âââ _rels\n    â      âÂ Â  âââ sheet1.xml.rels\n    â      âââ sheet1.xml\n    |\n    |ââ presentation.xml // ppt\n    |\n    |ââ embeddings       //all, optional, å­æ¾ embedded files\n    |     âââ a\n    |     âââ b\n    â\n    |ââ vbadata.xml      //all, vbaå±æ§ï¼æ¯å¦auoopenï¼æ¯å¦å å¯\n    |ââ vbaproject.bin   //all, è®°å½ vba project ä¿¡æ¯, ole æ ¼å¼\n    |\n    ââ theme             //all, è®°å½æ ·å¼ï¼é¢è²ç¼å·ï¼å­ä½å¤§å°ç­ç­\n    â    âââ theme1.xml\n    â\n    ââ _rels             //all, relationships\n    |    âââ settings.xml.rels   // æå® æ¨¡æ¿ å¼ç¨\n    â    âââ document.xml.rels   // ä½¿ç¨ id å url æ¥å®ä¹ææ¡£åé¶ä»¶\n    |    âââ workbook.xml.rels   // ä½¿ç¨ id å url æ¥å®ä¹ææ¡£åé¶ä»¶\n    â    âââ vbaproject.bin.rels // vba\n    â \n    âââ printersettings //all, reference to printer settings data\n    â....âââ printersettings1.bin\n    â\n    ââ styles.xml       //all\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n\n\n\n# 1. name representation\n\næ è®ºæ¯ definednames ä¸­å®ä¹çï¼è¿æ¯è¡¨æ ¼æ¾ç¤ºçåå­ï¼è¿äºéè¦å±ç¤ºçåå­é½åºå½å¨ docprops\\app.xml ä¸­ä½ä¸º application-defined file properties é¨åè¢«å®ä¹ï¼å¦ä¸ï¼\n\n<titlesofparts>\n <vt:vector size="[0-9]+" basetype="lpstr">\n  <vt:lpstr>sheet1</vt:lpstr>\n  <vt:lpstr>sheet2</vt:lpstr>\n  <vt:lpstr>sheet3</vt:lpstr>\n  <vt:lpstr>value1</vt:lpstr>\n  <vt:lpstr>value2</vt:lpstr>\n </vt:vector>\n</titlesofparts>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# 2. cell references & name\n\nexcelä¸­å¯ä»¥ç» å½æ°ãcellãsheetãçè³ä»»æä¸æ®µææ¬æå¾å½¢ç­å®ä¹åå­(ä¹è¢«ç§°ä¸º bookmark)ï¼å¹¶éè¿åå­æ¥å¼ç¨å¯¹åºçåå®¹ï¼å¼ç¨æ¹å¼åè\n\n * ecma-376-fifth-edition-part-1 --- 18.17.2.3 cell references\n * ecma-376-fifth-edition-part-1 --- 18.17.2.5 names\n\nname çç»æå½¢å¼ï¼\n\nname = [ workbook-name, "!" ], [letter | "_" | "\\"], [ letter | decimal-digit | "_" | "." ] ;\n\n\n1\n\n\nå¶ä¸­ name ä¸è½åå«ä»¥ä¸å ç§æ ¼å½¢å¼ï¼\n\n * true or false\n * user-defined-function-name\n * cell-reference\n\nfunction-name çç»æå½¢å¼ï¼\n\nfunction-name= prefixed-function-name | predefined-function-name | user-defined-function-name ;\n\npredefined-function-name= "abs" | "acos" | "acosh" | ( any of the other functions defined in Â§18.17.7) ;\nprefixed-function-name= "iso.", predefined-function-name | "ecma.", predefined-function-name ; \nuser-defined-function-name= letter, [ letter | decimal-digit | "." ] ;\n\n\n1\n2\n3\n4\n5\n\n\nå¶ä¸­ function-name ä¸è½åå«ä»¥ä¸å ç§æ ¼å½¢å¼ï¼\n\n * true or false\n * name\n * cell-reference\n\ncell reference çå½¢å¼æä¸¤ç§ï¼r1c1-style å a1-style\n\noperator æä»¥ä¸å ç§æ ¼å¼ï¼\n\n":" | comma | space | "^" | "*" | "/" | "+" | "-" | "&" | "=" | "<>" | "<" | "<=" | ">" | ">=" | "%" ;\n\n\n1\n\n\n\n# 3. formulas and expressions\n\n * ecma-376-fifth-edition-part-1 --- 17.16.3 formulas and expressions\n\na field instruction can involve a calculation via a formula, which is simply an expression that is an arbitrary complex arithmetic expressionï¼å¦ï¼\n\n<sheetdata>\n\t\t<row r="2" spans="4:4" x14ac:dydescent="0.25">\n\t\t\t<c r="d2" s="1" t="b">\n\t\t\t\t<f>formula()=formula()=formula(\'buk1\'!e11,\'buk2\'!b12)=formula(\'buk2\'!h5,\'buk3\'!h3)=formula(\'buk3\'!c9,\'buk4\'!c2)=formula(\'buk4\'!i8,\'buk5\'!f2)=formula(\'buk5\'!b12,\'buk6\'!b10)=formula(\'buk6\'!g3,\'buk7\'!i2)=formula(\'buk7\'!d13,\'buk1\'!a3)=formula(\'buk3\'!h3&amp;\'ss1\'!o6&amp;\'ss1\'!d16&amp;\'ss1\'!k13&amp;\'ss1\'!r12&amp;\'ss1\'!r14,d3)=formula(\'buk3\'!h3&amp;\'buk7\'!i2&amp;\'buk4\'!c2&amp;\'buk5\'!f2&amp;\'buk5\'!f2&amp;ss1br2!b3&amp;\'buk1\'!a3&amp;ss1br2!d5&amp;\'buk6\'!b10&amp;ss1br2!g3&amp;\'buk7\'!i2&amp;\'buk7\'!i2&amp;ss1br2!b9,d17)</f>\n\t\t\t\t<v>1</v>\n\t\t\t</c>\n\t\t</row>\n\t</sheetdata>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# ms-office çå¶ä»å½¢å¼\n\nä½¿ç¨ ms-office è½¯ä»¶å¯ä»¥å° office æä»¶éè¿"å¦å­ä¸º"ä¿å­ä¸º xmlãmhtmlãhtml ç­æ ¼å¼çææ¬æä»¶ï¼å¹¶ä¸ï¼å¯ä»¥åæ¬¡éè¿ ms-office è½¯ä»¶æå¼ãç¼è¾ã\n\nå¦å¤ï¼è¿äºè½¬æ¢èæçææ¬ç±»åçææ¡£ï¼è¢«å å¯åï¼æ¯ä¸ä¸ª ole æä»¶ã\n\nè¢«è½¬æ¢èæç xml æä»¶ï¼å¨ç»æä¸ä¿æäºè· binary å½¢å¼ç office æä»¶ä¸è´ï¼å¹¶ä¸ä¸ä¸å¯¹åºãå¦ï¼contenttype ä¸º "application/vnd.ms-office.vbaproject" ç binarydata æ°æ®, å°±æ¯äºè¿å¶å½¢å¼ç vbaproject åå®¹ base64 åçç»æã\n\nè¿éè¦æ³¨æçæ¯ï¼å¨è§£æ bindata ç±»åçæ°æ®æ¶ï¼å¯è½ä¼éå° mso(activemine) æä»¶ãè¿æ¯ä¸ç§æä»¶åä¸º *.mso åæ¶ mime types ä¸º application/x-mso çç»ææªå¬å¼çæä»¶æ ¼å¼(åè activemime-format )ã\n\nmsoæä»¶æ¯å°microsoft officeææ¡£ä¿å­ä¸ºç½é¡µæ¶åå»ºçå®å¼ç¨æä»¶ãå®åå«æå³åå§æä»¶ä¸­åå«çå®åoleï¼å¯¹è±¡é¾æ¥ååµå¥ï¼å¯¹è±¡çä¿¡æ¯ï¼å¹¶ä¸å¯ä»¥è¢«åå»ºçç½é¡µä½ä¸ºæ ·å¼è¡¨å¼ç¨ãmsoæä»¶å¯ä»¥ç¨ææ¬ç¼è¾å¨æ¥çï¼ä½ç±äºåå®¹æ¯ç¼ç çï¼å æ­¤æ æ³è¯»åãå¤§å¤æ°ç¨æ·åªä¼å°msoæä»¶ä½ä¸ºçµå­é®ä»¶çéä»¶ã\n\n\n# rtf\n\nå¯ææ¬æ ¼å¼ï¼rtfï¼rich text tormatï¼æ¯å¾®è½¯çææ¬åå¾åä¿¡æ¯äº¤æ¢æå®çæ ¼å¼ãrtfæä»¶å¯ä»¥ååä¸ºæä»¶å¤´åææ¡£åºä¸¤ä¸ªé¨åç»æãæä»¶å¤´åææ¡£åºç±ææ¬ãæ§å¶å­åæ§å¶ç¬¦ç»æï¼åæ¶å©ç¨{â¦}æ¥è¡¨æå±çº§å³ç³»ã\n\n\n# æ£åº\n\n * hash (å¿½ç¥å¤§å°åãç©ºå­ç¬¦)\n   * function\n   * stream\n * æ¨¡ç³å¹é\n   * ç®åçæ¨¡å¼å¹é\n   * eg.\n     * æç´¢å° ï¼virtualprotectexãwriteprocessmemoryãcreateremotethreadãvirtualallocex\n     * shell environ$("comspec") & " /c attrib -s -h """ & application.startuppath & "\\k4.xls""", vbminimizedfocus\n     * shell ("\\jdq\\cc$\\b.exe")\n     * if .lines(1, 1) = "apmp" & .lines(1, 2) <> "kill" then ........ end if\n     * æ··æ·çæä»¶ï¼çµ ï¼\n\n\n# æ¸ç\n\n * æ¹é¤\n   * function\n     * æ¿æ¢å½æ°åå®¹ä¸ºç©ºæ ¼\n   * stream :\n     * å° stream ç size ç½® 0ï¼åæ¶æ¹é¤ç¬¬ä¸ä¸ªæåºåå®¹ï¼æ­å¼åå®¹æåºé¾\n     * ä¸è¬æ¥è¯´ï¼åªä¿®æ¹ size å°±å¯ä»¥è®© office è½¯ä»¶æ æ³è¯»åç¸å³åå®¹ãä½å¶ä»æè½¯å¯è½ä¼ç»§ç»­æ¥æ¯ï¼æ¯ç« stream çå¶ä»ä¿¡æ¯ä¾ç¶ææï¼å¯ä»¥å¨å®¹éæåµä¸è¿ååºæ¥ malicious åå®¹ã\n     * æ³¨æï¼å¶å®é¨åå¯¹ macro çå¼ç¨ï¼å¦ï¼\n       * doc ä¸­ fccmds ä¼éè¿ macro names å¼ç¨å¯¹åºçå®ï¼æä»¥\n         1. æ ¹æ®éè¦å° document æµä¸­ç fccmds å lcbcmds æå¼ç¨çæ°æ®\n         2. ç²æ´çå° document æµä¸­ç fccmds å lcbcmds é½ç½®ç©º\n * è¿å\n   * è¿åè¢«å å¯ç ´åçæä»¶åå®¹\n     * çæ¯æææ¶æ¯ææºä¼æä½åæçæ­£å¸¸ vba èæ¬çï¼æ¯å¦ï¼å å¯ï¼ç®åè¿æ²¡è§å°æ­¤ç±»æ ·æ¬ï¼ã\n\n\n# reference\n\n * ms-office-extensions\n\n * ms-office file formats\n\n * [ms-ovba] - v20210817\n\n * [ms-offcrypto] - v20210817\n\n * [ms-xls] - v20210817\n\n * [ms-doc] - v20210817\n\n * [ms-ppt] - v20210817\n\n * [ms-oleds] - v20210625\n\n * introducing the office (2007) open xml file formats\n\n * microsoft office excel 97 - 2007 binary file format (.xls) specification\n\n * ole1.0 and ole2.0 formats\n\n * microsoft office word 2003\n   \n   * microsoft office word 2003 preview\n   * the xml files: xml in microsoft office word 2003\n\n * [ç¿»è¯]æ»å»äºéæ§-ä»¥oleä¸ºä¾\n   \n   * attacking interoperability: an ole edition\n\n * å®çæ¯å¸¸ç¨çä¸äºtrick\n\n * old school: evil excel 4.0 macros (xlm)\n\n * oletools\n\n * didierstevens\n   \n   * oledump-py\n   * oledump.py\n   * msoffcrypto-crack.py\n\n * 0xevilc0de\n   \n   * maldoc uses template injection for macro execution\n   * excel 4 macros â get.workspace reference\n   * removing passwords from vba projects\n   * maldoc uses rc4 to hide powershell script, retrieves payload from dns txt record\n   * maldoc uses windows api to perform process hollowing\n\n * jstrosch\n   \n   * malware-samples\n\n * spiderlabs\n   \n   * spiderlabs-blog\n\n * template injection\n   \n   * malware-samples: word doc uses template injection\n\n * å¤åææ¡£æä»¶æ ¼å¼ç ç©¶\n\n * velvetsweatshop: default passwords can still make a difference\n\n * remnux: analyze documents',charsets:{cjk:!0}},{title:"Office æ ¼å¼ç®æ - Crypto",frontmatter:{title:"Office æ ¼å¼ç®æ - Crypto",date:"2021-06-18T13:50:00.000Z",lastmod:null,description:"Office æ ¼å¼ç®æï¼æ¥æ¾ å® ä»¥è¿è¡çæ¯æ£æµ",categories:["skills"],tags:["ole","ms-cfb","office"],permalink:null},regularPath:"/blog/skills/office/ole_office_msoffcrypto.html",relativePath:"blog/skills/office/ole_office_msoffcrypto.md",key:"v-76ece9bf",path:"/blog/skills/office/ole_office_msoffcrypto.html",headers:[{level:2,title:"ä¸ãData Spaces",slug:"ä¸ãdata-spaces",normalizedTitle:"ä¸ãdata spaces",charIndex:220},{level:3,title:"Information Rights Management Data Space(IRMDS)",slug:"information-rights-management-data-space-irmds",normalizedTitle:"information rights management data space(irmds)",charIndex:610},{level:3,title:"Protected Content Stream",slug:"protected-content-stream",normalizedTitle:"protected content stream",charIndex:3336},{level:3,title:"Encryption and Obfuscation",slug:"encryption-and-obfuscation",normalizedTitle:"encryption and obfuscation",charIndex:3655},{level:3,title:"Write Protection",slug:"write-protection",normalizedTitle:"write protection",charIndex:6586},{level:3,title:"Digital Signatures",slug:"digital-signatures",normalizedTitle:"digital signatures",charIndex:7590},{level:2,title:"äºãXLS",slug:"äºãxls",normalizedTitle:"äºãxls",charIndex:8105},{level:3,title:"2.1 Password Verifier Algorithm",slug:"_2-1-password-verifier-algorithm",normalizedTitle:"2.1 password verifier algorithm",charIndex:8135},{level:3,title:"2.2 Encryption (Password to Open)",slug:"_2-2-encryption-password-to-open",normalizedTitle:"2.2 encryption (password to open)",charIndex:9104},{level:3,title:"2.3 XorArrayIndex",slug:"_2-3-xorarrayindex",normalizedTitle:"2.3 xorarrayindex",charIndex:9965},{level:2,title:"ä¸ãDOC",slug:"ä¸ãdoc",normalizedTitle:"ä¸ãdoc",charIndex:10293},{level:3,title:"3.1 Encryption and Obfuscation (Password to Open)",slug:"_3-1-encryption-and-obfuscation-password-to-open",normalizedTitle:"3.1 encryption and obfuscation (password to open)",charIndex:10303},{level:2,title:"åãPPT",slug:"åãppt",normalizedTitle:"åãppt",charIndex:13362},{level:3,title:"Encryption",slug:"encryption",normalizedTitle:"encryption",charIndex:391},{level:2,title:"Reference",slug:"reference",normalizedTitle:"reference",charIndex:1086}],headersStr:"ä¸ãData Spaces Information Rights Management Data Space(IRMDS) Protected Content Stream Encryption and Obfuscation Write Protection Digital Signatures äºãXLS 2.1 Password Verifier Algorithm 2.2 Encryption (Password to Open) 2.3 XorArrayIndex ä¸ãDOC 3.1 Encryption and Obfuscation (Password to Open) åãPPT Encryption Reference",content:'# MS-OFFCRYPTO\n\nMS-OFFCRYPTO åªå¯¹ windows office çæï¼æä»¥æä¸äºå¸¸è§çè§åçº¦å®ï¼\n\n * ole ä¸­ç¨äºæå® storages å streams ä½ç½®çè·¯å¾ä½¿ç¨ backslash() ä½ä¸ºåéç¬¦\n * ä»¥ backslash() å¼å§çè·¯å¾æ¯æ ole compound file ç root storage\n * Byte Ordering é»è®¤æ¯ little-endian\n\n\n# ä¸ãData Spaces\n\ndata spaces ç»ææè¿°äºä¸ç§å­å¨ç»è¿æç§æ¹å¼è½¬æ¢(transformed)åç OLE å¤åæä»¶çä¸è´æ§æ¹æ³ãæä»¥ï¼è¯¥ç»æéè¦å­å¨åä¿æ¤çåå®¹(protected content)ååºç¨äºåå®¹çè½¬æ¢ä¿¡æ¯(information about the transforms)ãä¾å¦ï¼ä¸æç IRMDS å Encryption ç­é½æ¯åºäº data spaces ç»æè¿è¡çã\n\ndata spaces ç»æåè®¸å®¢æ·ç«¯åºç¨ç¨åºæè¿°ä¸ä¸ªæå¤ä¸ªä»»æè½¬æ¢ãæ¯ä¸ªåæ¢è¡¨ç¤ºè¦å¯¹åå§ææ¡£åå®¹ä¸­çä¸ç» storages æ streams æ§è¡çåä¸ªä»»ææä½ãä¸ä¸ªæå¤ä¸ªè½¬æ¢å¯ä»¥è¢«ç»åå°ä¸ä¸ª data space çå®ä¹ä¸­ï¼ç¶åè¿ä¸ªå®ä¹å¯ä»¥è¢«åºç¨å°å­å¨äº data space map ä¸­çåå§ææ¡£çä»»æ storages æ streams ä¸­ã\n\n\n# Information Rights Management Data Space(IRMDS)\n\nIRMDS ä¸»è¦åºç¨äºå¼ºåææ¡£çæéç®¡çç­ç¥ãå½å¯¹ä½¿ç¨äºæéç®¡çç­ç¥çææ¡£è¿è¡è¯»ãåãåå»ºæä½æ¶ï¼éè¦ä½¿ç¨å° IRMDS structureã\n\nIRMDS å¯ä»¥è¢«åºç¨äºä»¥ä¸ä¸¤ç§ç±»åçææ¡£:\n\n * Office binary documents\n * ECMA-376 documents\n\n\n\nECMA, European Computer Manufacturers Associationï¼ ECMA376 åè®®ä»£æ Office Open XML æ ¼å¼\n\nå·ä½çå·®å«å¦ä¸ï¼\n\n# "\\0x06DataSpaces\\DataSpaceMap" Stream\n\n 1. Office binary document\n\n * è³å°æä¸ä¸ª DataSpaceMapEntry ç»æ\n * å¿é¡»æä¸ä¸ª DataSpaceMapEntry ç»æç DataSpaceName å­æ®µä¸º "\\009DRMDataSpace"\n   * æ­¤ç»æä¸­ï¼æä¸åªæä¸ä¸ª ReferenceComponents ç»æï¼è¡¨ç¤ºä¸ä¸ªåä¸º "\\009DRMContent" ç stream\n * ç¬¬äºç§ DataSpaceMapEntry ç»æç DataSpaceName å­æ®µå¿é¡»ä¸º "\\009LZXDRMDataSpace"\n   * æ­¤ç»æä¸­ï¼æä¸åªæä¸ä¸ª ReferenceComponents ç»æï¼è¡¨ç¤ºä¸ä¸ªåä¸º "\\009DRMViewerContent" ç stream\n\n 2. ECMA-376 document\n\n * æä¸åªæä¸ä¸ª DataSpaceMapEntry ç»æï¼è¿ä¸ªç»æç DataSpaceName å­æ®µä¸º "DRMEncryptedDataSpace"\n   * æ­¤ç»æä¸­ï¼æä¸åªæä¸ä¸ª ReferenceComponents ç»æï¼è¡¨ç¤ºä¸ä¸ªåä¸º "EncryptedPackage" ç stream\n\n# "\\0x06DataSpaces\\DataSpaceInfo" Storage\n\n 1. Office binary document\n\n * å¿é¡»åå«ä¸ä¸ªåä¸º "\\009DRMDataSpace" ç stream\n   * æµä¸­å¿é¡»åå«ä¸ä¸ª DataSpaceDefinition ç»æï¼æ­¤ç»ææä¸ä»æä¸ä¸ªåä¸º "\\009DRMTransform" ç TransformReferences\n * å¯è½ä¼åå«ä¸ä¸ªåä¸º "\\009LZXDRMDataSpace" ç stream\n   * æµä¸­å¿é¡»åå«ä¸ä¸ªè¿æ ·ç DataSpaceDefinition ç»æï¼æä¸ä»æä¸¤ä¸ª TransformReferences æ¡ç®ï¼"\\009DRMTransform" å "\\009LZXTransform"\n\n 2. ECMA-376 document\n\n * å¿é¡»åå«ä¸ä¸ªåä¸º "DRMEncryptedDataSpace" ç stream\n   * æµä¸­å¿é¡»å«æä¸ä¸ª DataSpaceDefinition ç»æï¼æ­¤ç»ææä¸ä»æä¸ä¸ªåä¸º "DRMEncryptedTransform" ç TransformReferences æ¡ç®\n\n# "\\0x06DataSpaces\\TransformInfo" Storage\n\n 1. Office binary document\n\n * å¿é¡»åå«ä¸ä¸ªåä¸º "\\009DRMTransform" ç storageï¼å¶ä¸å¿é¡»åå«ä¸ä¸ªåä¸º "\\006Primary" ç stream (å®æ´è·¯å¾ä¸ºï¼"0x09DRMTransform\\0x06Primary")ã\n   * æ­¤ stream å¿å®åå« IRMDSTransformInfo ç»æï¼å¶åå®¹å¦ä¸ï¼\n     * TransformInfoHeader.TransformID MUST be "{C73DFACD-061F-43B0-8B64-0C620D2A8B50}"\n     * TransformInfoHeader.TransformName MUST be "Microsoft.Metadata.DRMTransform"\n   * "\\009DRMTransform" storage åæ¶å¿é¡»åå«ä¸ä¸ªæå¤ä¸ª end-user license streams\n * å¯è½åå«ä¸ä¸ªåä¸º "\\009LZXTransform" ç storageãå¦ææ­¤ storage å­å¨ï¼åå¶ä¸å¿é¡»å­å¨ä¸ä¸ªåä¸º "\\006Primary" ç stream\n   * æ­¤ stream å¿å®åå« TransformInfoHeader ç»æï¼å¶åå®¹å¦ä¸ï¼\n     * TransformType MUST be 0x00000001\n     * TransformID MUST be "{86DE7F2B-DDCE-486d-B016-405BBE82B8BC}"\n     * TransformName MUST be "Microsoft.Metadata.CompressionTransform"\n\n 2. ECMA-376 document\n\n * å¿é¡»åå«ä¸ä¸ªåä¸º "DRMEncryptedTransform" ç storageï¼æ­¤ storage ä¸å¿é¡»åå«ä¸ä¸ªåä¸º "\\006Primary" ç stream\n   * æ­¤ stream å¿å®åå« IRMDSTransformInfo ç»æï¼å¶åå®¹å¦ä¸ï¼\n     * TransformInfoHeader.TransformID MUST be ""{C73DFACD-061F-43B0-8B64-0C620D2A8B50}"\n     * TransformInfoHeader.TransformName MUST be "Microsoft.Metadata.DRMTransform"\n   * "DRMEncryptedTransform" storage åæ¶å¿é¡»åå«ä¸ä¸ªæå¤ä¸ª end-user license streams\n\nä¸æä¸­æ¶åå°ç End-User License Streamï¼å¶ä¸­åå«äºç¼å­ç licenses ä¿¡æ¯ãè¿äº end-user license stream çå½åå¿é¡»ä»¥ "EUL-" ä¸ºåç¼ï¼ä¸ºï¼"EUL-" + "ä¸ä¸ª base-32-encoded çGUID"ã\n\n\n# Protected Content Stream\n\nprotected content stream å¿é¡»æ¯å¨ root storage ä¸­ãå¦æåå§ææ¡£æ¯ ECMA-376 æ¶ï¼æµçåå­å¿å®æ¯ "EncryptedPackage"ï¼åå§ææ¡£æ¯ä»»æå¶ä»æ ¼å¼æ¶, æµçåå­ä¸å®æ¯ "\\0x09DRMContent"ã\n\nèè¿ä¸ªåä¿æ¤çæµç±: Length(8 bytes) + Contents(variable) ç»æã\n\nå¶ä¸­ Contents æ¯ä½¿ç¨å¯¹ç§°å¯é¥ï¼AES-128 ç®æ³, 16-byte block size, electronic codebook (ECB) mode ä»¥å å¨ 0 çåå§åéè¿è¡å è§£å¯çã\n\n\n# Encryption and Obfuscation\n\nåºç¨äº ms-office çå å¯åæ··æ·çå±æåç§ä¸åçææ¯ï¼\n\n 1. XOR Obfuscation\n\n * å¯¹è±¡ï¼[MS-XLS] and [MS-DOC]\n * æ¹æ³ï¼å¯¹ Office Binary Document çé¨å(storage æ stream)æ§è¡å°±å°æ··æ·\n * ç»èï¼åå«ä¸¤ç§æ¹æ³ï¼Method 1 å Method 2\n   * Method 1 åºç¨äº Excel Binary File Format (.xls) ç structures å procedures\n   * Method 2 åºç¨äº Word Binary File Format (.doc) ç structures å procedures\n\n 2. 40-bit RC4 Encryption\n\n * å¯¹è±¡ï¼[MS-XLS] and [MS-DOC]\n * æ¹æ³ï¼å¯¹ Office Binary Document çé¨å(storage æ stream)æ§è¡å°±å°å å¯\n * ç»èï¼\n   * ç®æ³ä¸­ç hash å½æ°ä¸º MD5\n   * é¤éç¹æ®è¯´æï¼å¦åï¼æå¤§å¯ç é¿åº¦ä¸ºï¼255 Unicode characters\n\n 3. RC4 CryptoAPI Encryption\n\n * å¯¹è±¡ï¼[MS-XLS], [MS-DOC], and [MS-PPT]\n * æ¹æ³ï¼å¯è½ä¼æä¸ä¸ª Encrypted Summary Stream è¢«åå»ºï¼ä¹è½å¯¹å¶ä» stream æ§è¡å°±å°å å¯\n * ç»èï¼\n   * é¤éç¹æ®è¯´æï¼å¦åï¼æå¤§å¯ç é¿åº¦ä¸ºï¼255 Unicode characters\n   * SHA-1 hash æ¯ 160 bits, è RC4 ç key æå¤§é¿åº¦æ¯ 128 bits; å æ­¤, key å¿å®å°äºæç­äº 128 bitsã\n     * å¦æ key åªæ 40 bitsï¼è¯´æè¿æ¯ä¸ä¸ªéå¸¸èççæ¬ï¼æ­¤æ¶å å¯ç®æ³å¿é¡»åå»ºä¸ä¸ªç± Hfinal çå 40 bits å 88 bits ç 0 æ¼æ¥èæç 128-bit ç key\n\n 4. ECMA-376 Document Encryption\n\n * å¯¹è±¡ï¼[ECMA-376]\n * æ¹æ³ï¼å©ç¨ data spaces åè½å° [ECMA-376] ææ¡£å å¯æäº ole ä¸­çä¸ä¸ª stream\n * ç»èï¼ä¸å±æä¸ç§æ¹æ³ï¼\n   * Standard encryption:\n     * å©ç¨äºè¿å¶(binary)ç±»åç EncryptionInfo ç»æå­å¨å å¯ä¿¡æ¯ï¼ä½¿ç¨ AES ä½ä¸ºå å¯ç®æ³ï¼SHA-1 ä½ä¸ºæ£å(hash)ç®æ³\n   * Agile encryption:\n     * å©ç¨ XML å­æ¾å å¯ä¿¡æ¯ãå å¯åæ£åç®æ³å¨ç»æä¸­æå®ï¼å¯ä»¥ä½¿ç¨ä¸»æºæ¯æçä»»ä½å å¯ç®æ³ãè¿æ¯ææ°æ®å®æ´æ§æ ¡éªã\n   * Extensible encryption:\n     * æ­¤æ¹æ³ä½¿ç¨å¯æ©å±çæºå¶æ¥åè®¸ä½¿ç¨ä»»æçç¬¬ä¸æ¹å å¯æ©å±æ¨¡å\n\næ³¨ï¼ECMA-376 å RC4 CryptoAPI å å¯ç®æ³é½ä½¿ç¨å°äº EncryptionHeader ç»æ\n\n# ECMA-376 Document Encryption\n\n 1. "\\0x06DataSpaces\\DataSpaceMap" Stream\n\n * å¿é¡»åå«ä¸ä¸ª DataSpaceMap ç»æï¼å¶ä¸­æä¸åªæä¸ä¸ª DataSpaceMapEntry ç»æ\n   * æ­¤ç»æç DataSpaceName å­æ®µä¸º "StrongEncryptionDataSpace"\n   * æ­¤ç»æä¸­ï¼æä¸åªæä¸ä¸ª ReferenceComponents ç»æï¼è¡¨ç¤ºä¸ä¸ªåä¸º "EncryptedPackage" ç stream\n\n 2. "\\0x06DataSpaces\\TransformInfo" Storage\n\n * å¿é¡»åå«ä¸ä¸ªåä¸º "StrongEncryptionTransform" ç storageï¼å¶ä¸å¿é¡»åå«ä¸ä¸ªåä¸º "\\006Primary" ç stream\n   * è¿ä¸ªæµå¿é¡»åå«ä¸ä¸ª IRMDSTransformInfo ç»æï¼å¶åå®¹å¦ä¸ï¼\n     * TransformInfoHeader.TransformType MUST be 0x00000001\n     * TransformInfoHeader.TransformID MUST be "{FF9A3F03-56EF-4613-BDD5-5A41C1D07246}"\n     * TransformInfoHeader.TransformName MUST be "Microsoft.Container.EncryptionTransform".\n   * ç´§è·ç IRMDSTransformInfo çæ¯ä¸ä¸ª EncryptionTransformInfo ç»æ\n     * å¦æ EncryptionInfo å EncryptionTransformInfo ä¸­çç®æ³ä¸ä¸è´æ¶ï¼è®¤ä¸º EncryptionInfo ä¸­çæ´å æå¨ã\n     * å¦æä½¿ç¨ agile encryption æ¶ï¼EncryptionTransformInfo ç EncryptionName å­æ®µå¿é¡»ä¸ºç©ºå­ç¬¦ä¸²(0x00000000)\n\n 3. "\\EncryptedPackage" Stream\n\n * æ¯ä¸ä¸ªå å¯ç streamï¼å®åå«äºå®æ´ç(åç¼©åç) ECMA376 åæä»¶\n   * ç± StreamSize(8 bytes) + EncryptedData(variable) ç»æ\n   * StreamSize ææ EncryptedData çå­èæ°ãå¦å¤ï¼StreamSize çå¤§å°å®éä¸å¯è½ä¼ä¸æµçå¤§å°æåºå¥ï¼è¿ä¾èµäºæç¨å å¯ç®æ³ç block size\n\n 4. "\\EncryptionInfo" Stream\n\n * Standard Encryption\n   * åå«ç¨äºåå§åç¨äºå å¯ "\\EncryptedPackage" æµçå¯ç å­¦è¯¦ç»ä¿¡æ¯\n * Agile Encryption\n   * åå«ç¨äºåå§åç¨äºå å¯ "\\EncryptedPackage" æµçå¯ç å­¦è¯¦ç»ä¿¡æ¯\n * Extensible Encryption\n   * ECMA-376 ææ¡£å¯ä»¥éæ©ä½¿ç¨ç¨æ·æä¾çèªå®ä¹ï¼å¯æ©å±ï¼å å¯æ¨¡åãå½ä½¿ç¨å¯æ©å±å å¯æ¶ï¼\\EncryptionInfo æµçç»ææè¿°ä¸åäºæ åæ¨¡å¼ï¼è¯¦ç»å¯ä»¥åèææ¡£[MS-OFFCRYPTO]\n\n# Office Binary Document Encryption\n\nXORãRC4 ä»¥å RC4 CryptoAPI é½å¯ä»¥åºç¨äº Office Binary Document æä»¶ã\n\nè¯¦ç»ä¿¡æ¯è§æ¬ææ¡£å³äº [xls]ã[doc]ã [ppt] çæè¿°ã\n\n\n# Write Protection\n\n# ECMA-376 Document Write Protection\n\nECMA-376 ææ¡£ç write protection å¨ [ECMA-376] ææ¡£ç Part 4 ä¸­ç Sections 2.15.1.28, 2.15.1.94, 3.2.12, å 4.3.1.17 ä¸­æè¯¦ç»æè¿°ã\n\n# Binary Document Write Protection\n\näºè¿å¶ç±»å office ææ¡£çåºäº password ç Write Protection æ ¹æ®æä»¶æ ¼å¼çä¸åå·æä¸åçç»è, å¤§è´å¦ä¸ï¼\n\n * .xls\n   * å¯ç è¢«è½¬æ¢æäºä¸ä¸ª 16-bit ç password verifier, å¹¶å°å¶ä¾ [MS-XLS] ææ¡£è¿è¡å­å¨, åæ¶ï¼ææ¡£ä¼è¢«å å¯ãå¦æç¨æ·æªæä¾å å¯å¯ç ï¼ä¼ä½¿ç¨ä¸ä¸ªåºå®å¯ç ã\n     * é»è®¤å¯ç æ¯ï¼\\x56\\x65\\x6C\\x76\\x65\\x74\\x53\\x77\\x65\\x61\\x74\\x73\\x68\\x6F\\x70(ä¹å¯ä»¥è¡¨ç¤ºä¸ºï¼VelvetSweatshop)\n   * ä½¿ç¨ Write Protection çåæ¶ï¼ä¾ç¶å¯ä»¥æç§ Encryption çæè¿°è¿è¡å å¯\n   * è¯¦ç»åå®¹åè [MS-XLS] section 2.2.9\n * .doc\n   * å¯ç ä»¥ææå½¢å¼å­å¨ï¼å¹¶ä¸ææ¡£åå®¹æªè¢«å å¯ã\n   * è¯¦ç»åå®¹åè [MS-DOC] section 2.9.276\n * .ppt\n   * å¯ç ä»¥ææå½¢å¼å­å¨ï¼å¹¶ä¸ææ¡£å¯ä»¥è¢«å å¯ãå¦æææ¡£è¢«å å¯ï¼ä½ç¨æ·æªæä¾å å¯å¯ç æ¶ï¼ä¼ä½¿ç¨ä¸ä¸ªåºå®å¯ç ã\n     * é»è®¤å¯ç æ¯ï¼\\x2f\\x30\\x31\\x48\\x61\\x6e\\x6e\\x65\\x73\\x20\\x52\\x75\\x65\\x73\\x63\\x68\\x65\\x72\\x2f\\x30\\x31(ä¹å¯ä»¥è¡¨ç¤ºä¸ºï¼/01Hannes Ruescher/01)\n   * ä½¿ç¨ Write Protection çåæ¶ï¼ä¸åºè¯¥(SHOULD NOT)åæç§ Encryption ä¸­æè¿°çç®æ³è¿è¡å å¯\n   * è¯¦ç»åå®¹åè [MS-PPT] section 2.4.7\n\nå¦å¤è¿æ ISO Write Protection Methodï¼ å¶æ¨å¨ä¸ ISO/IEC 29500 å¼å®¹\n\n\n# Digital Signatures\n\n# ECMA-376 Document Digital Signatures\n\nç¨äº ECMA-376 documents ç xmldsig æ°å­ç­¾å å ç¨äº Office binary documents ç xmldsig æ°å­ç­¾åéå¸¸ç¸ä¼¼ãè¯¦ç»åå®¹åè [ECMA-376] Part 2 Section 12.2.4ã\n\n# Binary Document Digital Signatures\n\näºè¿å¶ç±»å office ææ¡£å¯ä»¥ä½¿ç¨ä¸è¿°æ¹æ³ä¸­çä»»æä¸ç§è¿è¡ç­¾åï¼\n\n 1. CryptoAPI digital signature\n    * ä»¥äºè¿å¶å½¢å¼å­å¨å¨ _signatures storage ä¸­\n    * è¯¦ç»åå®¹åè [MS-OFFCRYPTO] Section 2.5.1\n 2. xmldsig digital signature\n\n * ä»¥ XML-Signature è¯­æ³åå¤çæ¹å¼(è¯¦è§[XMLDSig])å­å¨å¨ _xmlsignatures storage ä¸­\n * è¯¦ç»åå®¹åè [MS-OFFCRYPTO] Section 2.5.2\n\n\n# äºãXLS\n\nè¿éä¸»è¦å³æ³¨ Encryptionã\n\n\n# 2.1 Password Verifier Algorithm\n\nä¸äº records (Password, FileSharing, Prot4RevPass, FeatProtection, å FilePass) ä¼å©ç¨ password verifier æ¥éå®æè§£éå¯¹ workbook é¨ååå®¹çæ¥çæç¼è¾ãè¿ä¸ª password verifier çè®¾è®¡ä¸»è¦æ¯ä¸ºäºé²æ­¢æå¤ç¼è¾ï¼èä¸æ¯å®å¨ç¹æ§ã\n\nIt is possible to remove the passwords by removing the records containing the verifier values.\n\nè¿ä¸ª verifier çå¼ç±ä¸¤ä¸ªé¶æ®µè®¡ç®:\n\n * å° Unicode ç password è½¬æ¢ä¸ºå½åç³»ç»ç ANSI å­ç¬¦ç¼ç \n   * ä»»ä½ä¸è½è¢«è½¬æ¢ä¸º ANSI å­ç¬¦ç¼ç ç Unicode å­ç¬¦ç¨ 0x3F æ¿æ¢ã\n   * è¿ä¸ªæ¿æ¢å¨ä½å¨éªè¯ hash æ¶å°çææ­£æ°åå¸å¼å¹éãå¨æäºè¯­è¨ç¯å¢ä¸­ï¼è¿äºå­ç¬¦å¯è½æ¯æ¥å¸¸å­ç¬¦éçéè¦ç»æé¨åã\n * ä½¿ç¨ [MS-OFFCRYPTO] ä¸­æå®ç XOR obfuscation ç®æ³(Binary Document Password Verifier Derivation Method 1)è®¡ç®åº16-bit ç password verifier å¼\n\n# Password record\n\nPassword record ä¸º sheet or workbook æå®äº password verifierãå¦æ record ç»æä¸­ç wPassword å¼ä¸º 0ï¼åè¡¨ç¤ºæ²¡æå¯ç ã\n\nå¦ææ­¤ record å­å¨äº Globals Substream, é£ä¹å®æ¯æ´ä¸ª workbook çå¯ç . å¦ææ­¤ record å­å¨äº worksheet substream, chart sheet substream, macro sheet substream, or dialog sheet substream, é£ä¹å®ä»ä»éç¨äºé£ä¸ª sheetã\n\næ­¤å¤ï¼workbook ä¸­å¿å®å­å¨æ­¤ recordï¼è sheet åå½ä¸ä»å½æå¯ç æ¶æå­å¨æ­¤ recordã\n\n\n# 2.2 Encryption (Password to Open)\n\nå¶ obfuscation or encryption ä¿¡æ¯å­æ¾äº workbook æµç FilePass Record ä¸­ã\n\nå¦æä½¿ç¨çæ¯ RC4 CryptoAPI å å¯æ¹å¼çè¯ï¼æäº storages å streams è¢«å­å¨å¨ Encryption Stream(è¯¦è§ [MS-OFFCRYPTO] section 2.3.5.3)ãè¿äº storages å streams æ¯å¦è¢«å å¯ç­ä¿¡æ¯è§ä¸è¡¨(reference)ï¼\n\n * \n\nå¶ä¸­å¸¦ (*) æ è®°çï¼è¡¨ç¤ºè¿ä¸ª stream æè storage ä¸­æ stream åå« BIFF records ç»æãå½æ··æ·æå å¯è¿äºæµä¸­ç BIFF è®°å½æ¶ï¼æä»¥ä¸åå®¹éè¦æ³¨æï¼\n\n * record type å record size ä¸å®ä¸å¾æ··æ·æå å¯ã\n * ä»¥ä¸è¿äº record ä¸å®ä¸è½è¢«æ··æ·æå å¯ï¼\n   * BOFãFilePassãUsrExclãFileLockãInterfaceHdrãRRDInfo å RRDHead\n * BoundSheet8 record ç lbPlyPos å­æ®µä¸å®ä¸è½è¢«å å¯ææ··æ·\n\næ³¨æï¼ä¸å¾å¯ä»¥çåºï¼ä¸æ­¢ Workbook Stream å¯ä»¥åå« BIFFï¼User Names StreamãRevision Stream ä¹å¯ä»¥\n\nå¶ä¸­å¸¦ (**) æ è®°çï¼è¡¨ç¤ºè¿ä¸ªæµå½ä¸ä»å½ EncryptionHeader.flags ç 0x08 bit ä¸º 0 æ¶ï¼å¿é¡»æç§æå®æ¹å¼å å¯ã(EncryptionHeader è§ [MS-OFFCRYPTO] section 2.3.5.1)ã\n\nå¨ä½¿ç¨ RC4ãRC4 CAPI ç®æ³å å¯æ¶ï¼éè¦ä»¥ 1024-byte çåæ¥è¿è¡ãä»æ¯ä¸ª BIFF record stream çç¬¬ä¸ä¸ªå­èå¼å§ï¼block number ç½®ä¸º 0ï¼åç»­æ¯ 1024-byte å¢å  1ã\n\n\n# 2.3 XorArrayIndex\n\nå½ä½¿ç¨äº XOR ç®æ³æ¶ï¼XorArrayIndex çå¼çè®¡ç®æ¹æ³ï¼XorArrayIndex = (WorkbookStreamOffset + Data.Length) % 16\n\nä¸æä¸­çåé WorkbookStreamOffset æ¯å¨ record ä¸­çæ¯ä¸ªå­èå¨ Workbook stream ä¸­çåç§»ãå¨åå¥è¿ç¨ä¸­æ­¤åéä¼æ¯å­èéå¢ï¼æä»¥è®¡ç®åºé¦å­èç XorArrayIndex åï¼å³å¯éè¿éå¢å¾å°åç»­å­èç index å¼ã\n\nReference : XLS XOR Data Transformation Method 1\n\næ­¤å¤ï¼ç¨äº XOR ç®æ³çå¯ç é¿åº¦ä¸è½è¶è¿15ä¸ªå­ç¬¦ã\n\n\n# ä¸ãDOC\n\n\n# 3.1 Encryption and Obfuscation (Password to Open)\n\näºè¿å¶æ ¼å¼ç word æä»¶å¯ä»¥éè¿ä»¥ä¸ä¸ç§æ¹å¼è¿è¡å¯ç ä¿æ¤ï¼XOR obfuscationã RC4 encryption ä»¥å RC4 CryptoAPI encryptionã\n\nå½ FibBase.fEncrypted å FibBase.fObfuscated é½ä¸º 1 æ¶, æä»¶è¢«ä½¿ç¨ XOR obfuscation æ¹å¼è¿è¡äºæ··æ·ã\n\nå½ FibBase.fEncrypted å FibBase.fObfuscated é½ä¸º 0 æ¶, æä»¶è¢«ä½¿ç¨ XOR obfuscation æ RC4 encryption æ¹å¼è¿è¡äºå å¯ãæ­¤æ¶ EncryptionHeader ç»æè¢«å­æ¾å¨ Table stream çå¤´é¨ FibBase.lKey ä¸ªå­èä¸­ãèå·ä½ä½¿ç¨åªç§å å¯æ¹å¼ï¼åç± EncryptionHeader.EncryptionVersionInfo ç»æå³å®ã\n\nå¶ä¸­ï¼Table stream å¯ä»¥æ¯ 1Table æ 0Tableï¼å¤å®æ¹æ³å¦ä¸ï¼\n\n * å½ Fib.base.fWhichTblStm == 1 æ¶ï¼ä¸º 1Table stream\n * å½ Fib.base.fWhichTblStm == 0 æ¶ï¼ä¸º 0Table stream\n\nå¦å¤ï¼å¦æææ¡£ä½¿ç¨äº obfuscation æ encryption æ¶, ObjectPool storage, Macros storage, Custom XML Data storage, XML Signatures storage, å Signatures stream å¿å®ä¸è½è¢«å å¯ææ··æ·ã\n\n# XOR Obfuscation\n\nææ¡£ç WordDocument streamãTable stream ä»¥å Data stream å¿é¡»ä½¿ç¨ [MS-OFFCRYPTO] ä¸­ç XOR Data Transformation Method 2 è¿è¡æ··æ·ï¼ææå¶ä»ç streams å storages å¿é¡»ä¸è½(MUST NOT)è¢«æ··æ·ãå¦å¤ï¼ç¨äºå¯ç éªè¯ç password verifier å¿å®å­å¨å¨ FibBase.lKey ä¸­ã\n\næ ¹æ® [[MS-DOC] 2.2.6.1 XOR Obfuscation] çè¯´æï¼å¯¹ WordDocument stream è½¬æ¢å¿é¡»ä»æµçç¬¬ä¸ä¸ªå­èå¼å§è¿è¡ï¼ä½æåç 68 bytes å¿é¡»ç¨åå§çæªè½¬æ¢çå¼ã\n\næ­¤å¤ï¼ç¨äº XOR ç®æ³çå¯ç é¿åº¦ä¸è½è¶è¿15ä¸ªå­ç¬¦ãæä»¥ï¼éè¦å° unicode çå¯ç è½¬æ¢æ single-byte å­ç¬¦ï¼è¿éæä»¥ä¸ä¸¤ç§æ¹å¼ï¼\n\n * ä½¿ç¨ language code identifier (LCID) å° unicode è½¬æ¢ä¸º ANSI å¹¶æªæ­\n * å¯¹æ¯ä¸ª unicode å­ç¬¦ï¼å¦æä½å­èä¸º 0x00ï¼åæ·è´é«å­èå° single-byte; å¦åï¼æ·è´ä½å­èå° single-byteãå¯¹ç»æè¿è¡æªæ­ï¼åªä¿ç 15 ä¸ªå­ç¬¦\n\nå¯¹äºåæä½æ¥è¯´ï¼åºè¯¥ä½¿ç¨ç¬¬äºç§æ¹å¼ãä¸è¿ï¼å¦ææ¯è¯»æä»¶çè¯ï¼åºå½å°è¯ä»¥ä¸ä¸¤ç§æ¹å¼ï¼ä»»æä¸ç§è½å¤å¹éå³å¯è®¤ä¸ºå¯ç æ­£ç¡®ã\n\n# Office Binary Document RC4 Encryption\n\nTable stream çå¤´é¨ FibBase.lKey ä¸ªå­èä¸­ä»¥æªå å¯æªæ··æ·çæ¹å¼å­å¨äº EncryptionHeader ç»æãTable stream çå©ä½é¨å, WordDocument stream çè¶åºæåç 68 bytes çé¨å, ä»¥å Data stream çå¨é¨ï¼å¿é¡»è¢«å å¯ãææå¶ä»ç streams å storages å¿é¡»ä¸è½(MUST NOT)è¢«å å¯ã\n\nè¢«å å¯çä¸ä¸ªæµçæ°æ®å¿é¡»(MUST)ä»¥ 512-byte ç blocks çå½¢å¼è¢«å å¯ãå¨æµçèµ·å§ä½ç½®ï¼block number å¿é¡»è¢«è®¾ç½®ä¸º 0ï¼å¨æ¯ä¸ª 512-byte è¾¹çå¤éå¢ãæ³¨æï¼å å¯ç®æ³å¿é¡»å¨æµçç¬¬ä¸ä¸ªå­èå¼å§è¢«æ§è¡ï¼å°½ç®¡ä¸äºå­èæ¯ä»¥æªå å¯çå½¢å¼è¢«åå¥æä»¶çã\n\n# Office Binary Document RC4 CryptoAPI Encryption\n\nTable stream çå¤´é¨ FibBase.lKey ä¸ªå­èä¸­ä»¥æªå å¯æªæ··æ·çæ¹å¼å­å¨äº EncryptionHeader ç»æãTable stream çå©ä½é¨å, WordDocument stream çè¶åºæåç 68 bytes çé¨å, ä»¥å Data stream çå¨é¨ï¼å¿é¡»è¢«å å¯ã\n\nè¢«å å¯çä¸ä¸ªæµçæ°æ®å¿é¡»(MUST)ä»¥ 512-byte ç blocks çå½¢å¼è¢«å å¯ãå¨æµçèµ·å§ä½ç½®ï¼block number å¿é¡»è¢«è®¾ç½®ä¸º 0ï¼å¨æ¯ä¸ª 512-byte è¾¹çå¤éå¢ãæ³¨æï¼å å¯ç®æ³å¿é¡»å¨æµçç¬¬ä¸ä¸ªå­èå¼å§è¢«æ§è¡ï¼å°½ç®¡ä¸äºå­èæ¯ä»¥æªå å¯çå½¢å¼è¢«åå¥æä»¶çã\n\næ­¤å¤ï¼ObjectPool storage å¿å®ä¸ä¼åºç°ãå¦ææä»¶åå«æ OLE objects çè¯ï¼ç¨äº OLE objects ç storage objects å¿å®(å sprmCPicLocation æè¿°çé£æ ·)è¢«å­å¨å¨ Data stream ä¸­ã\n\nå¦æ EncryptionHeader.Flags ä¸­ç fDocProps è¢«ç½®ä½ï¼é£ä¹ Encryption Stream å¿å®å­å¨ï¼Summary Information stream å¿å®ä¸å­å¨ï¼ä¸ä¸ªè¢«ç¨ä½å ä½ç¬¦ç Document Summary Information stream å¿å®å­å¨ãè¿äºä¿¡æ¯å¨ [MS-OFFCRYPTO] section 2.3.5.4 ä¸­æè¯¦ç»æè¿°ã\n\nå¦æ EncryptionHeader.Flags ä¸­ç fDocProps æ²¡è¢«ç½®ä½ï¼é£ä¹ Document Summary Information stream å Summary Information stream å¿å®æ²¡æè¢«å å¯ã\n\nææå¶ä»ç streams å storages å¿é¡»ä¸è½(MUST NOT)è¢«å å¯ã\n\nç¸å³åè¯è¯´æï¼\n\n * ObjectPool storage\n   * åå«å¤ä¸ªç¨äº embedded OLE objects ç storagesï¼storages ä¸­çæ¯ä¸ä¸ªé½ä¸å®åå«ä¸ä¸ªåä¸º "\\003ObjInfo" çæµï¼å¶ä¸­æä¸ä¸ªç¨äºæè¿° embedded OLE objects ç ODT ç»æ\n * OLE object\n   * æ¯æ Object Linking and Embedding (OLE) åè®®çå¯¹è±¡\n * Encryption Stream\n   * ä¸ä¸ªåä¸º encryption ç stream\n   * å½ä»¥ä¸ä¸¤ä¸ªæ¡ä»¶åæ¶æ»¡è¶³æ¶ï¼å®å¿å®å­å¨ï¼åä¹ï¼å½å®ä»¬ä¸è½åæ¶æ»¡è¶³æ¶ï¼è¿ä¸ª stream å¿å®ä¸ä¼(MUST NOT)åºç°ï¼\n     1. ææ¡£è¢«ä½¿ç¨ Office Binary Document RC4 CryptoAPI Encryption æ¹æ³å å¯\n     2. EncryptionHeader.Flags ä¸­ç fDocProps è¢«ç½®ä½\n\n\n# åãPPT\n\nåªæ¯æ RC4 CryptoAPI å å¯æ¹å¼ãPPT çå å¯ä¿¡æ¯å­å¨å¨ CryptSession10Container record ä¸­\n\nå¯¹äºå å¯ç ppt ææ¡£ï¼å¿å®æ»¡è¶³ä»¥ä¸æ¡ä»¶ï¼\n\n * Current User Stream\n   * å¿å®ä¸è½è¢«å å¯\n   * CurrentUserAtom record ç headerToken å­æ®µåºè¯¥ä¸º 0xF3D1C4DF\n     * æ³¨æ PowerPoint 2002 ä¼ä½¿ç¨ 0xE391C05F æ¥æ è®°æ¯å¦å å¯\n     * æ è®ºå¦ä½ï¼å½ææ¡£è¢«å å¯æ¶ï¼UserEditAtom.encryptSessionPersistIdRef ä¸å®å­å¨å¹¶ä¸ä¸ä¸º 0 (PersistIdRef ä¸º 0 æ¶è¡¨ç¤ºç©ºå¼ç¨)\n * PowerPoint Document Stream\n   * UserEditAtom record å PersistDirectoryAtom record å¿å®ä¸è½è¢«å å¯\n   * CryptSession10Container record ç rh å­æ®µå¿å®ä¸è½è¢«å å¯\n   * CryptSession10Container record çå¶ä»å­æ®µè¢«æç§ [MSOFFCRYPTO] section 2.3.5.1 è¿è¡äºè§£é\n   * stream çå¶å®é¨åå¿å®è¢«å å¯\n   * stream å¿å®æä¸åªæä¸ä¸ª UserEditAtom record\n   * UserEditAtom record ç encryptSessionPersistIdRef å­æ®µå¿å®å­å¨ï¼å®æåä¸ä¸ªå«æ CryptSession10Container record ç persist object.\n     * PowerPoint 97 and PowerPoint 2000 ä¼å¿½ç¥ UserEditAtom.encryptSessionPersistIdRef å­æ®µï¼å ä¸ºä»ä»¬ä¸æ¯æææ¡£ç opening æ creating å å¯\n * Pictures Stream\n   * å¦æå­å¨çè¯ï¼å¿å®è¢«å å¯\n * Summary Info Stream å Document Summary Info Stream\n   * CryptSession10Container.data.EncryptionHeader.Flags ç fDocProps == 0ï¼\n     * Summary Info Stream (åä¸º "\\005SummaryInformation")å¿å®ä¸å­å¨\n     * Encrypted Summary Info Stream (åä¸º "EncryptedSummary")å¿å®å­å¨\n     * Document Summary Info Stream (åä¸º "\\005DocumentSummaryInformation")åºè¯¥å­å¨ï¼ä½æ¯ç©ºç\n   * CryptSession10Container.data.EncryptionHeader.Flags ç fDocProps == 1ï¼\n     * Summary Info Stream å Document Summary Info Stream å¿å®æ²¡è¢«å å¯\n\nè§£å¯ encrypted document çè¢«è§£å¯é¨åï¼éè¦ä¾ç§ä¸é¢çè§åï¼\n\n * For each block number the derived encryption key MUST be generated from the password hash and the block number as specified in [MS-OFFCRYPTO] section 2.3.5.2.\n\nPowerPoint Document Stream ä¸­ç persist object ä¾ç§ä¸è¿°è§åè¢«å å¯ï¼\n\n * å¯¹äºä¸ä¸ª persist object, ç¨äº derived encryption key ç block number å°±æ¯ persist object ç identifier\n * ç¨äº persist object ç derived encryption key å¿é¡»éè¿ password hash å persist object ç identifier çæ\n * å¯¹äºä¸ä¸ª persist object, å¿é¡»ä½¿ç¨ derived encryption key è¿è¡è§£å¯çå­èç±ä¸è¿°æå®ï¼\n   * å¨ PowerPoint Document Stream section ä¸­æè¿°ç persist object çæä»¶åç§»\n   * length in bytes == 8 + (æä»¶åç§»å¤ç) RecordHeader ç recLen å­æ®µ\n * è§£å¯åï¼å­èé¿åº¦èå´ç¬¦å [MS-OFFCRYPTO] ææ¡£è§å®\n\nPictures Stream ä¸­ç picture (ä¹å°±æ¯è¯´ï¼OfficeArtBStoreContainerFileBlock record çæ¯ä¸ªå­æ®µ)ä¾ç§ä¸è¿°è§åè§£å¯:\n\n * derived encryption key å¿é¡»éè¿ password hash å block number ä¸º 0 äº§ç\n * å­æ®µçé¿åº¦å¿é¡»éè¿ derived encryption key è¿è¡è§£å¯\n\n\n# Encryption\n\nppt ææ¡£ä¸­å¯è½æä¸ä¸ªåå­ä¸º "EncryptedSummary" çå¯éæµï¼å®åªå¨è¢«å å¯çææ¡£ä¸­å­å¨ãå½è¿ä¸ªæµå­å¨æ¶ï¼ä¹å¿å®å­å¨ä¸ä¸ªåä¸º "\\0x05DocumentSummaryInformation" çæµï¼èåä¸º "\\0x05SummaryInformation" åå¿å®ä¸è½å­å¨ã\n\nå³äº "EncryptedSummary" è¿ä¸ª Encrypted Summary Stream çè¯¦ç»æè¿°è§ [MS-OFFCRYPTO] section 2.3.5.4ã\n\n\n# Reference\n\n * [MS-Office File Formats]\n * [MS-XLS] - v20210817\n * [MS-OFFCRYPTO] - v20210817',normalizedContent:'# ms-offcrypto\n\nms-offcrypto åªå¯¹ windows office çæï¼æä»¥æä¸äºå¸¸è§çè§åçº¦å®ï¼\n\n * ole ä¸­ç¨äºæå® storages å streams ä½ç½®çè·¯å¾ä½¿ç¨ backslash() ä½ä¸ºåéç¬¦\n * ä»¥ backslash() å¼å§çè·¯å¾æ¯æ ole compound file ç root storage\n * byte ordering é»è®¤æ¯ little-endian\n\n\n# ä¸ãdata spaces\n\ndata spaces ç»ææè¿°äºä¸ç§å­å¨ç»è¿æç§æ¹å¼è½¬æ¢(transformed)åç ole å¤åæä»¶çä¸è´æ§æ¹æ³ãæä»¥ï¼è¯¥ç»æéè¦å­å¨åä¿æ¤çåå®¹(protected content)ååºç¨äºåå®¹çè½¬æ¢ä¿¡æ¯(information about the transforms)ãä¾å¦ï¼ä¸æç irmds å encryption ç­é½æ¯åºäº data spaces ç»æè¿è¡çã\n\ndata spaces ç»æåè®¸å®¢æ·ç«¯åºç¨ç¨åºæè¿°ä¸ä¸ªæå¤ä¸ªä»»æè½¬æ¢ãæ¯ä¸ªåæ¢è¡¨ç¤ºè¦å¯¹åå§ææ¡£åå®¹ä¸­çä¸ç» storages æ streams æ§è¡çåä¸ªä»»ææä½ãä¸ä¸ªæå¤ä¸ªè½¬æ¢å¯ä»¥è¢«ç»åå°ä¸ä¸ª data space çå®ä¹ä¸­ï¼ç¶åè¿ä¸ªå®ä¹å¯ä»¥è¢«åºç¨å°å­å¨äº data space map ä¸­çåå§ææ¡£çä»»æ storages æ streams ä¸­ã\n\n\n# information rights management data space(irmds)\n\nirmds ä¸»è¦åºç¨äºå¼ºåææ¡£çæéç®¡çç­ç¥ãå½å¯¹ä½¿ç¨äºæéç®¡çç­ç¥çææ¡£è¿è¡è¯»ãåãåå»ºæä½æ¶ï¼éè¦ä½¿ç¨å° irmds structureã\n\nirmds å¯ä»¥è¢«åºç¨äºä»¥ä¸ä¸¤ç§ç±»åçææ¡£:\n\n * office binary documents\n * ecma-376 documents\n\n\n\necma, european computer manufacturers associationï¼ ecma376 åè®®ä»£æ office open xml æ ¼å¼\n\nå·ä½çå·®å«å¦ä¸ï¼\n\n# "\\0x06dataspaces\\dataspacemap" stream\n\n 1. office binary document\n\n * è³å°æä¸ä¸ª dataspacemapentry ç»æ\n * å¿é¡»æä¸ä¸ª dataspacemapentry ç»æç dataspacename å­æ®µä¸º "\\009drmdataspace"\n   * æ­¤ç»æä¸­ï¼æä¸åªæä¸ä¸ª referencecomponents ç»æï¼è¡¨ç¤ºä¸ä¸ªåä¸º "\\009drmcontent" ç stream\n * ç¬¬äºç§ dataspacemapentry ç»æç dataspacename å­æ®µå¿é¡»ä¸º "\\009lzxdrmdataspace"\n   * æ­¤ç»æä¸­ï¼æä¸åªæä¸ä¸ª referencecomponents ç»æï¼è¡¨ç¤ºä¸ä¸ªåä¸º "\\009drmviewercontent" ç stream\n\n 2. ecma-376 document\n\n * æä¸åªæä¸ä¸ª dataspacemapentry ç»æï¼è¿ä¸ªç»æç dataspacename å­æ®µä¸º "drmencrypteddataspace"\n   * æ­¤ç»æä¸­ï¼æä¸åªæä¸ä¸ª referencecomponents ç»æï¼è¡¨ç¤ºä¸ä¸ªåä¸º "encryptedpackage" ç stream\n\n# "\\0x06dataspaces\\dataspaceinfo" storage\n\n 1. office binary document\n\n * å¿é¡»åå«ä¸ä¸ªåä¸º "\\009drmdataspace" ç stream\n   * æµä¸­å¿é¡»åå«ä¸ä¸ª dataspacedefinition ç»æï¼æ­¤ç»ææä¸ä»æä¸ä¸ªåä¸º "\\009drmtransform" ç transformreferences\n * å¯è½ä¼åå«ä¸ä¸ªåä¸º "\\009lzxdrmdataspace" ç stream\n   * æµä¸­å¿é¡»åå«ä¸ä¸ªè¿æ ·ç dataspacedefinition ç»æï¼æä¸ä»æä¸¤ä¸ª transformreferences æ¡ç®ï¼"\\009drmtransform" å "\\009lzxtransform"\n\n 2. ecma-376 document\n\n * å¿é¡»åå«ä¸ä¸ªåä¸º "drmencrypteddataspace" ç stream\n   * æµä¸­å¿é¡»å«æä¸ä¸ª dataspacedefinition ç»æï¼æ­¤ç»ææä¸ä»æä¸ä¸ªåä¸º "drmencryptedtransform" ç transformreferences æ¡ç®\n\n# "\\0x06dataspaces\\transforminfo" storage\n\n 1. office binary document\n\n * å¿é¡»åå«ä¸ä¸ªåä¸º "\\009drmtransform" ç storageï¼å¶ä¸å¿é¡»åå«ä¸ä¸ªåä¸º "\\006primary" ç stream (å®æ´è·¯å¾ä¸ºï¼"0x09drmtransform\\0x06primary")ã\n   * æ­¤ stream å¿å®åå« irmdstransforminfo ç»æï¼å¶åå®¹å¦ä¸ï¼\n     * transforminfoheader.transformid must be "{c73dfacd-061f-43b0-8b64-0c620d2a8b50}"\n     * transforminfoheader.transformname must be "microsoft.metadata.drmtransform"\n   * "\\009drmtransform" storage åæ¶å¿é¡»åå«ä¸ä¸ªæå¤ä¸ª end-user license streams\n * å¯è½åå«ä¸ä¸ªåä¸º "\\009lzxtransform" ç storageãå¦ææ­¤ storage å­å¨ï¼åå¶ä¸å¿é¡»å­å¨ä¸ä¸ªåä¸º "\\006primary" ç stream\n   * æ­¤ stream å¿å®åå« transforminfoheader ç»æï¼å¶åå®¹å¦ä¸ï¼\n     * transformtype must be 0x00000001\n     * transformid must be "{86de7f2b-ddce-486d-b016-405bbe82b8bc}"\n     * transformname must be "microsoft.metadata.compressiontransform"\n\n 2. ecma-376 document\n\n * å¿é¡»åå«ä¸ä¸ªåä¸º "drmencryptedtransform" ç storageï¼æ­¤ storage ä¸å¿é¡»åå«ä¸ä¸ªåä¸º "\\006primary" ç stream\n   * æ­¤ stream å¿å®åå« irmdstransforminfo ç»æï¼å¶åå®¹å¦ä¸ï¼\n     * transforminfoheader.transformid must be ""{c73dfacd-061f-43b0-8b64-0c620d2a8b50}"\n     * transforminfoheader.transformname must be "microsoft.metadata.drmtransform"\n   * "drmencryptedtransform" storage åæ¶å¿é¡»åå«ä¸ä¸ªæå¤ä¸ª end-user license streams\n\nä¸æä¸­æ¶åå°ç end-user license streamï¼å¶ä¸­åå«äºç¼å­ç licenses ä¿¡æ¯ãè¿äº end-user license stream çå½åå¿é¡»ä»¥ "eul-" ä¸ºåç¼ï¼ä¸ºï¼"eul-" + "ä¸ä¸ª base-32-encoded çguid"ã\n\n\n# protected content stream\n\nprotected content stream å¿é¡»æ¯å¨ root storage ä¸­ãå¦æåå§ææ¡£æ¯ ecma-376 æ¶ï¼æµçåå­å¿å®æ¯ "encryptedpackage"ï¼åå§ææ¡£æ¯ä»»æå¶ä»æ ¼å¼æ¶, æµçåå­ä¸å®æ¯ "\\0x09drmcontent"ã\n\nèè¿ä¸ªåä¿æ¤çæµç±: length(8 bytes) + contents(variable) ç»æã\n\nå¶ä¸­ contents æ¯ä½¿ç¨å¯¹ç§°å¯é¥ï¼aes-128 ç®æ³, 16-byte block size, electronic codebook (ecb) mode ä»¥å å¨ 0 çåå§åéè¿è¡å è§£å¯çã\n\n\n# encryption and obfuscation\n\nåºç¨äº ms-office çå å¯åæ··æ·çå±æåç§ä¸åçææ¯ï¼\n\n 1. xor obfuscation\n\n * å¯¹è±¡ï¼[ms-xls] and [ms-doc]\n * æ¹æ³ï¼å¯¹ office binary document çé¨å(storage æ stream)æ§è¡å°±å°æ··æ·\n * ç»èï¼åå«ä¸¤ç§æ¹æ³ï¼method 1 å method 2\n   * method 1 åºç¨äº excel binary file format (.xls) ç structures å procedures\n   * method 2 åºç¨äº word binary file format (.doc) ç structures å procedures\n\n 2. 40-bit rc4 encryption\n\n * å¯¹è±¡ï¼[ms-xls] and [ms-doc]\n * æ¹æ³ï¼å¯¹ office binary document çé¨å(storage æ stream)æ§è¡å°±å°å å¯\n * ç»èï¼\n   * ç®æ³ä¸­ç hash å½æ°ä¸º md5\n   * é¤éç¹æ®è¯´æï¼å¦åï¼æå¤§å¯ç é¿åº¦ä¸ºï¼255 unicode characters\n\n 3. rc4 cryptoapi encryption\n\n * å¯¹è±¡ï¼[ms-xls], [ms-doc], and [ms-ppt]\n * æ¹æ³ï¼å¯è½ä¼æä¸ä¸ª encrypted summary stream è¢«åå»ºï¼ä¹è½å¯¹å¶ä» stream æ§è¡å°±å°å å¯\n * ç»èï¼\n   * é¤éç¹æ®è¯´æï¼å¦åï¼æå¤§å¯ç é¿åº¦ä¸ºï¼255 unicode characters\n   * sha-1 hash æ¯ 160 bits, è rc4 ç key æå¤§é¿åº¦æ¯ 128 bits; å æ­¤, key å¿å®å°äºæç­äº 128 bitsã\n     * å¦æ key åªæ 40 bitsï¼è¯´æè¿æ¯ä¸ä¸ªéå¸¸èççæ¬ï¼æ­¤æ¶å å¯ç®æ³å¿é¡»åå»ºä¸ä¸ªç± hfinal çå 40 bits å 88 bits ç 0 æ¼æ¥èæç 128-bit ç key\n\n 4. ecma-376 document encryption\n\n * å¯¹è±¡ï¼[ecma-376]\n * æ¹æ³ï¼å©ç¨ data spaces åè½å° [ecma-376] ææ¡£å å¯æäº ole ä¸­çä¸ä¸ª stream\n * ç»èï¼ä¸å±æä¸ç§æ¹æ³ï¼\n   * standard encryption:\n     * å©ç¨äºè¿å¶(binary)ç±»åç encryptioninfo ç»æå­å¨å å¯ä¿¡æ¯ï¼ä½¿ç¨ aes ä½ä¸ºå å¯ç®æ³ï¼sha-1 ä½ä¸ºæ£å(hash)ç®æ³\n   * agile encryption:\n     * å©ç¨ xml å­æ¾å å¯ä¿¡æ¯ãå å¯åæ£åç®æ³å¨ç»æä¸­æå®ï¼å¯ä»¥ä½¿ç¨ä¸»æºæ¯æçä»»ä½å å¯ç®æ³ãè¿æ¯ææ°æ®å®æ´æ§æ ¡éªã\n   * extensible encryption:\n     * æ­¤æ¹æ³ä½¿ç¨å¯æ©å±çæºå¶æ¥åè®¸ä½¿ç¨ä»»æçç¬¬ä¸æ¹å å¯æ©å±æ¨¡å\n\næ³¨ï¼ecma-376 å rc4 cryptoapi å å¯ç®æ³é½ä½¿ç¨å°äº encryptionheader ç»æ\n\n# ecma-376 document encryption\n\n 1. "\\0x06dataspaces\\dataspacemap" stream\n\n * å¿é¡»åå«ä¸ä¸ª dataspacemap ç»æï¼å¶ä¸­æä¸åªæä¸ä¸ª dataspacemapentry ç»æ\n   * æ­¤ç»æç dataspacename å­æ®µä¸º "strongencryptiondataspace"\n   * æ­¤ç»æä¸­ï¼æä¸åªæä¸ä¸ª referencecomponents ç»æï¼è¡¨ç¤ºä¸ä¸ªåä¸º "encryptedpackage" ç stream\n\n 2. "\\0x06dataspaces\\transforminfo" storage\n\n * å¿é¡»åå«ä¸ä¸ªåä¸º "strongencryptiontransform" ç storageï¼å¶ä¸å¿é¡»åå«ä¸ä¸ªåä¸º "\\006primary" ç stream\n   * è¿ä¸ªæµå¿é¡»åå«ä¸ä¸ª irmdstransforminfo ç»æï¼å¶åå®¹å¦ä¸ï¼\n     * transforminfoheader.transformtype must be 0x00000001\n     * transforminfoheader.transformid must be "{ff9a3f03-56ef-4613-bdd5-5a41c1d07246}"\n     * transforminfoheader.transformname must be "microsoft.container.encryptiontransform".\n   * ç´§è·ç irmdstransforminfo çæ¯ä¸ä¸ª encryptiontransforminfo ç»æ\n     * å¦æ encryptioninfo å encryptiontransforminfo ä¸­çç®æ³ä¸ä¸è´æ¶ï¼è®¤ä¸º encryptioninfo ä¸­çæ´å æå¨ã\n     * å¦æä½¿ç¨ agile encryption æ¶ï¼encryptiontransforminfo ç encryptionname å­æ®µå¿é¡»ä¸ºç©ºå­ç¬¦ä¸²(0x00000000)\n\n 3. "\\encryptedpackage" stream\n\n * æ¯ä¸ä¸ªå å¯ç streamï¼å®åå«äºå®æ´ç(åç¼©åç) ecma376 åæä»¶\n   * ç± streamsize(8 bytes) + encrypteddata(variable) ç»æ\n   * streamsize ææ encrypteddata çå­èæ°ãå¦å¤ï¼streamsize çå¤§å°å®éä¸å¯è½ä¼ä¸æµçå¤§å°æåºå¥ï¼è¿ä¾èµäºæç¨å å¯ç®æ³ç block size\n\n 4. "\\encryptioninfo" stream\n\n * standard encryption\n   * åå«ç¨äºåå§åç¨äºå å¯ "\\encryptedpackage" æµçå¯ç å­¦è¯¦ç»ä¿¡æ¯\n * agile encryption\n   * åå«ç¨äºåå§åç¨äºå å¯ "\\encryptedpackage" æµçå¯ç å­¦è¯¦ç»ä¿¡æ¯\n * extensible encryption\n   * ecma-376 ææ¡£å¯ä»¥éæ©ä½¿ç¨ç¨æ·æä¾çèªå®ä¹ï¼å¯æ©å±ï¼å å¯æ¨¡åãå½ä½¿ç¨å¯æ©å±å å¯æ¶ï¼\\encryptioninfo æµçç»ææè¿°ä¸åäºæ åæ¨¡å¼ï¼è¯¦ç»å¯ä»¥åèææ¡£[ms-offcrypto]\n\n# office binary document encryption\n\nxorãrc4 ä»¥å rc4 cryptoapi é½å¯ä»¥åºç¨äº office binary document æä»¶ã\n\nè¯¦ç»ä¿¡æ¯è§æ¬ææ¡£å³äº [xls]ã[doc]ã [ppt] çæè¿°ã\n\n\n# write protection\n\n# ecma-376 document write protection\n\necma-376 ææ¡£ç write protection å¨ [ecma-376] ææ¡£ç part 4 ä¸­ç sections 2.15.1.28, 2.15.1.94, 3.2.12, å 4.3.1.17 ä¸­æè¯¦ç»æè¿°ã\n\n# binary document write protection\n\näºè¿å¶ç±»å office ææ¡£çåºäº password ç write protection æ ¹æ®æä»¶æ ¼å¼çä¸åå·æä¸åçç»è, å¤§è´å¦ä¸ï¼\n\n * .xls\n   * å¯ç è¢«è½¬æ¢æäºä¸ä¸ª 16-bit ç password verifier, å¹¶å°å¶ä¾ [ms-xls] ææ¡£è¿è¡å­å¨, åæ¶ï¼ææ¡£ä¼è¢«å å¯ãå¦æç¨æ·æªæä¾å å¯å¯ç ï¼ä¼ä½¿ç¨ä¸ä¸ªåºå®å¯ç ã\n     * é»è®¤å¯ç æ¯ï¼\\x56\\x65\\x6c\\x76\\x65\\x74\\x53\\x77\\x65\\x61\\x74\\x73\\x68\\x6f\\x70(ä¹å¯ä»¥è¡¨ç¤ºä¸ºï¼velvetsweatshop)\n   * ä½¿ç¨ write protection çåæ¶ï¼ä¾ç¶å¯ä»¥æç§ encryption çæè¿°è¿è¡å å¯\n   * è¯¦ç»åå®¹åè [ms-xls] section 2.2.9\n * .doc\n   * å¯ç ä»¥ææå½¢å¼å­å¨ï¼å¹¶ä¸ææ¡£åå®¹æªè¢«å å¯ã\n   * è¯¦ç»åå®¹åè [ms-doc] section 2.9.276\n * .ppt\n   * å¯ç ä»¥ææå½¢å¼å­å¨ï¼å¹¶ä¸ææ¡£å¯ä»¥è¢«å å¯ãå¦æææ¡£è¢«å å¯ï¼ä½ç¨æ·æªæä¾å å¯å¯ç æ¶ï¼ä¼ä½¿ç¨ä¸ä¸ªåºå®å¯ç ã\n     * é»è®¤å¯ç æ¯ï¼\\x2f\\x30\\x31\\x48\\x61\\x6e\\x6e\\x65\\x73\\x20\\x52\\x75\\x65\\x73\\x63\\x68\\x65\\x72\\x2f\\x30\\x31(ä¹å¯ä»¥è¡¨ç¤ºä¸ºï¼/01hannes ruescher/01)\n   * ä½¿ç¨ write protection çåæ¶ï¼ä¸åºè¯¥(should not)åæç§ encryption ä¸­æè¿°çç®æ³è¿è¡å å¯\n   * è¯¦ç»åå®¹åè [ms-ppt] section 2.4.7\n\nå¦å¤è¿æ iso write protection methodï¼ å¶æ¨å¨ä¸ iso/iec 29500 å¼å®¹\n\n\n# digital signatures\n\n# ecma-376 document digital signatures\n\nç¨äº ecma-376 documents ç xmldsig æ°å­ç­¾å å ç¨äº office binary documents ç xmldsig æ°å­ç­¾åéå¸¸ç¸ä¼¼ãè¯¦ç»åå®¹åè [ecma-376] part 2 section 12.2.4ã\n\n# binary document digital signatures\n\näºè¿å¶ç±»å office ææ¡£å¯ä»¥ä½¿ç¨ä¸è¿°æ¹æ³ä¸­çä»»æä¸ç§è¿è¡ç­¾åï¼\n\n 1. cryptoapi digital signature\n    * ä»¥äºè¿å¶å½¢å¼å­å¨å¨ _signatures storage ä¸­\n    * è¯¦ç»åå®¹åè [ms-offcrypto] section 2.5.1\n 2. xmldsig digital signature\n\n * ä»¥ xml-signature è¯­æ³åå¤çæ¹å¼(è¯¦è§[xmldsig])å­å¨å¨ _xmlsignatures storage ä¸­\n * è¯¦ç»åå®¹åè [ms-offcrypto] section 2.5.2\n\n\n# äºãxls\n\nè¿éä¸»è¦å³æ³¨ encryptionã\n\n\n# 2.1 password verifier algorithm\n\nä¸äº records (password, filesharing, prot4revpass, featprotection, å filepass) ä¼å©ç¨ password verifier æ¥éå®æè§£éå¯¹ workbook é¨ååå®¹çæ¥çæç¼è¾ãè¿ä¸ª password verifier çè®¾è®¡ä¸»è¦æ¯ä¸ºäºé²æ­¢æå¤ç¼è¾ï¼èä¸æ¯å®å¨ç¹æ§ã\n\nit is possible to remove the passwords by removing the records containing the verifier values.\n\nè¿ä¸ª verifier çå¼ç±ä¸¤ä¸ªé¶æ®µè®¡ç®:\n\n * å° unicode ç password è½¬æ¢ä¸ºå½åç³»ç»ç ansi å­ç¬¦ç¼ç \n   * ä»»ä½ä¸è½è¢«è½¬æ¢ä¸º ansi å­ç¬¦ç¼ç ç unicode å­ç¬¦ç¨ 0x3f æ¿æ¢ã\n   * è¿ä¸ªæ¿æ¢å¨ä½å¨éªè¯ hash æ¶å°çææ­£æ°åå¸å¼å¹éãå¨æäºè¯­è¨ç¯å¢ä¸­ï¼è¿äºå­ç¬¦å¯è½æ¯æ¥å¸¸å­ç¬¦éçéè¦ç»æé¨åã\n * ä½¿ç¨ [ms-offcrypto] ä¸­æå®ç xor obfuscation ç®æ³(binary document password verifier derivation method 1)è®¡ç®åº16-bit ç password verifier å¼\n\n# password record\n\npassword record ä¸º sheet or workbook æå®äº password verifierãå¦æ record ç»æä¸­ç wpassword å¼ä¸º 0ï¼åè¡¨ç¤ºæ²¡æå¯ç ã\n\nå¦ææ­¤ record å­å¨äº globals substream, é£ä¹å®æ¯æ´ä¸ª workbook çå¯ç . å¦ææ­¤ record å­å¨äº worksheet substream, chart sheet substream, macro sheet substream, or dialog sheet substream, é£ä¹å®ä»ä»éç¨äºé£ä¸ª sheetã\n\næ­¤å¤ï¼workbook ä¸­å¿å®å­å¨æ­¤ recordï¼è sheet åå½ä¸ä»å½æå¯ç æ¶æå­å¨æ­¤ recordã\n\n\n# 2.2 encryption (password to open)\n\nå¶ obfuscation or encryption ä¿¡æ¯å­æ¾äº workbook æµç filepass record ä¸­ã\n\nå¦æä½¿ç¨çæ¯ rc4 cryptoapi å å¯æ¹å¼çè¯ï¼æäº storages å streams è¢«å­å¨å¨ encryption stream(è¯¦è§ [ms-offcrypto] section 2.3.5.3)ãè¿äº storages å streams æ¯å¦è¢«å å¯ç­ä¿¡æ¯è§ä¸è¡¨(reference)ï¼\n\n * \n\nå¶ä¸­å¸¦ (*) æ è®°çï¼è¡¨ç¤ºè¿ä¸ª stream æè storage ä¸­æ stream åå« biff records ç»æãå½æ··æ·æå å¯è¿äºæµä¸­ç biff è®°å½æ¶ï¼æä»¥ä¸åå®¹éè¦æ³¨æï¼\n\n * record type å record size ä¸å®ä¸å¾æ··æ·æå å¯ã\n * ä»¥ä¸è¿äº record ä¸å®ä¸è½è¢«æ··æ·æå å¯ï¼\n   * bofãfilepassãusrexclãfilelockãinterfacehdrãrrdinfo å rrdhead\n * boundsheet8 record ç lbplypos å­æ®µä¸å®ä¸è½è¢«å å¯ææ··æ·\n\næ³¨æï¼ä¸å¾å¯ä»¥çåºï¼ä¸æ­¢ workbook stream å¯ä»¥åå« biffï¼user names streamãrevision stream ä¹å¯ä»¥\n\nå¶ä¸­å¸¦ (**) æ è®°çï¼è¡¨ç¤ºè¿ä¸ªæµå½ä¸ä»å½ encryptionheader.flags ç 0x08 bit ä¸º 0 æ¶ï¼å¿é¡»æç§æå®æ¹å¼å å¯ã(encryptionheader è§ [ms-offcrypto] section 2.3.5.1)ã\n\nå¨ä½¿ç¨ rc4ãrc4 capi ç®æ³å å¯æ¶ï¼éè¦ä»¥ 1024-byte çåæ¥è¿è¡ãä»æ¯ä¸ª biff record stream çç¬¬ä¸ä¸ªå­èå¼å§ï¼block number ç½®ä¸º 0ï¼åç»­æ¯ 1024-byte å¢å  1ã\n\n\n# 2.3 xorarrayindex\n\nå½ä½¿ç¨äº xor ç®æ³æ¶ï¼xorarrayindex çå¼çè®¡ç®æ¹æ³ï¼xorarrayindex = (workbookstreamoffset + data.length) % 16\n\nä¸æä¸­çåé workbookstreamoffset æ¯å¨ record ä¸­çæ¯ä¸ªå­èå¨ workbook stream ä¸­çåç§»ãå¨åå¥è¿ç¨ä¸­æ­¤åéä¼æ¯å­èéå¢ï¼æä»¥è®¡ç®åºé¦å­èç xorarrayindex åï¼å³å¯éè¿éå¢å¾å°åç»­å­èç index å¼ã\n\nreference : xls xor data transformation method 1\n\næ­¤å¤ï¼ç¨äº xor ç®æ³çå¯ç é¿åº¦ä¸è½è¶è¿15ä¸ªå­ç¬¦ã\n\n\n# ä¸ãdoc\n\n\n# 3.1 encryption and obfuscation (password to open)\n\näºè¿å¶æ ¼å¼ç word æä»¶å¯ä»¥éè¿ä»¥ä¸ä¸ç§æ¹å¼è¿è¡å¯ç ä¿æ¤ï¼xor obfuscationã rc4 encryption ä»¥å rc4 cryptoapi encryptionã\n\nå½ fibbase.fencrypted å fibbase.fobfuscated é½ä¸º 1 æ¶, æä»¶è¢«ä½¿ç¨ xor obfuscation æ¹å¼è¿è¡äºæ··æ·ã\n\nå½ fibbase.fencrypted å fibbase.fobfuscated é½ä¸º 0 æ¶, æä»¶è¢«ä½¿ç¨ xor obfuscation æ rc4 encryption æ¹å¼è¿è¡äºå å¯ãæ­¤æ¶ encryptionheader ç»æè¢«å­æ¾å¨ table stream çå¤´é¨ fibbase.lkey ä¸ªå­èä¸­ãèå·ä½ä½¿ç¨åªç§å å¯æ¹å¼ï¼åç± encryptionheader.encryptionversioninfo ç»æå³å®ã\n\nå¶ä¸­ï¼table stream å¯ä»¥æ¯ 1table æ 0tableï¼å¤å®æ¹æ³å¦ä¸ï¼\n\n * å½ fib.base.fwhichtblstm == 1 æ¶ï¼ä¸º 1table stream\n * å½ fib.base.fwhichtblstm == 0 æ¶ï¼ä¸º 0table stream\n\nå¦å¤ï¼å¦æææ¡£ä½¿ç¨äº obfuscation æ encryption æ¶, objectpool storage, macros storage, custom xml data storage, xml signatures storage, å signatures stream å¿å®ä¸è½è¢«å å¯ææ··æ·ã\n\n# xor obfuscation\n\nææ¡£ç worddocument streamãtable stream ä»¥å data stream å¿é¡»ä½¿ç¨ [ms-offcrypto] ä¸­ç xor data transformation method 2 è¿è¡æ··æ·ï¼ææå¶ä»ç streams å storages å¿é¡»ä¸è½(must not)è¢«æ··æ·ãå¦å¤ï¼ç¨äºå¯ç éªè¯ç password verifier å¿å®å­å¨å¨ fibbase.lkey ä¸­ã\n\næ ¹æ® [[ms-doc] 2.2.6.1 xor obfuscation] çè¯´æï¼å¯¹ worddocument stream è½¬æ¢å¿é¡»ä»æµçç¬¬ä¸ä¸ªå­èå¼å§è¿è¡ï¼ä½æåç 68 bytes å¿é¡»ç¨åå§çæªè½¬æ¢çå¼ã\n\næ­¤å¤ï¼ç¨äº xor ç®æ³çå¯ç é¿åº¦ä¸è½è¶è¿15ä¸ªå­ç¬¦ãæä»¥ï¼éè¦å° unicode çå¯ç è½¬æ¢æ single-byte å­ç¬¦ï¼è¿éæä»¥ä¸ä¸¤ç§æ¹å¼ï¼\n\n * ä½¿ç¨ language code identifier (lcid) å° unicode è½¬æ¢ä¸º ansi å¹¶æªæ­\n * å¯¹æ¯ä¸ª unicode å­ç¬¦ï¼å¦æä½å­èä¸º 0x00ï¼åæ·è´é«å­èå° single-byte; å¦åï¼æ·è´ä½å­èå° single-byteãå¯¹ç»æè¿è¡æªæ­ï¼åªä¿ç 15 ä¸ªå­ç¬¦\n\nå¯¹äºåæä½æ¥è¯´ï¼åºè¯¥ä½¿ç¨ç¬¬äºç§æ¹å¼ãä¸è¿ï¼å¦ææ¯è¯»æä»¶çè¯ï¼åºå½å°è¯ä»¥ä¸ä¸¤ç§æ¹å¼ï¼ä»»æä¸ç§è½å¤å¹éå³å¯è®¤ä¸ºå¯ç æ­£ç¡®ã\n\n# office binary document rc4 encryption\n\ntable stream çå¤´é¨ fibbase.lkey ä¸ªå­èä¸­ä»¥æªå å¯æªæ··æ·çæ¹å¼å­å¨äº encryptionheader ç»æãtable stream çå©ä½é¨å, worddocument stream çè¶åºæåç 68 bytes çé¨å, ä»¥å data stream çå¨é¨ï¼å¿é¡»è¢«å å¯ãææå¶ä»ç streams å storages å¿é¡»ä¸è½(must not)è¢«å å¯ã\n\nè¢«å å¯çä¸ä¸ªæµçæ°æ®å¿é¡»(must)ä»¥ 512-byte ç blocks çå½¢å¼è¢«å å¯ãå¨æµçèµ·å§ä½ç½®ï¼block number å¿é¡»è¢«è®¾ç½®ä¸º 0ï¼å¨æ¯ä¸ª 512-byte è¾¹çå¤éå¢ãæ³¨æï¼å å¯ç®æ³å¿é¡»å¨æµçç¬¬ä¸ä¸ªå­èå¼å§è¢«æ§è¡ï¼å°½ç®¡ä¸äºå­èæ¯ä»¥æªå å¯çå½¢å¼è¢«åå¥æä»¶çã\n\n# office binary document rc4 cryptoapi encryption\n\ntable stream çå¤´é¨ fibbase.lkey ä¸ªå­èä¸­ä»¥æªå å¯æªæ··æ·çæ¹å¼å­å¨äº encryptionheader ç»æãtable stream çå©ä½é¨å, worddocument stream çè¶åºæåç 68 bytes çé¨å, ä»¥å data stream çå¨é¨ï¼å¿é¡»è¢«å å¯ã\n\nè¢«å å¯çä¸ä¸ªæµçæ°æ®å¿é¡»(must)ä»¥ 512-byte ç blocks çå½¢å¼è¢«å å¯ãå¨æµçèµ·å§ä½ç½®ï¼block number å¿é¡»è¢«è®¾ç½®ä¸º 0ï¼å¨æ¯ä¸ª 512-byte è¾¹çå¤éå¢ãæ³¨æï¼å å¯ç®æ³å¿é¡»å¨æµçç¬¬ä¸ä¸ªå­èå¼å§è¢«æ§è¡ï¼å°½ç®¡ä¸äºå­èæ¯ä»¥æªå å¯çå½¢å¼è¢«åå¥æä»¶çã\n\næ­¤å¤ï¼objectpool storage å¿å®ä¸ä¼åºç°ãå¦ææä»¶åå«æ ole objects çè¯ï¼ç¨äº ole objects ç storage objects å¿å®(å sprmcpiclocation æè¿°çé£æ ·)è¢«å­å¨å¨ data stream ä¸­ã\n\nå¦æ encryptionheader.flags ä¸­ç fdocprops è¢«ç½®ä½ï¼é£ä¹ encryption stream å¿å®å­å¨ï¼summary information stream å¿å®ä¸å­å¨ï¼ä¸ä¸ªè¢«ç¨ä½å ä½ç¬¦ç document summary information stream å¿å®å­å¨ãè¿äºä¿¡æ¯å¨ [ms-offcrypto] section 2.3.5.4 ä¸­æè¯¦ç»æè¿°ã\n\nå¦æ encryptionheader.flags ä¸­ç fdocprops æ²¡è¢«ç½®ä½ï¼é£ä¹ document summary information stream å summary information stream å¿å®æ²¡æè¢«å å¯ã\n\nææå¶ä»ç streams å storages å¿é¡»ä¸è½(must not)è¢«å å¯ã\n\nç¸å³åè¯è¯´æï¼\n\n * objectpool storage\n   * åå«å¤ä¸ªç¨äº embedded ole objects ç storagesï¼storages ä¸­çæ¯ä¸ä¸ªé½ä¸å®åå«ä¸ä¸ªåä¸º "\\003objinfo" çæµï¼å¶ä¸­æä¸ä¸ªç¨äºæè¿° embedded ole objects ç odt ç»æ\n * ole object\n   * æ¯æ object linking and embedding (ole) åè®®çå¯¹è±¡\n * encryption stream\n   * ä¸ä¸ªåä¸º encryption ç stream\n   * å½ä»¥ä¸ä¸¤ä¸ªæ¡ä»¶åæ¶æ»¡è¶³æ¶ï¼å®å¿å®å­å¨ï¼åä¹ï¼å½å®ä»¬ä¸è½åæ¶æ»¡è¶³æ¶ï¼è¿ä¸ª stream å¿å®ä¸ä¼(must not)åºç°ï¼\n     1. ææ¡£è¢«ä½¿ç¨ office binary document rc4 cryptoapi encryption æ¹æ³å å¯\n     2. encryptionheader.flags ä¸­ç fdocprops è¢«ç½®ä½\n\n\n# åãppt\n\nåªæ¯æ rc4 cryptoapi å å¯æ¹å¼ãppt çå å¯ä¿¡æ¯å­å¨å¨ cryptsession10container record ä¸­\n\nå¯¹äºå å¯ç ppt ææ¡£ï¼å¿å®æ»¡è¶³ä»¥ä¸æ¡ä»¶ï¼\n\n * current user stream\n   * å¿å®ä¸è½è¢«å å¯\n   * currentuseratom record ç headertoken å­æ®µåºè¯¥ä¸º 0xf3d1c4df\n     * æ³¨æ powerpoint 2002 ä¼ä½¿ç¨ 0xe391c05f æ¥æ è®°æ¯å¦å å¯\n     * æ è®ºå¦ä½ï¼å½ææ¡£è¢«å å¯æ¶ï¼usereditatom.encryptsessionpersistidref ä¸å®å­å¨å¹¶ä¸ä¸ä¸º 0 (persistidref ä¸º 0 æ¶è¡¨ç¤ºç©ºå¼ç¨)\n * powerpoint document stream\n   * usereditatom record å persistdirectoryatom record å¿å®ä¸è½è¢«å å¯\n   * cryptsession10container record ç rh å­æ®µå¿å®ä¸è½è¢«å å¯\n   * cryptsession10container record çå¶ä»å­æ®µè¢«æç§ [msoffcrypto] section 2.3.5.1 è¿è¡äºè§£é\n   * stream çå¶å®é¨åå¿å®è¢«å å¯\n   * stream å¿å®æä¸åªæä¸ä¸ª usereditatom record\n   * usereditatom record ç encryptsessionpersistidref å­æ®µå¿å®å­å¨ï¼å®æåä¸ä¸ªå«æ cryptsession10container record ç persist object.\n     * powerpoint 97 and powerpoint 2000 ä¼å¿½ç¥ usereditatom.encryptsessionpersistidref å­æ®µï¼å ä¸ºä»ä»¬ä¸æ¯æææ¡£ç opening æ creating å å¯\n * pictures stream\n   * å¦æå­å¨çè¯ï¼å¿å®è¢«å å¯\n * summary info stream å document summary info stream\n   * cryptsession10container.data.encryptionheader.flags ç fdocprops == 0ï¼\n     * summary info stream (åä¸º "\\005summaryinformation")å¿å®ä¸å­å¨\n     * encrypted summary info stream (åä¸º "encryptedsummary")å¿å®å­å¨\n     * document summary info stream (åä¸º "\\005documentsummaryinformation")åºè¯¥å­å¨ï¼ä½æ¯ç©ºç\n   * cryptsession10container.data.encryptionheader.flags ç fdocprops == 1ï¼\n     * summary info stream å document summary info stream å¿å®æ²¡è¢«å å¯\n\nè§£å¯ encrypted document çè¢«è§£å¯é¨åï¼éè¦ä¾ç§ä¸é¢çè§åï¼\n\n * for each block number the derived encryption key must be generated from the password hash and the block number as specified in [ms-offcrypto] section 2.3.5.2.\n\npowerpoint document stream ä¸­ç persist object ä¾ç§ä¸è¿°è§åè¢«å å¯ï¼\n\n * å¯¹äºä¸ä¸ª persist object, ç¨äº derived encryption key ç block number å°±æ¯ persist object ç identifier\n * ç¨äº persist object ç derived encryption key å¿é¡»éè¿ password hash å persist object ç identifier çæ\n * å¯¹äºä¸ä¸ª persist object, å¿é¡»ä½¿ç¨ derived encryption key è¿è¡è§£å¯çå­èç±ä¸è¿°æå®ï¼\n   * å¨ powerpoint document stream section ä¸­æè¿°ç persist object çæä»¶åç§»\n   * length in bytes == 8 + (æä»¶åç§»å¤ç) recordheader ç reclen å­æ®µ\n * è§£å¯åï¼å­èé¿åº¦èå´ç¬¦å [ms-offcrypto] ææ¡£è§å®\n\npictures stream ä¸­ç picture (ä¹å°±æ¯è¯´ï¼officeartbstorecontainerfileblock record çæ¯ä¸ªå­æ®µ)ä¾ç§ä¸è¿°è§åè§£å¯:\n\n * derived encryption key å¿é¡»éè¿ password hash å block number ä¸º 0 äº§ç\n * å­æ®µçé¿åº¦å¿é¡»éè¿ derived encryption key è¿è¡è§£å¯\n\n\n# encryption\n\nppt ææ¡£ä¸­å¯è½æä¸ä¸ªåå­ä¸º "encryptedsummary" çå¯éæµï¼å®åªå¨è¢«å å¯çææ¡£ä¸­å­å¨ãå½è¿ä¸ªæµå­å¨æ¶ï¼ä¹å¿å®å­å¨ä¸ä¸ªåä¸º "\\0x05documentsummaryinformation" çæµï¼èåä¸º "\\0x05summaryinformation" åå¿å®ä¸è½å­å¨ã\n\nå³äº "encryptedsummary" è¿ä¸ª encrypted summary stream çè¯¦ç»æè¿°è§ [ms-offcrypto] section 2.3.5.4ã\n\n\n# reference\n\n * [ms-office file formats]\n * [ms-xls] - v20210817\n * [ms-offcrypto] - v20210817',charsets:{cjk:!0}},{title:"PDF æ ¼å¼ç®æ",frontmatter:{title:"PDF æ ¼å¼ç®æ",date:"2021-06-18T13:50:00.000Z",lastmod:null,description:"PDFæ ¼å¼è§£æï¼æ·±å¥PDFåé¨ç»æ",categories:["skills","devops"],tags:[null],permalink:null},regularPath:"/blog/skills/pdf/pdf_struct.html",relativePath:"blog/skills/pdf/pdf_struct.md",key:"v-34bb950d",path:"/blog/skills/pdf/pdf_struct.html",headers:[{level:2,title:"1. Introduce",slug:"_1-introduce",normalizedTitle:"1. introduce",charIndex:15},{level:2,title:"2. File Structure",slug:"_2-file-structure",normalizedTitle:"2. file structure",charIndex:852},{level:3,title:"2.1 Header",slug:"_2-1-header",normalizedTitle:"2.1 header",charIndex:2559},{level:3,title:"2.2 Trailer",slug:"_2-2-trailer",normalizedTitle:"2.2 trailer",charIndex:3170},{level:3,title:"2.3 Cross-Reference Table",slug:"_2-3-cross-reference-table",normalizedTitle:"2.3 cross-reference table",charIndex:4100},{level:3,title:"2.4 Body",slug:"_2-4-body",normalizedTitle:"2.4 body",charIndex:5627},{level:3,title:"2.5 Increamental update",slug:"_2-5-increamental-update",normalizedTitle:"2.5 increamental update",charIndex:8742},{level:2,title:"4. Fix Pdf Structure",slug:"_4-fix-pdf-structure",normalizedTitle:"4. fix pdf structure",charIndex:9040},{level:2,title:"5 Document structure",slug:"_5-document-structure",normalizedTitle:"5 document structure",charIndex:9611},{level:3,title:"5.1 Catalog",slug:"_5-1-catalog",normalizedTitle:"5.1 catalog",charIndex:9638},{level:3,title:"5.2 Common Data Structures",slug:"_5-2-common-data-structures",normalizedTitle:"5.2 common data structures",charIndex:10077},{level:3,title:"5.3 PageLabel",slug:"_5-3-pagelabel",normalizedTitle:"5.3 pagelabel",charIndex:12890},{level:3,title:"5.4 Outlines",slug:"_5-4-outlines",normalizedTitle:"5.4 outlines",charIndex:13308},{level:3,title:"5.5 Action",slug:"_5-5-action",normalizedTitle:"5.5 action",charIndex:15069},{level:3,title:"5.6 Destinations",slug:"_5-6-destinations",normalizedTitle:"5.6 destinations",charIndex:16757},{level:3,title:"5.7 Article thread",slug:"_5-7-article-thread",normalizedTitle:"5.7 article thread",charIndex:17216},{level:3,title:"5.8 Interactive Forms",slug:"_5-8-interactive-forms",normalizedTitle:"5.8 interactive forms",charIndex:17708},{level:3,title:"5.9 Forms Data Format",slug:"_5-9-forms-data-format",normalizedTitle:"5.9 forms data format",charIndex:19069},{level:3,title:"5.10 XFA",slug:"_5-10-xfa",normalizedTitle:"5.10 xfa",charIndex:20772},{level:2,title:"6 Graphics",slug:"_6-graphics",normalizedTitle:"6 graphics",charIndex:21316},{level:3,title:"6.1 Graphics Objects",slug:"_6-1-graphics-objects",normalizedTitle:"6.1 graphics objects",charIndex:21333},{level:3,title:"6.2 Coordinate Systems",slug:"_6-2-coordinate-systems",normalizedTitle:"6.2 coordinate systems",charIndex:21820},{level:2,title:"Reference",slug:"reference",normalizedTitle:"reference",charIndex:1146}],headersStr:"1. Introduce 2. File Structure 2.1 Header 2.2 Trailer 2.3 Cross-Reference Table 2.4 Body 2.5 Increamental update 4. Fix Pdf Structure 5 Document structure 5.1 Catalog 5.2 Common Data Structures 5.3 PageLabel 5.4 Outlines 5.5 Action 5.6 Destinations 5.7 Article thread 5.8 Interactive Forms 5.9 Forms Data Format 5.10 XFA 6 Graphics 6.1 Graphics Objects 6.2 Coordinate Systems Reference",content:'# PDF æ ¼å¼ç®æ\n\n\n# 1. Introduce\n\nPortable Document Format (PDF), ç±Adobe System Incorporated å¬å¸å¨1992å¹´åæçä¸ç§ç¼ç¨å½¢å¼çææ¡£æ ¼å¼ï¼å®æææ¾ç¤ºçåå®¹ï¼é½æ¯éè¿ç¸åºçæä½ç¬¦è¿è¡ç»å¶çã\n\nåºäº PDF çç»ç»ç»æåå±ç¤ºå½¢å¼ï¼å¯ä»¥ç¥é PDF æä»¥ä¸ä¼ç¹:\n\n * ä¸è´æ§ï¼\n   * å¨ä¸åçè®¾å¤ä¸æå¼ PDF ææ¡£ï¼å±ç¤ºæææ¯å®å¨ä¸è´çï¼ä¸ä¼åºç°æ®µè½éä¹±ãæå­ä¹±ç è¿äºæçé®é¢ãå°¤å¶æ¯ææ¡£ä¸­å¯ä»¥åµå¥å­ä½æä»¶ï¼é¿åäºå®¢æ·ç«¯æ²¡æå¯¹åºå­ä½ï¼èå¯¼è´æå­æ¾ç¤ºä¸ä¸è´çé®é¢ãæä»¥ï¼å¨å°å·è¡ä¸ï¼ç»å¤§å¤æ°ç¨çé½æ¯PDFæ ¼å¼ã\n * ä¸æä¿®æ¹ï¼\n   * PDF æ ¼å¼å¤æï¼å¯¹å·²ç»ä¿å­çPDFæä»¶ï¼æ³è¦è¿è¡éæ°æçæ¯è¾å¤æï¼è¿å°±ä¿è¯äº PDF æä»¶ä¸å®¹æè¢«ç¯¡æ¹ã\n * å®å¨æ§ï¼\n   * PDFææ¡£å¯ä»¥è¿è¡å å¯ï¼åæ¬ä»¥ä¸å ç§å å¯å½¢å¼ï¼ææ¡£æå¼å¯ç ï¼ææ¡£æé(å¦ï¼å¤å¶æä½ç­)å¯ç ï¼ææ¡£è¯ä¹¦å¯ç ï¼å å¯çæ¹æ³åæ¬ï¼RC4ï¼AESï¼éè¿å å¯è¿ç§å½¢å¼ï¼å¯ä»¥è¾¾å°èµæé²æ©æ£ç­ç®çã\n * ä¸å¤±çï¼\n   * PDFæä»¶ä¸­ä½¿ç¨äºç¢éå¾ï¼æ è®ºæ¾å¤§å¤å°åï¼é½ä¸ä¼å¯¼è´ä½¿ç¨ç¢éå¾ç»å¶çæå­ãå¾æ¡å¤±çã\n * æ¯æå¤ç§åç¼©æ¹å¼ï¼\n   * ä¸ºäºåå°PDFæä»¶çsizeï¼PDFæ ¼å¼æ¯æåç§åç¼©æ¹å¼ï¼asciihexï¼ascii85ï¼lzwï¼runlengthï¼ccittï¼jbig2ï¼jpeg(DCT)ï¼jpeg2000(jpx)\n * æ¯æå¤ç§å°å·æ åï¼\n   * æ¯æ PDF-Aï¼PDF-X ç­\n\nä¸ºäºäºè§£ PDF è¿äºç¹æ§çå®ç°åçï¼æä»¬éè¦å¯¹å¶ç»ææä¸å®äºè§£ãä¸è¬æ¥è¯´ï¼PDF ç»æåä¸ºç©çç»æ(File structure)åé»è¾ç»æ(Document structure)ãç©çç»æç¨äºæ ¹æ® PDF æä»¶æ ¼å¼ççº¦å®ä»æä»¶ä¸­è¯»ååä¸ªå¯¹è±¡ï¼é»è¾ç»æç¨äºæ ¹æ®è¯»åçæä»¶ç»æãå¯¹è±¡æå»ºå¯¹è±¡æ ï¼ä»¥æç§å¯¹è±¡çç©ºé´ç»ææ¾ç¤ºåº PDF æä»¶ã\n\n\n# 2. File Structure\n\næ åçPDFææ¡£ä¸è¬åæ¬åä¸ªé¨åï¼\n\nç»æ                ä½ç¨                                                    å¤æ³¨\nHeader            å­å¨PDFçæ¬                                               ä¸è¬æ¯å¨é¦è¡ %PDF-XXX\nBody              å­å¨é´æ¥å¯¹è±¡                                                è¿æ¯ææPDFæ¯éæå¤§çåå®¹\nCross-Reference   ä¿å­åä¸ªé´æ¥å¯¹è±¡å¨æä»¶ä¸­çèµ·å§å°å                                     \nTrailer           å­å¨äº¤åç´¢å¼è¡¨çèµ·å§ä½ç½®, æ ¹å¯¹è±¡ï¼Rootï¼ï¼å å¯å¯¹è±¡ï¼Encryptï¼ï¼ææ¡£ä¿¡æ¯å¯¹è±¡ï¼Infoï¼ç­   åå« startxref å %%EOF\n\nè§£æ pdf æä»¶ä¸è¬ä»¥ä¸æ­¥éª¤è¿è¡ï¼\n\n 1. æ£æ¥ Header ç¡®è®¤æ¯å¦ pdf æ ¼å¼ ä»¥å çæ¬\n 2. ä»æä»¶å°¾é¨è¯»å %%EOFï¼åæ¥æ¾ startxref ä½ç½®ï¼å¹¶è¯»å Cross-Reference çåç§»\n 3. è¯»å trailer æ®µ(å¨ startxref åï¼ä¸è¬æ¥è¯´äºèä¸´è¿ )ï¼ä»ä¸­è¯»åææ¡£çåä¿¡æ¯\n 4. ä» Cross-Reference ä¸­è§£æ indirect-object ç objidãgenidãoffset ç­ä¿¡æ¯\n 5. ä» indirect-object ä¸­è§£æ pdf åå®¹ãå¸å±ç¸å³çè¯¦ç»ä¿¡æ¯\n\nå½ç¶ï¼ä»¥ä¸æ­¥éª¤åªæ¯ç®åçæè¿°æµç¨ï¼å¶ä¸­è¿æå¾å¤ç»èéè¦å¤çï¼æ¯å¦ï¼Linearized PDFãIncremental Updatesãobject streams(æ è®°ä¸º /Type /ObjStm) ç­ç­...\n\nä¸ä¸ª PDF æä»¶ï¼å¯ä»¥å¨ç»æä¸å½¢æä¸æ£µå¯¹è±¡æ ï¼è¿äºå¯¹è±¡å¯ä»¥åä¸º 8 ç§ç±»åï¼\n\n * Boolean values\n   * representing true or false\n * Integers and Real numbers\n * Strings\n   * enclosed within parentheses ((...)). Strings may contain 8-bit characters.\n * Names, starting with a forward slash (/)\n   * name è¢«å®ä¹ä¸ºå­èæµï¼ä½æ¯ç°å®ä¸­ç»å¸¸è¢«ç¨ä½å¯ä»¥éè¯»çtextï¼è¿æ¶è§å®ä»¥ utf-8 ç¼ç æ¹å¼è¡¨ç¤º\n * Arrays\n   * ordered collections of objects enclosed within square brackets ([...])\n * Dictionaries\n   * collections of objects indexed by names enclosed within double angle brackets (<<...>>)\n * Streams\n   * usually containing large amounts of optionally compressed binary data, preceded by a dictionary and enclosed between the stream and endstream keywords.\n * The null object\n\nå¦å¤ï¼PDF ä¸­å¯ä»¥å­å¨æ³¨éï¼å®æ¯ä»¥ % ç¬¦å·å¼å§ãPDF ä¸­ç object å¯ä»¥åä¸º direct (embedded in another object) å indirectãIndirect objects ä½¿ç¨ objid å genid è¿è¡ç¼å·ï¼å¹¶ä¸å¦æé©»çå¨ææ¡£æ ¹ä¸­ï¼åä¼å¨ obj å endobj å³é®å­ä¹é´å®ä¹ã\n\n\n# 2.1 Header\n\nä¸è¬æåµä¸ï¼æä»¶å¤´ï¼å³ï¼PDFæä»¶çç¬¬ä¸è¡ï¼å®ç¨æ¥å®ä¹PDFççæ¬ï¼ä»èç¡®å®è¯¥PDFéµå¾ªçåªä¸ªçæ¬çPDFè§èãPDFçæ¬æ¯åä¸å¼å®¹çï¼å³é«çæ¬çè§èï¼å¼å®¹ä½çæ¬çè§èã\n\næ­£å¸¸æåµä¸ï¼%PDF æ è®°ä¼åºç°å¨æä»¶é¦è¡ãé¦é¨ãä½æ¯ç°å®ä¸­ï¼ä¸ºäºå¼å®¹å¼å¸¸åå¾æ´å¥å£®ï¼ä¼å¨æä»¶é¦é¨ç N ä¸ªå­èåæç´¢è¿ä¸ªæ è®°ï¼å¹¶å®æ å¤´é¨ãçæ¬å· çå¤æ­ãå¦ææä»¶å¤´é¨ï¼æ²¡ææ¾å°æ­¤æ è®°ï¼å¯ä»¥è®¤ä¸ºä¸æ¯ PDF æä»¶ã\n\nå¦æ %PDF æ è®°ä¸æ¯åºç°å¨æä»¶çé¦è¡é¦é¨ï¼é£ä¹ PDF æä»¶ä¸­ç startxrefãcross-reference table ç­ä¸­åç§»å°åæ¯ç¸å¯¹äºæä»¶ç¬¬ä¸ä¸ªå­èè¿æ¯ %PDF æ è®°é¦é¨çå¢ï¼\n\nç­æ¡æ¯ç¸å¯¹äº %PDF æ è®°é¦é¨çåç§»ãæ ¹æ® PDF ç ISO ææ¡£ï¼%PDFåºå½åºç°å¨æä»¶çé¦è¡é¦é¨ï¼å¨ä¿è¯ææ¡£å®æ´æ§çåæ¶ï¼å¨æä»¶é¦é¨æå°¾é¨å¢å åå®¹ï¼å¹¶ä¸ä¼æ¹å PDF æä»¶åé¨çåå®¹(åå«ç¸å¯¹åç§»)ãæä»¥ï¼è§£æ PDF æä»¶æ¶ï¼é¦ä¸ª %PDF å æåä¸ä¸ª %%EOF æ è®°çä½ç½®å¾éè¦ã\n\nä¸è¬çï¼%PDF æ è®°åè·éç 1.x å°±æ¯ PDF æä»¶ççæ¬å·ã\n\nä» PDF 1.4 å¼å§ï¼æ¯æå°çæ¬å·æ¾ç½®äº trailer ä¸­ Root å¯¹è±¡ç category å­å¸ç Version å±æ§ä¸­ãè¿éççæ¬å·æ¯å¯éçï¼å¦æå­å¨æ¶(éå¸¸æ¯å¨PDFå¢éæ´æ°æ¶ç¨å°)ï¼åºå½ä»¥æ­¤çæ¬å·ä¸ºåã\n\n\n# 2.2 Trailer\n\nTrailer é¨ååå«äº trailer æ®µãstartxref æ®µã%%EOF æ è®° ä¸é¨åãç»æå¦ä¸:\n\ntrailer\n    << /Size 642\n       /Root 1 0 R /Info 2 0 R\n       /Encrypt << ... >>\n       /ID [ <7919a5d3c67dca9aa6777b99d4a0214d>\n          <b8e48d9b43300bb87f6ff6c528d13fc2> ]\n       /Prev 2027\n    >>\nstartxref\nbyte_offset_of_the_last_cross-reference_section\n%%EOF\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\ntrailer æ®µç¨äºå­å¨äº¤åç´¢å¼è¡¨çèµ·å§ä½ç½®ï¼æ ¹å¯¹è±¡ï¼Rootï¼ï¼å å¯å¯¹è±¡ï¼Encryptï¼ï¼ææ¡£ä¿¡æ¯å¯¹è±¡ï¼Infoï¼ç­ãä¾å¦ï¼Info ä¸­åå«ä»¥ä¸å±æ§ä¿¡æ¯ï¼\n\nOBJECT NAME    DESCRIPTION\nTitle          ææ¡£æ é¢\nAuthor         åå»ºæä»¶çä½è\nSubject        ææ¡£ä¸»é¢\nKeywords       ææ¡£å³é®å­\nCreator        å¦æPDFæ¯ç±å¶ä»æ ¼å¼è½¬æ¢èæ¥çï¼Creatoræ¯åå»ºåå§ææ¡£çåºç¨ç¨åºå\nProducer       å¦æPDFæ¯ç±å¶ä»æ ¼å¼è½¬æ¢èæ¥çï¼Produceræ¯åå»ºPDFæä»¶çåºç¨ç¨åºå\nCreationDate   ææ¡£åå»ºçæ¶é´\nModDate        ææ¡£ä¸ä¸æ¬¡ä¿®æ¹çæ¶é´\n\nstartxref æå¨è¡åºè¯¥å¨ trailer ç»æä¹åï¼å¹¶ä¸ startxrefãbyte_offset_of_the_last_cross-reference_sectionã%%EOF æé¡ºåºæ¯ä¸ªåå ä¸è¡ã\n\nç±äº PDF ç Increment Update æ¨¡å¼çå­å¨ï¼æä»¶ä¸­ç Trailer ç»æå¯è½å¹¶ä¸å¯ä¸ã\n\næ³¨æï¼å¨æäºæåµä¸ä¼ç¼ºå¤± %%EOF æ è®°ï¼å¹¶ä¸å¤§å¤ PDF éè¯»å¨è½å¤å®½å®¹çå¤çè¿ç§æåµã\n\n\n# 2.3 Cross-Reference Table\n\näº¤åç´¢å¼è¡¨æ¯PDFæä»¶çéè¦é¨åï¼ä¸»è¦ç¨éæ¯ä¿å­åä¸ªé´æ¥å¯¹è±¡å¨æä»¶ä¸­çèµ·å§å°åã\n\né£ä¹äº¤åå¼ç¨è¡¨çä½ç½®å¨ä»ä¹å°æ¹å¢ï¼å¶å®å¾ç®åï¼trailer æ®µç startxref æç¤ºäºäº¤åç´¢å¼è¡¨çå·ä½åç§»ä½ç½®ãæ ¹æ®è¿ä¸ªåç§»ï¼å¯ä»¥å¾å®¹æè¯»åå° xref æ è®°ä»¥åå¶åçåå®¹ã\n\nxref æ®µçç»æå¦ä¸ï¼\n\nxref \n0 3\n0000000004 65535 f \n0022826162 00000 n \n0022826184 00000 n \n6 2\n0022826260 00000 n \n0000000006 00007 f\n0022829428 00000 n \n0000000088 00001 f \n0000000000 00001 f  \n...\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\né¦åï¼ä»¥åå«å³é®å­ xref çä¸è¡ä¸ºèµ·ç¹ãç´§æ¥çè¿ä¸è¡ï¼å°±æ¯ä¸ä¸ªæèå¤ä¸ª cross-reference subsections(äº¤åç´¢å¼è¡¨å­æ®µï¼æ²¡æé¡ºåº)ãæ¯ä¸ªäº¤åç´¢å¼è¡¨å­æ®µåå«ä¸è¡æå¤è¡åå®¹ï¼æ¯è¡åå«ä¸ä¸ª indirect object çå¥å£ä¿¡æ¯ï¼åç§»å°å(10-digit)ãä¿®è®¢å·ãn/fæ è®°(in use/free)ã\n\näº¤åç´¢å¼è¡¨çç¬¬ä¸ä¸ªæ¡ç®ï¼åºè¯¥é½æ¯ object number 0ãfreeãgeneration number = 65535ï¼è¿æ è¯ç free å¯¹è±¡é¾è¡¨çå¤´ãé¾è¡¨çå°¾é¨éæ°æå object number 0 çå¯¹è±¡ãéè¦æ³¨æçæ¯ï¼ä¸ä¸ª free ç entry çåç§»å°åè¡¨ç¤ºä¸ä¸ä¸ª free å¯¹è±¡å¨äº¤åç´¢å¼è¡¨ä¸­çç´¢å¼ï¼å®å¯ä»¥ä¸å¨äº¤åç´¢å¼è¡¨ä¸­çç´¢å¼ä¸­ï¼è¿è¡¨ç¤ºä¸ä¸ä¸ªå¯¹è±¡ä¸å­ï¼å®ä¹å¯ä»¥æ¯ 0ï¼è¿è¡¨ç¤ºè¿ä¸ªå¯¹è±¡å·²ç»è¢«å é¤ã\n\næ­¤å¤ï¼äº¤åç´¢å¼è¡¨å¨æä»¶ä¸­å¯ä»¥å­å¨åä¸ªï¼ä¹å¯ä»¥å­å¨å¤ä¸ªãå¤ä¸ªäº¤åå¼ç¨è¡¨éå¸¸åºç°å¨ä¸¤ä¸ªæåµï¼ä¸ãå¢éä¿å­ï¼äºãçº¿æ§åã\n\nå½å­å¨å¤ä¸ªäº¤åç´¢å¼è¡¨æ¶ï¼éè¦æ³¨æä»¥ä¸é®é¢ï¼\n\n 1. äº¤åç´¢å¼è¡¨çæ¥æ¾\n\n * éå¸¸å¨äº¤åå¼ç¨è¡¨ä¹åç trailer å­å¸ä¸­ä¼ä¿å­ /Prev å¯¹è±¡ï¼è¯¥ key å¯¹åºçå¼å°±æ¯ä¸ä¸ä¸ªäº¤åå¼ç¨è¡¨çä½ç½®ã\n\n 2. åä¸ä¸ªé´æ¥å¯¹è±¡å­å¨ä¸åçå¼ç¨è¡¨ä¸­\n\n * ä¸ä¸ªæä»¶ä¸­åºç°å¤ä¸ªäº¤åå¼ç¨è¡¨æ¶ï¼å¯è½åºç°åä¸ä¸ªé´æ¥å¯¹è±¡å­å¨ä¸åçå¼ç¨è¡¨ä¸­ï¼è¿æ¶ï¼è¦ä»¥åºç°å¨æä»¶æåä½ç½®çé£ä¸ªä¸ºåï¼åé¢çå¿½ç¥ï¼è¿ç§æåµï¼éå¸¸æ¯ç±äºä¿®æ¹äºPDFæä»¶ï¼å¯¼è´å¶ä¸­çä¸ä¸ªæå¤ä¸ªå¯¹è±¡åçäºååï¼PDFçæå¨æ ¹æ®è¾åºè¦æ±ï¼è¿è¡å¢å è¾åºï¼åªè¾åºä¿®æ¹çå¯¹è±¡ï¼ç¶åå¨æä»¶æ«å°¾å ä¸æ´æ°çäº¤åå¼ç¨è¡¨ã\n\nå¨ PDF 1.5 çæ¬ä¹åï¼äº¤åå¼ç¨è¡¨æ»æ¯éç¨ ASCII æ ¼å¼ï¼ç¨ xref å³é®å­æ è®°ï¼å¹¶è·éç±é´æ¥å¯¹è±¡ç»æçä¸»ä½ã 1.5 çå¼å¥äº cross-reference streams ï¼å®ä»¬å·ææ åæµå¯¹è±¡çå½¢å¼ï¼å¯è½åºç¨äºè¿æ»¤å¨ã è¿æ ·çæµå¯ä»¥ç¨æ¥ä»£æ¿ ASCII æ ¼å¼çäº¤åå¼ç¨è¡¨ï¼å¹¶åå«äºè¿å¶æ ¼å¼çåç§»éåå¶ä»ä¿¡æ¯ã è¯¥æ ¼å¼å¾çµæ´»ï¼å ä¸ºå®åè®¸æå®æ´æ°å®½åº¦ï¼ä½¿ç¨ /W æ°ç»ï¼ï¼å æ­¤ä¾å¦ï¼å¤§å°ä¸è¶è¿ 64 KiB çææ¡£å¯è½ä»å° 2 ä¸ªå­èç¨äºå¯¹è±¡åç§»ã\n\nå½ä½¿ç¨ cross-reference streams æ¹å¼æ¥è¡¨è¾¾äº¤åå¼ç¨è¡¨æ¶ï¼å³é®å­ xref å trailer åºè¯¥ä¸ä¼ååºç°ãæ­¤æ¶ startxref æç¤ºçåç§»å°åä¸å°±æ¯ cross-reference streams æµå¯¹è±¡ãç»æå¦ä¸ï¼éè¿å¯¹è±¡ /Type /XRef æ è®°ï¼ï¼\n\nå³äº cross-reference streams çè§£ææµç¨å¯ä»¥åèå®æ¹ææ¡£ã\n\n\n# 2.4 Body\n\nç± indirect objects ç»æçæä»¶åå®¹ä¸»ä½ãåä¸ªå¯¹è±¡çæ ¼å¼å¦ä¸ï¼\n\nobjid genid obj\n...\nendobj\n\n\n1\n2\n3\n\n\n# 2.4.1 Encryption\n\nPDF ä¸­çå å¯ï¼ä¸»è¦æ¯éå¯¹åå®¹çå¤çï¼è¿ä¹å°±è¯´æäºä¸ºä»ä¹ PDF çå å¯ä¸»è¦åºç¨å¨ strings å streams å¯¹è±¡ãæ»æä¾å¤ï¼å¦ï¼\n\n * The values for the ID entry in the trailer\n * Any strings in an Encrypt dictionary\n * Any strings that are inside streams such as content streams and compressed object streams, which themselves are encrypted\n\nå¦æStreamå¯¹è±¡å¼ç¨äºä¸ä¸ªå¤é¨æä»¶ï¼é£ä¹å®çåå®¹å°±ä¸åºè¢«å å¯ï¼å ä¸ºå®ä¸æ¯å½å PDF æä»¶çä¸é¨åãç¶èï¼å¦æåå®¹æ¯ååµå¨ PDF æä»¶åæ¶("Embedded File Streams")ï¼æ¯åºè¯¥åå¶ä»æµå¯¹è±¡ä¸æ ·è¢«å å¯çã ä» PDF 1.5 å¼å§ï¼åµå¥çæä»¶å¯ä»¥å¨æªå å¯çææ¡£ä¸­å å¯(å¯ä»¥åè "Crypt Filters")\n\né£ä¹æä¹å¤æ­ææ¡£æ¯å¦å å¯ä»¥åå å¯æ¹å¼ãå¦æè§£å¯å¢ï¼\n\nPDF ææ¡£çå å¯ä¿¡æ¯å­å¨å¨ Trailer æ®µç trailer å­å¸ç Encrypt æ¡ç®ãå¦ææ²¡ææ¾å°è¿ä¸ªæ¡ç®ï¼é£ä¹å¯ä»¥è®¤ä¸ºå½åææ¡£æ²¡æè¢«å å¯ãè¿ä¸ªæ¡ç®æä»¥ä¸åå®¹ï¼\n\n * Filter\n   * æå®ææ¡£çé¦ésecurity handlerçåç§°ï¼å®åºè¯¥æ¯ç¨äºå å¯ææ¡£çå®å¨å¤çç¨åºçåç§°ãè¿ä¸ªå®å¨å¤çç¨åº(handler)æ¯ä¸ä¸ªè½¯ä»¶æ¨¡åï¼å®å®ç°äºå å¯è¿ç¨çåä¸ªæ¹é¢å¹¶æ§å¶å¯¹å å¯ææ¡£åå®¹çè®¿é®ã\n   * PDF æå®äºä¸ä¸ªæ åçåºäºå¯ç çå®å¨å¤çç¨åºï¼ææç¬¦åè¦æ±çéè¯»å¨é½åºæ¯æï¼ä½ç¬¦åè¦æ±çéè¯»å¨å¯ä»¥éæ©æä¾ä»ä»¬èªå·±çéå å®å¨å¤çç¨åºã\n   * å¦æSubFilterä¸å­å¨ï¼åå¨æå¼ææ¡£æ¶ä»åºä½¿ç¨æ­¤å®å¨å¤çç¨åºãå¦æå­å¨ï¼åç¬¦åæ åçè¯»åå¨å¯ä»¥ä½¿ç¨ä»»ä½å®ç°SubFilteræå®æ ¼å¼çå®å¨å¤çç¨åºã\n * SubFilter\n   * æå®encryption dictionaryçè¯­æ³ãå®åè®¸å¤çç¨åºä¹é´çäºæä½æ§ï¼ä¹å°±æ¯è¯´ï¼ææ¡£å¯ä»¥ç±é¦éå¤çç¨åº(Filter)ä»¥å¤çå¤çç¨åºè§£å¯, å¦æå®ä»¬é½æ¯æSubFilteræå®çæ ¼å¼çè¯ã\n * V\n   * Optionalï¼æå®å å¯ç®æ³ãå¯ä»¥ä¸å­å¨ï¼ä¸å­å¨æ¶å½åé»è®¤å¼ 0ï¼å¦æå­å¨ï¼åå¼åºå½å¤§äº 0ã\n   * å¯¹äº V å¼ 2 å 3ï¼é¿åº¦æ¡ç®æå®å å¯å¯é¥çç¡®åé¿åº¦ãå¨ PDF 1.5 ä¸­ï¼V çå¼ 4 åè®¸å®å¨å¤çç¨åºä½¿ç¨èªå·±çå å¯åè§£å¯ç®æ³ï¼å¹¶æå®è¦å¨ç¹å®streamä¸ä½¿ç¨ç Crypt Filtersã\n * Length å å¯ç§é¥çé¿åº¦(bits)\n\nè¯¦ç»è§£å¯æµç¨ï¼å¯ä»¥åèå®æ¹ææ¡£...\n\nç®åæ¥è¯´ï¼PDFå å¯æ¹å¼ç®åå·²ç»å¢å ä¸ºä¸ç§ï¼å£ä»¤å å¯ãè¯ä¹¦å å¯ãAdobe LiveCycle Rights Managementï¼ä¸é¢è¿è¡ç®åçä»ç»ï¼\n\n 1. å£ä»¤å å¯ï¼\n\nä½ä¸ºç¬¬ä¸ä»£PDFå®å¨å å¯æ¹å¼ï¼å°ç°å¨ä¹ä¸ç´å¹¿æ³åºç¨ãå£ä»¤å å¯åä¸ºï¼ææ¡£æå¼å¯ç ï¼open passwordï¼ãæéå¯ç ï¼permission passwordï¼ã\n\n * ææ¡£æå¼å¯ç ï¼è¦æ±ç¨æ·å¨æå¼æä»¶æ¶ï¼éè¦è¾å¥å¯ç \n * æéå¯ç ï¼æå¼PDFæä»¶å¹¶è¿è¡éè¯»ï¼å¹¶ä¸éè¦æéå¯ç ï¼åªææ´æ¹æéè®¾ç½®æè¿è¡åéå¶æä½æ¶ï¼æå°ï¼ç¼è¾åå¤å¶PDFä¸­çåå®¹ï¼ï¼æéè¦è¾å¥æéå¯ç ã\n\nå¦æä½¿ç¨ä¸¤ç§ç±»åçå¯ç ä¿æ¤PDFï¼åå¯ä»¥ä½¿ç¨ä»»ä¸å¯ç æå¼å®ãä½æ¯ï¼åªææéå¯ç æåè®¸ç¨æ·æ´æ¹åéå¶çåè½ã\n\n 2. è¯ä¹¦å å¯ï¼\n\nä½¿ç¨è¯ä¹¦ä¿æ¤PDFæ¶ï¼å¯ä»¥æå®æ¶ä»¶äººå¹¶ä¸ºæ¯ä¸ªæ¶ä»¶äººæç¨æ·ç»å®ä¹æä»¶è®¿é®çº§å«ãç±»ä¼¼ä¸å£ä»¤å å¯çæéå¯ç ï¼å¯ä»¥è¿è¡æééå¶ï¼ä¾å¦ï¼åè®¸ä¸ä¸ªç»ç­¾åå¹¶å¡«åè¡¨åï¼å¦ä¸ä¸ªç»å¯ä»¥ç¼è¾ææ¬æå é¤é¡µé¢ã\n\nç¨æ·å¯ä»¥ä»å¯ä¿¡ä»»èº«ä»½åè¡¨ï¼ç£çä¸çæä»¶ï¼LDAPæå¡å¨æWindowsè¯ä¹¦å­å¨åºï¼ä»éWindowsï¼ä¸­éæ©è¯ä¹¦ãå§ç»å°æ¨çè¯ä¹¦åå«å¨æ¶ä»¶äººåè¡¨ä¸­ï¼ä»¥ä¾¿ä»¥åå¯ä»¥æå¼è¯¥ææ¡£ã\n\n 3. Adobe LiveCycle Rights Management\n\nTODO\n\n# 2.4.2 Object Streams\n\nä» PDF 1.5 å¼å§ï¼indirect objects (except other streams) å¯è½ä¼å­å¨äº object streams(æ è®°ä¸º /Type /ObjStm) ä¸­ãè¿é¡¹ææ¯ä½¿ non-stream å¯¹è±¡è½å¤åºç¨æ åæµè¿æ»¤å¨ï¼åå°å·æå¤§éå°åé´æ¥å¯¹è±¡çæä»¶çå¤§å°ï¼å¹¶ä¸å¯¹äºæ è®° PDF å°¤å¶æç¨ã å¯¹è±¡æµä¸æ¯ææå®å¯¹è±¡çä»£å·ï¼0 é¤å¤ï¼ã\n\n# 2.4.3 Linearized PDF çº¿æ§å\n\nPDF æä»¶æä¸¤ç§å¸å±ï¼non-linearized (not "optimized") å linearized ("optimized")ã éçº¿æ§ PDF æä»¶å¯è½æ¯çº¿æ§ PDF æä»¶å°ï¼ä½è®¿é®éåº¦è¾æ¢ï¼å ä¸ºç»è£ææ¡£é¡µé¢æéçé¨åæ°æ®åæ£å¨æ´ä¸ª PDF æä»¶ä¸­ã çº¿æ§å PDF æä»¶ï¼ä¹ç§°ä¸º "optimized" æ "web optimized" PDF æä»¶ï¼çæé æ¹å¼ä½¿å®ä»¬è½å¤å¨ Web æµè§å¨æä»¶ä¸­è¯»åï¼èæ éç­å¾æ´ä¸ªæä»¶ä¸è½½å®æï¼å ä¸ºç¬¬ä¸é¡µæéçææå¯¹è±¡ä»¥æä½³æ¹å¼ç»ç»æ¾ç¤ºå¨æä»¶çå¼å¤´ã PDF æä»¶å¯ä»¥ä½¿ç¨ Adobe Acrobat è½¯ä»¶æ QPDF è¿è¡ä¼åã\n\nLinearized PDF æä»¶çä¸»è¦ç®æ æ¯ï¼æå¼ææ¡£æ¶ï¼å°½å¿«æ¾ç¤ºç¬¬ä¸é¡µã è¦æ¥ççç¬¬ä¸é¡µå¯ä»¥æ¯ææ¡£çä»»æé¡µé¢ï¼ä¸ä¸å®æ¯é¡µé¢0ï¼å°½ç®¡å¨ç¬¬0é¡µæå¼æ¯æå¸¸è§çï¼ã\n\næ³¨æ, å·²ç»çº¿æ§åçPDFï¼å¯ä»¥è¿è¡å¢éæ´æ°ï¼ä½æ¯ï¼ä¿®æ¹åçææ¡£å°±ä¸åæ¯çº¿æ§åæä»¶ï¼éè¦éæ°æ´çæä»¶æè½åæ¬¡çæçº¿æ§åæä»¶ãå¦å¤ï¼åºäº Linearized PDF æä»¶çä»¥ä¸ç¹æ§ï¼å¯ä»¥è®¤è¯å°åªæå¨é¡µé¢æ°éå¾å¤çæåµä¸ï¼æè½çªåºè¡¨ç°åºå®å¿«éç½ç»æµè§çä¼å¿ã\n\n# 2.4.4 Extensions\n\nExtensionså­å¸ä¿å­å¨```catalog``å­å¸ä¸­ï¼è¯¥å­å¸åºåå«ä¸ä¸ªæå¤ä¸ªé®ï¼ç¨äºæ è¯å¼åäººåå®ä¹çISO 32000-1æ åæ©å±ã\n\nAdobeå¬å¸åé¢è¿è¡åè½æ©å±åæ¹åï¼åä¸ºäºä¸ä¹åPDF1.7æ åååºå«ï¼éå¸¸ç¨Extensionsæ¥æ è¯ã\n\nPDFâ1.7\n<</Type /Catalog\n  /Extensions\n  <</GLGR\n    <</BaseVersion /1.7\n    /ExtensionLevel 1002\n    >>\n  >>\n>>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\nExtensionså­å¸çåå®¹ï¼ä¸ç¨æ¥æ¾ç¤ºï¼éå¸¸åå«çæ¯ç¨äºå¼åç¨çåå®¹ãæ©å±å­å¸ä¸­çææå¼åäººåæ©å±å­å¸æ¡ç®ï¼ä»¥åå®ä»¬çæ¡ç®ï¼é½åºæ¯ç´æ¥å¯¹è±¡ã\n\nä¾å¦ï¼\n\n * BaseVersion ï¼PDFçæ¬çåç§°ã è¯¥åç§°åºä¸catalogçVersionä½¿ç¨çè¯­æ³ä¸è´\n * ExtensionLevel ï¼ç±å¼åäººåå®ä¹çæ´æ°ï¼è¡¨ç¤ºæ­£å¨ä½¿ç¨çæ©å±åã å¦æå¼åäººåä¸ºç»å®çBaseVersionå¼å¥äºå¤ä¸ªæ©å±ï¼åè¯¥å¼åäººååéçæ©å±çº§å«ç¼å·å°éçæ¶é´çæ¨ç§»èå¢å ã\n\n\n# 2.5 Increamental update\n\nincreamental update å¢éæ´æ°æä¾äºä¸ç§æ´æ°PDFæä»¶èæ éå®å¨éåçæ¹æ³ï¼æ ¹æ®PDFè§èï¼1.7ï¼ï¼å¢éæ´æ°çå·¥ä½æ¹å¼å¦ä¸ï¼å¯ä»¥éæ­¥æ´æ°PDFæä»¶çåå®¹ï¼èæ ééåæ´ä¸ªæä»¶ãæ´æ¹å°éå å°æä»¶æ«å°¾ï¼ä¿çåå§åå®¹ã\n\nå½PDFéè¯»å¨åç°PDFææ¡£æ¶ï¼å®ä»æä»¶æ«å°¾å¼å§ãå®è¯»åæåä¸ä¸ªé¢åçå¹¶è·éå°æ ¹å¯¹è±¡åäº¤åå¼ç¨è¡¨çé¾æ¥ï¼ä»¥æå»ºå®å°è¦åç°çææ¡£çé»è¾ç»æãå½éè¯»å¨éå°æ´æ°çå¯¹è±¡æ¶ï¼å®ä¼å¿½ç¥ç¸åå¯¹è±¡çåå§çæ¬ã\n\nä¸ä¸ªPDFæä»¶åè®¸å¢éæ´æ°çæ¬¡æ°ä¸åéå¶ãç®åçå¤æ­PDFæ¯å¦å¢éæ´æ°çæ¹æ³æ¯ï¼ææ¡£ä¸­å­å¨å¤ä¸ª%%EOFã\n\n\n# 4. Fix Pdf Structure\n\nPDFæä»¶ç ´æï¼éå¸¸æ¯ä¸äºéæ³æä½é æçãPDFæä»¶ä¸­æé¨ååå®¹ç¼ºå¤±ï¼å¦xrefï¼éè¦çobjectå¯¹è±¡ç­ã\n\n 1. xrefç ´æ\n\nè§£å³è¿ä¸ªé®é¢ï¼å¹¶ä¸å¤æï¼åªéè¦ä»æä»¶å¤´å¼å§è¯»åå¯¹è±¡ï¼è®°å½ä¸å¯¹è±¡å·åå¯¹è±¡èµ·å§åç§»ä½ç½®ï¼éæ°å»ºç«xrefï¼äº¤åå¼ç¨è¡¨ï¼ï¼å°æ æçç®ä»å¼ç¨ç½®ç©ºå¼ï¼å°±å¯ä»¥äºï¼å¦æåä¸ä¸ªé´æ¥å¯¹è±¡åºç°å¤æ¬¡ï¼åææåºç°çé£ä¸ªä¸ºåãå¦æPDFæä»¶æ¯å å¯çï¼è¦åå°å å¯å¯¹è±¡è¿è¡è§£æï¼ç¶åè®¡ç®åºå¯é¥ï¼ç¨äºå¶ä»å¯¹è±¡çè§£å¯ã\n\n 2. é´æ¥å¯¹è±¡ç ´æ\n\né´æ¥å¯¹è±¡éå¸¸æ¯å¯¹è±¡æ²¡ææ­£å¸¸çç»æç¬¦å·ï¼readerå¨è¿è¡è¯¥å¯¹è±¡è§£ææ¶ï¼åçéè¯¯ãè¿ç§æåµï¼å¦ææ²¡ææå®³å°xrefï¼å¯ä»¥æ ¹æ®xrefè®¡ç®åºæ¯ä¸ªé´æ¥å¯¹è±¡å¶å®åç§»ä½ç½®ï¼å¨è¯»åé´æ¥å¯¹è±¡æ¶åç°å½åä½ç½®è¶åºè¯¥å¯¹è±¡å¨PDFæä»¶ä¸­ä¿å­çåºåæ¶ï¼å°è¯¥å¯¹è±¡è®¾ç½®ä¸ºæ æå¯¹è±¡ï¼ä¸ææå¼ç¨å°è¯¥å¯¹è±¡çé´æ¥å¼ç¨å¯¹è±¡ä¿®æ¹ä¸ºnullã\n\n 3. xrefåé´æ¥å¯¹è±¡é½ç ´æ\n\nè¿ç§æåµæ¯è¾éº»ç¦ï¼æ ¸å¿æ¹æ³ï¼è¿æ¯è¦éå»ºxrefã\n\nå¨è¯»åå°å¼å¸¸å¯¹è±¡æ¶ï¼è¦åæ¶çå¤æ­å¯¹è±¡æ¯å¦å¼å¸¸ç»æ­¢ï¼æ¯å¦ï¼è¯»åå°ä¸ä¸ªç ´æçæä»¶ï¼åç°å¯¹è±¡é¿åº¦å¼å¸¸çé¿ï¼ä¸è¿ç»­åºç°å¤ä¸ªâobjâåâendobjectâï¼é£å°±å¯ä»¥å¤æ­è¯¥å¯¹è±¡éè¯¯äºï¼å¹¶å°è¯¥å¯¹è±¡è®¾ç½®ä¸ºæ æï¼ç¶åéæ°å®ä½æ°çé´æ¥å¯¹è±¡çå¼å§ä½ç½®ï¼ç»§ç»­å¾åè§£æã\n\n\n# 5 Document structure\n\n\n\n\n# 5.1 Catalog\n\nææ¡£å¯¹è±¡å±æ¬¡ç»æçæ ¹æ¯ Catalog å­å¸ï¼éè¿PDFæä»¶ trailer ä¸­ç Root æ¡ç®è¿è¡å®ä½ã ä¸ä¸ªç®åçç¤ºä¾å¦ä¸ï¼\n\n1 0 obj \n  << /Type /Catalog  \n     /Pages 2 0 R  \n     /PageMode /UseOutlines\n     /Outlines 3 0 R\n  >>\nendobj\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\nè¯¥ç®å½åå«å¯¹å®ä¹ææ¡£åå®¹ï¼å¤§çº²ï¼outlineï¼ï¼æç« çº¿ç¨ï¼article threadsï¼ï¼å½åç®æ ï¼named destinationsï¼åå¶ä»å±æ§çå¶ä»å¯¹è±¡çå¼ç¨ã æ­¤å¤ï¼å®è¿åå«æå³å¦ä½å¨å±å¹ä¸æ¾ç¤ºææ¡£çä¿¡æ¯ï¼ä¾å¦æ¯å¦åºèªå¨æ¾ç¤ºå¶å¤§çº²ï¼outlineï¼åç¼©ç¥å¾é¡µé¢å¾åï¼thumbnailï¼ï¼ä»¥åæå¼ææ¡£æ¶æ¯å¦æ¾ç¤ºé¤ç¬¬ä¸é¡µä»¥å¤çæäºä½ç½®ã\n\nPDF Reader åºå½ä»æ­¤èç¹å¼å§ï¼æå»º Page Tree, å¹¶éæ­¥å±å¼é¡µé¢ç»èå¹¶è¿è¡æ¸²æã\n\n\n# 5.2 Common Data Structures\n\nPDFæ ¼å¼ä¸­ï¼ä¸äºéç¨ç¨éçæ°æ®ç»æè¢«å®ä¹ï¼å®ä»¬æ¯ç±åºæ¬å¯¹è±¡ç±»åç»åèæ¥ï¼å¨æ´ä¸ªPDFä¸­çè®¸å¤å°æ¹é½æä½¿ç¨ãè¿éç®åä»ç»ææ¬å­ç¬¦ä¸²ï¼æ¥æï¼ç©å½¢ï¼åç§°æ åæ°å­æ ç¸å³çæ°æ®ç»æãæ´å å¤æçæ°æ®ç»æå¯ä»¥åè PDF ææ¡£ã\n\n# 5.2.1 String & Text\n\nPDF 1.7 æ åä¸­å®ä¹ç PDF data types ä¸­å¸¸è§ç string æï¼\n\nTYPE                   DESCRIPTION                                           NOTE\nASCII string           ASCII å­ç¬¦ç»æçå­èæµ                                        \nbyte string            è¡¨ç¤ºå­ç¬¦æå¶ä»äºè¿å¶æ°æ®çä¸ç³»åå­è                                    å¦æè¿ç§ç±»åè¡¨ç¤ºå­ç¬¦ï¼åç¼ç åºç±ä¸ä¸æç¡®å®\nstring                 é text string çå­ç¬¦ä¸²                                    ä» PDF 1.7 å¼å§ï¼æ­¤ç±»åè¿ä¸æ­¥éå®ä¸ºä»¥ä¸ç±»åï¼PDFDocEncoded stringãASCII\n                                                                             stringå byte stringã\ndate                   Date (ASCII string)                                   ä¸¥æ ¼éµå¾ªISO / IEC 8824çå®ä¹, æ¥ææ ¼å¼ä¸ºï¼(D:YYYYMMDDHHmmSSOHH\'mm )\nPDFDocEncoded string   ä½¿ç¨ PDFDocEncoding å å¯å­ç¬¦ä¸²å½¢æçå­èæµ                         PDFæ ¼å¼åªä½¿ç¨ UTF-16BE ç¼ç  Unicode(å¸¦å­èåºæ è®°)\ntext string            ä½¿ç¨ PDFDocEncoding æ UTF-16BE ç¼ç å­ç¬¦ä¸²å½¢æçå­èæµï¼å¹¶å¸¦æåå¯¼å­èåºæ è®°   ä¸»è¦ç¨å¨äººå·¥å¯è¯»çå­ç¬¦ä¸²ä¿¡æ¯ï¼ä¾å¦ææ¬æ³¨éï¼ä¹¦ç­¾åç§°ï¼ææ¡£ä¿¡æ¯ç­\ntext stream            Text stream                                           æ¬è´¨ä¸æ¯ä¸ä¸ªæµï¼ä¸è¿å¶æªç¼ç å­èåºæ»¡è¶³ä¸ text string å¨ç¼ç ãå­èé¡ºåºååå¯¼å­èæ¹é¢æç¸åè¦æ±\n\nå³äº date æ ¼å¼çè¯´æ:\n\n 1. åç¼Då¿éå­å¨ï¼å¹´ä»½å­æ®µï¼YYYYï¼å¿éå­å¨ï¼åé¢å­æ®µå¯ä»¥ä¸å­å¨\n 2. å¶å®å­æ®µè¯´æ:\n    \n    NAME   DESCRIPTION\n    YYYY   å¹´ä»½\n    MM     æä»½ï¼01-12ï¼, é»è®¤å¼ä¸º01\n    DD     å½å¤©ï¼01-31ï¼, é»è®¤å¼ä¸º01\n    HH     å°æ¶ï¼00-23ï¼, é»è®¤å¼ä¸º0\n    mm     åéï¼00-59ï¼, é»è®¤å¼ä¸º0\n    SS     ç§ï¼00-59ï¼, é»è®¤å¼ä¸º0\n    O      æ¶å·®ï¼ç±å å·ï¼+ , æ¬å°æ¶é´æäºUTï¼ï¼åå·ï¼ - , æ¬å°æ¶é´æ©äºUTï¼æ å¤§åZï¼æ¬å°æ¶é´ç­äºUTï¼è¡¨ç¤º\n    HH     æ¶å·®ä¸­çå°æ¶æ°ï¼00-23ï¼ï¼åé¢è·çç¬¦å·ï¼âï¼, é»è®¤å¼ä¸º0\n    mm     æ¶å·®ä¸­çåéæ°ï¼00-59ï¼, é»è®¤å¼ä¸º0\n\n# 5.2.2 Others\n\nPDF 1.7 æ åä¸­å®ä¹çå¶å® PDF data types å¦ä¸ï¼\n\nTYPE                 DESCRIPTION                                 NOTE\narray                Array object                                \nboolean              Boolean value                               \ndictionary           Dictionary object                           \nfile specification   File specification (string or dictionary)   ç¨äºå¼ç¨å¤é¨æä»¶åå®¹\nfunction             Function (dictionary or stream)             \ninteger              Integer number                              \nname                 Name object                                 \nname tree            Name tree (dictionary)                      æ å½¢ç»æï¼æ¯ä¸ªèç¹é½åºæ¯å­å¸å¯¹è±¡ãé®æ¯å­ç¬¦ä¸²ï¼å¹¶ä¸é®æ¯æåºçï¼å¯ä»¥ç¨äºé«ææ¥æ¾\nnull                 Null object                                 \nnumber               Number (integer or real)                    \nnumber tree          Number tree (dictionary)                    æ å½¢ç»æï¼æ¯ä¸ªèç¹é½åºæ¯å­å¸å¯¹è±¡ãé®æ¯æ´æ°ï¼å¹¶ä¸é®ææ°å­ååºæåºï¼å¯ä»¥ç¨äºé«ææ¥æ¾\nrectangle            Rectangle (array)                           ç©å½¢ç¨äºæè¿°é¡µé¢ä¸çä½ç½®ååç§å¯¹è±¡çè¾¹çæ¡ãç©å½¢æ¯ç±ä¸ä¸ªåä¸ªæ°å­çæ°ç»(ä¸å¯¹å¯¹è§çº¿çåæ )è¡¨ç¤ºãéå¸¸è¡¨ç¤ºä¸ºï¼[llx\n                                                                 lly urx ury]ï¼æé¡ºåºæå®ç©å½¢çå·¦ä¸xï¼å·¦ä¸yï¼å³ä¸yåå³ä¸yåæ ã\nstream               Stream object                               \n\n\n# 5.3 PageLabel\n\nPDF PageLabel é¡µé¢æ ç­¾å¯ç¨äºæè¿°é¡µé¢çé¡µç ãåè®¸éè¿ç»­é¡µé¢ç¼å·ï¼å¯ä»¥çä¸ºé¡µé¢æ·»å ä»»ææ ç­¾ï¼ä¾å¦å¨ææ¡£çå¼å¤´åå«ç½é©¬æ°å­ï¼ãPageLabelå¯¹è±¡å¯ç¨äºæå®è¦ä½¿ç¨çç¼å·æ ·å¼ï¼ä¾å¦ï¼å¤§åæå°åç½é©¬ï¼åè¿å¶ç­ï¼ï¼ç¬¬ä¸é¡µçèµ·å§ç¼å·ä»¥åè¦é¢åéå å°çä»»æåç¼æ¯ä¸ªæ°å­ï¼ä¾å¦ï¼âA-âçæâA-1âï¼âA-2âï¼âA-3âç­ãï¼\n\nPDFææ¡£ä¸­çæ¯ä¸ªé¡µé¢é½ç±æ´æ°é¡µç´¢å¼æ è¯ï¼è¯¥ç´¢å¼è¡¨ç¤ºé¡µé¢å¨ææ¡£ä¸­çç¸å¯¹ä½ç½®ãå¦å¤ï¼ææ¡£å¯ä»¥æéæ©å°å®ä¹é¡µé¢æ ç­¾ä»¥å¨å±å¹ä¸æå¨æå°ä¸­å¯è§å°è¯å«æ¯ä¸ªé¡µé¢ã\n\né¡µé¢æ ç­¾åé¡µé¢ç´¢å¼ä¸éè¦éåï¼ç´¢å¼æ¯åºå®çï¼ä»ç¬¬ä¸é¡µç1å¼å§è¿ç»­éè¿ææ¡£è¿è¡ï¼ä½æ ç­¾å¯ä»¥ä»¥éåç¹å®ææ¡£çä»»ä½æ¹å¼æå®ãä¾å¦ï¼å¦æææ¡£ä»¥12é¡µç¨ç½é©¬æ°å­ç¼å·çåç«¯åå®¹å¼å¤´ï¼èææ¡£çå¶ä½é¨åç¨é¿æä¼¯è¯­ç¼å·ï¼åç¬¬ä¸é¡µçé¡µé¢ç´¢å¼ä¸º1ï¼é¡µé¢æ ç­¾ä¸ºiï¼ç¬¬12é¡µå°å·æç´¢å¼12åæ ç­¾xiiï¼ç¬¬åä¸é¡µå°å·æç´¢å¼13åæ ç­¾1ã\n\n\n# 5.4 Outlines\n\noutlinesï¼ä¹¦ç­¾ãPDFææ¡£æ¯ææä»¶å¤§çº²ï¼ä¹¦ç­¾ï¼ï¼ç¨æ·å¯ä»¥éè¿ç¹å»ä¹¦ç­¾å®æè·³è½¬åè½ï¼ç±»ä¼¼ä¸office wordä¸­çå¤§çº²åè½ã\n\nå¸¸ç¨çè·³è½¬åè½æï¼è·³è½¬å°ææ¡£åé¨é¡µé¢ãè·³è½¬å°å¶ä»PDFææ¡£çæä¸é¡µãè·³è½¬å°webé¡µé¢ãè·³è½¬å°å¤é¨æä»¶ï¼éPDFï¼ç­ç­ã\n\nä¹¦ç­¾æ¯ä¸ä¸ªæ ç¶ç»æï¼æ ¹æ®éåFirstãNextï¼å¾å°å®æ´çä¹¦ç­¾èç¹ãä¸é¢æ¯ä¸ä¸ªä¹¦ç­¾çä¾å­ï¼å¯ä»¥éè¿è¿ä¸ªä¾å­æ·±å¥äºè§£å¶ç»æï¼\n\n48 0 obj\n<</MarkInfo <</Marked true>>\n/Metadata 3 0 R\n/Outlines 73 0 R\n/PageLayout /OneColumn\n/PageMode /UseOutlines            % ä¹¦ç­¾æ ¹èç¹\n/Pages 2 0 R\n/StructTreeRoot 5 0 R\n/Type/Catalog\n/ViewerPreferences<</HideMenubar true/HideToolbar true>>>>\nendobj\n\n73 0 obj\n<</Count 4                     % å­èç¹æ°é\n/First 74 0 R                  % ç¬¬ä¸ä¸ªå­èç¹å¯¹åºçé´æ¥å¼ç¨å¯¹è±¡\n/Last 75 0 R                   % æåä¸ä¸ªå­èç¹å¯¹åºçé´æ¥å¼ç¨å¯¹è±¡\n/Type/Outlines>>\nendobj\n\n74 0 obj\n<</A 77 0 R                  % è·³è½¬åè½çé´æ¥å¼ç¨å¯¹è±¡\n/Count 2                     % å­èç¹æ°é\n/First 78 0 R                % ç¬¬ä¸ä¸ªå­èç¹å¯¹åºçé´æ¥å¼ç¨å¯¹è±¡\n/Last 79 0 R                 % æåä¸ä¸ªå­èç¹å¯¹åºçé´æ¥å¼ç¨å¯¹è±¡\n/Next 75 0 R                 % åå¼èç¹å¯¹åºçé´æ¥å¼ç¨å¯¹è±¡\n/Parent 73 0 R               % ç¶èç¹å¯¹åºçé´æ¥å¼ç¨å¯¹è±¡\n/Title(book1)>>              % ä¹¦ç­¾æ¾ç¤ºåå®¹\nendobj\n\n75 0 obj\n<</A 78 0 R\n/C[1.0 0.333328 0.0]         % ä¹¦ç­¾å­ä½é¢è²\n/F 2                         % ä¹¦ç­¾å­ä½æ è®°ï¼ç²ä½/æä½/ç²æä½ï¼\n/Next 76 0 R\n/Parent 71 0 R\n/Title(mark1)>>\nendobj\n\n76 0 obj\n<<\n/D[\n49 0 R                       % è·³è½¬å°ææ¡£å¯¹åºçé¡µé¢å¯¹è±¡\n/Fit                         % è·³è½¬å°å¯¹åºé¡µé¢å±ç¤ºçåå®¹\n]              \n/S/GoTo                      % è·³è½¬ç±»åï¼è¯¥ç±»ååè¯æµè§å¨è·³è½¬å°ææ¡£åé¡µé¢\n>>\nendobj\n\n77 0 obj\n<</D[49 0 R/Fit]/S/GoTo>>\nendobj\n\n78 0 obj\n<</A 81 0 R/Next 79 0 R/Parent 74 0 R/Title(mark1)>>\nendobj\n\n79 0 obj\n<</A 80 0 R/Parent 74 0 R/Prev 78 0 R/Title(mark2)>>\nendobj\n\n80 0 obj\n<</D[49 0 R/Fit]/S/GoTo>>\nendobj\n\n81 0 obj\n<</D[49 0 R/Fit]/S/GoTo>>\nendobj\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n\n\n\n# 5.5 Action\n\nAction å­å¸çåå®¹å¤§è´å¦ä¸ï¼\n\n3 0 obj\n<< /Type /Action\n/S /GoToE\n/D (Chapter 1)\n/T << /R /P\n/T << /R /C\n/N (Another embedded document) >>\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n/Type /Actionè¯´æå½åå­å¸ä¸ºActionçæè¿°ï¼/Sææå¨ä½ç±»åï¼/N(å¯é)æå®å½åå¨ä½å®æåéè¦æ§è¡çå¨ä½æå¨ä½åºåã\n\nAction å¨ä½ï¼é¤äºç¨äºè·³è½¬å°ææ¡£ä¸­çæä¸ªé¡µé¢ä¹å¤ï¼annotationæoutlineä¹å¯ä»¥æå®è¦æ§è¡çå¨ä½ï¼ä¾å¦ï¼å¯å¨åºç¨ç¨åºï¼æ­æ¾å£°é³ï¼æ¹åæ³¨éçå¤è§ç¶æã annotationæoutlineå­å¸ä¸­çA(optional)æ¡ç®å¯ä»¥æå®ä¸ä¸ªå¨annotationæoutlineè¢«æ¿æ´»æ¶æ§è¡çå¨ä½ãå¨ PDF 1.2 ä¸­ï¼åç§å¶ä»æåµ(Trigger Events)ä¹å¯è½è§¦åActionãæ­¤å¤ï¼ææ¡£çCatalogä¹å¯ä»¥éè¿OpenAction(optional)æ¡ç®æå®å¨æå¼ææ¡£æ¶åºæ§è¡çæä½ã\n\nä¸é¢ååºPDFæ¯æçæ åçActionç±»åï¼\n\nACTION        DESCRIPTION                         NOTE\nGoTo          è½¬å°å½åææ¡£ä¸­çç®æ ä½ç½®                        \nGoToR         è½¬å°å¦ä¸ä¸ªææ¡£ä¸­çç®æ ä½ç½®                       Go-to remote\nGoToE         è½¬å°æä¸ªåµå¥æä»¶                            Go-to embedded\nLaunch        å¯å¨åºç¨ç¨åºï¼éå¸¸æ¯æå¼æä»¶                      \nThread        å¼å§éè¯»æç« çº¿ç´¢                            \nURI           è§£æå°URI(ç»ä¸èµæºæ è¯ç¬¦ï¼ä»£è¡¨Internetä¸èµæºçå­ç¬¦ä¸²)   éå¸¸æ¯ä½ä¸ºè¶ææ¬é¾æ¥çç®æ çæä»¶\nSound         æ­æ¾é³é¢                                \nMovie         æ­æ¾è§é¢                                \nHide          è®¾ç½® annotation çéèæ å¿                 éè¿è®¾ç½®ææ¸é¤ä¸ä¸ªæå¤ä¸ªæ³¨éçéèæ å¿ï¼æ¥éèææ¾ç¤ºè¿äºæ³¨é\nNamed         æ§è¡ç¬¦åPDFæ åçéè¯»å¨é¢å®ä¹çæä½                 \nSubmitForm    å°æ°æ®åéå°æå¡å¨ï¼ç±»ä¼¼äºç½é¡µçformï¼               æ­¤æä½ä¼å°æéäº¤äºå¼è¡¨åå­æ®µçåç§°åå¼ä¼ éå°æå®çURL\nResetForm     å°å­æ®µè®¾ç½®ä¸ºå¶é»è®¤å¼                          \nImportData    ä»æä»¶å¯¼å¥å­æ®µå¼                            æ­¤æä½åºå°è¡¨åæ°æ®æ ¼å¼ï¼FDFï¼æ°æ®ä»æå®æä»¶å¯¼å¥å°ææ¡£çäº¤äºå¼è¡¨åä¸­\nJavaScript    æ§è¡ JS èæ¬                            \nSetOCGState   è®¾ç½®å¯éåå®¹ç»çç¶æ                          \nRendition     æ§å¶å¤åªä½åå®¹çæ­æ¾                          \nTrans         ä½¿ç¨transitionå­å¸æ´æ°ææ¡£çæ¾ç¤º               PDF 1.5 ä¸­ transition å¯ç¨äºæ§å¶ä¸ç³»å action æé´çç»å¾\nGoTo3DView    è®¾ç½®3Dæ³¨éçå½åè§å¾                         PDF 1.6 ä¸­æ è¯3Dæ³¨éå¹¶æå®è¦ä½¿ç¨çæ³¨éçè§å¾\n\n\n# 5.6 Destinations\n\nDestinationsæ¬è´¨ä¸æ¯ä¸ä¸ªå½åçé¡µé¢è§å¾ãå®å°ä¸ä¸ªç¬ä¸æ äºçåç§°ä¸åä¸ª PDF ææ¡£ä¸­çç¹å®é¡µé¢ä½ç½®ç¸å³èãä¹¦ç­¾åé¾æ¥å¯ä»¥å¨ Go to a page view, Go to a page view in another documentåGo to a page in attachment actions ä¸­ä½¿ç¨å½åç®æ èä¸æ¯ç´æ¥é¡µé¢å¼ç¨ã\n\né£ä¸ºä»ä¹è¦ä½¿ç¨å®å¢ï¼\n\nDestinationsåè®¸è®¾ç½®è·¨ PDF ææ¡£éåçå¯¼èªè·¯å¾ãé¾æ¥å¤ä¸ª PDF ææ¡£æ¶å»ºè®®ä½¿ç¨å½åç®æ ï¼å ä¸ºä¸é¾æ¥å°é¡µé¢ä¸åï¼é¾æ¥å°Destinationsä¸ååä¸ªææ¡£ä¸­é¡µé¢æ·»å æå é¤çå½±åãä¾å¦ï¼å¦æ A.pdf ä¸­çé¾æ¥æå B.pdf ä¸­çå½åç®çå°âChapter1âï¼é£ä¹å¦æ B.pdf ä¸­çæäºé¡µé¢å·²è¢«å é¤ãç§»å¨ææå¥æ°é¡µé¢ï¼åæ­¤é¾æ¥å°ç»§ç»­æ­£å¸¸å·¥ä½ãå¦æ A.pdf ç´æ¥å¼ç¨ B.pdf ä¸­çç¹å®é¡µé¢ï¼åæåµå¹¶éå¦æ­¤ãå¯¹ B.pdf ä¸­é¡µé¢çä»»ä½æ´æ¹é½ä¼ç ´åç´æ¥é¡µé¢é¾æ¥ã\n\n\n# 5.7 Article thread\n\næäºç±»åçææ¡£å¯è½ä¼åå«é»è¾è¿æ¥ï¼èè¿ä¸ªé»è¾é¡ºåºå¹¶ä¸æ¯ç©çé¡ºåºãæ¯å¦ï¼æ°é»æ¥éå¯ä»¥ä»æ°é»éè®¯çç¬¬ä¸é¡µå¼å§ï¼ç¶åè½¬å°ä¸ä¸ªæå¤ä¸ªéè¿ç»­çåé¡µã\n\nä¸ºäºè¡¨ç¤ºç©çä¸ä¸è¿ç»­ä½é»è¾ç¸å³çé¡¹ç®çåºåï¼PDFææ¡£å®ä¹äºä¸ä¸ªæå¤ä¸ªArticleï¼PDF 1.1ï¼ã Articleçé¡ºåºç±article threadå®ä¹; ç»ææç« çåä¸ªåå®¹é¡¹å¨çº¿ç¨ä¸ç§°ä¸ºç å­ï¼beadï¼ã ç¨æ·å¯ä»¥éè¿ç¹å»ä»ä¸ä¸ªç å­å°ä¸ä¸ä¸ªç å­è¿è¡è·³è½¬ã\n\nææ¡£Catalogä¸­å¯ä»¥å®ä¹çå¯éThreadsæ¡ç®ï¼è¯¥æ¡ç®ä¸­å®ä¹äºä¸ä¸ªThreadè¯å¸ç»æçæ°ç»ï¼ç¨æ¥è¡¨ç¤ºææ¡£ArticlesãThreadåçæ¯ä¸ªåç¬çbeadåºç±beadå­å¸è¡¨ç¤ºãThreadå­å¸çâFâæ¡ç®åºæå®Threadsä¸­çç¬¬ä¸ä¸ªbead; beadéè¿âNâï¼ä¸ä¸ä¸ªï¼åâVâï¼åä¸ä¸ªï¼æ¡ç®ï¼ææä¸ä¸ªå¨ä¸ä¸ªååé¾è¡¨ï¼å°ææbeadé¡ºåºé¾æ¥å¨ä¸èµ·ã æ­¤å¤ï¼å¯¹äºåºç° article beads çæ¯ä¸ªé¡µé¢ï¼é¡µé¢å¯¹è±¡ï¼Pageï¼åºåå«ä¸ä¸ªBæ¡ç®ï¼å¶å¼æ¯é¡µé¢ä¸çbeadé´æ¥å¼ç¨çæ°ç»ï¼é¡ºåºæ¯æç§ç»å¾é¡ºåºè¿è¡æåã\n\n\n# 5.8 Interactive Forms\n\nInteractive Forms äº¤äºå¼è¡¨åï¼ææ¶ä¹ç§°ä¸º AcroFormï¼æ¯éè¿äº¤äºæ¹å¼ï¼ä»ç¨æ·ç«¯æ¶éä¿¡æ¯å­æ®µçéåã\n\nPDFææ¡£ä¸­ï¼ä»»ä½é¡µé¢é½å¯ä»¥å­å¨ä»»ææ°éçå­æ®µï¼èææè¿äºå­æ®µå¯ä»¥ææè·¨è¶æ´ä¸ªææ¡£çåä¸ªå¨å±äº¤äºå¼è¡¨åãè¿äºå­æ®µçä»»æå­éå¯ä»¥ä»ææ¡£å¯¼å¥æå¯¼åºã\n\nææ¡£äº¤äºè¡¨åä¸­çæ¯ä¸ªå­æ®µé½åºç± field å­æ®µå­å¸å®ä¹ãææ¡£äº¤äºè¡¨åçåå®¹åå±æ§åºç±äº¤äºå¼è¡¨åå­å¸å®ä¹ï¼è¯¥å­å¸åºä»ææ¡£ç®å½ä¸­çAcroFormæ¡ç®å¼ç¨ã\n\nåºäºå®ä¹åå½åçç®çï¼å¯ä»¥æå±æ¬¡ç»æï¼æ å½¢ç»æï¼æ¥ç»ç»å­æ®µï¼å¹¶ä¸å¯ä»¥ä»å­æ®µå±æ¬¡ç»æä¸­çç¥åé£éç»§æ¿ç¥åçå±æ§ã å±æ¬¡ç»æä¸­çå­æ®µå­èç¹ï¼è¿å¯ä»¥åæ¬ç¨äºå®ä¹å¶å¨é¡µé¢ä¸ç widget çªå£å°é¨ä»¶æ³¨éï¼å½åªå®ä¹äºä¸ä¸ªwidgetæ¶ï¼fieldå­å¸åwidgetå­å¸å¯ä»¥åå¹¶ä¸ºä¸ä¸ªå­å¸ï¼ã å·æå­å­æ®µçå­æ®µç§°ä¸ºéç»ç«¯å­æ®µï¼å³ä¸­é´èç¹ï¼ï¼æ²¡æå­å­æ®µçå­æ®µç§°ä¸ºç»ç«¯å­æ®µï¼å³å¶èç¹ï¼ã\n\nä¸è¡¨æ¾ç¤ºäºäº¤äºå¼è¡¨åå­å¸çåå®¹ï¼\n\nKEY               TYPE              DESCRIPTION\nFields            array             æ ¹ field å­æ®µæ°ç»ï¼å­æ®µå±æ¬¡ç»æä¸­æ²¡æç¥åçå­æ®µï¼\nNeedAppearances   boolean           optionalï¼æå®æ¯å¦ä¸ºææ¡£ä¸­çææ widget æ³¨éæé å¤è§æµåå¤è§å­å¸ã é»è®¤å¼ï¼false\nSigFlags          integer           optionalï¼PDF 1.3 å¼å§ï¼ç¨äºæå®ä¸ç­¾åå­æ®µç¸å³çåç§ææ¡£çº§å«ç¹å¾ã é»è®¤å¼ï¼0\nCO                array             ï¼å¦æææ¡£ä¸­çä»»ä½å­æ®µå·æåå«Cæ¡ç®çéå æä½å­å¸ï¼åä¸ºå¿é; PDF\n                                    1.3ï¼å·æè®¡ç®æä½çå­æ®µå­å¸çé´æ¥å¼ç¨æ°ç»ï¼ç±äºæä¸ªå­æ®µçååï¼å¯¼è´éè¦æ ¹æ®è®¡ç®é¡ºåºéæ°è®¡ç®å¶å¼\nDR                dictionary        optionalï¼è¡¨åå­æ®µå¤è§å°ä½¿ç¨å°çé»è®¤èµæºï¼å¦å­ä½ï¼å¾æ¡æé¢è²ç©ºé´ï¼çèµæºå­å¸ã\n                                    è¯¥å­å¸è³å°åºåå«ä¸ä¸ªFontæ¡ç®ï¼ç¨äºæå®æ¾ç¤ºææ¬çé»è®¤å­ä½çèµæºåç§°åå­ä½å­å¸\nDA                string            optionalï¼å¯åææ¬å­æ®µçDAå±æ§çææ¡£èå´é»è®¤å¼\nQ                 integer           optionalï¼å¯åææ¬å­æ®µçQå±æ§çææ¡£èå´é»è®¤å¼\nXFA               stream or array   optionalï¼PDF 1.5 å¼å§ï¼ç¨äºåå«XFAèµæºçæµææ°ç»ï¼å¶æ ¼å¼åºç±æ°æ®åï¼XDPï¼è§èæè¿°ã\n                                    æ­¤æ¡ç®çå¼åºè¯¥æ¯è¡¨ç¤ºXMLæ°æ®åçå¨é¨åå®¹çæµï¼æèæ¯è¡¨ç¤ºåå«XMLæ°æ®åçåä¸ªæ°æ®åçææ¬å­ç¬¦ä¸²åæµå¯¹è±¡çæ°ç»\n\n\n# 5.9 Forms Data Format\n\nForms Data Format è¡¨åæ°æ®æ ¼å¼ãFDFæ¯ä¸ç§æä»¶æ ¼å¼ï¼ç¨äºè¡¨ç¤ºPDFæ ¼å¼ä¸­åå«çè¡¨åæ°æ®åæ³¨éãæ­¤æ ¼å¼ç± Adobe Systems Incorporated åæï¼å®åºäºPDFæ ¼å¼ãæ¨å¯ä»¥å¨AdobeçPDFåèä¸­æ¾å°FDFæ ¼å¼çè¯¦ç»è§èã\n\nFDFæ ¼å¼å¯ç¨äºåç§å·¥ä½æµç¨ãä»¥ä¸æ¯å ä¸ªç¤ºä¾ï¼\n\n * å°è¡¨åæ°æ®åéå°æå¡å¨å¹¶ä»æå¡å¨æ¥æ¶ä¿®æ¹åçè¡¨åæ°æ®ãæ­¤å·¥ä½æµç¨çèµ·æ¥åè¿æ ·ï¼\n   \n     a. è¡¨åæ°æ®ä»¥FDFæ ¼å¼æäº¤ç»æå¡å¨ãï¼éå¸¸ï¼å½å®¢æ·ç«¯è®¡ç®æºä¸çç¨æ·åå»è¡¨åä¸çâæäº¤âæé®æ¶ï¼ä¼åçè¿ç§æåµãï¼\n     b. å¨æå¡å¨ä¸ï¼FDFæ°æ®è¢«ä¿®æ¹ã\n     c. æå¡å¨å°ä¿®æ¹åçFDFæ°æ®åéåå®¢æ·ç«¯ã\n     d. å¨å®¢æ·ç«¯è®¡ç®æºä¸ï¼è¡¨åä¸­çå­æ®µå°å¡«åä¿®æ¹åçæ°æ®ã\n   \n   \n   1\n   2\n   3\n   4\n   \n * å­æ¡£è¡¨åæ°æ®ãæ­¤å·¥ä½æµç¨çèµ·æ¥åè¿æ ·ï¼\n   \n     a. ç¨æ·ä½¿ç¨Adobe Acrobatæå¶ä»PDFç¼è¾/æ¥çåºç¨ç¨åºä»¥FDFæ ¼å¼å¯¼åºè¡¨åæ°æ®ãï¼è¦å¨Adobe Acrobat 6.x for Windowsä¸­æ§è¡æ­¤æä½ï¼è¯·åå»é«çº§>è¡¨å>å¯¼åºè¡¨åæ°æ®ï¼ç¶åéæ©Acrobat FDFæä»¶ï¼* .fdfï¼ä½ä¸ºâå¦å­ä¸ºç±»åâãå¦ææ¨ä½¿ç¨çæ¯å¦ä¸ä¸ªçæ¬ï¼åè¯¥è¿ç¨å¯è½ä¼ææä¸åï¼\n     b. FDFæä»¶ä¿å­å¨å¬å¸çæ¡£æ¡ä¸­ã\n     c. è¦æ¥çè¡¨åæ°æ®ï¼ç¨æ·å°ä½¿ç¨Adobe Acrobatæå¶ä»ä¸äºPDFæ¥ç/ç¼è¾åºç¨ç¨åºï¼æ¥æå¼FDFæä»¶; è¿å°å¯¼è´PDFæ¥ç/ç¼è¾åºç¨ç¨åºäº§çä¸ä¸ªæä½ï¼1ï¼æ¾å°éè¦å¯¼åºè¡¨åæ°æ®çPDFè¡¨åï¼2ï¼å°è¡¨åæ°æ®å è½½å°è¡¨åä¸­ï¼3ï¼å¨å±å¹ä¸æ¾ç¤ºå¸¦æå è½½æ°æ®çè¡¨åã\n   \n   \n   1\n   2\n   3\n   \n\næ¨å¯è½æ³ç¥éä¸ºä»ä¹è¦å­æ¡£åå«PDFè¡¨åæ°æ®çFDFæä»¶ï¼èä¸æ¯ç®åå°ä½¿ç¨åå«è¡¨åæ°æ®çPDFãæä¸¤ä¸ªåå ï¼\n\n 1. åå«PDFè¡¨åçè¡¨åæ°æ®çFDFæä»¶ï¼æ¯åå«è¡¨åPDFæ¬èº«çæä»¶å°å¾å¤ï¼å æ­¤å½æ¡£FDFæä»¶æ¯å½æ¡£è¡¨åPDFéè¦æ´å°çå­å¨ç©ºé´ã\n 2. äººä»¬ç¨æ¥æ¥çè¡¨åPDFå¹¶ä¸ä¹äº¤äºçæäºè½¯ä»¶ä¸åè®¸ç¨æ·ä¿å­å¡«åçè¡¨åPDFãä¾å¦ï¼åè´¹çâAdobe Readerâè½¯ä»¶ä¸åè®¸è¿æ ·åã\n\néè¦è¯´æï¼FDFæä»¶åå«è¡¨åPDFçæä»¶ååä½ç½®ï¼FDFæä»¶æ¯ä»è¯¥è¡¨åPDFä¸­å¯¼åºçï¼ãAdobe Acrobatï¼ä»¥åä»»ä½æ¯æPDFè¡¨åçPDFæ¥ç/ç¼è¾åºç¨ç¨åºï¼ä¾èµäºè¯¥æä»¶ååä½ç½®ï¼ä»¥ä¾¿å¨æå¼FDFæä»¶æ¶æ£ç´¢åæå¼ç¸åºçPDFè¡¨åãæ¢å¥è¯è¯´ï¼æå¼FDFæä»¶æ¶ï¼PDFæ¥ç/ç¼è¾åºç¨ç¨åºä¼æ ¹æ®æå®çä½ç½®ï¼æ¾ç¤ºPDFè¡¨åã\n\nå æ­¤ï¼å¦ææ¨æ¯èèå®æ½å½æ¡£FDFæ°æ®çç³»ç»çå¼åäººåï¼åéè¦ç¡®ä¿æ¨çç³»ç»å·æå°æéè¡¨åPDFå­å¨å¨å·²ç¥ä½ç½®çå¯é æ¹æ³ãå¦åï¼PDFæ¥ç/ç¼è¾åºç¨ç¨åºæ æ³å§ç»å¨éè¦æ¶æ£ç´¢åæå¼è¡¨åPDFã\n\næäºPDFæ¥ç/ç¼è¾åºç¨ç¨åºä¸æ¯æä¸è¡¨åPDFç¸å³çææåè½ã\n\næ»ä¹ï¼FDFå¯å¨å°è¡¨åæ°æ®æäº¤ç»æå¡å¨ï¼æ¥æ¶ååºï¼å¹¶å°ååºç»æåå¹¶å°äº¤äºå¼è¡¨åä¸­ã å®è¿å¯ç¨äºå°è¡¨åæ°æ®å¯¼åºä¸ºç¬ç«çæä»¶ï¼è¿äºæä»¶å¯ä»¥å­å¨ï¼ä»¥çµå­æ¹å¼ä¼ è¾ï¼ä¹å¯ä»¥å¯¼åå°ç¸åºçPDFäº¤äºå¼è¡¨åä¸­ã æ­¤å¤ï¼ä»PDF 1.3å¼å§ï¼FDFå¯ç¨äºå®ä¹æ³¨éçå®¹å¨ï¼ä½¿å¾è¿äºæ³¨éä¸å®ä»¬æå¨PDFææ¡£åç¦»ã\n\nå¦å¤ï¼è½ç¶ FDF åºäº PDF; å®ä½¿ç¨PDFä¸æ ·çè¯­æ³ï¼å¹¶ä¸å·æåºæ¬ç¸åçæä»¶ç»æãä½æ¯ï¼å®å¨ä»¥ä¸æ¹é¢ä¸PDFä¸åï¼\n\n * äº¤åå¼ç¨è¡¨æ¯å¯éçã\n * ä¸åºå¢éæ´æ°FDFæä»¶ã å¯¹è±¡åªè½æ¯0ä»£ï¼FDFæä»¶ä¸­æ²¡æä¸¤ä¸ªå¯¹è±¡å·æç¸åçå¯¹è±¡ç¼å·ã\n * ææ¡£ç»ææ¯PDFç®åå¾å¤ï¼å ä¸ºFDFææ¡£çä¸»ä½åªåå«ä¸ä¸ªå¿éå¯¹è±¡ã\n * æµçé¿åº¦ä¸åºç±é´æ¥å¯¹è±¡æå®ã\n * FDFä½¿ç¨MIMEåå®¹ç±»åapplication/vnd.fdfã å¨WindowsåUNIXå¹³å°ä¸ï¼FDFæä»¶çæ©å±åä¸º.fdf; å¨Mac OSä¸ï¼ä»ä»¬çæä»¶ç±»åæ¯FDFã\n\n\n# 5.10 XFA\n\nXFA(XML Forms Architecture)è¿æ¯ç±JetFormå»ºè®®åå¼åçä¸ç³»åä¸æ XMLè§èï¼ç¨äºå¢å¼ºWebè¡¨åçå¤çãPDF 1.5 å¼å¥äºåºäºXFA çäº¤äºå¼è¡¨åçæ¯æãXFAè§èè¢«å¼ç¨ä½ä¸ºISO 32000-1è§èï¼PDF 1.7ï¼åºç¨å¿ä¸å¯å°çå¤é¨è§èãXML Forms Architectureæªæ ååä¸ºISOæ åã\n\nXFAè¡¨åä¿å­å¨PDFæä»¶åé¨ï¼å¯ä»¥ä½ä¸ºXDPï¼XMLæ°æ®åï¼æä»¶è¿è¡ä¿å­ï¼å¯ä»¥å¨AdobeçLiveCycle Designerè½¯ä»¶ä¸­æå¼ã\n\nè½ç¶XFAå¯ä»¥ä½¿ç¨PDFï¼ä½XFAå¹¶ä¸ä¾èµäºç¹å®çé¡µé¢æè¿°è¯­è¨ã\n\nXFA æéæåå¨æè¡¨æ ¼ä¹åãå¨éæå½¢å¼ä¸­ï¼æ è®ºå­æ®µåå®¹å¦ä½ï¼ è¡¨åçå¤è§åå¸å±é½æ¯åºå®çãå¨æè¡¨åï¼èªXFA 2.1æ2.2å®ä¹ï¼å¯ä»¥éè¿å¤ç§æ¹å¼æ´æ¹å¤è§ä»¥ååºæ°æ®çæ´æ¹ãå¨æè¡¨åéè¦å¨æä»¶æå¼æ¶åç°å¶åå®¹ãå¨æè¡¨åè¿å¯ä»¥è¢«è®¾è®¡ä¸ºæ¹åç»æä»¥éåºæä¾ç»è¡¨åçæ°æ®ç»æçååãä¾å¦ï¼å¦ææ²¡ææ°æ®ï¼åå¯ä»¥çç¥è¡¨åçé¡µé¢ãå¦ä¸ä¸ªä¾å­æ¯å¯è½å ç¨é¡µé¢ä¸å¯åç©ºé´éçå­æ®µï¼è°æ´å¶èªèº«ä»¥ææå°ä¿æå¶åå®¹ãå¨æè¡¨åä¸è½ä¾èµäºå¶æ ·æ¿çPDFè¡¨ç¤ºï¼å ä¸ºæ ·æ¿çå®ä½åå¸å±éçå­æ®µçå¢é¿åæ¶ç¼©æå­è¡¨åè¢«çç¥ååå«èæ¹åã\n\n\n# 6 Graphics\n\n\n\n\n# 6.1 Graphics Objects\n\nGraphics Objectsï¼ å¾å½¢å¯¹è±¡ãåå®¹æµä¸­å­å¨ä¸¤ç§ç±»åçåç´ ï¼ä¸ãå¾å½¢å¯¹è±¡ï¼å­ä½ï¼shadingï¼å¾çï¼éå¸¸ç¨nameå¯¹è±¡è¡¨ç¤ºï¼ï¼äºãä¿®é¥°å¾å½¢å¯¹è±¡çæä½ç¬¦ï¼å®ä½ï¼ç¼©æ¾ï¼é¢è²ï¼å¤§å°ï¼åªåï¼éæç­ï¼ï¼ç±è¿ä¸¤ç±»åç´ æç»åºäºé¡µé¢çå¤è§ã\n\nPDFæä¾äºç§ç±»åçå¾å½¢å¯¹è±¡ï¼\n\n * è·¯å¾å¯¹è±¡ï¼å¯ä»¥æ¯ç´çº¿ï¼ç©å½¢åè´å¡å°æ²çº¿ï¼æå®ä»¬ç»åèæçä»»æå½¢ç¶ã è·¯å¾å¯ä»¥èªèº«ç¸äº¤ã\n * ææ¬å¯¹è±¡ï¼ç±ä¸ä¸ªæå¤ä¸ªå­ç¬¦ä¸²ç»æã\n * å¤é¨å¯¹è±¡ï¼XObjectï¼ï¼æ¯å¨åå®¹æµå¤é¨å®ä¹çå¯¹è±¡ï¼å¹¶ä½ä¸ºå½åèµæºå¼ç¨ï¼âèµæºå­å¸âï¼ã\n * åèå¾åå¯¹è±¡ï¼ä½¿ç¨ç¹æ®è¯­æ³ç´æ¥å¨åå®¹æµä¸­è¡¨ç¤ºå°å¾åçæ°æ®ã\n * shadingå¯¹è±¡ï¼æè¿°å ä½å½¢ç¶ï¼å¶é¢è²æ¯å½¢ç¶åä½ç½®çä»»æå½æ°ã ï¼å¨ç»å¶å¶ä»å¾å½¢å¯¹è±¡æ¶ï¼shadingä¹å¯ä»¥è¢«è§ä¸ºé¢è²;å¨è¿ç§æåµä¸ï¼å®ä¸è¢«è§ä¸ºåç¬çå¾å½¢å¯¹è±¡ãï¼\n\nPDF 1.3åæ´æ©çæ¬ä¸æ¯æéæï¼ç±äºæ¯ä¸ªå¾å½¢å¯¹è±¡æé¡ºåºç»å¶ï¼åé¢ç»å¶çåå®¹ï¼ä¼æåé¢ç»å¶çåå®¹è¦çæãPDF 1.4å¼å§æ¯æéææåæ¨¡åï¼å¯¹è±¡å¯ä»¥æ ¹æ®è®¾ç½®éæç¨åº¦ã\n\n\n# 6.2 Coordinate Systems\n\nPDFä¸­ï¼ææç»å¶é½å¨ç»å¸ï¼ä¹å°±æ¯æä»¬çå°çé¡µé¢pageï¼ä¸è¿è¡çãåæ ç³»å³å®äºæ¾ç¤ºå¨é¡µé¢ä¸çææ¬ãå¾å½¢åå¾åçä½ç½®ãæ¹ååå¤§å°ãè¿éä»ç» PDF ä¸­ä½¿ç¨çåæ ç³»ï¼åæ¬å®ä»¬ä¹é´çå³ç³»ä»¥åå¦ä½è½¬æ¢ã\n\n# 6.2.1 Coordinate Spaces\n\nè·¯å¾åä½ç½®æ¯éè¿ä¸å¯¹åæ è¿è¡å®ä¹çï¼ x å y è¡¨ç¤ºäºç»´åæ ç©ºé´ä¸­çæ°´å¹³ä½ç½®ååç´ä½ç½®ãåæ ç©ºé´ç±ä»¥ä¸ä¸å½åé¡µé¢ç¸å³çå±æ§å³å®ï¼\n\n * åæ åç¹\n * XåYè½´çæ¹å\n * æ²¿XåYè½´çé¿åº¦\n\nPDFå®ä¹äºå ç§åæ ç©ºé´ï¼ç¨äºè§£æå¾å½¢å¯¹è±¡çåæ ãåæ ç©ºé´ä¹é´å¯ä»¥ç¸äºåæ¢ï¼è¿äºåæ¢ç±åæ¢ç©éµå®ä¹ï¼åæ¢ç©éµå¯ä»¥æå®äºç»´åæ çä»»ä½çº¿æ§æ å°ï¼åæ¬å¹³ç§»ãç¼©æ¾ãæè½¬ãåå°åå¾æã\n\n# 1. è®¾å¤ç©ºé´\n\næ¯ä¸ç§ç¨æ¥æ¾ç¤ºPDFçè®¾å¤ï¼æ¾ç¤ºå¨ãæå°æºï¼ï¼é½å¯è½æèªå·±çç¬ç¹çä¸å¥è®¾å¤åæ ç³»ï¼ä¹è¢«ç§°ä½è®¾å¤ç©ºé´ï¼ææ¯åæ åç¹ä¸åï¼XåYè½´çæ¹åä¸åï¼ä¹å¯è½æ¯åè¾¨çä¸åï¼è¿äºä¸åå°±ä¼å¯¼è´æ¾ç¤ºåºæ¥çå¯¹è±¡ä¸ä¸æ ·ï¼å¦ï¼ åä¸ä¸ªå¾å½¢å¯¹è±¡å¨72åç´ /è±å¯¸æ¾ç¤ºå¨è®¾å¤åæ ç³»ä¸­æ¾ç¤ºææï¼åèæ¯å¨600ç¹/è±å¯¸æå°æºçè®¾å¤åæ ç³»ä¸­æå°ææï¼æ¾èä¸åã\n\n# 2. ç¨æ·ç©ºé´\n\nä¸ºäºé¿åä¸åè®¾å¤çè®¾å¤åæ ç³»å¯¹æ¾ç¤ºå¯¹è±¡çå½±åï¼PDFå®ä¹äºä¸ç§ä¸è®¾å¤æ å³çåæ ç³»ï¼è¯¥åæ ç³»å§ç»ä¸å½åé¡µé¢å·æç¸åçå³ç³»ï¼èä¸ç®¡æå°ææ¾ç¤ºå¨åªä¸ªè¾åºè®¾å¤ä¸ãè¿ç§ä¸è®¾å¤æ å³çåæ ç³»ç§°ä¸ºç¨æ·ç©ºé´ã\n\nææ¡£çæ¯ä¸ªé¡µé¢é½ä¼è¢«ç¨æ·ç©ºé´çé»è®¤ç¶æåå§åãé¡µé¢å­å¸ä¸­çCropBoxæ¡ç®æå®äºè¾åºä»è´¨ï¼å³æ¾ç¤ºçªå£ææå°é¡µé¢ï¼çå¯è§ç©å½¢åºåãéå¸¸æåµä¸ï¼æ­£ x è½´æ°´å¹³åå³å»¶ä¼¸ï¼æ­£ y è½´åç´åä¸å»¶ä¼¸ï¼å¯è½å é¡µé¢å­å¸ä¸­çRotateæ¡ç®èæ¹åï¼ãæ²¿ x å y è½´çé¿åº¦åä½ç±é¡µé¢å­å¸ä¸­çUserUnitæ¡ç®ï¼PDF 1.6ï¼è®¾ç½®ãå¦æè¯¥æ¡ç®ä¸å­å¨æä¸è¢«æ¯æï¼åä½¿ç¨1/72è±å¯¸çé»è®¤å¼ãè¿ä¸ªåæ ç³»ç§°ä¸ºé»è®¤ç¨æ·åæ ç³»ã\n\nNote1ï¼å¨PostScriptä¸­ï¼é»è®¤ç¨æ·ç©ºé´çåç¹å§ç»å¯¹åºäºè¾åºä»è´¨çå·¦ä¸è§ãPDFææ¡£ä¸­é»è®¤ä¹æ¯è¿æ ·çï¼ä½å¹¶ä¸ä¸å®å¦æ­¤ï¼é¡µé¢å­å¸çCropBoxæ¡ç®ï¼å¯ä»¥æå®å¨è¾åºä»è´¨ä¸ï¼å¯è§çé»è®¤ç¨æ·ç©ºé´ä¸­çä»»ä½ä½ç½®åå¤§å°çç©å½¢åºåã\n\nNote2ï¼é»è®¤ç¨æ·ç©ºé´ä¸­åä½å¤§å°çé»è®¤å¼ï¼1/72è±å¯¸ï¼ä¸å°å·è¡ä¸ä¸­å¹¿æ³ä½¿ç¨çåºç¡åä½ç¹å¤§è´ç¸åãç¶èï¼å®å¹¶ä¸å®å¨ç¸åãä¸ä¸ªç¹æ²¡æéç¨çå®ä¹ã\n\nä»çè®ºä¸è®²ï¼ç¨æ·ç©ºé´æ¯ä¸ä¸ªæ éå¤§çå¹³é¢ãè¿ä¸ªå¹³é¢ä¸­åªæä¸å°é¨åå¯¹åºäºè¾åºè®¾å¤çå¯æååºåï¼ç±é¡µé¢å­å¸ä¸­çCropBoxæ¡ç®å®ä¹çç©å½¢åºå(æ¯ä¸é¡µçå¯æååºåå¤§å°å¯ä»¥ä¸å)ãç¨æ·ç©ºé´ä¸­çåæ å¯ä»¥æ¯ä»»æå®æ°ææ­£æ´æ°ï¼ç¨æ·ç©ºé´åæ çåè¾¨çä¸è®¾å¤ç©ºé´çåç´ åè¾¨çæ å³ã\n\nä»ç¨æ·ç©ºé´å°è®¾å¤ç©ºé´çè½¬æ¢ï¼ç±è½¬æ¢ç©éµcurrent transformation matrix (CTM)å®ä¹ï¼è¯¥ç©éµæ¯PDF graphics stateçä¸ä¸ªåç´ ãç¬¦åè¦æ±çéè¯»å¨å¯ä»¥éå¯¹ç¹å®è¾åºè®¾å¤çåå§åè¾¨çè°æ´ CTMï¼ä»èä¿æ PDF é¡µé¢æè¿°çè®¾å¤æ å³æ§ã\n\nNote3ï¼æ è®ºä½¿ç¨ä½ç§è¾åºè®¾å¤ï¼é»è®¤ç¨æ·ç©ºé´é½ä¸º PDF é¡µé¢æè¿°æä¾äºä¸è´ãå¯é çèµ·å§ä½ç½®ãå¦æå¿è¦ï¼PDF åå®¹æµå¯ä»¥éè¿åºç¨åæ åæ¢è¿ç®ç¬¦ cm æ¥ä¿®æ¹ç¨æ·ç©ºé´ä»¥ä½¿å¶æ´éåå¶éè¦ãå æ­¤ï¼åå®¹æµä¸­å¯è½åºç°çç»å¯¹åæ ç¸å¯¹äºå½åé¡µé¢å¹¶ä¸æ¯ç»å¯¹çï¼å ä¸ºå®ä»¬æ¯å¨ä¸ä¸ªå¯ä»¥æ»å¨åæ¶ç¼©ææ©å±çåæ ç³»ä¸­è¡¨è¾¾çãåæ ç³»è½¬æ¢ä¸ä»å¢å¼ºäºè®¾å¤ç¬ç«æ§ï¼èä¸æ¬èº«å°±æ¯ä¸ä¸ªæç¨çå·¥å·ã\n\nä¸å¾æ¾ç¤ºäºè¿å¦ä½åè®¸ç¨æ·ç©ºé´ä¸­æå®çå¯¹è±¡æ¾ç¤ºç¸åçå¯¹è±¡ï¼èä¸ç®¡å®æ¯å¨åªä¸ªè®¾å¤ä¸åç°çã\n\n# 3. å¶ä»åæ ç©ºé´\n\né¤äºè®¾å¤ç©ºé´åç¨æ·ç©ºé´å¤ï¼PDFè¿ä½¿ç¨äºåç§å¶ä»åæ ç©ºé´ç¨äºç¹æ®ç®çï¼\n\n * Text space\n   * ææ¬å®ä½æä½ç¬¦ï¼æ¥ç¨æå®ææ¬çä½ç½®ã\n * Glyph space\n   * ä»å­å½¢ç©ºé´å°ææ¬ç©ºé´çè½¬æ¢ç±å­ä½ç©éµå®ä¹ã\n * Form space\n   * ä»formç©ºé´å°ç¨æ·ç©ºé´çè½¬æ¢ç±åå«å¨form XObjectä¸­çç©éµæ¥æå®ã\n * Image space\n   * ææå¾åé½å¨å¾åç©ºé´ä¸­å®ä¹ãè¦è¿è¡ç»å¶æ¶ï¼éè¿CTMå°å¾åæ å°å°é¡µé¢çæä¸ªåºåã\n * Pattern space\n   * ä»pattern ç©ºé´å°ç¨æ·ç©ºé´çè½¬æ¢ç±pattern ä¸­åå«çpattern ç©éµæå®ã\n\n# 4. åæ ç©ºé´ä¹é´çå³ç³»\n\nä¸å¾æ¾ç¤ºäºä¸è¿°åæ ç©ºé´ä¹é´çå³ç³»ãå¾ä¸­çæ¯ä¸ªç®­å¤´è¡¨ç¤ºä»ä¸ä¸ªåæ ç©ºé´å°å¦ä¸ä¸ªåæ ç©ºé´çè½¬æ¢ãPDF åè®¸å¯¹è¿äºè½¬æ¢ä¸­çè®¸å¤è¿è¡ä¿®æ¹ã\n\nç±äº PDF åæ ç©ºé´æ¯ç¸å¯¹äºå½¼æ­¤å®ä¹çï¼å¯¹ä¸ç§åæ¢æåçæ´æ¹ä¼å½±åå¨å¤ä¸ªåæ ç©ºé´ä¸­å®ä¹çå¯¹è±¡çå¤è§ãä¾å¦ï¼CTMä¸­çä¸ä¸ªååå®ä¹äºä»ç¨æ·ç©ºé´å°è®¾å¤ç©ºé´çè½¬æ¢ï¼å®ä¼å½±åè¡¨åãææ¬ãå¾ååæ¨¡å¼ï¼å ä¸ºå®ä»¬é½æ¥èªç¨æ·ç©ºé´çä¸æ¸¸ã\n\n# 6.2.2 Common Transformations\n\nè½¬æ¢ç©éµæè¿°äºä¸¤ä¸ªåæ ç©ºé´ä¹é´çå³ç³»ãéè¿ä¿®æ¹åæ¢ç©éµï¼å¯ä»¥ç¼©æ¾ãæè½¬ãå¹³ç§»å¯¹è±¡ã\n\nPDFä¸­çè½¬æ¢ç©éµç±å­ä¸ªæ°å­æå®ï¼éå¸¸ä»¥æ°ç»çå½¢å¼åºç°ãéå¸¸ï¼è¿ä¸ªæ°ç»è¡¨ç¤ºä¸º[a b c d e f]ï¼å®å¯ä»¥è¡¨ç¤ºä»ä¸ä¸ªåæ ç³»å°å¦ä¸ä¸ªåæ ç³»çä»»ä½çº¿æ§åæ¢ãä¸é¢ååºçè½¬æ¢çç±»åï¼\n\n * å¹³ç§»ï¼æå®ä¸º[1 0 0 1 tx ty]ï¼å¶ä¸­txåtyåå«æ¯å¨æ°´å¹³ååç´å°ºå¯¸ä¸­è½¬æ¢åæ ç³»åç¹çè·ç¦»ã\n * ç¼©æ¾ï¼æå®ä¸º[SX 0 0 Sy 0 0]ãSXä¸ºæ°´å¹³æ¹å¼ç¼©æ¾åæ°ï¼Syä¸ºåç´æ¹åç¼©æ¾åæ°ã\n * æè½¬ï¼æå®ä¸º[cosÎ¸ sinÎ¸ âsinÎ¸ cosÎ¸ 0 0]ï¼å®å·æå°åæ ç³»è½´éæ¶éæè½¬è§åº¦Î¸çææã\n * å¾æï¼æå®ä¸º[1 tanÎ± tanÎ² 1 0 0]ï¼å®ä½¿Xè½´å¾æä¸ä¸ªè§åº¦Î±ï¼Yè½´å¾æä¸ä¸ªè§åº¦Î²ã\n\nå¦æå°å¤ä¸ªè½¬æ¢ç»åå¨ä¸èµ·ï¼åå®ä»¬çåºç¨é¡ºåºéå¸¸éè¦ãä¾å¦ï¼åç¼©æ¾åå¹³ç§»Xè½´ï¼ä¸åå¹³ç§»ç¶åç¼©æ¾Xè½´ä¸åãä¸è¬æ¥è¯´ï¼ä¸ºäºè·å¾é¢æçç»æï¼åºæä»¥ä¸é¡ºåºè¿è¡è½¬æ¢ï¼1.å¹³ç§»ï¼2.æè½¬ï¼3.ç¼©æ¾æå¾æ\n\nè¯·æ³¨æï¼scale-rotate-translateé¡ºåºä¼å¯¼è´åæ ç³»åå½¢ï¼ä½¿XåYè½´ä¸ååç´ï¼å»ºè®®çtranslate-rotate-scaleé¡ºåºä¸ä¼å¯¼è´åå½¢\n\n\n# Reference\n\n * ISO 32000-1:2008 Document management â Portable document format â Part 1: PDF 1.7\n * Introduction_to_PDF from gnupdf\n * wiki - PDF',normalizedContent:'# pdf æ ¼å¼ç®æ\n\n\n# 1. introduce\n\nportable document format (pdf), ç±adobe system incorporated å¬å¸å¨1992å¹´åæçä¸ç§ç¼ç¨å½¢å¼çææ¡£æ ¼å¼ï¼å®æææ¾ç¤ºçåå®¹ï¼é½æ¯éè¿ç¸åºçæä½ç¬¦è¿è¡ç»å¶çã\n\nåºäº pdf çç»ç»ç»æåå±ç¤ºå½¢å¼ï¼å¯ä»¥ç¥é pdf æä»¥ä¸ä¼ç¹:\n\n * ä¸è´æ§ï¼\n   * å¨ä¸åçè®¾å¤ä¸æå¼ pdf ææ¡£ï¼å±ç¤ºæææ¯å®å¨ä¸è´çï¼ä¸ä¼åºç°æ®µè½éä¹±ãæå­ä¹±ç è¿äºæçé®é¢ãå°¤å¶æ¯ææ¡£ä¸­å¯ä»¥åµå¥å­ä½æä»¶ï¼é¿åäºå®¢æ·ç«¯æ²¡æå¯¹åºå­ä½ï¼èå¯¼è´æå­æ¾ç¤ºä¸ä¸è´çé®é¢ãæä»¥ï¼å¨å°å·è¡ä¸ï¼ç»å¤§å¤æ°ç¨çé½æ¯pdfæ ¼å¼ã\n * ä¸æä¿®æ¹ï¼\n   * pdf æ ¼å¼å¤æï¼å¯¹å·²ç»ä¿å­çpdfæä»¶ï¼æ³è¦è¿è¡éæ°æçæ¯è¾å¤æï¼è¿å°±ä¿è¯äº pdf æä»¶ä¸å®¹æè¢«ç¯¡æ¹ã\n * å®å¨æ§ï¼\n   * pdfææ¡£å¯ä»¥è¿è¡å å¯ï¼åæ¬ä»¥ä¸å ç§å å¯å½¢å¼ï¼ææ¡£æå¼å¯ç ï¼ææ¡£æé(å¦ï¼å¤å¶æä½ç­)å¯ç ï¼ææ¡£è¯ä¹¦å¯ç ï¼å å¯çæ¹æ³åæ¬ï¼rc4ï¼aesï¼éè¿å å¯è¿ç§å½¢å¼ï¼å¯ä»¥è¾¾å°èµæé²æ©æ£ç­ç®çã\n * ä¸å¤±çï¼\n   * pdfæä»¶ä¸­ä½¿ç¨äºç¢éå¾ï¼æ è®ºæ¾å¤§å¤å°åï¼é½ä¸ä¼å¯¼è´ä½¿ç¨ç¢éå¾ç»å¶çæå­ãå¾æ¡å¤±çã\n * æ¯æå¤ç§åç¼©æ¹å¼ï¼\n   * ä¸ºäºåå°pdfæä»¶çsizeï¼pdfæ ¼å¼æ¯æåç§åç¼©æ¹å¼ï¼asciihexï¼ascii85ï¼lzwï¼runlengthï¼ccittï¼jbig2ï¼jpeg(dct)ï¼jpeg2000(jpx)\n * æ¯æå¤ç§å°å·æ åï¼\n   * æ¯æ pdf-aï¼pdf-x ç­\n\nä¸ºäºäºè§£ pdf è¿äºç¹æ§çå®ç°åçï¼æä»¬éè¦å¯¹å¶ç»ææä¸å®äºè§£ãä¸è¬æ¥è¯´ï¼pdf ç»æåä¸ºç©çç»æ(file structure)åé»è¾ç»æ(document structure)ãç©çç»æç¨äºæ ¹æ® pdf æä»¶æ ¼å¼ççº¦å®ä»æä»¶ä¸­è¯»ååä¸ªå¯¹è±¡ï¼é»è¾ç»æç¨äºæ ¹æ®è¯»åçæä»¶ç»æãå¯¹è±¡æå»ºå¯¹è±¡æ ï¼ä»¥æç§å¯¹è±¡çç©ºé´ç»ææ¾ç¤ºåº pdf æä»¶ã\n\n\n# 2. file structure\n\næ åçpdfææ¡£ä¸è¬åæ¬åä¸ªé¨åï¼\n\nç»æ                ä½ç¨                                                    å¤æ³¨\nheader            å­å¨pdfçæ¬                                               ä¸è¬æ¯å¨é¦è¡ %pdf-xxx\nbody              å­å¨é´æ¥å¯¹è±¡                                                è¿æ¯ææpdfæ¯éæå¤§çåå®¹\ncross-reference   ä¿å­åä¸ªé´æ¥å¯¹è±¡å¨æä»¶ä¸­çèµ·å§å°å                                     \ntrailer           å­å¨äº¤åç´¢å¼è¡¨çèµ·å§ä½ç½®, æ ¹å¯¹è±¡ï¼rootï¼ï¼å å¯å¯¹è±¡ï¼encryptï¼ï¼ææ¡£ä¿¡æ¯å¯¹è±¡ï¼infoï¼ç­   åå« startxref å %%eof\n\nè§£æ pdf æä»¶ä¸è¬ä»¥ä¸æ­¥éª¤è¿è¡ï¼\n\n 1. æ£æ¥ header ç¡®è®¤æ¯å¦ pdf æ ¼å¼ ä»¥å çæ¬\n 2. ä»æä»¶å°¾é¨è¯»å %%eofï¼åæ¥æ¾ startxref ä½ç½®ï¼å¹¶è¯»å cross-reference çåç§»\n 3. è¯»å trailer æ®µ(å¨ startxref åï¼ä¸è¬æ¥è¯´äºèä¸´è¿ )ï¼ä»ä¸­è¯»åææ¡£çåä¿¡æ¯\n 4. ä» cross-reference ä¸­è§£æ indirect-object ç objidãgenidãoffset ç­ä¿¡æ¯\n 5. ä» indirect-object ä¸­è§£æ pdf åå®¹ãå¸å±ç¸å³çè¯¦ç»ä¿¡æ¯\n\nå½ç¶ï¼ä»¥ä¸æ­¥éª¤åªæ¯ç®åçæè¿°æµç¨ï¼å¶ä¸­è¿æå¾å¤ç»èéè¦å¤çï¼æ¯å¦ï¼linearized pdfãincremental updatesãobject streams(æ è®°ä¸º /type /objstm) ç­ç­...\n\nä¸ä¸ª pdf æä»¶ï¼å¯ä»¥å¨ç»æä¸å½¢æä¸æ£µå¯¹è±¡æ ï¼è¿äºå¯¹è±¡å¯ä»¥åä¸º 8 ç§ç±»åï¼\n\n * boolean values\n   * representing true or false\n * integers and real numbers\n * strings\n   * enclosed within parentheses ((...)). strings may contain 8-bit characters.\n * names, starting with a forward slash (/)\n   * name è¢«å®ä¹ä¸ºå­èæµï¼ä½æ¯ç°å®ä¸­ç»å¸¸è¢«ç¨ä½å¯ä»¥éè¯»çtextï¼è¿æ¶è§å®ä»¥ utf-8 ç¼ç æ¹å¼è¡¨ç¤º\n * arrays\n   * ordered collections of objects enclosed within square brackets ([...])\n * dictionaries\n   * collections of objects indexed by names enclosed within double angle brackets (<<...>>)\n * streams\n   * usually containing large amounts of optionally compressed binary data, preceded by a dictionary and enclosed between the stream and endstream keywords.\n * the null object\n\nå¦å¤ï¼pdf ä¸­å¯ä»¥å­å¨æ³¨éï¼å®æ¯ä»¥ % ç¬¦å·å¼å§ãpdf ä¸­ç object å¯ä»¥åä¸º direct (embedded in another object) å indirectãindirect objects ä½¿ç¨ objid å genid è¿è¡ç¼å·ï¼å¹¶ä¸å¦æé©»çå¨ææ¡£æ ¹ä¸­ï¼åä¼å¨ obj å endobj å³é®å­ä¹é´å®ä¹ã\n\n\n# 2.1 header\n\nä¸è¬æåµä¸ï¼æä»¶å¤´ï¼å³ï¼pdfæä»¶çç¬¬ä¸è¡ï¼å®ç¨æ¥å®ä¹pdfççæ¬ï¼ä»èç¡®å®è¯¥pdféµå¾ªçåªä¸ªçæ¬çpdfè§èãpdfçæ¬æ¯åä¸å¼å®¹çï¼å³é«çæ¬çè§èï¼å¼å®¹ä½çæ¬çè§èã\n\næ­£å¸¸æåµä¸ï¼%pdf æ è®°ä¼åºç°å¨æä»¶é¦è¡ãé¦é¨ãä½æ¯ç°å®ä¸­ï¼ä¸ºäºå¼å®¹å¼å¸¸åå¾æ´å¥å£®ï¼ä¼å¨æä»¶é¦é¨ç n ä¸ªå­èåæç´¢è¿ä¸ªæ è®°ï¼å¹¶å®æ å¤´é¨ãçæ¬å· çå¤æ­ãå¦ææä»¶å¤´é¨ï¼æ²¡ææ¾å°æ­¤æ è®°ï¼å¯ä»¥è®¤ä¸ºä¸æ¯ pdf æä»¶ã\n\nå¦æ %pdf æ è®°ä¸æ¯åºç°å¨æä»¶çé¦è¡é¦é¨ï¼é£ä¹ pdf æä»¶ä¸­ç startxrefãcross-reference table ç­ä¸­åç§»å°åæ¯ç¸å¯¹äºæä»¶ç¬¬ä¸ä¸ªå­èè¿æ¯ %pdf æ è®°é¦é¨çå¢ï¼\n\nç­æ¡æ¯ç¸å¯¹äº %pdf æ è®°é¦é¨çåç§»ãæ ¹æ® pdf ç iso ææ¡£ï¼%pdfåºå½åºç°å¨æä»¶çé¦è¡é¦é¨ï¼å¨ä¿è¯ææ¡£å®æ´æ§çåæ¶ï¼å¨æä»¶é¦é¨æå°¾é¨å¢å åå®¹ï¼å¹¶ä¸ä¼æ¹å pdf æä»¶åé¨çåå®¹(åå«ç¸å¯¹åç§»)ãæä»¥ï¼è§£æ pdf æä»¶æ¶ï¼é¦ä¸ª %pdf å æåä¸ä¸ª %%eof æ è®°çä½ç½®å¾éè¦ã\n\nä¸è¬çï¼%pdf æ è®°åè·éç 1.x å°±æ¯ pdf æä»¶ççæ¬å·ã\n\nä» pdf 1.4 å¼å§ï¼æ¯æå°çæ¬å·æ¾ç½®äº trailer ä¸­ root å¯¹è±¡ç category å­å¸ç version å±æ§ä¸­ãè¿éççæ¬å·æ¯å¯éçï¼å¦æå­å¨æ¶(éå¸¸æ¯å¨pdfå¢éæ´æ°æ¶ç¨å°)ï¼åºå½ä»¥æ­¤çæ¬å·ä¸ºåã\n\n\n# 2.2 trailer\n\ntrailer é¨ååå«äº trailer æ®µãstartxref æ®µã%%eof æ è®° ä¸é¨åãç»æå¦ä¸:\n\ntrailer\n    << /size 642\n       /root 1 0 r /info 2 0 r\n       /encrypt << ... >>\n       /id [ <7919a5d3c67dca9aa6777b99d4a0214d>\n          <b8e48d9b43300bb87f6ff6c528d13fc2> ]\n       /prev 2027\n    >>\nstartxref\nbyte_offset_of_the_last_cross-reference_section\n%%eof\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\ntrailer æ®µç¨äºå­å¨äº¤åç´¢å¼è¡¨çèµ·å§ä½ç½®ï¼æ ¹å¯¹è±¡ï¼rootï¼ï¼å å¯å¯¹è±¡ï¼encryptï¼ï¼ææ¡£ä¿¡æ¯å¯¹è±¡ï¼infoï¼ç­ãä¾å¦ï¼info ä¸­åå«ä»¥ä¸å±æ§ä¿¡æ¯ï¼\n\nobject name    description\ntitle          ææ¡£æ é¢\nauthor         åå»ºæä»¶çä½è\nsubject        ææ¡£ä¸»é¢\nkeywords       ææ¡£å³é®å­\ncreator        å¦æpdfæ¯ç±å¶ä»æ ¼å¼è½¬æ¢èæ¥çï¼creatoræ¯åå»ºåå§ææ¡£çåºç¨ç¨åºå\nproducer       å¦æpdfæ¯ç±å¶ä»æ ¼å¼è½¬æ¢èæ¥çï¼produceræ¯åå»ºpdfæä»¶çåºç¨ç¨åºå\ncreationdate   ææ¡£åå»ºçæ¶é´\nmoddate        ææ¡£ä¸ä¸æ¬¡ä¿®æ¹çæ¶é´\n\nstartxref æå¨è¡åºè¯¥å¨ trailer ç»æä¹åï¼å¹¶ä¸ startxrefãbyte_offset_of_the_last_cross-reference_sectionã%%eof æé¡ºåºæ¯ä¸ªåå ä¸è¡ã\n\nç±äº pdf ç increment update æ¨¡å¼çå­å¨ï¼æä»¶ä¸­ç trailer ç»æå¯è½å¹¶ä¸å¯ä¸ã\n\næ³¨æï¼å¨æäºæåµä¸ä¼ç¼ºå¤± %%eof æ è®°ï¼å¹¶ä¸å¤§å¤ pdf éè¯»å¨è½å¤å®½å®¹çå¤çè¿ç§æåµã\n\n\n# 2.3 cross-reference table\n\näº¤åç´¢å¼è¡¨æ¯pdfæä»¶çéè¦é¨åï¼ä¸»è¦ç¨éæ¯ä¿å­åä¸ªé´æ¥å¯¹è±¡å¨æä»¶ä¸­çèµ·å§å°åã\n\né£ä¹äº¤åå¼ç¨è¡¨çä½ç½®å¨ä»ä¹å°æ¹å¢ï¼å¶å®å¾ç®åï¼trailer æ®µç startxref æç¤ºäºäº¤åç´¢å¼è¡¨çå·ä½åç§»ä½ç½®ãæ ¹æ®è¿ä¸ªåç§»ï¼å¯ä»¥å¾å®¹æè¯»åå° xref æ è®°ä»¥åå¶åçåå®¹ã\n\nxref æ®µçç»æå¦ä¸ï¼\n\nxref \n0 3\n0000000004 65535 f \n0022826162 00000 n \n0022826184 00000 n \n6 2\n0022826260 00000 n \n0000000006 00007 f\n0022829428 00000 n \n0000000088 00001 f \n0000000000 00001 f  \n...\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\né¦åï¼ä»¥åå«å³é®å­ xref çä¸è¡ä¸ºèµ·ç¹ãç´§æ¥çè¿ä¸è¡ï¼å°±æ¯ä¸ä¸ªæèå¤ä¸ª cross-reference subsections(äº¤åç´¢å¼è¡¨å­æ®µï¼æ²¡æé¡ºåº)ãæ¯ä¸ªäº¤åç´¢å¼è¡¨å­æ®µåå«ä¸è¡æå¤è¡åå®¹ï¼æ¯è¡åå«ä¸ä¸ª indirect object çå¥å£ä¿¡æ¯ï¼åç§»å°å(10-digit)ãä¿®è®¢å·ãn/fæ è®°(in use/free)ã\n\näº¤åç´¢å¼è¡¨çç¬¬ä¸ä¸ªæ¡ç®ï¼åºè¯¥é½æ¯ object number 0ãfreeãgeneration number = 65535ï¼è¿æ è¯ç free å¯¹è±¡é¾è¡¨çå¤´ãé¾è¡¨çå°¾é¨éæ°æå object number 0 çå¯¹è±¡ãéè¦æ³¨æçæ¯ï¼ä¸ä¸ª free ç entry çåç§»å°åè¡¨ç¤ºä¸ä¸ä¸ª free å¯¹è±¡å¨äº¤åç´¢å¼è¡¨ä¸­çç´¢å¼ï¼å®å¯ä»¥ä¸å¨äº¤åç´¢å¼è¡¨ä¸­çç´¢å¼ä¸­ï¼è¿è¡¨ç¤ºä¸ä¸ä¸ªå¯¹è±¡ä¸å­ï¼å®ä¹å¯ä»¥æ¯ 0ï¼è¿è¡¨ç¤ºè¿ä¸ªå¯¹è±¡å·²ç»è¢«å é¤ã\n\næ­¤å¤ï¼äº¤åç´¢å¼è¡¨å¨æä»¶ä¸­å¯ä»¥å­å¨åä¸ªï¼ä¹å¯ä»¥å­å¨å¤ä¸ªãå¤ä¸ªäº¤åå¼ç¨è¡¨éå¸¸åºç°å¨ä¸¤ä¸ªæåµï¼ä¸ãå¢éä¿å­ï¼äºãçº¿æ§åã\n\nå½å­å¨å¤ä¸ªäº¤åç´¢å¼è¡¨æ¶ï¼éè¦æ³¨æä»¥ä¸é®é¢ï¼\n\n 1. äº¤åç´¢å¼è¡¨çæ¥æ¾\n\n * éå¸¸å¨äº¤åå¼ç¨è¡¨ä¹åç trailer å­å¸ä¸­ä¼ä¿å­ /prev å¯¹è±¡ï¼è¯¥ key å¯¹åºçå¼å°±æ¯ä¸ä¸ä¸ªäº¤åå¼ç¨è¡¨çä½ç½®ã\n\n 2. åä¸ä¸ªé´æ¥å¯¹è±¡å­å¨ä¸åçå¼ç¨è¡¨ä¸­\n\n * ä¸ä¸ªæä»¶ä¸­åºç°å¤ä¸ªäº¤åå¼ç¨è¡¨æ¶ï¼å¯è½åºç°åä¸ä¸ªé´æ¥å¯¹è±¡å­å¨ä¸åçå¼ç¨è¡¨ä¸­ï¼è¿æ¶ï¼è¦ä»¥åºç°å¨æä»¶æåä½ç½®çé£ä¸ªä¸ºåï¼åé¢çå¿½ç¥ï¼è¿ç§æåµï¼éå¸¸æ¯ç±äºä¿®æ¹äºpdfæä»¶ï¼å¯¼è´å¶ä¸­çä¸ä¸ªæå¤ä¸ªå¯¹è±¡åçäºååï¼pdfçæå¨æ ¹æ®è¾åºè¦æ±ï¼è¿è¡å¢å è¾åºï¼åªè¾åºä¿®æ¹çå¯¹è±¡ï¼ç¶åå¨æä»¶æ«å°¾å ä¸æ´æ°çäº¤åå¼ç¨è¡¨ã\n\nå¨ pdf 1.5 çæ¬ä¹åï¼äº¤åå¼ç¨è¡¨æ»æ¯éç¨ ascii æ ¼å¼ï¼ç¨ xref å³é®å­æ è®°ï¼å¹¶è·éç±é´æ¥å¯¹è±¡ç»æçä¸»ä½ã 1.5 çå¼å¥äº cross-reference streams ï¼å®ä»¬å·ææ åæµå¯¹è±¡çå½¢å¼ï¼å¯è½åºç¨äºè¿æ»¤å¨ã è¿æ ·çæµå¯ä»¥ç¨æ¥ä»£æ¿ ascii æ ¼å¼çäº¤åå¼ç¨è¡¨ï¼å¹¶åå«äºè¿å¶æ ¼å¼çåç§»éåå¶ä»ä¿¡æ¯ã è¯¥æ ¼å¼å¾çµæ´»ï¼å ä¸ºå®åè®¸æå®æ´æ°å®½åº¦ï¼ä½¿ç¨ /w æ°ç»ï¼ï¼å æ­¤ä¾å¦ï¼å¤§å°ä¸è¶è¿ 64 kib çææ¡£å¯è½ä»å° 2 ä¸ªå­èç¨äºå¯¹è±¡åç§»ã\n\nå½ä½¿ç¨ cross-reference streams æ¹å¼æ¥è¡¨è¾¾äº¤åå¼ç¨è¡¨æ¶ï¼å³é®å­ xref å trailer åºè¯¥ä¸ä¼ååºç°ãæ­¤æ¶ startxref æç¤ºçåç§»å°åä¸å°±æ¯ cross-reference streams æµå¯¹è±¡ãç»æå¦ä¸ï¼éè¿å¯¹è±¡ /type /xref æ è®°ï¼ï¼\n\nå³äº cross-reference streams çè§£ææµç¨å¯ä»¥åèå®æ¹ææ¡£ã\n\n\n# 2.4 body\n\nç± indirect objects ç»æçæä»¶åå®¹ä¸»ä½ãåä¸ªå¯¹è±¡çæ ¼å¼å¦ä¸ï¼\n\nobjid genid obj\n...\nendobj\n\n\n1\n2\n3\n\n\n# 2.4.1 encryption\n\npdf ä¸­çå å¯ï¼ä¸»è¦æ¯éå¯¹åå®¹çå¤çï¼è¿ä¹å°±è¯´æäºä¸ºä»ä¹ pdf çå å¯ä¸»è¦åºç¨å¨ strings å streams å¯¹è±¡ãæ»æä¾å¤ï¼å¦ï¼\n\n * the values for the id entry in the trailer\n * any strings in an encrypt dictionary\n * any strings that are inside streams such as content streams and compressed object streams, which themselves are encrypted\n\nå¦æstreamå¯¹è±¡å¼ç¨äºä¸ä¸ªå¤é¨æä»¶ï¼é£ä¹å®çåå®¹å°±ä¸åºè¢«å å¯ï¼å ä¸ºå®ä¸æ¯å½å pdf æä»¶çä¸é¨åãç¶èï¼å¦æåå®¹æ¯ååµå¨ pdf æä»¶åæ¶("embedded file streams")ï¼æ¯åºè¯¥åå¶ä»æµå¯¹è±¡ä¸æ ·è¢«å å¯çã ä» pdf 1.5 å¼å§ï¼åµå¥çæä»¶å¯ä»¥å¨æªå å¯çææ¡£ä¸­å å¯(å¯ä»¥åè "crypt filters")\n\né£ä¹æä¹å¤æ­ææ¡£æ¯å¦å å¯ä»¥åå å¯æ¹å¼ãå¦æè§£å¯å¢ï¼\n\npdf ææ¡£çå å¯ä¿¡æ¯å­å¨å¨ trailer æ®µç trailer å­å¸ç encrypt æ¡ç®ãå¦ææ²¡ææ¾å°è¿ä¸ªæ¡ç®ï¼é£ä¹å¯ä»¥è®¤ä¸ºå½åææ¡£æ²¡æè¢«å å¯ãè¿ä¸ªæ¡ç®æä»¥ä¸åå®¹ï¼\n\n * filter\n   * æå®ææ¡£çé¦ésecurity handlerçåç§°ï¼å®åºè¯¥æ¯ç¨äºå å¯ææ¡£çå®å¨å¤çç¨åºçåç§°ãè¿ä¸ªå®å¨å¤çç¨åº(handler)æ¯ä¸ä¸ªè½¯ä»¶æ¨¡åï¼å®å®ç°äºå å¯è¿ç¨çåä¸ªæ¹é¢å¹¶æ§å¶å¯¹å å¯ææ¡£åå®¹çè®¿é®ã\n   * pdf æå®äºä¸ä¸ªæ åçåºäºå¯ç çå®å¨å¤çç¨åºï¼ææç¬¦åè¦æ±çéè¯»å¨é½åºæ¯æï¼ä½ç¬¦åè¦æ±çéè¯»å¨å¯ä»¥éæ©æä¾ä»ä»¬èªå·±çéå å®å¨å¤çç¨åºã\n   * å¦æsubfilterä¸å­å¨ï¼åå¨æå¼ææ¡£æ¶ä»åºä½¿ç¨æ­¤å®å¨å¤çç¨åºãå¦æå­å¨ï¼åç¬¦åæ åçè¯»åå¨å¯ä»¥ä½¿ç¨ä»»ä½å®ç°subfilteræå®æ ¼å¼çå®å¨å¤çç¨åºã\n * subfilter\n   * æå®encryption dictionaryçè¯­æ³ãå®åè®¸å¤çç¨åºä¹é´çäºæä½æ§ï¼ä¹å°±æ¯è¯´ï¼ææ¡£å¯ä»¥ç±é¦éå¤çç¨åº(filter)ä»¥å¤çå¤çç¨åºè§£å¯, å¦æå®ä»¬é½æ¯æsubfilteræå®çæ ¼å¼çè¯ã\n * v\n   * optionalï¼æå®å å¯ç®æ³ãå¯ä»¥ä¸å­å¨ï¼ä¸å­å¨æ¶å½åé»è®¤å¼ 0ï¼å¦æå­å¨ï¼åå¼åºå½å¤§äº 0ã\n   * å¯¹äº v å¼ 2 å 3ï¼é¿åº¦æ¡ç®æå®å å¯å¯é¥çç¡®åé¿åº¦ãå¨ pdf 1.5 ä¸­ï¼v çå¼ 4 åè®¸å®å¨å¤çç¨åºä½¿ç¨èªå·±çå å¯åè§£å¯ç®æ³ï¼å¹¶æå®è¦å¨ç¹å®streamä¸ä½¿ç¨ç crypt filtersã\n * length å å¯ç§é¥çé¿åº¦(bits)\n\nè¯¦ç»è§£å¯æµç¨ï¼å¯ä»¥åèå®æ¹ææ¡£...\n\nç®åæ¥è¯´ï¼pdfå å¯æ¹å¼ç®åå·²ç»å¢å ä¸ºä¸ç§ï¼å£ä»¤å å¯ãè¯ä¹¦å å¯ãadobe livecycle rights managementï¼ä¸é¢è¿è¡ç®åçä»ç»ï¼\n\n 1. å£ä»¤å å¯ï¼\n\nä½ä¸ºç¬¬ä¸ä»£pdfå®å¨å å¯æ¹å¼ï¼å°ç°å¨ä¹ä¸ç´å¹¿æ³åºç¨ãå£ä»¤å å¯åä¸ºï¼ææ¡£æå¼å¯ç ï¼open passwordï¼ãæéå¯ç ï¼permission passwordï¼ã\n\n * ææ¡£æå¼å¯ç ï¼è¦æ±ç¨æ·å¨æå¼æä»¶æ¶ï¼éè¦è¾å¥å¯ç \n * æéå¯ç ï¼æå¼pdfæä»¶å¹¶è¿è¡éè¯»ï¼å¹¶ä¸éè¦æéå¯ç ï¼åªææ´æ¹æéè®¾ç½®æè¿è¡åéå¶æä½æ¶ï¼æå°ï¼ç¼è¾åå¤å¶pdfä¸­çåå®¹ï¼ï¼æéè¦è¾å¥æéå¯ç ã\n\nå¦æä½¿ç¨ä¸¤ç§ç±»åçå¯ç ä¿æ¤pdfï¼åå¯ä»¥ä½¿ç¨ä»»ä¸å¯ç æå¼å®ãä½æ¯ï¼åªææéå¯ç æåè®¸ç¨æ·æ´æ¹åéå¶çåè½ã\n\n 2. è¯ä¹¦å å¯ï¼\n\nä½¿ç¨è¯ä¹¦ä¿æ¤pdfæ¶ï¼å¯ä»¥æå®æ¶ä»¶äººå¹¶ä¸ºæ¯ä¸ªæ¶ä»¶äººæç¨æ·ç»å®ä¹æä»¶è®¿é®çº§å«ãç±»ä¼¼ä¸å£ä»¤å å¯çæéå¯ç ï¼å¯ä»¥è¿è¡æééå¶ï¼ä¾å¦ï¼åè®¸ä¸ä¸ªç»ç­¾åå¹¶å¡«åè¡¨åï¼å¦ä¸ä¸ªç»å¯ä»¥ç¼è¾ææ¬æå é¤é¡µé¢ã\n\nç¨æ·å¯ä»¥ä»å¯ä¿¡ä»»èº«ä»½åè¡¨ï¼ç£çä¸çæä»¶ï¼ldapæå¡å¨æwindowsè¯ä¹¦å­å¨åºï¼ä»éwindowsï¼ä¸­éæ©è¯ä¹¦ãå§ç»å°æ¨çè¯ä¹¦åå«å¨æ¶ä»¶äººåè¡¨ä¸­ï¼ä»¥ä¾¿ä»¥åå¯ä»¥æå¼è¯¥ææ¡£ã\n\n 3. adobe livecycle rights management\n\ntodo\n\n# 2.4.2 object streams\n\nä» pdf 1.5 å¼å§ï¼indirect objects (except other streams) å¯è½ä¼å­å¨äº object streams(æ è®°ä¸º /type /objstm) ä¸­ãè¿é¡¹ææ¯ä½¿ non-stream å¯¹è±¡è½å¤åºç¨æ åæµè¿æ»¤å¨ï¼åå°å·æå¤§éå°åé´æ¥å¯¹è±¡çæä»¶çå¤§å°ï¼å¹¶ä¸å¯¹äºæ è®° pdf å°¤å¶æç¨ã å¯¹è±¡æµä¸æ¯ææå®å¯¹è±¡çä»£å·ï¼0 é¤å¤ï¼ã\n\n# 2.4.3 linearized pdf çº¿æ§å\n\npdf æä»¶æä¸¤ç§å¸å±ï¼non-linearized (not "optimized") å linearized ("optimized")ã éçº¿æ§ pdf æä»¶å¯è½æ¯çº¿æ§ pdf æä»¶å°ï¼ä½è®¿é®éåº¦è¾æ¢ï¼å ä¸ºç»è£ææ¡£é¡µé¢æéçé¨åæ°æ®åæ£å¨æ´ä¸ª pdf æä»¶ä¸­ã çº¿æ§å pdf æä»¶ï¼ä¹ç§°ä¸º "optimized" æ "web optimized" pdf æä»¶ï¼çæé æ¹å¼ä½¿å®ä»¬è½å¤å¨ web æµè§å¨æä»¶ä¸­è¯»åï¼èæ éç­å¾æ´ä¸ªæä»¶ä¸è½½å®æï¼å ä¸ºç¬¬ä¸é¡µæéçææå¯¹è±¡ä»¥æä½³æ¹å¼ç»ç»æ¾ç¤ºå¨æä»¶çå¼å¤´ã pdf æä»¶å¯ä»¥ä½¿ç¨ adobe acrobat è½¯ä»¶æ qpdf è¿è¡ä¼åã\n\nlinearized pdf æä»¶çä¸»è¦ç®æ æ¯ï¼æå¼ææ¡£æ¶ï¼å°½å¿«æ¾ç¤ºç¬¬ä¸é¡µã è¦æ¥ççç¬¬ä¸é¡µå¯ä»¥æ¯ææ¡£çä»»æé¡µé¢ï¼ä¸ä¸å®æ¯é¡µé¢0ï¼å°½ç®¡å¨ç¬¬0é¡µæå¼æ¯æå¸¸è§çï¼ã\n\næ³¨æ, å·²ç»çº¿æ§åçpdfï¼å¯ä»¥è¿è¡å¢éæ´æ°ï¼ä½æ¯ï¼ä¿®æ¹åçææ¡£å°±ä¸åæ¯çº¿æ§åæä»¶ï¼éè¦éæ°æ´çæä»¶æè½åæ¬¡çæçº¿æ§åæä»¶ãå¦å¤ï¼åºäº linearized pdf æä»¶çä»¥ä¸ç¹æ§ï¼å¯ä»¥è®¤è¯å°åªæå¨é¡µé¢æ°éå¾å¤çæåµä¸ï¼æè½çªåºè¡¨ç°åºå®å¿«éç½ç»æµè§çä¼å¿ã\n\n# 2.4.4 extensions\n\nextensionså­å¸ä¿å­å¨```catalog``å­å¸ä¸­ï¼è¯¥å­å¸åºåå«ä¸ä¸ªæå¤ä¸ªé®ï¼ç¨äºæ è¯å¼åäººåå®ä¹çiso 32000-1æ åæ©å±ã\n\nadobeå¬å¸åé¢è¿è¡åè½æ©å±åæ¹åï¼åä¸ºäºä¸ä¹åpdf1.7æ åååºå«ï¼éå¸¸ç¨extensionsæ¥æ è¯ã\n\npdfâ1.7\n<</type /catalog\n  /extensions\n  <</glgr\n    <</baseversion /1.7\n    /extensionlevel 1002\n    >>\n  >>\n>>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\nextensionså­å¸çåå®¹ï¼ä¸ç¨æ¥æ¾ç¤ºï¼éå¸¸åå«çæ¯ç¨äºå¼åç¨çåå®¹ãæ©å±å­å¸ä¸­çææå¼åäººåæ©å±å­å¸æ¡ç®ï¼ä»¥åå®ä»¬çæ¡ç®ï¼é½åºæ¯ç´æ¥å¯¹è±¡ã\n\nä¾å¦ï¼\n\n * baseversion ï¼pdfçæ¬çåç§°ã è¯¥åç§°åºä¸catalogçversionä½¿ç¨çè¯­æ³ä¸è´\n * extensionlevel ï¼ç±å¼åäººåå®ä¹çæ´æ°ï¼è¡¨ç¤ºæ­£å¨ä½¿ç¨çæ©å±åã å¦æå¼åäººåä¸ºç»å®çbaseversionå¼å¥äºå¤ä¸ªæ©å±ï¼åè¯¥å¼åäººååéçæ©å±çº§å«ç¼å·å°éçæ¶é´çæ¨ç§»èå¢å ã\n\n\n# 2.5 increamental update\n\nincreamental update å¢éæ´æ°æä¾äºä¸ç§æ´æ°pdfæä»¶èæ éå®å¨éåçæ¹æ³ï¼æ ¹æ®pdfè§èï¼1.7ï¼ï¼å¢éæ´æ°çå·¥ä½æ¹å¼å¦ä¸ï¼å¯ä»¥éæ­¥æ´æ°pdfæä»¶çåå®¹ï¼èæ ééåæ´ä¸ªæä»¶ãæ´æ¹å°éå å°æä»¶æ«å°¾ï¼ä¿çåå§åå®¹ã\n\nå½pdféè¯»å¨åç°pdfææ¡£æ¶ï¼å®ä»æä»¶æ«å°¾å¼å§ãå®è¯»åæåä¸ä¸ªé¢åçå¹¶è·éå°æ ¹å¯¹è±¡åäº¤åå¼ç¨è¡¨çé¾æ¥ï¼ä»¥æå»ºå®å°è¦åç°çææ¡£çé»è¾ç»æãå½éè¯»å¨éå°æ´æ°çå¯¹è±¡æ¶ï¼å®ä¼å¿½ç¥ç¸åå¯¹è±¡çåå§çæ¬ã\n\nä¸ä¸ªpdfæä»¶åè®¸å¢éæ´æ°çæ¬¡æ°ä¸åéå¶ãç®åçå¤æ­pdfæ¯å¦å¢éæ´æ°çæ¹æ³æ¯ï¼ææ¡£ä¸­å­å¨å¤ä¸ª%%eofã\n\n\n# 4. fix pdf structure\n\npdfæä»¶ç ´æï¼éå¸¸æ¯ä¸äºéæ³æä½é æçãpdfæä»¶ä¸­æé¨ååå®¹ç¼ºå¤±ï¼å¦xrefï¼éè¦çobjectå¯¹è±¡ç­ã\n\n 1. xrefç ´æ\n\nè§£å³è¿ä¸ªé®é¢ï¼å¹¶ä¸å¤æï¼åªéè¦ä»æä»¶å¤´å¼å§è¯»åå¯¹è±¡ï¼è®°å½ä¸å¯¹è±¡å·åå¯¹è±¡èµ·å§åç§»ä½ç½®ï¼éæ°å»ºç«xrefï¼äº¤åå¼ç¨è¡¨ï¼ï¼å°æ æçç®ä»å¼ç¨ç½®ç©ºå¼ï¼å°±å¯ä»¥äºï¼å¦æåä¸ä¸ªé´æ¥å¯¹è±¡åºç°å¤æ¬¡ï¼åææåºç°çé£ä¸ªä¸ºåãå¦æpdfæä»¶æ¯å å¯çï¼è¦åå°å å¯å¯¹è±¡è¿è¡è§£æï¼ç¶åè®¡ç®åºå¯é¥ï¼ç¨äºå¶ä»å¯¹è±¡çè§£å¯ã\n\n 2. é´æ¥å¯¹è±¡ç ´æ\n\né´æ¥å¯¹è±¡éå¸¸æ¯å¯¹è±¡æ²¡ææ­£å¸¸çç»æç¬¦å·ï¼readerå¨è¿è¡è¯¥å¯¹è±¡è§£ææ¶ï¼åçéè¯¯ãè¿ç§æåµï¼å¦ææ²¡ææå®³å°xrefï¼å¯ä»¥æ ¹æ®xrefè®¡ç®åºæ¯ä¸ªé´æ¥å¯¹è±¡å¶å®åç§»ä½ç½®ï¼å¨è¯»åé´æ¥å¯¹è±¡æ¶åç°å½åä½ç½®è¶åºè¯¥å¯¹è±¡å¨pdfæä»¶ä¸­ä¿å­çåºåæ¶ï¼å°è¯¥å¯¹è±¡è®¾ç½®ä¸ºæ æå¯¹è±¡ï¼ä¸ææå¼ç¨å°è¯¥å¯¹è±¡çé´æ¥å¼ç¨å¯¹è±¡ä¿®æ¹ä¸ºnullã\n\n 3. xrefåé´æ¥å¯¹è±¡é½ç ´æ\n\nè¿ç§æåµæ¯è¾éº»ç¦ï¼æ ¸å¿æ¹æ³ï¼è¿æ¯è¦éå»ºxrefã\n\nå¨è¯»åå°å¼å¸¸å¯¹è±¡æ¶ï¼è¦åæ¶çå¤æ­å¯¹è±¡æ¯å¦å¼å¸¸ç»æ­¢ï¼æ¯å¦ï¼è¯»åå°ä¸ä¸ªç ´æçæä»¶ï¼åç°å¯¹è±¡é¿åº¦å¼å¸¸çé¿ï¼ä¸è¿ç»­åºç°å¤ä¸ªâobjâåâendobjectâï¼é£å°±å¯ä»¥å¤æ­è¯¥å¯¹è±¡éè¯¯äºï¼å¹¶å°è¯¥å¯¹è±¡è®¾ç½®ä¸ºæ æï¼ç¶åéæ°å®ä½æ°çé´æ¥å¯¹è±¡çå¼å§ä½ç½®ï¼ç»§ç»­å¾åè§£æã\n\n\n# 5 document structure\n\n\n\n\n# 5.1 catalog\n\nææ¡£å¯¹è±¡å±æ¬¡ç»æçæ ¹æ¯ catalog å­å¸ï¼éè¿pdfæä»¶ trailer ä¸­ç root æ¡ç®è¿è¡å®ä½ã ä¸ä¸ªç®åçç¤ºä¾å¦ä¸ï¼\n\n1 0 obj \n  << /type /catalog  \n     /pages 2 0 r  \n     /pagemode /useoutlines\n     /outlines 3 0 r\n  >>\nendobj\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\nè¯¥ç®å½åå«å¯¹å®ä¹ææ¡£åå®¹ï¼å¤§çº²ï¼outlineï¼ï¼æç« çº¿ç¨ï¼article threadsï¼ï¼å½åç®æ ï¼named destinationsï¼åå¶ä»å±æ§çå¶ä»å¯¹è±¡çå¼ç¨ã æ­¤å¤ï¼å®è¿åå«æå³å¦ä½å¨å±å¹ä¸æ¾ç¤ºææ¡£çä¿¡æ¯ï¼ä¾å¦æ¯å¦åºèªå¨æ¾ç¤ºå¶å¤§çº²ï¼outlineï¼åç¼©ç¥å¾é¡µé¢å¾åï¼thumbnailï¼ï¼ä»¥åæå¼ææ¡£æ¶æ¯å¦æ¾ç¤ºé¤ç¬¬ä¸é¡µä»¥å¤çæäºä½ç½®ã\n\npdf reader åºå½ä»æ­¤èç¹å¼å§ï¼æå»º page tree, å¹¶éæ­¥å±å¼é¡µé¢ç»èå¹¶è¿è¡æ¸²æã\n\n\n# 5.2 common data structures\n\npdfæ ¼å¼ä¸­ï¼ä¸äºéç¨ç¨éçæ°æ®ç»æè¢«å®ä¹ï¼å®ä»¬æ¯ç±åºæ¬å¯¹è±¡ç±»åç»åèæ¥ï¼å¨æ´ä¸ªpdfä¸­çè®¸å¤å°æ¹é½æä½¿ç¨ãè¿éç®åä»ç»ææ¬å­ç¬¦ä¸²ï¼æ¥æï¼ç©å½¢ï¼åç§°æ åæ°å­æ ç¸å³çæ°æ®ç»æãæ´å å¤æçæ°æ®ç»æå¯ä»¥åè pdf ææ¡£ã\n\n# 5.2.1 string & text\n\npdf 1.7 æ åä¸­å®ä¹ç pdf data types ä¸­å¸¸è§ç string æï¼\n\ntype                   description                                           note\nascii string           ascii å­ç¬¦ç»æçå­èæµ                                        \nbyte string            è¡¨ç¤ºå­ç¬¦æå¶ä»äºè¿å¶æ°æ®çä¸ç³»åå­è                                    å¦æè¿ç§ç±»åè¡¨ç¤ºå­ç¬¦ï¼åç¼ç åºç±ä¸ä¸æç¡®å®\nstring                 é text string çå­ç¬¦ä¸²                                    ä» pdf 1.7 å¼å§ï¼æ­¤ç±»åè¿ä¸æ­¥éå®ä¸ºä»¥ä¸ç±»åï¼pdfdocencoded stringãascii\n                                                                             stringå byte stringã\ndate                   date (ascii string)                                   ä¸¥æ ¼éµå¾ªiso / iec 8824çå®ä¹, æ¥ææ ¼å¼ä¸ºï¼(d:yyyymmddhhmmssohh\'mm )\npdfdocencoded string   ä½¿ç¨ pdfdocencoding å å¯å­ç¬¦ä¸²å½¢æçå­èæµ                         pdfæ ¼å¼åªä½¿ç¨ utf-16be ç¼ç  unicode(å¸¦å­èåºæ è®°)\ntext string            ä½¿ç¨ pdfdocencoding æ utf-16be ç¼ç å­ç¬¦ä¸²å½¢æçå­èæµï¼å¹¶å¸¦æåå¯¼å­èåºæ è®°   ä¸»è¦ç¨å¨äººå·¥å¯è¯»çå­ç¬¦ä¸²ä¿¡æ¯ï¼ä¾å¦ææ¬æ³¨éï¼ä¹¦ç­¾åç§°ï¼ææ¡£ä¿¡æ¯ç­\ntext stream            text stream                                           æ¬è´¨ä¸æ¯ä¸ä¸ªæµï¼ä¸è¿å¶æªç¼ç å­èåºæ»¡è¶³ä¸ text string å¨ç¼ç ãå­èé¡ºåºååå¯¼å­èæ¹é¢æç¸åè¦æ±\n\nå³äº date æ ¼å¼çè¯´æ:\n\n 1. åç¼då¿éå­å¨ï¼å¹´ä»½å­æ®µï¼yyyyï¼å¿éå­å¨ï¼åé¢å­æ®µå¯ä»¥ä¸å­å¨\n 2. å¶å®å­æ®µè¯´æ:\n    \n    name   description\n    yyyy   å¹´ä»½\n    mm     æä»½ï¼01-12ï¼, é»è®¤å¼ä¸º01\n    dd     å½å¤©ï¼01-31ï¼, é»è®¤å¼ä¸º01\n    hh     å°æ¶ï¼00-23ï¼, é»è®¤å¼ä¸º0\n    mm     åéï¼00-59ï¼, é»è®¤å¼ä¸º0\n    ss     ç§ï¼00-59ï¼, é»è®¤å¼ä¸º0\n    o      æ¶å·®ï¼ç±å å·ï¼+ , æ¬å°æ¶é´æäºutï¼ï¼åå·ï¼ - , æ¬å°æ¶é´æ©äºutï¼æ å¤§åzï¼æ¬å°æ¶é´ç­äºutï¼è¡¨ç¤º\n    hh     æ¶å·®ä¸­çå°æ¶æ°ï¼00-23ï¼ï¼åé¢è·çç¬¦å·ï¼âï¼, é»è®¤å¼ä¸º0\n    mm     æ¶å·®ä¸­çåéæ°ï¼00-59ï¼, é»è®¤å¼ä¸º0\n\n# 5.2.2 others\n\npdf 1.7 æ åä¸­å®ä¹çå¶å® pdf data types å¦ä¸ï¼\n\ntype                 description                                 note\narray                array object                                \nboolean              boolean value                               \ndictionary           dictionary object                           \nfile specification   file specification (string or dictionary)   ç¨äºå¼ç¨å¤é¨æä»¶åå®¹\nfunction             function (dictionary or stream)             \ninteger              integer number                              \nname                 name object                                 \nname tree            name tree (dictionary)                      æ å½¢ç»æï¼æ¯ä¸ªèç¹é½åºæ¯å­å¸å¯¹è±¡ãé®æ¯å­ç¬¦ä¸²ï¼å¹¶ä¸é®æ¯æåºçï¼å¯ä»¥ç¨äºé«ææ¥æ¾\nnull                 null object                                 \nnumber               number (integer or real)                    \nnumber tree          number tree (dictionary)                    æ å½¢ç»æï¼æ¯ä¸ªèç¹é½åºæ¯å­å¸å¯¹è±¡ãé®æ¯æ´æ°ï¼å¹¶ä¸é®ææ°å­ååºæåºï¼å¯ä»¥ç¨äºé«ææ¥æ¾\nrectangle            rectangle (array)                           ç©å½¢ç¨äºæè¿°é¡µé¢ä¸çä½ç½®ååç§å¯¹è±¡çè¾¹çæ¡ãç©å½¢æ¯ç±ä¸ä¸ªåä¸ªæ°å­çæ°ç»(ä¸å¯¹å¯¹è§çº¿çåæ )è¡¨ç¤ºãéå¸¸è¡¨ç¤ºä¸ºï¼[llx\n                                                                 lly urx ury]ï¼æé¡ºåºæå®ç©å½¢çå·¦ä¸xï¼å·¦ä¸yï¼å³ä¸yåå³ä¸yåæ ã\nstream               stream object                               \n\n\n# 5.3 pagelabel\n\npdf pagelabel é¡µé¢æ ç­¾å¯ç¨äºæè¿°é¡µé¢çé¡µç ãåè®¸éè¿ç»­é¡µé¢ç¼å·ï¼å¯ä»¥çä¸ºé¡µé¢æ·»å ä»»ææ ç­¾ï¼ä¾å¦å¨ææ¡£çå¼å¤´åå«ç½é©¬æ°å­ï¼ãpagelabelå¯¹è±¡å¯ç¨äºæå®è¦ä½¿ç¨çç¼å·æ ·å¼ï¼ä¾å¦ï¼å¤§åæå°åç½é©¬ï¼åè¿å¶ç­ï¼ï¼ç¬¬ä¸é¡µçèµ·å§ç¼å·ä»¥åè¦é¢åéå å°çä»»æåç¼æ¯ä¸ªæ°å­ï¼ä¾å¦ï¼âa-âçæâa-1âï¼âa-2âï¼âa-3âç­ãï¼\n\npdfææ¡£ä¸­çæ¯ä¸ªé¡µé¢é½ç±æ´æ°é¡µç´¢å¼æ è¯ï¼è¯¥ç´¢å¼è¡¨ç¤ºé¡µé¢å¨ææ¡£ä¸­çç¸å¯¹ä½ç½®ãå¦å¤ï¼ææ¡£å¯ä»¥æéæ©å°å®ä¹é¡µé¢æ ç­¾ä»¥å¨å±å¹ä¸æå¨æå°ä¸­å¯è§å°è¯å«æ¯ä¸ªé¡µé¢ã\n\né¡µé¢æ ç­¾åé¡µé¢ç´¢å¼ä¸éè¦éåï¼ç´¢å¼æ¯åºå®çï¼ä»ç¬¬ä¸é¡µç1å¼å§è¿ç»­éè¿ææ¡£è¿è¡ï¼ä½æ ç­¾å¯ä»¥ä»¥éåç¹å®ææ¡£çä»»ä½æ¹å¼æå®ãä¾å¦ï¼å¦æææ¡£ä»¥12é¡µç¨ç½é©¬æ°å­ç¼å·çåç«¯åå®¹å¼å¤´ï¼èææ¡£çå¶ä½é¨åç¨é¿æä¼¯è¯­ç¼å·ï¼åç¬¬ä¸é¡µçé¡µé¢ç´¢å¼ä¸º1ï¼é¡µé¢æ ç­¾ä¸ºiï¼ç¬¬12é¡µå°å·æç´¢å¼12åæ ç­¾xiiï¼ç¬¬åä¸é¡µå°å·æç´¢å¼13åæ ç­¾1ã\n\n\n# 5.4 outlines\n\noutlinesï¼ä¹¦ç­¾ãpdfææ¡£æ¯ææä»¶å¤§çº²ï¼ä¹¦ç­¾ï¼ï¼ç¨æ·å¯ä»¥éè¿ç¹å»ä¹¦ç­¾å®æè·³è½¬åè½ï¼ç±»ä¼¼ä¸office wordä¸­çå¤§çº²åè½ã\n\nå¸¸ç¨çè·³è½¬åè½æï¼è·³è½¬å°ææ¡£åé¨é¡µé¢ãè·³è½¬å°å¶ä»pdfææ¡£çæä¸é¡µãè·³è½¬å°webé¡µé¢ãè·³è½¬å°å¤é¨æä»¶ï¼épdfï¼ç­ç­ã\n\nä¹¦ç­¾æ¯ä¸ä¸ªæ ç¶ç»æï¼æ ¹æ®éåfirstãnextï¼å¾å°å®æ´çä¹¦ç­¾èç¹ãä¸é¢æ¯ä¸ä¸ªä¹¦ç­¾çä¾å­ï¼å¯ä»¥éè¿è¿ä¸ªä¾å­æ·±å¥äºè§£å¶ç»æï¼\n\n48 0 obj\n<</markinfo <</marked true>>\n/metadata 3 0 r\n/outlines 73 0 r\n/pagelayout /onecolumn\n/pagemode /useoutlines            % ä¹¦ç­¾æ ¹èç¹\n/pages 2 0 r\n/structtreeroot 5 0 r\n/type/catalog\n/viewerpreferences<</hidemenubar true/hidetoolbar true>>>>\nendobj\n\n73 0 obj\n<</count 4                     % å­èç¹æ°é\n/first 74 0 r                  % ç¬¬ä¸ä¸ªå­èç¹å¯¹åºçé´æ¥å¼ç¨å¯¹è±¡\n/last 75 0 r                   % æåä¸ä¸ªå­èç¹å¯¹åºçé´æ¥å¼ç¨å¯¹è±¡\n/type/outlines>>\nendobj\n\n74 0 obj\n<</a 77 0 r                  % è·³è½¬åè½çé´æ¥å¼ç¨å¯¹è±¡\n/count 2                     % å­èç¹æ°é\n/first 78 0 r                % ç¬¬ä¸ä¸ªå­èç¹å¯¹åºçé´æ¥å¼ç¨å¯¹è±¡\n/last 79 0 r                 % æåä¸ä¸ªå­èç¹å¯¹åºçé´æ¥å¼ç¨å¯¹è±¡\n/next 75 0 r                 % åå¼èç¹å¯¹åºçé´æ¥å¼ç¨å¯¹è±¡\n/parent 73 0 r               % ç¶èç¹å¯¹åºçé´æ¥å¼ç¨å¯¹è±¡\n/title(book1)>>              % ä¹¦ç­¾æ¾ç¤ºåå®¹\nendobj\n\n75 0 obj\n<</a 78 0 r\n/c[1.0 0.333328 0.0]         % ä¹¦ç­¾å­ä½é¢è²\n/f 2                         % ä¹¦ç­¾å­ä½æ è®°ï¼ç²ä½/æä½/ç²æä½ï¼\n/next 76 0 r\n/parent 71 0 r\n/title(mark1)>>\nendobj\n\n76 0 obj\n<<\n/d[\n49 0 r                       % è·³è½¬å°ææ¡£å¯¹åºçé¡µé¢å¯¹è±¡\n/fit                         % è·³è½¬å°å¯¹åºé¡µé¢å±ç¤ºçåå®¹\n]              \n/s/goto                      % è·³è½¬ç±»åï¼è¯¥ç±»ååè¯æµè§å¨è·³è½¬å°ææ¡£åé¡µé¢\n>>\nendobj\n\n77 0 obj\n<</d[49 0 r/fit]/s/goto>>\nendobj\n\n78 0 obj\n<</a 81 0 r/next 79 0 r/parent 74 0 r/title(mark1)>>\nendobj\n\n79 0 obj\n<</a 80 0 r/parent 74 0 r/prev 78 0 r/title(mark2)>>\nendobj\n\n80 0 obj\n<</d[49 0 r/fit]/s/goto>>\nendobj\n\n81 0 obj\n<</d[49 0 r/fit]/s/goto>>\nendobj\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n\n\n\n# 5.5 action\n\naction å­å¸çåå®¹å¤§è´å¦ä¸ï¼\n\n3 0 obj\n<< /type /action\n/s /gotoe\n/d (chapter 1)\n/t << /r /p\n/t << /r /c\n/n (another embedded document) >>\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n/type /actionè¯´æå½åå­å¸ä¸ºactionçæè¿°ï¼/sææå¨ä½ç±»åï¼/n(å¯é)æå®å½åå¨ä½å®æåéè¦æ§è¡çå¨ä½æå¨ä½åºåã\n\naction å¨ä½ï¼é¤äºç¨äºè·³è½¬å°ææ¡£ä¸­çæä¸ªé¡µé¢ä¹å¤ï¼annotationæoutlineä¹å¯ä»¥æå®è¦æ§è¡çå¨ä½ï¼ä¾å¦ï¼å¯å¨åºç¨ç¨åºï¼æ­æ¾å£°é³ï¼æ¹åæ³¨éçå¤è§ç¶æã annotationæoutlineå­å¸ä¸­ça(optional)æ¡ç®å¯ä»¥æå®ä¸ä¸ªå¨annotationæoutlineè¢«æ¿æ´»æ¶æ§è¡çå¨ä½ãå¨ pdf 1.2 ä¸­ï¼åç§å¶ä»æåµ(trigger events)ä¹å¯è½è§¦åactionãæ­¤å¤ï¼ææ¡£çcatalogä¹å¯ä»¥éè¿openaction(optional)æ¡ç®æå®å¨æå¼ææ¡£æ¶åºæ§è¡çæä½ã\n\nä¸é¢ååºpdfæ¯æçæ åçactionç±»åï¼\n\naction        description                         note\ngoto          è½¬å°å½åææ¡£ä¸­çç®æ ä½ç½®                        \ngotor         è½¬å°å¦ä¸ä¸ªææ¡£ä¸­çç®æ ä½ç½®                       go-to remote\ngotoe         è½¬å°æä¸ªåµå¥æä»¶                            go-to embedded\nlaunch        å¯å¨åºç¨ç¨åºï¼éå¸¸æ¯æå¼æä»¶                      \nthread        å¼å§éè¯»æç« çº¿ç´¢                            \nuri           è§£æå°uri(ç»ä¸èµæºæ è¯ç¬¦ï¼ä»£è¡¨internetä¸èµæºçå­ç¬¦ä¸²)   éå¸¸æ¯ä½ä¸ºè¶ææ¬é¾æ¥çç®æ çæä»¶\nsound         æ­æ¾é³é¢                                \nmovie         æ­æ¾è§é¢                                \nhide          è®¾ç½® annotation çéèæ å¿                 éè¿è®¾ç½®ææ¸é¤ä¸ä¸ªæå¤ä¸ªæ³¨éçéèæ å¿ï¼æ¥éèææ¾ç¤ºè¿äºæ³¨é\nnamed         æ§è¡ç¬¦åpdfæ åçéè¯»å¨é¢å®ä¹çæä½                 \nsubmitform    å°æ°æ®åéå°æå¡å¨ï¼ç±»ä¼¼äºç½é¡µçformï¼               æ­¤æä½ä¼å°æéäº¤äºå¼è¡¨åå­æ®µçåç§°åå¼ä¼ éå°æå®çurl\nresetform     å°å­æ®µè®¾ç½®ä¸ºå¶é»è®¤å¼                          \nimportdata    ä»æä»¶å¯¼å¥å­æ®µå¼                            æ­¤æä½åºå°è¡¨åæ°æ®æ ¼å¼ï¼fdfï¼æ°æ®ä»æå®æä»¶å¯¼å¥å°ææ¡£çäº¤äºå¼è¡¨åä¸­\njavascript    æ§è¡ js èæ¬                            \nsetocgstate   è®¾ç½®å¯éåå®¹ç»çç¶æ                          \nrendition     æ§å¶å¤åªä½åå®¹çæ­æ¾                          \ntrans         ä½¿ç¨transitionå­å¸æ´æ°ææ¡£çæ¾ç¤º               pdf 1.5 ä¸­ transition å¯ç¨äºæ§å¶ä¸ç³»å action æé´çç»å¾\ngoto3dview    è®¾ç½®3dæ³¨éçå½åè§å¾                         pdf 1.6 ä¸­æ è¯3dæ³¨éå¹¶æå®è¦ä½¿ç¨çæ³¨éçè§å¾\n\n\n# 5.6 destinations\n\ndestinationsæ¬è´¨ä¸æ¯ä¸ä¸ªå½åçé¡µé¢è§å¾ãå®å°ä¸ä¸ªç¬ä¸æ äºçåç§°ä¸åä¸ª pdf ææ¡£ä¸­çç¹å®é¡µé¢ä½ç½®ç¸å³èãä¹¦ç­¾åé¾æ¥å¯ä»¥å¨ go to a page view, go to a page view in another documentågo to a page in attachment actions ä¸­ä½¿ç¨å½åç®æ èä¸æ¯ç´æ¥é¡µé¢å¼ç¨ã\n\né£ä¸ºä»ä¹è¦ä½¿ç¨å®å¢ï¼\n\ndestinationsåè®¸è®¾ç½®è·¨ pdf ææ¡£éåçå¯¼èªè·¯å¾ãé¾æ¥å¤ä¸ª pdf ææ¡£æ¶å»ºè®®ä½¿ç¨å½åç®æ ï¼å ä¸ºä¸é¾æ¥å°é¡µé¢ä¸åï¼é¾æ¥å°destinationsä¸ååä¸ªææ¡£ä¸­é¡µé¢æ·»å æå é¤çå½±åãä¾å¦ï¼å¦æ a.pdf ä¸­çé¾æ¥æå b.pdf ä¸­çå½åç®çå°âchapter1âï¼é£ä¹å¦æ b.pdf ä¸­çæäºé¡µé¢å·²è¢«å é¤ãç§»å¨ææå¥æ°é¡µé¢ï¼åæ­¤é¾æ¥å°ç»§ç»­æ­£å¸¸å·¥ä½ãå¦æ a.pdf ç´æ¥å¼ç¨ b.pdf ä¸­çç¹å®é¡µé¢ï¼åæåµå¹¶éå¦æ­¤ãå¯¹ b.pdf ä¸­é¡µé¢çä»»ä½æ´æ¹é½ä¼ç ´åç´æ¥é¡µé¢é¾æ¥ã\n\n\n# 5.7 article thread\n\næäºç±»åçææ¡£å¯è½ä¼åå«é»è¾è¿æ¥ï¼èè¿ä¸ªé»è¾é¡ºåºå¹¶ä¸æ¯ç©çé¡ºåºãæ¯å¦ï¼æ°é»æ¥éå¯ä»¥ä»æ°é»éè®¯çç¬¬ä¸é¡µå¼å§ï¼ç¶åè½¬å°ä¸ä¸ªæå¤ä¸ªéè¿ç»­çåé¡µã\n\nä¸ºäºè¡¨ç¤ºç©çä¸ä¸è¿ç»­ä½é»è¾ç¸å³çé¡¹ç®çåºåï¼pdfææ¡£å®ä¹äºä¸ä¸ªæå¤ä¸ªarticleï¼pdf 1.1ï¼ã articleçé¡ºåºç±article threadå®ä¹; ç»ææç« çåä¸ªåå®¹é¡¹å¨çº¿ç¨ä¸ç§°ä¸ºç å­ï¼beadï¼ã ç¨æ·å¯ä»¥éè¿ç¹å»ä»ä¸ä¸ªç å­å°ä¸ä¸ä¸ªç å­è¿è¡è·³è½¬ã\n\nææ¡£catalogä¸­å¯ä»¥å®ä¹çå¯éthreadsæ¡ç®ï¼è¯¥æ¡ç®ä¸­å®ä¹äºä¸ä¸ªthreadè¯å¸ç»æçæ°ç»ï¼ç¨æ¥è¡¨ç¤ºææ¡£articlesãthreadåçæ¯ä¸ªåç¬çbeadåºç±beadå­å¸è¡¨ç¤ºãthreadå­å¸çâfâæ¡ç®åºæå®threadsä¸­çç¬¬ä¸ä¸ªbead; beadéè¿ânâï¼ä¸ä¸ä¸ªï¼åâvâï¼åä¸ä¸ªï¼æ¡ç®ï¼ææä¸ä¸ªå¨ä¸ä¸ªååé¾è¡¨ï¼å°ææbeadé¡ºåºé¾æ¥å¨ä¸èµ·ã æ­¤å¤ï¼å¯¹äºåºç° article beads çæ¯ä¸ªé¡µé¢ï¼é¡µé¢å¯¹è±¡ï¼pageï¼åºåå«ä¸ä¸ªbæ¡ç®ï¼å¶å¼æ¯é¡µé¢ä¸çbeadé´æ¥å¼ç¨çæ°ç»ï¼é¡ºåºæ¯æç§ç»å¾é¡ºåºè¿è¡æåã\n\n\n# 5.8 interactive forms\n\ninteractive forms äº¤äºå¼è¡¨åï¼ææ¶ä¹ç§°ä¸º acroformï¼æ¯éè¿äº¤äºæ¹å¼ï¼ä»ç¨æ·ç«¯æ¶éä¿¡æ¯å­æ®µçéåã\n\npdfææ¡£ä¸­ï¼ä»»ä½é¡µé¢é½å¯ä»¥å­å¨ä»»ææ°éçå­æ®µï¼èææè¿äºå­æ®µå¯ä»¥ææè·¨è¶æ´ä¸ªææ¡£çåä¸ªå¨å±äº¤äºå¼è¡¨åãè¿äºå­æ®µçä»»æå­éå¯ä»¥ä»ææ¡£å¯¼å¥æå¯¼åºã\n\nææ¡£äº¤äºè¡¨åä¸­çæ¯ä¸ªå­æ®µé½åºç± field å­æ®µå­å¸å®ä¹ãææ¡£äº¤äºè¡¨åçåå®¹åå±æ§åºç±äº¤äºå¼è¡¨åå­å¸å®ä¹ï¼è¯¥å­å¸åºä»ææ¡£ç®å½ä¸­çacroformæ¡ç®å¼ç¨ã\n\nåºäºå®ä¹åå½åçç®çï¼å¯ä»¥æå±æ¬¡ç»æï¼æ å½¢ç»æï¼æ¥ç»ç»å­æ®µï¼å¹¶ä¸å¯ä»¥ä»å­æ®µå±æ¬¡ç»æä¸­çç¥åé£éç»§æ¿ç¥åçå±æ§ã å±æ¬¡ç»æä¸­çå­æ®µå­èç¹ï¼è¿å¯ä»¥åæ¬ç¨äºå®ä¹å¶å¨é¡µé¢ä¸ç widget çªå£å°é¨ä»¶æ³¨éï¼å½åªå®ä¹äºä¸ä¸ªwidgetæ¶ï¼fieldå­å¸åwidgetå­å¸å¯ä»¥åå¹¶ä¸ºä¸ä¸ªå­å¸ï¼ã å·æå­å­æ®µçå­æ®µç§°ä¸ºéç»ç«¯å­æ®µï¼å³ä¸­é´èç¹ï¼ï¼æ²¡æå­å­æ®µçå­æ®µç§°ä¸ºç»ç«¯å­æ®µï¼å³å¶èç¹ï¼ã\n\nä¸è¡¨æ¾ç¤ºäºäº¤äºå¼è¡¨åå­å¸çåå®¹ï¼\n\nkey               type              description\nfields            array             æ ¹ field å­æ®µæ°ç»ï¼å­æ®µå±æ¬¡ç»æä¸­æ²¡æç¥åçå­æ®µï¼\nneedappearances   boolean           optionalï¼æå®æ¯å¦ä¸ºææ¡£ä¸­çææ widget æ³¨éæé å¤è§æµåå¤è§å­å¸ã é»è®¤å¼ï¼false\nsigflags          integer           optionalï¼pdf 1.3 å¼å§ï¼ç¨äºæå®ä¸ç­¾åå­æ®µç¸å³çåç§ææ¡£çº§å«ç¹å¾ã é»è®¤å¼ï¼0\nco                array             ï¼å¦æææ¡£ä¸­çä»»ä½å­æ®µå·æåå«cæ¡ç®çéå æä½å­å¸ï¼åä¸ºå¿é; pdf\n                                    1.3ï¼å·æè®¡ç®æä½çå­æ®µå­å¸çé´æ¥å¼ç¨æ°ç»ï¼ç±äºæä¸ªå­æ®µçååï¼å¯¼è´éè¦æ ¹æ®è®¡ç®é¡ºåºéæ°è®¡ç®å¶å¼\ndr                dictionary        optionalï¼è¡¨åå­æ®µå¤è§å°ä½¿ç¨å°çé»è®¤èµæºï¼å¦å­ä½ï¼å¾æ¡æé¢è²ç©ºé´ï¼çèµæºå­å¸ã\n                                    è¯¥å­å¸è³å°åºåå«ä¸ä¸ªfontæ¡ç®ï¼ç¨äºæå®æ¾ç¤ºææ¬çé»è®¤å­ä½çèµæºåç§°åå­ä½å­å¸\nda                string            optionalï¼å¯åææ¬å­æ®µçdaå±æ§çææ¡£èå´é»è®¤å¼\nq                 integer           optionalï¼å¯åææ¬å­æ®µçqå±æ§çææ¡£èå´é»è®¤å¼\nxfa               stream or array   optionalï¼pdf 1.5 å¼å§ï¼ç¨äºåå«xfaèµæºçæµææ°ç»ï¼å¶æ ¼å¼åºç±æ°æ®åï¼xdpï¼è§èæè¿°ã\n                                    æ­¤æ¡ç®çå¼åºè¯¥æ¯è¡¨ç¤ºxmlæ°æ®åçå¨é¨åå®¹çæµï¼æèæ¯è¡¨ç¤ºåå«xmlæ°æ®åçåä¸ªæ°æ®åçææ¬å­ç¬¦ä¸²åæµå¯¹è±¡çæ°ç»\n\n\n# 5.9 forms data format\n\nforms data format è¡¨åæ°æ®æ ¼å¼ãfdfæ¯ä¸ç§æä»¶æ ¼å¼ï¼ç¨äºè¡¨ç¤ºpdfæ ¼å¼ä¸­åå«çè¡¨åæ°æ®åæ³¨éãæ­¤æ ¼å¼ç± adobe systems incorporated åæï¼å®åºäºpdfæ ¼å¼ãæ¨å¯ä»¥å¨adobeçpdfåèä¸­æ¾å°fdfæ ¼å¼çè¯¦ç»è§èã\n\nfdfæ ¼å¼å¯ç¨äºåç§å·¥ä½æµç¨ãä»¥ä¸æ¯å ä¸ªç¤ºä¾ï¼\n\n * å°è¡¨åæ°æ®åéå°æå¡å¨å¹¶ä»æå¡å¨æ¥æ¶ä¿®æ¹åçè¡¨åæ°æ®ãæ­¤å·¥ä½æµç¨çèµ·æ¥åè¿æ ·ï¼\n   \n     a. è¡¨åæ°æ®ä»¥fdfæ ¼å¼æäº¤ç»æå¡å¨ãï¼éå¸¸ï¼å½å®¢æ·ç«¯è®¡ç®æºä¸çç¨æ·åå»è¡¨åä¸çâæäº¤âæé®æ¶ï¼ä¼åçè¿ç§æåµãï¼\n     b. å¨æå¡å¨ä¸ï¼fdfæ°æ®è¢«ä¿®æ¹ã\n     c. æå¡å¨å°ä¿®æ¹åçfdfæ°æ®åéåå®¢æ·ç«¯ã\n     d. å¨å®¢æ·ç«¯è®¡ç®æºä¸ï¼è¡¨åä¸­çå­æ®µå°å¡«åä¿®æ¹åçæ°æ®ã\n   \n   \n   1\n   2\n   3\n   4\n   \n * å­æ¡£è¡¨åæ°æ®ãæ­¤å·¥ä½æµç¨çèµ·æ¥åè¿æ ·ï¼\n   \n     a. ç¨æ·ä½¿ç¨adobe acrobatæå¶ä»pdfç¼è¾/æ¥çåºç¨ç¨åºä»¥fdfæ ¼å¼å¯¼åºè¡¨åæ°æ®ãï¼è¦å¨adobe acrobat 6.x for windowsä¸­æ§è¡æ­¤æä½ï¼è¯·åå»é«çº§>è¡¨å>å¯¼åºè¡¨åæ°æ®ï¼ç¶åéæ©acrobat fdfæä»¶ï¼* .fdfï¼ä½ä¸ºâå¦å­ä¸ºç±»åâãå¦ææ¨ä½¿ç¨çæ¯å¦ä¸ä¸ªçæ¬ï¼åè¯¥è¿ç¨å¯è½ä¼ææä¸åï¼\n     b. fdfæä»¶ä¿å­å¨å¬å¸çæ¡£æ¡ä¸­ã\n     c. è¦æ¥çè¡¨åæ°æ®ï¼ç¨æ·å°ä½¿ç¨adobe acrobatæå¶ä»ä¸äºpdfæ¥ç/ç¼è¾åºç¨ç¨åºï¼æ¥æå¼fdfæä»¶; è¿å°å¯¼è´pdfæ¥ç/ç¼è¾åºç¨ç¨åºäº§çä¸ä¸ªæä½ï¼1ï¼æ¾å°éè¦å¯¼åºè¡¨åæ°æ®çpdfè¡¨åï¼2ï¼å°è¡¨åæ°æ®å è½½å°è¡¨åä¸­ï¼3ï¼å¨å±å¹ä¸æ¾ç¤ºå¸¦æå è½½æ°æ®çè¡¨åã\n   \n   \n   1\n   2\n   3\n   \n\næ¨å¯è½æ³ç¥éä¸ºä»ä¹è¦å­æ¡£åå«pdfè¡¨åæ°æ®çfdfæä»¶ï¼èä¸æ¯ç®åå°ä½¿ç¨åå«è¡¨åæ°æ®çpdfãæä¸¤ä¸ªåå ï¼\n\n 1. åå«pdfè¡¨åçè¡¨åæ°æ®çfdfæä»¶ï¼æ¯åå«è¡¨åpdfæ¬èº«çæä»¶å°å¾å¤ï¼å æ­¤å½æ¡£fdfæä»¶æ¯å½æ¡£è¡¨åpdféè¦æ´å°çå­å¨ç©ºé´ã\n 2. äººä»¬ç¨æ¥æ¥çè¡¨åpdfå¹¶ä¸ä¹äº¤äºçæäºè½¯ä»¶ä¸åè®¸ç¨æ·ä¿å­å¡«åçè¡¨åpdfãä¾å¦ï¼åè´¹çâadobe readerâè½¯ä»¶ä¸åè®¸è¿æ ·åã\n\néè¦è¯´æï¼fdfæä»¶åå«è¡¨åpdfçæä»¶ååä½ç½®ï¼fdfæä»¶æ¯ä»è¯¥è¡¨åpdfä¸­å¯¼åºçï¼ãadobe acrobatï¼ä»¥åä»»ä½æ¯æpdfè¡¨åçpdfæ¥ç/ç¼è¾åºç¨ç¨åºï¼ä¾èµäºè¯¥æä»¶ååä½ç½®ï¼ä»¥ä¾¿å¨æå¼fdfæä»¶æ¶æ£ç´¢åæå¼ç¸åºçpdfè¡¨åãæ¢å¥è¯è¯´ï¼æå¼fdfæä»¶æ¶ï¼pdfæ¥ç/ç¼è¾åºç¨ç¨åºä¼æ ¹æ®æå®çä½ç½®ï¼æ¾ç¤ºpdfè¡¨åã\n\nå æ­¤ï¼å¦ææ¨æ¯èèå®æ½å½æ¡£fdfæ°æ®çç³»ç»çå¼åäººåï¼åéè¦ç¡®ä¿æ¨çç³»ç»å·æå°æéè¡¨åpdfå­å¨å¨å·²ç¥ä½ç½®çå¯é æ¹æ³ãå¦åï¼pdfæ¥ç/ç¼è¾åºç¨ç¨åºæ æ³å§ç»å¨éè¦æ¶æ£ç´¢åæå¼è¡¨åpdfã\n\næäºpdfæ¥ç/ç¼è¾åºç¨ç¨åºä¸æ¯æä¸è¡¨åpdfç¸å³çææåè½ã\n\næ»ä¹ï¼fdfå¯å¨å°è¡¨åæ°æ®æäº¤ç»æå¡å¨ï¼æ¥æ¶ååºï¼å¹¶å°ååºç»æåå¹¶å°äº¤äºå¼è¡¨åä¸­ã å®è¿å¯ç¨äºå°è¡¨åæ°æ®å¯¼åºä¸ºç¬ç«çæä»¶ï¼è¿äºæä»¶å¯ä»¥å­å¨ï¼ä»¥çµå­æ¹å¼ä¼ è¾ï¼ä¹å¯ä»¥å¯¼åå°ç¸åºçpdfäº¤äºå¼è¡¨åä¸­ã æ­¤å¤ï¼ä»pdf 1.3å¼å§ï¼fdfå¯ç¨äºå®ä¹æ³¨éçå®¹å¨ï¼ä½¿å¾è¿äºæ³¨éä¸å®ä»¬æå¨pdfææ¡£åç¦»ã\n\nå¦å¤ï¼è½ç¶ fdf åºäº pdf; å®ä½¿ç¨pdfä¸æ ·çè¯­æ³ï¼å¹¶ä¸å·æåºæ¬ç¸åçæä»¶ç»æãä½æ¯ï¼å®å¨ä»¥ä¸æ¹é¢ä¸pdfä¸åï¼\n\n * äº¤åå¼ç¨è¡¨æ¯å¯éçã\n * ä¸åºå¢éæ´æ°fdfæä»¶ã å¯¹è±¡åªè½æ¯0ä»£ï¼fdfæä»¶ä¸­æ²¡æä¸¤ä¸ªå¯¹è±¡å·æç¸åçå¯¹è±¡ç¼å·ã\n * ææ¡£ç»ææ¯pdfç®åå¾å¤ï¼å ä¸ºfdfææ¡£çä¸»ä½åªåå«ä¸ä¸ªå¿éå¯¹è±¡ã\n * æµçé¿åº¦ä¸åºç±é´æ¥å¯¹è±¡æå®ã\n * fdfä½¿ç¨mimeåå®¹ç±»åapplication/vnd.fdfã å¨windowsåunixå¹³å°ä¸ï¼fdfæä»¶çæ©å±åä¸º.fdf; å¨mac osä¸ï¼ä»ä»¬çæä»¶ç±»åæ¯fdfã\n\n\n# 5.10 xfa\n\nxfa(xml forms architecture)è¿æ¯ç±jetformå»ºè®®åå¼åçä¸ç³»åä¸æ xmlè§èï¼ç¨äºå¢å¼ºwebè¡¨åçå¤çãpdf 1.5 å¼å¥äºåºäºxfa çäº¤äºå¼è¡¨åçæ¯æãxfaè§èè¢«å¼ç¨ä½ä¸ºiso 32000-1è§èï¼pdf 1.7ï¼åºç¨å¿ä¸å¯å°çå¤é¨è§èãxml forms architectureæªæ ååä¸ºisoæ åã\n\nxfaè¡¨åä¿å­å¨pdfæä»¶åé¨ï¼å¯ä»¥ä½ä¸ºxdpï¼xmlæ°æ®åï¼æä»¶è¿è¡ä¿å­ï¼å¯ä»¥å¨adobeçlivecycle designerè½¯ä»¶ä¸­æå¼ã\n\nè½ç¶xfaå¯ä»¥ä½¿ç¨pdfï¼ä½xfaå¹¶ä¸ä¾èµäºç¹å®çé¡µé¢æè¿°è¯­è¨ã\n\nxfa æéæåå¨æè¡¨æ ¼ä¹åãå¨éæå½¢å¼ä¸­ï¼æ è®ºå­æ®µåå®¹å¦ä½ï¼ è¡¨åçå¤è§åå¸å±é½æ¯åºå®çãå¨æè¡¨åï¼èªxfa 2.1æ2.2å®ä¹ï¼å¯ä»¥éè¿å¤ç§æ¹å¼æ´æ¹å¤è§ä»¥ååºæ°æ®çæ´æ¹ãå¨æè¡¨åéè¦å¨æä»¶æå¼æ¶åç°å¶åå®¹ãå¨æè¡¨åè¿å¯ä»¥è¢«è®¾è®¡ä¸ºæ¹åç»æä»¥éåºæä¾ç»è¡¨åçæ°æ®ç»æçååãä¾å¦ï¼å¦ææ²¡ææ°æ®ï¼åå¯ä»¥çç¥è¡¨åçé¡µé¢ãå¦ä¸ä¸ªä¾å­æ¯å¯è½å ç¨é¡µé¢ä¸å¯åç©ºé´éçå­æ®µï¼è°æ´å¶èªèº«ä»¥ææå°ä¿æå¶åå®¹ãå¨æè¡¨åä¸è½ä¾èµäºå¶æ ·æ¿çpdfè¡¨ç¤ºï¼å ä¸ºæ ·æ¿çå®ä½åå¸å±éçå­æ®µçå¢é¿åæ¶ç¼©æå­è¡¨åè¢«çç¥ååå«èæ¹åã\n\n\n# 6 graphics\n\n\n\n\n# 6.1 graphics objects\n\ngraphics objectsï¼ å¾å½¢å¯¹è±¡ãåå®¹æµä¸­å­å¨ä¸¤ç§ç±»åçåç´ ï¼ä¸ãå¾å½¢å¯¹è±¡ï¼å­ä½ï¼shadingï¼å¾çï¼éå¸¸ç¨nameå¯¹è±¡è¡¨ç¤ºï¼ï¼äºãä¿®é¥°å¾å½¢å¯¹è±¡çæä½ç¬¦ï¼å®ä½ï¼ç¼©æ¾ï¼é¢è²ï¼å¤§å°ï¼åªåï¼éæç­ï¼ï¼ç±è¿ä¸¤ç±»åç´ æç»åºäºé¡µé¢çå¤è§ã\n\npdfæä¾äºç§ç±»åçå¾å½¢å¯¹è±¡ï¼\n\n * è·¯å¾å¯¹è±¡ï¼å¯ä»¥æ¯ç´çº¿ï¼ç©å½¢åè´å¡å°æ²çº¿ï¼æå®ä»¬ç»åèæçä»»æå½¢ç¶ã è·¯å¾å¯ä»¥èªèº«ç¸äº¤ã\n * ææ¬å¯¹è±¡ï¼ç±ä¸ä¸ªæå¤ä¸ªå­ç¬¦ä¸²ç»æã\n * å¤é¨å¯¹è±¡ï¼xobjectï¼ï¼æ¯å¨åå®¹æµå¤é¨å®ä¹çå¯¹è±¡ï¼å¹¶ä½ä¸ºå½åèµæºå¼ç¨ï¼âèµæºå­å¸âï¼ã\n * åèå¾åå¯¹è±¡ï¼ä½¿ç¨ç¹æ®è¯­æ³ç´æ¥å¨åå®¹æµä¸­è¡¨ç¤ºå°å¾åçæ°æ®ã\n * shadingå¯¹è±¡ï¼æè¿°å ä½å½¢ç¶ï¼å¶é¢è²æ¯å½¢ç¶åä½ç½®çä»»æå½æ°ã ï¼å¨ç»å¶å¶ä»å¾å½¢å¯¹è±¡æ¶ï¼shadingä¹å¯ä»¥è¢«è§ä¸ºé¢è²;å¨è¿ç§æåµä¸ï¼å®ä¸è¢«è§ä¸ºåç¬çå¾å½¢å¯¹è±¡ãï¼\n\npdf 1.3åæ´æ©çæ¬ä¸æ¯æéæï¼ç±äºæ¯ä¸ªå¾å½¢å¯¹è±¡æé¡ºåºç»å¶ï¼åé¢ç»å¶çåå®¹ï¼ä¼æåé¢ç»å¶çåå®¹è¦çæãpdf 1.4å¼å§æ¯æéææåæ¨¡åï¼å¯¹è±¡å¯ä»¥æ ¹æ®è®¾ç½®éæç¨åº¦ã\n\n\n# 6.2 coordinate systems\n\npdfä¸­ï¼ææç»å¶é½å¨ç»å¸ï¼ä¹å°±æ¯æä»¬çå°çé¡µé¢pageï¼ä¸è¿è¡çãåæ ç³»å³å®äºæ¾ç¤ºå¨é¡µé¢ä¸çææ¬ãå¾å½¢åå¾åçä½ç½®ãæ¹ååå¤§å°ãè¿éä»ç» pdf ä¸­ä½¿ç¨çåæ ç³»ï¼åæ¬å®ä»¬ä¹é´çå³ç³»ä»¥åå¦ä½è½¬æ¢ã\n\n# 6.2.1 coordinate spaces\n\nè·¯å¾åä½ç½®æ¯éè¿ä¸å¯¹åæ è¿è¡å®ä¹çï¼ x å y è¡¨ç¤ºäºç»´åæ ç©ºé´ä¸­çæ°´å¹³ä½ç½®ååç´ä½ç½®ãåæ ç©ºé´ç±ä»¥ä¸ä¸å½åé¡µé¢ç¸å³çå±æ§å³å®ï¼\n\n * åæ åç¹\n * xåyè½´çæ¹å\n * æ²¿xåyè½´çé¿åº¦\n\npdfå®ä¹äºå ç§åæ ç©ºé´ï¼ç¨äºè§£æå¾å½¢å¯¹è±¡çåæ ãåæ ç©ºé´ä¹é´å¯ä»¥ç¸äºåæ¢ï¼è¿äºåæ¢ç±åæ¢ç©éµå®ä¹ï¼åæ¢ç©éµå¯ä»¥æå®äºç»´åæ çä»»ä½çº¿æ§æ å°ï¼åæ¬å¹³ç§»ãç¼©æ¾ãæè½¬ãåå°åå¾æã\n\n# 1. è®¾å¤ç©ºé´\n\næ¯ä¸ç§ç¨æ¥æ¾ç¤ºpdfçè®¾å¤ï¼æ¾ç¤ºå¨ãæå°æºï¼ï¼é½å¯è½æèªå·±çç¬ç¹çä¸å¥è®¾å¤åæ ç³»ï¼ä¹è¢«ç§°ä½è®¾å¤ç©ºé´ï¼ææ¯åæ åç¹ä¸åï¼xåyè½´çæ¹åä¸åï¼ä¹å¯è½æ¯åè¾¨çä¸åï¼è¿äºä¸åå°±ä¼å¯¼è´æ¾ç¤ºåºæ¥çå¯¹è±¡ä¸ä¸æ ·ï¼å¦ï¼ åä¸ä¸ªå¾å½¢å¯¹è±¡å¨72åç´ /è±å¯¸æ¾ç¤ºå¨è®¾å¤åæ ç³»ä¸­æ¾ç¤ºææï¼åèæ¯å¨600ç¹/è±å¯¸æå°æºçè®¾å¤åæ ç³»ä¸­æå°ææï¼æ¾èä¸åã\n\n# 2. ç¨æ·ç©ºé´\n\nä¸ºäºé¿åä¸åè®¾å¤çè®¾å¤åæ ç³»å¯¹æ¾ç¤ºå¯¹è±¡çå½±åï¼pdfå®ä¹äºä¸ç§ä¸è®¾å¤æ å³çåæ ç³»ï¼è¯¥åæ ç³»å§ç»ä¸å½åé¡µé¢å·æç¸åçå³ç³»ï¼èä¸ç®¡æå°ææ¾ç¤ºå¨åªä¸ªè¾åºè®¾å¤ä¸ãè¿ç§ä¸è®¾å¤æ å³çåæ ç³»ç§°ä¸ºç¨æ·ç©ºé´ã\n\nææ¡£çæ¯ä¸ªé¡µé¢é½ä¼è¢«ç¨æ·ç©ºé´çé»è®¤ç¶æåå§åãé¡µé¢å­å¸ä¸­çcropboxæ¡ç®æå®äºè¾åºä»è´¨ï¼å³æ¾ç¤ºçªå£ææå°é¡µé¢ï¼çå¯è§ç©å½¢åºåãéå¸¸æåµä¸ï¼æ­£ x è½´æ°´å¹³åå³å»¶ä¼¸ï¼æ­£ y è½´åç´åä¸å»¶ä¼¸ï¼å¯è½å é¡µé¢å­å¸ä¸­çrotateæ¡ç®èæ¹åï¼ãæ²¿ x å y è½´çé¿åº¦åä½ç±é¡µé¢å­å¸ä¸­çuserunitæ¡ç®ï¼pdf 1.6ï¼è®¾ç½®ãå¦æè¯¥æ¡ç®ä¸å­å¨æä¸è¢«æ¯æï¼åä½¿ç¨1/72è±å¯¸çé»è®¤å¼ãè¿ä¸ªåæ ç³»ç§°ä¸ºé»è®¤ç¨æ·åæ ç³»ã\n\nnote1ï¼å¨postscriptä¸­ï¼é»è®¤ç¨æ·ç©ºé´çåç¹å§ç»å¯¹åºäºè¾åºä»è´¨çå·¦ä¸è§ãpdfææ¡£ä¸­é»è®¤ä¹æ¯è¿æ ·çï¼ä½å¹¶ä¸ä¸å®å¦æ­¤ï¼é¡µé¢å­å¸çcropboxæ¡ç®ï¼å¯ä»¥æå®å¨è¾åºä»è´¨ä¸ï¼å¯è§çé»è®¤ç¨æ·ç©ºé´ä¸­çä»»ä½ä½ç½®åå¤§å°çç©å½¢åºåã\n\nnote2ï¼é»è®¤ç¨æ·ç©ºé´ä¸­åä½å¤§å°çé»è®¤å¼ï¼1/72è±å¯¸ï¼ä¸å°å·è¡ä¸ä¸­å¹¿æ³ä½¿ç¨çåºç¡åä½ç¹å¤§è´ç¸åãç¶èï¼å®å¹¶ä¸å®å¨ç¸åãä¸ä¸ªç¹æ²¡æéç¨çå®ä¹ã\n\nä»çè®ºä¸è®²ï¼ç¨æ·ç©ºé´æ¯ä¸ä¸ªæ éå¤§çå¹³é¢ãè¿ä¸ªå¹³é¢ä¸­åªæä¸å°é¨åå¯¹åºäºè¾åºè®¾å¤çå¯æååºåï¼ç±é¡µé¢å­å¸ä¸­çcropboxæ¡ç®å®ä¹çç©å½¢åºå(æ¯ä¸é¡µçå¯æååºåå¤§å°å¯ä»¥ä¸å)ãç¨æ·ç©ºé´ä¸­çåæ å¯ä»¥æ¯ä»»æå®æ°ææ­£æ´æ°ï¼ç¨æ·ç©ºé´åæ çåè¾¨çä¸è®¾å¤ç©ºé´çåç´ åè¾¨çæ å³ã\n\nä»ç¨æ·ç©ºé´å°è®¾å¤ç©ºé´çè½¬æ¢ï¼ç±è½¬æ¢ç©éµcurrent transformation matrix (ctm)å®ä¹ï¼è¯¥ç©éµæ¯pdf graphics stateçä¸ä¸ªåç´ ãç¬¦åè¦æ±çéè¯»å¨å¯ä»¥éå¯¹ç¹å®è¾åºè®¾å¤çåå§åè¾¨çè°æ´ ctmï¼ä»èä¿æ pdf é¡µé¢æè¿°çè®¾å¤æ å³æ§ã\n\nnote3ï¼æ è®ºä½¿ç¨ä½ç§è¾åºè®¾å¤ï¼é»è®¤ç¨æ·ç©ºé´é½ä¸º pdf é¡µé¢æè¿°æä¾äºä¸è´ãå¯é çèµ·å§ä½ç½®ãå¦æå¿è¦ï¼pdf åå®¹æµå¯ä»¥éè¿åºç¨åæ åæ¢è¿ç®ç¬¦ cm æ¥ä¿®æ¹ç¨æ·ç©ºé´ä»¥ä½¿å¶æ´éåå¶éè¦ãå æ­¤ï¼åå®¹æµä¸­å¯è½åºç°çç»å¯¹åæ ç¸å¯¹äºå½åé¡µé¢å¹¶ä¸æ¯ç»å¯¹çï¼å ä¸ºå®ä»¬æ¯å¨ä¸ä¸ªå¯ä»¥æ»å¨åæ¶ç¼©ææ©å±çåæ ç³»ä¸­è¡¨è¾¾çãåæ ç³»è½¬æ¢ä¸ä»å¢å¼ºäºè®¾å¤ç¬ç«æ§ï¼èä¸æ¬èº«å°±æ¯ä¸ä¸ªæç¨çå·¥å·ã\n\nä¸å¾æ¾ç¤ºäºè¿å¦ä½åè®¸ç¨æ·ç©ºé´ä¸­æå®çå¯¹è±¡æ¾ç¤ºç¸åçå¯¹è±¡ï¼èä¸ç®¡å®æ¯å¨åªä¸ªè®¾å¤ä¸åç°çã\n\n# 3. å¶ä»åæ ç©ºé´\n\né¤äºè®¾å¤ç©ºé´åç¨æ·ç©ºé´å¤ï¼pdfè¿ä½¿ç¨äºåç§å¶ä»åæ ç©ºé´ç¨äºç¹æ®ç®çï¼\n\n * text space\n   * ææ¬å®ä½æä½ç¬¦ï¼æ¥ç¨æå®ææ¬çä½ç½®ã\n * glyph space\n   * ä»å­å½¢ç©ºé´å°ææ¬ç©ºé´çè½¬æ¢ç±å­ä½ç©éµå®ä¹ã\n * form space\n   * ä»formç©ºé´å°ç¨æ·ç©ºé´çè½¬æ¢ç±åå«å¨form xobjectä¸­çç©éµæ¥æå®ã\n * image space\n   * ææå¾åé½å¨å¾åç©ºé´ä¸­å®ä¹ãè¦è¿è¡ç»å¶æ¶ï¼éè¿ctmå°å¾åæ å°å°é¡µé¢çæä¸ªåºåã\n * pattern space\n   * ä»pattern ç©ºé´å°ç¨æ·ç©ºé´çè½¬æ¢ç±pattern ä¸­åå«çpattern ç©éµæå®ã\n\n# 4. åæ ç©ºé´ä¹é´çå³ç³»\n\nä¸å¾æ¾ç¤ºäºä¸è¿°åæ ç©ºé´ä¹é´çå³ç³»ãå¾ä¸­çæ¯ä¸ªç®­å¤´è¡¨ç¤ºä»ä¸ä¸ªåæ ç©ºé´å°å¦ä¸ä¸ªåæ ç©ºé´çè½¬æ¢ãpdf åè®¸å¯¹è¿äºè½¬æ¢ä¸­çè®¸å¤è¿è¡ä¿®æ¹ã\n\nç±äº pdf åæ ç©ºé´æ¯ç¸å¯¹äºå½¼æ­¤å®ä¹çï¼å¯¹ä¸ç§åæ¢æåçæ´æ¹ä¼å½±åå¨å¤ä¸ªåæ ç©ºé´ä¸­å®ä¹çå¯¹è±¡çå¤è§ãä¾å¦ï¼ctmä¸­çä¸ä¸ªååå®ä¹äºä»ç¨æ·ç©ºé´å°è®¾å¤ç©ºé´çè½¬æ¢ï¼å®ä¼å½±åè¡¨åãææ¬ãå¾ååæ¨¡å¼ï¼å ä¸ºå®ä»¬é½æ¥èªç¨æ·ç©ºé´çä¸æ¸¸ã\n\n# 6.2.2 common transformations\n\nè½¬æ¢ç©éµæè¿°äºä¸¤ä¸ªåæ ç©ºé´ä¹é´çå³ç³»ãéè¿ä¿®æ¹åæ¢ç©éµï¼å¯ä»¥ç¼©æ¾ãæè½¬ãå¹³ç§»å¯¹è±¡ã\n\npdfä¸­çè½¬æ¢ç©éµç±å­ä¸ªæ°å­æå®ï¼éå¸¸ä»¥æ°ç»çå½¢å¼åºç°ãéå¸¸ï¼è¿ä¸ªæ°ç»è¡¨ç¤ºä¸º[a b c d e f]ï¼å®å¯ä»¥è¡¨ç¤ºä»ä¸ä¸ªåæ ç³»å°å¦ä¸ä¸ªåæ ç³»çä»»ä½çº¿æ§åæ¢ãä¸é¢ååºçè½¬æ¢çç±»åï¼\n\n * å¹³ç§»ï¼æå®ä¸º[1 0 0 1 tx ty]ï¼å¶ä¸­txåtyåå«æ¯å¨æ°´å¹³ååç´å°ºå¯¸ä¸­è½¬æ¢åæ ç³»åç¹çè·ç¦»ã\n * ç¼©æ¾ï¼æå®ä¸º[sx 0 0 sy 0 0]ãsxä¸ºæ°´å¹³æ¹å¼ç¼©æ¾åæ°ï¼syä¸ºåç´æ¹åç¼©æ¾åæ°ã\n * æè½¬ï¼æå®ä¸º[cosÎ¸ sinÎ¸ âsinÎ¸ cosÎ¸ 0 0]ï¼å®å·æå°åæ ç³»è½´éæ¶éæè½¬è§åº¦Î¸çææã\n * å¾æï¼æå®ä¸º[1 tanÎ± tanÎ² 1 0 0]ï¼å®ä½¿xè½´å¾æä¸ä¸ªè§åº¦Î±ï¼yè½´å¾æä¸ä¸ªè§åº¦Î²ã\n\nå¦æå°å¤ä¸ªè½¬æ¢ç»åå¨ä¸èµ·ï¼åå®ä»¬çåºç¨é¡ºåºéå¸¸éè¦ãä¾å¦ï¼åç¼©æ¾åå¹³ç§»xè½´ï¼ä¸åå¹³ç§»ç¶åç¼©æ¾xè½´ä¸åãä¸è¬æ¥è¯´ï¼ä¸ºäºè·å¾é¢æçç»æï¼åºæä»¥ä¸é¡ºåºè¿è¡è½¬æ¢ï¼1.å¹³ç§»ï¼2.æè½¬ï¼3.ç¼©æ¾æå¾æ\n\nè¯·æ³¨æï¼scale-rotate-translateé¡ºåºä¼å¯¼è´åæ ç³»åå½¢ï¼ä½¿xåyè½´ä¸ååç´ï¼å»ºè®®çtranslate-rotate-scaleé¡ºåºä¸ä¼å¯¼è´åå½¢\n\n\n# reference\n\n * iso 32000-1:2008 document management â portable document format â part 1: pdf 1.7\n * introduction_to_pdf from gnupdf\n * wiki - pdf',charsets:{cjk:!0}},{title:"InkScape",frontmatter:{title:"InkScape",date:"2022-03-22T22:07:00.000Z",lastmod:null,publish:!0,categories:"ui",keywords:"ui",description:null,tags:null,permalink:null},regularPath:"/blog/skills/ui/inkscape_tutorial.html",relativePath:"blog/skills/ui/inkscape_tutorial.md",key:"v-03728847",path:"/blog/skills/ui/inkscape_tutorial.html",headers:[{level:2,title:"Base",slug:"base",normalizedTitle:"base",charIndex:24},{level:2,title:"Text:",slug:"text",normalizedTitle:"text:",charIndex:129},{level:2,title:"Path & Object",slug:"path-object",normalizedTitle:"path &amp; object",charIndex:null}],headersStr:"Base Text: Path & Object",content:'# InkScape Tutorial\n\n\n# Base\n\n * square : åå»å¯¹è±¡ï¼ä¼åç°å®ç¹ä½ç½®æç½è²çæ¹å½¢ååå½¢çç¹ï¼å¯ä»¥è¿è¡è°è\n * stroke\n   * shift æé®ï¼è°èé¢è²ï¼å³é® stroke widthï¼å¯ä»¥è°èå®½åº¦\n\n\n# Text:\n\n * åè¡çå­ç¬¦é´è·ï¼\n   * shift + alt(option)\n * éä¸­å­ç¬¦çä½ç½®ï¼\n   * alt(option) + "ä¸ä¸å·¦å³æ¹åé®"\n * æå­çæåæ²çº¿ï¼\n   * ä½¿ç¨ shift åæ¶éä¸­å¾ååTextï¼åä½¿ç¨: "Text -> Put on Path"ï¼å¯ä»¥å°æå­æ²¿å¾å½¢è¾¹ç¼æå\n * Extenstions -> Text, æä¸äºå¸¸ç¨åè½\n\n\n# Path & Object\n\n * Path æå·¥ç»å¶\n   * bezier\n     * ç¼è¾ node æ¨¡å¼ï¼éä¸­ä¸ä¸ª node åæ¶æä½ shiftï¼å¯ä»¥å¶ä½æ²çº¿; åå» path ä¸çä»»æä¸ç¹ï¼å³å¯æ°å¢ä¸ä¸ª node; éä¸­ä¸ä¸ª node åå¯ä»¥éè¿ delete é®å é¤å®\n   * freehand\n     * "Path -> Simplify" å¯ä»¥åå°è·¯å¾ä¸ç node (ä¹å°±æ¯æ´smoothly)\n * Object é¢å®ä¹çå¯¹è±¡\n   * éä¸­å¯¹è±¡, å¦ squareãcircleãtext ç­\n   * "Path -> Object to Path" å¯ä»¥å° object è½¬æ¢ä¸º path\n\n\n# Reference\n\n * https://www.bilibili.com/video/BV1Qf4y117Hg?p=8&spm_id_from=pageDriver\n\n * https://pixabay.com/zh/images/search/persion/',normalizedContent:'# inkscape tutorial\n\n\n# base\n\n * square : åå»å¯¹è±¡ï¼ä¼åç°å®ç¹ä½ç½®æç½è²çæ¹å½¢ååå½¢çç¹ï¼å¯ä»¥è¿è¡è°è\n * stroke\n   * shift æé®ï¼è°èé¢è²ï¼å³é® stroke widthï¼å¯ä»¥è°èå®½åº¦\n\n\n# text:\n\n * åè¡çå­ç¬¦é´è·ï¼\n   * shift + alt(option)\n * éä¸­å­ç¬¦çä½ç½®ï¼\n   * alt(option) + "ä¸ä¸å·¦å³æ¹åé®"\n * æå­çæåæ²çº¿ï¼\n   * ä½¿ç¨ shift åæ¶éä¸­å¾ååtextï¼åä½¿ç¨: "text -> put on path"ï¼å¯ä»¥å°æå­æ²¿å¾å½¢è¾¹ç¼æå\n * extenstions -> text, æä¸äºå¸¸ç¨åè½\n\n\n# path & object\n\n * path æå·¥ç»å¶\n   * bezier\n     * ç¼è¾ node æ¨¡å¼ï¼éä¸­ä¸ä¸ª node åæ¶æä½ shiftï¼å¯ä»¥å¶ä½æ²çº¿; åå» path ä¸çä»»æä¸ç¹ï¼å³å¯æ°å¢ä¸ä¸ª node; éä¸­ä¸ä¸ª node åå¯ä»¥éè¿ delete é®å é¤å®\n   * freehand\n     * "path -> simplify" å¯ä»¥åå°è·¯å¾ä¸ç node (ä¹å°±æ¯æ´smoothly)\n * object é¢å®ä¹çå¯¹è±¡\n   * éä¸­å¯¹è±¡, å¦ squareãcircleãtext ç­\n   * "path -> object to path" å¯ä»¥å° object è½¬æ¢ä¸º path\n\n\n# reference\n\n * https://www.bilibili.com/video/bv1qf4y117hg?p=8&spm_id_from=pagedriver\n\n * https://pixabay.com/zh/images/search/persion/',charsets:{cjk:!0}},{title:"UI æé¡¹",frontmatter:{title:"UI æé¡¹",date:"2022-02-22T22:07:00.000Z",lastmod:null,publish:!0,categories:"ui",keywords:"ui",description:null,tags:null,permalink:null},regularPath:"/blog/skills/ui/utils.html",relativePath:"blog/skills/ui/utils.md",key:"v-cf80e5c2",path:"/blog/skills/ui/utils.html",headers:[{level:2,title:"Collection",slug:"collection",normalizedTitle:"collection",charIndex:12},{level:2,title:"Android",slug:"android",normalizedTitle:"android",charIndex:27},{level:3,title:"å±å¹",slug:"å±å¹",normalizedTitle:"å±å¹",charIndex:39},{level:3,title:"é¢è²",slug:"é¢è²",normalizedTitle:"é¢è²",charIndex:245},{level:3,title:"Material Design",slug:"material-design",normalizedTitle:"material design",charIndex:351},{level:3,title:"ç©ºé´",slug:"ç©ºé´",normalizedTitle:"ç©ºé´",charIndex:501},{level:3,title:"å¨ç»",slug:"å¨ç»",normalizedTitle:"å¨ç»",charIndex:837},{level:3,title:"é¢è²",slug:"é¢è²-2",normalizedTitle:"é¢è²",charIndex:245},{level:3,title:"æå­",slug:"æå­",normalizedTitle:"æå­",charIndex:1460},{level:3,title:"å¸å±",slug:"å¸å±",normalizedTitle:"å¸å±",charIndex:1763},{level:3,title:"ç»ä»¶ï¼Componentsï¼",slug:"ç»ä»¶-components",normalizedTitle:"ç»ä»¶ï¼componentsï¼",charIndex:2243},{level:2,title:"Reference",slug:"reference",normalizedTitle:"reference",charIndex:5937}],headersStr:"Collection Android å±å¹ é¢è² Material Design ç©ºé´ å¨ç» é¢è² æå­ å¸å± ç»ä»¶ï¼Componentsï¼ Reference",content:'# UI æé¡¹\n\n\n# Collection\n\n\n# Android\n\n\n# å±å¹\n\næ è¯       å°ºå¯¸            DPI   å¯å¨å¾æ (DPI)   èåå¾æ (DPI)\nmdpi     360 * 540     160   48 * 48     24 * 24\nxhdpi    720 * 1280    320   96 * 96     48 * 48\nxxhdpi   1080 * 1920   480   144 * 144   72 * 72\n\n\n# é¢è²\n\nå¨ Android ä¸­ 0x00 è¡¨ç¤ºå®å¨éæï¼0xFF è¡¨ç¤ºå®å¨ä¸éæï¼æ¯è¾éä¸­çéæåº¦æ¯ 0x1E le="background: #303F9F"> aaaaaaaaaaaaaaaaaaa\n\n\n# Material Design\n\nMaterial Designï¼è´¨æè®¾è®¡ï¼ç± Google æ¨åºçè®¾è®¡è¯­è¨ï¼æ¨å¨ä¸ºææºãå¹³æ¿ãçµèç­å¹³å°æä¾ä¸è´ãæ´å¹¿æ³çãå¤è§åæè§ãã\n\nMaterial Design çæ ¸å¿ææ³ï¼å°±æ¯æç©çä¸ççä½éªå¸¦è¿å±å¹ãå»æç°å®ä¸­çæè´¨åéæºæ§ï¼ä¿çå¶æåå§çº¯åçå½¢æãç©ºé´å³ç³»ãååä¸è¿æ¸¡ï¼éåèæä¸çççµæ´»ç¹æ§ï¼è¿åæè´´è¿çå®çä½éªï¼è¾¾å°ç®æ´ä¸ç´è§çææã\n\nMaterial Design æ¯æéè§è·¨å¹³å°ä½éªçä¸å¥è®¾è®¡è¯­è¨ãç±äºè§èä¸¥æ ¼ç»è´ï¼ä¿è¯å®å¨åä¸ªå¹³å°ä½¿ç¨ä½éªé«åº¦ä¸è´ã\n\n\n\n\n# ç©ºé´\n\nMaterial Designå¼å¥äºzè½´çæ¦å¿µï¼zè½´åç´äºå±å¹ï¼ç¨æ¥è¡¨ç°åç´ çå±å å³ç³»ãzå¼ï¼æµ·æé«åº¦ï¼è¶é«ï¼åç´ ç¦»çé¢åºå±ï¼æ°´å¹³é¢ï¼è¶è¿ï¼æå½±è¶éãè¿éæä¸ä¸ªåæï¼ææçåç´ çååº¦é½æ¯1dpã\n\nææåç´ é½æé»è®¤çæµ·æé«åº¦ï¼å¯¹å®è¿è¡æä½ä¼æ¬åå®çæµ·æé«åº¦ï¼æä½ç»æåï¼å®åºè¯¥è½åé»è®¤æµ·æé«åº¦ãåä¸ç§åç´ ï¼åæ ·çæä½ï¼æ¬åçé«åº¦æ¯ä¸è´çã\n\næ³¨æï¼è¿ä¸æ­¢æ¯è®¾è®¡ä¸­çæ¦å¿µï¼å¼åäººåç¡®å®å¯ä»¥éè¿ä¸ä¸ªå¼æ¥æ§å¶åç´ çæµ·æé«åº¦åæå½±ã\n\n\n\n\n# å¨ç»\n\nMaterial Design éè§å¨ç»ææï¼å®åå¤å¼ºè°ä¸ç¹ï¼å¨ç»ä¸åªæ¯è£é¥°ï¼å®æå«ä¹ï¼è½è¡¨è¾¾åç´ ãçé¢ä¹é´çå³ç³»ï¼å·å¤åè½ä¸çä½ç¨ã\n\n# easing\n\n\n\nå¨ç»è¦è´´è¿çå®ä¸çï¼å°±è¦éè§ easingãç©çä¸çä¸­çè¿å¨åååé½æ¯æå éååéè¿ç¨çï¼å¿½ç¶å¼å§ãå¿½ç¶åæ­¢çåéå¨ç»æ¾å¾æºæ¢°èä¸çå®ãèèå¨ç»çeasingï¼è¦åèèå®å¨ç°å®ä¸çä¸­çè¿å¨è§å¾ã\n\n# æ°´æ³¢çº¹\n\n\n\n# è½¬åºææ\n\n\n\nææå¯ç¹å»çåç´ ï¼é½åºè¯¥æè¿æ ·çåé¦ææãéè¿è¿ä¸ªå¨ç»ï¼å°ç¹å»çä½ç½®ä¸ææä½çåç´ å³èèµ·æ¥ï¼ä½ç°äº Material Design å¨ç»çåè½æ§ã\n\n\n\néè¿è¿æ¸¡å¨ç»ï¼è¡¨è¾¾çé¢ä¹é´çç©ºé´ä¸å±çº§å³ç³»ï¼å¹¶ä¸è·¨çé¢ä¼ éä¿¡æ¯ãä»ç¶çé¢è¿å¥å­çé¢ï¼éè¦æ¬åå­åç´ çæµ·æé«åº¦ï¼å¹¶å±å¼è³æ´ä¸ªå±å¹ï¼åä¹äº¦ç¶ã\n\n\n\nå¤ä¸ªç¸ä¼¼åç´ ï¼å¨ç»çè®¾è®¡è¦æååæ¬¡åºï¼èµ·å°å¼å¯¼è§çº¿çä½ç¨ã\n\n\n\nç¸ä¼¼åç´ çè¿å¨ï¼è¦ç¬¦åç»ä¸çè§å¾ã\n\n# ç»èå¨ç»\n\néè¿å¾æ çåååä¸äºç»èæ¥è¾¾å°ä»¤äººææ¦çææ:\n\n\n\n\n# é¢è²\n\né¢è²ä¸å®è¿å¤ãéåä¸ç§ä¸»è²ãä¸ç§è¾å©è²ï¼éå¿éï¼ï¼å¨æ­¤åºç¡ä¸è¿è¡æåº¦ãé¥±ååº¦ååï¼ææéè²æ¹æ¡ã\n\nAppbar èæ¯ä½¿ç¨ä¸»è²ï¼ç¶ææ èæ¯ä½¿ç¨æ·±ä¸çº§çä¸»è²æ20%éæåº¦ççº¯é»ã\n\nå°é¢ç§¯éè¦é«äº®æ¾ç¤ºçå°æ¹ä½¿ç¨è¾å©è²ã\n\nå¶ä½é¢è²éè¿çº¯é»#000000ä¸çº¯ç½#ffffffçéæåº¦ååæ¥å±ç°ï¼åæ¬å¾æ ååéçº¿ï¼ï¼èä¸éæåº¦éå®äºå ä¸ªå¼ã\n\né¢è²   æ®éæå­   åæ·¡æå­   ç¦ç¨ç¶æ/æç¤ºæå­   åéçº¿\né»è²   87%    54%    26%         12%\nç½è²   100%   70%    30%         12%\n\n\n# æå­\n\nç¨é   å°å­æç¤º   æ­£æ/æé®           å°æ é¢             APPBARæå­   å¤§æ é¢    è¶å¤§å·æå­\nå­å·   12sp   14sp(æ¡é¢ç«¯13sp)   16sp(æ¡é¢ç«¯15sp)   20sp       24sp   34sp/45sp/56sp/112sp\n\né¿ç¯å¹æ­£æï¼æ¯è¡å»ºè®®60å­ç¬¦ï¼è±æï¼å·¦å³ãç­ææ¬ï¼å»ºè®®æ¯è¡30å­ç¬¦ï¼è±æï¼å·¦å³ã\n\n\n# å¸å±\n\nææå¯æä½åç´ æå°ç¹å»åºåå°ºå¯¸ï¼48dp X 48dpã\n\næ æ ¼ç³»ç»çæå°åä½æ¯8dpï¼ä¸åè·ç¦»ãå°ºå¯¸é½åºè¯¥æ¯8dpçæ´æ°åãä»¥ä¸æ¯ä¸äºå¸¸è§çå°ºå¯¸ä¸è·ç¦»ï¼\n\nç¨é             è·ç¦»\né¡¶é¨ç¶ææ é«åº¦        24dp\nAppbaræå°é«åº¦     56dp\nåºé¨å¯¼èªæ é«åº¦        48dp\næ¬æµ®æé®           56x56dp/40x40dp\nç¨æ·å¤´å           64x64dp/40x40dp\nå°å¾æ ç¹å»åºå        48x48dp\nä¾§è¾¹æ½å±å°å±å¹å³è¾¹çè·ç¦»   56dp\nå¡çé´è·           8dp\nåéçº¿ä¸ä¸çç½        8dp\nå¤§å¤åç´ ççç½è·ç¦»      16dp\nå±å¹å·¦å³å¯¹é½åºçº¿       16dp\næå­å·¦ä¾§å¯¹é½åºçº¿       72dp\n\n\n\nå¦å¤æ³¨æ56dpè¿ä¸ªæ°å­ï¼è®¸å¤å°ºå¯¸å¯åçæ§ä»¶ï¼æ¯å¦å¯¹è¯æ¡ãèåç­ï¼å®½åº¦é½å¯ä»¥æ56çæ´æ°åæ¥è®¾è®¡ã\n\nè¿æéå¸¸å¤è§èï¼ä¸è¯¦ç»åä¸¾ï¼éµå¾ª8dpæ æ ¼å¾å®¹ææ¾å°éåçå°ºå¯¸ä¸è·ç¦»ãå¹³æ¿ä¸PCä¸çç½æ´å¤ï¼è·ç¦»ä¸å°ºå¯¸è¦ç¸åºå¢å¤§ã\n\n\n# ç»ä»¶ï¼Componentsï¼\n\n# åºé¨å¯¼èªï¼Bottom navigationï¼\n\n\n\n# åºé¨å¨ä½æ¡ï¼Bottom Sheetsï¼\n\n\n\nåºé¨å¨ä½æ¡æ¯ä¸ä¸ªä»å±å¹åºé¨è¾¹ç¼åä¸æ»åºçä¸ä¸ªé¢æ¿ï¼ä½¿ç¨è¿ç§æ¹å¼åç¨æ·åç°ä¸ç»åè½ãåºé¨å¨ä½æ¡åç°äºç®åãæ¸æ°ãæ éé¢å¤è§£éçä¸ç»æä½ã\n\néå¸¸ä»¥åè¡¨å½¢å¼åºç°ï¼æ¯æä¸ä¸æ»å¨ãä¹å¯ä»¥æ¯ç½æ ¼å¼çã\n\n# å¡çï¼Cardsï¼\n\n\n\nå¡çæ¯åå«ä¸ç»ç¹å®æ°æ®éççº¸çï¼æ°æ®éå«æåç§ç¸å³ä¿¡æ¯ï¼ä¾å¦ï¼å³äºåä¸ä¸»é¢çç§çï¼ææ¬ï¼åé¾æ¥ãå¡çéå¸¸æ¯éå¾æ´è¯¦ç»å¤æä¿¡æ¯çå¥å£ãå¡çæåºå®çå®½åº¦åå¯åçé«åº¦ãæå¤§é«åº¦éå¶äºå¯éåºå¹³å°ä¸åä¸è§å¾çåå®¹ï¼ä½å¦æéè¦å®å¯ä»¥ä¸´æ¶æ©å±ï¼ä¾å¦ï¼æ¾ç¤ºè¯è®ºæ ï¼ãå¡çä¸ä¼ç¿»è½¬ä»¥å±ç¤ºå¶èåçä¿¡æ¯ã\n\nå¨ä»¥ä¸æåµèèä½¿ç¨å¡çï¼\n\n * åæ¶å±ç°å¤ç§ä¸ååå®¹\n * å¡çåå®¹ä¹é´ä¸éè¦è¿è¡æ¯è¾\n * åå«äºé¿åº¦ä¸ç¡®å®çåå®¹ï¼æ¯å¦è¯è®º\n * åå«ä¸°å¯çåå®¹ä¸æä½é¡¹ï¼æ¯å¦èµãæ»å¨æ¡ãè¯è®º\n * æ¬è¯¥æ¯åè¡¨ï¼ä½æå­è¶è¿3è¡\n * æ¬è¯¥æ¯ç½æ ¼ï¼ä½éè¦å±ç°æ´å¤æå­\n\nå¡çæå¤æä¸¤åæä½åºåãè¾å©æä½åºè³å¤åå«ä¸¤ä¸ªæä½é¡¹ï¼æ´å¤æä½éè¦ä½¿ç¨ä¸æèåãå¶ä½é¨åé½æ¯ä¸»æä½åºã\n\nåè§    æ­£æå­ä½      æ é¢          æå¹³æé®                            åå®¹çç½   å¡çé´çç½   å±å¹è¾¹çä¸å¡çé´çç½\n2dp   14/16sp   24/24+ sp   Roboto Medium, 14sp, 10sp å­é´è·   16dp   8dp     8dp\n\n# çº¸çï¼Chipsï¼\n\nçº¸çæ¯ä¸ç§å°åçç¨æ¥åç°å¤æå®ä½çåï¼æ¯å¦è¯´æ¥åçäºä»¶æèç³»äººãå®å¯ä»¥åå«ä¸å¼ å¾çï¼ä¸ä¸ªç­å­ç¬¦ä¸²(å¿è¦æ¶å¯è½è¢«æªåçå­ç¬¦ä¸²)ï¼æèæ¯å¶å®çä¸äºä¸å®ä½å¯¹è±¡æå³çç®æ´çä¿¡æ¯ã\n\nChips å¯ä»¥éå¸¸æ¹ä¾¿çéè¿ææ½æ¥æä½ãéè¿æåå¨ä½å¯ä»¥è§¦åæ¬æµ®å¡ç(æèæ¯å¨å±è§å¾)ä¸­ç Chip å¯¹åºå®ä½çè§å¾ï¼æèæ¯å¼¹åºä¸ Chip å®ä½ç¸å³çæä½èåã\n\nç­å°ç©ºé´åè¡¨ç°å¤æä¿¡æ¯çä¸ä¸ªç»ä»¶ï¼æ¯å¦æ¥æãèç³»äººéæ©å¨ã\n\n\n\n# æç¤ºæ¡ï¼Dialogsï¼\n\n\n\nDialogs ç¨äºæç¤ºç¨æ·ä½ä¸äºå³å®ï¼æèæ¯å®ææä¸ªä»»å¡æ¶éè¦çä¸äºå¶å®é¢å¤çä¿¡æ¯ã Dialog å¯ä»¥æ¯ç¨ä¸ç§ åæ¶/ç¡®å® çç®ååºç­æ¨¡å¼ï¼ä¹å¯ä»¥æ¯èªå®ä¹å¸å±çå¤ææ¨¡å¼ï¼æ¯å¦è¯´ä¸äºææ¬è®¾ç½®æèæ¯ææ¬è¾å¥ ã\n\nä¸äºå¤æçæä½ï¼å°¤å¶æ¯æ¯ä¸ªå³ç­é½éè¦ç¸å³è§£éè¯´æçæåµä¸æ¯ä¸éåä½¿ç¨ Dialog å½¢å¼çã\n\nDialog åå«äºä¸ä¸ªæ é¢(å¯é)ï¼åå®¹ ï¼äºä»¶ã\n\n * æ é¢ï¼ä¸»è¦æ¯ç¨äºç®åæè¿°ä¸éæ©ç±»åãå®æ¯å¯éçï¼è¦éè¦çæ¶åèµå¼å³å¯ã\n * åå®¹ï¼ä¸»è¦æ¯æè¿°è¦ä½åºä¸ä¸ªä»ä¹æ ·çå³å® ã\n * äºä»¶ï¼ä¸»è¦æ¯åè®¸ç¨æ·éè¿ç¡®è®¤ä¸ä¸ªå·ä½æä½æ¥ç»§ç»­ä¸ä¸æ­¥æ´»å¨ã\n\n\n\n# åéçº¿ï¼Dividersï¼\n\nDividers ä¸»è¦ç¨äºç®¡çååéåè¡¨åé¡µé¢å¸å±åçåå®¹ï¼ä»¥ä¾¿è®©åå®¹çææ´å¥½çè§è§ææåç©ºé´æãç¤ºä¾ä¸­åç°çåéçº¿æ¯ä¸ç§å¼±è§åï¼å¼±å°ä¸ä¼å»ææ°å°ç¨æ·å¯¹åå®¹çå³æ³¨ã\n\n 1. åè¡¨ä¸­æå¤´åãå¾çç­åç´ æ¶ï¼ä½¿ç¨ååµåéçº¿ï¼å·¦ç«¯ä¸æå­å¯¹é½; æ²¡æå¤´åãå¾æ ç­åç´ æ¶ï¼éè¦ç¨éæ åéçº¿:\n\n 2. å¾çæ¬èº«å°±èµ·å°åå®åºåçä½ç¨ï¼æä»¥ç¸ååè¡¨ä¸éè¦åéçº¿:\n\n\n\n 3. è°¨æä½¿ç¨åéçº¿ï¼çç½åå°æ é¢ä¹è½èµ·å°åéä½ç¨ãè½ç¨çç½çå°æ¹ï¼ä¼åä½¿ç¨çç½ãåéçº¿çå±çº§é«äºçç½ã\n\n\n\n 4. éæ åéçº¿çå±çº§é«äºååµåéçº¿\n\n\n\n# ç½æ ¼ï¼Gridsï¼\n\nç½æ ¼åè¡¨æ¯ä¸ç§æ ååè¡¨è§å¾çå¯éç»ä»¶ãç½æ ¼åè¡¨ä¸åºç¨äºå¸å±åå¶ä»å¯è§è§å¾ä¸­çç½æ ¼æçææ¾çåºå«ã\n\nä¸è¬æ¥è¯´ï¼ç½æ ¼åªè½åç´æ»å¨ãåä¸ªç¦çä¸æ¯ææ»å¨æå¿ï¼ä¹ä¸é¼å±ä½¿ç¨ææ¾æä½ãç½æ ¼ä¸­çååæ ¼é´è·æ¯2dpæ8dpã\n\n\n\nç½æ ¼ç±ååæ ¼ææï¼ååæ ¼ä¸­çç¦çç¨æ¥æ¿è½½åå®¹ãç¦çå¯ä»¥æ¨ªè·¨å¤ä¸ªååæ ¼:\n\n\n\nç¦çåå®¹åæ¬ä¸»è¦åå®¹ï¼primary contentï¼åæ¬¡è¦åå®¹(secondary content)ãä¸»è¦åå®¹æ¯æçéè¦åºå«çåå®¹ï¼å¸åçå¦å¾çãæ¬¡è¦åå®¹å¯ä»¥æ¯ä¸ä¸ªå¨ä½æé®æèææ¬ã\n\n\n\n# åè¡¨ï¼Listsï¼\n\nåè¡¨ä½ä¸ºä¸ä¸ªåä¸çè¿ç»­åç´ æ¥ä»¥åç´æåçæ¹å¼æ¾ç¤ºå¤è¡æ¡ç®ã\n\nåè¡¨ç±åä¸è¿ç»­çåææï¼è¯¥ååç­åæç¸åå®½åº¦ç§°ä¸ºè¡ï¼rowsï¼çå­é¨åãè¡æ¯ç¦çï¼tilesï¼çå®¹å¨ãç¦çä¸­å­æ¾åå®¹ï¼å¹¶ä¸å¨åè¡¨ä¸­å¯ä»¥æ¹åé«åº¦ã\n\nå¦æåè¡¨é¡¹åå®¹æå­è¶è¿3è¡ï¼è¯·æ¹ç¨å¡çãå¦æåè¡¨é¡¹çä¸»è¦åºå«å¨äºå¾çï¼è¯·æ¹ç¨ç½æ ¼ã\n\nåè¡¨åå«ä¸»æä½åºä¸å¯æä½åºãå¯æä½åºä½äºåè¡¨å³ä¾§ï¼å¶ä½é½æ¯ä¸»æä½åºãå¨åä¸ä¸ªåè¡¨ä¸­ï¼ä¸»ãå¯æä½åºçåå®¹ä¸ä½ç½®è¦ä¿æä¸è´ã\n\n\n\nä¸»æä½åºä¸å¯æä½åºçå¾æ æå¾å½¢åç´ æ¯åè¡¨æ§å¶é¡¹ï¼åè¡¨çæ§å¶é¡¹å¯ä»¥æ¯å¾éæ¡ãå¼å³ãæå¨æåºãå±å¼/æ¶èµ·ç­æä½ï¼ä¹å¯ä»¥åå«å¿«æ·é®æç¤ºãäºçº§èåç­æç¤ºä¿¡æ¯ã\n\n\n\nå¨åä¸ä¸ªåè¡¨ä¸­ï¼æ»å¨æå¿æä½ä¿æä¸è´ã\n\n# èåï¼Menusï¼\n\n\n\næ³¨æï¼èåå°ä¸ä¸çåº8dpè·ç¦»ã\n\n# è¿åº¦åå¨æï¼Progress & activityï¼\n\nçº¿å½¢è¿åº¦æ¡åªåºç°å¨çº¸ççè¾¹ç¼:\n\n\n\nç¯å½¢è¿åº¦æ¡ä¹åæ¶é´å·²ç¥åæ¶é´æªç¥ä¸¤ç§:\n\nå è½½è¯¦ç»ä¿¡æ¯æ¶ï¼ä¹å¯ä»¥ä½¿ç¨è¿åº¦æ¡:\n\n\n\n# Snackbars & toasts\n\n\n\nSnackbarsè³å¤åå«ä¸ä¸ªæä½é¡¹ï¼ä¸è½åå«å¾æ ãä¸è½åºç°ä¸ä¸ªä»¥ä¸çSnackbarsã\n\nSnackbarså¨ç§»å¨è®¾å¤ä¸ï¼åºç°å¨åºé¨ãå¨PCä¸ï¼åºè¯¥æ¬æµ®å¨å±å¹å·¦ä¸è§ã\n\nä¸ä¸å®è¦ç¨æ·ååºçæç¤ºï¼å¯ä»¥ä½¿ç¨Snackbarsãéå¸¸éè¦çæç¤ºï¼å¿é¡»ç¨æ·æ¥å³å®çï¼åºè¯¥ç¨å¯¹è¯æ¡ã\n\n\n\nSnackbarsä¸è½é®æ¡ä½æ¬æµ®æé®ï¼æ¬æµ®æé®è¦ä¸ç§»è®©åºä½ç½®ã\n\n\n\nSnackbarsççç½æ¯è¾å¤§ï¼24dpã\n\n\n\ntoastsåSnackbarsç±»ä¼¼ï¼æ ·å¼åä½ç½®å¯ä»¥èªå®ä¹ï¼å»ºè®®éµå¾ªSnackbarsçè§åè®¾è®¡ã\n\n\n\n# å¯æ é¢ï¼Subheadersï¼\n\n\n\nå°æ é¢æ¯åè¡¨æç½æ ¼ä¸­çç¹æ®ç¦çï¼æè¿°åè¡¨åå®¹çåç±»ãæåºç­ä¿¡æ¯ã\n\n\n\næ»å¨æ¶ï¼å¦æåè¡¨è¾é¿ï¼å°æ é¢ä¼åºå®å¨é¡¶é¨ï¼ç´å°ä¸ä¸ä¸ªå°æ é¢å°å®é¡¶ä¸å»ã\n\n\n\nå­å¨æµ®å¨æé®æ¶ï¼å°æ é¢è¦è®©åºä½ç½®ï¼ä¸æå­å¯¹é½ã\n\n\n\n# Tabs\n\n\n\nå¨ä¸ä¸ª app ä¸­ï¼tabs ä½¿å¨ä¸åçè§å¾ååè½é´æ¢ç´¢ååæ¢ä»¥åæµè§ä¸åç±»å«çæ°æ®éåèµ·æ¥åå¾ç®åã\n\n\n\ntabæå­è¦æ¾ç¤ºå®æ´ï¼å­å·ä¿æä¸è´ï¼ä¸è½æè¡ï¼æå­ä¸å¾æ ä¸è½æ··ç¨ã\n\n\n\n# ææ¬å­æ®µï¼Text fieldsï¼\n\nææ¬æ¡å¯ä»¥è®©ç¨æ·è¾å¥ææ¬ãå®ä»¬å¯ä»¥æ¯åè¡çï¼å¸¦æä¸å¸¦æ»å¨æ¡ï¼ä¹å¯ä»¥æ¯å¤è¡çï¼å¹¶ä¸å¸¦æä¸ä¸ªå¾æ ãç¹å»ææ¬æ¡åæ¾ç¤ºåæ ï¼å¹¶èªå¨æ¾ç¤ºé®çãé¤äºè¾å¥ï¼ææ¬æ¡å¯ä»¥è¿è¡å¶ä»ä»»å¡æä½ï¼å¦ææ¬éæ©ï¼åªåï¼å¤å¶ï¼ç²è´´ï¼ä»¥åæ°æ®çèªå¨æ¥æ¾åè½ã\n\nç®åä¸æ ¹æ¨ªçº¿å°±è½ä»£è¡¨è¾å¥æ¡ï¼å¯ä»¥å¸¦å¾æ :\n\n\n\næ¿æ´»ç¶æåéè¯¯ç¶æï¼æ¨ªçº¿çå®½åº¦åä¸º2dpï¼é¢è²æ¹å:\n\n\n\nè¾å¥æ¡ç¹å»åºåé«åº¦è³å°48dpï¼ä½æ¨ªçº¿å¹¶ä¸å¨ç¹å»åºåçåºé¨ï¼è¿æ8dpè·ç¦»ã\n\n\n\nè¾å¥æ¡æç¤ºæå­ï¼å¯ä»¥å¨è¾å¥åå®¹åï¼ç¼©å°åçå¨è¾å¥æ¡å·¦ä¸è§; æ´ä¸ªç¹å»åºåå¢é«ï¼æç¤ºæå­ä¹æ¯ç¹å»åºåçä¸é¨å:\n\néæ è¾å¥æ¡æ¯æ²¡ææ¨ªçº¿çï¼è¿ç§æåµä¸éå¸¸æåéçº¿å°è¾å¥æ¡éå¼:\n\n\n\nå³ä¸è§å¯ä»¥å å¥å­æ°ç»è®¡ãå­æ°ç»è®¡ä¸è¦é»è®¤æ¾ç¤ºï¼å­æ°æ¥è¿ä¸éæ¶åæ¾ç¤ºåºæ¥ã\n\néæ è¾å¥æ¡ä¹å¯ä»¥æå­æ°ç»è®¡ï¼åè¡çå­æ°ç»è®¡æ¾ç¤ºå¨åä¸è¡å³ä¾§:\n\n\n\néè¯¯æç¤ºæ¾ç¤ºå¨è¾å¥æ¡çå·¦ä¸æ¹ãé»è®¤æç¤ºææ¬å¯ä»¥è½¬æ¢ä¸ºéè¯¯æç¤º:\n\nå­æ°éå¶ä¸éè¯¯æç¤ºé½ä¼ä½¿ç¹å»åºåå¢é«:\n\n\n\nåæ¶æå¤ä¸ªè¾å¥æ¡éè¯¯æ¶ï¼é¡¶é¨è¦æä¸ä¸ªå¨å±çéè¯¯æç¤º:\n\n\n\nè¾å¥æ¡å°½éå¸¦æèªå¨è¡¥å¨åè½:\n\n\n\n# å·¥å·æç¤ºï¼Tooltipsï¼\n\næç¤ºåªç¨å¨å°å¾æ ä¸ï¼æå­ä¸éè¦æç¤ºãé¼ æ æ¬åãè·å¾ç¦ç¹ãææé¿æé½å¯ä»¥è§¦åæç¤ºã\n\n\n\nè§¦æ¸æç¤ºï¼å·¦ï¼åé¼ æ æç¤ºï¼å³ï¼çå°ºå¯¸æ¯ä¸åçï¼èæ¯é½å¸¦æ90%çéæåº¦:\n\n# Steppers\n\n# å¯¼èªï¼Navigationï¼\n\nTabs:\n\n\n\nBottom navigation bar 1:\n\n\n\nBottom navigation bar 2:\n\n\n\nNavigation drawer:\n\n\n\n# å¯¼èªæ½å±ï¼Navigation drawerï¼\n\nä¾§è¾¹æ½å±ä»å·¦ä¾§æ»åºï¼å æ®æ´ä¸ªå±å¹é«åº¦ï¼éµå¾ªæ®éåè¡¨çå¸å±è§åãææºç«¯çä¾§è¾¹æ½å±è·ç¦»å±å¹å³ä¾§56dpã\n\n\n\nä¾§è¾¹æ½å±æ¯ææ»å¨ãå¦æåå®¹è¿é¿ï¼è®¾ç½®åå¸®å©åé¦å¯ä»¥åºå®å¨åºé¨ï¼åè¡¨è¾ç­ä¸éè¦æ»å¨æ¶ï¼è®¾ç½®åå¸®å©åé¦è·éå¨åè¡¨åé¢ï¼æ½å±æ¶èµ·æ¶ï¼ä¼ä¿çä¹åçæ»å¨ä½ç½®:\n\n# éç¥ï¼Notificationsï¼\n\n\n\n# æéï¼Permissionsï¼\n\n\n\n# è®¾ç½®çé¢ï¼Settingsï¼\n\n\n\nè®¾ç½®åå¸®å©åé¦éå¸¸æ¾å¨ä¾§è¾¹æ½å±ä¸­ãå¦ææ²¡æä¾§è¾¹æ½å±ï¼åæ¾å¨Appbarçä¸æèååºé¨ãè®¾ç½®çé¢åªè½åå«è®¾ç½®é¡¹ï¼è¯¸å¦å³äºãåé¦ä¹ç±»ççé¢ï¼å¥å£åºè¯¥æ¾å¨å¶ä»å°æ¹ã\n\n\n# Reference\n\n 1. https://www.cnblogs.com/weekbo/p/9018121.html\n\nä½¿ç¨ style å±æ§ä¿®æ¹æå­çèæ¯è²: çº¢è² ç»¿è² èè² é¢è²å¼ é¢è²å¼',normalizedContent:'# ui æé¡¹\n\n\n# collection\n\n\n# android\n\n\n# å±å¹\n\næ è¯       å°ºå¯¸            dpi   å¯å¨å¾æ (dpi)   èåå¾æ (dpi)\nmdpi     360 * 540     160   48 * 48     24 * 24\nxhdpi    720 * 1280    320   96 * 96     48 * 48\nxxhdpi   1080 * 1920   480   144 * 144   72 * 72\n\n\n# é¢è²\n\nå¨ android ä¸­ 0x00 è¡¨ç¤ºå®å¨éæï¼0xff è¡¨ç¤ºå®å¨ä¸éæï¼æ¯è¾éä¸­çéæåº¦æ¯ 0x1e le="background: #303f9f"> aaaaaaaaaaaaaaaaaaa\n\n\n# material design\n\nmaterial designï¼è´¨æè®¾è®¡ï¼ç± google æ¨åºçè®¾è®¡è¯­è¨ï¼æ¨å¨ä¸ºææºãå¹³æ¿ãçµèç­å¹³å°æä¾ä¸è´ãæ´å¹¿æ³çãå¤è§åæè§ãã\n\nmaterial design çæ ¸å¿ææ³ï¼å°±æ¯æç©çä¸ççä½éªå¸¦è¿å±å¹ãå»æç°å®ä¸­çæè´¨åéæºæ§ï¼ä¿çå¶æåå§çº¯åçå½¢æãç©ºé´å³ç³»ãååä¸è¿æ¸¡ï¼éåèæä¸çççµæ´»ç¹æ§ï¼è¿åæè´´è¿çå®çä½éªï¼è¾¾å°ç®æ´ä¸ç´è§çææã\n\nmaterial design æ¯æéè§è·¨å¹³å°ä½éªçä¸å¥è®¾è®¡è¯­è¨ãç±äºè§èä¸¥æ ¼ç»è´ï¼ä¿è¯å®å¨åä¸ªå¹³å°ä½¿ç¨ä½éªé«åº¦ä¸è´ã\n\n\n\n\n# ç©ºé´\n\nmaterial designå¼å¥äºzè½´çæ¦å¿µï¼zè½´åç´äºå±å¹ï¼ç¨æ¥è¡¨ç°åç´ çå±å å³ç³»ãzå¼ï¼æµ·æé«åº¦ï¼è¶é«ï¼åç´ ç¦»çé¢åºå±ï¼æ°´å¹³é¢ï¼è¶è¿ï¼æå½±è¶éãè¿éæä¸ä¸ªåæï¼ææçåç´ çååº¦é½æ¯1dpã\n\nææåç´ é½æé»è®¤çæµ·æé«åº¦ï¼å¯¹å®è¿è¡æä½ä¼æ¬åå®çæµ·æé«åº¦ï¼æä½ç»æåï¼å®åºè¯¥è½åé»è®¤æµ·æé«åº¦ãåä¸ç§åç´ ï¼åæ ·çæä½ï¼æ¬åçé«åº¦æ¯ä¸è´çã\n\næ³¨æï¼è¿ä¸æ­¢æ¯è®¾è®¡ä¸­çæ¦å¿µï¼å¼åäººåç¡®å®å¯ä»¥éè¿ä¸ä¸ªå¼æ¥æ§å¶åç´ çæµ·æé«åº¦åæå½±ã\n\n\n\n\n# å¨ç»\n\nmaterial design éè§å¨ç»ææï¼å®åå¤å¼ºè°ä¸ç¹ï¼å¨ç»ä¸åªæ¯è£é¥°ï¼å®æå«ä¹ï¼è½è¡¨è¾¾åç´ ãçé¢ä¹é´çå³ç³»ï¼å·å¤åè½ä¸çä½ç¨ã\n\n# easing\n\n\n\nå¨ç»è¦è´´è¿çå®ä¸çï¼å°±è¦éè§ easingãç©çä¸çä¸­çè¿å¨åååé½æ¯æå éååéè¿ç¨çï¼å¿½ç¶å¼å§ãå¿½ç¶åæ­¢çåéå¨ç»æ¾å¾æºæ¢°èä¸çå®ãèèå¨ç»çeasingï¼è¦åèèå®å¨ç°å®ä¸çä¸­çè¿å¨è§å¾ã\n\n# æ°´æ³¢çº¹\n\n\n\n# è½¬åºææ\n\n\n\nææå¯ç¹å»çåç´ ï¼é½åºè¯¥æè¿æ ·çåé¦ææãéè¿è¿ä¸ªå¨ç»ï¼å°ç¹å»çä½ç½®ä¸ææä½çåç´ å³èèµ·æ¥ï¼ä½ç°äº material design å¨ç»çåè½æ§ã\n\n\n\néè¿è¿æ¸¡å¨ç»ï¼è¡¨è¾¾çé¢ä¹é´çç©ºé´ä¸å±çº§å³ç³»ï¼å¹¶ä¸è·¨çé¢ä¼ éä¿¡æ¯ãä»ç¶çé¢è¿å¥å­çé¢ï¼éè¦æ¬åå­åç´ çæµ·æé«åº¦ï¼å¹¶å±å¼è³æ´ä¸ªå±å¹ï¼åä¹äº¦ç¶ã\n\n\n\nå¤ä¸ªç¸ä¼¼åç´ ï¼å¨ç»çè®¾è®¡è¦æååæ¬¡åºï¼èµ·å°å¼å¯¼è§çº¿çä½ç¨ã\n\n\n\nç¸ä¼¼åç´ çè¿å¨ï¼è¦ç¬¦åç»ä¸çè§å¾ã\n\n# ç»èå¨ç»\n\néè¿å¾æ çåååä¸äºç»èæ¥è¾¾å°ä»¤äººææ¦çææ:\n\n\n\n\n# é¢è²\n\né¢è²ä¸å®è¿å¤ãéåä¸ç§ä¸»è²ãä¸ç§è¾å©è²ï¼éå¿éï¼ï¼å¨æ­¤åºç¡ä¸è¿è¡æåº¦ãé¥±ååº¦ååï¼ææéè²æ¹æ¡ã\n\nappbar èæ¯ä½¿ç¨ä¸»è²ï¼ç¶ææ èæ¯ä½¿ç¨æ·±ä¸çº§çä¸»è²æ20%éæåº¦ççº¯é»ã\n\nå°é¢ç§¯éè¦é«äº®æ¾ç¤ºçå°æ¹ä½¿ç¨è¾å©è²ã\n\nå¶ä½é¢è²éè¿çº¯é»#000000ä¸çº¯ç½#ffffffçéæåº¦ååæ¥å±ç°ï¼åæ¬å¾æ ååéçº¿ï¼ï¼èä¸éæåº¦éå®äºå ä¸ªå¼ã\n\né¢è²   æ®éæå­   åæ·¡æå­   ç¦ç¨ç¶æ/æç¤ºæå­   åéçº¿\né»è²   87%    54%    26%         12%\nç½è²   100%   70%    30%         12%\n\n\n# æå­\n\nç¨é   å°å­æç¤º   æ­£æ/æé®           å°æ é¢             appbaræå­   å¤§æ é¢    è¶å¤§å·æå­\nå­å·   12sp   14sp(æ¡é¢ç«¯13sp)   16sp(æ¡é¢ç«¯15sp)   20sp       24sp   34sp/45sp/56sp/112sp\n\né¿ç¯å¹æ­£æï¼æ¯è¡å»ºè®®60å­ç¬¦ï¼è±æï¼å·¦å³ãç­ææ¬ï¼å»ºè®®æ¯è¡30å­ç¬¦ï¼è±æï¼å·¦å³ã\n\n\n# å¸å±\n\nææå¯æä½åç´ æå°ç¹å»åºåå°ºå¯¸ï¼48dp x 48dpã\n\næ æ ¼ç³»ç»çæå°åä½æ¯8dpï¼ä¸åè·ç¦»ãå°ºå¯¸é½åºè¯¥æ¯8dpçæ´æ°åãä»¥ä¸æ¯ä¸äºå¸¸è§çå°ºå¯¸ä¸è·ç¦»ï¼\n\nç¨é             è·ç¦»\né¡¶é¨ç¶ææ é«åº¦        24dp\nappbaræå°é«åº¦     56dp\nåºé¨å¯¼èªæ é«åº¦        48dp\næ¬æµ®æé®           56x56dp/40x40dp\nç¨æ·å¤´å           64x64dp/40x40dp\nå°å¾æ ç¹å»åºå        48x48dp\nä¾§è¾¹æ½å±å°å±å¹å³è¾¹çè·ç¦»   56dp\nå¡çé´è·           8dp\nåéçº¿ä¸ä¸çç½        8dp\nå¤§å¤åç´ ççç½è·ç¦»      16dp\nå±å¹å·¦å³å¯¹é½åºçº¿       16dp\næå­å·¦ä¾§å¯¹é½åºçº¿       72dp\n\n\n\nå¦å¤æ³¨æ56dpè¿ä¸ªæ°å­ï¼è®¸å¤å°ºå¯¸å¯åçæ§ä»¶ï¼æ¯å¦å¯¹è¯æ¡ãèåç­ï¼å®½åº¦é½å¯ä»¥æ56çæ´æ°åæ¥è®¾è®¡ã\n\nè¿æéå¸¸å¤è§èï¼ä¸è¯¦ç»åä¸¾ï¼éµå¾ª8dpæ æ ¼å¾å®¹ææ¾å°éåçå°ºå¯¸ä¸è·ç¦»ãå¹³æ¿ä¸pcä¸çç½æ´å¤ï¼è·ç¦»ä¸å°ºå¯¸è¦ç¸åºå¢å¤§ã\n\n\n# ç»ä»¶ï¼componentsï¼\n\n# åºé¨å¯¼èªï¼bottom navigationï¼\n\n\n\n# åºé¨å¨ä½æ¡ï¼bottom sheetsï¼\n\n\n\nåºé¨å¨ä½æ¡æ¯ä¸ä¸ªä»å±å¹åºé¨è¾¹ç¼åä¸æ»åºçä¸ä¸ªé¢æ¿ï¼ä½¿ç¨è¿ç§æ¹å¼åç¨æ·åç°ä¸ç»åè½ãåºé¨å¨ä½æ¡åç°äºç®åãæ¸æ°ãæ éé¢å¤è§£éçä¸ç»æä½ã\n\néå¸¸ä»¥åè¡¨å½¢å¼åºç°ï¼æ¯æä¸ä¸æ»å¨ãä¹å¯ä»¥æ¯ç½æ ¼å¼çã\n\n# å¡çï¼cardsï¼\n\n\n\nå¡çæ¯åå«ä¸ç»ç¹å®æ°æ®éççº¸çï¼æ°æ®éå«æåç§ç¸å³ä¿¡æ¯ï¼ä¾å¦ï¼å³äºåä¸ä¸»é¢çç§çï¼ææ¬ï¼åé¾æ¥ãå¡çéå¸¸æ¯éå¾æ´è¯¦ç»å¤æä¿¡æ¯çå¥å£ãå¡çæåºå®çå®½åº¦åå¯åçé«åº¦ãæå¤§é«åº¦éå¶äºå¯éåºå¹³å°ä¸åä¸è§å¾çåå®¹ï¼ä½å¦æéè¦å®å¯ä»¥ä¸´æ¶æ©å±ï¼ä¾å¦ï¼æ¾ç¤ºè¯è®ºæ ï¼ãå¡çä¸ä¼ç¿»è½¬ä»¥å±ç¤ºå¶èåçä¿¡æ¯ã\n\nå¨ä»¥ä¸æåµèèä½¿ç¨å¡çï¼\n\n * åæ¶å±ç°å¤ç§ä¸ååå®¹\n * å¡çåå®¹ä¹é´ä¸éè¦è¿è¡æ¯è¾\n * åå«äºé¿åº¦ä¸ç¡®å®çåå®¹ï¼æ¯å¦è¯è®º\n * åå«ä¸°å¯çåå®¹ä¸æä½é¡¹ï¼æ¯å¦èµãæ»å¨æ¡ãè¯è®º\n * æ¬è¯¥æ¯åè¡¨ï¼ä½æå­è¶è¿3è¡\n * æ¬è¯¥æ¯ç½æ ¼ï¼ä½éè¦å±ç°æ´å¤æå­\n\nå¡çæå¤æä¸¤åæä½åºåãè¾å©æä½åºè³å¤åå«ä¸¤ä¸ªæä½é¡¹ï¼æ´å¤æä½éè¦ä½¿ç¨ä¸æèåãå¶ä½é¨åé½æ¯ä¸»æä½åºã\n\nåè§    æ­£æå­ä½      æ é¢          æå¹³æé®                            åå®¹çç½   å¡çé´çç½   å±å¹è¾¹çä¸å¡çé´çç½\n2dp   14/16sp   24/24+ sp   roboto medium, 14sp, 10sp å­é´è·   16dp   8dp     8dp\n\n# çº¸çï¼chipsï¼\n\nçº¸çæ¯ä¸ç§å°åçç¨æ¥åç°å¤æå®ä½çåï¼æ¯å¦è¯´æ¥åçäºä»¶æèç³»äººãå®å¯ä»¥åå«ä¸å¼ å¾çï¼ä¸ä¸ªç­å­ç¬¦ä¸²(å¿è¦æ¶å¯è½è¢«æªåçå­ç¬¦ä¸²)ï¼æèæ¯å¶å®çä¸äºä¸å®ä½å¯¹è±¡æå³çç®æ´çä¿¡æ¯ã\n\nchips å¯ä»¥éå¸¸æ¹ä¾¿çéè¿ææ½æ¥æä½ãéè¿æåå¨ä½å¯ä»¥è§¦åæ¬æµ®å¡ç(æèæ¯å¨å±è§å¾)ä¸­ç chip å¯¹åºå®ä½çè§å¾ï¼æèæ¯å¼¹åºä¸ chip å®ä½ç¸å³çæä½èåã\n\nç­å°ç©ºé´åè¡¨ç°å¤æä¿¡æ¯çä¸ä¸ªç»ä»¶ï¼æ¯å¦æ¥æãèç³»äººéæ©å¨ã\n\n\n\n# æç¤ºæ¡ï¼dialogsï¼\n\n\n\ndialogs ç¨äºæç¤ºç¨æ·ä½ä¸äºå³å®ï¼æèæ¯å®ææä¸ªä»»å¡æ¶éè¦çä¸äºå¶å®é¢å¤çä¿¡æ¯ã dialog å¯ä»¥æ¯ç¨ä¸ç§ åæ¶/ç¡®å® çç®ååºç­æ¨¡å¼ï¼ä¹å¯ä»¥æ¯èªå®ä¹å¸å±çå¤ææ¨¡å¼ï¼æ¯å¦è¯´ä¸äºææ¬è®¾ç½®æèæ¯ææ¬è¾å¥ ã\n\nä¸äºå¤æçæä½ï¼å°¤å¶æ¯æ¯ä¸ªå³ç­é½éè¦ç¸å³è§£éè¯´æçæåµä¸æ¯ä¸éåä½¿ç¨ dialog å½¢å¼çã\n\ndialog åå«äºä¸ä¸ªæ é¢(å¯é)ï¼åå®¹ ï¼äºä»¶ã\n\n * æ é¢ï¼ä¸»è¦æ¯ç¨äºç®åæè¿°ä¸éæ©ç±»åãå®æ¯å¯éçï¼è¦éè¦çæ¶åèµå¼å³å¯ã\n * åå®¹ï¼ä¸»è¦æ¯æè¿°è¦ä½åºä¸ä¸ªä»ä¹æ ·çå³å® ã\n * äºä»¶ï¼ä¸»è¦æ¯åè®¸ç¨æ·éè¿ç¡®è®¤ä¸ä¸ªå·ä½æä½æ¥ç»§ç»­ä¸ä¸æ­¥æ´»å¨ã\n\n\n\n# åéçº¿ï¼dividersï¼\n\ndividers ä¸»è¦ç¨äºç®¡çååéåè¡¨åé¡µé¢å¸å±åçåå®¹ï¼ä»¥ä¾¿è®©åå®¹çææ´å¥½çè§è§ææåç©ºé´æãç¤ºä¾ä¸­åç°çåéçº¿æ¯ä¸ç§å¼±è§åï¼å¼±å°ä¸ä¼å»ææ°å°ç¨æ·å¯¹åå®¹çå³æ³¨ã\n\n 1. åè¡¨ä¸­æå¤´åãå¾çç­åç´ æ¶ï¼ä½¿ç¨ååµåéçº¿ï¼å·¦ç«¯ä¸æå­å¯¹é½; æ²¡æå¤´åãå¾æ ç­åç´ æ¶ï¼éè¦ç¨éæ åéçº¿:\n\n 2. å¾çæ¬èº«å°±èµ·å°åå®åºåçä½ç¨ï¼æä»¥ç¸ååè¡¨ä¸éè¦åéçº¿:\n\n\n\n 3. è°¨æä½¿ç¨åéçº¿ï¼çç½åå°æ é¢ä¹è½èµ·å°åéä½ç¨ãè½ç¨çç½çå°æ¹ï¼ä¼åä½¿ç¨çç½ãåéçº¿çå±çº§é«äºçç½ã\n\n\n\n 4. éæ åéçº¿çå±çº§é«äºååµåéçº¿\n\n\n\n# ç½æ ¼ï¼gridsï¼\n\nç½æ ¼åè¡¨æ¯ä¸ç§æ ååè¡¨è§å¾çå¯éç»ä»¶ãç½æ ¼åè¡¨ä¸åºç¨äºå¸å±åå¶ä»å¯è§è§å¾ä¸­çç½æ ¼æçææ¾çåºå«ã\n\nä¸è¬æ¥è¯´ï¼ç½æ ¼åªè½åç´æ»å¨ãåä¸ªç¦çä¸æ¯ææ»å¨æå¿ï¼ä¹ä¸é¼å±ä½¿ç¨ææ¾æä½ãç½æ ¼ä¸­çååæ ¼é´è·æ¯2dpæ8dpã\n\n\n\nç½æ ¼ç±ååæ ¼ææï¼ååæ ¼ä¸­çç¦çç¨æ¥æ¿è½½åå®¹ãç¦çå¯ä»¥æ¨ªè·¨å¤ä¸ªååæ ¼:\n\n\n\nç¦çåå®¹åæ¬ä¸»è¦åå®¹ï¼primary contentï¼åæ¬¡è¦åå®¹(secondary content)ãä¸»è¦åå®¹æ¯æçéè¦åºå«çåå®¹ï¼å¸åçå¦å¾çãæ¬¡è¦åå®¹å¯ä»¥æ¯ä¸ä¸ªå¨ä½æé®æèææ¬ã\n\n\n\n# åè¡¨ï¼listsï¼\n\nåè¡¨ä½ä¸ºä¸ä¸ªåä¸çè¿ç»­åç´ æ¥ä»¥åç´æåçæ¹å¼æ¾ç¤ºå¤è¡æ¡ç®ã\n\nåè¡¨ç±åä¸è¿ç»­çåææï¼è¯¥ååç­åæç¸åå®½åº¦ç§°ä¸ºè¡ï¼rowsï¼çå­é¨åãè¡æ¯ç¦çï¼tilesï¼çå®¹å¨ãç¦çä¸­å­æ¾åå®¹ï¼å¹¶ä¸å¨åè¡¨ä¸­å¯ä»¥æ¹åé«åº¦ã\n\nå¦æåè¡¨é¡¹åå®¹æå­è¶è¿3è¡ï¼è¯·æ¹ç¨å¡çãå¦æåè¡¨é¡¹çä¸»è¦åºå«å¨äºå¾çï¼è¯·æ¹ç¨ç½æ ¼ã\n\nåè¡¨åå«ä¸»æä½åºä¸å¯æä½åºãå¯æä½åºä½äºåè¡¨å³ä¾§ï¼å¶ä½é½æ¯ä¸»æä½åºãå¨åä¸ä¸ªåè¡¨ä¸­ï¼ä¸»ãå¯æä½åºçåå®¹ä¸ä½ç½®è¦ä¿æä¸è´ã\n\n\n\nä¸»æä½åºä¸å¯æä½åºçå¾æ æå¾å½¢åç´ æ¯åè¡¨æ§å¶é¡¹ï¼åè¡¨çæ§å¶é¡¹å¯ä»¥æ¯å¾éæ¡ãå¼å³ãæå¨æåºãå±å¼/æ¶èµ·ç­æä½ï¼ä¹å¯ä»¥åå«å¿«æ·é®æç¤ºãäºçº§èåç­æç¤ºä¿¡æ¯ã\n\n\n\nå¨åä¸ä¸ªåè¡¨ä¸­ï¼æ»å¨æå¿æä½ä¿æä¸è´ã\n\n# èåï¼menusï¼\n\n\n\næ³¨æï¼èåå°ä¸ä¸çåº8dpè·ç¦»ã\n\n# è¿åº¦åå¨æï¼progress & activityï¼\n\nçº¿å½¢è¿åº¦æ¡åªåºç°å¨çº¸ççè¾¹ç¼:\n\n\n\nç¯å½¢è¿åº¦æ¡ä¹åæ¶é´å·²ç¥åæ¶é´æªç¥ä¸¤ç§:\n\nå è½½è¯¦ç»ä¿¡æ¯æ¶ï¼ä¹å¯ä»¥ä½¿ç¨è¿åº¦æ¡:\n\n\n\n# snackbars & toasts\n\n\n\nsnackbarsè³å¤åå«ä¸ä¸ªæä½é¡¹ï¼ä¸è½åå«å¾æ ãä¸è½åºç°ä¸ä¸ªä»¥ä¸çsnackbarsã\n\nsnackbarså¨ç§»å¨è®¾å¤ä¸ï¼åºç°å¨åºé¨ãå¨pcä¸ï¼åºè¯¥æ¬æµ®å¨å±å¹å·¦ä¸è§ã\n\nä¸ä¸å®è¦ç¨æ·ååºçæç¤ºï¼å¯ä»¥ä½¿ç¨snackbarsãéå¸¸éè¦çæç¤ºï¼å¿é¡»ç¨æ·æ¥å³å®çï¼åºè¯¥ç¨å¯¹è¯æ¡ã\n\n\n\nsnackbarsä¸è½é®æ¡ä½æ¬æµ®æé®ï¼æ¬æµ®æé®è¦ä¸ç§»è®©åºä½ç½®ã\n\n\n\nsnackbarsççç½æ¯è¾å¤§ï¼24dpã\n\n\n\ntoastsåsnackbarsç±»ä¼¼ï¼æ ·å¼åä½ç½®å¯ä»¥èªå®ä¹ï¼å»ºè®®éµå¾ªsnackbarsçè§åè®¾è®¡ã\n\n\n\n# å¯æ é¢ï¼subheadersï¼\n\n\n\nå°æ é¢æ¯åè¡¨æç½æ ¼ä¸­çç¹æ®ç¦çï¼æè¿°åè¡¨åå®¹çåç±»ãæåºç­ä¿¡æ¯ã\n\n\n\næ»å¨æ¶ï¼å¦æåè¡¨è¾é¿ï¼å°æ é¢ä¼åºå®å¨é¡¶é¨ï¼ç´å°ä¸ä¸ä¸ªå°æ é¢å°å®é¡¶ä¸å»ã\n\n\n\nå­å¨æµ®å¨æé®æ¶ï¼å°æ é¢è¦è®©åºä½ç½®ï¼ä¸æå­å¯¹é½ã\n\n\n\n# tabs\n\n\n\nå¨ä¸ä¸ª app ä¸­ï¼tabs ä½¿å¨ä¸åçè§å¾ååè½é´æ¢ç´¢ååæ¢ä»¥åæµè§ä¸åç±»å«çæ°æ®éåèµ·æ¥åå¾ç®åã\n\n\n\ntabæå­è¦æ¾ç¤ºå®æ´ï¼å­å·ä¿æä¸è´ï¼ä¸è½æè¡ï¼æå­ä¸å¾æ ä¸è½æ··ç¨ã\n\n\n\n# ææ¬å­æ®µï¼text fieldsï¼\n\nææ¬æ¡å¯ä»¥è®©ç¨æ·è¾å¥ææ¬ãå®ä»¬å¯ä»¥æ¯åè¡çï¼å¸¦æä¸å¸¦æ»å¨æ¡ï¼ä¹å¯ä»¥æ¯å¤è¡çï¼å¹¶ä¸å¸¦æä¸ä¸ªå¾æ ãç¹å»ææ¬æ¡åæ¾ç¤ºåæ ï¼å¹¶èªå¨æ¾ç¤ºé®çãé¤äºè¾å¥ï¼ææ¬æ¡å¯ä»¥è¿è¡å¶ä»ä»»å¡æä½ï¼å¦ææ¬éæ©ï¼åªåï¼å¤å¶ï¼ç²è´´ï¼ä»¥åæ°æ®çèªå¨æ¥æ¾åè½ã\n\nç®åä¸æ ¹æ¨ªçº¿å°±è½ä»£è¡¨è¾å¥æ¡ï¼å¯ä»¥å¸¦å¾æ :\n\n\n\næ¿æ´»ç¶æåéè¯¯ç¶æï¼æ¨ªçº¿çå®½åº¦åä¸º2dpï¼é¢è²æ¹å:\n\n\n\nè¾å¥æ¡ç¹å»åºåé«åº¦è³å°48dpï¼ä½æ¨ªçº¿å¹¶ä¸å¨ç¹å»åºåçåºé¨ï¼è¿æ8dpè·ç¦»ã\n\n\n\nè¾å¥æ¡æç¤ºæå­ï¼å¯ä»¥å¨è¾å¥åå®¹åï¼ç¼©å°åçå¨è¾å¥æ¡å·¦ä¸è§; æ´ä¸ªç¹å»åºåå¢é«ï¼æç¤ºæå­ä¹æ¯ç¹å»åºåçä¸é¨å:\n\néæ è¾å¥æ¡æ¯æ²¡ææ¨ªçº¿çï¼è¿ç§æåµä¸éå¸¸æåéçº¿å°è¾å¥æ¡éå¼:\n\n\n\nå³ä¸è§å¯ä»¥å å¥å­æ°ç»è®¡ãå­æ°ç»è®¡ä¸è¦é»è®¤æ¾ç¤ºï¼å­æ°æ¥è¿ä¸éæ¶åæ¾ç¤ºåºæ¥ã\n\néæ è¾å¥æ¡ä¹å¯ä»¥æå­æ°ç»è®¡ï¼åè¡çå­æ°ç»è®¡æ¾ç¤ºå¨åä¸è¡å³ä¾§:\n\n\n\néè¯¯æç¤ºæ¾ç¤ºå¨è¾å¥æ¡çå·¦ä¸æ¹ãé»è®¤æç¤ºææ¬å¯ä»¥è½¬æ¢ä¸ºéè¯¯æç¤º:\n\nå­æ°éå¶ä¸éè¯¯æç¤ºé½ä¼ä½¿ç¹å»åºåå¢é«:\n\n\n\nåæ¶æå¤ä¸ªè¾å¥æ¡éè¯¯æ¶ï¼é¡¶é¨è¦æä¸ä¸ªå¨å±çéè¯¯æç¤º:\n\n\n\nè¾å¥æ¡å°½éå¸¦æèªå¨è¡¥å¨åè½:\n\n\n\n# å·¥å·æç¤ºï¼tooltipsï¼\n\næç¤ºåªç¨å¨å°å¾æ ä¸ï¼æå­ä¸éè¦æç¤ºãé¼ æ æ¬åãè·å¾ç¦ç¹ãææé¿æé½å¯ä»¥è§¦åæç¤ºã\n\n\n\nè§¦æ¸æç¤ºï¼å·¦ï¼åé¼ æ æç¤ºï¼å³ï¼çå°ºå¯¸æ¯ä¸åçï¼èæ¯é½å¸¦æ90%çéæåº¦:\n\n# steppers\n\n# å¯¼èªï¼navigationï¼\n\ntabs:\n\n\n\nbottom navigation bar 1:\n\n\n\nbottom navigation bar 2:\n\n\n\nnavigation drawer:\n\n\n\n# å¯¼èªæ½å±ï¼navigation drawerï¼\n\nä¾§è¾¹æ½å±ä»å·¦ä¾§æ»åºï¼å æ®æ´ä¸ªå±å¹é«åº¦ï¼éµå¾ªæ®éåè¡¨çå¸å±è§åãææºç«¯çä¾§è¾¹æ½å±è·ç¦»å±å¹å³ä¾§56dpã\n\n\n\nä¾§è¾¹æ½å±æ¯ææ»å¨ãå¦æåå®¹è¿é¿ï¼è®¾ç½®åå¸®å©åé¦å¯ä»¥åºå®å¨åºé¨ï¼åè¡¨è¾ç­ä¸éè¦æ»å¨æ¶ï¼è®¾ç½®åå¸®å©åé¦è·éå¨åè¡¨åé¢ï¼æ½å±æ¶èµ·æ¶ï¼ä¼ä¿çä¹åçæ»å¨ä½ç½®:\n\n# éç¥ï¼notificationsï¼\n\n\n\n# æéï¼permissionsï¼\n\n\n\n# è®¾ç½®çé¢ï¼settingsï¼\n\n\n\nè®¾ç½®åå¸®å©åé¦éå¸¸æ¾å¨ä¾§è¾¹æ½å±ä¸­ãå¦ææ²¡æä¾§è¾¹æ½å±ï¼åæ¾å¨appbarçä¸æèååºé¨ãè®¾ç½®çé¢åªè½åå«è®¾ç½®é¡¹ï¼è¯¸å¦å³äºãåé¦ä¹ç±»ççé¢ï¼å¥å£åºè¯¥æ¾å¨å¶ä»å°æ¹ã\n\n\n# reference\n\n 1. https://www.cnblogs.com/weekbo/p/9018121.html\n\nä½¿ç¨ style å±æ§ä¿®æ¹æå­çèæ¯è²: çº¢è² ç»¿è² èè² é¢è²å¼ é¢è²å¼',charsets:{cjk:!0}},{title:"å­ç¬¦é & ç¼ç ",frontmatter:{title:"å­ç¬¦é & ç¼ç ",date:"2021-11-18T00:00:00.000Z",lastmod:null,publish:!0,categories:null,keywords:null,description:null,tags:null,permalink:null},regularPath:"/blog/skills/utils/charscter_and_coding.html",relativePath:"blog/skills/utils/charscter_and_coding.md",key:"v-7d6afdba",path:"/blog/skills/utils/charscter_and_coding.html",headers:[{level:2,title:"ASCII",slug:"ascii",normalizedTitle:"ascii",charIndex:19},{level:2,title:"ANSI",slug:"ansi",normalizedTitle:"ansi",charIndex:34},{level:3,title:"ä¸­æ",slug:"ä¸­æ",normalizedTitle:"ä¸­æ",charIndex:350},{level:2,title:"Unicode",slug:"unicode",normalizedTitle:"unicode",charIndex:1235},{level:2,title:"Coding-Model",slug:"coding-model",normalizedTitle:"coding-model",charIndex:1479}],headersStr:"ASCII ANSI ä¸­æ Unicode Coding-Model",content:'# å­ç¬¦é & ç¼ç \n\n\n\n\n\n\n# ASCII\n\nASCII æ¯ ANSI çä¸é¨åï¼ä»ä½¿ç¨ 0x00 ~ 0x7Fï¼æ¯ç®åææ®åçä¸ç§å­ç¬¦ç¼ç ï¼å®ææ ¹äºæä»¬çäºèç½ï¼æä½ç³»ç»ï¼é®çï¼æå°æºï¼æä»¶å­ä½åæå°æºç­ã\n\n\n# ANSI\n\nANSIæ¯ä¸ç§å­ç¬¦ç¼ç æ¹å¼ï¼ä¸ºä½¿è®¡ç®æºæ¯ææ´å¤è¯­è¨ï¼éå¸¸ä½¿ç¨ 0x00~0x7f èå´ç1 ä¸ªå­èæ¥è¡¨ç¤º 1 ä¸ªè±æå­ç¬¦ãè¶åºæ­¤èå´çä½¿ç¨0x80~0xFFFFæ¥ç¼ç ï¼å³æ©å±çASCIIç¼ç ã\n\næ³¨æ code page çä½¿ç¨ãcode page ä¸»è¦ç¨äºè§£å³ å­èä¸å­ç¬¦çå¿«éå¯¹ç§ï¼ä¹å°±æ¯ç´æ¥å° å­èä¸æç§å­ç¬¦éçå­ç¬¦ç¼ç  ä¹é´ç¸äºæ å°ã\n\nå¶ä¸­å¸¸è§çå­ç¬¦éï¼å¦GB2312ãGBKãGB18030ãBig5ãShift_JIS ç­é½å±äºæ­¤ç¼ç æ¹å¼ã\n\n\n# ä¸­æ\n\n# GB2312\n\nGB2312 æ GB2312-80 æ¯ä¸­å½å½å®¶æ åç®ä½ä¸­æå­ç¬¦é, ç±ä¸­å½å½å®¶æ åæ»å±åå¸, 1981 å¹´ 5 æ 1 æ¥å®æ½ã\n\nGB2312 å¯¹ä»»æä¸ä¸ªå¾å½¢å­ç¬¦é½éç¨ä¸¤ä¸ªå­èè¡¨ç¤ºï¼å¹¶å¯¹ææ¶æ±å­è¿è¡äº"ååº"å¤çï¼æ¯åºå«æ 94 ä¸ªæ±å­/ç¬¦å·ï¼åå«å¯¹åºç¬¬ä¸å­èåç¬¬äºå­èãè¿ç§è¡¨ç¤ºæ¹å¼ä¹ç§°ä¸ºåºä½ç :\n\n * 01-09 åºä¸ºç¹æ®ç¬¦å·\n * 16-55 åºä¸ºä¸çº§æ±å­ï¼ææ¼é³æåº\n * 56-87 åºä¸ºäºçº§æ±å­ï¼æé¨é¦/ç¬ç»æåº\n * 10-15 åºå 88-94 åºåæªæç¼ç \n\nGB 2312 çç¼ç èå´ä¸º(åå«ä¸ºé¦å­èãå°¾å­è): 0x21H ~ 0x77, 0x21 ~ 0x7EHãè¿ä¸ ASCII æéå ï¼éè¡æ¹æ³æ¯å° GB ç ä¸¤ä¸ªå­èçæé«ä½ç½® 1 ä»¥ç¤ºåºå«ï¼æä»¥æç»çç¼ç èå´ä¸º: 0xA1 ~ 0xF7, 0xA1 ~ 0xFEã\n\n# GBK\n\nGBK å³æ±å­åç æ©å±è§èï¼K ä¸ºæ±è¯­æ¼é³ Kuo Zhanï¼æ©å±ï¼ä¸­"æ©"å­çå£°æ¯ãè±æå¨ç§° Chinese Internal Code Specificationã\n\nGBK åä¸ä¸ GB 2312 å®å¨å¼å®¹ï¼åä¸æ¯æ ISO 10646 å½éæ åï¼å¨åèååèè¿æ¸¡è¿ç¨ä¸­èµ·å°çæ¿ä¸å¯ä¸çä½ç¨ã\n\nGBK éç¨åå­èè¡¨ç¤ºï¼æ»ä½ç¼ç èå´ä¸º(åå«ä¸ºé¦å­èãå°¾å­è): 0x81 ~ 0xFE, 0x40 ~ 0xFEï¼åé¤ XX7F ä¸æ¡çº¿ã\n\n# GB18030\n\nGB18030 ä¸ GB2312 å GBK å¼å®¹ï¼å±æ¶å½æ±å­70244ä¸ªãGB18030 ç¼ç æ¯ä¸äºåå­èåé¿ç¼ç :\n\n * åå­èï¼å¶å¼ä» 0 å° 0x7Fï¼ä¸ ASCII ç¼ç å¼å®¹\n * åå­èï¼ç¬¬ä¸ä¸ªå­èçå¼ä» 0x81 ~ 0xFEï¼ç¬¬äºä¸ªå­èçå¼ä» 0x40 ~ 0xFE(ä¸åæ¬0x7F)ï¼ä¸ GBK æ åå¼å®¹\n * åå­èï¼ç¬¬ä¸ä¸ªå­èçå¼ä» 0x81 ~ 0xFEï¼ç¬¬äºä¸ªå­èçå¼ä» 0x30 ~ 0x39ï¼ç¬¬ä¸ä¸ªå­èä»0x81 ~ 0xFEï¼ç¬¬åä¸ªå­èä» 0x30 ~ 0x39\n\n\n# Unicode\n\nå¶ä¸­ utf8 å utf16 é½æ¯åé¿ç¼ç ï¼åªä¸è¿ utf16 å¯ä»¥å®æ´çè¡¨è¾¾ BMP (åºç¡å¹³é¢) ä¸­çææå­ç¬¦ï¼æä»¥ä¸è¬é½è®¤ä¸ºå¶åºå®ä¸º 2bytes(è¿ä¸ªç¾ä¸½çéè¯¯æºèª windows ç unicode å®ä¹, å®å¶å®æ¯ ucs-2)ã\n\nutf16 å utf32 åå ä¸º byte-order é®é¢ï¼å¿å®éè¦å¨ææ¡£å¼å¤´éè¿ BOM å¤´ææå­èåºãutf8 æç§è®¾è®¡åçæ¥çï¼æ¯æ²¡æ byte-order é®é¢çï¼ä¸è¿å¾®è½¯è¿æ¯ç»å¶å®ä¹äº BOM å¤´ã\n\n\n# Coding-Model\n\nç»ä¸ç (Unicode)åéç¨å­ç¬¦é(UCS)ææè¿°çç¼ç ç³»ç»ï¼æåºäºå¨æ°çç¼ç æè·¯ï¼å®å°å­ç¬¦éä¸å­ç¬¦ç¼ç çæ¦å¿µæ´ä¸ºç»è´å°åè§£ä¸ºäºä»¥ä¸å ä¸ªæ¹é¢ï¼\n\n 1. æåªäºå­ç¬¦ï¼\n 2. è¿äºå­ç¬¦çç¼å·æ¯ä»ä¹ï¼\n 3. è¿äºç¼å·å¦ä½ç¼ç æä¸ç³»åé»è¾å±é¢æéå¤§å°çæ°å­ï¼å³ç ååºåï¼\n 4. è¿äºé»è¾å±é¢çç ååºåå¦ä½è½¬æ¢ä¸º(å³æ å°ä¸º)ç©çå±é¢çå­èåºå(å³å­èæµ)ï¼\n 5. å¨æäºç¹æ®çä¼ è¾ç¯å¢ä¸­(æ¯å¦Emailä¸­)ï¼åè¿ä¸æ­¥å°å­èåºåè¿è¡éåºæ§ç¼ç å¤çã\n\nè¿å ä¸ªæ¹é¢ä½ä¸ºä¸ä¸ªæ´ä½ï¼ææäºç°ä»£å­ç¬¦ç¼ç æ¨¡åãç°ä»£å­ç¬¦ç¼ç æ¨¡åä¹æä»¥è¦åè§£ä¸ºè¿ä¹å ä¸ªæ¹é¢ï¼å¶æ ¸å¿ææ³æ¯åå»ºä¸ä¸ªè½å¤ç¨ä¸åæ¹å¼æ¥ç¼ç çéç¨å­ç¬¦éãæ³¨æè¿éçå³é®è¯ï¼âä¸åæ¹å¼âä¸âéç¨âã',normalizedContent:'# å­ç¬¦é & ç¼ç \n\n\n\n\n\n\n# ascii\n\nascii æ¯ ansi çä¸é¨åï¼ä»ä½¿ç¨ 0x00 ~ 0x7fï¼æ¯ç®åææ®åçä¸ç§å­ç¬¦ç¼ç ï¼å®ææ ¹äºæä»¬çäºèç½ï¼æä½ç³»ç»ï¼é®çï¼æå°æºï¼æä»¶å­ä½åæå°æºç­ã\n\n\n# ansi\n\nansiæ¯ä¸ç§å­ç¬¦ç¼ç æ¹å¼ï¼ä¸ºä½¿è®¡ç®æºæ¯ææ´å¤è¯­è¨ï¼éå¸¸ä½¿ç¨ 0x00~0x7f èå´ç1 ä¸ªå­èæ¥è¡¨ç¤º 1 ä¸ªè±æå­ç¬¦ãè¶åºæ­¤èå´çä½¿ç¨0x80~0xffffæ¥ç¼ç ï¼å³æ©å±çasciiç¼ç ã\n\næ³¨æ code page çä½¿ç¨ãcode page ä¸»è¦ç¨äºè§£å³ å­èä¸å­ç¬¦çå¿«éå¯¹ç§ï¼ä¹å°±æ¯ç´æ¥å° å­èä¸æç§å­ç¬¦éçå­ç¬¦ç¼ç  ä¹é´ç¸äºæ å°ã\n\nå¶ä¸­å¸¸è§çå­ç¬¦éï¼å¦gb2312ãgbkãgb18030ãbig5ãshift_jis ç­é½å±äºæ­¤ç¼ç æ¹å¼ã\n\n\n# ä¸­æ\n\n# gb2312\n\ngb2312 æ gb2312-80 æ¯ä¸­å½å½å®¶æ åç®ä½ä¸­æå­ç¬¦é, ç±ä¸­å½å½å®¶æ åæ»å±åå¸, 1981 å¹´ 5 æ 1 æ¥å®æ½ã\n\ngb2312 å¯¹ä»»æä¸ä¸ªå¾å½¢å­ç¬¦é½éç¨ä¸¤ä¸ªå­èè¡¨ç¤ºï¼å¹¶å¯¹ææ¶æ±å­è¿è¡äº"ååº"å¤çï¼æ¯åºå«æ 94 ä¸ªæ±å­/ç¬¦å·ï¼åå«å¯¹åºç¬¬ä¸å­èåç¬¬äºå­èãè¿ç§è¡¨ç¤ºæ¹å¼ä¹ç§°ä¸ºåºä½ç :\n\n * 01-09 åºä¸ºç¹æ®ç¬¦å·\n * 16-55 åºä¸ºä¸çº§æ±å­ï¼ææ¼é³æåº\n * 56-87 åºä¸ºäºçº§æ±å­ï¼æé¨é¦/ç¬ç»æåº\n * 10-15 åºå 88-94 åºåæªæç¼ç \n\ngb 2312 çç¼ç èå´ä¸º(åå«ä¸ºé¦å­èãå°¾å­è): 0x21h ~ 0x77, 0x21 ~ 0x7ehãè¿ä¸ ascii æéå ï¼éè¡æ¹æ³æ¯å° gb ç ä¸¤ä¸ªå­èçæé«ä½ç½® 1 ä»¥ç¤ºåºå«ï¼æä»¥æç»çç¼ç èå´ä¸º: 0xa1 ~ 0xf7, 0xa1 ~ 0xfeã\n\n# gbk\n\ngbk å³æ±å­åç æ©å±è§èï¼k ä¸ºæ±è¯­æ¼é³ kuo zhanï¼æ©å±ï¼ä¸­"æ©"å­çå£°æ¯ãè±æå¨ç§° chinese internal code specificationã\n\ngbk åä¸ä¸ gb 2312 å®å¨å¼å®¹ï¼åä¸æ¯æ iso 10646 å½éæ åï¼å¨åèååèè¿æ¸¡è¿ç¨ä¸­èµ·å°çæ¿ä¸å¯ä¸çä½ç¨ã\n\ngbk éç¨åå­èè¡¨ç¤ºï¼æ»ä½ç¼ç èå´ä¸º(åå«ä¸ºé¦å­èãå°¾å­è): 0x81 ~ 0xfe, 0x40 ~ 0xfeï¼åé¤ xx7f ä¸æ¡çº¿ã\n\n# gb18030\n\ngb18030 ä¸ gb2312 å gbk å¼å®¹ï¼å±æ¶å½æ±å­70244ä¸ªãgb18030 ç¼ç æ¯ä¸äºåå­èåé¿ç¼ç :\n\n * åå­èï¼å¶å¼ä» 0 å° 0x7fï¼ä¸ ascii ç¼ç å¼å®¹\n * åå­èï¼ç¬¬ä¸ä¸ªå­èçå¼ä» 0x81 ~ 0xfeï¼ç¬¬äºä¸ªå­èçå¼ä» 0x40 ~ 0xfe(ä¸åæ¬0x7f)ï¼ä¸ gbk æ åå¼å®¹\n * åå­èï¼ç¬¬ä¸ä¸ªå­èçå¼ä» 0x81 ~ 0xfeï¼ç¬¬äºä¸ªå­èçå¼ä» 0x30 ~ 0x39ï¼ç¬¬ä¸ä¸ªå­èä»0x81 ~ 0xfeï¼ç¬¬åä¸ªå­èä» 0x30 ~ 0x39\n\n\n# unicode\n\nå¶ä¸­ utf8 å utf16 é½æ¯åé¿ç¼ç ï¼åªä¸è¿ utf16 å¯ä»¥å®æ´çè¡¨è¾¾ bmp (åºç¡å¹³é¢) ä¸­çææå­ç¬¦ï¼æä»¥ä¸è¬é½è®¤ä¸ºå¶åºå®ä¸º 2bytes(è¿ä¸ªç¾ä¸½çéè¯¯æºèª windows ç unicode å®ä¹, å®å¶å®æ¯ ucs-2)ã\n\nutf16 å utf32 åå ä¸º byte-order é®é¢ï¼å¿å®éè¦å¨ææ¡£å¼å¤´éè¿ bom å¤´ææå­èåºãutf8 æç§è®¾è®¡åçæ¥çï¼æ¯æ²¡æ byte-order é®é¢çï¼ä¸è¿å¾®è½¯è¿æ¯ç»å¶å®ä¹äº bom å¤´ã\n\n\n# coding-model\n\nç»ä¸ç (unicode)åéç¨å­ç¬¦é(ucs)ææè¿°çç¼ç ç³»ç»ï¼æåºäºå¨æ°çç¼ç æè·¯ï¼å®å°å­ç¬¦éä¸å­ç¬¦ç¼ç çæ¦å¿µæ´ä¸ºç»è´å°åè§£ä¸ºäºä»¥ä¸å ä¸ªæ¹é¢ï¼\n\n 1. æåªäºå­ç¬¦ï¼\n 2. è¿äºå­ç¬¦çç¼å·æ¯ä»ä¹ï¼\n 3. è¿äºç¼å·å¦ä½ç¼ç æä¸ç³»åé»è¾å±é¢æéå¤§å°çæ°å­ï¼å³ç ååºåï¼\n 4. è¿äºé»è¾å±é¢çç ååºåå¦ä½è½¬æ¢ä¸º(å³æ å°ä¸º)ç©çå±é¢çå­èåºå(å³å­èæµ)ï¼\n 5. å¨æäºç¹æ®çä¼ è¾ç¯å¢ä¸­(æ¯å¦emailä¸­)ï¼åè¿ä¸æ­¥å°å­èåºåè¿è¡éåºæ§ç¼ç å¤çã\n\nè¿å ä¸ªæ¹é¢ä½ä¸ºä¸ä¸ªæ´ä½ï¼ææäºç°ä»£å­ç¬¦ç¼ç æ¨¡åãç°ä»£å­ç¬¦ç¼ç æ¨¡åä¹æä»¥è¦åè§£ä¸ºè¿ä¹å ä¸ªæ¹é¢ï¼å¶æ ¸å¿ææ³æ¯åå»ºä¸ä¸ªè½å¤ç¨ä¸åæ¹å¼æ¥ç¼ç çéç¨å­ç¬¦éãæ³¨æè¿éçå³é®è¯ï¼âä¸åæ¹å¼âä¸âéç¨âã',charsets:{cjk:!0}},{title:"Programing for Children",frontmatter:{title:"Programing for Children",date:"2022-03-05T14:11:00.000Z",lastmod:null,publish:!0,categories:null,keywords:null,description:null,tags:null,permalink:null},regularPath:"/blog/skills/utils/child_program.html",relativePath:"blog/skills/utils/child_program.md",key:"v-dde8b282",path:"/blog/skills/utils/child_program.html",headers:[{level:2,title:"Content",slug:"content",normalizedTitle:"content",charIndex:24},{level:3,title:"Learn the fundamentals with the self-paced courses",slug:"learn-the-fundamentals-with-the-self-paced-courses",normalizedTitle:"learn the fundamentals with the self-paced courses",charIndex:36},{level:3,title:"Teacher View",slug:"teacher-view",normalizedTitle:"teacher view",charIndex:117},{level:3,title:"Computer Science Discoveries ('21-'22)",slug:"computer-science-discoveries-21-22",normalizedTitle:"computer science discoveries ('21-'22)",charIndex:166},{level:2,title:"Pre-reader Express (2021)",slug:"pre-reader-express-2021",normalizedTitle:"pre-reader express (2021)",charIndex:334},{level:2,title:"Computer Science Fundamentals",slug:"computer-science-fundamentals",normalizedTitle:"computer science fundamentals",charIndex:1517},{level:3,title:"Course A (2021)",slug:"course-a-2021",normalizedTitle:"course a (2021)",charIndex:1551},{level:3,title:"Course B (2021)",slug:"course-b-2021",normalizedTitle:"course b (2021)",charIndex:1620},{level:3,title:"Course C (2021)",slug:"course-c-2021",normalizedTitle:"course c (2021)",charIndex:1680},{level:3,title:"Course D (2021)",slug:"course-d-2021",normalizedTitle:"course d (2021)",charIndex:1740},{level:3,title:"Course E (2021)",slug:"course-e-2021",normalizedTitle:"course e (2021)",charIndex:1800},{level:3,title:"Course F (2021)",slug:"course-f-2021",normalizedTitle:"course f (2021)",charIndex:1860}],headersStr:"Content Learn the fundamentals with the self-paced courses Teacher View Computer Science Discoveries ('21-'22) Pre-reader Express (2021) Computer Science Fundamentals Course A (2021) Course B (2021) Course C (2021) Course D (2021) Course E (2021) Course F (2021)",content:"# å°å¿ç¼ç¨\n\n\n# code.org\n\n\n# Content\n\n\n# Learn the fundamentals with the self-paced courses\n\nComputer Science at Home\n\n\n# Teacher View\n\nYou can teach computer science\n\n\n# Computer Science Discoveries ('21-'22)\n\nhttps://studio.code.org/s/csd1-2021 https://docs.google.com/document/d/1myJwrDyRlAjwVNDS3gs-3JaJNhogsGMt9Swo-bpySgE/preview\n\n\n# Pre-reader Express (2021)\n\nINDEX   CATEGORY     LESSON NAME                     PROGRESS   KEY POINT                NOTE\n1       Sequencing   Learn to Drag and Drop          1 - 12                              \n2       Sequencing   Sequencing with Scrat           1 - 7                               \n3       Sequencing   Programming with Angry Birds    1 - 9      å¾ªç¯(Repeat) && åæ­¥(Step)   å°è¯ææè½æ³å°çæ¹æ³\n4       Sequencing   Programming with Rey and BB-8   1 - 12     åºå(Sequence)             æä¼æ¹æ³(block æå°)\n5       Sequencing   Programming with Harvester      1 - 15     Pick && Debug            \n6       Loops        Loops with Scrat                1 - 12                              Instructions ä¸­çæ¡ä»¶\n7       Loops        Loops with Laurel               1 - 13     Get && Goal              ææ¡ä»¶å¾åé«\n8       Loops        Ocean Scene with Loops          1 - 14     Draw && Jump             Artistï¼æ³è±¡\n9       Loops        Drawing Gardens with Loops      1 - 9      Pattern && Color         \n10      Events       On the Move with Events         1- 8       When && Set && Show      Actions\n11      Events       A Royal Battle with Events      1 - 7      When                     å¤æçæ¸¸æ\n\n\n# Computer Science Fundamentals\n\n\n# Course A (2021)\n\nGrade level: Kindergarten Number of lessons: 13\n\n\n# Course B (2021)\n\nGrade level: 1st Number of lessons: 13\n\n\n# Course C (2021)\n\nGrade level: 2nd Number of lessons: 16\n\n\n# Course D (2021)\n\nGrade level: 3rd Number of lessons: 17\n\n\n# Course E (2021)\n\nGrade level: 4th Number of lessons: 18\n\n\n# Course F (2021)\n\nGrade level: 5th Number of lessons: 20",normalizedContent:"# å°å¿ç¼ç¨\n\n\n# code.org\n\n\n# content\n\n\n# learn the fundamentals with the self-paced courses\n\ncomputer science at home\n\n\n# teacher view\n\nyou can teach computer science\n\n\n# computer science discoveries ('21-'22)\n\nhttps://studio.code.org/s/csd1-2021 https://docs.google.com/document/d/1myjwrdyrlajwvnds3gs-3jajnhogsgmt9swo-bpysge/preview\n\n\n# pre-reader express (2021)\n\nindex   category     lesson name                     progress   key point                note\n1       sequencing   learn to drag and drop          1 - 12                              \n2       sequencing   sequencing with scrat           1 - 7                               \n3       sequencing   programming with angry birds    1 - 9      å¾ªç¯(repeat) && åæ­¥(step)   å°è¯ææè½æ³å°çæ¹æ³\n4       sequencing   programming with rey and bb-8   1 - 12     åºå(sequence)             æä¼æ¹æ³(block æå°)\n5       sequencing   programming with harvester      1 - 15     pick && debug            \n6       loops        loops with scrat                1 - 12                              instructions ä¸­çæ¡ä»¶\n7       loops        loops with laurel               1 - 13     get && goal              ææ¡ä»¶å¾åé«\n8       loops        ocean scene with loops          1 - 14     draw && jump             artistï¼æ³è±¡\n9       loops        drawing gardens with loops      1 - 9      pattern && color         \n10      events       on the move with events         1- 8       when && set && show      actions\n11      events       a royal battle with events      1 - 7      when                     å¤æçæ¸¸æ\n\n\n# computer science fundamentals\n\n\n# course a (2021)\n\ngrade level: kindergarten number of lessons: 13\n\n\n# course b (2021)\n\ngrade level: 1st number of lessons: 13\n\n\n# course c (2021)\n\ngrade level: 2nd number of lessons: 16\n\n\n# course d (2021)\n\ngrade level: 3rd number of lessons: 17\n\n\n# course e (2021)\n\ngrade level: 4th number of lessons: 18\n\n\n# course f (2021)\n\ngrade level: 5th number of lessons: 20",charsets:{cjk:!0}},{title:"Windows Wallpapers",frontmatter:{title:"Windows Wallpapers",date:"2022-03-10T00:00:00.000Z",lastmod:null,publish:!0,categories:null,keywords:null,description:null,tags:null,permalink:null},regularPath:"/blog/skills/utils/windows_wallpapers.html",relativePath:"blog/skills/utils/windows_wallpapers.md",key:"v-6cc2a996",path:"/blog/skills/utils/windows_wallpapers.html",headers:[{level:2,title:"Windows èç¦",slug:"windows-èç¦",normalizedTitle:"windows èç¦",charIndex:25},{level:2,title:"éå±å£çº¸",slug:"éå±å£çº¸",normalizedTitle:"éå±å£çº¸",charIndex:125}],headersStr:"Windows èç¦ éå±å£çº¸",content:'# Windows Wallpapers\n\n\n# Windows èç¦\n\nWindows èç¦æ¯ä¸ä¸ªéå±çé¢èæ¯éé¡¹ï¼å¯å¨éå±çé¢ä¸æ¾ç¤ºä¸åçèæ¯å¾åå¹¶ä¸ææ¶æä¾å»ºè®®ã Windows èç¦å¨æææ¡é¢çæ¬ç Windows 10 ä¸­é½å¯ç¨ã\n\n\n# éå±å£çº¸\n\nå¨ä½¿ç¨ Windows 10 çæ¶åï¼æä»¬åç° Windows 10 çéå±å£çº¸æ¯ä¼ä¸æ­èªå¨æ´æ¢çï¼èä¸è´¨éé½éå¸¸é«ï¼ç½ç½äºå¨çåå°çé£æ¯ã\n\nä¹æä»¥å¦æ­¤ï¼æ¯å ä¸º Windows 10 éå±è¢«è®¾ç½®ä¸ºäº "Windows 10èç¦"ãèç¦ä¼èªå¨ä»ç½ç»ä¸ä¸è½½å¯æç¾æçéå±å£çº¸ï¼æ¯æ¥é½ä¼æ´æ¢ã\n\nç¶èï¼å½ä½ çå°æå¼ å£çº¸ç¹å«åæ¬¢ï¼æ³è¦æ¶èä»¥åå¸¸ç¨æ¶ï¼åç°å¾®è½¯é»è®¤å¹¶æªæä¾è¿ä¸åè½ï¼ä¹å°±æ¯è¯´è¿äºå£çº¸é»è®¤å¹¶ä¸è½ä¸è½½å°æ¬å°ï¼ä½ åªè½å¨è¿å¼ å£çº¸è½®å¼çå½å¤©çå°å®ã\n\nä¸è¿ï¼Windows 10èç¦çéå±å¾çè½ç¶ä¸è½è¢«ç¨æ·ç´æ¥ä¸è½½ï¼ä½å¶å®ç³»ç»ä¼å°å®ä¸è½½ç¼å­å¨æ¬å°ç®å½ä¸­(éè¦æå¨å¢å  JPG æ JPEG åç¼)ï¼ C:\\Users\\ç¨æ·å\\AppData\\Local\\Packages\\Microsoft.Windows.ContentDeliveryManager_cw5n1h2txyewy\\LocalState\\Assets',normalizedContent:'# windows wallpapers\n\n\n# windows èç¦\n\nwindows èç¦æ¯ä¸ä¸ªéå±çé¢èæ¯éé¡¹ï¼å¯å¨éå±çé¢ä¸æ¾ç¤ºä¸åçèæ¯å¾åå¹¶ä¸ææ¶æä¾å»ºè®®ã windows èç¦å¨æææ¡é¢çæ¬ç windows 10 ä¸­é½å¯ç¨ã\n\n\n# éå±å£çº¸\n\nå¨ä½¿ç¨ windows 10 çæ¶åï¼æä»¬åç° windows 10 çéå±å£çº¸æ¯ä¼ä¸æ­èªå¨æ´æ¢çï¼èä¸è´¨éé½éå¸¸é«ï¼ç½ç½äºå¨çåå°çé£æ¯ã\n\nä¹æä»¥å¦æ­¤ï¼æ¯å ä¸º windows 10 éå±è¢«è®¾ç½®ä¸ºäº "windows 10èç¦"ãèç¦ä¼èªå¨ä»ç½ç»ä¸ä¸è½½å¯æç¾æçéå±å£çº¸ï¼æ¯æ¥é½ä¼æ´æ¢ã\n\nç¶èï¼å½ä½ çå°æå¼ å£çº¸ç¹å«åæ¬¢ï¼æ³è¦æ¶èä»¥åå¸¸ç¨æ¶ï¼åç°å¾®è½¯é»è®¤å¹¶æªæä¾è¿ä¸åè½ï¼ä¹å°±æ¯è¯´è¿äºå£çº¸é»è®¤å¹¶ä¸è½ä¸è½½å°æ¬å°ï¼ä½ åªè½å¨è¿å¼ å£çº¸è½®å¼çå½å¤©çå°å®ã\n\nä¸è¿ï¼windows 10èç¦çéå±å¾çè½ç¶ä¸è½è¢«ç¨æ·ç´æ¥ä¸è½½ï¼ä½å¶å®ç³»ç»ä¼å°å®ä¸è½½ç¼å­å¨æ¬å°ç®å½ä¸­(éè¦æå¨å¢å  jpg æ jpeg åç¼)ï¼ c:\\users\\ç¨æ·å\\appdata\\local\\packages\\microsoft.windows.contentdeliverymanager_cw5n1h2txyewy\\localstate\\assets',charsets:{cjk:!0}},{title:"utilization",frontmatter:{published:!0,title:"utilization",description:"jiao's blog",keywords:[null],categories:["utilization","devops"],permalink:"/blog/utilization/",date:"2020-04-13T00:00:00.000Z",tags:[null]},regularPath:"/blog/utilization/",relativePath:"blog/utilization/README.md",key:"v-5f9b1d8c",path:"/blog/utilization/",headersStr:null,content:"# UTILIZATION\n\n * å®è·µï¼K8S ä¹ Downward Api\n * å®è·µï¼åå»ºRedis Cluster\n * åç¼è¯Apk\n * å®è·µï¼Dind\n * å®è·µï¼Consul é¨ç½²\n * å®è·µï¼æ¹éæåGité¡¹ç®èæ¬\n * æ±å­å­ç¬¦ç¼ç åè½¬æ¢",normalizedContent:"# utilization\n\n * å®è·µï¼k8s ä¹ downward api\n * å®è·µï¼åå»ºredis cluster\n * åç¼è¯apk\n * å®è·µï¼dind\n * å®è·µï¼consul é¨ç½²\n * å®è·µï¼æ¹éæågité¡¹ç®èæ¬\n * æ±å­å­ç¬¦ç¼ç åè½¬æ¢",charsets:{cjk:!0}},{title:"æ±å­å­ç¬¦ç¼ç åè½¬æ¢",frontmatter:{title:"æ±å­å­ç¬¦ç¼ç åè½¬æ¢",date:"2020-04-13T00:00:00.000Z",description:"ä¸­æå­ç¬¦ç¼ç å®ç°æ¹æ¡",permalink:null,categories:["blog","utilization"],tags:[null]},regularPath:"/blog/utilization/ch_pinyin_tran.html",relativePath:"blog/utilization/ch_pinyin_tran.md",key:"v-0dc92f7f",path:"/blog/utilization/ch_pinyin_tran.html",headers:[{level:2,title:"æ±å­è½¬æ¼é³",slug:"æ±å­è½¬æ¼é³",normalizedTitle:"æ±å­è½¬æ¼é³",charIndex:42},{level:3,title:"Unicode å­ç¬¦å¹³é¢",slug:"unicode-å­ç¬¦å¹³é¢",normalizedTitle:"unicode å­ç¬¦å¹³é¢",charIndex:192},{level:3,title:"GB2312ãGBKãGB18030",slug:"gb2312ãgbkãgb18030",normalizedTitle:"gb2312ãgbkãgb18030",charIndex:575},{level:3,title:"Reference",slug:"reference",normalizedTitle:"reference",charIndex:1582}],headersStr:"æ±å­è½¬æ¼é³ Unicode å­ç¬¦å¹³é¢ GB2312ãGBKãGB18030 Reference",content:"# æ±å­å­ç¬¦ç¼ç åè½¬æ¢\n\n> Date: 2020-04-16 16:16\n\n\n# æ±å­è½¬æ¼é³\n\nåºæ¬æè·¯å°±æ¯ä» unicode.org è·åå°å­ç¬¦ç ä»¥åå¯¹åºçæ¼é³Unihan.zipï¼ç¶ååéè¿èæ¬è§£ææéè¦çæ ¼å¼ï¼å¹¶è¾åºä¸º dictionaryã (å¶ä¸­ï¼Unihan.zip åå®¹è¯´æè§ï¼reports/tr38)\n\nå¨ä½¿ç¨æ¶ï¼å°è¾å¥å­ç¬¦ä¸²è§£ææåä¸ªçæ±å­ï¼å»æ¥å­å¸ã\n\n\n# Unicode å­ç¬¦å¹³é¢\n\nå½åç Unicode å­ç¬¦åä¸º17ç»ç¼æï¼æ¯ç»ç§°ä¸ºå¹³é¢ï¼Planeï¼ï¼èæ¯å¹³é¢æ¥æ65536ï¼å³216ï¼ä¸ªä»£ç ç¹ãç¶èå½ååªç¨äºå°æ°å¹³é¢\n\nunicode ç¼ç éç¨äº 2bytes è¿è¡è¡¨è¾¾ãè¡¨è¾¾æ¹å¼ä¸ºï¼[0 - 0x10][0 ~ 0xFFFF], ç¬¬ä¸é¨åä¸ºå¹³é¢idï¼ç¬¬äºé¨åå°±æ¯å­ç¬¦å¼ã\n\nå¶ä¸­ï¼å¸¸è§çæï¼\n\n * 0å·å¹³é¢ï¼åºæ¬å¤æç§å¹³é¢ï¼Basic Multilingual Planeï¼ç®ç§° BMP\n * 1å·å¹³é¢ï¼å¤æç§è¡¥åå¹³é¢ï¼Supplementary Multilingual Planeï¼ç®ç§° SMP\n * 15å·å¹³é¢ï¼ä¿çä½ä¸ºç§äººä½¿ç¨åºï¼Aåºï¼ï¼Private Use Area-Aï¼ç®ç§° PUA-A\n * 16å·å¹³é¢ï¼ä¿çä½ä¸ºç§äººä½¿ç¨åºï¼Båºï¼ï¼Private Use Area-Bï¼ç®ç§° PUA-B\n\n\n# GB2312ãGBKãGB18030\n\nåçè¿ä¸ªæºä¼ï¼åéæ°å­¦ä¹ äºä¸ GB2312ãGBKãGB18030 è¿å ç§æ±å­ç¼ç çåå²ã\n\n 1. GB2312 æ (GB2312-80) æ¯ä¸­å½å½å®¶æ åç®ä½ä¸­æå­ç¬¦éï¼å¨ç§°ãä¿¡æ¯äº¤æ¢ç¨æ±å­ç¼ç å­ç¬¦éÂ·åºæ¬éãï¼åç§° GB 0ï¼ç±ä¸­å½å½å®¶æ åæ»å±åå¸ï¼1981 å¹´ 5 æ 1 æ¥å®æ½.\n\nå®éç¨ä¸¤ä¸ªå­èè¡¨ç¤ºä¸ä¸ªå­ç¬¦ï¼åæ¶å¼å®¹äº ASCIIãä¸ºäºå¼å®¹ ASCIIï¼å®è§å®ï¼ä¸ä¸ªå°äº127çå­ç¬¦çæä¹ä¸åæ¥ç¸åï¼ä½å½ä¸¤ä¸ªå¤§äº127çå­ç¬¦è¿å¨ä¸èµ·æ¶ï¼å°±è¡¨ç¤ºä¸ä¸ªæ±å­ãå°±æ¯è¯´ï¼å¯¹äºæ¯ä¸ªå­èåªä½¿ç¨å¤§äº 127 çå¼ç¨äºç¼ç ã\n\nGB2312 å±æ¶å½ 6763 ä¸ªæ±å­ï¼å¦å¤è¿æ¶å½äºåæ¬æä¸å­æ¯ãå¸èå­æ¯ãæ¥æå¹³åååçååå­æ¯ãä¿è¯­è¥¿éå°å­æ¯ç­å¨åç 682 ä¸ªå­ç¬¦ã\n\nGB2312 åºæ¬æ»¡è¶³äºæ±å­çè®¡ç®æºå¤çéè¦ï¼å®è¦çäºä¸­å½ 99.75% çä½¿ç¨é¢çãä½æ¯å´å¯¹äºäººåãå¤æ±è¯­ç­æ¹é¢åºç°çç½ç¨å­æ è½ä¸ºåï¼è¿å¯¼è´äºåæ¥ GBK å GB 18030 æ±å­å­ç¬¦éçåºç°ã\n\n 2. GBK GBK å³æ±å­åç æ©å±è§èï¼K ä¸ºæ±è¯­æ¼é³ Kuo Zhanï¼æ©å±ï¼ä¸­âæ©âå­çå£°æ¯ãè±æå¨ç§° Chinese Internal Code Specificationã\n\nGBK å±æ¶å¥ 21886 ä¸ªæ±å­åå¾å½¢ç¬¦å·ï¼GBK åä¸ä¸ GB 2312 å®å¨å¼å®¹ã\n\nGBK éç¨åå­èè¡¨ç¤ºï¼æ»ä½ç¼ç èå´ä¸º 8140-FEFE ä¹é´ï¼é¦å­èå¨ 81-FE ä¹é´ï¼å°¾å­èå¨ 40-FE ä¹é´ï¼åé¤ XX7F ä¸æ¡çº¿ã\n\n 3. GB18030 å¨ç§°æ¯ï¼å½å®¶æ å GB18030-2005ï¼æ¯ç®åä¸­å½ææ°çå­ç¬¦éï¼æ¯ GB18030-2000 çä¿®è®¢çãGB18030 å®å¨å¼å®¹ GBKï¼å±æ¶å½æ±å­70244ä¸ªã\n\nä¸ UTF-8 ç¸åï¼GB18030 éç¨å¤å­èç¼ç ï¼éç¨ 1ã2ã4 å­èåé¿ç¼ç ã\n\n * åå­èï¼å¶å¼ä» 0 å° 0x7Fï¼ä¸ ASCII ç¼ç å¼å®¹ã\n * åå­èï¼ç¬¬ä¸ä¸ªå­èçå¼ä» 0x81 å° 0xFEï¼ç¬¬äºä¸ªå­èçå¼ä» 0x40 å° 0xFE(ä¸å«0x7F)ï¼ä»¥ä¸ GBK æ åå¼å®¹ã\n * åå­èï¼ç¬¬ä¸ä¸ªå­èçå¼ä» 0x81 å° 0xFEï¼ç¬¬äºä¸ªå­èçå¼ä» 0x30 å° 0x39ï¼ç¬¬ä¸ä¸ªå­èä»0x81 å° 0xFEï¼ç¬¬åä¸ªå­èä» 0x30 å° 0x39ã\n\n\n# Reference\n\n * go è¯­è¨ç æ±å­è½¬æ¼é³ å®ç°ï¼go-pinyin\n   * ä¾èµåºï¼pinyin-data",normalizedContent:"# æ±å­å­ç¬¦ç¼ç åè½¬æ¢\n\n> date: 2020-04-16 16:16\n\n\n# æ±å­è½¬æ¼é³\n\nåºæ¬æè·¯å°±æ¯ä» unicode.org è·åå°å­ç¬¦ç ä»¥åå¯¹åºçæ¼é³unihan.zipï¼ç¶ååéè¿èæ¬è§£ææéè¦çæ ¼å¼ï¼å¹¶è¾åºä¸º dictionaryã (å¶ä¸­ï¼unihan.zip åå®¹è¯´æè§ï¼reports/tr38)\n\nå¨ä½¿ç¨æ¶ï¼å°è¾å¥å­ç¬¦ä¸²è§£ææåä¸ªçæ±å­ï¼å»æ¥å­å¸ã\n\n\n# unicode å­ç¬¦å¹³é¢\n\nå½åç unicode å­ç¬¦åä¸º17ç»ç¼æï¼æ¯ç»ç§°ä¸ºå¹³é¢ï¼planeï¼ï¼èæ¯å¹³é¢æ¥æ65536ï¼å³216ï¼ä¸ªä»£ç ç¹ãç¶èå½ååªç¨äºå°æ°å¹³é¢\n\nunicode ç¼ç éç¨äº 2bytes è¿è¡è¡¨è¾¾ãè¡¨è¾¾æ¹å¼ä¸ºï¼[0 - 0x10][0 ~ 0xffff], ç¬¬ä¸é¨åä¸ºå¹³é¢idï¼ç¬¬äºé¨åå°±æ¯å­ç¬¦å¼ã\n\nå¶ä¸­ï¼å¸¸è§çæï¼\n\n * 0å·å¹³é¢ï¼åºæ¬å¤æç§å¹³é¢ï¼basic multilingual planeï¼ç®ç§° bmp\n * 1å·å¹³é¢ï¼å¤æç§è¡¥åå¹³é¢ï¼supplementary multilingual planeï¼ç®ç§° smp\n * 15å·å¹³é¢ï¼ä¿çä½ä¸ºç§äººä½¿ç¨åºï¼aåºï¼ï¼private use area-aï¼ç®ç§° pua-a\n * 16å·å¹³é¢ï¼ä¿çä½ä¸ºç§äººä½¿ç¨åºï¼båºï¼ï¼private use area-bï¼ç®ç§° pua-b\n\n\n# gb2312ãgbkãgb18030\n\nåçè¿ä¸ªæºä¼ï¼åéæ°å­¦ä¹ äºä¸ gb2312ãgbkãgb18030 è¿å ç§æ±å­ç¼ç çåå²ã\n\n 1. gb2312 æ (gb2312-80) æ¯ä¸­å½å½å®¶æ åç®ä½ä¸­æå­ç¬¦éï¼å¨ç§°ãä¿¡æ¯äº¤æ¢ç¨æ±å­ç¼ç å­ç¬¦éÂ·åºæ¬éãï¼åç§° gb 0ï¼ç±ä¸­å½å½å®¶æ åæ»å±åå¸ï¼1981 å¹´ 5 æ 1 æ¥å®æ½.\n\nå®éç¨ä¸¤ä¸ªå­èè¡¨ç¤ºä¸ä¸ªå­ç¬¦ï¼åæ¶å¼å®¹äº asciiãä¸ºäºå¼å®¹ asciiï¼å®è§å®ï¼ä¸ä¸ªå°äº127çå­ç¬¦çæä¹ä¸åæ¥ç¸åï¼ä½å½ä¸¤ä¸ªå¤§äº127çå­ç¬¦è¿å¨ä¸èµ·æ¶ï¼å°±è¡¨ç¤ºä¸ä¸ªæ±å­ãå°±æ¯è¯´ï¼å¯¹äºæ¯ä¸ªå­èåªä½¿ç¨å¤§äº 127 çå¼ç¨äºç¼ç ã\n\ngb2312 å±æ¶å½ 6763 ä¸ªæ±å­ï¼å¦å¤è¿æ¶å½äºåæ¬æä¸å­æ¯ãå¸èå­æ¯ãæ¥æå¹³åååçååå­æ¯ãä¿è¯­è¥¿éå°å­æ¯ç­å¨åç 682 ä¸ªå­ç¬¦ã\n\ngb2312 åºæ¬æ»¡è¶³äºæ±å­çè®¡ç®æºå¤çéè¦ï¼å®è¦çäºä¸­å½ 99.75% çä½¿ç¨é¢çãä½æ¯å´å¯¹äºäººåãå¤æ±è¯­ç­æ¹é¢åºç°çç½ç¨å­æ è½ä¸ºåï¼è¿å¯¼è´äºåæ¥ gbk å gb 18030 æ±å­å­ç¬¦éçåºç°ã\n\n 2. gbk gbk å³æ±å­åç æ©å±è§èï¼k ä¸ºæ±è¯­æ¼é³ kuo zhanï¼æ©å±ï¼ä¸­âæ©âå­çå£°æ¯ãè±æå¨ç§° chinese internal code specificationã\n\ngbk å±æ¶å¥ 21886 ä¸ªæ±å­åå¾å½¢ç¬¦å·ï¼gbk åä¸ä¸ gb 2312 å®å¨å¼å®¹ã\n\ngbk éç¨åå­èè¡¨ç¤ºï¼æ»ä½ç¼ç èå´ä¸º 8140-fefe ä¹é´ï¼é¦å­èå¨ 81-fe ä¹é´ï¼å°¾å­èå¨ 40-fe ä¹é´ï¼åé¤ xx7f ä¸æ¡çº¿ã\n\n 3. gb18030 å¨ç§°æ¯ï¼å½å®¶æ å gb18030-2005ï¼æ¯ç®åä¸­å½ææ°çå­ç¬¦éï¼æ¯ gb18030-2000 çä¿®è®¢çãgb18030 å®å¨å¼å®¹ gbkï¼å±æ¶å½æ±å­70244ä¸ªã\n\nä¸ utf-8 ç¸åï¼gb18030 éç¨å¤å­èç¼ç ï¼éç¨ 1ã2ã4 å­èåé¿ç¼ç ã\n\n * åå­èï¼å¶å¼ä» 0 å° 0x7fï¼ä¸ ascii ç¼ç å¼å®¹ã\n * åå­èï¼ç¬¬ä¸ä¸ªå­èçå¼ä» 0x81 å° 0xfeï¼ç¬¬äºä¸ªå­èçå¼ä» 0x40 å° 0xfe(ä¸å«0x7f)ï¼ä»¥ä¸ gbk æ åå¼å®¹ã\n * åå­èï¼ç¬¬ä¸ä¸ªå­èçå¼ä» 0x81 å° 0xfeï¼ç¬¬äºä¸ªå­èçå¼ä» 0x30 å° 0x39ï¼ç¬¬ä¸ä¸ªå­èä»0x81 å° 0xfeï¼ç¬¬åä¸ªå­èä» 0x30 å° 0x39ã\n\n\n# reference\n\n * go è¯­è¨ç æ±å­è½¬æ¼é³ å®ç°ï¼go-pinyin\n   * ä¾èµåºï¼pinyin-data",charsets:{cjk:!0}},{title:"åç¼è¯apk",frontmatter:{title:"åç¼è¯apk",date:"2020-06-23T00:00:00.000Z",description:"åç¼è¯apk",categories:["blog"],tags:[null],permalink:null},regularPath:"/blog/utilization/foo_apk_reverse.html",relativePath:"blog/utilization/foo_apk_reverse.md",key:"v-25c8ca33",path:"/blog/utilization/foo_apk_reverse.html",headers:[{level:2,title:"åç¼è¯å",slug:"åç¼è¯å",normalizedTitle:"åç¼è¯å",charIndex:13},{level:2,title:"åç¼è¯dex",slug:"åç¼è¯dex",normalizedTitle:"åç¼è¯dex",charIndex:174},{level:2,title:"èªç±ä¸ç",slug:"èªç±ä¸ç",normalizedTitle:"èªç±ä¸ç",charIndex:259},{level:2,title:"éæ°æå",slug:"éæ°æå",normalizedTitle:"éæ°æå",charIndex:296},{level:2,title:"éæ°ç­¾å",slug:"éæ°ç­¾å",normalizedTitle:"éæ°ç­¾å",charIndex:336}],headersStr:"åç¼è¯å åç¼è¯dex èªç±ä¸ç éæ°æå éæ°ç­¾å",content:"# åç¼è¯apk\n\n\n# åç¼è¯å\n\n    apktool d -f [å¾åç¼è¯çapk] -o [åç¼è¯ä¹åå­æ¾æä»¶å¤¹] \n    è¯´æï¼\n        -s åæ°å¯ä»¥ææè·³è¿ dex è½¬æ smali çæ­¥éª¤; \n           ä¸å¸¦æ­¤åæ°æ¶ï¼çæçæ¯ smali æä»¶éå, å¸¦ä¸æ¶çæ dex æä»¶\n\n\n1\n2\n3\n4\n\n\n\n# åç¼è¯dex\n\n    dex2jar-2.0 [dexæä»¶] \n    è¯´æï¼\n        çæjaræä»¶ï¼å¯ä»¥ä½¿ç¨ jd-gui æå¼\n\n\n1\n2\n3\n\n\n\n# èªç±ä¸ç\n\n    jd-gui æå¼ jar æä»¶ \n\n\n1\n\n\n\n# éæ°æå\n\n    apktool.bat b [æä»¶å¤¹] \n\n\n1\n\n\n\n# éæ°ç­¾å\n\n    java -jar signapk.jar testkey.x509.pem testkey.pk8 test.zip test_signed.zip \n\n\n1\n",normalizedContent:"# åç¼è¯apk\n\n\n# åç¼è¯å\n\n    apktool d -f [å¾åç¼è¯çapk] -o [åç¼è¯ä¹åå­æ¾æä»¶å¤¹] \n    è¯´æï¼\n        -s åæ°å¯ä»¥ææè·³è¿ dex è½¬æ smali çæ­¥éª¤; \n           ä¸å¸¦æ­¤åæ°æ¶ï¼çæçæ¯ smali æä»¶éå, å¸¦ä¸æ¶çæ dex æä»¶\n\n\n1\n2\n3\n4\n\n\n\n# åç¼è¯dex\n\n    dex2jar-2.0 [dexæä»¶] \n    è¯´æï¼\n        çæjaræä»¶ï¼å¯ä»¥ä½¿ç¨ jd-gui æå¼\n\n\n1\n2\n3\n\n\n\n# èªç±ä¸ç\n\n    jd-gui æå¼ jar æä»¶ \n\n\n1\n\n\n\n# éæ°æå\n\n    apktool.bat b [æä»¶å¤¹] \n\n\n1\n\n\n\n# éæ°ç­¾å\n\n    java -jar signapk.jar testkey.x509.pem testkey.pk8 test.zip test_signed.zip \n\n\n1\n",charsets:{cjk:!0}},{title:"å®è·µï¼æ¹éæågité¡¹ç®èæ¬",frontmatter:{title:"å®è·µï¼æ¹éæågité¡¹ç®èæ¬",date:"2021-01-21T00:00:00.000Z",description:"å®è·µï¼æ¹éæågité¡¹ç®èæ¬",permalink:null,categories:["blog","utilization"],tags:[null]},regularPath:"/blog/utilization/foo_batch_pulls.html",relativePath:"blog/utilization/foo_batch_pulls.md",key:"v-0b34dfc2",path:"/blog/utilization/foo_batch_pulls.html",headersStr:null,content:'# å®è·µï¼æ¹éæågité¡¹ç®èæ¬\n\n> repo.sh\n\n#! /bin/bash\n#\n# repo.sh\n#\n# Distributed under terms of the MIT license.\n#\n\n# ç»æ\n#   project \n#   dirname project project project\n\n#!/bin/bash\nset -xu \n\npwd= `cd $(dir $0);pwd`\nstamp=`date +"%Y%m%d%H%M%S"`\n\ncat > dirs.dat <<EOF\n    common\n    vendor\n    samples\n    tools\n    config\n    docs\n    monitor svcwatcher svcmonitor\nEOF\n\ncase $1 in\n"clone")\n# git clone http æ¶è´¦å·éç @ éè¦æ¿æ¢æ %40, ä¸ç¶å°±ä¼æåç»­è¯å«ä¸ºurl\ncat dirs.dat | awk \'{clone="git clone http://{user}:{pass}@gitlab.xxxxxx.com/repository/";if(NF>1){cmd="mkdir -p "$1"";system(cmd);for(i=2;i<=NF;i++){cmd=clone$1"/"$i".git ./"$1"/"$i;print(cmd);system(cmd);}}else{cmd=clone$1".git";print(cmd);system(cmd);}}\';\n;;\n"update")\necho "=> cmd $1 is valid"\ncat dirs.dat | awk \'{update="; git pull;";if(NF>1){for(i=2;i<=NF;i++){cmd="cd "$1"/"$i update"cd ..";print(cmd);system(cmd);}}else{cmd="cd "$1 update" cd ..";print(cmd);system(cmd);}}\';\n;;\n*)\necho "=> cmd $1 is invalid"\n;;\nesac\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n',normalizedContent:'# å®è·µï¼æ¹éæågité¡¹ç®èæ¬\n\n> repo.sh\n\n#! /bin/bash\n#\n# repo.sh\n#\n# distributed under terms of the mit license.\n#\n\n# ç»æ\n#   project \n#   dirname project project project\n\n#!/bin/bash\nset -xu \n\npwd= `cd $(dir $0);pwd`\nstamp=`date +"%y%m%d%h%m%s"`\n\ncat > dirs.dat <<eof\n    common\n    vendor\n    samples\n    tools\n    config\n    docs\n    monitor svcwatcher svcmonitor\neof\n\ncase $1 in\n"clone")\n# git clone http æ¶è´¦å·éç @ éè¦æ¿æ¢æ %40, ä¸ç¶å°±ä¼æåç»­è¯å«ä¸ºurl\ncat dirs.dat | awk \'{clone="git clone http://{user}:{pass}@gitlab.xxxxxx.com/repository/";if(nf>1){cmd="mkdir -p "$1"";system(cmd);for(i=2;i<=nf;i++){cmd=clone$1"/"$i".git ./"$1"/"$i;print(cmd);system(cmd);}}else{cmd=clone$1".git";print(cmd);system(cmd);}}\';\n;;\n"update")\necho "=> cmd $1 is valid"\ncat dirs.dat | awk \'{update="; git pull;";if(nf>1){for(i=2;i<=nf;i++){cmd="cd "$1"/"$i update"cd ..";print(cmd);system(cmd);}}else{cmd="cd "$1 update" cd ..";print(cmd);system(cmd);}}\';\n;;\n*)\necho "=> cmd $1 is invalid"\n;;\nesac\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n',charsets:{cjk:!0}},{title:"å®è·µï¼consul é¨ç½²",frontmatter:{title:"å®è·µï¼consul é¨ç½²",date:"2020-04-13T00:00:00.000Z",description:"å®è·µï¼consul é¨ç½²",permalink:null,categories:["blog","utilization"],tags:[null]},regularPath:"/blog/utilization/foo_consul.html",relativePath:"blog/utilization/foo_consul.md",key:"v-9af6bf82",path:"/blog/utilization/foo_consul.html",headers:[{level:2,title:"é¨ç½²",slug:"é¨ç½²",normalizedTitle:"é¨ç½²",charIndex:12},{level:2,title:"consul åè½",slug:"consul-åè½",normalizedTitle:"consul åè½",charIndex:1329},{level:3,title:"åè½æ¦è¿°",slug:"åè½æ¦è¿°",normalizedTitle:"åè½æ¦è¿°",charIndex:1343},{level:3,title:"çè§£",slug:"çè§£",normalizedTitle:"çè§£",charIndex:2571},{level:2,title:"agent: client & server",slug:"agent-client-server",normalizedTitle:"agent: client &amp; server",charIndex:null},{level:3,title:"agent (client)",slug:"agent-client",normalizedTitle:"agent (client)",charIndex:3156},{level:3,title:"agent -server",slug:"agent-server",normalizedTitle:"agent -server",charIndex:3219},{level:3,title:"Appendix",slug:"appendix",normalizedTitle:"appendix",charIndex:5042}],headersStr:"é¨ç½² consul åè½ åè½æ¦è¿° çè§£ agent: client & server agent (client) agent -server Appendix",content:'# å®è·µï¼consul é¨ç½²\n\n\n# é¨ç½²\n\n * dockerfile\n   * \'docker-compose.yml\'\n * å½ä»¤\n   \n   è¿è¡éç¾¤ï¼docker-compose up -d \n   å¯å¨éç¾¤ï¼docker-compose start\n   åæ­¢éç¾¤ï¼docker-compose stop\n   æ¸çéç¾¤ï¼docker-compose down \n   æ¥çéç¾¤ï¼docker-compose ps\n   æ¥çå®¹å¨ipï¼\n       sudo docker ps | grep consul | awk \'{print($NF)}\' | xargs -t -I {} sudo docker inspect --format \'{{with index .NetworkSettings.Networks "consul_consul-demo" }}{{.IPAddress}}{{end}}\' {}\n   \n       sudo docker ps | grep consul | awk \'{print($NF)}\' | xargs -t -I {} sudo docker inspect --format \'{{ $network := index .NetworkSettings.Networks "consul_consul-demo" }}{{ $network.IPAddress}}\' {}\n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   7\n   8\n   9\n   \n * consul å¸¸ç¨éç½®\n   \n       -server ï¼ å®ä¹agentè¿è¡å¨serveræ¨¡å¼\n       -bootstrap-expect ï¼å¨ä¸ä¸ªdatacenterä¸­æææä¾çserverèç¹æ°ç®ï¼å½è¯¥å¼æä¾çæ¶åï¼consulä¸ç´ç­å°è¾¾å°æå®severæ°ç®çåæä¼å¼å¯¼æ´ä¸ªéç¾¤ï¼è¯¥æ è®°ä¸è½åbootstrapå±ç¨\n       -bindï¼è¯¥å°åç¨æ¥å¨éç¾¤åé¨çéè®¯ï¼éç¾¤åçææèç¹å°å°åé½å¿é¡»æ¯å¯è¾¾çï¼é»è®¤æ¯0.0.0.0\n       -nodeï¼èç¹å¨éç¾¤ä¸­çåç§°ï¼å¨ä¸ä¸ªéç¾¤ä¸­å¿é¡»æ¯å¯ä¸çï¼é»è®¤æ¯è¯¥èç¹çä¸»æºå\n       -ui-dirï¼ æä¾å­æ¾web uièµæºçè·¯å¾ï¼è¯¥ç®å½å¿é¡»æ¯å¯è¯»ç\n       -rejoinï¼ä½¿consulå¿½ç¥ååçç¦»å¼ï¼å¨åæ¬¡å¯å¨åä»æ§å°è¯å å¥éç¾¤ä¸­ã\n       -config-dirï¼ï¼éç½®æä»¶ç®å½ï¼éé¢ææä»¥.jsonç»å°¾çæä»¶é½ä¼è¢«å è½½\n       -clientï¼consulæå¡ä¾¦å¬å°åï¼è¿ä¸ªå°åæä¾HTTPãDNSãRPCç­æå¡ï¼é»è®¤æ¯127.0.0.1æä»¥ä¸å¯¹å¤æä¾æå¡ï¼å¦æä½ è¦å¯¹å¤æä¾æå¡æ¹æ0.0.0.0\n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   7\n   8\n   \n * webé¡µé¢\n   * localhost:8500\n * æ³¨æ\n   * k8sé¨ç½²æ¶ï¼åºå½é¨ç½² server ä¸º statefulï¼client ä¸º daemonset\n\n\n# consul åè½\n\n\n# åè½æ¦è¿°\n\n * æ¥è¯¢\n   * ä¸è¬æåµä¸ææ agent æ¶å°çæ¥è¯¢ä»¥åä¿®æ¹è¯·æ±ï¼é½ä¼è½¬åå° leaderãä½å¯ä»¥éè¿éç½®ä¸è´æ§ç­ç¥ï¼ä½¿å¾ server å³å¯ååºæ¥è¯¢ï¼ä¸å¿å°è½¬è¾¾ leaderã\n   * ç¸å³æè¿°ï¼\n     * reference: internals/consensus\n     \n         When an RPC request arrives at a non-leader server, the request is forwarded to the leader. If the RPC is a query type, meaning it is read-only, the leader generates the result based on the current state of the FSM. If the RPC is a transaction type, meaning it modifies state, the leader generates a new log entry and applies it using Raft.\n     \n     \n     1\n     \n   * ç¼å­\n     * agent é»è®¤æ¯æ¯æç¼å­çï¼ä½éè¦è¯·æ±æ¶æå®æ¯å¦ä½¿ç¨ä»¥åç¸åºçç­ç¥\n     * ç¸å³æè¿°ï¼\n       * reference: connect/index\n       \n           To enable microsecond-speed responses on agent Connect API endpoints, the Consul agent locally caches most Connect-related data and sets up background blocking queries against the server to update the cache in the background. \n       \n       \n       1\n       \n   * blocking query\n   * k8s/run\n * æ³¨å(æå¡)\n   * ç±ç¨æ·å agent (åå«serverãclient) åèµ·æ³¨åè¯·æ±ï¼åæ¶å¨è¿ä¸ª agent ä¸æä¹åè¿ä¸ªæ³¨åä¿¡æ¯ï¼åæ¶å¯å¨ä¸ä¸ª goroutine è¿è¡å¥åº·æ£æ¥ãå¹¶å°ï¼æ³¨åä¿¡æ¯åæ­¥ç»ææ server å¹¶ç± server è¿è¡æä¹å(è¿ä¸ªè¿ç¨æ¶å server ä¹é´ä¿¡æ¯ä¸è´æ§çå¤ç)ãåæ¶ï¼å°å¥åº·æ£æ¥çç»æåæ­¥ç» server èç¹ã ï¼ï¼ï¼ï¼ server å client ä¹é´å¥åº·æ£æ¥ä¿¡æ¯çåæ­¥è¿ç¨ ï¼ï¼ï¼\n * å¥åº·æ£æ¥\n   * ç±æ¥æ¶å°ç¨æ·åèµ·çæ³¨å agent è¿è¡ãé´éç±æ³¨åæ¶çå¥åº·æ£æ¥ç¸å³åæ°æå®ï¼ä¸è¬ä¸º 10s\n\n\n# çè§£\n\n * åä¸º agentï¼client å server å¤§é¨ååè½é½æ¯ä¸æ ·çï¼é¤äºç±äº client ä¸åä¸_éä¸¾_ ä»¥å ç±ä¹å¸¦æ¥çä¸äºä¸æ¯æçè¡ä¸ºï¼æ°æ®æä¹å\n * ä¸ºä»ä¹ agent ä¼æ server å client ä¹åï¼\n   * å½ server æ°è¿å¤æ¶ï¼ä¸è´æ§çå¤çä¼å ç¨å¤§éèµæºï¼å¹¶ä¸è¾æ¢çè¾¾å°ä¸è´æ§ãæä»¥ï¼server ä¸è¬ä¸º 3~5 ä¸ªã\n   * ä½æ¯å½ç¨æ·çæå¡æ°éè¾å¤§æ¶ï¼å°éç server åä¼å¸¦æ¥å¤çç¨æ·è¯·æ±çæ§è½é®é¢ï¼å¦ï¼åä¸ª server è½ä¿æçè¿æ¥æ°ãserver çæºå¨è´è½½ï¼.etc\n   * æä»¥éè¦å·æ server çå¤§é¨ååè½ï¼ä½åä¸åä¸éä¸¾ä»¥åä¸è´æ§ç»´æç agentï¼ä¹å°±æ¯ï¼agent client\n     * agent client ä¹è¦æææè¯·æ±è½¬åå° server è¿è¡å¤ççï¼server ä¸æ¯ä¾ç¶ååå¾å¤§åï¼\n       * è¿éå°±è¦æå°ï¼agent ä¹é´çéä¿¡æ¯èµ° 8300 ç«¯å£ï¼éè¿ç»´æé¿è¿æ¥(ä¹æè¿æ¥æ± )è¿è¡çï¼èç¨æ·è¯·æ± agent ä¸è¬æ¯éè¿ http è¯·æ±ã\n       * æåå°±æ¯ agent client å¯ä»¥åæ£å¥åº·æ£æ¥çååï¼ç¹å«æ¯å¨ä½¿ç¨ç¼å­çæåµä¸ï¼å¯ä»¥å¾å¤§ç¨åº¦ä¸åè½» server ååã\n\n\n# agent: client & server\n\n\n# agent (client)\n\nå®¢æ·ç«¯ä½¿ç¨ "hashicorp/consul/api" ä¸­æä¾çæ¹å¼è®¿é® agent or agent -server, é»è®¤æåµä¸æ¯è®¿é®ï¼http://127.0.0.1:8500\n\nå¨åèµ·è¯·æ±æ¶ï¼éè¿ QueryOptions.UseCache åæ°æ¥æå®æ¯å¦ä½¿ç¨ç¼å­ï¼éè¿ consul/agent/cache:RegisterOptions.Refresh æå®å·æ°ç­ç¥ã ç¼å­ç¹æ§è¯¦è§:api/features/caching\n\n\n# agent -server\n\nä½¿ç¨ "github.com/mitchellh/cli"ï¼ä½¿å¾ consul ç agent å¯å¨æ¶å¯ä»¥å¤ççå½ä»¤è¡éä¸­å¨ "consul/command/commands_oss.go"ã\n\nä»¥ agent ä¸ºä¾ï¼å®çä¸»è¦å¤çé»è¾å¨ï¼"consul/command/agent", æ­¤åå³äº agent çå·ä½å¤çä¼è½¬å° "consul/agent/agent.go" è¿è¡å¤çã\n\nhttps://www.consul.io/docs/internals/anti-entropy.html#catalog catalog æ¯ consul æå¡åç°åè½çåºç³ The catalog maintains the high-level view of the cluster, including which services are available, which nodes run those services, health information, and more.\n\nServices and checks within the context of the catalog have a much more limited set of fields when compared with the agent. This is because the catalog is only responsible for recording and returning information about services, nodes, and health.\n\nThe catalog is maintained only by server nodes. This is because the catalog is replicated via the Raft log to provide a consolidated and consistent view of the cluster.\n\nhttps://www.consul.io/docs/internals/anti-entropy.html#agent\n\nEach Consul agent maintains its own set of service and check registrations as well as health information. The agents are responsible for executing their own health checks and updating their local state.\n\nServices and checks within the context of an agent have a rich set of configuration options available. This is because the agent is responsible for generating information about its services and their health through the use of health checks.\n\nConsul has a clear separation between the global service catalog and the agent\'s local state as discussed above. The anti-entropy mechanism reconciles these two views of the world: anti-entropy is a synchronization of the local agent state and the catalog.\n\n\n# Appendix\n\n> docker-compose.yml\n\n# source: https://github.com/hashicorp/consul/blob/master/demo/docker-compose-cluster/docker-compose.yml\n\nversion: \'3\'\n\nservices:\n\n  consul-agent-1: &consul-agent\n    image: consul:latest\n    networks:\n      - consul-demo\n    command: "agent -retry-join consul-server-bootstrap -client 0.0.0.0"\n\n  consul-agent-2:\n    <<: *consul-agent\n\n  consul-agent-3:\n    <<: *consul-agent\n\n  consul-server-1: &consul-server\n    <<: *consul-agent\n    command: "agent -server -retry-join consul-server-bootstrap -client 0.0.0.0"\n\n  consul-server-2:\n    <<: *consul-server\n\n  consul-server-bootstrap:\n    <<: *consul-agent\n    ports:\n      - "8400:8400"\n      - "8500:8500"\n      - "8600:8600"\n      - "8600:8600/udp"\n    command: "agent -server -bootstrap-expect 3 -ui -client 0.0.0.0"\n\nnetworks:\n  consul-demo:\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n',normalizedContent:'# å®è·µï¼consul é¨ç½²\n\n\n# é¨ç½²\n\n * dockerfile\n   * \'docker-compose.yml\'\n * å½ä»¤\n   \n   è¿è¡éç¾¤ï¼docker-compose up -d \n   å¯å¨éç¾¤ï¼docker-compose start\n   åæ­¢éç¾¤ï¼docker-compose stop\n   æ¸çéç¾¤ï¼docker-compose down \n   æ¥çéç¾¤ï¼docker-compose ps\n   æ¥çå®¹å¨ipï¼\n       sudo docker ps | grep consul | awk \'{print($nf)}\' | xargs -t -i {} sudo docker inspect --format \'{{with index .networksettings.networks "consul_consul-demo" }}{{.ipaddress}}{{end}}\' {}\n   \n       sudo docker ps | grep consul | awk \'{print($nf)}\' | xargs -t -i {} sudo docker inspect --format \'{{ $network := index .networksettings.networks "consul_consul-demo" }}{{ $network.ipaddress}}\' {}\n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   7\n   8\n   9\n   \n * consul å¸¸ç¨éç½®\n   \n       -server ï¼ å®ä¹agentè¿è¡å¨serveræ¨¡å¼\n       -bootstrap-expect ï¼å¨ä¸ä¸ªdatacenterä¸­æææä¾çserverèç¹æ°ç®ï¼å½è¯¥å¼æä¾çæ¶åï¼consulä¸ç´ç­å°è¾¾å°æå®severæ°ç®çåæä¼å¼å¯¼æ´ä¸ªéç¾¤ï¼è¯¥æ è®°ä¸è½åbootstrapå±ç¨\n       -bindï¼è¯¥å°åç¨æ¥å¨éç¾¤åé¨çéè®¯ï¼éç¾¤åçææèç¹å°å°åé½å¿é¡»æ¯å¯è¾¾çï¼é»è®¤æ¯0.0.0.0\n       -nodeï¼èç¹å¨éç¾¤ä¸­çåç§°ï¼å¨ä¸ä¸ªéç¾¤ä¸­å¿é¡»æ¯å¯ä¸çï¼é»è®¤æ¯è¯¥èç¹çä¸»æºå\n       -ui-dirï¼ æä¾å­æ¾web uièµæºçè·¯å¾ï¼è¯¥ç®å½å¿é¡»æ¯å¯è¯»ç\n       -rejoinï¼ä½¿consulå¿½ç¥ååçç¦»å¼ï¼å¨åæ¬¡å¯å¨åä»æ§å°è¯å å¥éç¾¤ä¸­ã\n       -config-dirï¼ï¼éç½®æä»¶ç®å½ï¼éé¢ææä»¥.jsonç»å°¾çæä»¶é½ä¼è¢«å è½½\n       -clientï¼consulæå¡ä¾¦å¬å°åï¼è¿ä¸ªå°åæä¾httpãdnsãrpcç­æå¡ï¼é»è®¤æ¯127.0.0.1æä»¥ä¸å¯¹å¤æä¾æå¡ï¼å¦æä½ è¦å¯¹å¤æä¾æå¡æ¹æ0.0.0.0\n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   7\n   8\n   \n * webé¡µé¢\n   * localhost:8500\n * æ³¨æ\n   * k8sé¨ç½²æ¶ï¼åºå½é¨ç½² server ä¸º statefulï¼client ä¸º daemonset\n\n\n# consul åè½\n\n\n# åè½æ¦è¿°\n\n * æ¥è¯¢\n   * ä¸è¬æåµä¸ææ agent æ¶å°çæ¥è¯¢ä»¥åä¿®æ¹è¯·æ±ï¼é½ä¼è½¬åå° leaderãä½å¯ä»¥éè¿éç½®ä¸è´æ§ç­ç¥ï¼ä½¿å¾ server å³å¯ååºæ¥è¯¢ï¼ä¸å¿å°è½¬è¾¾ leaderã\n   * ç¸å³æè¿°ï¼\n     * reference: internals/consensus\n     \n         when an rpc request arrives at a non-leader server, the request is forwarded to the leader. if the rpc is a query type, meaning it is read-only, the leader generates the result based on the current state of the fsm. if the rpc is a transaction type, meaning it modifies state, the leader generates a new log entry and applies it using raft.\n     \n     \n     1\n     \n   * ç¼å­\n     * agent é»è®¤æ¯æ¯æç¼å­çï¼ä½éè¦è¯·æ±æ¶æå®æ¯å¦ä½¿ç¨ä»¥åç¸åºçç­ç¥\n     * ç¸å³æè¿°ï¼\n       * reference: connect/index\n       \n           to enable microsecond-speed responses on agent connect api endpoints, the consul agent locally caches most connect-related data and sets up background blocking queries against the server to update the cache in the background. \n       \n       \n       1\n       \n   * blocking query\n   * k8s/run\n * æ³¨å(æå¡)\n   * ç±ç¨æ·å agent (åå«serverãclient) åèµ·æ³¨åè¯·æ±ï¼åæ¶å¨è¿ä¸ª agent ä¸æä¹åè¿ä¸ªæ³¨åä¿¡æ¯ï¼åæ¶å¯å¨ä¸ä¸ª goroutine è¿è¡å¥åº·æ£æ¥ãå¹¶å°ï¼æ³¨åä¿¡æ¯åæ­¥ç»ææ server å¹¶ç± server è¿è¡æä¹å(è¿ä¸ªè¿ç¨æ¶å server ä¹é´ä¿¡æ¯ä¸è´æ§çå¤ç)ãåæ¶ï¼å°å¥åº·æ£æ¥çç»æåæ­¥ç» server èç¹ã ï¼ï¼ï¼ï¼ server å client ä¹é´å¥åº·æ£æ¥ä¿¡æ¯çåæ­¥è¿ç¨ ï¼ï¼ï¼\n * å¥åº·æ£æ¥\n   * ç±æ¥æ¶å°ç¨æ·åèµ·çæ³¨å agent è¿è¡ãé´éç±æ³¨åæ¶çå¥åº·æ£æ¥ç¸å³åæ°æå®ï¼ä¸è¬ä¸º 10s\n\n\n# çè§£\n\n * åä¸º agentï¼client å server å¤§é¨ååè½é½æ¯ä¸æ ·çï¼é¤äºç±äº client ä¸åä¸_éä¸¾_ ä»¥å ç±ä¹å¸¦æ¥çä¸äºä¸æ¯æçè¡ä¸ºï¼æ°æ®æä¹å\n * ä¸ºä»ä¹ agent ä¼æ server å client ä¹åï¼\n   * å½ server æ°è¿å¤æ¶ï¼ä¸è´æ§çå¤çä¼å ç¨å¤§éèµæºï¼å¹¶ä¸è¾æ¢çè¾¾å°ä¸è´æ§ãæä»¥ï¼server ä¸è¬ä¸º 3~5 ä¸ªã\n   * ä½æ¯å½ç¨æ·çæå¡æ°éè¾å¤§æ¶ï¼å°éç server åä¼å¸¦æ¥å¤çç¨æ·è¯·æ±çæ§è½é®é¢ï¼å¦ï¼åä¸ª server è½ä¿æçè¿æ¥æ°ãserver çæºå¨è´è½½ï¼.etc\n   * æä»¥éè¦å·æ server çå¤§é¨ååè½ï¼ä½åä¸åä¸éä¸¾ä»¥åä¸è´æ§ç»´æç agentï¼ä¹å°±æ¯ï¼agent client\n     * agent client ä¹è¦æææè¯·æ±è½¬åå° server è¿è¡å¤ççï¼server ä¸æ¯ä¾ç¶ååå¾å¤§åï¼\n       * è¿éå°±è¦æå°ï¼agent ä¹é´çéä¿¡æ¯èµ° 8300 ç«¯å£ï¼éè¿ç»´æé¿è¿æ¥(ä¹æè¿æ¥æ± )è¿è¡çï¼èç¨æ·è¯·æ± agent ä¸è¬æ¯éè¿ http è¯·æ±ã\n       * æåå°±æ¯ agent client å¯ä»¥åæ£å¥åº·æ£æ¥çååï¼ç¹å«æ¯å¨ä½¿ç¨ç¼å­çæåµä¸ï¼å¯ä»¥å¾å¤§ç¨åº¦ä¸åè½» server ååã\n\n\n# agent: client & server\n\n\n# agent (client)\n\nå®¢æ·ç«¯ä½¿ç¨ "hashicorp/consul/api" ä¸­æä¾çæ¹å¼è®¿é® agent or agent -server, é»è®¤æåµä¸æ¯è®¿é®ï¼http://127.0.0.1:8500\n\nå¨åèµ·è¯·æ±æ¶ï¼éè¿ queryoptions.usecache åæ°æ¥æå®æ¯å¦ä½¿ç¨ç¼å­ï¼éè¿ consul/agent/cache:registeroptions.refresh æå®å·æ°ç­ç¥ã ç¼å­ç¹æ§è¯¦è§:api/features/caching\n\n\n# agent -server\n\nä½¿ç¨ "github.com/mitchellh/cli"ï¼ä½¿å¾ consul ç agent å¯å¨æ¶å¯ä»¥å¤ççå½ä»¤è¡éä¸­å¨ "consul/command/commands_oss.go"ã\n\nä»¥ agent ä¸ºä¾ï¼å®çä¸»è¦å¤çé»è¾å¨ï¼"consul/command/agent", æ­¤åå³äº agent çå·ä½å¤çä¼è½¬å° "consul/agent/agent.go" è¿è¡å¤çã\n\nhttps://www.consul.io/docs/internals/anti-entropy.html#catalog catalog æ¯ consul æå¡åç°åè½çåºç³ the catalog maintains the high-level view of the cluster, including which services are available, which nodes run those services, health information, and more.\n\nservices and checks within the context of the catalog have a much more limited set of fields when compared with the agent. this is because the catalog is only responsible for recording and returning information about services, nodes, and health.\n\nthe catalog is maintained only by server nodes. this is because the catalog is replicated via the raft log to provide a consolidated and consistent view of the cluster.\n\nhttps://www.consul.io/docs/internals/anti-entropy.html#agent\n\neach consul agent maintains its own set of service and check registrations as well as health information. the agents are responsible for executing their own health checks and updating their local state.\n\nservices and checks within the context of an agent have a rich set of configuration options available. this is because the agent is responsible for generating information about its services and their health through the use of health checks.\n\nconsul has a clear separation between the global service catalog and the agent\'s local state as discussed above. the anti-entropy mechanism reconciles these two views of the world: anti-entropy is a synchronization of the local agent state and the catalog.\n\n\n# appendix\n\n> docker-compose.yml\n\n# source: https://github.com/hashicorp/consul/blob/master/demo/docker-compose-cluster/docker-compose.yml\n\nversion: \'3\'\n\nservices:\n\n  consul-agent-1: &consul-agent\n    image: consul:latest\n    networks:\n      - consul-demo\n    command: "agent -retry-join consul-server-bootstrap -client 0.0.0.0"\n\n  consul-agent-2:\n    <<: *consul-agent\n\n  consul-agent-3:\n    <<: *consul-agent\n\n  consul-server-1: &consul-server\n    <<: *consul-agent\n    command: "agent -server -retry-join consul-server-bootstrap -client 0.0.0.0"\n\n  consul-server-2:\n    <<: *consul-server\n\n  consul-server-bootstrap:\n    <<: *consul-agent\n    ports:\n      - "8400:8400"\n      - "8500:8500"\n      - "8600:8600"\n      - "8600:8600/udp"\n    command: "agent -server -bootstrap-expect 3 -ui -client 0.0.0.0"\n\nnetworks:\n  consul-demo:\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n',charsets:{cjk:!0}},{title:"å®è·µï¼DIND",frontmatter:{title:"å®è·µï¼DIND",date:"2021-01-13T00:00:00.000Z",description:"å®è·µï¼DIND",keywords:["dind","jenkins"],permalink:null,categories:["blog","utilization"],tags:[null]},regularPath:"/blog/utilization/foo_docker_jenkins_dind.html",relativePath:"blog/utilization/foo_docker_jenkins_dind.md",key:"v-ccf5212a",path:"/blog/utilization/foo_docker_jenkins_dind.html",headers:[{level:2,title:"registry",slug:"registry",normalizedTitle:"registry",charIndex:14},{level:2,title:"jenkins",slug:"jenkins",normalizedTitle:"jenkins",charIndex:291},{level:2,title:"Appendix: ç¸å³æä»¶",slug:"appendix-ç¸å³æä»¶",normalizedTitle:"appendix: ç¸å³æä»¶",charIndex:1069}],headersStr:"registry jenkins Appendix: ç¸å³æä»¶",content:'# å®è·µï¼DIND\n\n\n# registry\n\n * run\n   * docker run -d -p 5000:5000 -v /tmp/registry:/registry --name registry registry\n * watch\n   * http://127.0.0.1:5000/v2/_catalog\n * test\n   * docker build -t localhost:5000/containersol/nodejs_app\n   * docker push localhost:5000/containersol/nodejs_app\n\n\n# jenkins\n\n * build\n   * docker build -t containersol/jenkins_with_docker -f dockerfile_jenkins .\n * run\n   * docker run -d -p 8081:8080 -v /var/run/docker.sock:/var/run/docker.sock -v $(which docker):/usr/bin/docker -v $(pwd):/var/jenkins_data -v jenkins-stuff:/var/jenkins_home --name jenkins containersol/jenkins_with_docker\n   \n       -v /usr/lib64/libltdl.so.7:/usr/lib/x86_64-linux-gnu/libltdl.so.7\n       --user jenkins\n   \n   \n   1\n   2\n   \n * test\n   * docker exec -it --user jenkins [container_id] /bin/bash\n   * docker build -t localhost:5000/containersol/nodejs_app:v2 -f /var/jenkins_data/dockerfile_nodejs /var/jenkins_data\n * note\n   * ä¸å®è¦ä¿è¯ï¼å¨ dockerfile_jenkins ä¸­, RUN groupadd -g 980 docker, æ¶ç gid(980) å å®¿ä¸»æºçdockerç»gidä¸è´\n * watch\n   * http://127.0.0.1:8081\n\n\n# Appendix: ç¸å³æä»¶\n\n> app.js\n\n// Load the http module to create an http server.\nvar http = require(\'http\');\n\n// Configure our HTTP server to respond with Hello World to all requests.\nvar server = http.createServer(function (request, response) {\nresponse.writeHead(200, {"Content-Type": "text/plain"});\nresponse.end("Hello World\\n");\n});\n\n// Listen on port 8000, IP defaults to "0.0.0.0"\nserver.listen(8000);\n\n// Put a friendly message on the terminal\nconsole.log("Server running at http://127.0.0.1:8000/");\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n\n\n> build.sh\n\n#!/bin/bash\n\nif [ -z "${1}" ]; then\nversion="latest"\nelse\nversion="${1}"\nfi\n\ncd nodejs_app\ndocker build -t localhost:5000/containersol/nodejs_app:${version} .\ncd ..\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n> push.sh\n\n#!/bin/bash\n\nif [ -z "${1}" ]; then\nversion="latest"\nelse\nversion="${1}"\nfi\n\ndocker push localhost:5000/containersol/nodejs_app:"${version}"\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n> start.sh\n\n#!/bin/bash\n\n# http://127.0.0.1:8000/\n\ndocker build -t my_nodejs_image .\ndocker run -p 8000:8000 my_nodejs_image\n\n\n1\n2\n3\n4\n5\n6\n\n\n> dockerfile_jenkins\n\nFROM jenkins\n\nMAINTAINER ContainerSolutions\n\nUSER root\n#TODO the group ID for docker group on my Ubuntu is 125, therefore I can only run docker commands if I have same group id inside. \n# Otherwise the socket file is not accessible.\nRUN groupadd -g 980 docker && usermod -a -G docker jenkins \nUSER jenkins\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n> dockerfile_nodejs\n\nFROM google/nodejs\n\nWORKDIR /app\nADD package.json /app/\nRUN npm install\nADD . /app\n\nEXPOSE 8000\nCMD []\nENTRYPOINT ["/nodejs/bin/npm", "start"]\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\n> package.json\n\n{\n    "name": "hello-world",\n    "description": "hello world",\n    "version": "0.0.1",\n    "private": true,\n    "dependencies": {\n        "express": "3.x"\n    },\n    "scripts": {"start": "node app.js"}\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n',normalizedContent:'# å®è·µï¼dind\n\n\n# registry\n\n * run\n   * docker run -d -p 5000:5000 -v /tmp/registry:/registry --name registry registry\n * watch\n   * http://127.0.0.1:5000/v2/_catalog\n * test\n   * docker build -t localhost:5000/containersol/nodejs_app\n   * docker push localhost:5000/containersol/nodejs_app\n\n\n# jenkins\n\n * build\n   * docker build -t containersol/jenkins_with_docker -f dockerfile_jenkins .\n * run\n   * docker run -d -p 8081:8080 -v /var/run/docker.sock:/var/run/docker.sock -v $(which docker):/usr/bin/docker -v $(pwd):/var/jenkins_data -v jenkins-stuff:/var/jenkins_home --name jenkins containersol/jenkins_with_docker\n   \n       -v /usr/lib64/libltdl.so.7:/usr/lib/x86_64-linux-gnu/libltdl.so.7\n       --user jenkins\n   \n   \n   1\n   2\n   \n * test\n   * docker exec -it --user jenkins [container_id] /bin/bash\n   * docker build -t localhost:5000/containersol/nodejs_app:v2 -f /var/jenkins_data/dockerfile_nodejs /var/jenkins_data\n * note\n   * ä¸å®è¦ä¿è¯ï¼å¨ dockerfile_jenkins ä¸­, run groupadd -g 980 docker, æ¶ç gid(980) å å®¿ä¸»æºçdockerç»gidä¸è´\n * watch\n   * http://127.0.0.1:8081\n\n\n# appendix: ç¸å³æä»¶\n\n> app.js\n\n// load the http module to create an http server.\nvar http = require(\'http\');\n\n// configure our http server to respond with hello world to all requests.\nvar server = http.createserver(function (request, response) {\nresponse.writehead(200, {"content-type": "text/plain"});\nresponse.end("hello world\\n");\n});\n\n// listen on port 8000, ip defaults to "0.0.0.0"\nserver.listen(8000);\n\n// put a friendly message on the terminal\nconsole.log("server running at http://127.0.0.1:8000/");\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n\n\n> build.sh\n\n#!/bin/bash\n\nif [ -z "${1}" ]; then\nversion="latest"\nelse\nversion="${1}"\nfi\n\ncd nodejs_app\ndocker build -t localhost:5000/containersol/nodejs_app:${version} .\ncd ..\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n> push.sh\n\n#!/bin/bash\n\nif [ -z "${1}" ]; then\nversion="latest"\nelse\nversion="${1}"\nfi\n\ndocker push localhost:5000/containersol/nodejs_app:"${version}"\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n> start.sh\n\n#!/bin/bash\n\n# http://127.0.0.1:8000/\n\ndocker build -t my_nodejs_image .\ndocker run -p 8000:8000 my_nodejs_image\n\n\n1\n2\n3\n4\n5\n6\n\n\n> dockerfile_jenkins\n\nfrom jenkins\n\nmaintainer containersolutions\n\nuser root\n#todo the group id for docker group on my ubuntu is 125, therefore i can only run docker commands if i have same group id inside. \n# otherwise the socket file is not accessible.\nrun groupadd -g 980 docker && usermod -a -g docker jenkins \nuser jenkins\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n> dockerfile_nodejs\n\nfrom google/nodejs\n\nworkdir /app\nadd package.json /app/\nrun npm install\nadd . /app\n\nexpose 8000\ncmd []\nentrypoint ["/nodejs/bin/npm", "start"]\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\n> package.json\n\n{\n    "name": "hello-world",\n    "description": "hello world",\n    "version": "0.0.1",\n    "private": true,\n    "dependencies": {\n        "express": "3.x"\n    },\n    "scripts": {"start": "node app.js"}\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n',charsets:{cjk:!0}},{title:"å®è·µï¼k8s ä¹ downward api",frontmatter:{title:"å®è·µï¼k8s ä¹ downward api",date:"2020-04-13T00:00:00.000Z",description:"k8s ä¹ downward api",permalink:null,categories:["blog","utilization"],tags:[null]},regularPath:"/blog/utilization/foo_k8s_downward_api.html",relativePath:"blog/utilization/foo_k8s_downward_api.md",key:"v-c6b25e82",path:"/blog/utilization/foo_k8s_downward_api.html",headersStr:null,content:'#\n\n * expose Pod and Container fields to a running Container\n   * docs: https://kubernetes.io/docs/tasks/inject-data-application/environment-variable-expose-pod-information/#the-downward-api\n   * example:\n   \n     apiVersion: v1\n     kind: Pod\n     metadata:\n       name: test-host-ip\n     spec:\n       containers:\n         - name: test-host-ip\n           image: k8s.gcr.io/busybox\n           command: [ "sh", "-c"]\n           args:\n           - while true; do\n               echo -en \'\\n\';\n               printenv MY_NODE_NAME MY_POD_NAME MY_POD_NAMESPACE;\n               printenv MY_POD_IP MY_POD_SERVICE_ACCOUNT;\n               sleep 10;\n             done;\n           env:\n             - name: MY_NODE_IP\n               valueFrom:\n                 fieldRef:\n                   fieldPath: status.hostIP\n             - name: MY_NODE_NAME\n               valueFrom:\n                 fieldRef:\n                   fieldPath: spec.nodeName\n             - name: MY_POD_NAME\n               valueFrom:\n                 fieldRef:\n                   fieldPath: metadata.name\n             - name: MY_POD_NAMESPACE\n               valueFrom:\n                 fieldRef:\n                   fieldPath: metadata.namespace\n       restartPolicy: Never\n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   7\n   8\n   9\n   10\n   11\n   12\n   13\n   14\n   15\n   16\n   17\n   18\n   19\n   20\n   21\n   22\n   23\n   24\n   25\n   26\n   27\n   28\n   29\n   30\n   31\n   32\n   33\n   34\n   ',normalizedContent:'#\n\n * expose pod and container fields to a running container\n   * docs: https://kubernetes.io/docs/tasks/inject-data-application/environment-variable-expose-pod-information/#the-downward-api\n   * example:\n   \n     apiversion: v1\n     kind: pod\n     metadata:\n       name: test-host-ip\n     spec:\n       containers:\n         - name: test-host-ip\n           image: k8s.gcr.io/busybox\n           command: [ "sh", "-c"]\n           args:\n           - while true; do\n               echo -en \'\\n\';\n               printenv my_node_name my_pod_name my_pod_namespace;\n               printenv my_pod_ip my_pod_service_account;\n               sleep 10;\n             done;\n           env:\n             - name: my_node_ip\n               valuefrom:\n                 fieldref:\n                   fieldpath: status.hostip\n             - name: my_node_name\n               valuefrom:\n                 fieldref:\n                   fieldpath: spec.nodename\n             - name: my_pod_name\n               valuefrom:\n                 fieldref:\n                   fieldpath: metadata.name\n             - name: my_pod_namespace\n               valuefrom:\n                 fieldref:\n                   fieldpath: metadata.namespace\n       restartpolicy: never\n   \n   \n   1\n   2\n   3\n   4\n   5\n   6\n   7\n   8\n   9\n   10\n   11\n   12\n   13\n   14\n   15\n   16\n   17\n   18\n   19\n   20\n   21\n   22\n   23\n   24\n   25\n   26\n   27\n   28\n   29\n   30\n   31\n   32\n   33\n   34\n   ',charsets:{}},{title:"å®è·µï¼åå»ºredis cluster",frontmatter:{title:"å®è·µï¼åå»ºredis cluster",date:"2020-04-13T00:00:00.000Z",description:"å®è·µï¼åå»ºredis cluster",permalink:null,categories:["blog","utilization"],tags:[null]},regularPath:"/blog/utilization/foo_redis_cluster.html",relativePath:"blog/utilization/foo_redis_cluster.md",key:"v-019d6745",path:"/blog/utilization/foo_redis_cluster.html",headers:[{level:2,title:"åå»ºredis cluster",slug:"åå»ºredis-cluster",normalizedTitle:"åå»ºredis cluster",charIndex:2},{level:3,title:"1ãåå»ºdockerå®ä¾",slug:"_1ãåå»ºdockerå®ä¾",normalizedTitle:"1ãåå»ºdockerå®ä¾",charIndex:22},{level:3,title:"2ãåå»ºcluster",slug:"_2ãåå»ºcluster",normalizedTitle:"2ãåå»ºcluster",charIndex:363},{level:2,title:"æµè¯",slug:"æµè¯",normalizedTitle:"æµè¯",charIndex:1448},{level:2,title:"æ°æ®è¿ç§»æµç¨",slug:"æ°æ®è¿ç§»æµç¨",normalizedTitle:"æ°æ®è¿ç§»æµç¨",charIndex:1892},{level:2,title:"redis cluster",slug:"redis-cluster",normalizedTitle:"redis cluster",charIndex:4}],headersStr:"åå»ºredis cluster 1ãåå»ºdockerå®ä¾ 2ãåå»ºcluster æµè¯ æ°æ®è¿ç§»æµç¨ redis cluster",content:'# åå»ºredis cluster\n\n\n# 1ãåå»ºdockerå®ä¾\n\n    docker run -d --net host --name myredis_a redis:5.0 redis-server --cluster-enabled yes --port 7000\n    docker run -d --net host --name myredis_b redis:5.0 redis-server --cluster-enabled yes --port 7001\n\n\n1\n2\n\n * è¯´æ\n   * éè¦ä½¿ç¨ --net host\n     * è§ https://redis.io/topics/cluster-tutorial ä¸­ "Redis Cluster and Docker" çè¡¨è¿°\n\n\n# 2ãåå»ºcluster\n\n * ç»æ\n   * myredis_a -- master\n   * myredis_b -- master\n   * myredis_c -- master\n   * myredis_d -- slave of myredis_c\n\n# A - ä½¿ç¨ redis-trib.rb å·¥å·\n\n    redis-trib.rb create --replicas 127.0.0.1:7000 127.0.0.1:7001 127.0.0.1:7002 127.0.0.1:7003 127.0.0.1:7004 127.0.0.1:7005\n\n\n1\n\n\n# B - çº¯æå·¥éç½®\n\n * ä½¿ç¨ cluster addslots å½ä»¤åååå 16384 ä¸ªslotä¸º3æ®µ\n   \n       shell:\n           for i in {0..5461}; do redis-cli -h 10.0.2.15 -p 7001 cluster addslots $i; done\n           for i in {5462..10923}; do redis-cli -h 10.0.2.15 -p 7002 cluster addslots $i; done\n           for i in {10924..16384}; do redis-cli -h 10.0.2.15 -p 7003 cluster addslots $i; done\n   \n   \n   1\n   2\n   3\n   4\n   \n * å»ºç«åä¸ªå®ä¾ä¹é´çéä¿¡\n   * åªéè¦å¨ä¸å°æºå¨ä¸è¿è¡æä½å°±å¯ä»¥ï¼å¶ä»æºå¨ä¼èªå¨æ·»å éä¿¡çéç½®\n   \n       è¿å¥redis-cliå½ä»¤ï¼\n           127.0.0.1:6379> cluster meet 10.0.2.15 63791\n           ...\n   \n   \n   1\n   2\n   3\n   \n * å»ºç«ä¸»ä»èç¹å³ç³»\n   * ç»å½ä»èç¹ï¼ä½¿ç¨ cluster replicate æå®å½åèç¹æ¯åªä¸ªèç¹ç replica\n   \n       root@jiao:~# redis-cli -h 10.0.2.15 -p 7004\n       10.0.2.15:7004> cluster replicate 20c7dc8245c14b87fb0efb70769f02402e5b9c2a\n   \n   \n   1\n   2\n   \n\n\n# æµè¯\n\n * ./redis-cli -c -h 10.0.2.15 -p 7000\n   * æ³¨æå åæ°-cï¼è¡¨ç¤ºè¿å¥clusteræ¨¡å¼\n * failover\n   * åæ myredis_c (DEBUG SEGFAULT), è§å¯ myredis_d çéä¸»æµç¨\n   * å¯å¨ myredis_c, è§å¯ myredis_c å myredis_d çä¸»ä»å³ç³»è½¬æ¢\n * scale out\n   * æ°å¢èç¹\n     * docker run -d --net host --name myredis_e redis:5.0 redis-server --cluster-enabled yes --port 7005\n   * éæ°ååslot\n     * å·¥å· redis-trib.rb\n       * ./redis-trib.rb reshard [cluster_node_ip:cluster_node_port]\n     * æå·¥\n       * æ°æ®è¿ç§»æµç¨\n * scale in\n   * åªæslaveèç¹åç©ºçmasterèç¹å¯ä»¥å é¤\n     * å¦æmasteréç©ºï¼åç¨reshardæä¸é¢çslotç§»å¨å°å¶å®nodeååå é¤\n     * å¦ææä¸ç»master-slaveèç¹ï¼å°masterä¸ææslotç§»å°å¶å®èç¹ï¼ç¶åå°masterå é¤ï¼å©ä¸çslaveä¼å¦å¯»ä»ä¸»ï¼åæå¶å®masterçslave\n\n\n\n\n\n# æ°æ®è¿ç§»æµç¨\n\n * æµç¨\n   * è®¾å®è¿ç§»ä¸­çèç¹ç¶æ\n     * æ¯å¦è¦æslot xçæ°æ®ä»èç¹Aè¿ç§»å°èç¹Bçè¯ï¼éè¦æAè®¾ç½®æMIGRATINGç¶æï¼Bè®¾ç½®æIMPORTINGç¶æã\n       \n           CLUSTER SETSLOT <slot> IMPORTING <node_id_A>\n           CLUSTER SETSLOT <slot> MIGRATING <node_id_B>\n       \n       \n       1\n       2\n       \n   * è¿ç§»æ°æ®\n     * è¿ä¸æ­¥é¦åä½¿ç¨CLUSTER GETKEYSINSLOT å½ä»¤è·åè¯¥slotä¸­ææçkey, ç¶åæ¯ä¸ªkeyä¾æ¬¡ç¨MIGRATEå½ä»¤è½¬ç§»æ°æ®ã\n     * æ³¨æ\n       * å ä¸ºMIGRATEå½ä»¤æ¯åå­æ§çï¼å¨åä¸ªkeyçè¿ç§»è¿ç¨ä¸­ï¼å¯¹è¿ä¸ªkeyçè®¿é®ä¼è¢«é»å¡ãå¦ækeyçå¼æ¯è¾å¤æ¶, å½±åç¸å¯¹ææ¾ã\n   * å¯¹ä¸¤ä¸ªèç¹ä½¿ç¨cluster setslot nodeæ¥æ¶é¤importingåmigratingæ è®°, å¹¶ä¸è®¾ç½®æ§½ä½\n     * æ³¨æï¼è¿éå¯è½ä¼éå° Epoch Collision é®é¢\n       * æ ¹æº: ä¸»ä»åslotçä¸è´æ§æ¯ç±epochæ¥ç®¡çç\n       * åå ï¼è¿ç§»æåä¸æ­¥æ¶é¤importingä½¿ç¨çcluster setslot node, å¦æå¦å¤ä¸ä¸ªèç¹ä¹åæ¶bump epoch, å°±å¯è½åºç°epoch collision\n         * å¦æå¯¹ä¸ä¸ªèç¹ä½¿ç¨cluster setslot nodeçæ¶åèç¹æimporting flag, èç¹ä¼bump epochãå¦æèç¹æ²¡æimporting flag, å®ä¼ç´æ¥è®¾ç½®æ§½ä½, ä½ä¸ä¼å¢å èªå·±çnode epochã\n         * reference: [https://blog.csdn.net/u011535541/article/details/78834565]\n * å½±å\n   * redis clusterçæ°æ®è¿ç§»åºæ¬ä¸ä¼å½±åéç¾¤ä½¿ç¨\n     * ä½æ¯ï¼å¨æ°æ®ä»èç¹Aè¿ç§»å°Bçè¿ç¨ä¸­ï¼æ°æ®å¯è½å¨Aä¸ï¼ä¹å¯è½å¨Bä¸ï¼redisæ¯æä¹ç¥éè¦å°åªä¸ªèç¹ä¸å»æ¾çå¢ï¼\n       * ASKåMOVEDè½¬å: MOVEDæ¯æ°¸ä¹è½¬åä¿¡å·ï¼ASKåè¡¨ç¤ºåªè¿ä¸æ¬¡æä½åè½¬å\n         * reference: [http://redisdoc.com/topic/cluster-spec.html#moved]\n         * å¨èç¹Aåèç¹Bçæ°æ®è¿ç§»è¿ç¨ä¸­ï¼å½å®¢æ·ç«¯å¨Aä¸­æ²¡æ¾å°æä¸ªkeyæ¶,å°±ä¼å¾å°ä¸ä¸ªASKï¼ç¶ååå»Bä¸­æ¥æ¾ï¼å®éä¸å°±æ¯å¤æ¥ä¸æ¬¡\n         * éè¦æ³¨æçæ¯ï¼å®¢æ·ç«¯æ¥è¯¢Bæ¶ï¼éè¦ååä¸æ¡ASKINGå½ä»¤ï¼å¦åè¿ä¸ªéå¯¹å¸¦æIMPORTINGç¶æçæ§½çå½ä»¤è¯·æ±å°è¢«èç¹Bæç»\n * reference\n   * [https://zhuanlan.zhihu.com/p/25060071]\n   * [https://blog.csdn.net/u011535541/article/details/78834565]\n\n\n# redis cluster\n\n    CLUSTER SETSLOT <slot> NODE <node_id> å°æ§½ slot ææ´¾ç» node_id æå®çèç¹ï¼å¦ææ§½å·²ç»ææ´¾ç»å¦ä¸ä¸ªèç¹ï¼é£ä¹åè®©å¦ä¸ä¸ªèç¹å é¤è¯¥æ§½ï¼ç¶ååè¿è¡ææ´¾\n    CLUSTER SETSLOT <slot> MIGRATING <node_id> å°æ¬èç¹çæ§½ slot è¿ç§»å° node_id æå®çèç¹ä¸­\n    CLUSTER SETSLOT <slot> IMPORTING <node_id> ä» node_id æå®çèç¹ä¸­å¯¼å¥æ§½ slot å°æ¬èç¹\n    CLUSTER SETSLOT <slot> STABLE åæ¶å¯¹æ§½ slot çå¯¼å¥(import)æèè¿ç§»(migrate)\n\n\n1\n2\n3\n4\n',normalizedContent:'# åå»ºredis cluster\n\n\n# 1ãåå»ºdockerå®ä¾\n\n    docker run -d --net host --name myredis_a redis:5.0 redis-server --cluster-enabled yes --port 7000\n    docker run -d --net host --name myredis_b redis:5.0 redis-server --cluster-enabled yes --port 7001\n\n\n1\n2\n\n * è¯´æ\n   * éè¦ä½¿ç¨ --net host\n     * è§ https://redis.io/topics/cluster-tutorial ä¸­ "redis cluster and docker" çè¡¨è¿°\n\n\n# 2ãåå»ºcluster\n\n * ç»æ\n   * myredis_a -- master\n   * myredis_b -- master\n   * myredis_c -- master\n   * myredis_d -- slave of myredis_c\n\n# a - ä½¿ç¨ redis-trib.rb å·¥å·\n\n    redis-trib.rb create --replicas 127.0.0.1:7000 127.0.0.1:7001 127.0.0.1:7002 127.0.0.1:7003 127.0.0.1:7004 127.0.0.1:7005\n\n\n1\n\n\n# b - çº¯æå·¥éç½®\n\n * ä½¿ç¨ cluster addslots å½ä»¤åååå 16384 ä¸ªslotä¸º3æ®µ\n   \n       shell:\n           for i in {0..5461}; do redis-cli -h 10.0.2.15 -p 7001 cluster addslots $i; done\n           for i in {5462..10923}; do redis-cli -h 10.0.2.15 -p 7002 cluster addslots $i; done\n           for i in {10924..16384}; do redis-cli -h 10.0.2.15 -p 7003 cluster addslots $i; done\n   \n   \n   1\n   2\n   3\n   4\n   \n * å»ºç«åä¸ªå®ä¾ä¹é´çéä¿¡\n   * åªéè¦å¨ä¸å°æºå¨ä¸è¿è¡æä½å°±å¯ä»¥ï¼å¶ä»æºå¨ä¼èªå¨æ·»å éä¿¡çéç½®\n   \n       è¿å¥redis-cliå½ä»¤ï¼\n           127.0.0.1:6379> cluster meet 10.0.2.15 63791\n           ...\n   \n   \n   1\n   2\n   3\n   \n * å»ºç«ä¸»ä»èç¹å³ç³»\n   * ç»å½ä»èç¹ï¼ä½¿ç¨ cluster replicate æå®å½åèç¹æ¯åªä¸ªèç¹ç replica\n   \n       root@jiao:~# redis-cli -h 10.0.2.15 -p 7004\n       10.0.2.15:7004> cluster replicate 20c7dc8245c14b87fb0efb70769f02402e5b9c2a\n   \n   \n   1\n   2\n   \n\n\n# æµè¯\n\n * ./redis-cli -c -h 10.0.2.15 -p 7000\n   * æ³¨æå åæ°-cï¼è¡¨ç¤ºè¿å¥clusteræ¨¡å¼\n * failover\n   * åæ myredis_c (debug segfault), è§å¯ myredis_d çéä¸»æµç¨\n   * å¯å¨ myredis_c, è§å¯ myredis_c å myredis_d çä¸»ä»å³ç³»è½¬æ¢\n * scale out\n   * æ°å¢èç¹\n     * docker run -d --net host --name myredis_e redis:5.0 redis-server --cluster-enabled yes --port 7005\n   * éæ°ååslot\n     * å·¥å· redis-trib.rb\n       * ./redis-trib.rb reshard [cluster_node_ip:cluster_node_port]\n     * æå·¥\n       * æ°æ®è¿ç§»æµç¨\n * scale in\n   * åªæslaveèç¹åç©ºçmasterèç¹å¯ä»¥å é¤\n     * å¦æmasteréç©ºï¼åç¨reshardæä¸é¢çslotç§»å¨å°å¶å®nodeååå é¤\n     * å¦ææä¸ç»master-slaveèç¹ï¼å°masterä¸ææslotç§»å°å¶å®èç¹ï¼ç¶åå°masterå é¤ï¼å©ä¸çslaveä¼å¦å¯»ä»ä¸»ï¼åæå¶å®masterçslave\n\n\n\n\n\n# æ°æ®è¿ç§»æµç¨\n\n * æµç¨\n   * è®¾å®è¿ç§»ä¸­çèç¹ç¶æ\n     * æ¯å¦è¦æslot xçæ°æ®ä»èç¹aè¿ç§»å°èç¹bçè¯ï¼éè¦æaè®¾ç½®æmigratingç¶æï¼bè®¾ç½®æimportingç¶æã\n       \n           cluster setslot <slot> importing <node_id_a>\n           cluster setslot <slot> migrating <node_id_b>\n       \n       \n       1\n       2\n       \n   * è¿ç§»æ°æ®\n     * è¿ä¸æ­¥é¦åä½¿ç¨cluster getkeysinslot å½ä»¤è·åè¯¥slotä¸­ææçkey, ç¶åæ¯ä¸ªkeyä¾æ¬¡ç¨migrateå½ä»¤è½¬ç§»æ°æ®ã\n     * æ³¨æ\n       * å ä¸ºmigrateå½ä»¤æ¯åå­æ§çï¼å¨åä¸ªkeyçè¿ç§»è¿ç¨ä¸­ï¼å¯¹è¿ä¸ªkeyçè®¿é®ä¼è¢«é»å¡ãå¦ækeyçå¼æ¯è¾å¤æ¶, å½±åç¸å¯¹ææ¾ã\n   * å¯¹ä¸¤ä¸ªèç¹ä½¿ç¨cluster setslot nodeæ¥æ¶é¤importingåmigratingæ è®°, å¹¶ä¸è®¾ç½®æ§½ä½\n     * æ³¨æï¼è¿éå¯è½ä¼éå° epoch collision é®é¢\n       * æ ¹æº: ä¸»ä»åslotçä¸è´æ§æ¯ç±epochæ¥ç®¡çç\n       * åå ï¼è¿ç§»æåä¸æ­¥æ¶é¤importingä½¿ç¨çcluster setslot node, å¦æå¦å¤ä¸ä¸ªèç¹ä¹åæ¶bump epoch, å°±å¯è½åºç°epoch collision\n         * å¦æå¯¹ä¸ä¸ªèç¹ä½¿ç¨cluster setslot nodeçæ¶åèç¹æimporting flag, èç¹ä¼bump epochãå¦æèç¹æ²¡æimporting flag, å®ä¼ç´æ¥è®¾ç½®æ§½ä½, ä½ä¸ä¼å¢å èªå·±çnode epochã\n         * reference: [https://blog.csdn.net/u011535541/article/details/78834565]\n * å½±å\n   * redis clusterçæ°æ®è¿ç§»åºæ¬ä¸ä¼å½±åéç¾¤ä½¿ç¨\n     * ä½æ¯ï¼å¨æ°æ®ä»èç¹aè¿ç§»å°bçè¿ç¨ä¸­ï¼æ°æ®å¯è½å¨aä¸ï¼ä¹å¯è½å¨bä¸ï¼redisæ¯æä¹ç¥éè¦å°åªä¸ªèç¹ä¸å»æ¾çå¢ï¼\n       * askåmovedè½¬å: movedæ¯æ°¸ä¹è½¬åä¿¡å·ï¼askåè¡¨ç¤ºåªè¿ä¸æ¬¡æä½åè½¬å\n         * reference: [http://redisdoc.com/topic/cluster-spec.html#moved]\n         * å¨èç¹aåèç¹bçæ°æ®è¿ç§»è¿ç¨ä¸­ï¼å½å®¢æ·ç«¯å¨aä¸­æ²¡æ¾å°æä¸ªkeyæ¶,å°±ä¼å¾å°ä¸ä¸ªaskï¼ç¶ååå»bä¸­æ¥æ¾ï¼å®éä¸å°±æ¯å¤æ¥ä¸æ¬¡\n         * éè¦æ³¨æçæ¯ï¼å®¢æ·ç«¯æ¥è¯¢bæ¶ï¼éè¦ååä¸æ¡askingå½ä»¤ï¼å¦åè¿ä¸ªéå¯¹å¸¦æimportingç¶æçæ§½çå½ä»¤è¯·æ±å°è¢«èç¹bæç»\n * reference\n   * [https://zhuanlan.zhihu.com/p/25060071]\n   * [https://blog.csdn.net/u011535541/article/details/78834565]\n\n\n# redis cluster\n\n    cluster setslot <slot> node <node_id> å°æ§½ slot ææ´¾ç» node_id æå®çèç¹ï¼å¦ææ§½å·²ç»ææ´¾ç»å¦ä¸ä¸ªèç¹ï¼é£ä¹åè®©å¦ä¸ä¸ªèç¹å é¤è¯¥æ§½ï¼ç¶ååè¿è¡ææ´¾\n    cluster setslot <slot> migrating <node_id> å°æ¬èç¹çæ§½ slot è¿ç§»å° node_id æå®çèç¹ä¸­\n    cluster setslot <slot> importing <node_id> ä» node_id æå®çèç¹ä¸­å¯¼å¥æ§½ slot å°æ¬èç¹\n    cluster setslot <slot> stable åæ¶å¯¹æ§½ slot çå¯¼å¥(import)æèè¿ç§»(migrate)\n\n\n1\n2\n3\n4\n',charsets:{cjk:!0}},{title:"utility",frontmatter:{published:!0,title:"utility",description:"jiao's blog",keywords:[null],categories:["tools","rnote"],permalink:"/blog/utility/",date:"2020-04-13T00:00:00.000Z",tags:[null]},regularPath:"/blog/xnote/",relativePath:"blog/xnote/README.md",key:"v-2fe5090c",path:"/blog/utility/",headersStr:null,content:"# UTILITY\n\n * æç»­äº¤ä»(æå®¢æ¶é´)æè¦\n * Deep Mind\n * å³äºPm\n * Interesting Xxx\n * å³äºæ»ç»\n * Google æè½è¯åå¡\n * å³äºè¡å¸\n * Skill And Communication\n * Architecture(æå®¢æ¶é´)æè¦\n * Refactor\n * å³äºå¿å­¦",normalizedContent:"# utility\n\n * æç»­äº¤ä»(æå®¢æ¶é´)æè¦\n * deep mind\n * å³äºpm\n * interesting xxx\n * å³äºæ»ç»\n * google æè½è¯åå¡\n * å³äºè¡å¸\n * skill and communication\n * architecture(æå®¢æ¶é´)æè¦\n * refactor\n * å³äºå¿å­¦",charsets:{cjk:!0}},{title:"å³äºæ»ç»",frontmatter:{title:"å³äºæ»ç»",date:"2022-01-19T00:00:00.000Z",description:"å³äºæ»ç»",permalink:null,categories:["blog","xnote"],tags:[null]},regularPath:"/blog/xnote/about_acknowledge.html",relativePath:"blog/xnote/about_acknowledge.md",key:"v-a6752c4a",path:"/blog/xnote/about_acknowledge.html",headers:[{level:2,title:"I ç¥è¡åä¸",slug:"i-ç¥è¡åä¸",normalizedTitle:"i ç¥è¡åä¸",charIndex:11},{level:3,title:"å®¢è§äºå®",slug:"å®¢è§äºå®",normalizedTitle:"å®¢è§äºå®",charIndex:213},{level:3,title:"ç¥",slug:"ç¥",normalizedTitle:"ç¥",charIndex:13},{level:3,title:"è¡",slug:"è¡",normalizedTitle:"è¡",charIndex:14},{level:2,title:"II å³äºéæ©",slug:"ii-å³äºéæ©",normalizedTitle:"ii å³äºéæ©",charIndex:763},{level:3,title:"åç°èªå·±ä»ä¹é½ä¸æï¼ä»ä¹é½æ³å­¦",slug:"åç°èªå·±ä»ä¹é½ä¸æ-ä»ä¹é½æ³å­¦",normalizedTitle:"åç°èªå·±ä»ä¹é½ä¸æï¼ä»ä¹é½æ³å­¦",charIndex:775},{level:3,title:"åè",slug:"åè",normalizedTitle:"åè",charIndex:710},{level:2,title:"III å³äºæç»´",slug:"iii-å³äºæç»´",normalizedTitle:"iii å³äºæç»´",charIndex:2020},{level:3,title:"æ·±åº¦æç»´",slug:"æ·±åº¦æç»´",normalizedTitle:"æ·±åº¦æç»´",charIndex:2032},{level:3,title:"é«ç»´æç»´",slug:"é«ç»´æç»´",normalizedTitle:"é«ç»´æç»´",charIndex:2184},{level:2,title:"IV å³äºæ²é",slug:"iv-å³äºæ²é",normalizedTitle:"iv å³äºæ²é",charIndex:2291},{level:3,title:"å­¦ä¼è®²å¥½ä¸ä¸ªæäº",slug:"å­¦ä¼è®²å¥½ä¸ä¸ªæäº",normalizedTitle:"å­¦ä¼è®²å¥½ä¸ä¸ªæäº",charIndex:2551},{level:3,title:"SCQAæ³å",slug:"scqaæ³å",normalizedTitle:"scqaæ³å",charIndex:2792},{level:3,title:"STARæ³å",slug:"staræ³å",normalizedTitle:"staræ³å",charIndex:2982},{level:2,title:"V å³äºå½±åå",slug:"v-å³äºå½±åå",normalizedTitle:"v å³äºå½±åå",charIndex:3113},{level:3,title:"ä¸ªäººåç",slug:"ä¸ªäººåç",normalizedTitle:"ä¸ªäººåç",charIndex:3456},{level:2,title:"VI å³äºé¢å¯¼å",slug:"vi-å³äºé¢å¯¼å",normalizedTitle:"vi å³äºé¢å¯¼å",charIndex:4104},{level:3,title:"ç¥",slug:"ç¥-2",normalizedTitle:"ç¥",charIndex:13},{level:3,title:"è¡",slug:"è¡-2",normalizedTitle:"è¡",charIndex:14},{level:2,title:"VII å³äºä»·å¼ä¸ä»·æ ¼",slug:"vii-å³äºä»·å¼ä¸ä»·æ ¼",normalizedTitle:"vii å³äºä»·å¼ä¸ä»·æ ¼",charIndex:4912},{level:3,title:"ä¸å¯¹ç§°",slug:"ä¸å¯¹ç§°",normalizedTitle:"ä¸å¯¹ç§°",charIndex:4928},{level:3,title:"èªèµ",slug:"èªèµ",normalizedTitle:"èªèµ",charIndex:5285},{level:3,title:"ææ¬",slug:"ææ¬",normalizedTitle:"ææ¬",charIndex:5676},{level:3,title:"åå±ä¸åå",slug:"åå±ä¸åå",normalizedTitle:"åå±ä¸åå",charIndex:5889},{level:2,title:"VIII å³äºå´è¶£",slug:"viii-å³äºå´è¶£",normalizedTitle:"viii å³äºå´è¶£",charIndex:5924},{level:2,title:"IX å³äºè¡",slug:"ix-å³äºè¡",normalizedTitle:"ix å³äºè¡",charIndex:5966},{level:3,title:"1. å­¦ä¹ ",slug:"_1-å­¦ä¹ ",normalizedTitle:"1. å­¦ä¹ ",charIndex:6016},{level:3,title:"2. åäº",slug:"_2-åäº",normalizedTitle:"2. åäº",charIndex:6273},{level:3,title:"3. å¿",slug:"_3-å¿",normalizedTitle:"3. å¿",charIndex:6483},{level:3,title:"4. å®ä½",slug:"_4-å®ä½",normalizedTitle:"4. å®ä½",charIndex:6517},{level:3,title:"5. å·¥ä½éé¢ä¼°",slug:"_5-å·¥ä½éé¢ä¼°",normalizedTitle:"5. å·¥ä½éé¢ä¼°",charIndex:6672},{level:2,title:"X èªçãå½çº³",slug:"x-èªçãå½çº³",normalizedTitle:"x èªçãå½çº³",charIndex:6819},{level:3,title:"1. èªç",slug:"_1-èªç",normalizedTitle:"1. èªç",charIndex:6831},{level:3,title:"2. ç»éª",slug:"_2-ç»éª",normalizedTitle:"2. ç»éª",charIndex:7001},{level:3,title:"3. èåçç¥è¯",slug:"_3-èåçç¥è¯",normalizedTitle:"3. èåçç¥è¯",charIndex:7217},{level:3,title:"4. èåçé®é¢",slug:"_4-èåçé®é¢",normalizedTitle:"4. èåçé®é¢",charIndex:7694},{level:2,title:"XI æ¨èéè¯»",slug:"xi-æ¨èéè¯»",normalizedTitle:"xi æ¨èéè¯»",charIndex:7769}],headersStr:"I ç¥è¡åä¸ å®¢è§äºå® ç¥ è¡ II å³äºéæ© åç°èªå·±ä»ä¹é½ä¸æï¼ä»ä¹é½æ³å­¦ åè III å³äºæç»´ æ·±åº¦æç»´ é«ç»´æç»´ IV å³äºæ²é å­¦ä¼è®²å¥½ä¸ä¸ªæäº SCQAæ³å STARæ³å V å³äºå½±åå ä¸ªäººåç VI å³äºé¢å¯¼å ç¥ è¡ VII å³äºä»·å¼ä¸ä»·æ ¼ ä¸å¯¹ç§° èªèµ ææ¬ åå±ä¸åå VIII å³äºå´è¶£ IX å³äºè¡ 1. å­¦ä¹  2. åäº 3. å¿ 4. å®ä½ 5. å·¥ä½éé¢ä¼° X èªçãå½çº³ 1. èªç 2. ç»éª 3. èåçç¥è¯ 4. èåçé®é¢ XI æ¨èéè¯»",content:'# å³äºæ»ç»\n\n\n# I ç¥è¡åä¸\n\n> ç¥ï¼æå¯¼è¡ï¼è¡ï¼åé¦ç¥\n\n# ç¥ä¸è¡ãéåæ¯\n\nç¥è¡å­å¨äºåä¸ªæ¹åãå±é¢ãç»´åº¦ï¼å¹¶ç¸äºå½±åï¼ä¸åç(æå¤§æå°ç)ç¥åè¡é½æåèªçéåæ¯(éæ¬è´¨, æ¯æ¹æ³)ã\n\nå°å°æé¥­åä»ä¹ï¼å¤§å°äººçç®æ ï¼ä»¥åæä¹æåæ²éæå·§ãæä¹æåé¢å¯¼åãæä¹æé«æ¶å¥...ç­ç­\n\nå¦ï¼æä»¬æè°çä¸çè§åæ¹æ³è®ºä¹æ¯ç¥åè¡çä¸åè¡¨è¿°ï¼ä¸çè§ä¸»è¦è§£å³ä¸ç"æ¯ä»ä¹"çé®é¢ï¼èæ¹æ³è®ºä¸»è¦è§£å³"æä¹å"çé®é¢ã\n\n\n# å®¢è§äºå®\n\nä¸ä»¶ä»¶æå¤§æå°çå®¢è§äºå®æ±èæäºç¹æçä¸ç\n\nå¯¹å®¢è§äºå®ç±ç®åå°å¤æçéæ­¥æ¢³çå½¢æè®¤ç¥ãæºæ§ï¼\n\n\n# ç¥\n\n> å­¦ä¹ (è®¤è¯) -> æ¬è´¨ -> åæ£ãèæ³ -> æ½è±¡ -> åé \n\næä»¬éè¦éè¿å­¦ä¹ æ¥è®¤è¯è¿äºå®¢è§äºå®, æ´æå¶æ¬è´¨; è¿éè¦å¨æ¢ç©¶(ä¼å¤)å®¢è§äºå®(è¡¨è±¡)çæ¬è´¨è¿ç¨ä¸­ï¼æ½è±¡åºèªå·±çæºæ§(é); å¨ææ¡äºè¶³å¤çè®¤ç¥æ¶ï¼å¯ä»¥è¿è¡åä½ä»¥éªè¯è®¤ç¥åæ¶äº§çä»·å¼ã\n\næç»´æ¯å¢å¼ºè®¤ç¥çéè¦ææ®µãå¦ï¼5Why æç»´æ¹å¼å¸®å©æä»¬æææ´æ·±å±æ¬¡çç¥ï¼æµç¨æç»´æ¹å¼å¸®å©æä»¬é«æçè¡\n\néçç¥çæ·±å¥ï¼å¤æåº¦åçååï¼æèç»´åº¦ä¹ä»ç¹ãçº¿ãé¢åå±å°å¤ç»´ãé«ç»´ï¼ä¸ªä½(å®¢è§å­å¨) --\x3e ç¯å¢ --\x3e çæ --\x3e ç³»ç» --\x3e å¿(æ¶æ¥å¤©å°çåå)\n\nåé åæ¯äººæéè¦çç´ è´¨ãç¥æå¤§çè½åå°±æ¯åé åï¼\n\n\n# è¡\n\n * è·µè¡èªå·±çè®¤ç¥\n   * Just Do It\n   * åå­æ§éå¼ä¹ï¼ååäºç©ä¹\n * éæ©\n   * æä»¬æ æ³æ§å¶èªèº«ä¹å¤çå¶å®ä»»ä½äºç©ï¼æä»¥æä»¬ç»å¸¸ä¼é¢å¯¹åç§éæ©\n   * æç»è¾¾å: æ¥æ±ååï¼ååæ¯å¸¸æï¼å¯ä¸ä¸åçå°±æ¯ååèªèº«\n   * çæ´»ä»æ¥æ²¡æå¹³è¡¡ï¼åªæåè(æéè¦çåææå´è¶£ç)ãæ¢å¥è¯è¯´ï¼æéè¦çäºï¼æ°¸è¿åªæä¸ä»¶ã\n\näººå®èå¤© å é¡ºå¿èä¸º ï¼\n\n\n# II å³äºéæ©\n\n\n# åç°èªå·±ä»ä¹é½ä¸æï¼ä»ä¹é½æ³å­¦\n\nåç°èªå·±ä»ä¹é½ä¸æï¼ä»ä¹é½æ³å­¦ï¼åä»ä¹é½å­¦ä¸ç²¾ï¼æ¯ä¸æ¯ä¸ç§çæï¼è¿æ¯ä¸ä¸ªç¥ä¹ä¸å¾å¤äººåä¸çä¸ä¸ªé®é¢ã\n\né¦åï¼å½ä½ åç°ä»ä¹é½ä¸æï¼ä»ä¹é½æ³å­¦çæ¶åï¼æååçåºè¯¥ä¸æ¯è¿·æï¼èæ¯åºå¹¸ãå ä¸ºä½ çç®åä¸ååå±ä¸éï¼å¼å§æ¢ç´¢å¹¿éçä¸çãä¹æä»¥è¿·ææ¯å ä¸ºãä¸çãæ¯å¦æ­¤å¹¿éï¼å¦æä»»ä½æ¹åé½æ³æ¢ç´¢çè¯ï¼å¾å®¹æè¿·è·¯ããã\n\nå æ­¤é¢å¯¹æµ·éçç¥è¯ï¼é¦ååºå½æè¯å°å­¦æ¯å­¦ä¸å®çï¼å­¦äºä¸ç¨ä¹ä¼éå¸¸å®¹æå¿è®°ãæä»¥ï¼è¦æåèä¹å¿ï¼ä¸è½ä»ä¹é½å­¦ä¼ï¼ä¹å°±æ²¡å¿è¦ä»ä¹é½æ³å­¦ãè¿æ¯ä¸ç§å¿æï¼å¯ä»¥è®©ä½ é¢å¯¹æ ç©·éæ©çæ¶åä¸ä¼æç¹è±«ãè¿·æãææ§è¿äºè´é¢æç»ªã\n\né¢å¯¹å¤æå¤åãçä¸æ¸è¿å¤çè·¯å£ï¼å¦ä½éæ©ä¾ç¶æ¯ä¸ªå¤´ç¼çé®é¢ï¼è¿æ¶ä»è¯¸è¡å¨æ¯éæ©æ´éè¦ãå­¦ä¹ å°¤ä¸ºå¦æ­¤ï¼ä½ä¸ºæ°çå¼ç«¯ï¼å­¦ä¹ çç¶ææ¯å­¦ä»ä¹æ´éè¦ãå¾å¤ç¥è¯è¦å­¦ä¸æ®µæ¶é´æè½åç°å´è¶£ï¼æç¥éæ¯å¦æç¨ã\n\næ»ä¹ï¼ä»ä¹é½ä¸æï¼å¾æ­£å¸¸ï¼å ä¸ºè¿æ¯æ°çå¼å§ï¼ä»ä¹é½æ³å­¦ï¼æ¯ç¼ºå°åèçå¿æï¼åå¼å§å­¦ä¸ä¸ªåè¯´ï¼ä»ä¹é½ä¸ç²¾ï¼å­¦è¿å å¹´æè§åæï¼ä¸ä¸å°æ¶æç®ç²¾éã\n\næå¿è®³ï¼ä»ä¹é½æ³å­¦çæ¶åï¼å°±ä»ä¹é½å­¦ï¼ä½æ¯ä¸ç¹é½æ¯æµå°è¾æ­¢ï¼çä¼¼å¿å¿ç¢ç¢ï¼ä¸åçå­¦ä¹ ï¼å®éä¸å´æ¶è·çå¾®ãããèç¦èä¹ä¼åå¤åºç°ï¼ç»å¶åå å°±æ¯ï¼æ²¡ææå°±æã\n\né¢å¯¹ä¼å¤è·¯å£ï¼ä¸ç¥éå¦ä½éæ©æ¶ï¼éè¦è¿éè¡å¨èµ·æ¥ï¼å»æ¢ç´¢ï¼å°è¯æ¾åºåéçéè·¯ï¼ç¶ååæä¸å»ï¼å½è§è¿å½åéè·¯çç¾æ¯åï¼å¯ä»¥å¨æ¢ç´¢è¿çè·¯å£ä¸­åéæ©ä¸ä¸ªï¼ç¶ååæä¸å»ããã\n\n\n# åè\n\nè°¨è®°ï¼çæ´»ä»æ¥æ²¡æå¹³è¡¡ï¼åªæåè(æéè¦çåææå´è¶£ç)ãæ¢å¥è¯è¯´ï¼æéè¦çäºï¼æ°¸è¿åªæä¸ä»¶ã\n\næ³è¦å¾å°æ´å¤çé±ï¼é£å°±çºç²æ´å¤çäº«ä¹æ¶é´ï¼æ³è¦é¡¾åå®¶åº­ï¼é£å¿å®è¦å¨èåºéååºå¦¥åï¼æ³è¦è¯´èµ°å°±èµ°çæè¡ï¼é£å°±è®©èªå·±è½å¤å¨å½ä¸æå¨çç¯å¢ä¸­è±ç¦»åºæ¥ââæ è®ºæ¯èåºä½ç½®çæ¾æï¼äº¦æèæ¯å®¶åº­äºå¡çæ¾æã\n\næå®³æçï¼åæ¯ä¸æ¿æåé©ï¼ä¹ä¸æ¿æèå¾çé£ä¸é¨åäººââå°å¤´æ¥èªå·±åªä¸é¢é½æ²¡æå°½æå¾å°ï¼å¹¶ä¸è¿è¦è´£æªè¿è¿åççæ´»æ¬èº«ã\n\næä»¬å¯ä»¥å°è¯ä»¥ä¸ç§ä¸å¸è§è§ï¼æ¥è§æèªå·±æååºçç§ç§éæ©ãå°æåå¤§æ¦çä¼åç°ï¼è¿ä¸è·¯èµ°æ¥ï¼å¨é½æ¯èªå·±ææ·±å¤çæ¬²æå¨é©±ä½¿ï¼å¨æ¯èªææ æ³èå¼çé¨åå¨æ¯æã\n\næ»ä¹ï¼å¯¹å¤§å¤æ°äººæ¥è¯´ï¼éæ©æ¯å¨åç¨è¿å»çç»éªãè¯å¾æå¯¼ç°å¨ççæ´»ãä»¥æå¾å¨æªæ¥è·çãå¨é¢å¯¹éæ©æ¶ï¼æç»åºçå»ºè®®å¦ä¸ï¼å¯ä»¥åä¸ºä¸åå¹¿ä¸¤ä¸ªæ¹é¢æ¥èèã\n\n * ä¸ï¼å°±æ¯è¦æ¾å°èªå·±ç®åæéè¦çåèªå·±ææå´è¶£çé¢åï¼è®°ä½ï¼ä¸å®è¦å®ç¼ºæ¯æ»¥ï¼ä¿æä¸ä¸ªå°èç²¾çååã\n * å¹¿ï¼å°±æ¯å»å¹¿æ³æ¶çå«çé¢åï¼è¿äºé¢åéè¦å¯¹å¾çååå°±æ¯ï¼å¥½è¯»ä¹¦ï¼ä¸æ±çè§£ï¼åå¿å¨è¿äºé¢åé»çè§å°ãè¿æ ·æ¢ä¸ä¼ç£¨ç­å­¦ä¹ çå´è¶£ï¼ä¹å¯ä»¥ä½¿ä½ å°ææå°±æã\n\nä¸æ ·ä¸è¥¿å­¦ä¸ç²¾å°±è¯´æè¿ä¸ªä¸è¥¿å¨ä½ ç°å®çæ´»ä¸­å¹¶æ²¡æå¾å°é©¬ä¸çåºç¨ãå°±åæä»¬çä¹¦ä¸æ ·ï¼åå¦æä»¬è½å¤å¸¦çé®é¢å»çä¹¦ï¼é£æä»¬å°±å¯ä»¥å¾å¿«çè§£å³è¿ä¸ªé®é¢ï¼é£æä»¬å°±ä¼å¯¹è¿ä¸ªç­æ¡å¾å°è±¡æ·±å»ãé£åå¦æä»¬å­¦ä¹ ä¸ä¸ªä¸è¥¿ï¼åªæ¯åçº¯ä¸ºäºå­¦èå­¦ï¼ç°å®çæ´»ä¸­æ ¹æ¬æ²¡æç¨å°çè¯ï¼é£å°±æ¯æ²¡æå¿è¦çå­¦ä¹ äºã\n\n\n# III å³äºæç»´\n\n> æ·±åº¦æç»´æ¯æ°æ®(è¡¨è±¡)è½¬åä¸ºè®¤ç¥çææå·¥å·\n\nå¥½çæç»´æ¹å¼ä¸ºç¥æä¾æ´å¥½çåæï¼å¯¹çæç»´æ¹å¼ä¸ºè¡æå¯¼é«æçè·¯å¾\n\n\n# æ·±åº¦æç»´\n\næ´å¯ç»å¾®ï¼è®©ä½ é«æçè§£å³æ¥å¸¸çå·ä½äºç©\n\nå¸¸è§çæ¹æ³æï¼\n\n 1. æç»´é»è¾é¾\n    * 5Whyã5So\n 2. æ¢ä½æç»´\n 3. å¯è§åæç»´\n 4. æµç¨æç»´\n\n\n# é«ç»´æç»´\n\næå¼æç»´çæ ¼å±ï¼è®©ä½ ç«å¨æ´é«ãæ´å¹¿çè§è§çå¾é®é¢ï¼ä»¥æ´æ·±å»æ´å·§å¦çæ¹å¼è§£å³é®é¢\n\nå¸¸è§çæ¹æ³æï¼\n\n 1. çææç»´\n 2. ç³»ç»æç»´\n 3. å¤§å¿æç»´\n    * é©¬å¤ªæåº\n 4. åµæ³æç»´\n\n\n# IV å³äºæ²é\n\nå¥½èäººï¼è»é»è¿ï¼éªè¾©ç»ï¼ç©èªæï¼åå¨ä¸¥ï¼æ£å¼ºæï¼æ­¤å­èï¼åä¸ä¹å¼ä¹.\n                                   - ãèµæ²»éé´Â· åçºªååäºÂ·å¾·å®å»ºä¸­åå¹´ã\n\n\n1\n2\n\n\næ²éäº¤æµæ¯å¿éæè½ï¼å®æå©äºèªæè¿åï¼å£å¤´æ²é <--- (äºèçæè¡¡) ---\x3e æå­æ²é\n\næ²éçè¦ç¹ï¼\n\n * ç©ºæ¯å¿æ(è°¦é, èæè¥è°·)\n   * æå©äºæä»¬æ§å¶æ§å¶æç»ª\n * æ¢ä½æè\n   * å±æ(åçå¿)\n   * å©çåäº«(F.A.B)ï¼å³æ³¨å¯¹æ¹çéæ±, è¾¾æèªå·±çç®æ \n\n\n# å­¦ä¼è®²å¥½ä¸ä¸ªæäº\n\n> æèª<ä½ å¦ä½å¬ææè¯´çè¯>(é»æ§ä¸­)\n\nè®²å¥½ä¸ä¸ªæäºçä¸å¤§ååï¼ç®åãå·ä½ãæå¤(æä¸¤ç§å®æææ³: é å²çªãè®¾æ¬å¿µ)\n\nå¯¹äºå·ä½ï¼è¿éæä¸ªä¾å­ï¼å¨2000å¹´ä¸çºªä¹äº¤çæ¶åï¼åºæ¬ä¸ææçå½å®¶é¢å¯¼äººåè¡¨è®²è¯çæ¶åï¼é½æ¯è¯´ä¸äºåå¤§ç©ºçæ¿æ¯åå±æï¼ä½æ¯æ°å å¡é¢å¯¼äººçä¸ä¸ªè®²è¯ï¼è®©äººå°è±¡æ·±å»ï¼ä»è¯´å¨æªæ¥3å¹´ï¼æä»¬å¸ææ¯ä¸ªåæé½æåçº¸ãååï¼å¥½å·ä½åï¼è¿ä¹å¤å¹´è¿å»äºï¼æå·²ç»ä¸è®°å¾ä¸­å½é¢å¯¼äººãç¾å½é¢å¯¼äººå¨é£ä¸ªæ¶åè®²äºä»ä¹ï¼ä½å¯ç¬è®°å¾ä½ï¼æ°å å¡é¢å¯¼äººè¯´çé£çªè¯ã\n\n\n# SCQAæ³å\n\nSCQAæ³åï¼ä¸ä¸ªè®²æäºå±¡è¯ä¸ç½çé»è¾ãæ¯å¦ä¸é¢çæäºï¼\n\n    Situation: 520å¿«å°äºï¼ææ³ä¹°ä¸ªææï¼åå¥³æåæ±å©\n    Conflict: ä¸è¿ä¹°ææçé±ä¸å¤\n    Question: æè¯¥æä¹åè¶³ä¸å¤çé£ç¬é±\n    Auswer: æ¾é«ä¸­çä¸ä¸ªéå¥ä»¬å\n\n\n1\n2\n3\n4\n\n\næè°çSCQAæ³åï¼å°±æ¯åºæ¯-å²çª-é®é¢-è§£å³æ¹æ¡\n\n\n# STARæ³å\n\nSTARæ³åï¼ä¸ä¸ªè¡¨è¾¾èªå·±çå¥½æ¹æ³\n\n    Situation(æå¢)\n    Task(ä»»å¡)\n    Action(è¡å¨, ææ¹æ¡ååæ³)\n    Result(ç»æ, æææåæä¹)\n\n\n1\n2\n3\n4\n\n\ntips: ç»æåè¡\n\n\n# V å³äºå½±åå\n\n> æ³è®©å«äººæ¥åçä¸åé½æ¯ååï¼åæ¬æä»¬èªå·±\n\nå½±åååæ¬å¯¹å¤ãå¯¹åä¸¤é¨åï¼\n\n * å¤§é¨åäººæå°å½±ååï¼ä¼æå°ä¸ä¸ªææ¯äººåå¨å¤é¨è¢«å¤å°ææ¯ä¼è®®éè¯·ï¼æå¤å°ææ¯æç« è¢«å¶ä»äººå¼ç¨åè®¤å¯ãå¶å®å¯¹å¤å½±ååçç®æ æ¯ä½ç¨å¨å¯¹åå½±ååä¸ã\n * éè¿å¯¹ä¸ççå½±ååä»¥åæ¹æ¡å¤æ­åå³ç­ä¸æ­çéªè¯ï¼å»ºç«ç®¡çå±å¯¹äºææ¯å¢éæ´ä½çä¿¡ä»»ãè¿æ ·å¨å³ç­åé¢å¤è¿ç¨å½ä¸­ï¼ææ¯ç®¡çèçææ¯åºå æå¯è½æè¯è¯­æï¼å¯ä»¥è®©å¬å¸ä»¥åéçææ¯èå¥åææ¯è·¯çº¿æ¥åå±ï¼é¿åè¿å°æèè¿å¤çææ¯æå¥å½±åä¸å¡ã\n * å¯¹äºåå·¥çå½±ååï¼æ¯åå·¥åèªå¿åºçä¸å¼ç¾åºï¼éè¿åç¡®çææ¯å¤æ­ãæ­£ç¡®çç®¡çå³ç­ãåéçé¢å¯¼æ¹æ³è®©åå·¥ä¿¡æå³ç­èèä¸æ¯å ä¸ºèä½çé«ä½èå»æ§è¡ãè¿æ ·æå¯ä»¥æé ä¸ä¸ªç§¯æåä¸ãæµ·çº³ç¾å·çäº§åææ¯å¢éã\n\n\n# ä¸ªäººåç\n\nä»ä¹æ¯"ä¸ªäººåç"ï¼ç®åæ¥è¯´ï¼å°±æ¯ä¸ä¸ªäººå¸¦ç»å«äººçå°è±¡ï¼ä»¥åæå½±åçäººçèå´ãæä»¬è¯´ä¸ä¸ªäººä¸ªäººåçå¾å¥½ï¼éå¸¸æ¯è¯´ä»å¨æä¸æ¹é¢æä¸é¿ï¼ææå¨ï¼åæ¶ä»è¿å½±ååå¸®å©äºå¾å¤äººã\n\nä»è¿ä¸ªè§åº¦åºåï¼ææ¯äººå¯ä»¥ä»ä¸é¢å ä¸ªç»´åº¦æèï¼æé èªå·±çä¸ªäººåçæèå½±ååï¼\n\n * éè¿ç¤¾äº¤åªä½å¤åè¡¨è§ç¹ï¼å°¤å¶æ¯éå¯¹ç­ç¹äºä»¶ï¼è®©èªå·±å¨å³é®æ¶å»ä¸ç¼ºä½ãä½æ¯è¿ä¸ªæ¹å¼ä¹æèªå·±çå¯ä½ç¨ï¼å¦æå¨ç¤¾äº¤åªä½ä¸è¿äºæ´»è·ï¼æ¯å¦å¨æ¯ä¸ªç¾¤éé½è½çå°ä»å¨è¯´è¯ï¼å¥½åéæ¶é½å¨ååºå¤§å®¶ï¼å¯è½ä¼ç»äººçä¸æ²¡æä¸æ³¨äºæ¬èå·¥ä½çå°è±¡ãå­¦ä¼âéèèªå·±çå®åâï¼å¤åè¡¨æè§å°åæçææ®çåå®¹ï¼å¯ä»¥ä½ä¸ºèªå·±ä½¿ç¨ç¤¾äº¤åªä½çç¤¼ä»ªä¹ä¸ã\n * å¤åä¸æåè´¨çä¼è®®ï¼å¹¶åè¡¨æ¼è®²ï¼æèåâåå®¢ / å¬ä¼å·âä¹æ¯ä¸éçåæ³ãå ä¸ºä¸è®ºæ¯ä¸ä¸ª 45 åéçåäº«ï¼è¿æ¯ä¸ä¸ª 2000 å­çæç« ï¼é½ä»£è¡¨çä½ å¯¹ä¸ä¸ªé®é¢çæ·±å¥æèï¼è¿å¨ç°å¨å·²ç»æ³æ»¥çæµå±ä¿¡æ¯æµä¸­æ¯æ¯è¾ç¨æçä¸è¥¿ï¼èªç¶ä¼åå°æ´å¤äººçå³æ³¨ãéè¦æ³¨æçæ¯ï¼ä¸è¦ä¸ä¸ªåå®¹å°å¤è®²ï¼è¦åå¶ï¼å°±å¥½åæ­¦ä¾ å°è¯´éé¢çåå®¢ï¼ä¸æ¯éææåçï¼åä¸åºæï¼å¿å®ç½®æäººäºæ­»å°ãå¦ææ¯å¬å¸éè¦èªå·±å¤é²é¢ï¼é£ä¹è³å°æ¯æ¬¡è®²çåå®¹è¦æ 30% çæ´æ°ã\n * åºä¹¦ï¼å¯è½æ¯å½åæææçå»ºç«ä¸ªäººåççæ¹æ³ï¼å°¤å¶æ¯åä¸äºæåççåºçç¤¾åä½ãéå¸¸æåµä¸ï¼è¶æ¯é¾åº¦é«çäº§åºï¼è¶å®¹æåäººè¯å®ãå¦æè¯´å¬ä¼å·ä»£è¡¨ä¸ä¸ªäººå½ä¸çæ·±å¥æèï¼åºä¹¦åä»£è¡¨ä¸ä¸ªäººå¯¹è¿å»ä¸æ®µæ¶é´çæ·±å¥æ»ç»ï¼èä¸è¿è¦è±è´¹æ°ææå®å½¢ææå­ååºæ¥ï¼æ¯ä»£è¡¨çä¸ç§ä¸¥èçï¼çå®çä»åºã\n\n\n# VI å³äºé¢å¯¼å\n\n> é¢å¯¼åï¼å°±æ¯"æäº"çè½å\n\né¢å¯¼åï¼ä¹å°±æ¯"æäº"çè½åï¼å¯¹æç»ç»æè´è´£æ¯çº§é¢å¯¼åçæé«ä½ç°ãé¢å¯¼åå°±æ¯ç¨åç§åæ ·çæ¹æ³ãäººåãå½±ååãå·å¬åãå³ç­åå°ä¸ä¸ªäºæä» 0 å° 1 çè½åï¼å¦ææäºæåæ 0.99ï¼é½ä¸æ¯é¢å¯¼åçä½ç°ã\n\n\n# ç¥\n\nå¹å»é¢å¯¼åéè¦çç¼äºä»ä»¥ä¸å ç§è½ååç´ è´¨ï¼\n\n * è½æäºçè½å\n * å³ç­å\n   * è¿éææ¿å¹¶ä¸ºç»æè´è´£çè½å\n     * å¤§å®¶æçè§£çå³ç­ï¼ç»å¸¸æ¯ç»èæ¿ä¸ä¸ªæ¹æ¡ï¼èæ¿ä»ä¸­ææ¿ä¸ä¸ªæå¥½çï¼ç¶åè®©å¤§å®¶å»æ§è¡ãå¶å®å®éæåµå¹¶ä¸æ¯è¿æ ·çï¼ä½ä¸ºä¸ä¸ªé«çº§ç®¡çèï¼ç»å¸¸è½çå°ä¸å±éå°ä¸äºå°é¾çç(é®é¢)ï¼å¤§å®¶æ³å°½ä¸ååæ³å»æ¥çè¿ä¸ªçï¼å¥½æ¥ççåºå±ãä¸­å±ç®¡çèé½æå®äºï¼åºç°å¨ä½ é¢åçä¸å®é½æ¯"ä»äººç"ãæä»¥ï¼ææ¯ç®¡çèçå°çæåµï¼ç»å¸¸ä¸æ¯"ä¸¤å¥½éå¶ä¼"ï¼èæ¯"ä¸¤å®³åå¶è½»"ãéä¿çè®²ï¼é¢åä¸¤å¨ç¿ï¼ä¸å¨å¤§çä¸å¨å°çï¼è®©ä½ å¿é¡»éä¸å¨åï¼å¦æä½ ä¸è¿éç¡®å®ï¼è¿ä¸¤å¨é©¬ä¸åèªå¢é¿ä¸åã\n * æ²éå\n   * å¾å¬ä¸åç¡®åé¦çè½å\n     * ç®åå°è¯´ï¼æ²éåï¼å°±æ¯å¨åéçæ¶é´å¯¹åéçäººç¨åéæ¹æ³è¯´åéçäºæãä½ç°å¨ï¼å¯¹å¤äº¤æµãå¯¹ä¸æ²é(åCEOä¸æ ·æèé®é¢ãæ°æ®è¯´è¯)ãå¯¹ä¸æ²éç­ã\n * å½±åå\n   * å·å¬ç®¡çå±ååå·¥ä¸è´è¡å¨çè½åã"èä½ä¸æ¯å«äººç»çï¼èæ¯èªå·±æ£åºæ¥ç"ï¼è¿å¥è¯å°±æ¯å½±ååççå®è¡¨ç°ã\n * åä¸æç»´\n * ææ¯åç»(æç¥å±æ¬¡)\n\n\n# è¡\n\nè°¨è®°ï¼å®°ç¸å¿èµ·äºå·åºï¼çå°å¿åäºåä¼\n\nå¾ç´åè¯´è¿ï¼ç«å¨ç®¡çèçè§åº¦æ¥è®²ï¼ç»©æç®¡çå°±æ¯è¦è®©ä½ çä¸å±é½æ¿æè·çä½ ä¸èµ·å¹²ã\n\né¢æå¢éå¼åæåï¼\n\n * å¤è®¨è®ºãç¨ç½æ¿ï¼å¤è·è¸ªï¼è¦é­ç¯\n\nSMART\n\nå°å¬å¸å¦åè½»éªåµï¼ææ·ãéåº¦ãæ»å»ï¼ï¼å¤§å¬å¸å¦åééªåµï¼ç¨³æç¨³æï¼é²å¾¡ï¼å®å¨ï¼éå¢åï¼\n\næµç¨çææ³ç²¾é«æ¯ä»ä¹å¢ï¼\n\n * ååµåãåä¼åãååºåã ååä¸ºä¸æ ·ï¼ç¨æµç¨è§£æ¾ç®¡ç\n\n\n# VII å³äºä»·å¼ä¸ä»·æ ¼\n\nä¸çæ¯ä¸å¯¹ç§°çãæ­£æ¯å ä¸ºä¸å¯¹ç§°ï¼ææäºåç§éæ±ï¼ç±æ­¤äº§çäºä»·å¼ä¸ä»·æ ¼ã\n\n\n# ä¸å¯¹ç§°\n\nå¾å¤äººé½æä¸ªè®¤ç¥è¯¯åºï¼è§å¾èªå·±"è¿ä¹ä¸è¡ï¼é£ä¹ä¸ä¼ï¼æ²¡æä»ä¹æé¿ç"ï¼æä»¥æ²¡æèµé±çæºä¼ãå¶å®ï¼ä»»ä½çä¸å¯¹ç§°é½å¯è½èµé±ï¼è¦åäºåæ"ä¸å¯¹ç§°"ã\n\nå¸¸è§çä¸å¯¹ç§°å¯ä»¥åç±»ä¸º:\n\n 1. èµæºä¸å¯¹ç§°: ä½ æçï¼å«äººæ²¡æ\n 2. ä¿¡æ¯ä¸å¯¹ç§°: ä½ ç¥éçï¼å«äººä¸ç¥é\n\n * å å¹´åï¼æä¸ªäººå¶ä½äºä¸æ¬çµå­ä¹¦ï¼æå¤§å®¶å¨ç¾å½äºé©¬éç½ç«ä¸ä¼ çµå­ä¹¦æ¥èµé±ãè¿æ¬çµå­ä¹¦ä¹å°±æ¯40å¤é¡µï¼å¶å®å°±æ¯å°å¨äºé©¬éç½ç«ä¸ä¼ çµå­ä¹¦çæµç¨æªå¾è¯´æèå·²ï¼å¾å¤åå®¹é½æ¯å®ç½ä¸­å°±æäºãä»å°è¿æ¬ä¹¦çå®ä»·å®ä½49åï¼è½»æ¾éå®å åä¹è³ä¸ä¸å¥ã\n\n 3. è®¤ç¥ä¸å¯¹ç§°: ä½ ä¼çï¼å«äººä¸ä¼\n\n * åå®¹ä»è´¹é ä»ä¹æ¥èµé±ï¼å¶å®å°±æ¯å°ç¥è¯ææ¯æè½éè¿æå¿åäº«çæ¨¡å¼æ¥è¿è¡èµé±ã\n\n\n# èªèµ\n\næä»¬å¸¸å¸¸è®¤ä¸ºå·¥èµçé«ä½ä¼¼ä¹åä½ çæè½ãç»éªåæ­£æ¯å³ç³»ãèè¿ä»ä»æ¯ä¸ä¸ªè¡¨è±¡ï¼é£ä¹å®çå®è´¨æ¯ä»ä¹å¢ï¼\n\nèªèµä¸æ¯æ¯ä»ç»æè½çï¼èæ¯æ¯ä»ç»è´£ä»»çãè´£ä»»è¶å¤§ï¼å·¥èµè¶é«\n\nå¯¹äºç®¡çå²ä½ï¼å ä¸ºç»çäººä¸å±äºä¸ªäººè´¡ç®èï¼æä»¥å¶å·¥èµçä¸é¨åéå¸¸åå¢éç»©æç»å®ï¼ç§°ä¸ºç»©æå¥éãè¿ä¸ªå¥éä¸è¬å¨ç®¡çå²çå¨é¨èªé¬ä¸­çç¾åæ¯ä¼éçèªé¬çå¢å èå¢å ï¼æ¯å¦ï¼é«å±å¯è½å å° 50%ï¼èä¸­å±å å° 20%-30%ã\n\nå Intel CEO å®è¿ªÂ·æ ¼é²å¤«è¯´è¿ï¼æ¯ä¸ä»½å·¥ä½æåå«çæå¤§ä»·å¼é½æ¯æéçï¼ä¸ç®¡ä¸ä¸ªäººå¨è¿ä¸ªèä½ä¸å¾äºå¤ä¹ï¼æåæ»ä¼è¾¾å°èªèµçä¸éã è¿ä¸ªä¸éå°±æ¯å²ä½å·¥èµèå´çå¤©è±æ¿ãèå¤é¨å¸åºä¼æä¾ä¸äºå·¥èµç«å³æ¶¨ 50% çè³ç¿»åçæºä¼ãæ­¤æ¶ï¼åä¸è¦èªå¤§çä»¥ä¸ºä½ çä»·å¼è¢«ä½ä¼°äºï¼å¾å¯è½æ¯å¤é¨å¬å¸åºç°äºå²ä½ç©ºç¼ºï¼ç©ºç¼ºçå²ä½èè´£å®éå¯è½æ¯ä½ å¨å½åå¬å¸çèè´£æ´å¤§ï¼ä¹å°±æ¯è¯´ä½ è¿è¦èèèªå·±è½å¦æ¿æå¾èµ·ã\n\n\n# ææ¬\n\nå¸åºä¸çååæä¸¤ç§éå®æ¹å¼ï¼\n\n * åçæ´å¤ï¼å¤§åååºï¼èå©å¤é\n * åçæ´è´µï¼å¥¢ä¾åï¼ç¸å¯¹ææ¬ä¸ç¾åçæ¯å©\n\nå¯¹äºç¨åºåï¼ä¸»è¦çææ¬æä¸¤ä¸ªï¼\n\n * æè½ææ¬ï¼ä¸æ³¨äºæä¾ææ¯åæå¡æ¬èº«æå ç¨çæ¶é´åæ³¨æå\n * ä¼ éææ¬ï¼è®©ä½ æ½å¨ç"å®¢æ·"ç¥éä½ æè½æä¾çææ¯åæå¡çä»·å¼å ç¨çæ¶é´åæ³¨æå\n\nç¨åºåæä¾çææ¯æå¡å ä¸ºæ æ³åçæ´å¤ï¼æä»¥åªæä¸ç§éæ©ï¼åå¥¢ä¾åä¸æ ·åçæ´è´µï¼åææ¯å­¦ä¼åå¥¢ä¾åçä¸æ ·æèã\n\n\n# åå±ä¸åå\n\nçæ­£è®¤è¯ä½ ä»·å¼çäººï¼æç»ä¼æä¸ºä½ ä»·å¼çä¸é¨åã\n\n\n# VIII å³äºå´è¶£\n\nç®æ ï¼æè½åä¿ä½¿å´è¶£åæé¿çåå±ï¼å¹¶ä½¿ä»ä»¬éæ¸éåã\n\n\n# IX å³äºè¡\n\n> å½çº³æ¼ç»: WHY(ä¸ºä»ä¹)ãHOW(æä¹å)ãWHAT(åæäºä»ä¹)\n\n\n# 1. å­¦ä¹ \n\n * æ¹æ³ï¼å¿ãæãè¯´ãåãç¨\n   * å½±åå ç´ ï¼æå³èªèº«çå¥½å¥å¿ãé»è¾æ§ãææ§åï¼åæå³ç¯å¢çææãæ¦æ ·ååé¦\n * ç®æ ï¼åç¹(åæ£)ä¸ºç®(æ½è±¡), ç±ç®å¥ç¹; ä¸¾ä¸åä¸, èä¼è´¯é\n   * ç³»ç»å: ç¹ -> é¢ -> ä½\n   * ç»æå: å»ºç«ä¸å®¶ä½ç³», æ¹æ³è®º\n\n>> æ¦åµï¼è§£å³ä»ä¹é®é¢ï¼æ¯ä¸ªç¹åå°ä»ä¹ç¨åº¦\n>> å®è·µ - åä¸»å¹²åæå¶, ç±åºç¡å°ä¸å±å»ºç­\n>> æè - ç±æ¬è´¨å°ç»è, ç±æ¡æ¶å°å¨é¢\n>> æå± - è§æ¨¡ç±å°å°å¤§æ¶, éåå¼åè´¨å\n\n\n1\n2\n3\n4\n\n\n\n# 2. åäº\n\næè´(ONE MORE STEP) ã Plan B\n\n * é è°±ï¼èªå·±è¡¨è¾¾çæ¯ä¸ä¸ªè§ç¹ï¼é½è¦ææ¯æ(æ°æ®ãè¯¦æç­)\n   * éå => å®è·µ => åé¦ => è¿­ä»£\n     * "If you can\'t measure it, you canât manage it"(ä½ å¦ææ æ³åº¦éå®ï¼å°±æ æ³ç®¡çå®) - ç®¡çå­¦å¤§å¸-å½¼å¾å¾·é²å\n * ç»´åº¦ï¼é«ç»´åº¦æèãçå¾é®é¢\n * æè·¯ï¼åæ²»ãè¿­ä»£\n\n\n# 3. å¿\n\nå¦æè¯´ååæ¯æåçåºç³ï¼é£ä¹å¤å¿å°±æ¯æåçæ æ\n\n\n# 4. å®ä½\n\n * æ³æ¸æ¥å®ä½ï¼ç¬ç¹ä»·å¼ãå£å\n * ææ¯ & ä¸å¡\n   * ææ¯æ¯æä¸å¡ï¼å«æææ¯å¤ªå½åäºï¼å«ä¸æææ¯å½åäº\n   * åCEOä¸æ ·æè(é«ç»´æè)\n * ç§æåå±æ¹å\n   * èªå¨å + æºè½å\n   * éæ± ---\x3e è®¾è®¡ ---((å£°æå¼)æ°æ® + ç®æ³)---\x3e äº§å\n\n\n# 5. å·¥ä½éé¢ä¼°\n\nå½±åå·¥ä½éé¢ä¼°çä¸»è¦å ç´ æ¯äººï¼åå (æ¿æ¯) + å¤å \n\nå¸¸ç¨çæ¹æ³ï¼\n\n * äºçå¹æ¬¡æ¹ä¸ºåä½(å°æ¶)\n * ä¹è§ + æ²è§ ç³»æ°ç»åè¿è¡é¢ä¼°\n   * æéæ±çäººä¼ç¸å¯¹ä¹è§ï¼å®ç°éæ±çäººä¼ç¸å¯¹æ²è§ï¼æä»¥éè¦èå\n   * 80%çå·¥ä½éï¼é¢ç20%çä¸´æ¶æå¥å·¥ä½\n\n\n# X èªçãå½çº³\n\n\n# 1. èªç\n\n * ååä½ç°å¨ï¼è§£å³é®é¢çè½åï¼ä¾èµä»¥ä¸è½åï¼\n   * å­¦ä¹ è½åãç²¾çè½åãåä½è½åãé¢å¯¼è½å\n * æé¿çä½ç°:\n   * ææ¯ãè§é(åæ¬äººèãè®¤ç¥)\n * tips: èªæåæ --- æå§æç»ï¼ä¸è¦èå¤´èå°¾\n   * å§(ä¸ºä»ä¹è¦å); ç»(ææå¦ä½ï¼å¤çãå½¢ææ¹æ³è®ºï¼æ©å¤§ææï¼è¿ä¸æ­¥åªå 5%ä½å¾éè¦)\n\n\n# 2. ç»éª\n\n * è´£ä»»æï¼ä¸»å¨ææ, ä¸»å¨æ¿æ\n   * è§è²è½¬åï¼è§åå¶å®è\n * åè¯´(ç­æ¡)åæ­»ï¼ç­æ¡==æ¿æè´£ä»»ï¼ï¼ï¼\n * å±æºæï¼æ¥å­ä¸å¤©å¤©å¥½ä¸å¹´å¹´ååï¼åä¹äº¦å¦æ­¤\n * ç®æ æï¼å½ä½ å¿çåç²å£ä¸æ ·æ¶ï¼ä½ éè¦åä¸æ¥æ³æ³çä¸ºä»ä¹äº\n * äººæ´ä¹ æ¯éæ©é¢ï¼èä¸æ¯æèé¢\n * å·ä½çæ¹è¯æå©æé¿, æ½è±¡çæ¹è¯ææåæå³\n * éäººæ´éè¦ä¸ç¹ï¼éæ©åéæ©ç¸ä¿¡\n * èéªæåï¼é®æåæ¬¢çäººï¼æ¬¡ä¹ï¼é®æè®¨åçäººï¼ï¼ï¼\n\n\n# 3. èåçç¥è¯\n\n * ä¸ç§æ¨çæ¹å¼\n   * å½çº³æ¨çãæ¼ç»æ¨çãç±»æ¯æ¨ç\n * é»éåæ³åï¼what(è¡¨è±¡) how(æ¹æ³) why(ä¸ºä»ä¹,æ¬è´¨)\n   * What - How - Why : å®ç°æ·±å¥ç»èã1->0.1ã\n   * Why - How - What : å®ç°ææåé ã0->1ã\n * ç¬¬ä¸æ§åç\n   * åç§°âç¬¬ä¸åçâ, å¤å¸èå²å­¦å®¶äºéå£«å¤å¾·æåºçä¸ä¸ªå²å­¦æ¯è¯­ï¼"æ¯ä¸ªç³»ç»ä¸­å­å¨ä¸ä¸ªæåºæ¬çå½é¢,å®ä¸è½è¢«è¿èæå é¤"\n   * åéÂ·é©¬æ¯å(ç¹æ¯ææ±½è½¦CEO)çåºç¨ï¼åæº¯äºç©çæ¬è´¨, é¢ è¦åºåè®¤ç¥, éæ°æèæä¹å\n * meceåå\n   * å¯ä»¥ç¨äºæå»ºç¥è¯æ \n * PDCA å¾ªç¯\n   * å¶å«ä¹æ¯å°è´¨éç®¡çåä¸ºåä¸ªé¶æ®µï¼å³è®¡åï¼planï¼ãæ§è¡ï¼doï¼ãæ£æ¥ï¼checkï¼ãè¡å¨ï¼Actionï¼\n * ä¸è¥¿æ¹æè¯å·®å¼\n   * è¥¿æ¹ï¼ä¸å¸ åé  äºº\n   * ä¸æ¹ï¼äºº åçº§æ ç¥ ï¼èªæä¸­å¿æè¯å¼ºãè¦é¢å­\n * å¦ä½ä»ä¸ä¸ªå·¥ç¨å¸æç»´ï¼è½¬åæä¸ä¸ªäº§åç»ççæè\n   * é¡¹ç®ç®æ  => åä¸ç®æ \n\n\n# 4. èåçé®é¢\n\n * é¶ç¥è¯è¯æ: è®¤è¯çè®ºçä¸ä¸ªéè¦åè®®\n * æå åº­å°åé®é¢\n * ä¸¤å¯ç¿å¨ä¸äºç¸éé²å·ä½è´¢äº§çæåµä¸ï¼æ¯è¾è°æ´å¯æ\n\n\n# XI æ¨èéè¯»\n\n * ãéå­å¡åçã\n * ãé«æè½äººå£«çä¸ä¸ªä¹ æ¯ã\n * ãå¥½å¥½è¯´è¯ã\n * ãååã\n * ãææ¯è¿æ ·æ¿å°é£æçã\n * ãäººäººé½æ¯äº§åç»çã\n\n** TO BE CONTINUE XI XIII XIV XV **',normalizedContent:'# å³äºæ»ç»\n\n\n# i ç¥è¡åä¸\n\n> ç¥ï¼æå¯¼è¡ï¼è¡ï¼åé¦ç¥\n\n# ç¥ä¸è¡ãéåæ¯\n\nç¥è¡å­å¨äºåä¸ªæ¹åãå±é¢ãç»´åº¦ï¼å¹¶ç¸äºå½±åï¼ä¸åç(æå¤§æå°ç)ç¥åè¡é½æåèªçéåæ¯(éæ¬è´¨, æ¯æ¹æ³)ã\n\nå°å°æé¥­åä»ä¹ï¼å¤§å°äººçç®æ ï¼ä»¥åæä¹æåæ²éæå·§ãæä¹æåé¢å¯¼åãæä¹æé«æ¶å¥...ç­ç­\n\nå¦ï¼æä»¬æè°çä¸çè§åæ¹æ³è®ºä¹æ¯ç¥åè¡çä¸åè¡¨è¿°ï¼ä¸çè§ä¸»è¦è§£å³ä¸ç"æ¯ä»ä¹"çé®é¢ï¼èæ¹æ³è®ºä¸»è¦è§£å³"æä¹å"çé®é¢ã\n\n\n# å®¢è§äºå®\n\nä¸ä»¶ä»¶æå¤§æå°çå®¢è§äºå®æ±èæäºç¹æçä¸ç\n\nå¯¹å®¢è§äºå®ç±ç®åå°å¤æçéæ­¥æ¢³çå½¢æè®¤ç¥ãæºæ§ï¼\n\n\n# ç¥\n\n> å­¦ä¹ (è®¤è¯) -> æ¬è´¨ -> åæ£ãèæ³ -> æ½è±¡ -> åé \n\næä»¬éè¦éè¿å­¦ä¹ æ¥è®¤è¯è¿äºå®¢è§äºå®, æ´æå¶æ¬è´¨; è¿éè¦å¨æ¢ç©¶(ä¼å¤)å®¢è§äºå®(è¡¨è±¡)çæ¬è´¨è¿ç¨ä¸­ï¼æ½è±¡åºèªå·±çæºæ§(é); å¨ææ¡äºè¶³å¤çè®¤ç¥æ¶ï¼å¯ä»¥è¿è¡åä½ä»¥éªè¯è®¤ç¥åæ¶äº§çä»·å¼ã\n\næç»´æ¯å¢å¼ºè®¤ç¥çéè¦ææ®µãå¦ï¼5why æç»´æ¹å¼å¸®å©æä»¬æææ´æ·±å±æ¬¡çç¥ï¼æµç¨æç»´æ¹å¼å¸®å©æä»¬é«æçè¡\n\néçç¥çæ·±å¥ï¼å¤æåº¦åçååï¼æèç»´åº¦ä¹ä»ç¹ãçº¿ãé¢åå±å°å¤ç»´ãé«ç»´ï¼ä¸ªä½(å®¢è§å­å¨) --\x3e ç¯å¢ --\x3e çæ --\x3e ç³»ç» --\x3e å¿(æ¶æ¥å¤©å°çåå)\n\nåé åæ¯äººæéè¦çç´ è´¨ãç¥æå¤§çè½åå°±æ¯åé åï¼\n\n\n# è¡\n\n * è·µè¡èªå·±çè®¤ç¥\n   * just do it\n   * åå­æ§éå¼ä¹ï¼ååäºç©ä¹\n * éæ©\n   * æä»¬æ æ³æ§å¶èªèº«ä¹å¤çå¶å®ä»»ä½äºç©ï¼æä»¥æä»¬ç»å¸¸ä¼é¢å¯¹åç§éæ©\n   * æç»è¾¾å: æ¥æ±ååï¼ååæ¯å¸¸æï¼å¯ä¸ä¸åçå°±æ¯ååèªèº«\n   * çæ´»ä»æ¥æ²¡æå¹³è¡¡ï¼åªæåè(æéè¦çåææå´è¶£ç)ãæ¢å¥è¯è¯´ï¼æéè¦çäºï¼æ°¸è¿åªæä¸ä»¶ã\n\näººå®èå¤© å é¡ºå¿èä¸º ï¼\n\n\n# ii å³äºéæ©\n\n\n# åç°èªå·±ä»ä¹é½ä¸æï¼ä»ä¹é½æ³å­¦\n\nåç°èªå·±ä»ä¹é½ä¸æï¼ä»ä¹é½æ³å­¦ï¼åä»ä¹é½å­¦ä¸ç²¾ï¼æ¯ä¸æ¯ä¸ç§çæï¼è¿æ¯ä¸ä¸ªç¥ä¹ä¸å¾å¤äººåä¸çä¸ä¸ªé®é¢ã\n\né¦åï¼å½ä½ åç°ä»ä¹é½ä¸æï¼ä»ä¹é½æ³å­¦çæ¶åï¼æååçåºè¯¥ä¸æ¯è¿·æï¼èæ¯åºå¹¸ãå ä¸ºä½ çç®åä¸ååå±ä¸éï¼å¼å§æ¢ç´¢å¹¿éçä¸çãä¹æä»¥è¿·ææ¯å ä¸ºãä¸çãæ¯å¦æ­¤å¹¿éï¼å¦æä»»ä½æ¹åé½æ³æ¢ç´¢çè¯ï¼å¾å®¹æè¿·è·¯ããã\n\nå æ­¤é¢å¯¹æµ·éçç¥è¯ï¼é¦ååºå½æè¯å°å­¦æ¯å­¦ä¸å®çï¼å­¦äºä¸ç¨ä¹ä¼éå¸¸å®¹æå¿è®°ãæä»¥ï¼è¦æåèä¹å¿ï¼ä¸è½ä»ä¹é½å­¦ä¼ï¼ä¹å°±æ²¡å¿è¦ä»ä¹é½æ³å­¦ãè¿æ¯ä¸ç§å¿æï¼å¯ä»¥è®©ä½ é¢å¯¹æ ç©·éæ©çæ¶åä¸ä¼æç¹è±«ãè¿·æãææ§è¿äºè´é¢æç»ªã\n\né¢å¯¹å¤æå¤åãçä¸æ¸è¿å¤çè·¯å£ï¼å¦ä½éæ©ä¾ç¶æ¯ä¸ªå¤´ç¼çé®é¢ï¼è¿æ¶ä»è¯¸è¡å¨æ¯éæ©æ´éè¦ãå­¦ä¹ å°¤ä¸ºå¦æ­¤ï¼ä½ä¸ºæ°çå¼ç«¯ï¼å­¦ä¹ çç¶ææ¯å­¦ä»ä¹æ´éè¦ãå¾å¤ç¥è¯è¦å­¦ä¸æ®µæ¶é´æè½åç°å´è¶£ï¼æç¥éæ¯å¦æç¨ã\n\næ»ä¹ï¼ä»ä¹é½ä¸æï¼å¾æ­£å¸¸ï¼å ä¸ºè¿æ¯æ°çå¼å§ï¼ä»ä¹é½æ³å­¦ï¼æ¯ç¼ºå°åèçå¿æï¼åå¼å§å­¦ä¸ä¸ªåè¯´ï¼ä»ä¹é½ä¸ç²¾ï¼å­¦è¿å å¹´æè§åæï¼ä¸ä¸å°æ¶æç®ç²¾éã\n\næå¿è®³ï¼ä»ä¹é½æ³å­¦çæ¶åï¼å°±ä»ä¹é½å­¦ï¼ä½æ¯ä¸ç¹é½æ¯æµå°è¾æ­¢ï¼çä¼¼å¿å¿ç¢ç¢ï¼ä¸åçå­¦ä¹ ï¼å®éä¸å´æ¶è·çå¾®ãããèç¦èä¹ä¼åå¤åºç°ï¼ç»å¶åå å°±æ¯ï¼æ²¡ææå°±æã\n\né¢å¯¹ä¼å¤è·¯å£ï¼ä¸ç¥éå¦ä½éæ©æ¶ï¼éè¦è¿éè¡å¨èµ·æ¥ï¼å»æ¢ç´¢ï¼å°è¯æ¾åºåéçéè·¯ï¼ç¶ååæä¸å»ï¼å½è§è¿å½åéè·¯çç¾æ¯åï¼å¯ä»¥å¨æ¢ç´¢è¿çè·¯å£ä¸­åéæ©ä¸ä¸ªï¼ç¶ååæä¸å»ããã\n\n\n# åè\n\nè°¨è®°ï¼çæ´»ä»æ¥æ²¡æå¹³è¡¡ï¼åªæåè(æéè¦çåææå´è¶£ç)ãæ¢å¥è¯è¯´ï¼æéè¦çäºï¼æ°¸è¿åªæä¸ä»¶ã\n\næ³è¦å¾å°æ´å¤çé±ï¼é£å°±çºç²æ´å¤çäº«ä¹æ¶é´ï¼æ³è¦é¡¾åå®¶åº­ï¼é£å¿å®è¦å¨èåºéååºå¦¥åï¼æ³è¦è¯´èµ°å°±èµ°çæè¡ï¼é£å°±è®©èªå·±è½å¤å¨å½ä¸æå¨çç¯å¢ä¸­è±ç¦»åºæ¥ââæ è®ºæ¯èåºä½ç½®çæ¾æï¼äº¦æèæ¯å®¶åº­äºå¡çæ¾æã\n\næå®³æçï¼åæ¯ä¸æ¿æåé©ï¼ä¹ä¸æ¿æèå¾çé£ä¸é¨åäººââå°å¤´æ¥èªå·±åªä¸é¢é½æ²¡æå°½æå¾å°ï¼å¹¶ä¸è¿è¦è´£æªè¿è¿åççæ´»æ¬èº«ã\n\næä»¬å¯ä»¥å°è¯ä»¥ä¸ç§ä¸å¸è§è§ï¼æ¥è§æèªå·±æååºçç§ç§éæ©ãå°æåå¤§æ¦çä¼åç°ï¼è¿ä¸è·¯èµ°æ¥ï¼å¨é½æ¯èªå·±ææ·±å¤çæ¬²æå¨é©±ä½¿ï¼å¨æ¯èªææ æ³èå¼çé¨åå¨æ¯æã\n\næ»ä¹ï¼å¯¹å¤§å¤æ°äººæ¥è¯´ï¼éæ©æ¯å¨åç¨è¿å»çç»éªãè¯å¾æå¯¼ç°å¨ççæ´»ãä»¥æå¾å¨æªæ¥è·çãå¨é¢å¯¹éæ©æ¶ï¼æç»åºçå»ºè®®å¦ä¸ï¼å¯ä»¥åä¸ºä¸åå¹¿ä¸¤ä¸ªæ¹é¢æ¥èèã\n\n * ä¸ï¼å°±æ¯è¦æ¾å°èªå·±ç®åæéè¦çåèªå·±ææå´è¶£çé¢åï¼è®°ä½ï¼ä¸å®è¦å®ç¼ºæ¯æ»¥ï¼ä¿æä¸ä¸ªå°èç²¾çååã\n * å¹¿ï¼å°±æ¯å»å¹¿æ³æ¶çå«çé¢åï¼è¿äºé¢åéè¦å¯¹å¾çååå°±æ¯ï¼å¥½è¯»ä¹¦ï¼ä¸æ±çè§£ï¼åå¿å¨è¿äºé¢åé»çè§å°ãè¿æ ·æ¢ä¸ä¼ç£¨ç­å­¦ä¹ çå´è¶£ï¼ä¹å¯ä»¥ä½¿ä½ å°ææå°±æã\n\nä¸æ ·ä¸è¥¿å­¦ä¸ç²¾å°±è¯´æè¿ä¸ªä¸è¥¿å¨ä½ ç°å®çæ´»ä¸­å¹¶æ²¡æå¾å°é©¬ä¸çåºç¨ãå°±åæä»¬çä¹¦ä¸æ ·ï¼åå¦æä»¬è½å¤å¸¦çé®é¢å»çä¹¦ï¼é£æä»¬å°±å¯ä»¥å¾å¿«çè§£å³è¿ä¸ªé®é¢ï¼é£æä»¬å°±ä¼å¯¹è¿ä¸ªç­æ¡å¾å°è±¡æ·±å»ãé£åå¦æä»¬å­¦ä¹ ä¸ä¸ªä¸è¥¿ï¼åªæ¯åçº¯ä¸ºäºå­¦èå­¦ï¼ç°å®çæ´»ä¸­æ ¹æ¬æ²¡æç¨å°çè¯ï¼é£å°±æ¯æ²¡æå¿è¦çå­¦ä¹ äºã\n\n\n# iii å³äºæç»´\n\n> æ·±åº¦æç»´æ¯æ°æ®(è¡¨è±¡)è½¬åä¸ºè®¤ç¥çææå·¥å·\n\nå¥½çæç»´æ¹å¼ä¸ºç¥æä¾æ´å¥½çåæï¼å¯¹çæç»´æ¹å¼ä¸ºè¡æå¯¼é«æçè·¯å¾\n\n\n# æ·±åº¦æç»´\n\næ´å¯ç»å¾®ï¼è®©ä½ é«æçè§£å³æ¥å¸¸çå·ä½äºç©\n\nå¸¸è§çæ¹æ³æï¼\n\n 1. æç»´é»è¾é¾\n    * 5whyã5so\n 2. æ¢ä½æç»´\n 3. å¯è§åæç»´\n 4. æµç¨æç»´\n\n\n# é«ç»´æç»´\n\næå¼æç»´çæ ¼å±ï¼è®©ä½ ç«å¨æ´é«ãæ´å¹¿çè§è§çå¾é®é¢ï¼ä»¥æ´æ·±å»æ´å·§å¦çæ¹å¼è§£å³é®é¢\n\nå¸¸è§çæ¹æ³æï¼\n\n 1. çææç»´\n 2. ç³»ç»æç»´\n 3. å¤§å¿æç»´\n    * é©¬å¤ªæåº\n 4. åµæ³æç»´\n\n\n# iv å³äºæ²é\n\nå¥½èäººï¼è»é»è¿ï¼éªè¾©ç»ï¼ç©èªæï¼åå¨ä¸¥ï¼æ£å¼ºæï¼æ­¤å­èï¼åä¸ä¹å¼ä¹.\n                                   - ãèµæ²»éé´Â· åçºªååäºÂ·å¾·å®å»ºä¸­åå¹´ã\n\n\n1\n2\n\n\næ²éäº¤æµæ¯å¿éæè½ï¼å®æå©äºèªæè¿åï¼å£å¤´æ²é <--- (äºèçæè¡¡) ---\x3e æå­æ²é\n\næ²éçè¦ç¹ï¼\n\n * ç©ºæ¯å¿æ(è°¦é, èæè¥è°·)\n   * æå©äºæä»¬æ§å¶æ§å¶æç»ª\n * æ¢ä½æè\n   * å±æ(åçå¿)\n   * å©çåäº«(f.a.b)ï¼å³æ³¨å¯¹æ¹çéæ±, è¾¾æèªå·±çç®æ \n\n\n# å­¦ä¼è®²å¥½ä¸ä¸ªæäº\n\n> æèª<ä½ å¦ä½å¬ææè¯´çè¯>(é»æ§ä¸­)\n\nè®²å¥½ä¸ä¸ªæäºçä¸å¤§ååï¼ç®åãå·ä½ãæå¤(æä¸¤ç§å®æææ³: é å²çªãè®¾æ¬å¿µ)\n\nå¯¹äºå·ä½ï¼è¿éæä¸ªä¾å­ï¼å¨2000å¹´ä¸çºªä¹äº¤çæ¶åï¼åºæ¬ä¸ææçå½å®¶é¢å¯¼äººåè¡¨è®²è¯çæ¶åï¼é½æ¯è¯´ä¸äºåå¤§ç©ºçæ¿æ¯åå±æï¼ä½æ¯æ°å å¡é¢å¯¼äººçä¸ä¸ªè®²è¯ï¼è®©äººå°è±¡æ·±å»ï¼ä»è¯´å¨æªæ¥3å¹´ï¼æä»¬å¸ææ¯ä¸ªåæé½æåçº¸ãååï¼å¥½å·ä½åï¼è¿ä¹å¤å¹´è¿å»äºï¼æå·²ç»ä¸è®°å¾ä¸­å½é¢å¯¼äººãç¾å½é¢å¯¼äººå¨é£ä¸ªæ¶åè®²äºä»ä¹ï¼ä½å¯ç¬è®°å¾ä½ï¼æ°å å¡é¢å¯¼äººè¯´çé£çªè¯ã\n\n\n# scqaæ³å\n\nscqaæ³åï¼ä¸ä¸ªè®²æäºå±¡è¯ä¸ç½çé»è¾ãæ¯å¦ä¸é¢çæäºï¼\n\n    situation: 520å¿«å°äºï¼ææ³ä¹°ä¸ªææï¼åå¥³æåæ±å©\n    conflict: ä¸è¿ä¹°ææçé±ä¸å¤\n    question: æè¯¥æä¹åè¶³ä¸å¤çé£ç¬é±\n    auswer: æ¾é«ä¸­çä¸ä¸ªéå¥ä»¬å\n\n\n1\n2\n3\n4\n\n\næè°çscqaæ³åï¼å°±æ¯åºæ¯-å²çª-é®é¢-è§£å³æ¹æ¡\n\n\n# staræ³å\n\nstaræ³åï¼ä¸ä¸ªè¡¨è¾¾èªå·±çå¥½æ¹æ³\n\n    situation(æå¢)\n    task(ä»»å¡)\n    action(è¡å¨, ææ¹æ¡ååæ³)\n    result(ç»æ, æææåæä¹)\n\n\n1\n2\n3\n4\n\n\ntips: ç»æåè¡\n\n\n# v å³äºå½±åå\n\n> æ³è®©å«äººæ¥åçä¸åé½æ¯ååï¼åæ¬æä»¬èªå·±\n\nå½±åååæ¬å¯¹å¤ãå¯¹åä¸¤é¨åï¼\n\n * å¤§é¨åäººæå°å½±ååï¼ä¼æå°ä¸ä¸ªææ¯äººåå¨å¤é¨è¢«å¤å°ææ¯ä¼è®®éè¯·ï¼æå¤å°ææ¯æç« è¢«å¶ä»äººå¼ç¨åè®¤å¯ãå¶å®å¯¹å¤å½±ååçç®æ æ¯ä½ç¨å¨å¯¹åå½±ååä¸ã\n * éè¿å¯¹ä¸ççå½±ååä»¥åæ¹æ¡å¤æ­åå³ç­ä¸æ­çéªè¯ï¼å»ºç«ç®¡çå±å¯¹äºææ¯å¢éæ´ä½çä¿¡ä»»ãè¿æ ·å¨å³ç­åé¢å¤è¿ç¨å½ä¸­ï¼ææ¯ç®¡çèçææ¯åºå æå¯è½æè¯è¯­æï¼å¯ä»¥è®©å¬å¸ä»¥åéçææ¯èå¥åææ¯è·¯çº¿æ¥åå±ï¼é¿åè¿å°æèè¿å¤çææ¯æå¥å½±åä¸å¡ã\n * å¯¹äºåå·¥çå½±ååï¼æ¯åå·¥åèªå¿åºçä¸å¼ç¾åºï¼éè¿åç¡®çææ¯å¤æ­ãæ­£ç¡®çç®¡çå³ç­ãåéçé¢å¯¼æ¹æ³è®©åå·¥ä¿¡æå³ç­èèä¸æ¯å ä¸ºèä½çé«ä½èå»æ§è¡ãè¿æ ·æå¯ä»¥æé ä¸ä¸ªç§¯æåä¸ãæµ·çº³ç¾å·çäº§åææ¯å¢éã\n\n\n# ä¸ªäººåç\n\nä»ä¹æ¯"ä¸ªäººåç"ï¼ç®åæ¥è¯´ï¼å°±æ¯ä¸ä¸ªäººå¸¦ç»å«äººçå°è±¡ï¼ä»¥åæå½±åçäººçèå´ãæä»¬è¯´ä¸ä¸ªäººä¸ªäººåçå¾å¥½ï¼éå¸¸æ¯è¯´ä»å¨æä¸æ¹é¢æä¸é¿ï¼ææå¨ï¼åæ¶ä»è¿å½±ååå¸®å©äºå¾å¤äººã\n\nä»è¿ä¸ªè§åº¦åºåï¼ææ¯äººå¯ä»¥ä»ä¸é¢å ä¸ªç»´åº¦æèï¼æé èªå·±çä¸ªäººåçæèå½±ååï¼\n\n * éè¿ç¤¾äº¤åªä½å¤åè¡¨è§ç¹ï¼å°¤å¶æ¯éå¯¹ç­ç¹äºä»¶ï¼è®©èªå·±å¨å³é®æ¶å»ä¸ç¼ºä½ãä½æ¯è¿ä¸ªæ¹å¼ä¹æèªå·±çå¯ä½ç¨ï¼å¦æå¨ç¤¾äº¤åªä½ä¸è¿äºæ´»è·ï¼æ¯å¦å¨æ¯ä¸ªç¾¤éé½è½çå°ä»å¨è¯´è¯ï¼å¥½åéæ¶é½å¨ååºå¤§å®¶ï¼å¯è½ä¼ç»äººçä¸æ²¡æä¸æ³¨äºæ¬èå·¥ä½çå°è±¡ãå­¦ä¼âéèèªå·±çå®åâï¼å¤åè¡¨æè§å°åæçææ®çåå®¹ï¼å¯ä»¥ä½ä¸ºèªå·±ä½¿ç¨ç¤¾äº¤åªä½çç¤¼ä»ªä¹ä¸ã\n * å¤åä¸æåè´¨çä¼è®®ï¼å¹¶åè¡¨æ¼è®²ï¼æèåâåå®¢ / å¬ä¼å·âä¹æ¯ä¸éçåæ³ãå ä¸ºä¸è®ºæ¯ä¸ä¸ª 45 åéçåäº«ï¼è¿æ¯ä¸ä¸ª 2000 å­çæç« ï¼é½ä»£è¡¨çä½ å¯¹ä¸ä¸ªé®é¢çæ·±å¥æèï¼è¿å¨ç°å¨å·²ç»æ³æ»¥çæµå±ä¿¡æ¯æµä¸­æ¯æ¯è¾ç¨æçä¸è¥¿ï¼èªç¶ä¼åå°æ´å¤äººçå³æ³¨ãéè¦æ³¨æçæ¯ï¼ä¸è¦ä¸ä¸ªåå®¹å°å¤è®²ï¼è¦åå¶ï¼å°±å¥½åæ­¦ä¾ å°è¯´éé¢çåå®¢ï¼ä¸æ¯éææåçï¼åä¸åºæï¼å¿å®ç½®æäººäºæ­»å°ãå¦ææ¯å¬å¸éè¦èªå·±å¤é²é¢ï¼é£ä¹è³å°æ¯æ¬¡è®²çåå®¹è¦æ 30% çæ´æ°ã\n * åºä¹¦ï¼å¯è½æ¯å½åæææçå»ºç«ä¸ªäººåççæ¹æ³ï¼å°¤å¶æ¯åä¸äºæåççåºçç¤¾åä½ãéå¸¸æåµä¸ï¼è¶æ¯é¾åº¦é«çäº§åºï¼è¶å®¹æåäººè¯å®ãå¦æè¯´å¬ä¼å·ä»£è¡¨ä¸ä¸ªäººå½ä¸çæ·±å¥æèï¼åºä¹¦åä»£è¡¨ä¸ä¸ªäººå¯¹è¿å»ä¸æ®µæ¶é´çæ·±å¥æ»ç»ï¼èä¸è¿è¦è±è´¹æ°ææå®å½¢ææå­ååºæ¥ï¼æ¯ä»£è¡¨çä¸ç§ä¸¥èçï¼çå®çä»åºã\n\n\n# vi å³äºé¢å¯¼å\n\n> é¢å¯¼åï¼å°±æ¯"æäº"çè½å\n\né¢å¯¼åï¼ä¹å°±æ¯"æäº"çè½åï¼å¯¹æç»ç»æè´è´£æ¯çº§é¢å¯¼åçæé«ä½ç°ãé¢å¯¼åå°±æ¯ç¨åç§åæ ·çæ¹æ³ãäººåãå½±ååãå·å¬åãå³ç­åå°ä¸ä¸ªäºæä» 0 å° 1 çè½åï¼å¦ææäºæåæ 0.99ï¼é½ä¸æ¯é¢å¯¼åçä½ç°ã\n\n\n# ç¥\n\nå¹å»é¢å¯¼åéè¦çç¼äºä»ä»¥ä¸å ç§è½ååç´ è´¨ï¼\n\n * è½æäºçè½å\n * å³ç­å\n   * è¿éææ¿å¹¶ä¸ºç»æè´è´£çè½å\n     * å¤§å®¶æçè§£çå³ç­ï¼ç»å¸¸æ¯ç»èæ¿ä¸ä¸ªæ¹æ¡ï¼èæ¿ä»ä¸­ææ¿ä¸ä¸ªæå¥½çï¼ç¶åè®©å¤§å®¶å»æ§è¡ãå¶å®å®éæåµå¹¶ä¸æ¯è¿æ ·çï¼ä½ä¸ºä¸ä¸ªé«çº§ç®¡çèï¼ç»å¸¸è½çå°ä¸å±éå°ä¸äºå°é¾çç(é®é¢)ï¼å¤§å®¶æ³å°½ä¸ååæ³å»æ¥çè¿ä¸ªçï¼å¥½æ¥ççåºå±ãä¸­å±ç®¡çèé½æå®äºï¼åºç°å¨ä½ é¢åçä¸å®é½æ¯"ä»äººç"ãæä»¥ï¼ææ¯ç®¡çèçå°çæåµï¼ç»å¸¸ä¸æ¯"ä¸¤å¥½éå¶ä¼"ï¼èæ¯"ä¸¤å®³åå¶è½»"ãéä¿çè®²ï¼é¢åä¸¤å¨ç¿ï¼ä¸å¨å¤§çä¸å¨å°çï¼è®©ä½ å¿é¡»éä¸å¨åï¼å¦æä½ ä¸è¿éç¡®å®ï¼è¿ä¸¤å¨é©¬ä¸åèªå¢é¿ä¸åã\n * æ²éå\n   * å¾å¬ä¸åç¡®åé¦çè½å\n     * ç®åå°è¯´ï¼æ²éåï¼å°±æ¯å¨åéçæ¶é´å¯¹åéçäººç¨åéæ¹æ³è¯´åéçäºæãä½ç°å¨ï¼å¯¹å¤äº¤æµãå¯¹ä¸æ²é(åceoä¸æ ·æèé®é¢ãæ°æ®è¯´è¯)ãå¯¹ä¸æ²éç­ã\n * å½±åå\n   * å·å¬ç®¡çå±ååå·¥ä¸è´è¡å¨çè½åã"èä½ä¸æ¯å«äººç»çï¼èæ¯èªå·±æ£åºæ¥ç"ï¼è¿å¥è¯å°±æ¯å½±ååççå®è¡¨ç°ã\n * åä¸æç»´\n * ææ¯åç»(æç¥å±æ¬¡)\n\n\n# è¡\n\nè°¨è®°ï¼å®°ç¸å¿èµ·äºå·åºï¼çå°å¿åäºåä¼\n\nå¾ç´åè¯´è¿ï¼ç«å¨ç®¡çèçè§åº¦æ¥è®²ï¼ç»©æç®¡çå°±æ¯è¦è®©ä½ çä¸å±é½æ¿æè·çä½ ä¸èµ·å¹²ã\n\né¢æå¢éå¼åæåï¼\n\n * å¤è®¨è®ºãç¨ç½æ¿ï¼å¤è·è¸ªï¼è¦é­ç¯\n\nsmart\n\nå°å¬å¸å¦åè½»éªåµï¼ææ·ãéåº¦ãæ»å»ï¼ï¼å¤§å¬å¸å¦åééªåµï¼ç¨³æç¨³æï¼é²å¾¡ï¼å®å¨ï¼éå¢åï¼\n\næµç¨çææ³ç²¾é«æ¯ä»ä¹å¢ï¼\n\n * ååµåãåä¼åãååºåã ååä¸ºä¸æ ·ï¼ç¨æµç¨è§£æ¾ç®¡ç\n\n\n# vii å³äºä»·å¼ä¸ä»·æ ¼\n\nä¸çæ¯ä¸å¯¹ç§°çãæ­£æ¯å ä¸ºä¸å¯¹ç§°ï¼ææäºåç§éæ±ï¼ç±æ­¤äº§çäºä»·å¼ä¸ä»·æ ¼ã\n\n\n# ä¸å¯¹ç§°\n\nå¾å¤äººé½æä¸ªè®¤ç¥è¯¯åºï¼è§å¾èªå·±"è¿ä¹ä¸è¡ï¼é£ä¹ä¸ä¼ï¼æ²¡æä»ä¹æé¿ç"ï¼æä»¥æ²¡æèµé±çæºä¼ãå¶å®ï¼ä»»ä½çä¸å¯¹ç§°é½å¯è½èµé±ï¼è¦åäºåæ"ä¸å¯¹ç§°"ã\n\nå¸¸è§çä¸å¯¹ç§°å¯ä»¥åç±»ä¸º:\n\n 1. èµæºä¸å¯¹ç§°: ä½ æçï¼å«äººæ²¡æ\n 2. ä¿¡æ¯ä¸å¯¹ç§°: ä½ ç¥éçï¼å«äººä¸ç¥é\n\n * å å¹´åï¼æä¸ªäººå¶ä½äºä¸æ¬çµå­ä¹¦ï¼æå¤§å®¶å¨ç¾å½äºé©¬éç½ç«ä¸ä¼ çµå­ä¹¦æ¥èµé±ãè¿æ¬çµå­ä¹¦ä¹å°±æ¯40å¤é¡µï¼å¶å®å°±æ¯å°å¨äºé©¬éç½ç«ä¸ä¼ çµå­ä¹¦çæµç¨æªå¾è¯´æèå·²ï¼å¾å¤åå®¹é½æ¯å®ç½ä¸­å°±æäºãä»å°è¿æ¬ä¹¦çå®ä»·å®ä½49åï¼è½»æ¾éå®å åä¹è³ä¸ä¸å¥ã\n\n 3. è®¤ç¥ä¸å¯¹ç§°: ä½ ä¼çï¼å«äººä¸ä¼\n\n * åå®¹ä»è´¹é ä»ä¹æ¥èµé±ï¼å¶å®å°±æ¯å°ç¥è¯ææ¯æè½éè¿æå¿åäº«çæ¨¡å¼æ¥è¿è¡èµé±ã\n\n\n# èªèµ\n\næä»¬å¸¸å¸¸è®¤ä¸ºå·¥èµçé«ä½ä¼¼ä¹åä½ çæè½ãç»éªåæ­£æ¯å³ç³»ãèè¿ä»ä»æ¯ä¸ä¸ªè¡¨è±¡ï¼é£ä¹å®çå®è´¨æ¯ä»ä¹å¢ï¼\n\nèªèµä¸æ¯æ¯ä»ç»æè½çï¼èæ¯æ¯ä»ç»è´£ä»»çãè´£ä»»è¶å¤§ï¼å·¥èµè¶é«\n\nå¯¹äºç®¡çå²ä½ï¼å ä¸ºç»çäººä¸å±äºä¸ªäººè´¡ç®èï¼æä»¥å¶å·¥èµçä¸é¨åéå¸¸åå¢éç»©æç»å®ï¼ç§°ä¸ºç»©æå¥éãè¿ä¸ªå¥éä¸è¬å¨ç®¡çå²çå¨é¨èªé¬ä¸­çç¾åæ¯ä¼éçèªé¬çå¢å èå¢å ï¼æ¯å¦ï¼é«å±å¯è½å å° 50%ï¼èä¸­å±å å° 20%-30%ã\n\nå intel ceo å®è¿ªÂ·æ ¼é²å¤«è¯´è¿ï¼æ¯ä¸ä»½å·¥ä½æåå«çæå¤§ä»·å¼é½æ¯æéçï¼ä¸ç®¡ä¸ä¸ªäººå¨è¿ä¸ªèä½ä¸å¾äºå¤ä¹ï¼æåæ»ä¼è¾¾å°èªèµçä¸éã è¿ä¸ªä¸éå°±æ¯å²ä½å·¥èµèå´çå¤©è±æ¿ãèå¤é¨å¸åºä¼æä¾ä¸äºå·¥èµç«å³æ¶¨ 50% çè³ç¿»åçæºä¼ãæ­¤æ¶ï¼åä¸è¦èªå¤§çä»¥ä¸ºä½ çä»·å¼è¢«ä½ä¼°äºï¼å¾å¯è½æ¯å¤é¨å¬å¸åºç°äºå²ä½ç©ºç¼ºï¼ç©ºç¼ºçå²ä½èè´£å®éå¯è½æ¯ä½ å¨å½åå¬å¸çèè´£æ´å¤§ï¼ä¹å°±æ¯è¯´ä½ è¿è¦èèèªå·±è½å¦æ¿æå¾èµ·ã\n\n\n# ææ¬\n\nå¸åºä¸çååæä¸¤ç§éå®æ¹å¼ï¼\n\n * åçæ´å¤ï¼å¤§åååºï¼èå©å¤é\n * åçæ´è´µï¼å¥¢ä¾åï¼ç¸å¯¹ææ¬ä¸ç¾åçæ¯å©\n\nå¯¹äºç¨åºåï¼ä¸»è¦çææ¬æä¸¤ä¸ªï¼\n\n * æè½ææ¬ï¼ä¸æ³¨äºæä¾ææ¯åæå¡æ¬èº«æå ç¨çæ¶é´åæ³¨æå\n * ä¼ éææ¬ï¼è®©ä½ æ½å¨ç"å®¢æ·"ç¥éä½ æè½æä¾çææ¯åæå¡çä»·å¼å ç¨çæ¶é´åæ³¨æå\n\nç¨åºåæä¾çææ¯æå¡å ä¸ºæ æ³åçæ´å¤ï¼æä»¥åªæä¸ç§éæ©ï¼åå¥¢ä¾åä¸æ ·åçæ´è´µï¼åææ¯å­¦ä¼åå¥¢ä¾åçä¸æ ·æèã\n\n\n# åå±ä¸åå\n\nçæ­£è®¤è¯ä½ ä»·å¼çäººï¼æç»ä¼æä¸ºä½ ä»·å¼çä¸é¨åã\n\n\n# viii å³äºå´è¶£\n\nç®æ ï¼æè½åä¿ä½¿å´è¶£åæé¿çåå±ï¼å¹¶ä½¿ä»ä»¬éæ¸éåã\n\n\n# ix å³äºè¡\n\n> å½çº³æ¼ç»: why(ä¸ºä»ä¹)ãhow(æä¹å)ãwhat(åæäºä»ä¹)\n\n\n# 1. å­¦ä¹ \n\n * æ¹æ³ï¼å¿ãæãè¯´ãåãç¨\n   * å½±åå ç´ ï¼æå³èªèº«çå¥½å¥å¿ãé»è¾æ§ãææ§åï¼åæå³ç¯å¢çææãæ¦æ ·ååé¦\n * ç®æ ï¼åç¹(åæ£)ä¸ºç®(æ½è±¡), ç±ç®å¥ç¹; ä¸¾ä¸åä¸, èä¼è´¯é\n   * ç³»ç»å: ç¹ -> é¢ -> ä½\n   * ç»æå: å»ºç«ä¸å®¶ä½ç³», æ¹æ³è®º\n\n>> æ¦åµï¼è§£å³ä»ä¹é®é¢ï¼æ¯ä¸ªç¹åå°ä»ä¹ç¨åº¦\n>> å®è·µ - åä¸»å¹²åæå¶, ç±åºç¡å°ä¸å±å»ºç­\n>> æè - ç±æ¬è´¨å°ç»è, ç±æ¡æ¶å°å¨é¢\n>> æå± - è§æ¨¡ç±å°å°å¤§æ¶, éåå¼åè´¨å\n\n\n1\n2\n3\n4\n\n\n\n# 2. åäº\n\næè´(one more step) ã plan b\n\n * é è°±ï¼èªå·±è¡¨è¾¾çæ¯ä¸ä¸ªè§ç¹ï¼é½è¦ææ¯æ(æ°æ®ãè¯¦æç­)\n   * éå => å®è·µ => åé¦ => è¿­ä»£\n     * "if you can\'t measure it, you canât manage it"(ä½ å¦ææ æ³åº¦éå®ï¼å°±æ æ³ç®¡çå®) - ç®¡çå­¦å¤§å¸-å½¼å¾å¾·é²å\n * ç»´åº¦ï¼é«ç»´åº¦æèãçå¾é®é¢\n * æè·¯ï¼åæ²»ãè¿­ä»£\n\n\n# 3. å¿\n\nå¦æè¯´ååæ¯æåçåºç³ï¼é£ä¹å¤å¿å°±æ¯æåçæ æ\n\n\n# 4. å®ä½\n\n * æ³æ¸æ¥å®ä½ï¼ç¬ç¹ä»·å¼ãå£å\n * ææ¯ & ä¸å¡\n   * ææ¯æ¯æä¸å¡ï¼å«æææ¯å¤ªå½åäºï¼å«ä¸æææ¯å½åäº\n   * åceoä¸æ ·æè(é«ç»´æè)\n * ç§æåå±æ¹å\n   * èªå¨å + æºè½å\n   * éæ± ---\x3e è®¾è®¡ ---((å£°æå¼)æ°æ® + ç®æ³)---\x3e äº§å\n\n\n# 5. å·¥ä½éé¢ä¼°\n\nå½±åå·¥ä½éé¢ä¼°çä¸»è¦å ç´ æ¯äººï¼åå (æ¿æ¯) + å¤å \n\nå¸¸ç¨çæ¹æ³ï¼\n\n * äºçå¹æ¬¡æ¹ä¸ºåä½(å°æ¶)\n * ä¹è§ + æ²è§ ç³»æ°ç»åè¿è¡é¢ä¼°\n   * æéæ±çäººä¼ç¸å¯¹ä¹è§ï¼å®ç°éæ±çäººä¼ç¸å¯¹æ²è§ï¼æä»¥éè¦èå\n   * 80%çå·¥ä½éï¼é¢ç20%çä¸´æ¶æå¥å·¥ä½\n\n\n# x èªçãå½çº³\n\n\n# 1. èªç\n\n * ååä½ç°å¨ï¼è§£å³é®é¢çè½åï¼ä¾èµä»¥ä¸è½åï¼\n   * å­¦ä¹ è½åãç²¾çè½åãåä½è½åãé¢å¯¼è½å\n * æé¿çä½ç°:\n   * ææ¯ãè§é(åæ¬äººèãè®¤ç¥)\n * tips: èªæåæ --- æå§æç»ï¼ä¸è¦èå¤´èå°¾\n   * å§(ä¸ºä»ä¹è¦å); ç»(ææå¦ä½ï¼å¤çãå½¢ææ¹æ³è®ºï¼æ©å¤§ææï¼è¿ä¸æ­¥åªå 5%ä½å¾éè¦)\n\n\n# 2. ç»éª\n\n * è´£ä»»æï¼ä¸»å¨ææ, ä¸»å¨æ¿æ\n   * è§è²è½¬åï¼è§åå¶å®è\n * åè¯´(ç­æ¡)åæ­»ï¼ç­æ¡==æ¿æè´£ä»»ï¼ï¼ï¼\n * å±æºæï¼æ¥å­ä¸å¤©å¤©å¥½ä¸å¹´å¹´ååï¼åä¹äº¦å¦æ­¤\n * ç®æ æï¼å½ä½ å¿çåç²å£ä¸æ ·æ¶ï¼ä½ éè¦åä¸æ¥æ³æ³çä¸ºä»ä¹äº\n * äººæ´ä¹ æ¯éæ©é¢ï¼èä¸æ¯æèé¢\n * å·ä½çæ¹è¯æå©æé¿, æ½è±¡çæ¹è¯ææåæå³\n * éäººæ´éè¦ä¸ç¹ï¼éæ©åéæ©ç¸ä¿¡\n * èéªæåï¼é®æåæ¬¢çäººï¼æ¬¡ä¹ï¼é®æè®¨åçäººï¼ï¼ï¼\n\n\n# 3. èåçç¥è¯\n\n * ä¸ç§æ¨çæ¹å¼\n   * å½çº³æ¨çãæ¼ç»æ¨çãç±»æ¯æ¨ç\n * é»éåæ³åï¼what(è¡¨è±¡) how(æ¹æ³) why(ä¸ºä»ä¹,æ¬è´¨)\n   * what - how - why : å®ç°æ·±å¥ç»èã1->0.1ã\n   * why - how - what : å®ç°ææåé ã0->1ã\n * ç¬¬ä¸æ§åç\n   * åç§°âç¬¬ä¸åçâ, å¤å¸èå²å­¦å®¶äºéå£«å¤å¾·æåºçä¸ä¸ªå²å­¦æ¯è¯­ï¼"æ¯ä¸ªç³»ç»ä¸­å­å¨ä¸ä¸ªæåºæ¬çå½é¢,å®ä¸è½è¢«è¿èæå é¤"\n   * åéÂ·é©¬æ¯å(ç¹æ¯ææ±½è½¦ceo)çåºç¨ï¼åæº¯äºç©çæ¬è´¨, é¢ è¦åºåè®¤ç¥, éæ°æèæä¹å\n * meceåå\n   * å¯ä»¥ç¨äºæå»ºç¥è¯æ \n * pdca å¾ªç¯\n   * å¶å«ä¹æ¯å°è´¨éç®¡çåä¸ºåä¸ªé¶æ®µï¼å³è®¡åï¼planï¼ãæ§è¡ï¼doï¼ãæ£æ¥ï¼checkï¼ãè¡å¨ï¼actionï¼\n * ä¸è¥¿æ¹æè¯å·®å¼\n   * è¥¿æ¹ï¼ä¸å¸ åé  äºº\n   * ä¸æ¹ï¼äºº åçº§æ ç¥ ï¼èªæä¸­å¿æè¯å¼ºãè¦é¢å­\n * å¦ä½ä»ä¸ä¸ªå·¥ç¨å¸æç»´ï¼è½¬åæä¸ä¸ªäº§åç»ççæè\n   * é¡¹ç®ç®æ  => åä¸ç®æ \n\n\n# 4. èåçé®é¢\n\n * é¶ç¥è¯è¯æ: è®¤è¯çè®ºçä¸ä¸ªéè¦åè®®\n * æå åº­å°åé®é¢\n * ä¸¤å¯ç¿å¨ä¸äºç¸éé²å·ä½è´¢äº§çæåµä¸ï¼æ¯è¾è°æ´å¯æ\n\n\n# xi æ¨èéè¯»\n\n * ãéå­å¡åçã\n * ãé«æè½äººå£«çä¸ä¸ªä¹ æ¯ã\n * ãå¥½å¥½è¯´è¯ã\n * ãååã\n * ãææ¯è¿æ ·æ¿å°é£æçã\n * ãäººäººé½æ¯äº§åç»çã\n\n** to be continue xi xiii xiv xv **',charsets:{cjk:!0}},{title:"å³äºå¿å­¦",frontmatter:{title:"å³äºå¿å­¦",date:"2022-03-28T00:00:00.000Z",description:"å³äºå¿å­¦çå­¦ä¹ è®¤ç¥",permalink:null,categories:["blog","xnote"],tags:[null]},regularPath:"/blog/xnote/about_heart_and_mind.html",relativePath:"blog/xnote/about_heart_and_mind.md",key:"v-0dd9b182",path:"/blog/xnote/about_heart_and_mind.html",headers:[{level:2,title:"ä¸è´¼",slug:"ä¸è´¼",normalizedTitle:"ä¸è´¼",charIndex:228},{level:3,title:"ç¦èï¼éä¸­æ±",slug:"ç¦è-éä¸­æ±",normalizedTitle:"ç¦èï¼éä¸­æ±",charIndex:303},{level:3,title:"æ¬²æï¼èä¸­å¾",slug:"æ¬²æ-èä¸­å¾",normalizedTitle:"æ¬²æï¼èä¸­å¾",charIndex:513},{level:3,title:"ç¹è±«ï¼äºä¸ç»",slug:"ç¹è±«-äºä¸ç»",normalizedTitle:"ç¹è±«ï¼äºä¸ç»",charIndex:592}],headersStr:"ä¸è´¼ ç¦èï¼éä¸­æ± æ¬²æï¼èä¸­å¾ ç¹è±«ï¼äºä¸ç»",content:'# å³äºå¿å­¦\n\nå¿å­¦æ¯åå­¦çä¸ä¸ªå­¦æ´¾ï¼å¯ä»¥æç§å¶ä¸»å¼ è¯ä¸ºï¼Learning of the Heart-and-Mindï¼å¿å­¦ä¹ç§°ä¸ºâéçå­¦æ´¾âï¼æä»¥ä¹å¯è¯ä¸ºï¼Lu-Wang schoolã\n\nçé³æï¼æä»£èåçææ³å®¶ãæå­¦å®¶ãå²å­¦å®¶ååäºå®¶ï¼éçå¿å­¦ä¹éå¤§æèï¼ç²¾éåå®¶ãéå®¶ãä½å®¶ãä¸å­å­ãå­å­ãæ±ç¹å¹¶ç§°ä¸ºå­ãå­ãæ±ãçãè§£æ¾åæ¾ä»»æµå¤§ä¸­æç³»ææçè¡å²æ·æ¾è¯´ï¼äºç¾å¹´æ¥ï¼è½æå­¦é®å¨äºä¸ä¸è¡¨ç°åºæ¥çï¼åªæä¸¤äººï¼ä¸ä¸ºææççå®ä»ï¼ä¸åæ¸æçæ¾å½è©ã\n\n\n# ä¸è´¼\n\nè¢«èªä¸ºâåå¤ç¬¬ä¸å®äººâçææå²å­¦å®¶çé³ææåºï¼âåä¸­éï¼ç ´ç¦èä¹è´¼ï¼èä¸­å¾ï¼ç ´æ¬²æä¹è´¼ï¼äºä¸ç»ï¼ç ´ç¹è±«ä¹è´¼ï¼ä¸è´¼çç ´ï¼åä¸äºå¯æãâ\n\n\n# ç¦èï¼éä¸­æ±\n\näººä¹æä»¥ä¼ç¦èæ¯åºäºè¿å»çç»éªå¯¹æªæ¥äº§ççææ§ï¼å¯ä»¥ç¨å¥æ³æåç­æ¹æ³è®©èªå·±åå°å½ä¸ï¼è½å¤æ´»å¨å½ä¸çäººä¸ä¼ç¦èã\n\nåºå­æè¨:âå£äººä¹éä¹ï¼éæ°éä¹åï¼æéä¹ã" å¿æåå¿ï¼ä¸æ¯ä¸ºäºè¿½æ±éçå¥½å¤æå»éåï¼å¦æåå¿ä¸ç´æ§çäºéçå¥½å¤ï¼ä¾¿ä¸å¯çæ­£å¥éãåªæèªç¶è¿å¥å¿æç¶æï¼ä¸ä¸ç©èä¸ºä¸ä½ï¼æ ææ æï¼èªç±èªå¨ï¼æè½ç ´é¤ç¦èä¹è´¼ã\n\nä½ï¼åæè¨ï¼"äººæ è¿èå¿æè¿å¿§"ï¼éåæ¶å¯ä»¥ç ´é¤ç¦èï¼é£éåä¹åå¢ï¼\n\n\n# æ¬²æï¼èä¸­å¾\n\näººççè¦å¤æ¥èªäºæ¬²æï¼å³ä¸ºè´ªå©ªåå æï¼ä¹æ¯ä¸ç§å®ä¹çè¡¨ç°ï¼å¦æè½å¤å­¦ä¼èï¼ååå¿è¶æ¥è¶ä¸°çã\n\nä½ï¼æ¬²æä¹æå¥½åä¹åï¼èä»ä¹æä¹èï¼\n\n\n# ç¹è±«ï¼äºä¸ç»\n\nç¥è¡åä¸',normalizedContent:'# å³äºå¿å­¦\n\nå¿å­¦æ¯åå­¦çä¸ä¸ªå­¦æ´¾ï¼å¯ä»¥æç§å¶ä¸»å¼ è¯ä¸ºï¼learning of the heart-and-mindï¼å¿å­¦ä¹ç§°ä¸ºâéçå­¦æ´¾âï¼æä»¥ä¹å¯è¯ä¸ºï¼lu-wang schoolã\n\nçé³æï¼æä»£èåçææ³å®¶ãæå­¦å®¶ãå²å­¦å®¶ååäºå®¶ï¼éçå¿å­¦ä¹éå¤§æèï¼ç²¾éåå®¶ãéå®¶ãä½å®¶ãä¸å­å­ãå­å­ãæ±ç¹å¹¶ç§°ä¸ºå­ãå­ãæ±ãçãè§£æ¾åæ¾ä»»æµå¤§ä¸­æç³»ææçè¡å²æ·æ¾è¯´ï¼äºç¾å¹´æ¥ï¼è½æå­¦é®å¨äºä¸ä¸è¡¨ç°åºæ¥çï¼åªæä¸¤äººï¼ä¸ä¸ºææççå®ä»ï¼ä¸åæ¸æçæ¾å½è©ã\n\n\n# ä¸è´¼\n\nè¢«èªä¸ºâåå¤ç¬¬ä¸å®äººâçææå²å­¦å®¶çé³ææåºï¼âåä¸­éï¼ç ´ç¦èä¹è´¼ï¼èä¸­å¾ï¼ç ´æ¬²æä¹è´¼ï¼äºä¸ç»ï¼ç ´ç¹è±«ä¹è´¼ï¼ä¸è´¼çç ´ï¼åä¸äºå¯æãâ\n\n\n# ç¦èï¼éä¸­æ±\n\näººä¹æä»¥ä¼ç¦èæ¯åºäºè¿å»çç»éªå¯¹æªæ¥äº§ççææ§ï¼å¯ä»¥ç¨å¥æ³æåç­æ¹æ³è®©èªå·±åå°å½ä¸ï¼è½å¤æ´»å¨å½ä¸çäººä¸ä¼ç¦èã\n\nåºå­æè¨:âå£äººä¹éä¹ï¼éæ°éä¹åï¼æéä¹ã" å¿æåå¿ï¼ä¸æ¯ä¸ºäºè¿½æ±éçå¥½å¤æå»éåï¼å¦æåå¿ä¸ç´æ§çäºéçå¥½å¤ï¼ä¾¿ä¸å¯çæ­£å¥éãåªæèªç¶è¿å¥å¿æç¶æï¼ä¸ä¸ç©èä¸ºä¸ä½ï¼æ ææ æï¼èªç±èªå¨ï¼æè½ç ´é¤ç¦èä¹è´¼ã\n\nä½ï¼åæè¨ï¼"äººæ è¿èå¿æè¿å¿§"ï¼éåæ¶å¯ä»¥ç ´é¤ç¦èï¼é£éåä¹åå¢ï¼\n\n\n# æ¬²æï¼èä¸­å¾\n\näººççè¦å¤æ¥èªäºæ¬²æï¼å³ä¸ºè´ªå©ªåå æï¼ä¹æ¯ä¸ç§å®ä¹çè¡¨ç°ï¼å¦æè½å¤å­¦ä¼èï¼ååå¿è¶æ¥è¶ä¸°çã\n\nä½ï¼æ¬²æä¹æå¥½åä¹åï¼èä»ä¹æä¹èï¼\n\n\n# ç¹è±«ï¼äºä¸ç»\n\nç¥è¡åä¸',charsets:{cjk:!0}},{title:"å³äºPM",frontmatter:{title:"å³äºPM",date:"2021-01-03T00:00:00.000Z",description:"å³äºPM",permalink:null,categories:["blog","xnote"],tags:[null]},regularPath:"/blog/xnote/about_pm.html",relativePath:"blog/xnote/about_pm.md",key:"v-5d28d3ff",path:"/blog/xnote/about_pm.html",headers:[{level:2,title:"å³äºPM",slug:"å³äºpm",normalizedTitle:"å³äºpm",charIndex:2}],headersStr:"å³äºPM",content:"# å³äºPM\n\n\n\n> æ¬æè½¬è½½èª...(æ¥æºæ¾ä¸å°äºï¼å¦æä»»ä½é®é¢ï¼è¯·èç³»æ)",normalizedContent:"# å³äºpm\n\n\n\n> æ¬æè½¬è½½èª...(æ¥æºæ¾ä¸å°äºï¼å¦æä»»ä½é®é¢ï¼è¯·èç³»æ)",charsets:{cjk:!0}},{title:"Refactor",frontmatter:{title:"Refactor",date:"2020-04-13T00:00:00.000Z",description:"æ¶æä¹éæç12æ¡åè§",permalink:null,categories:["blog","xnote"],tags:[null]},regularPath:"/blog/xnote/about_refactor.html",relativePath:"blog/xnote/about_refactor.md",key:"v-d5db50c2",path:"/blog/xnote/about_refactor.html",headers:[{level:2,title:"ä»£ç éææè",slug:"ä»£ç éææè",normalizedTitle:"ä»£ç éææè",charIndex:21},{level:3,title:"çä»£ç ",slug:"çä»£ç ",normalizedTitle:"çä»£ç ",charIndex:32},{level:3,title:"Clean Code",slug:"clean-code",normalizedTitle:"clean code",charIndex:162},{level:3,title:"éæçéè¦åå",slug:"éæçéè¦åå",normalizedTitle:"éæçéè¦åå",charIndex:266},{level:2,title:"æ¶æä¹éæç12æ¡åè§",slug:"æ¶æä¹éæç12æ¡åè§",normalizedTitle:"æ¶æä¹éæç12æ¡åè§",charIndex:836},{level:3,title:"åè¨",slug:"åè¨",normalizedTitle:"åè¨",charIndex:852},{level:3,title:"1ãç¡®å®éæçç®çåå¿è¦æ§",slug:"_1ãç¡®å®éæçç®çåå¿è¦æ§",normalizedTitle:"1ãç¡®å®éæçç®çåå¿è¦æ§",charIndex:1121},{level:3,title:"2ãå®ä¹âéæå®æâççé",slug:"_2ãå®ä¹-éæå®æ-ççé",normalizedTitle:"2ãå®ä¹âéæå®æâççé",charIndex:1346},{level:3,title:"3ãæ¸è¿å¼éæ",slug:"_3ãæ¸è¿å¼éæ",normalizedTitle:"3ãæ¸è¿å¼éæ",charIndex:1563},{level:3,title:"4ãç¡®å®å½åçæ¶æç¶æ",slug:"_4ãç¡®å®å½åçæ¶æç¶æ",normalizedTitle:"4ãç¡®å®å½åçæ¶æç¶æ",charIndex:1851},{level:3,title:"5ãä¸è¦å¿½ç¥æ°æ®",slug:"_5ãä¸è¦å¿½ç¥æ°æ®",normalizedTitle:"5ãä¸è¦å¿½ç¥æ°æ®",charIndex:2144},{level:3,title:"6ãç®¡çå¥½ææ¯åºå¡",slug:"_6ãç®¡çå¥½ææ¯åºå¡",normalizedTitle:"6ãç®¡çå¥½ææ¯åºå¡",charIndex:2374},{level:3,title:"7ãè¿ç¦»é£äºèè£çä¸è¥¿",slug:"_7ãè¿ç¦»é£äºèè£çä¸è¥¿",normalizedTitle:"7ãè¿ç¦»é£äºèè£çä¸è¥¿",charIndex:2603},{level:3,title:"8ãåå¥½åå¤é¢å¯¹åå",slug:"_8ãåå¥½åå¤é¢å¯¹åå",normalizedTitle:"8ãåå¥½åå¤é¢å¯¹åå",charIndex:2986},{level:3,title:"9ãäºè§£ä¸å¡",slug:"_9ãäºè§£ä¸å¡",normalizedTitle:"9ãäºè§£ä¸å¡",charIndex:3379},{level:3,title:"10ãåå¥½é¢å¯¹éææ¯å ç´ çåå¤",slug:"_10ãåå¥½é¢å¯¹éææ¯å ç´ çåå¤",normalizedTitle:"10ãåå¥½é¢å¯¹éææ¯å ç´ çåå¤",charIndex:3721},{level:3,title:"11ãå¯¹äºä»£ç è´¨éææææ¡",slug:"_11ãå¯¹äºä»£ç è´¨éææææ¡",normalizedTitle:"11ãå¯¹äºä»£ç è´¨éææææ¡",charIndex:4107},{level:3,title:"12ãè®©å¢éåå¥½åå¤",slug:"_12ãè®©å¢éåå¥½åå¤",normalizedTitle:"12ãè®©å¢éåå¥½åå¤",charIndex:4432},{level:3,title:"ç»å°¾",slug:"ç»å°¾",normalizedTitle:"ç»å°¾",charIndex:4488},{level:2,title:"Reference",slug:"reference",normalizedTitle:"reference",charIndex:4582}],headersStr:"ä»£ç éææè çä»£ç  Clean Code éæçéè¦åå æ¶æä¹éæç12æ¡åè§ åè¨ 1ãç¡®å®éæçç®çåå¿è¦æ§ 2ãå®ä¹âéæå®æâççé 3ãæ¸è¿å¼éæ 4ãç¡®å®å½åçæ¶æç¶æ 5ãä¸è¦å¿½ç¥æ°æ® 6ãç®¡çå¥½ææ¯åºå¡ 7ãè¿ç¦»é£äºèè£çä¸è¥¿ 8ãåå¥½åå¤é¢å¯¹åå 9ãäºè§£ä¸å¡ 10ãåå¥½é¢å¯¹éææ¯å ç´ çåå¤ 11ãå¯¹äºä»£ç è´¨éææææ¡ 12ãè®©å¢éåå¥½åå¤ ç»å°¾ Reference",content:"# ä»£ç éæ(Refactor)\n\n\n# ä»£ç éææè\n\n\n# çä»£ç \n\nçæçä»£ç çåå ï¼ä¸è¬äººé½ä¼è®¤ä¸ºæä»¥ä¸å ç§çè³æ´è¿ï¼\n\n 1. éæ±åæ´\n 2. æ§çé»è¾é¾ä»¥ç»´æ¤\n 3. äº¤ä»åå\n 4. èªå·±çä»£ç è®¾è®¡(è¿ä¸ªæ¯å³é®)\n\nçä»£ç äº§ççä¸ä¸ªéè¦åå æ¯ï¼ç ´çªæåº ---\x3e æ¯æ§ ---\x3e å¥½çæ´å¥½ï¼åçæ´å\n\n\n# Clean Code\n\n * æç»­éæ\n   * ä¿è¯æ¥å¸¸æµç¨ä¸­ææå¼åäººåçcode clean\n * Unit Test\n   * æ­»å¾ªç¯ï¼æ ååæµè¯ ---\x3e ä¸æ¢å¨ä»¥åä»£ç  ---\x3e çä»£ç \n\n\n# éæçéè¦åå\n\n * do no harm\n   * éæè¿ç¨ï¼é¦åè¦åå°ä¸ä¼¤å®³\n   * éç¦»åæä»£ç ï¼å°½éä¸å¨åæé»è¾ï¼ä¿è¯åæåè½çåæ¶åå¢å æ°åè½\n * baby step\n   * ä¸ç³»åå°æ­¥éª¤çæ¹è¿ï¼å¹¶éæ­¥éªè¯(æµè¯)\n   * éææ¯å¨ä¸æ¹ååæä»£ç è¡ä¸ºçåæä¸ï¼å¯¹å¶è¿è¡çä¸ç³»åå°çæ¹è¿ï¼éæ­¥å®æé¢æç®æ \n * è§£è¦\n   * éææ¶ä¸ä¸ªéè¦çå¨ä½å°±æ¯è¦è§£è¦(å½æ°åãå½æ°é´ç­)ï¼å¦åå¾é¾éæ\n     * ææ°æ®å¤çå°è£ï¼é¿åéè¦ä¿®æ¹æ¶ï¼å°å¤æ¾æ°æ®çä½¿ç¨ç¹è¿è¡ä¿®æ¹ï¼èé æ æ¼æ æè ä¿®æ¹ç¹è¿å¤é æå·¥ä½éè¿å¤§çé®é¢\n   * ä¼åéæçç¹ï¼ç»å¸¸æ¹å¨çå¤æä»£ç \n   * publicå½æ°æ¯æµç¨å½æ°ï¼åªåºç±åç§ç¬ç«åè½çå½æ°ç»æ\n * æ°æ§éç¦»\n   * å¦ææ²¡åå°æ°æ§ä»£ç éç¦»ï¼ä¼éæ­¥åæåç§è¡¥ä¸äº¤åï¼é æå¯è¯»æ§ãå¯ç»´æ¤æ§æ¥å§ä¸é\n   * ä»£ç éç¦»çæ¹æ³ï¼å¦ï¼\n     * æ°çæ¹æ³ sprout method\n     * æ°çç±» sprout classï¼å¦ï¼æ¥å£ãè§å¯èãç´æ¥å åè½ç±»\n     * å¤è¦æ¹æ³ wrapper method\n\næ»ä¹ï¼\n\n * éæä¸ç­äºéåï¼éææ¯å°æ­¥è¿­ä»£ãéæ­¥éªè¯ï¼éåæ¯ï¼å®å¨æ¨ç¿»éæ¥\n * å¯¹äºç¼ä¸­ççé¡¹ç®ï¼å¦æç¨åæ ·çæè·¯å»éæï¼åªä¸è¿æ¯ä¸ä¸ªæ°ççé¡¹ç®çå¼å§\n\n\n# æ¶æä¹éæç12æ¡åè§\n\n\n# åè¨\n\nå¯¹äºå¼åèæ¥è¯´ï¼æ¶æè®¾è®¡æ¯è½¯ä»¶ç åè¿ç¨ä¸­æéè¦çä¸ç¯ï¼æè°æ²¡æå¾çº¸ï¼å°±å»ºä¸äºæ¿å­ãå¨éå°Appçäºèç½æ¶ä»£ï¼æ¶æè®¾è®¡æäºä¸äºæ¯è¾æççæ¨¡å¼ï¼å¼åèåæ¶æå¸ä¹å¯ä»¥ç»å¸¸åé´ã\n\nä½æ¯ï¼éçåºç¨çä¸æ­åå±ï¼æåçæ¶æå¾å¾é¢ä¸´çåç§é®é¢ï¼æ¯å¦æ æ³æ»¡è¶³å®¢æ·çéæ±ãæ æ³å®ç°åºç¨çæ©å±ãæ æ³å®ç°æ°çç¹æ§ç­ç­ãå¨è¿ç§æåµä¸ï¼æä»¬å¦ä½é¿åä¸äºåï¼å°½éæ¯è¾æåå°å®ç°æ¶æçéæï¼æ¯å¾å¤å¼åèåæ¶æå¸äºéè§£å³çé®é¢ã\n\nå¨è¿éï¼è·å¤§å®¶åäº«ä¸ä¸Uberçå·¥ç¨ä¸»ç®¡Raffi Krikorianç12æ¡è§åï¼å¹¶éä¸ä¸äºè§£è¯»ï¼å¸æå¯¹å¤§å®¶ææå¯åã\n\n\n# 1ãç¡®å®éæçç®çåå¿è¦æ§\n\nçèµ·æ¥è¿ä¸ªè§ç©æäºå¤ä½ï¼ä½æ¯è¯·ä¸è¦å¿½ç¥ãæ¯ä¸æ¬¡æ¶æçéæé½æ¯âä¼¤ç­å¨éª¨âï¼å°±ååææ¯ä¸æ ·ï¼å³ä½¿åæåï¼ä¹ä¼ä¼¤åæ°ï¼æä»¥å³ç­èä»¬é¦åè¦åææ¶æéæççç±åå¶ä»å¤éæ¹æ¡ï¼æç¡®éæçç®çæ¯ä¸ºäºæ»¡è¶³ä¸å¡éæ±ï¼å¹¶ä¸æ¯ä¸å¾ä¸åçæä½³æ¹æ¡ï¼ç¶ååèèå¶ä»é®é¢ã\n\næ£æ¥æ¸åï¼\n\n * æ¶æéæçåå æ¯ä»ä¹ï¼æ¯ä¸ºäºæ»¡è¶³ä¸å¡çéè¦è¿æ¯åªæ¯è§å¾æ¶æä¸å¥½çï¼\n * é¤äºæ¶æéæä¹å¤ï¼è¿æå¶ä»å¤éæ¹æ¡åï¼æ¯å¦é½åæè¿è¿äºæ¹æ¡çå©å¼ï¼\n\n\n# 2ãå®ä¹âéæå®æâççé\n\nå¦æç¡®å®è¦éæï¼é£ä¹è¦æç®æ æç¡®ä¸æ¥ï¼ä¹å°±æ¯éæçè¾¹çæ¡ä»¶ï¼æä¹æç®æ¯âå®æâäºéæï¼ç®æ è¦ææ°æ®éåï¼æèæè½å¤æµè¯çåæ³ãè¿ä¹æ¯ä¸ä¸ªéæ±åæçè¿ç¨ï¼å¦æéæ±ä¸æç¡®ï¼é£ä¹è§æ ¼è¯´æä¹¦æ²¡æ³åæ¸æ¥ï¼è´è´£éæçå¢éä¹æ²¡ææç¡®çç®æ ï¼ä¸è½ä»¥éæçæ¶é´æèä¸»è§çå¤æ­ä¸ºç»æçä¾æ®ã\n\næ£æ¥æ¸åï¼\n\n * éæçç®æ å¯ä»¥éåï¼æèè¯´å¯ä»¥æµè¯åï¼\n * éæå®æçæ åæ¯ä»ä¹ï¼å¾å°ä¸å¡é¨é¨æèé¢å¯¼çè®¤å¯äºåï¼\n\n\n# 3ãæ¸è¿å¼éæ\n\nç°å¨è½¯ä»¶ç åææµè¡çå°±æ¯å¿«éè¿­ä»£ãæç»­äº¤ä»ãå°½æ©åé¦ãè¿åæ ·å¯ä»¥ç¨å¨æ¶æçéæä¸ï¼éæè¿ç¨çé¾åº¦ä¸äºäºæå»ºä¸ä¸ªæ°äº§åï¼æä»¥å¨è®¾è®¡éæçæ¶åï¼è¦å¼å¥æç»­äº¤ä»çæµç¨ï¼æ¯ä¸ä¸ªéææ­¥éª¤æèæ¨¡åé½è¦å¿«éé¨ç½²å¹¶å¾å°åé¦ï¼ä»¥ä¾¿è¯ä¼°éæçææï¼åæ¶ä½åºç­ç¥è°æ´ã\n\næçäººä¼è¯´ï¼æä»¬çæ¶æéææ¯éåºæ½èªåçï¼æ²¡æ³æ¸è¿ï¼åªè½ä¸è¹´èå°±ãå¦ææ¯è¿ç§æåµï¼å¯ä»¥èèå¨å¦å¤ä¸å¥æ·è´çç³»ç»ä¸­åéæï¼ç»è¿è°¨ææµè¯ä¹åï¼å°æ°æ®åä¸å¡è¿ç§»è¿å»ã\n\næ£æ¥æ¸åï¼\n\n * è½å¦æéæè¿ç¨åæå°çè¿­ä»£ï¼æ¯ä¸æ¬¡æ¹è¿é½è½å°½å¿«å¾å°åé¦ï¼\n * éæè¿ç¨ä¸­çææè½å¤å®æå±ç¤ºç»ä¸å¡é¨é¨æèé¢å¯¼åï¼\n\n\n# 4ãç¡®å®å½åçæ¶æç¶æ\n\nå¨å¯å¨éæä¹åï¼å¢éè¦å¯¹å½åçæ¶æç¶æææ¸æ°çäºè§£ï¼ä¹å°±æ¯è®¾å®å¥½åºåï¼ä»¥ä¾¿è¯ä¼°éæçææã\n\næäºè´è´£éæçæ¶æå¸æèå¼åèï¼å¾å¾è¿æ²¡æææ¸æ¥ç°æçæ¶æè®¾è®¡ï¼å°±å¼å§éæäºï¼ç»æç»å¸¸åºç°è¿æ ·çæåµï¼éæå°æä¸ªé¶æ®µï¼åç°è¡ä¸éï¼ç¶åä¸æèè¢è¯´ï¼å¦ï¼åæ¥è¿åçæ¶ææ¯è¿ä¸ªæ ·çï¼æ¯ä¸ºäºè¾¾å°ææä¸å¡éæ±åï¼è¿åä¸è½å¨ï¼å¾æ³å«çåæ³ã\n\nç±»ä¼¼çä¾å­å¨ç åå¢éä¸­æ¶æåçï¼ä¹æéæä»¬è¦æéå°å¿ãè®°å¾æä½å²äººè¯´è¿ï¼äºè§£å«äººå¾å®¹æï¼äºè§£èªå·±å¾é¾ã\n\næ£æ¥æ¸åï¼\n\n * ä½ äºè§£å½åçæ¶æè®¾è®¡åï¼å®çè®¾è®¡åè¡·åä¹åçéåæ¹æ¡ç¥éåï¼\n * ä½ è½ç»æ¶æè®¾å®ä¸ä¸ªåºåç¶æåï¼\n\n\n# 5ãä¸è¦å¿½ç¥æ°æ®\n\næ°æ®çéè¦æ§ä¸è¨èå»ï¼ä¸å¡é½æ¯ä»¥æ°æ®æµä¸ºè½½ä½çï¼æä»¥æ¶æéæçæ¬è´¨å°±æ¯å¯¹äºæ°æ®æµçéæã\n\næ°æ®å¯¹éæçéè¦æ§ä¸»è¦ä½ç°å¨ä¸¤ä¸ªæ¹é¢ï¼\n\n 1. å¨éæè®¾è®¡æ¶ï¼éè¦èèä¸å¡æ°æ®çéæ±ï¼éæä¹åçç³»ç»å¯¹äºæ°æ®çå­å¨ãå¤çãåæç­åè½æ¯å¦æå½±åï¼\n 2. å¨éæè¿ç¨ä¸­ï¼èèä¾é æ°æ®çè³æ¯å®éçæ°æ®æ¥éªè¯éæçææï¼æä¾è¯ä¼°çæ¯æã\n\næ£æ¥æ¸åï¼\n\n * ä¸å¡æ°æ®çéæ±å¨éæè®¾è®¡ä¸­æä½ç°åï¼\n * éæè¿ç¨ä¸­è½å¦éè¿å®éæ°æ®æ¥éªè¯ææï¼\n\n\n# 6ãç®¡çå¥½ææ¯åºå¡\n\nææ¯åºå¡å°±åä¿¡ç¨å¡ä¸æ ·ï¼ä¼æå¾é«çå©æ¯çï¼å°±å¦åç»å¢éçä¸äºå¤§éçå¸å¡å¼éã\n\nç»ç»åºè¯¥å¹å»ä¸ç§ä¿è¯è®¾è®¡è´¨éçæåãåºå½é¼å±éæãåæ¶ä¹åºå½é¼å±æç»­è®¾è®¡ä»¥åå¶å®æå³ä»£ç è´¨éçå®è·µãå¨å¼åæ¶é´ä¸­åºå½ä¸é¨æ½åºä¸é¨åä»¥è§£å³ææ¯åºå¡ãå¦ææ²¡æåéçç§æï¼é£ä¹çå®ä¸çä¸­çä»£ç ä¼åå¾è¶æ¥è¶å¤æé¾æã\n\næ£æ¥æ¸åï¼\n\n * å¢éå¯¹ææ¯åºå¡æè·è¸ªåå¤å¿å½æºå¶åï¼è¿æ¯å¼åäººåå¯ä»¥éæçäº§çåºå¡ï¼\n * éå¯¹ææ¯åºå¡æå®æçå¹è®­ãåé¡¾æºå¶åï¼\n\n\n# 7ãè¿ç¦»é£äºèè£çä¸è¥¿\n\næ¶æçéæè¿ç¨åºè¯¥æ¯ä»¥ç®æ ä¸ºå¯¼åï¼æ¢å¥è¯è¯´âæ³¨éå®æâã\n\nå¯¹äºææ¯äººæ¥è¯´ï¼ä¸ä¸ªç»å¸¸è¢«è½»è§çé®é¢å¨äºï¼åæ¬¢è¿½éæ°é²çç­é¨ææ¯ï¼è¿å¶å®æ¯ä¸ªå¥½äºæï¼è¯´æææ¯äººåäºåæ°ï¼ä¸æ­æ¥åæ°ææ¯ãä½æ¯å¯¹äºæ¶æçéæè¿æ ·çå³é®æ§ä»»å¡æ¥è¯´ï¼æ¯ä¸æ¯æ°ææ¯å¹¶ä¸éè¦ï¼éè¦çæ¯è½ä¸è½å®ç°éæçç®æ ã\n\nå¯¹äºæ°ææ¯æ¥è¯´ï¼è½ç¶ç­åº¦å¤§ï¼ä½æ¯äººæå¨å¤è¿ä¸è¶³ï¼å¤§å®¶è¸©è¿çåè¿ä¸å¤ï¼ç§¯ç´¯çå¤±è´¥æè®­åæåç»éªè¿ä¸å¤ï¼å¨è¿ç§æåµä¸ï¼å»ºè®®å¤§å®¶ä¸è¦å¤´èä¸ç­å°±ä¸é©¬æ°ææ¯ï¼åºè¯¥å®¢è§å·éå°è¯ä¼°æ°ææ¯åæçææ¯å¯¹æ¶æéæçå½±ååææï¼ä»¥æ°æ®åç»éªæ¥è¯´è¯ï¼èä¸è¦è¿½èµ¶æ¶é«¦ã\n\næ£æ¥æ¸åï¼\n\n * éæçææ¯éåæ¯å¦æè¯¦å®çæ°æ®åä¸å®¶è¯ä¼°ï¼\n * éç¨çææ¯æ¯å¦æè¯å¥½çäººæç§¯ç´¯åè¶³å¤çç»éªæ¯æï¼ä½ æ¯ä¸æ¯å®éªå°ç½é¼ ï¼\n * å¨ææ¯éåæ¶ï¼æ¯å¦è³å°æä¸¤ä¸ªæ¹æ¡å¾è¯ä¼°ï¼ææ²¡ææççææ¯æ¹æ¡ï¼\n\n\n# 8ãåå¥½åå¤é¢å¯¹åå\n\nè¿æ¡åè§æ´åæ¯å¯¹æ¶æå¸ä»¬çå¿çå»ºè®®ï¼è½¯ä»¶å¼åè¿ç¨ä¸­ï¼ååæ å¤ä¸å¨ã\n\nå¯¹äºæ¶æéææ¥è¯´ï¼ååæ¥æºäºå¤ä¸ªæ¹é¢ï¼ç®¡çå±ãå¢éæåãåçº§é¨é¨ç­ç­ãè¯´ç½äºï¼æ¶æéæå¯¹ä¸ªäººæ¥è¯´å¾å¾æ¯ä¸ä»¶åºåä¸è®¨å¥½çäºæãååä¸ä¸ªæ°äº§åè½å¤åå¾å¾é«çèµèµç¸æ¯ï¼éæçæç»©å¾å¾å¹¶ä¸åé¢å¯¼éè§ï¼èä¸åºäºé®é¢è¿è¦æ¿æå¾å¤§çè´£ä»»ãä»è½¯ä»¶å¼åè§åº¦çï¼åæ°äº§åæ¯ä»0å°1ï¼èæ¶æéææ¯ä»-1å°1ï¼å¤ææ§åé¾åº¦éå¸¸æ´å¤§ã\n\nå æ­¤ï¼éæçè´è´£äººè¦æååå¥½å¿çåå¤ï¼èç¼ååçä¸ä¸ªæå·§æ¯ï¼è®¾ç½®å¥½éç¨ç¢ï¼å°éæçææéåï¼å¹¶ä¸åä¸å¡çååå³èèµ·æ¥ï¼å®æåå©çç¸å³åæ¹åæ­¥ç¶æï¼å¾å°å¤§å®¶ççè§£åæ¯æã\n\næ£æ¥æ¸åï¼\n\n * æ¶æçéææ¯å¦å¾å°äºç®¡çå±ï¼ç¹å«æ¯æé«ç®¡çå±ï¼çæ¯æï¼ä»ä»¬æ¯å¦å¯¹éæçæ¶é´ãä»»å¡éæç´æ¥çè®¤è¯ï¼\n * ä½ çéæè®¡åä¸­æ¯å¦åå«äºä¸äºå¯ä»¥éåçææï¼æ¯å¦å®æåç®¡çå±å±ç¤ºè¿äºææï¼\n\n\n# 9ãäºè§£ä¸å¡\n\nè½ç¶çèµ·æ¥åæ¯ä¸å¥åºè¯ï¼ä½æ¯ææ³Raffi Krikorianç¹ææè¿æ¡æåºæ¥ä¸å®æ¯æçç±çã\n\næ¶æéæçæç»ç®çæ¯æ¹è¿ä¸å¡ï¼æä»¥å¯¹äºä¸å¡çäºè§£å°æå©äºæ¶æå¸åææ¯äººç¡®å®éæç®æ çä¼åçº§åå³é®è·¯å¾ãæ¯å¦ï¼æä»¬éè¦ç¥éåªäºå³é®ä¸å¡çæ¶ææ¯ä¸è½ç¢°çï¼åªäºä¸å¡ä¹é´æ¯äºç¸å³èçï¼åªäºä¸å¡çæ¶ææ¯éè¦ä¼åéæç...ç­ç­ã\n\né¤äºäºè§£ä¸å¡æ¬èº«ï¼æä»¬è¿éè¦äºè§£âäººâï¼è¡¨é¢ä¸ç®¡çå±æ¯éæç®æ çè£å³èï¼ä½å®éä¸ä¸å¡é¨é¨çäººææ¯ãææ¯äººéè¦äºè§£ä»ä»¬çä¸å¡éæ±ï¼å¹¶å°å¶è½¬åä¸ºéæç®æ ãéè¿è¿ç§æ¹å¼ï¼æ¶æéæçæä¹æè½å¾å°å·ä½çä½ç°ã\n\næ£æ¥æ¸åï¼\n\n * æ¯å¦ä¸ä¸å¡é¨é¨å°±æ¶æéææè½å®ç°çä¸å¡ç®æ è¿è¡è¿ååçè®¨è®ºåç¡®è®¤ï¼\n * æ¯å¦å¯¹å³é®ä¸å¡åä¼åéæçä¸å¡è¿è¡äºç¡®è®¤ï¼\n\n\n# 10ãåå¥½é¢å¯¹éææ¯å ç´ çåå¤\n\næ©......è¿åæ¯ä¸ä¸ªä¸é£ä¹è®©äººèæçå»ºè®®ã\n\nä¸ç®¡ä½ æ¯å¦æ¿æç¸ä¿¡ï¼ææ¯å¨æ¶æéæï¼ä»¥åå¶ä»å¾å³é®çå¬å¸å³ç­ä¸­ï¼çå½±åå ç´ ä¸­å¹¶ä¸æ¯æé«çï¼æä»¬è¿ä¼æ¶åå°åä¸å©çãç®¡çå±åå¥½ãå¤§å®¢æ·å½±åãåå¬å®¤zhengzhiç­ç­ï¼å¯¹äºæ¶æå¸åææ¯äººæ¥è¯´ï¼è¿äºå ç´ å¾å¾ä¸æ¯ä»ä»¬æè½ææ§çãæä»¬è½åçå°±æ¯ï¼æ ¹æ®ä¸åçå½±åå ç´ ï¼è°æ´ç®æ ã\n\nè¯·è®°ä½ï¼ä¸è¦æ­»æè¿ä¸ªç®æ ï¼å½æäººæåºä¸åçæè§æ¶ï¼è¦å¦è¯å°åä»ä»¬äº¤æµï¼å¹¶åç¥ä»ä»¬å¦ä½éçº³æè§ï¼é£ä¹éæç®æ ä¼æååï¼ç¶åè®©å¶ä»å©çç¸å³èä¹ç¥éè¿äºååã\n\néææ¯å ç´ çå½±åæ¯å®¢è§å­å¨çï¼èä¸ä»åä¸å±é¢æ¥è¯´ä¹æ¯åççï¼æä»¥å¯¹äºææ¯äººæ¥è¯´è¦å­¦ä¼éåºã\n\næ£æ¥æ¸åï¼\n\n * å½éææ¯å ç´ å½±åæ¶æçéææ¶ï¼ä½ æ¯å¦å¯¹ç®æ åäºè°æ´å¹¶åç¥äºå©çç¸å³åæ¹ï¼\n * ä½ æ¯å¦åå¤ä»¥å¼æ¾èä¸æ¯æµå¶çå¿ææ¥å¯¹å¾éææ¯å ç´ çå½±åï¼\n\n\n# 11ãå¯¹äºä»£ç è´¨éææææ¡\n\nè¿åä¸æä¸­ææå°çâç®¡çå¥½ææ¯åºå¡âæå¼æ²åå·¥ä¹å¤ã\n\næ¶æçéæå¯¹ä»£ç è´¨éè¦æ±å¾é«ï¼ä¸æ¹é¢æ¯éæè¿ç¨å¯¹bugçå®¹å¿æ§æ¯æ°äº§åçç åæ´ä½ï¼å¦ä¸æ¹é¢ä¹å³å®äºä¸ä¸æ¬¡éæçé¾æç¨åº¦ã\n\nå³äºä»£ç è´¨éçä¹¦ç±åæç« å·²ç»æå¾å¤ï¼å¨è¿éåªæ³æéå¤§å®¶ä¸ç¹ï¼ä»£ç å®¡æ¥æ¯ä¸ä¸ªéå¸¸å¥½çåæ³ãä»£ç å®¡æ¥æ¯è½¯ä»¶å¼åè¿ç¨ä¸­çå¿è¦æ­¥éª¤ï¼æ¢å¯ä»¥å¸®å©è¢«å®¡æ¥èæå°ä»£ç è´¨éï¼åå¯ä»¥è®©å®¡æ¥èå æ·±å¯¹äº§åççè§£ãä¸è®ºå¢éå¤å¿ï¼ä¸å®è¦ä¿è¯ä»£ç æäº¤ä¹åï¼æ¯ç»è¿å¶ä»æåå®¡æ ¸è¿çï¼ç­ææ¥çä¼å ç¨å¢éçæ¶é´ï¼é¿ææ¥çæ¯äºåååçå¥½äºã\n\næ£æ¥æ¸åï¼\n\n * å¢éæåæ¯å¦å¯¹ä»£ç è´¨éæè¶³å¤çéè§ï¼æ¯å¦æå¥æ©æªæ½ï¼\n * å¢éåé¨æ¯å¦æä»£ç è´¨éçæ åææ¡£åå®¡æ¥æµç¨ï¼\n\n\n# 12ãè®©å¢éåå¥½åå¤\n\nè¿æ¯Raffi Krikorianåä¸¾çæåä¸æ¡åè§ï¼æ¯å¯¹ä¹åææå»ºè®®çæ»ç»ã\n\n\n# ç»å°¾\n\nå³äºæ¶æçéæï¼Raffi Krikorianç»äºå¾å¥½çå»ºè®®ï¼ä¸è¿å°åºææ²¡æææï¼è¿æ¯è¦å®è·µä¸­æ£éªãå°½ä¿¡ä¹¦ä¸å¦æ ä¹¦ï¼æ¥æºäºå®è·µä¸­çç»éªæ¯ææä»·å¼çï¼ä¸ºææ¯äººæç¨æææä¹ã\n\n\n# Reference\n\n 1. ãéæ-æ¹åæ¢æä»£ç çè®¾è®¡ã\n 2. ãç¨åºåçèä¸ç´ å»ã\n 3. ãä¿®æ¹ä»£ç çèºæ¯ã\n 4. architect-12-rules-complete",normalizedContent:"# ä»£ç éæ(refactor)\n\n\n# ä»£ç éææè\n\n\n# çä»£ç \n\nçæçä»£ç çåå ï¼ä¸è¬äººé½ä¼è®¤ä¸ºæä»¥ä¸å ç§çè³æ´è¿ï¼\n\n 1. éæ±åæ´\n 2. æ§çé»è¾é¾ä»¥ç»´æ¤\n 3. äº¤ä»åå\n 4. èªå·±çä»£ç è®¾è®¡(è¿ä¸ªæ¯å³é®)\n\nçä»£ç äº§ççä¸ä¸ªéè¦åå æ¯ï¼ç ´çªæåº ---\x3e æ¯æ§ ---\x3e å¥½çæ´å¥½ï¼åçæ´å\n\n\n# clean code\n\n * æç»­éæ\n   * ä¿è¯æ¥å¸¸æµç¨ä¸­ææå¼åäººåçcode clean\n * unit test\n   * æ­»å¾ªç¯ï¼æ ååæµè¯ ---\x3e ä¸æ¢å¨ä»¥åä»£ç  ---\x3e çä»£ç \n\n\n# éæçéè¦åå\n\n * do no harm\n   * éæè¿ç¨ï¼é¦åè¦åå°ä¸ä¼¤å®³\n   * éç¦»åæä»£ç ï¼å°½éä¸å¨åæé»è¾ï¼ä¿è¯åæåè½çåæ¶åå¢å æ°åè½\n * baby step\n   * ä¸ç³»åå°æ­¥éª¤çæ¹è¿ï¼å¹¶éæ­¥éªè¯(æµè¯)\n   * éææ¯å¨ä¸æ¹ååæä»£ç è¡ä¸ºçåæä¸ï¼å¯¹å¶è¿è¡çä¸ç³»åå°çæ¹è¿ï¼éæ­¥å®æé¢æç®æ \n * è§£è¦\n   * éææ¶ä¸ä¸ªéè¦çå¨ä½å°±æ¯è¦è§£è¦(å½æ°åãå½æ°é´ç­)ï¼å¦åå¾é¾éæ\n     * ææ°æ®å¤çå°è£ï¼é¿åéè¦ä¿®æ¹æ¶ï¼å°å¤æ¾æ°æ®çä½¿ç¨ç¹è¿è¡ä¿®æ¹ï¼èé æ æ¼æ æè ä¿®æ¹ç¹è¿å¤é æå·¥ä½éè¿å¤§çé®é¢\n   * ä¼åéæçç¹ï¼ç»å¸¸æ¹å¨çå¤æä»£ç \n   * publicå½æ°æ¯æµç¨å½æ°ï¼åªåºç±åç§ç¬ç«åè½çå½æ°ç»æ\n * æ°æ§éç¦»\n   * å¦ææ²¡åå°æ°æ§ä»£ç éç¦»ï¼ä¼éæ­¥åæåç§è¡¥ä¸äº¤åï¼é æå¯è¯»æ§ãå¯ç»´æ¤æ§æ¥å§ä¸é\n   * ä»£ç éç¦»çæ¹æ³ï¼å¦ï¼\n     * æ°çæ¹æ³ sprout method\n     * æ°çç±» sprout classï¼å¦ï¼æ¥å£ãè§å¯èãç´æ¥å åè½ç±»\n     * å¤è¦æ¹æ³ wrapper method\n\næ»ä¹ï¼\n\n * éæä¸ç­äºéåï¼éææ¯å°æ­¥è¿­ä»£ãéæ­¥éªè¯ï¼éåæ¯ï¼å®å¨æ¨ç¿»éæ¥\n * å¯¹äºç¼ä¸­ççé¡¹ç®ï¼å¦æç¨åæ ·çæè·¯å»éæï¼åªä¸è¿æ¯ä¸ä¸ªæ°ççé¡¹ç®çå¼å§\n\n\n# æ¶æä¹éæç12æ¡åè§\n\n\n# åè¨\n\nå¯¹äºå¼åèæ¥è¯´ï¼æ¶æè®¾è®¡æ¯è½¯ä»¶ç åè¿ç¨ä¸­æéè¦çä¸ç¯ï¼æè°æ²¡æå¾çº¸ï¼å°±å»ºä¸äºæ¿å­ãå¨éå°appçäºèç½æ¶ä»£ï¼æ¶æè®¾è®¡æäºä¸äºæ¯è¾æççæ¨¡å¼ï¼å¼åèåæ¶æå¸ä¹å¯ä»¥ç»å¸¸åé´ã\n\nä½æ¯ï¼éçåºç¨çä¸æ­åå±ï¼æåçæ¶æå¾å¾é¢ä¸´çåç§é®é¢ï¼æ¯å¦æ æ³æ»¡è¶³å®¢æ·çéæ±ãæ æ³å®ç°åºç¨çæ©å±ãæ æ³å®ç°æ°çç¹æ§ç­ç­ãå¨è¿ç§æåµä¸ï¼æä»¬å¦ä½é¿åä¸äºåï¼å°½éæ¯è¾æåå°å®ç°æ¶æçéæï¼æ¯å¾å¤å¼åèåæ¶æå¸äºéè§£å³çé®é¢ã\n\nå¨è¿éï¼è·å¤§å®¶åäº«ä¸ä¸uberçå·¥ç¨ä¸»ç®¡raffi krikorianç12æ¡è§åï¼å¹¶éä¸ä¸äºè§£è¯»ï¼å¸æå¯¹å¤§å®¶ææå¯åã\n\n\n# 1ãç¡®å®éæçç®çåå¿è¦æ§\n\nçèµ·æ¥è¿ä¸ªè§ç©æäºå¤ä½ï¼ä½æ¯è¯·ä¸è¦å¿½ç¥ãæ¯ä¸æ¬¡æ¶æçéæé½æ¯âä¼¤ç­å¨éª¨âï¼å°±ååææ¯ä¸æ ·ï¼å³ä½¿åæåï¼ä¹ä¼ä¼¤åæ°ï¼æä»¥å³ç­èä»¬é¦åè¦åææ¶æéæççç±åå¶ä»å¤éæ¹æ¡ï¼æç¡®éæçç®çæ¯ä¸ºäºæ»¡è¶³ä¸å¡éæ±ï¼å¹¶ä¸æ¯ä¸å¾ä¸åçæä½³æ¹æ¡ï¼ç¶ååèèå¶ä»é®é¢ã\n\næ£æ¥æ¸åï¼\n\n * æ¶æéæçåå æ¯ä»ä¹ï¼æ¯ä¸ºäºæ»¡è¶³ä¸å¡çéè¦è¿æ¯åªæ¯è§å¾æ¶æä¸å¥½çï¼\n * é¤äºæ¶æéæä¹å¤ï¼è¿æå¶ä»å¤éæ¹æ¡åï¼æ¯å¦é½åæè¿è¿äºæ¹æ¡çå©å¼ï¼\n\n\n# 2ãå®ä¹âéæå®æâççé\n\nå¦æç¡®å®è¦éæï¼é£ä¹è¦æç®æ æç¡®ä¸æ¥ï¼ä¹å°±æ¯éæçè¾¹çæ¡ä»¶ï¼æä¹æç®æ¯âå®æâäºéæï¼ç®æ è¦ææ°æ®éåï¼æèæè½å¤æµè¯çåæ³ãè¿ä¹æ¯ä¸ä¸ªéæ±åæçè¿ç¨ï¼å¦æéæ±ä¸æç¡®ï¼é£ä¹è§æ ¼è¯´æä¹¦æ²¡æ³åæ¸æ¥ï¼è´è´£éæçå¢éä¹æ²¡ææç¡®çç®æ ï¼ä¸è½ä»¥éæçæ¶é´æèä¸»è§çå¤æ­ä¸ºç»æçä¾æ®ã\n\næ£æ¥æ¸åï¼\n\n * éæçç®æ å¯ä»¥éåï¼æèè¯´å¯ä»¥æµè¯åï¼\n * éæå®æçæ åæ¯ä»ä¹ï¼å¾å°ä¸å¡é¨é¨æèé¢å¯¼çè®¤å¯äºåï¼\n\n\n# 3ãæ¸è¿å¼éæ\n\nç°å¨è½¯ä»¶ç åææµè¡çå°±æ¯å¿«éè¿­ä»£ãæç»­äº¤ä»ãå°½æ©åé¦ãè¿åæ ·å¯ä»¥ç¨å¨æ¶æçéæä¸ï¼éæè¿ç¨çé¾åº¦ä¸äºäºæå»ºä¸ä¸ªæ°äº§åï¼æä»¥å¨è®¾è®¡éæçæ¶åï¼è¦å¼å¥æç»­äº¤ä»çæµç¨ï¼æ¯ä¸ä¸ªéææ­¥éª¤æèæ¨¡åé½è¦å¿«éé¨ç½²å¹¶å¾å°åé¦ï¼ä»¥ä¾¿è¯ä¼°éæçææï¼åæ¶ä½åºç­ç¥è°æ´ã\n\næçäººä¼è¯´ï¼æä»¬çæ¶æéææ¯éåºæ½èªåçï¼æ²¡æ³æ¸è¿ï¼åªè½ä¸è¹´èå°±ãå¦ææ¯è¿ç§æåµï¼å¯ä»¥èèå¨å¦å¤ä¸å¥æ·è´çç³»ç»ä¸­åéæï¼ç»è¿è°¨ææµè¯ä¹åï¼å°æ°æ®åä¸å¡è¿ç§»è¿å»ã\n\næ£æ¥æ¸åï¼\n\n * è½å¦æéæè¿ç¨åæå°çè¿­ä»£ï¼æ¯ä¸æ¬¡æ¹è¿é½è½å°½å¿«å¾å°åé¦ï¼\n * éæè¿ç¨ä¸­çææè½å¤å®æå±ç¤ºç»ä¸å¡é¨é¨æèé¢å¯¼åï¼\n\n\n# 4ãç¡®å®å½åçæ¶æç¶æ\n\nå¨å¯å¨éæä¹åï¼å¢éè¦å¯¹å½åçæ¶æç¶æææ¸æ°çäºè§£ï¼ä¹å°±æ¯è®¾å®å¥½åºåï¼ä»¥ä¾¿è¯ä¼°éæçææã\n\næäºè´è´£éæçæ¶æå¸æèå¼åèï¼å¾å¾è¿æ²¡æææ¸æ¥ç°æçæ¶æè®¾è®¡ï¼å°±å¼å§éæäºï¼ç»æç»å¸¸åºç°è¿æ ·çæåµï¼éæå°æä¸ªé¶æ®µï¼åç°è¡ä¸éï¼ç¶åä¸æèè¢è¯´ï¼å¦ï¼åæ¥è¿åçæ¶ææ¯è¿ä¸ªæ ·çï¼æ¯ä¸ºäºè¾¾å°ææä¸å¡éæ±åï¼è¿åä¸è½å¨ï¼å¾æ³å«çåæ³ã\n\nç±»ä¼¼çä¾å­å¨ç åå¢éä¸­æ¶æåçï¼ä¹æéæä»¬è¦æéå°å¿ãè®°å¾æä½å²äººè¯´è¿ï¼äºè§£å«äººå¾å®¹æï¼äºè§£èªå·±å¾é¾ã\n\næ£æ¥æ¸åï¼\n\n * ä½ äºè§£å½åçæ¶æè®¾è®¡åï¼å®çè®¾è®¡åè¡·åä¹åçéåæ¹æ¡ç¥éåï¼\n * ä½ è½ç»æ¶æè®¾å®ä¸ä¸ªåºåç¶æåï¼\n\n\n# 5ãä¸è¦å¿½ç¥æ°æ®\n\næ°æ®çéè¦æ§ä¸è¨èå»ï¼ä¸å¡é½æ¯ä»¥æ°æ®æµä¸ºè½½ä½çï¼æä»¥æ¶æéæçæ¬è´¨å°±æ¯å¯¹äºæ°æ®æµçéæã\n\næ°æ®å¯¹éæçéè¦æ§ä¸»è¦ä½ç°å¨ä¸¤ä¸ªæ¹é¢ï¼\n\n 1. å¨éæè®¾è®¡æ¶ï¼éè¦èèä¸å¡æ°æ®çéæ±ï¼éæä¹åçç³»ç»å¯¹äºæ°æ®çå­å¨ãå¤çãåæç­åè½æ¯å¦æå½±åï¼\n 2. å¨éæè¿ç¨ä¸­ï¼èèä¾é æ°æ®çè³æ¯å®éçæ°æ®æ¥éªè¯éæçææï¼æä¾è¯ä¼°çæ¯æã\n\næ£æ¥æ¸åï¼\n\n * ä¸å¡æ°æ®çéæ±å¨éæè®¾è®¡ä¸­æä½ç°åï¼\n * éæè¿ç¨ä¸­è½å¦éè¿å®éæ°æ®æ¥éªè¯ææï¼\n\n\n# 6ãç®¡çå¥½ææ¯åºå¡\n\nææ¯åºå¡å°±åä¿¡ç¨å¡ä¸æ ·ï¼ä¼æå¾é«çå©æ¯çï¼å°±å¦åç»å¢éçä¸äºå¤§éçå¸å¡å¼éã\n\nç»ç»åºè¯¥å¹å»ä¸ç§ä¿è¯è®¾è®¡è´¨éçæåãåºå½é¼å±éæãåæ¶ä¹åºå½é¼å±æç»­è®¾è®¡ä»¥åå¶å®æå³ä»£ç è´¨éçå®è·µãå¨å¼åæ¶é´ä¸­åºå½ä¸é¨æ½åºä¸é¨åä»¥è§£å³ææ¯åºå¡ãå¦ææ²¡æåéçç§æï¼é£ä¹çå®ä¸çä¸­çä»£ç ä¼åå¾è¶æ¥è¶å¤æé¾æã\n\næ£æ¥æ¸åï¼\n\n * å¢éå¯¹ææ¯åºå¡æè·è¸ªåå¤å¿å½æºå¶åï¼è¿æ¯å¼åäººåå¯ä»¥éæçäº§çåºå¡ï¼\n * éå¯¹ææ¯åºå¡æå®æçå¹è®­ãåé¡¾æºå¶åï¼\n\n\n# 7ãè¿ç¦»é£äºèè£çä¸è¥¿\n\næ¶æçéæè¿ç¨åºè¯¥æ¯ä»¥ç®æ ä¸ºå¯¼åï¼æ¢å¥è¯è¯´âæ³¨éå®æâã\n\nå¯¹äºææ¯äººæ¥è¯´ï¼ä¸ä¸ªç»å¸¸è¢«è½»è§çé®é¢å¨äºï¼åæ¬¢è¿½éæ°é²çç­é¨ææ¯ï¼è¿å¶å®æ¯ä¸ªå¥½äºæï¼è¯´æææ¯äººåäºåæ°ï¼ä¸æ­æ¥åæ°ææ¯ãä½æ¯å¯¹äºæ¶æçéæè¿æ ·çå³é®æ§ä»»å¡æ¥è¯´ï¼æ¯ä¸æ¯æ°ææ¯å¹¶ä¸éè¦ï¼éè¦çæ¯è½ä¸è½å®ç°éæçç®æ ã\n\nå¯¹äºæ°ææ¯æ¥è¯´ï¼è½ç¶ç­åº¦å¤§ï¼ä½æ¯äººæå¨å¤è¿ä¸è¶³ï¼å¤§å®¶è¸©è¿çåè¿ä¸å¤ï¼ç§¯ç´¯çå¤±è´¥æè®­åæåç»éªè¿ä¸å¤ï¼å¨è¿ç§æåµä¸ï¼å»ºè®®å¤§å®¶ä¸è¦å¤´èä¸ç­å°±ä¸é©¬æ°ææ¯ï¼åºè¯¥å®¢è§å·éå°è¯ä¼°æ°ææ¯åæçææ¯å¯¹æ¶æéæçå½±ååææï¼ä»¥æ°æ®åç»éªæ¥è¯´è¯ï¼èä¸è¦è¿½èµ¶æ¶é«¦ã\n\næ£æ¥æ¸åï¼\n\n * éæçææ¯éåæ¯å¦æè¯¦å®çæ°æ®åä¸å®¶è¯ä¼°ï¼\n * éç¨çææ¯æ¯å¦æè¯å¥½çäººæç§¯ç´¯åè¶³å¤çç»éªæ¯æï¼ä½ æ¯ä¸æ¯å®éªå°ç½é¼ ï¼\n * å¨ææ¯éåæ¶ï¼æ¯å¦è³å°æä¸¤ä¸ªæ¹æ¡å¾è¯ä¼°ï¼ææ²¡ææççææ¯æ¹æ¡ï¼\n\n\n# 8ãåå¥½åå¤é¢å¯¹åå\n\nè¿æ¡åè§æ´åæ¯å¯¹æ¶æå¸ä»¬çå¿çå»ºè®®ï¼è½¯ä»¶å¼åè¿ç¨ä¸­ï¼ååæ å¤ä¸å¨ã\n\nå¯¹äºæ¶æéææ¥è¯´ï¼ååæ¥æºäºå¤ä¸ªæ¹é¢ï¼ç®¡çå±ãå¢éæåãåçº§é¨é¨ç­ç­ãè¯´ç½äºï¼æ¶æéæå¯¹ä¸ªäººæ¥è¯´å¾å¾æ¯ä¸ä»¶åºåä¸è®¨å¥½çäºæãååä¸ä¸ªæ°äº§åè½å¤åå¾å¾é«çèµèµç¸æ¯ï¼éæçæç»©å¾å¾å¹¶ä¸åé¢å¯¼éè§ï¼èä¸åºäºé®é¢è¿è¦æ¿æå¾å¤§çè´£ä»»ãä»è½¯ä»¶å¼åè§åº¦çï¼åæ°äº§åæ¯ä»0å°1ï¼èæ¶æéææ¯ä»-1å°1ï¼å¤ææ§åé¾åº¦éå¸¸æ´å¤§ã\n\nå æ­¤ï¼éæçè´è´£äººè¦æååå¥½å¿çåå¤ï¼èç¼ååçä¸ä¸ªæå·§æ¯ï¼è®¾ç½®å¥½éç¨ç¢ï¼å°éæçææéåï¼å¹¶ä¸åä¸å¡çååå³èèµ·æ¥ï¼å®æåå©çç¸å³åæ¹åæ­¥ç¶æï¼å¾å°å¤§å®¶ççè§£åæ¯æã\n\næ£æ¥æ¸åï¼\n\n * æ¶æçéææ¯å¦å¾å°äºç®¡çå±ï¼ç¹å«æ¯æé«ç®¡çå±ï¼çæ¯æï¼ä»ä»¬æ¯å¦å¯¹éæçæ¶é´ãä»»å¡éæç´æ¥çè®¤è¯ï¼\n * ä½ çéæè®¡åä¸­æ¯å¦åå«äºä¸äºå¯ä»¥éåçææï¼æ¯å¦å®æåç®¡çå±å±ç¤ºè¿äºææï¼\n\n\n# 9ãäºè§£ä¸å¡\n\nè½ç¶çèµ·æ¥åæ¯ä¸å¥åºè¯ï¼ä½æ¯ææ³raffi krikorianç¹ææè¿æ¡æåºæ¥ä¸å®æ¯æçç±çã\n\næ¶æéæçæç»ç®çæ¯æ¹è¿ä¸å¡ï¼æä»¥å¯¹äºä¸å¡çäºè§£å°æå©äºæ¶æå¸åææ¯äººç¡®å®éæç®æ çä¼åçº§åå³é®è·¯å¾ãæ¯å¦ï¼æä»¬éè¦ç¥éåªäºå³é®ä¸å¡çæ¶ææ¯ä¸è½ç¢°çï¼åªäºä¸å¡ä¹é´æ¯äºç¸å³èçï¼åªäºä¸å¡çæ¶ææ¯éè¦ä¼åéæç...ç­ç­ã\n\né¤äºäºè§£ä¸å¡æ¬èº«ï¼æä»¬è¿éè¦äºè§£âäººâï¼è¡¨é¢ä¸ç®¡çå±æ¯éæç®æ çè£å³èï¼ä½å®éä¸ä¸å¡é¨é¨çäººææ¯ãææ¯äººéè¦äºè§£ä»ä»¬çä¸å¡éæ±ï¼å¹¶å°å¶è½¬åä¸ºéæç®æ ãéè¿è¿ç§æ¹å¼ï¼æ¶æéæçæä¹æè½å¾å°å·ä½çä½ç°ã\n\næ£æ¥æ¸åï¼\n\n * æ¯å¦ä¸ä¸å¡é¨é¨å°±æ¶æéææè½å®ç°çä¸å¡ç®æ è¿è¡è¿ååçè®¨è®ºåç¡®è®¤ï¼\n * æ¯å¦å¯¹å³é®ä¸å¡åä¼åéæçä¸å¡è¿è¡äºç¡®è®¤ï¼\n\n\n# 10ãåå¥½é¢å¯¹éææ¯å ç´ çåå¤\n\næ©......è¿åæ¯ä¸ä¸ªä¸é£ä¹è®©äººèæçå»ºè®®ã\n\nä¸ç®¡ä½ æ¯å¦æ¿æç¸ä¿¡ï¼ææ¯å¨æ¶æéæï¼ä»¥åå¶ä»å¾å³é®çå¬å¸å³ç­ä¸­ï¼çå½±åå ç´ ä¸­å¹¶ä¸æ¯æé«çï¼æä»¬è¿ä¼æ¶åå°åä¸å©çãç®¡çå±åå¥½ãå¤§å®¢æ·å½±åãåå¬å®¤zhengzhiç­ç­ï¼å¯¹äºæ¶æå¸åææ¯äººæ¥è¯´ï¼è¿äºå ç´ å¾å¾ä¸æ¯ä»ä»¬æè½ææ§çãæä»¬è½åçå°±æ¯ï¼æ ¹æ®ä¸åçå½±åå ç´ ï¼è°æ´ç®æ ã\n\nè¯·è®°ä½ï¼ä¸è¦æ­»æè¿ä¸ªç®æ ï¼å½æäººæåºä¸åçæè§æ¶ï¼è¦å¦è¯å°åä»ä»¬äº¤æµï¼å¹¶åç¥ä»ä»¬å¦ä½éçº³æè§ï¼é£ä¹éæç®æ ä¼æååï¼ç¶åè®©å¶ä»å©çç¸å³èä¹ç¥éè¿äºååã\n\néææ¯å ç´ çå½±åæ¯å®¢è§å­å¨çï¼èä¸ä»åä¸å±é¢æ¥è¯´ä¹æ¯åççï¼æä»¥å¯¹äºææ¯äººæ¥è¯´è¦å­¦ä¼éåºã\n\næ£æ¥æ¸åï¼\n\n * å½éææ¯å ç´ å½±åæ¶æçéææ¶ï¼ä½ æ¯å¦å¯¹ç®æ åäºè°æ´å¹¶åç¥äºå©çç¸å³åæ¹ï¼\n * ä½ æ¯å¦åå¤ä»¥å¼æ¾èä¸æ¯æµå¶çå¿ææ¥å¯¹å¾éææ¯å ç´ çå½±åï¼\n\n\n# 11ãå¯¹äºä»£ç è´¨éææææ¡\n\nè¿åä¸æä¸­ææå°çâç®¡çå¥½ææ¯åºå¡âæå¼æ²åå·¥ä¹å¤ã\n\næ¶æçéæå¯¹ä»£ç è´¨éè¦æ±å¾é«ï¼ä¸æ¹é¢æ¯éæè¿ç¨å¯¹bugçå®¹å¿æ§æ¯æ°äº§åçç åæ´ä½ï¼å¦ä¸æ¹é¢ä¹å³å®äºä¸ä¸æ¬¡éæçé¾æç¨åº¦ã\n\nå³äºä»£ç è´¨éçä¹¦ç±åæç« å·²ç»æå¾å¤ï¼å¨è¿éåªæ³æéå¤§å®¶ä¸ç¹ï¼ä»£ç å®¡æ¥æ¯ä¸ä¸ªéå¸¸å¥½çåæ³ãä»£ç å®¡æ¥æ¯è½¯ä»¶å¼åè¿ç¨ä¸­çå¿è¦æ­¥éª¤ï¼æ¢å¯ä»¥å¸®å©è¢«å®¡æ¥èæå°ä»£ç è´¨éï¼åå¯ä»¥è®©å®¡æ¥èå æ·±å¯¹äº§åççè§£ãä¸è®ºå¢éå¤å¿ï¼ä¸å®è¦ä¿è¯ä»£ç æäº¤ä¹åï¼æ¯ç»è¿å¶ä»æåå®¡æ ¸è¿çï¼ç­ææ¥çä¼å ç¨å¢éçæ¶é´ï¼é¿ææ¥çæ¯äºåååçå¥½äºã\n\næ£æ¥æ¸åï¼\n\n * å¢éæåæ¯å¦å¯¹ä»£ç è´¨éæè¶³å¤çéè§ï¼æ¯å¦æå¥æ©æªæ½ï¼\n * å¢éåé¨æ¯å¦æä»£ç è´¨éçæ åææ¡£åå®¡æ¥æµç¨ï¼\n\n\n# 12ãè®©å¢éåå¥½åå¤\n\nè¿æ¯raffi krikorianåä¸¾çæåä¸æ¡åè§ï¼æ¯å¯¹ä¹åææå»ºè®®çæ»ç»ã\n\n\n# ç»å°¾\n\nå³äºæ¶æçéæï¼raffi krikorianç»äºå¾å¥½çå»ºè®®ï¼ä¸è¿å°åºææ²¡æææï¼è¿æ¯è¦å®è·µä¸­æ£éªãå°½ä¿¡ä¹¦ä¸å¦æ ä¹¦ï¼æ¥æºäºå®è·µä¸­çç»éªæ¯ææä»·å¼çï¼ä¸ºææ¯äººæç¨æææä¹ã\n\n\n# reference\n\n 1. ãéæ-æ¹åæ¢æä»£ç çè®¾è®¡ã\n 2. ãç¨åºåçèä¸ç´ å»ã\n 3. ãä¿®æ¹ä»£ç çèºæ¯ã\n 4. architect-12-rules-complete",charsets:{cjk:!0}},{title:"Skill and Communication",frontmatter:{title:"Skill and Communication",date:"2020-04-13T00:00:00.000Z",description:"ææ¯ä¸äº¤æµ",permalink:null,categories:["blog","xnote"],tags:[null]},regularPath:"/blog/xnote/about_skill_communication.html",relativePath:"blog/xnote/about_skill_communication.md",key:"v-f76e517a",path:"/blog/xnote/about_skill_communication.html",headers:[{level:2,title:"ä¸å®ç¾çæäº",slug:"ä¸å®ç¾çæäº",normalizedTitle:"ä¸å®ç¾çæäº",charIndex:30},{level:2,title:"æèä¸æ»ç»",slug:"æèä¸æ»ç»",normalizedTitle:"æèä¸æ»ç»",charIndex:45}],headersStr:"ä¸å®ç¾çæäº æèä¸æ»ç»",content:"# Skill and Communication\n\n\n# ä¸å®ç¾çæäº\n\n\n\n\n\n\n# æèä¸æ»ç»\n\nä¸é¿ ---\x3e (éæ¸ååçç¯å¢ä¸ç)è§£å³é®é¢è½å ---\x3e åäºåé å¤èµ¢å±é¢\n\nå¦æâä¼æ¥äºå¿âçæææ¯è¯´âåäºåé å¤èµ¢å±é¢âçè¯ï¼é£è¿äºå¿è¿ççå¼å¾å¥½å¥½ç ç©¶ï¼å¥½å¥½å®è·µã\n\nå¦æä¸æ¯, å°±å«æ­»ç£äº, è¿å±äºéå¾ç¨èªå·±çå£å¿å»è·å«äººçä¼å¿ç«äº, è¿æ ·å°±æ°¸è¿å¨è¿½èµ¶, èµ¶ä¸ä¸çãä¸å¦æ¢æ¡é,åå±åç´é¢åçè½åè¿ä¸ªæ··ç¤¾ä¼çç¡¬éè´§, è®©èªå·±å å¥å°ç¤¾ä¼å¤§ç³»ç»é, å¦æä½ è½ç»å«äººæä¾ä»·å¼, åä¸ä¾éäºæä¸ªç¹å®çç³»ç», ä½ å°±ä¸éè¦ä¼æ¥äºå¿ä¹å¯ä»¥è¿å¾å¾å¥½äºã\n\n\n# Reference\n\n * https://www.zhihu.com/question/20940082",normalizedContent:"# skill and communication\n\n\n# ä¸å®ç¾çæäº\n\n\n\n\n\n\n# æèä¸æ»ç»\n\nä¸é¿ ---\x3e (éæ¸ååçç¯å¢ä¸ç)è§£å³é®é¢è½å ---\x3e åäºåé å¤èµ¢å±é¢\n\nå¦æâä¼æ¥äºå¿âçæææ¯è¯´âåäºåé å¤èµ¢å±é¢âçè¯ï¼é£è¿äºå¿è¿ççå¼å¾å¥½å¥½ç ç©¶ï¼å¥½å¥½å®è·µã\n\nå¦æä¸æ¯, å°±å«æ­»ç£äº, è¿å±äºéå¾ç¨èªå·±çå£å¿å»è·å«äººçä¼å¿ç«äº, è¿æ ·å°±æ°¸è¿å¨è¿½èµ¶, èµ¶ä¸ä¸çãä¸å¦æ¢æ¡é,åå±åç´é¢åçè½åè¿ä¸ªæ··ç¤¾ä¼çç¡¬éè´§, è®©èªå·±å å¥å°ç¤¾ä¼å¤§ç³»ç»é, å¦æä½ è½ç»å«äººæä¾ä»·å¼, åä¸ä¾éäºæä¸ªç¹å®çç³»ç», ä½ å°±ä¸éè¦ä¼æ¥äºå¿ä¹å¯ä»¥è¿å¾å¾å¥½äºã\n\n\n# reference\n\n * https://www.zhihu.com/question/20940082",charsets:{cjk:!0}},{title:"å³äºè¡å¸",frontmatter:{title:"å³äºè¡å¸",date:"2021-01-03T00:00:00.000Z",description:"about stock",permalink:null,categories:["blog","xnote"],tags:[null]},regularPath:"/blog/xnote/about_stock.html",relativePath:"blog/xnote/about_stock.md",key:"v-15f1fc67",path:"/blog/xnote/about_stock.html",headers:[{level:2,title:"ææ ",slug:"ææ ",normalizedTitle:"ææ ",charIndex:11}],headersStr:"ææ ",content:"# å³äºè¡å¸\n\n\n# ææ \n\n# å¸åç(PB, price to book value)\n\nPB = æ¯è¡è¡ä»· / æ¯è¡åèµäº§\n\nç¨å¸åçä¼°å¼åªéåé¶è¡ï¼é¢éæ°´æ³¥ï¼æ¿å°äº§ç­å¨ææ§è¡ä¸ãä¸ºä»ä¹åªéåè¿å ä¸ªè¡ä¸å¢ï¼å ä¸ºè¿äºè¡ä¸å¤ªæçäºï¼æ²¡æé«å¢é¿ï¼è¡æ°å°±èµä¸å°é±ï¼é£å°±åªè½å¨ä½ ä¼°å¼å¾ä½çæ¶åä¹°ææé±èµã\n\n# å¸çç(PE, price earnings ratio)\n\nPE = æ¯è¡è¡ä»· / æ¯è¡æ¶ç(EPS)\n\nç¨PEä¼°å¼çé»è¾æ¯åºäºå¬å¸å¢é¿çï¼ä½ åºçä»·æ ¼æ¯ä¹°å®ççå©è½åãæ¯å¦è¡ä»·æ¯30åï¼æ¯è¡çå©æ¯2åï¼éæå¸ççå°±æ¯15åï¼ææå°±æ¯å¨å¬å¸èµé±è½åä¸å¢é¿çæåµä¸ï¼15å¹´æ¶åææ¬ï¼ä½å¦ææå¢é¿ï¼å°±çå¢é¿éåº¦çå¿«æ¢äºã\n\nä¸è¬æä»¬ç¨éæå¸ççï¼15åå·¦å³å°±æ¯æ­£å¸¸çãä½æ¯è¿ä¸ªåæ°åç»éªæ°æ®åªè½ç¨å¨é£äºç¨³å®å¢é¿ï¼æç¨³å®é¢æçæçè¡ä¸ï¼æ¯å¦æ¶è´¹åï¼é¶å®ï¼å»è¯éç±»ç­ã\n\n# åèµäº§æ¶çç(ROE, return on equity)\n\nROE = ç¨ååå©æ¶¦ / åèµäº§\n\nROE çæ åæ¯15%ï¼åå¸çç15åå¯¹åº\n\nè¿ä¸ªææ åæ äºå¬å¸çèµé±è½åå°åºæä¹æ ·ï¼è¿æ¯æ ¸å¿çææ ãä»ä¹ææå¢ï¼å¬å¸æèµ100åé±ï¼å¦æèµ15åï¼ROEå°±æ¯15%ï¼èµ20åï¼ROEå°±æ¯20%ãè¿ä¸ªæ°å­è¶é«ï¼è¯´æçæè¶å¥½ï¼åæ¥çè¶é«ï¼å¨è§£è¯»è´¢æ¥çæ¶åè¿æ¯è¡¡éä¸ä¸ªä¼ä¸èµéå©ç¨æççæ ¸å¿ææ ã\n\n# å¸ççå¢é¿ç(PEG)\n\nPEG = å¸çç/åå©æ¶¦å¢é¿ç\n\nå¦æå¾åºçæ°å¼æ¯å°äºç­äº1ï¼è¯´æå¯ä»¥ä¹°å¥ãæ°å­è¶å¤§è¯ææ³¡æ²«è¶å¤§ï¼æ°å­è¶å°è¶å®å¨ã\n\nå®çæ ¸å¿åçå°±æ¯ä½ èµé±çéåº¦å¿é¡»å¼å¾ä½ åºçä»·æ ¼ï¼å ä¸ºä¸å¸å¬å¸çåå©æ¶¦å¢é¿éåº¦å³å®äºæèµäººçèµé±éåº¦ï¼æä»¥è³å°æ¯1:1çæ°´å¹³ï¼ä½ä¸ºæèµäººæåå¾æ¥ãæ¯å¦ä¸ä¸ªå¬å¸çå¸ççæ¯25åï¼ä½æ¯å®çåå©æ¶¦å¢é¿çæ¯30%ï¼25/30=0.83ï¼å°äº1ï¼é£ä¹å°±å¯ä»¥ä¹°ãèå¦æè¿ä¸ªå¬å¸åå©æ¶¦å¢é¿çæ¯20%ï¼é£ä¹ç»æå°±æ¯å¤§äº1ï¼å°±è¯æè¿ä¸ªå¬å¸ä¸å¼è¿ä¸ªä»·æ ¼ï¼å ä¸ºèµé±çéåº¦è·ä¸ä¸ã\n\nå¾åºæ¥çæ°å­æå°ï¼å°±è¯æè¿ä¸ªå¬å¸è¶è¢«ä½ä¼°äºï¼è¶å¼å¾ä¹°å¥ï¼è¶è¿1å°±ä¸å¼å¾äºã\n\nè¿ä¸ªå¬å¼çç¥å¥ä¹å¤å¨äºæ è®ºä½ å¤é«çå¸ççï¼æé½ä¸æï¼åªè¦ä½ çåå©æ¶¦å¢é¿éåº¦è·çä¸ï¼æå°±ä¸æï¼å¶å®æºå¬å¹³çï¼ä½ å¹²å¤å°æ´»ï¼æå°±ç»ä½ åºä»ä¹ä»·ï¼ä½ åé çä»·å¼è¦éçä¸ä½ çå·¥èµæ°´å¹³ï¼æµæ°´çº¿çå·¥äººä¹å¥½ï¼ä¸ä¸ªå¬å¸çæ»ç»çä¹å¥½ï¼é½æ¯æ ¹æ®ä»èµé±çè½åæ¥å®ä»·çï¼\n\nåèµäº§æ¶ççROEÃ·å¸åçPB åèµäº§æ¶ççæ¯è¡¡éä¸ä¸ªå¬å¸çèµé±è½åï¼èå¸åçæ¯è¡¡éä¸ä¸ªå¬å¸çåºä»·é«ä½ï¼é£ä¹æ¿åèé¤ä»¥åèä¼æä¹æ ·å¢ï¼ å ä¸ºåæ¯æ¯å¸åçï¼å¸åçè¶é«ï¼è¯æä»·æ ¼è¶é«ï¼åèµäº§æ¶ççè¶é«ï¼è¯æèµé±è½åè¶å¼ºï¼æä»¥å¾åºçæ°å¼æ¯è¶é«å°±è¶å¥½ã è¿ä¸ªå¬å¼çæ ¸å¿æä¹å¨äºå¯¹æ¯ï¼èä¸æ¯åçï¼å°¤å¶æéä¸ªè¡çæ¶åï¼ç¨çè¡ä¸çå¯¹æ¯ä¸ï¼ç®ç´å°±æ¯ä¸ç»ã æ¯å¦æ³å¨ç½éè¡ä¸éä¸æ¯è¡ç¥¨ï¼ä¸ç¥éæä¹é: ç¬¬ä¸æ­¥ï¼æåèµäº§æ¶ççæåå5æ¾åºæ¥ï¼ç±é«å¾ä½æï¼è¶é«è¶ææèµä»·å¼ ç¬¬äºæ­¥ï¼æå¸åçæåå5æ¾åºæ¥ï¼ç±ä½å¾é«æï¼è¶ä½è¶ææèµä»·å¼ ææï¼é£äºä¸ªææ éåªä¸ä¸ªï¼ä¸æ¥ï¼æ¿åèµäº§æ¶ççé¤ä»¥å¸åçï¼å¾åºçæ°å¼è¶é«ï¼å°±è¯æè¶ææèµä»·å¼ï¼è¿æ ·ä¸æ¥å°±åæ¶å¼é¡¾äºèµé±è½ååä¼°å¼äºã\n\né¢æµæªæ¥æ¶çæ³ ç´æ¥éè¿å¸ççè®¡ç® åè®¾ä¸ä¸ªè¡ç¥¨æ­£å¸¸çä¼°å¼æ¯20åï¼å°±å¯ä»¥åç®åºä»åºè¯¥çæ¯è¡æ¶çæ¯å¤å°ãå¬å¼ï¼ä»·æ ¼/20ä¼°å¼=åºè¯¥æçæ¯è¡æ¶ç.è¿ä¸ªå¬å¼çæææ¯è¯´ï¼æ¢ç¶ä½ çä»·æ ¼æ¯è¿ä¹å¤ï¼é£ä¹ä½ çæ¯è¡æ¶çåºè¯¥å¼å¤å°ï¼å¦æç°å¨çå®çæ¯è¡æ¶çä½äºè¿ä¸ªæ°ï¼å°±æ¯ä¸å¼è¿ä¸ªä»·æ ¼ã\n\næ ¼é·åå§çä¼°å¼æ³\n\nç°éæµæç°æ³\n\nå½¼å¾æå¥çä¸ä¸ªèåçè®ºæ­ï¼ä»»ä½ä¸å®¶å¬å¸çè¡ç¥¨å¦æå®ä»·åççè¯ï¼å¸ççå°±ä¼ä¸æ¶çå¢é¿çç¸ç­ï¼è¿å°±æ¯ãPEGä¼°å¼æ³ãçæ¥æºãè®¡ç®å¬å¼ï¼PEG=PE/å¬å¸çå©å¢é¿çãPEG=1çæ¶åæ¯åçä¼°å¼ï¼å°äº1æ¯ä½ä¼°ï¼å¤§äº1æ¯é«ä¼°ã",normalizedContent:"# å³äºè¡å¸\n\n\n# ææ \n\n# å¸åç(pb, price to book value)\n\npb = æ¯è¡è¡ä»· / æ¯è¡åèµäº§\n\nç¨å¸åçä¼°å¼åªéåé¶è¡ï¼é¢éæ°´æ³¥ï¼æ¿å°äº§ç­å¨ææ§è¡ä¸ãä¸ºä»ä¹åªéåè¿å ä¸ªè¡ä¸å¢ï¼å ä¸ºè¿äºè¡ä¸å¤ªæçäºï¼æ²¡æé«å¢é¿ï¼è¡æ°å°±èµä¸å°é±ï¼é£å°±åªè½å¨ä½ ä¼°å¼å¾ä½çæ¶åä¹°ææé±èµã\n\n# å¸çç(pe, price earnings ratio)\n\npe = æ¯è¡è¡ä»· / æ¯è¡æ¶ç(eps)\n\nç¨peä¼°å¼çé»è¾æ¯åºäºå¬å¸å¢é¿çï¼ä½ åºçä»·æ ¼æ¯ä¹°å®ççå©è½åãæ¯å¦è¡ä»·æ¯30åï¼æ¯è¡çå©æ¯2åï¼éæå¸ççå°±æ¯15åï¼ææå°±æ¯å¨å¬å¸èµé±è½åä¸å¢é¿çæåµä¸ï¼15å¹´æ¶åææ¬ï¼ä½å¦ææå¢é¿ï¼å°±çå¢é¿éåº¦çå¿«æ¢äºã\n\nä¸è¬æä»¬ç¨éæå¸ççï¼15åå·¦å³å°±æ¯æ­£å¸¸çãä½æ¯è¿ä¸ªåæ°åç»éªæ°æ®åªè½ç¨å¨é£äºç¨³å®å¢é¿ï¼æç¨³å®é¢æçæçè¡ä¸ï¼æ¯å¦æ¶è´¹åï¼é¶å®ï¼å»è¯éç±»ç­ã\n\n# åèµäº§æ¶çç(roe, return on equity)\n\nroe = ç¨ååå©æ¶¦ / åèµäº§\n\nroe çæ åæ¯15%ï¼åå¸çç15åå¯¹åº\n\nè¿ä¸ªææ åæ äºå¬å¸çèµé±è½åå°åºæä¹æ ·ï¼è¿æ¯æ ¸å¿çææ ãä»ä¹ææå¢ï¼å¬å¸æèµ100åé±ï¼å¦æèµ15åï¼roeå°±æ¯15%ï¼èµ20åï¼roeå°±æ¯20%ãè¿ä¸ªæ°å­è¶é«ï¼è¯´æçæè¶å¥½ï¼åæ¥çè¶é«ï¼å¨è§£è¯»è´¢æ¥çæ¶åè¿æ¯è¡¡éä¸ä¸ªä¼ä¸èµéå©ç¨æççæ ¸å¿ææ ã\n\n# å¸ççå¢é¿ç(peg)\n\npeg = å¸çç/åå©æ¶¦å¢é¿ç\n\nå¦æå¾åºçæ°å¼æ¯å°äºç­äº1ï¼è¯´æå¯ä»¥ä¹°å¥ãæ°å­è¶å¤§è¯ææ³¡æ²«è¶å¤§ï¼æ°å­è¶å°è¶å®å¨ã\n\nå®çæ ¸å¿åçå°±æ¯ä½ èµé±çéåº¦å¿é¡»å¼å¾ä½ åºçä»·æ ¼ï¼å ä¸ºä¸å¸å¬å¸çåå©æ¶¦å¢é¿éåº¦å³å®äºæèµäººçèµé±éåº¦ï¼æä»¥è³å°æ¯1:1çæ°´å¹³ï¼ä½ä¸ºæèµäººæåå¾æ¥ãæ¯å¦ä¸ä¸ªå¬å¸çå¸ççæ¯25åï¼ä½æ¯å®çåå©æ¶¦å¢é¿çæ¯30%ï¼25/30=0.83ï¼å°äº1ï¼é£ä¹å°±å¯ä»¥ä¹°ãèå¦æè¿ä¸ªå¬å¸åå©æ¶¦å¢é¿çæ¯20%ï¼é£ä¹ç»æå°±æ¯å¤§äº1ï¼å°±è¯æè¿ä¸ªå¬å¸ä¸å¼è¿ä¸ªä»·æ ¼ï¼å ä¸ºèµé±çéåº¦è·ä¸ä¸ã\n\nå¾åºæ¥çæ°å­æå°ï¼å°±è¯æè¿ä¸ªå¬å¸è¶è¢«ä½ä¼°äºï¼è¶å¼å¾ä¹°å¥ï¼è¶è¿1å°±ä¸å¼å¾äºã\n\nè¿ä¸ªå¬å¼çç¥å¥ä¹å¤å¨äºæ è®ºä½ å¤é«çå¸ççï¼æé½ä¸æï¼åªè¦ä½ çåå©æ¶¦å¢é¿éåº¦è·çä¸ï¼æå°±ä¸æï¼å¶å®æºå¬å¹³çï¼ä½ å¹²å¤å°æ´»ï¼æå°±ç»ä½ åºä»ä¹ä»·ï¼ä½ åé çä»·å¼è¦éçä¸ä½ çå·¥èµæ°´å¹³ï¼æµæ°´çº¿çå·¥äººä¹å¥½ï¼ä¸ä¸ªå¬å¸çæ»ç»çä¹å¥½ï¼é½æ¯æ ¹æ®ä»èµé±çè½åæ¥å®ä»·çï¼\n\nåèµäº§æ¶ççroeÃ·å¸åçpb åèµäº§æ¶ççæ¯è¡¡éä¸ä¸ªå¬å¸çèµé±è½åï¼èå¸åçæ¯è¡¡éä¸ä¸ªå¬å¸çåºä»·é«ä½ï¼é£ä¹æ¿åèé¤ä»¥åèä¼æä¹æ ·å¢ï¼ å ä¸ºåæ¯æ¯å¸åçï¼å¸åçè¶é«ï¼è¯æä»·æ ¼è¶é«ï¼åèµäº§æ¶ççè¶é«ï¼è¯æèµé±è½åè¶å¼ºï¼æä»¥å¾åºçæ°å¼æ¯è¶é«å°±è¶å¥½ã è¿ä¸ªå¬å¼çæ ¸å¿æä¹å¨äºå¯¹æ¯ï¼èä¸æ¯åçï¼å°¤å¶æéä¸ªè¡çæ¶åï¼ç¨çè¡ä¸çå¯¹æ¯ä¸ï¼ç®ç´å°±æ¯ä¸ç»ã æ¯å¦æ³å¨ç½éè¡ä¸éä¸æ¯è¡ç¥¨ï¼ä¸ç¥éæä¹é: ç¬¬ä¸æ­¥ï¼æåèµäº§æ¶ççæåå5æ¾åºæ¥ï¼ç±é«å¾ä½æï¼è¶é«è¶ææèµä»·å¼ ç¬¬äºæ­¥ï¼æå¸åçæåå5æ¾åºæ¥ï¼ç±ä½å¾é«æï¼è¶ä½è¶ææèµä»·å¼ ææï¼é£äºä¸ªææ éåªä¸ä¸ªï¼ä¸æ¥ï¼æ¿åèµäº§æ¶ççé¤ä»¥å¸åçï¼å¾åºçæ°å¼è¶é«ï¼å°±è¯æè¶ææèµä»·å¼ï¼è¿æ ·ä¸æ¥å°±åæ¶å¼é¡¾äºèµé±è½ååä¼°å¼äºã\n\né¢æµæªæ¥æ¶çæ³ ç´æ¥éè¿å¸ççè®¡ç® åè®¾ä¸ä¸ªè¡ç¥¨æ­£å¸¸çä¼°å¼æ¯20åï¼å°±å¯ä»¥åç®åºä»åºè¯¥çæ¯è¡æ¶çæ¯å¤å°ãå¬å¼ï¼ä»·æ ¼/20ä¼°å¼=åºè¯¥æçæ¯è¡æ¶ç.è¿ä¸ªå¬å¼çæææ¯è¯´ï¼æ¢ç¶ä½ çä»·æ ¼æ¯è¿ä¹å¤ï¼é£ä¹ä½ çæ¯è¡æ¶çåºè¯¥å¼å¤å°ï¼å¦æç°å¨çå®çæ¯è¡æ¶çä½äºè¿ä¸ªæ°ï¼å°±æ¯ä¸å¼è¿ä¸ªä»·æ ¼ã\n\næ ¼é·åå§çä¼°å¼æ³\n\nç°éæµæç°æ³\n\nå½¼å¾æå¥çä¸ä¸ªèåçè®ºæ­ï¼ä»»ä½ä¸å®¶å¬å¸çè¡ç¥¨å¦æå®ä»·åççè¯ï¼å¸ççå°±ä¼ä¸æ¶çå¢é¿çç¸ç­ï¼è¿å°±æ¯ãpegä¼°å¼æ³ãçæ¥æºãè®¡ç®å¬å¼ï¼peg=pe/å¬å¸çå©å¢é¿çãpeg=1çæ¶åæ¯åçä¼°å¼ï¼å°äº1æ¯ä½ä¼°ï¼å¤§äº1æ¯é«ä¼°ã",charsets:{cjk:!0}},{title:"Interesting Xxx",frontmatter:{title:"Interesting Xxx",date:"2021-06-03T00:00:00.000Z",description:"æè¶£çåå®¹",permalink:null,categories:["blog","xnote"],tags:[null]},regularPath:"/blog/xnote/interesting_xxx.html",relativePath:"blog/xnote/interesting_xxx.md",key:"v-8cf30266",path:"/blog/xnote/interesting_xxx.html",headers:[{level:2,title:"Interesting Repositories",slug:"interesting-repositories",normalizedTitle:"interesting repositories",charIndex:56}],headersStr:"Interesting Repositories",content:"# Interesting Xxx\n\n> JustDoIt\n\n * å¤å°æ¶æï¼æå»ºå¯é çå¤§ååå¸å¼ç³»ç»\n\n\n# Interesting Repositories\n\n * https://github.com/moyada/stealer\n   \n   * æé³ãå¿«æãç«å±±ãç®ç®è¾ï¼è§é¢å»æ°´å°ç¨åº\n\n * VirtualXposed & taichi\n   \n   * https://github.com/taichi-framework/TaiChi\n   * https://github.com/android-hacker/VirtualXposed\n\n * Deploy\n   \n   * snapmod: å¸¦å¤æ¡çæªå±çapp\n\n * å¹¼å¿è±è¯­å¯èå¡ç\n\n * æ¬å°å¯ç ç®¡çè½¯ä»¶ KeePassX\n\n * OBS Studio https://obsproject.com/\n\n * Shotcut https://shotcut.org/\n\n * Apache Superset https://github.com/apache/superset\n   \n   * Apache Supersetæ¯ä¸ä¸ªç°ä»£çãè½»éçº§å¯è§åBIåæå·¥å·ãApache Supersetå¨å¯è§åãæç¨æ§åäº¤äºæ§ä¸éå¸¸æç¹è²ï¼ç¨æ·å¯ä»¥è½»æ¾å¯¹æ°æ®è¿è¡å¯è§ååæãèä¸Apache Superset å·²ç»è¾¾å°ä¼ä¸çº§åä¸è½¯ä»¶çæ°´å¹³ã\n * ",normalizedContent:"# interesting xxx\n\n> justdoit\n\n * å¤å°æ¶æï¼æå»ºå¯é çå¤§ååå¸å¼ç³»ç»\n\n\n# interesting repositories\n\n * https://github.com/moyada/stealer\n   \n   * æé³ãå¿«æãç«å±±ãç®ç®è¾ï¼è§é¢å»æ°´å°ç¨åº\n\n * virtualxposed & taichi\n   \n   * https://github.com/taichi-framework/taichi\n   * https://github.com/android-hacker/virtualxposed\n\n * deploy\n   \n   * snapmod: å¸¦å¤æ¡çæªå±çapp\n\n * å¹¼å¿è±è¯­å¯èå¡ç\n\n * æ¬å°å¯ç ç®¡çè½¯ä»¶ keepassx\n\n * obs studio https://obsproject.com/\n\n * shotcut https://shotcut.org/\n\n * apache superset https://github.com/apache/superset\n   \n   * apache supersetæ¯ä¸ä¸ªç°ä»£çãè½»éçº§å¯è§åbiåæå·¥å·ãapache supersetå¨å¯è§åãæç¨æ§åäº¤äºæ§ä¸éå¸¸æç¹è²ï¼ç¨æ·å¯ä»¥è½»æ¾å¯¹æ°æ®è¿è¡å¯è§ååæãèä¸apache superset å·²ç»è¾¾å°ä¼ä¸çº§åä¸è½¯ä»¶çæ°´å¹³ã\n * ",charsets:{cjk:!0}},{title:"deep mind",frontmatter:{title:"deep mind",date:"2022-01-17T00:00:00.000Z",description:"æ·±åº¦æç»´",permalink:null,categories:["blog","xnote"],tags:[null]},regularPath:"/blog/xnote/rnote_deep_mind.html",relativePath:"blog/xnote/rnote_deep_mind.md",key:"v-455450db",path:"/blog/xnote/rnote_deep_mind.html",headers:[{level:2,title:"ç¬¬ä¸ç«  æç»´é»è¾é¾",slug:"ç¬¬ä¸ç« -æç»´é»è¾é¾",normalizedTitle:"ç¬¬ä¸ç«  æç»´é»è¾é¾",charIndex:389},{level:2,title:"ç¬¬äºç«  æ¢ä½æç»´",slug:"ç¬¬äºç« -æ¢ä½æç»´",normalizedTitle:"ç¬¬äºç«  æ¢ä½æç»´",charIndex:460},{level:2,title:"ç¬¬ä¸ç«  å¯è§åæç»´",slug:"ç¬¬ä¸ç« -å¯è§åæç»´",normalizedTitle:"ç¬¬ä¸ç«  å¯è§åæç»´",charIndex:650},{level:2,title:"ç¬¬åç«  æµç¨åæç»´",slug:"ç¬¬åç« -æµç¨åæç»´",normalizedTitle:"ç¬¬åç«  æµç¨åæç»´",charIndex:820},{level:3,title:"ç§ç±æç»´çè°¬è¯¯",slug:"ç§ç±æç»´çè°¬è¯¯",normalizedTitle:"ç§ç±æç»´çè°¬è¯¯",charIndex:834},{level:3,title:"å¨æµç¨ä¼å",slug:"å¨æµç¨ä¼å",normalizedTitle:"å¨æµç¨ä¼å",charIndex:890},{level:2,title:"ç¬¬äºç«  çææç»´",slug:"ç¬¬äºç« -çææç»´",normalizedTitle:"ç¬¬äºç«  çææç»´",charIndex:1731},{level:3,title:"è¡çæ¨¡åIï¼æ·éæ¨¡å",slug:"è¡çæ¨¡åi-æ·éæ¨¡å",normalizedTitle:"è¡çæ¨¡åiï¼æ·éæ¨¡å",charIndex:1987},{level:3,title:"è¡çæ¨¡åâ¡ï¼æ£®ææ¨¡å",slug:"è¡çæ¨¡åii-æ£®ææ¨¡å",normalizedTitle:"è¡çæ¨¡åâ±ï¼æ£®ææ¨¡å",charIndex:2131},{level:3,title:"è¡çæ¨¡åâ¢ï¼æ± å¡æ¨¡å",slug:"è¡çæ¨¡åiii-æ± å¡æ¨¡å",normalizedTitle:"è¡çæ¨¡åâ²ï¼æ± å¡æ¨¡å",charIndex:2312},{level:2,title:"ç¬¬å­ç«  ç³»ç»æç»´",slug:"ç¬¬å­ç« -ç³»ç»æç»´",normalizedTitle:"ç¬¬å­ç«  ç³»ç»æç»´",charIndex:2696},{level:2,title:"ç¬¬ä¸ç«  å¤§å¿æç»´",slug:"ç¬¬ä¸ç« -å¤§å¿æç»´",normalizedTitle:"ç¬¬ä¸ç«  å¤§å¿æç»´",charIndex:2946},{level:2,title:"ç¬¬å«ç«  åµæ³æç»´",slug:"ç¬¬å«ç« -åµæ³æç»´",normalizedTitle:"ç¬¬å«ç«  åµæ³æç»´",charIndex:4514},{level:2,title:"ç¬¬ä¹ç«  æ¢å³æ¯å¿«",slug:"ç¬¬ä¹ç« -æ¢å³æ¯å¿«",normalizedTitle:"ç¬¬ä¹ç«  æ¢å³æ¯å¿«",charIndex:4955},{level:3,title:"ä¸ºä»ä¹éè¦ä¸æ³¨",slug:"ä¸ºä»ä¹éè¦ä¸æ³¨",normalizedTitle:"ä¸ºä»ä¹éè¦ä¸æ³¨",charIndex:5038},{level:3,title:"ä¸ºä»ä¹ä¸æ³¨å¾é¾åå°",slug:"ä¸ºä»ä¹ä¸æ³¨å¾é¾åå°",normalizedTitle:"ä¸ºä»ä¹ä¸æ³¨å¾é¾åå°",charIndex:5487},{level:3,title:"ç²¾ç¥å¾è¾",slug:"ç²¾ç¥å¾è¾",normalizedTitle:"ç²¾ç¥å¾è¾",charIndex:5613}],headersStr:"ç¬¬ä¸ç«  æç»´é»è¾é¾ ç¬¬äºç«  æ¢ä½æç»´ ç¬¬ä¸ç«  å¯è§åæç»´ ç¬¬åç«  æµç¨åæç»´ ç§ç±æç»´çè°¬è¯¯ å¨æµç¨ä¼å ç¬¬äºç«  çææç»´ è¡çæ¨¡åIï¼æ·éæ¨¡å è¡çæ¨¡åâ¡ï¼æ£®ææ¨¡å è¡çæ¨¡åâ¢ï¼æ± å¡æ¨¡å ç¬¬å­ç«  ç³»ç»æç»´ ç¬¬ä¸ç«  å¤§å¿æç»´ ç¬¬å«ç«  åµæ³æç»´ ç¬¬ä¹ç«  æ¢å³æ¯å¿« ä¸ºä»ä¹éè¦ä¸æ³¨ ä¸ºä»ä¹ä¸æ³¨å¾é¾åå° ç²¾ç¥å¾è¾",content:'# æ·±åº¦æç»´\n\nç¹ç¹ï¼\n\n 1. è¾é¿çæç»´é»è¾é¾\n 2. çªç ´èªæä¸ºä¸­å¿çå±éæ§ï¼çµæ´»åæ¢çé®é¢çè§è§\n 3. å¨ç¹æçä¿¡æ¯æµä¸­ä¿ææç»´è½å\n 4. ä»¥å®è§è§è§åæé®é¢ï¼è®¤ç¥äºç©æå¤ççæç¹æ§ãäºç©é¿æè¶å¿ç­\n\nè®­ç»ï¼\n\n 1. æ·±åº¦æç»´çå­¦ä¹ è¦åç¥è¯ç¹ä¸æ ·ææç¡®çãå¯æä½çåå®¹ï¼ä¸è½ä»ä»åçå¨æç§çå¿µçåºç¡ä¸ã\n\nææ¯å¤§å¸ï¼(ä¸»è¦ç¨äºå¤çæ¥å¸¸å·¥ä½çå·ä½äºç©ï¼å°±åä¸ä¸ªä¸ªå°å·¥å·ï¼è½è®©ä½ é«æçè§£å³é®é¢)\n\n 1. æç»´é»è¾é¾\n 2. æ¢ä½æç»´\n 3. å¯è§åæç»´\n 4. æµç¨æç»´\n\næç»´çæ ¼å±ï¼(è½è®©ä½ ç«å¨æ´é«ãæ´å¹¿çè§è§çå¾é®é¢ï¼ä»¥æ´æ·±å»æ´å·§å¦çæ¹å¼è§£å³é®é¢) 5. çææç»´ 6. ç³»ç»æç»´ 7. å¤§å¿æç»´ 8. åµæ³æç»´ 9. æ¢å³æ¯å¿«\n\nãæ·±åº¦æç»´ãä¸ä¹¦æ æ³æ¦æ¬æ·±åº¦æç»´çå¨é¨(å®éä¸ä»»ä½äººé½æ æ³ç©·å°½ææçæç»´æ¹æ³)ï¼æå¾å¤æç»´æ¹æ³å¹¶æ²¡æè¢«çº³å¥å°æ¬ä¹¦ä¸­æ¥ã\n\n\n# ç¬¬ä¸ç«  æç»´é»è¾é¾\n\n\n\n * 5Why\n   * è¯çèªä¸°ç°æ±½è½¦\n * 5So\n   * ãæ·±åº¦æç»´ãä½èå¼å\n\né»è¾é¾æ¡æ¦çä¼ å¯¼\n\n\n# ç¬¬äºç«  æ¢ä½æç»´\n\nå¦æä¸æå«äººæ¯æä¹æ³çï¼ä½ çåªåæè®¸ä¼ç½è´¹ãä½ éè¦å»ºç«å±åè®¤ç¥ã åæèªæä¸­å¿ï¼æè½èªå¦åæ¢è§è§è¿è¡æ¢ä½æç»´ï¼å°æ·±åº¦æç»´çåæåæ¥å°æ è´ã\n\næ¢ä½æç»´ï¼ç®åçè¯´å°±æ¯ï¼å¦æææ¯ä»ï¼ä¼æä¹æ³ãä½ï¼è¿æä¸ªå³é®æ¡ä»¶ï¼å¾åå«äººæå±åçè®¤ç¥ç³»ç»ã\n\n * å­é¡¶æèå¸½ (ç±å¾·åÂ·å¾·Â·æ³¢è¯º)\n   * å¨å±åæãå®¢è§äºå®ãææ§ç´è§ãä¹è§æèãä¿å®è¡äºãåæ°æç»´ã\n\n\n# ç¬¬ä¸ç«  å¯è§åæç»´\n\nç©éµåææ³\n\n * è¾æ£®è±ªå¨å°ç©éµ\n * å®ç´¢å¤«ç©éµ\n * åé èªå·±çç©éµç±»æç»´å·¥å·\n\nå·¥ä½ä»ªè¡¨ç\n\n * ä¸ºäºè®©è¿äºéè¦äºé¡¹è½å¤ç»å¸¸åºç°å¨æä»¬ç å·¥ä½è®°å¿éï¼æä»¬éè¦ä¸ä¸ªå¤é¨çæéââè¿å°±æ¯ä»ªè¡¨ççè¿ä½æ¹å¼ã\n\næ»çæ¥è¯´ï¼å¯è§åæç»´çæ ¸å¿å¨äºå¶åçèä¸æ¯å½¢æï¼åªè¦æå¾å çå°±è½èªè¡å¼åå·¥å·ï¼å¹¶ä¸ååä¸åã\n\n\n# ç¬¬åç«  æµç¨åæç»´\n\n\n# ç§ç±æç»´çè°¬è¯¯\n\nä¼å¤§çæå°±ä¸æ¯å ä¸ºææç§ç§ç±ï¼èæ¯æ¥æºäºå¯¹æµç¨çææ§åä¼åãä½ éè¦è¯å«æµç¨çç»æãç±»åï¼å¹¶å­¦ä¼å¨æµç¨ä¼åçæ¹æ³ï¼è¿ææ¯å¨çå®ä¸çéæé¿ä¸ºé«æçæ¹æ³ã\n\nç§ç±åæç»´çè°¬è¯¯ï¼ä¼¼ä¹ä»æªè¿ç¦»äººç¾¤ãç§ç±åæç»´çæ¬è´¨ï¼æ¯æå¤æçä¸è¥¿è¿äºç®ååï¼ä¼å¾ç¨ä¸ä¸ªç¸å¯¹ç®åçç§ç±å»ä»£æ¿å¤æçæåè§å¾ã\n\nç§ç±åæç»´çå¯æä¹å¤å¨äºï¼ä»æä¸é¨åæ¯æ­£ç¡®çãæäºæ¶åï¼ä¸äºç¹å®çæ¹æ³ççæ¯å¤ªç®¡ç¨äºï¼ä¸å®æ¶é´åç¡®å®å¯ä»¥"ä¸æé²åéå¤©"ï¼è®©äººç­æ¶é´åæå°æ æ¯çå´å¥---ä½ä»é¿ææ¥çï¼è¿äºå¯¹åä¸æ¹æ³çä¾èµä¼è®©äººä¸åæé¿ã\n\nåæå³ç³»æç¨åï¼æç¨ï¼ççæç¨ï¼æåé«ãä¼è¯´è¯ä¹ä¸æ ·ï¼ç¡®å®æç¨ãæä»¥å½å®¶é¿ãåè¾ãå¯¼å¸ä»¬å®£ç§°è¿äºç§ç±ä¸è½çæ¶åï¼å¾å¤äººççå®¹æç¸ä¿¡ï¼å ä¸ºè½ä¸¾åºå¤ªå¤çä¾å­æ¥è¯æè¿äºä¸è¥¿å¤ä¹æç¨ãä¸ä¸ªåæ¬åªæ¯æä¸å®ä½ç¨çä¸è¥¿ï¼è¢«æ¾å¤§æäºä¸è½çãå¯ä¸çï¼äºæ¯ä½ æå¨é¨çå¸æé½æ¼å¨äºä¸ä¸ªä¸è¥¿ä¸ï¼ç»§èæ¾å¼äºå¯¹å¶ä»äºç©çè§å¯åå­¦ä¹ ï¼æç»æ å¯é¿åçèµ°åå¤±è´¥ï¼è¿å°±æ¯ç§ç±çå±é©ä¹å¤ã\n\nç®åçè¯´ï¼ç§ç±æç»´ä¼äººä¸ºæ¾å¤§æäºæ¹æ³çç¨å¤ï¼å¦æä¸ä¸ªä¸è¥¿åªæä¸åç¨å¤ï¼èä½ å´è¯¯è®¤ä¸ºå®æä¸åã\n\nç§ç±åæç»´ä»£è¡¨äºç®åæå¢ä¸ä¸ªå«æ¹æ³åè¦ç¹å¯¹å¨å±çå³å®æ§å½±åï¼å®å¾å¾ä¸å¤æçç°å®çæ´»ä¸ç¬¦ï¼å°¤å¶ä¸ç»è¿äºèç½æ¹é çç°ä»£å¤æåä¸ç¤¾ä¼ä¸ç¬¦ã\n\n\n# å¨æµç¨ä¼å\n\nå¨æµç¨ä¼åï¼å¨å¹³å¡ä¸­åé å¥è¿¹çæ¹æ³ã\n\nä¸ä»¶å¤æçäºæå¾å¾ç±å¤ä¸ªæµç¨ãæ­¥éª¤ç»æï¼ææ¯ä¸ä¸ªæµç¨ãæ­¥éª¤é½è¿è¡ä¼åï¼åå°(æ¥è¿)æå¥½ï¼å°±å«"å¨æµç¨ä¼å"ã\n\nå¨æµç¨ä¼åå·æå¤å©å±æ§ã å¨è®¡ç®ææ¬æ¶éç¨çæ¯å æ³ï¼èè®¡ç®æææ¶éç¨çæ¯ä¹æ³ãä¹å°±æ¯è¯´ï¼åçå¥½å°±æ¯å¨æµç¨ä¼åï¼å¯¹åºå¤å©ï¼åä¸å¥½å°±æäºå¨æµç¨æèï¼å¯¹åº"å¤äº"ã\n\n * æèï¼\n   1. ä»¥çµååºéºä¸ºä¾ï¼å°è¯åæå¨æµç¨ä¼å\n   2. å ä¸ºå¨æµç¨ä¼åçå¤å©å±æ§ï¼äºèç½ç¸å¯¹ä¼ ç»è¡ä¸æµç¨æ´é¿ï¼å´è¡°åå±æ´å è¿é\n\nç°å¨æä»¬é½ç¥éå¨æµç¨ä¼åéå¸¸éè¦ï¼ä½ææ¶æä»¬æ²¡æé£ä¹å¤èµæºåå¨æµç¨ä¼åï¼åªè½ææ¶ä¼åä¸é¨åæµç¨ï¼é£è¯¥æä¹åï¼è¿æ¶åè¦åå©è¾æ£®è±ªå¨å°ç©éµï¼èæä¸ªæµç¨çéè¦ç¨åº¦å¯ä»¥ä»ï¼æçç¨åº¦ãå½±åå¹¿åº¦ãæ©æ£åº¦è¿ä¸ä¸ªæ¹é¢æ¥è¡¡éã\n\n\n# ç¬¬äºç«  çææç»´\n\nåµå¨çæä¸­çä¸ªä½ï¼å°è¢«çæææ¨å¨ãå½ä½ ç ç©¶ä¸ä¸ªäºç©æ¶ï¼ä¸ä»è¦åæä¸ªä½ï¼æ´è¦è§å¯æ´ä¸ªçæãæ´å¯æä¸­å¤æçè§å¾ã\n\nä¸ªä½ ---\x3e ç¯å¢ ---\x3e çæ ---\x3e ç³»ç»\n\nçææç»´çæ ¸å¿åçï¼\n\n * ç±äºçæä¸­çäºç©æ¯å¹¿æ³å³èçï¼æä»¥ä¸ªä½äºç©çåå±è¶å¿ãç¶æååååç§éæ©å¹¶ä¸æ¯éæºçï¼ä¹ä¸æ¯å®å¨ç¬ç«èªä¸»å³å®çï¼èæ¯åå°æ´ä¸ªçæçå½±åãå æ­¤ï¼æèæä¸ªäºç©çæ¶åï¼ä¸åºå½ä»ä»æèè¿ä¸ªä¸ªä½ï¼è¿åºæèä»æå¤çæ´ä¸ªçæ--ä»å¨å´çç¯å¢ä»¥åä»ä¸ç¯å¢çå³ç³»ã\n\næèï¼æ¸¸æä¸»æ­å¸¦è´§åºæ¯ï¼å¸¦ä»ä¹è´§ï¼\n\n\n# è¡çæ¨¡åIï¼æ·éæ¨¡å\n\næ·éæ¨¡åï¼ç«äºåæ¿çä¹è½èµ¢çæç»´æ¹å¼ã\n\nåä¹ä¸çºªä¸­åæçç¾å½è¥¿é¨æ·éæ¢¦ä¸­ï¼ä½ åºè¯¥å»ï¼ä½ä¸æ¯å»æ·éï¼èæ¯å»åçä»è£¤ã\n\næ·éæ¨¡åçæ¬è´¨æ¯ä¸ä¸ªå±çæ¨¡åãä½ ä¼çå°å¶ä»äººï¼ä¸æ¯åªçå°ç«äºèï¼èæ¯è¦çå°çæä¸­çå±çå¯è½æ§ã\n\næèï¼èé¾åç¤¾ä¼çå°æ¥ï¼æä»ä¹æºä¼ï¼\n\n\n# è¡çæ¨¡åâ¡ï¼æ£®ææ¨¡å\n\nä¸æ¯å¤©æçäººï¼å¦ä½åºå¯¹å¼ºå¤§çå¯¹æ\n\næ£®ææ¨¡åçæ¬è´¨ï¼ æ£®ææ¨¡åçæ¬è´¨ä¸æ¯ä¸ä¸ªçæä½æ¨¡åãçæä½æ¯æç©ç§å¨çæä¸­æå¤çä½ç½®ï¼åæ¬ç©ºé´ãæ¶é´ãé£ç©ç§ç±»ç­å ç´ ãçæä½æç»´çæ ¸å¿åçæ¯ï¼å½ä½ é­éå¼ºèç«äºæ¶ï¼é¤äºä¸å¶æ­»æ¼ä»¥å¤ï¼è¿å¯ä»¥éæ©é¿å¼ä»ç(æ¶é´ãç©ºé´ãé£ç©ç­)ä½ç½®ã\n\næèï¼äºèç½åä¸ï¼å¦æBATä¹æ¥åä½ è¿ä¸ªç±»ä¼¼çäº§åï¼è¯¥æä¹åï¼\n\n\n# è¡çæ¨¡åâ¢ï¼æ± å¡æ¨¡å\n\nå¦ä½çªç ´åå±çç¶é¢\n\nå¨ä¸ä¸ªæ± å¡çæä¸­ï¼æ°´èè¦åè»ç±»äºå¤ºå»æï¼èè£çç©è¦é¿åè¢«å°é±¼åæï¼å°é±¼åè¦èº²é¿å¤§é±¼ï¼å¤§é±¼ä¹é´è¿è¦ç¸äºç«äºé£ç©åç¹æ®ç©ºé´ãå®ä»¬çç«äºæç»é å°±äºæ± å¡ççæºãè¿å°±æ¯æ± å¡æ¨¡åï¼å®çæ¬è´¨æ¯å¹³å°æ¨¡åã\n\nä½ å¾å®¹æçè§£å¹³å°å¬å¸çå¥½å¤ï¼å¼æ·å®åºçæªå¿èµé±ï¼ä½æ·å®å¹³å°æ¬èº«ä¸å®èµé±ãä½ï¼ä¸è¬äººä¹ æ¯äºå¨å«äººçå¹³å°ä¸æ´»å¨ï¼ä½å´æªæèè¿æè®¸å¯ä»¥å¶é ä¸ä¸ªèªå·±çå¹³å°ãä¸ºä»ä¹ï¼ä¸ä¸ªå¾éè¦çåå æ¯ï¼å¹³å°çèµ·æ¥å¤ªå¤§äºã\n\nä½æä»¬è¦æè¯å°ï¼å¹³å°ä¸ä»æ¯ä¸ä¸ªç»æï¼ä¹æ¯ä¸ç§æç»´ï¼å¤ªå¹³æ´åºç¶æ¯ä¸ä¸ªçæï¼å®¶é¨å£çå°æ± å¡ä¹æ¯ä¸ä¸ªçæã\n\nçææç»´åè¯ä½ ï¼ä¸è¦æç®åä»èç¦å¨ä¸ä¸ªäºç©ä¸ï¼èè¦è§å¯æèå®ççæï¼æ¢åæ¬å¨å´çç¯å¢ï¼ä¹åæ¬å®ä¸å¨å´äºç©çå³ç³»ãè¿ä¸æè·¯çæ¹åï¼å¸¸å¸¸è½è®©äººè±ç¶å¼æãå¤§æ¢¦åéã\n\næèï¼æ¸¸æä¸»æ­å¸¦è´§åºæ¯ï¼å½è¶æ¥è¶å¤çä¸»æ­å¸¦è´§æ¶ï¼æä¹åï¼\n\n\n# ç¬¬å­ç«  ç³»ç»æç»´\n\nå¨æ´é«çå±é¢ä¸è§£å³é®é¢\n\nå¨å¤æçæå¢ä¸­ï¼ä¼ ç»çå æå³ç³»è¢«é¢ è¦ï¼å¾®è§å±é¢çéæåå¤±æäºãä½ éè¦ç«å¨æ´é«çå±é¢ä¸ï¼ä»¥æ´å®è§çãç³»ç»çé«åº¦å»çå¾åè§£å³é®é¢ã\n\nç³»ç»æç»´åè¦æ±æä»¬æ¶å¸¸çæåä¸ªé¨åä¹é´çå³ç³»ï¼è®¤ä¸ºç³»ç»å¹¶ä¸ç­äºé¨åä¹åã\n\néæçäºç©çè§£èµ·æ¥æ´å®¹æä¸äºï¼ä½å¨æçç³»ç»ææ¯ä¸çé¢ç¹å±ç°åºçæ ·è²ã\n\nä»æ´å®è§çè§åº¦è§£å³é®é¢ï¼å©ç¨ç³»ç»æç»´ååºå¤§èçåå¸¸çå³å®ã\n\nè¯æ§å¾ªç¯æ¯æä¹æ ·æå»ºåºæ¥çï¼è®¾è®¡ç³»ç»ç»æï¼åä¸åªæ å½¢çå¤§æã\n\né¢ è¦çº¿æ§å æï¼ç³»ç»ç»æå¸¦æ¥åå¸¸è§çæºæ§ã\n\n\n# ç¬¬ä¸ç«  å¤§å¿æç»´\n\nä¸å®å¤§çè¶å¿ç¸æ¯ï¼ä¸ªäººçåéæ¯æ¸ºå°çï¼åªæåå©è¶å¿çåéæè½å¨äººçä¸­ä¹é£ç ´æµªãå¦ä½è¯å«è¶å¿å¹¶ç«å¨è¶å¿ä¹ä¸­ï¼æ¯æ¯ä¸ªæ³è¦æå°±èªå·±çäººæè¦å­¦ä¹ çéè¦è¯¾é¢ã\n\næ¶æ¥å¤©å°çååãçæ­£ä¼å¤§çåéæ¯æ¶ä»£çè¶å¿ã\n\nè¶å¿ï¼æ¯å ä¸ºæç§åå¨è§å¾èå¯¼è´çæªæ¥çå¤§æ¦çæèå¿ç¶èµ°åã\n\næä½è¶å¿çæ¬è´¨ï¼åç°è¶å¿ä¸æ¯ççï¼æ¯ææ¡è§å¾ãå¤§å¿æç»´æ¯å¯¹åç±»å®è§è§å¾çå·ä½è®¤ç¥ã\n\nè¶æ¯å¼ºå¤§ãæ·±å»çè§å¾ï¼å°±è¶è½é å°±å®å¤§çãç¡®å®æ§çè¶å¿ã\n\n 1. é©¬å¤ªæåº\n    * é©¬å¤ªæåºçåå®³ä¹å¤å¨äºï¼å®å¾å¾æ¯å¶ä»è§å¾æ´å å¼ºå¤§ãå½å®åå¶å®è§å¾èµ·å²çªçæ¶åï¼å¾å¾è½å¤è¦çãæ¨ç¿»å¶ä»è§å¾ã\n 2. äººå£åå\n    * äººæ¯ä¸åææä¸ç¤¾ä¼ç»æµæ´»å¨çæ ¹åºãå¦æè¯´ä»ä¹è§å¾è½å¤é å°±å¤§çº§å«çè¶å¿ï¼é£ä¹ä¸äººå£æå³çè§å¾å¿ç¶æ¯æä¸­ä¹ä¸ã\n    * ä¸äººå£æå³çè§å¾ä¹æ¯éå¸¸å¼ºå¤§ç---æ¯å¦äººå£æ°éä¸äººå£ç»æ---å½å®ä¸å¶ä»è§å¾å²çªçæ¶åï¼å¾å¾ä¹è½å¤æ¨ç¿»å¶ä»è§å¾èä¿è¯èªå·±ççå­ã\n    * æèï¼å¯ä»¥æèæ¥æ¬åå°åº¦çåå±è¶å¿ã\n\nå¤§çè¶å¿ï¼å¤§å®¶é½è½å¾å®¹æå¯è§å°ï¼æ¢ç¶å¤§å®¶é½ç¥éè¿ä»¶äºæ, é£æç¥éäºåè½æä¹æ ·å¢ï¼è½æä»ä¹æºä¼å¢ï¼\n\næ¯å¦äºèæ¿ç­ä¼è®©å©´å¹¼å¿ç¨åäº§ä¸å¤èï¼èé¾åè¶å¿åé å°±äºå»çåå»èè¡ä¸çæºä¼ï¼è¿äºç®åçç»è®ºå¾å¤äººé½ç¥éäºãé£ä¹ä½ è½å¤æ ¹æ®è¿ä¸ªè¶å¿å¾åºäºä»ä¹æ°çä¸è¥¿åï¼è¦å¤§å¤æ°äººæ³ä¸å°çæææºä¼ã\n\nè¿ä¸ªé®é¢ä¹æ¯é æå¾å¤äººä¸æ¿æå»å³æ³¨äººå£è¶å¿(ä»¥åå¶ä»è¶å¿)ååçéè¦åå ï¼ä»¥ä¸ºåªè½å¾å°ä¸äºå¤§å®¶é½ç¥éçãæ¾èæè§çç¥è¯ï¼æ²¡å¤ªå¤åºç¨ä»·å¼ãè¿ä¸ªé®é¢ï¼æ¯å¤§å¿æç»´å¨ç°å®çæ´»ä¸­å¾å°åºç¨ççæ­£ç¶é¢ã\n\näººä»¬å¾å®¹æçæä¸äºç®åçè§å¾ï¼ä½ä¸å¤ªå®¹æç»è¿ç²¾ç»çæç»´å å·¥æ¨å¯¼åºç¸å¯¹å¤æçè¡çç»è®ºãé£äºè¢«äººæ°å¹¿æ³ç¥éçç®åè§å¾åç¥è¯æ æ³å¸¦ç»ä½ ç¹æ®çä¼å¿ï¼åªæå°æ°äººéæçéçæè½è®©ä½ å¤ºå¾åæºã\n\nå¦æä½ æ³æèåºä¸è¬äººä¸ç¥éçç»è®ºï¼ä½ å°±éè¦ç¨å°å¤æçæç»´æ¹æ³äºã\n\nä»¥ä¸­å½çäººå£è§å¾ä¸ºä¾ãçå®ä¸­å½çäººå£å¹´é¾ç»æï¼åªè½æ³å°å©´å¿ç¨ååå»èå»çè¿äºè·¯äººçç¥çäºæï¼æ²¡å³ç³»ï¼æä»¬è¯ä¸è¯æå¤ç§æç»´æ¹æ³åäººå£è¶å¿ç»åèµ·æ¥ä½¿ç¨ï¼ççè½ä¸è½å¾å°ä»ä¹éè¦çï¼çæ­£è½æå¯¼ç°å®çæ´»çç»è®ºã\n\n * é©¬å¤ªæåºä¸äººå£è§å¾\n   * å°åéä¼è¶åç¼ºå°æ´»åï¼çè³ä¼äº§ç"èäººå"ã"èäººæ"ï¼ç±æ­¤å¸¦æ¥å°åéçæ¿äº§ä¼å¿«éè´¬å¼...\n * çææç»´ä¸äººå£è§å¾\n   * ä¸­å½çèå¹´äººè¶æ¥è¶å¤ï¼ä½å»èåå»çäº§ä¸çåå¥é¨æ§å¤ªé«ï¼æä»¬è¿æå¶ä»æºä¼åï¼\n   * åçäºä¸è¾å­çå¨èãä¿é©ä»¥åæ¿äº§å¢å¼ç­ï¼è¿äºèå¹´äººä¸ç¼ºé±ï¼é£ä»ä»¬çä¼é²å¨±ä¹æ¯å¦ä¼å¤ååï¼éº»å°ãå¹¿åºèãææ¸¸ï¼ä»¥ææ¸¸ä¸ºä¾ï¼60å²çèäººè¿è½æç²¾åå»ææ¸¸ï¼è70å²çèäººå¯è½æéè¦å»èæ¤çãä¹å°±æ¯è¯´ï¼èå¹´ææ¸¸çè³æ¯å»èæ¤çæ¥çæ´æ©ã\n * æ·éæ¨¡å\n   * å»èåå»çäº§ä¸çåå¥é¨æ§å¤ªé«ï¼ä½æä»¬å¯ä»¥ä»å¨è¾¹å¥æï¼å»èæ¤çåæ¬åºå°å»ºè®¾ãè®¾å¤è´­ä¹°ãæ¤çäººåæèå¹è®­ç­å¤ä¸ªé¨åãæ®éäººç©çæ¿åºå åä¸ä¸äº¿çèµéå¥åºï¼ä½å¯ä»¥ä»ä¸­æéä¸äºèµéæå¥è¾ä½çç¯èå¥æï¼å¦ï¼æ¤çäººåæèï¼å¯ä»¥éè¿å³å¡ä¸­ä»ãä»£çæèãä¸­ä½ç«¯çå¤´ç­å½¢å¼ãå¦æä½ å»åä¸ä¸ªæ¤çè¡ä¸çä¸ä¸æ§æèç½ç«æå³å¡å¬å¸ï¼ä½ å°±æäºå»èäº§ä¸å¤§å¬å¸çå¥½å¸®æï¼ä¸ä»ä»¬å±çã\n * é»è¾æç»´é¾ä¸äººå£è§å¾\n   * äºèæ¿ç­æ¾å¼åï¼è¿æ¥äºä¸æ¹æ°çå¿ãæä»¬è¯çéè¿5Whyã5Soæ³ç»¼åä½¿ç¨ï¼ççè½åç°å©´å¹¼å¿ç¨åå¸åºçåªäºæ°ç¹æ§ã\n   * ä¼åç°ï¼ç®åçæ°çå¿æå¾å¤æ¯æçè²æ³æ³çå¦å¥³çå­éæ¶åï¼è¿äºäººçè´¢å¯æ¯ä»¥åä¼æ´å¤ï¼æè²è§å¿µä¹ä¼æ´å¼º...\n   * å°±æ¯è¯´ï¼å©´å¹¼å¿çå¢éæ¯å¦ç¨³å®å°ä¸ç¡®å®ï¼éè¦æç»­å³æ³¨ï¼ä¸­é«ç«¯äº§åæ´åæ¬¢è¿ï¼ç§å­¦æå»ç¸å³è¡ä¸ä¼æå¾å¥½çåå±æºä¼ã\n\næèï¼å½ä¸AIçå¤§å¿æé¢èæ¥æ¶ï¼ä½ è½åç°ä»ä¹æºä¼å¢ï¼\n\n\n# ç¬¬å«ç«  åµæ³æç»´\n\näººçå¦æä»ï¼æä»è¦æåµæ³ãåµæ³æç»´è®²è¿°çæ¯è¿æ ·ä¸äºæç»´æ¨¡å¼ï¼å¦ä½è§é¿é£é©ï¼æææºä¼ï¼ææ¡ä¸»å¨æï¼ä»¥ç¡®ä¿å¨æ¼«é¿çäººçä¸­è·å¾æ»ä½ä¸æä¼çåå±ã\n\nä¸æ¬¡æ¬¡å¤§å¤§å°å°çæææ±èæäºè¿ä¸åºçå½çæäºãåµæ³æç»´ï¼é¦æ¨ãå­å­åµæ³ãã\n\nç»å¤§å¤æ°åµä¹¦é½æ¯è®²æäºçå·ä½ææ¯ï¼èãå­å­åµæ³ãåæ¯è®²æäºä¹"é"ãæä»¬å½è¿çæäºä¸æ¯æªæåé¨ï¼èæ¯å­¦ä¸ãäººèãæ±èãåä¸ç­ãè¿äºæäºéè¦çæ¯éï¼èéæ¯ãå³æä»¬ä¸ç¨æåæªè¿éæä¼ï¼èè¦å°æ·±å»çæºæ§åºç¨äºçæ´»ï¼è®¾è®¡èªå·±çäººçèè´æã\n\n * èåµåèèåæ±æï¼è´¥åµåç«èåæ±è\n   * ä½å¨æäºé¢åï¼å¦æèµãåä¸ç­ï¼è¦ç¡®å®å¿èæ¯ä¸å¯è½çãè¿æ¶åï¼æä»¬å¯ä»¥èèåå© å¯éå¬å¼\n * åæèï¼è´äººèä¸è´äºäºº\n   * è´äººèä¸è´äºäººï¼ç®åçè¯´å°±æ¯è¦ä¸»å¨ä¸è¦è¢«å¨\n * èå¯ç¥ï¼èä¸å¯ä¸ºä¹\n   * æºä¼æªå°æ¶ï¼ç§¯æåå¤åä¿è¯èªå·±çä¸è´¥ï¼ä½ä¸å¯å¦å¨ï¼æ¶æºå°æ¥æ¶ï¼è¦åç¡®è¯å«å¹¶æä½å®\n     * æèµçæå¥åä¹ï¼æé¾çä¸æ¯äº¤æï¼èæ¯ä¸äº¤æ\n\n\n# ç¬¬ä¹ç«  æ¢å³æ¯å¿«\n\nå¨è¿ä¸ªé¼å¹å°å¹´å¾å¿çæ¶ä»£éï¼å¯¹äºåºèº«å¹³å¡ãç¼ºä¹èµæºãæ²¡æèæ¯çäººæ¥è¯´ï¼ä¸æ³¨åå¥½ä¸ä»¶äºææ¯å¤§æ¦çççå­ç¥éãæ¢å³æ¯å¿«ï¼è¿æ¯ææ¯ï¼ä¹æ¯å¿æ³ã\n\n\n# ä¸ºä»ä¹éè¦ä¸æ³¨\n\næå¥åäº§åºï¼ä»æ¥é½ä¸æ¯ææ­£æ¯çãæä»¬è¦æè¯å°ï¼å¤§é¨åçæå¥é½æ¯ä¸è½äº§çç´æ¥ä»·å¼çã\n\n\n\nå¯ä»¥çå°ï¼å½ä½ æåæå¥ä¸äºèµæºçæ¶åï¼ä½ çè½åæ°´å¹³å¹¶æ²¡æå¾å°é£éæåï¼æ´æ æ³å æ­¤è·å¾æ¶å¥ãå³ä¾¿åæå¥ä¸ç¹èµæºè¿å¥å¿«éæååºé´ï¼è·å¾äºä¸å®çè½åæé¿åï¼å¶æ¶å¥æ°´å¹³ä¹éå¸¸ä¸è¬ãåªæå½æå¥äºå¤§éèµæºè¿å¥é«åæä»¥åï¼æ¶å¥æ°´å¹³æè½è¿æ¥çæ­£çå¤§å¹å¢é¿ã\n\nå¯¹äºé£äºæºåãç¥è¯ç§¯ç´¯ãææ¯æ°´å¹³ãäººèãèµéç­èµæºæ¬å°±ä¸åºä¼çäººæ¥è¯´ï¼å¦æä»ä»¬ææéçèµæºåæ£å°ä¸åçé¢åï¼é£ä¹æ¯ä¸ä¸ªé¢åé½ä¼åçå¨ä½éå¯å¨åºé´ï¼ä»å°æ°¸è¿é¢ä¸´è¾ä½æ¶å¥ï¼ä»¥åéä¹èæ¥çåç§ç¦æ¼ãæä»¥ï¼æ®éäººæå¥½çç­ç¥å°±æ¯ä¸æ³¨ï¼æææçåééä¸­å°ä¸ç¹ï¼å¨ä¸ä¸ªé¢åå²è¿è½åçé«ååºåï¼å¹¶å¾å°éé±ä¸çèªç±ãè¿æ¯ä¸æ¡å¯¹äºæ®éäººæ¥è¯´é£é©æä½ãæåçæé«çéè·¯ã\n\næ»ä¹ï¼å¯¹äºèµè´¨ãèæ¯é½å¾æ®éçäººæ¥è¯´ï¼ä¸æ³¨åªåæ¯æä½³ç­ç¥ãç¸åºå°ï¼å½ä½ çèµæºè¶ä¸°åãå¤©èµè¶é«æ¶ï¼ä½ è¿è¡èµæºæ´åãè·¨çåå±ãå¤ååç»è¥çç©ºé´ä¹å°±è¶å¤§ï¼æåçä¹å°±è¶é«---ä½ä¾ç¶ä¸å¯é«ä¼°ã\n\n\n# ä¸ºä»ä¹ä¸æ³¨å¾é¾åå°\n\nå¶ä¸­æä¸¤ä¸ªé®é¢ææå±æ§ï¼\n\n 1. å¦æèªå·±å¾å°½å¨åæå¥çå¤§æ¹åå°±æ¯éçæä¹åï¼\n    * éè¦åå©æ·±åº¦æç»´æ ¼å±ç¯æ¥å¸®å©ç¡®å®æ­£ç¡®æ¹å\n 2. å éæé¿æ«æçææ¯é¾åº¦\n    * éè¦åå©æ·±åº¦æç»´ææ¯ç¯æ¥å¸®å©çªç ´ææ¯é¾åº¦\n\n\n# ç²¾ç¥å¾è¾\n\nå¨è¿ä¸ªé¼å¹å°å¹´å¾å¿çæ¶ä»£ï¼ææ´åç±å¤§å¨ææã\n\nç²¾ç¥å¾è¾ --- å¤§æ°ææå¸é©¬æ¿ã\n\nå¹³åæ¥è®²ï¼äººçä¸çæ¯ä¸å¹´å°±ä¼æä¸æ¬¡æºä¼ã3å¹´è¿ä¸ªæ°æ®æ¯ç»è¿ç¤¾ä¼æ£éªçï¼å¦å·¥ä½2-3å¹´åï¼åçº§ç®¡çèä½æ¯ä¸æ¬¡æºä¼ï¼å·¥ä½3-4å¹´åï¼ä¸­çº§ç®¡çèä½æ¯ä¸æ¬¡æºä¼...\n\n\n\næ ¹æ®æ¦çå¬å¼ï¼æä»¬å¯ä»¥ç¥éï¼è¶å°åé¢ï¼æåçæ¦çè¶å¤§ãæ²¡æèµæºï¼ä¸æ¯å¤©æï¼ä½ çå½è¿æå¤§çèç®å¶å®å°±æ¯æ¦çåæ¶é´ã\n\nå¦æè¯´åªååæ¹æ³å¼å¯äºæå°±çå¯è½ï¼ä¸æ³¨è®©è¿ä¸ªå¯è½æäºä¸å®çæé«ï¼é£ä¹æ¼«é¿ççå½åæ¶é´åå°è¿ä¸ªæ¦çæé«å°äºå¯ä»¥æ¥åçç¨åº¦ï¼è®©ä½ ç¬¬ä¸æ¬¡æäºå¯¹æå½è¿çä¸»å¨æã',normalizedContent:'# æ·±åº¦æç»´\n\nç¹ç¹ï¼\n\n 1. è¾é¿çæç»´é»è¾é¾\n 2. çªç ´èªæä¸ºä¸­å¿çå±éæ§ï¼çµæ´»åæ¢çé®é¢çè§è§\n 3. å¨ç¹æçä¿¡æ¯æµä¸­ä¿ææç»´è½å\n 4. ä»¥å®è§è§è§åæé®é¢ï¼è®¤ç¥äºç©æå¤ççæç¹æ§ãäºç©é¿æè¶å¿ç­\n\nè®­ç»ï¼\n\n 1. æ·±åº¦æç»´çå­¦ä¹ è¦åç¥è¯ç¹ä¸æ ·ææç¡®çãå¯æä½çåå®¹ï¼ä¸è½ä»ä»åçå¨æç§çå¿µçåºç¡ä¸ã\n\nææ¯å¤§å¸ï¼(ä¸»è¦ç¨äºå¤çæ¥å¸¸å·¥ä½çå·ä½äºç©ï¼å°±åä¸ä¸ªä¸ªå°å·¥å·ï¼è½è®©ä½ é«æçè§£å³é®é¢)\n\n 1. æç»´é»è¾é¾\n 2. æ¢ä½æç»´\n 3. å¯è§åæç»´\n 4. æµç¨æç»´\n\næç»´çæ ¼å±ï¼(è½è®©ä½ ç«å¨æ´é«ãæ´å¹¿çè§è§çå¾é®é¢ï¼ä»¥æ´æ·±å»æ´å·§å¦çæ¹å¼è§£å³é®é¢) 5. çææç»´ 6. ç³»ç»æç»´ 7. å¤§å¿æç»´ 8. åµæ³æç»´ 9. æ¢å³æ¯å¿«\n\nãæ·±åº¦æç»´ãä¸ä¹¦æ æ³æ¦æ¬æ·±åº¦æç»´çå¨é¨(å®éä¸ä»»ä½äººé½æ æ³ç©·å°½ææçæç»´æ¹æ³)ï¼æå¾å¤æç»´æ¹æ³å¹¶æ²¡æè¢«çº³å¥å°æ¬ä¹¦ä¸­æ¥ã\n\n\n# ç¬¬ä¸ç«  æç»´é»è¾é¾\n\n\n\n * 5why\n   * è¯çèªä¸°ç°æ±½è½¦\n * 5so\n   * ãæ·±åº¦æç»´ãä½èå¼å\n\né»è¾é¾æ¡æ¦çä¼ å¯¼\n\n\n# ç¬¬äºç«  æ¢ä½æç»´\n\nå¦æä¸æå«äººæ¯æä¹æ³çï¼ä½ çåªåæè®¸ä¼ç½è´¹ãä½ éè¦å»ºç«å±åè®¤ç¥ã åæèªæä¸­å¿ï¼æè½èªå¦åæ¢è§è§è¿è¡æ¢ä½æç»´ï¼å°æ·±åº¦æç»´çåæåæ¥å°æ è´ã\n\næ¢ä½æç»´ï¼ç®åçè¯´å°±æ¯ï¼å¦æææ¯ä»ï¼ä¼æä¹æ³ãä½ï¼è¿æä¸ªå³é®æ¡ä»¶ï¼å¾åå«äººæå±åçè®¤ç¥ç³»ç»ã\n\n * å­é¡¶æèå¸½ (ç±å¾·åÂ·å¾·Â·æ³¢è¯º)\n   * å¨å±åæãå®¢è§äºå®ãææ§ç´è§ãä¹è§æèãä¿å®è¡äºãåæ°æç»´ã\n\n\n# ç¬¬ä¸ç«  å¯è§åæç»´\n\nç©éµåææ³\n\n * è¾æ£®è±ªå¨å°ç©éµ\n * å®ç´¢å¤«ç©éµ\n * åé èªå·±çç©éµç±»æç»´å·¥å·\n\nå·¥ä½ä»ªè¡¨ç\n\n * ä¸ºäºè®©è¿äºéè¦äºé¡¹è½å¤ç»å¸¸åºç°å¨æä»¬ç å·¥ä½è®°å¿éï¼æä»¬éè¦ä¸ä¸ªå¤é¨çæéââè¿å°±æ¯ä»ªè¡¨ççè¿ä½æ¹å¼ã\n\næ»çæ¥è¯´ï¼å¯è§åæç»´çæ ¸å¿å¨äºå¶åçèä¸æ¯å½¢æï¼åªè¦æå¾å çå°±è½èªè¡å¼åå·¥å·ï¼å¹¶ä¸ååä¸åã\n\n\n# ç¬¬åç«  æµç¨åæç»´\n\n\n# ç§ç±æç»´çè°¬è¯¯\n\nä¼å¤§çæå°±ä¸æ¯å ä¸ºææç§ç§ç±ï¼èæ¯æ¥æºäºå¯¹æµç¨çææ§åä¼åãä½ éè¦è¯å«æµç¨çç»æãç±»åï¼å¹¶å­¦ä¼å¨æµç¨ä¼åçæ¹æ³ï¼è¿ææ¯å¨çå®ä¸çéæé¿ä¸ºé«æçæ¹æ³ã\n\nç§ç±åæç»´çè°¬è¯¯ï¼ä¼¼ä¹ä»æªè¿ç¦»äººç¾¤ãç§ç±åæç»´çæ¬è´¨ï¼æ¯æå¤æçä¸è¥¿è¿äºç®ååï¼ä¼å¾ç¨ä¸ä¸ªç¸å¯¹ç®åçç§ç±å»ä»£æ¿å¤æçæåè§å¾ã\n\nç§ç±åæç»´çå¯æä¹å¤å¨äºï¼ä»æä¸é¨åæ¯æ­£ç¡®çãæäºæ¶åï¼ä¸äºç¹å®çæ¹æ³ççæ¯å¤ªç®¡ç¨äºï¼ä¸å®æ¶é´åç¡®å®å¯ä»¥"ä¸æé²åéå¤©"ï¼è®©äººç­æ¶é´åæå°æ æ¯çå´å¥---ä½ä»é¿ææ¥çï¼è¿äºå¯¹åä¸æ¹æ³çä¾èµä¼è®©äººä¸åæé¿ã\n\nåæå³ç³»æç¨åï¼æç¨ï¼ççæç¨ï¼æåé«ãä¼è¯´è¯ä¹ä¸æ ·ï¼ç¡®å®æç¨ãæä»¥å½å®¶é¿ãåè¾ãå¯¼å¸ä»¬å®£ç§°è¿äºç§ç±ä¸è½çæ¶åï¼å¾å¤äººççå®¹æç¸ä¿¡ï¼å ä¸ºè½ä¸¾åºå¤ªå¤çä¾å­æ¥è¯æè¿äºä¸è¥¿å¤ä¹æç¨ãä¸ä¸ªåæ¬åªæ¯æä¸å®ä½ç¨çä¸è¥¿ï¼è¢«æ¾å¤§æäºä¸è½çãå¯ä¸çï¼äºæ¯ä½ æå¨é¨çå¸æé½æ¼å¨äºä¸ä¸ªä¸è¥¿ä¸ï¼ç»§èæ¾å¼äºå¯¹å¶ä»äºç©çè§å¯åå­¦ä¹ ï¼æç»æ å¯é¿åçèµ°åå¤±è´¥ï¼è¿å°±æ¯ç§ç±çå±é©ä¹å¤ã\n\nç®åçè¯´ï¼ç§ç±æç»´ä¼äººä¸ºæ¾å¤§æäºæ¹æ³çç¨å¤ï¼å¦æä¸ä¸ªä¸è¥¿åªæä¸åç¨å¤ï¼èä½ å´è¯¯è®¤ä¸ºå®æä¸åã\n\nç§ç±åæç»´ä»£è¡¨äºç®åæå¢ä¸ä¸ªå«æ¹æ³åè¦ç¹å¯¹å¨å±çå³å®æ§å½±åï¼å®å¾å¾ä¸å¤æçç°å®çæ´»ä¸ç¬¦ï¼å°¤å¶ä¸ç»è¿äºèç½æ¹é çç°ä»£å¤æåä¸ç¤¾ä¼ä¸ç¬¦ã\n\n\n# å¨æµç¨ä¼å\n\nå¨æµç¨ä¼åï¼å¨å¹³å¡ä¸­åé å¥è¿¹çæ¹æ³ã\n\nä¸ä»¶å¤æçäºæå¾å¾ç±å¤ä¸ªæµç¨ãæ­¥éª¤ç»æï¼ææ¯ä¸ä¸ªæµç¨ãæ­¥éª¤é½è¿è¡ä¼åï¼åå°(æ¥è¿)æå¥½ï¼å°±å«"å¨æµç¨ä¼å"ã\n\nå¨æµç¨ä¼åå·æå¤å©å±æ§ã å¨è®¡ç®ææ¬æ¶éç¨çæ¯å æ³ï¼èè®¡ç®æææ¶éç¨çæ¯ä¹æ³ãä¹å°±æ¯è¯´ï¼åçå¥½å°±æ¯å¨æµç¨ä¼åï¼å¯¹åºå¤å©ï¼åä¸å¥½å°±æäºå¨æµç¨æèï¼å¯¹åº"å¤äº"ã\n\n * æèï¼\n   1. ä»¥çµååºéºä¸ºä¾ï¼å°è¯åæå¨æµç¨ä¼å\n   2. å ä¸ºå¨æµç¨ä¼åçå¤å©å±æ§ï¼äºèç½ç¸å¯¹ä¼ ç»è¡ä¸æµç¨æ´é¿ï¼å´è¡°åå±æ´å è¿é\n\nç°å¨æä»¬é½ç¥éå¨æµç¨ä¼åéå¸¸éè¦ï¼ä½ææ¶æä»¬æ²¡æé£ä¹å¤èµæºåå¨æµç¨ä¼åï¼åªè½ææ¶ä¼åä¸é¨åæµç¨ï¼é£è¯¥æä¹åï¼è¿æ¶åè¦åå©è¾æ£®è±ªå¨å°ç©éµï¼èæä¸ªæµç¨çéè¦ç¨åº¦å¯ä»¥ä»ï¼æçç¨åº¦ãå½±åå¹¿åº¦ãæ©æ£åº¦è¿ä¸ä¸ªæ¹é¢æ¥è¡¡éã\n\n\n# ç¬¬äºç«  çææç»´\n\nåµå¨çæä¸­çä¸ªä½ï¼å°è¢«çæææ¨å¨ãå½ä½ ç ç©¶ä¸ä¸ªäºç©æ¶ï¼ä¸ä»è¦åæä¸ªä½ï¼æ´è¦è§å¯æ´ä¸ªçæãæ´å¯æä¸­å¤æçè§å¾ã\n\nä¸ªä½ ---\x3e ç¯å¢ ---\x3e çæ ---\x3e ç³»ç»\n\nçææç»´çæ ¸å¿åçï¼\n\n * ç±äºçæä¸­çäºç©æ¯å¹¿æ³å³èçï¼æä»¥ä¸ªä½äºç©çåå±è¶å¿ãç¶æååååç§éæ©å¹¶ä¸æ¯éæºçï¼ä¹ä¸æ¯å®å¨ç¬ç«èªä¸»å³å®çï¼èæ¯åå°æ´ä¸ªçæçå½±åãå æ­¤ï¼æèæä¸ªäºç©çæ¶åï¼ä¸åºå½ä»ä»æèè¿ä¸ªä¸ªä½ï¼è¿åºæèä»æå¤çæ´ä¸ªçæ--ä»å¨å´çç¯å¢ä»¥åä»ä¸ç¯å¢çå³ç³»ã\n\næèï¼æ¸¸æä¸»æ­å¸¦è´§åºæ¯ï¼å¸¦ä»ä¹è´§ï¼\n\n\n# è¡çæ¨¡åiï¼æ·éæ¨¡å\n\næ·éæ¨¡åï¼ç«äºåæ¿çä¹è½èµ¢çæç»´æ¹å¼ã\n\nåä¹ä¸çºªä¸­åæçç¾å½è¥¿é¨æ·éæ¢¦ä¸­ï¼ä½ åºè¯¥å»ï¼ä½ä¸æ¯å»æ·éï¼èæ¯å»åçä»è£¤ã\n\næ·éæ¨¡åçæ¬è´¨æ¯ä¸ä¸ªå±çæ¨¡åãä½ ä¼çå°å¶ä»äººï¼ä¸æ¯åªçå°ç«äºèï¼èæ¯è¦çå°çæä¸­çå±çå¯è½æ§ã\n\næèï¼èé¾åç¤¾ä¼çå°æ¥ï¼æä»ä¹æºä¼ï¼\n\n\n# è¡çæ¨¡åâ±ï¼æ£®ææ¨¡å\n\nä¸æ¯å¤©æçäººï¼å¦ä½åºå¯¹å¼ºå¤§çå¯¹æ\n\næ£®ææ¨¡åçæ¬è´¨ï¼ æ£®ææ¨¡åçæ¬è´¨ä¸æ¯ä¸ä¸ªçæä½æ¨¡åãçæä½æ¯æç©ç§å¨çæä¸­æå¤çä½ç½®ï¼åæ¬ç©ºé´ãæ¶é´ãé£ç©ç§ç±»ç­å ç´ ãçæä½æç»´çæ ¸å¿åçæ¯ï¼å½ä½ é­éå¼ºèç«äºæ¶ï¼é¤äºä¸å¶æ­»æ¼ä»¥å¤ï¼è¿å¯ä»¥éæ©é¿å¼ä»ç(æ¶é´ãç©ºé´ãé£ç©ç­)ä½ç½®ã\n\næèï¼äºèç½åä¸ï¼å¦æbatä¹æ¥åä½ è¿ä¸ªç±»ä¼¼çäº§åï¼è¯¥æä¹åï¼\n\n\n# è¡çæ¨¡åâ²ï¼æ± å¡æ¨¡å\n\nå¦ä½çªç ´åå±çç¶é¢\n\nå¨ä¸ä¸ªæ± å¡çæä¸­ï¼æ°´èè¦åè»ç±»äºå¤ºå»æï¼èè£çç©è¦é¿åè¢«å°é±¼åæï¼å°é±¼åè¦èº²é¿å¤§é±¼ï¼å¤§é±¼ä¹é´è¿è¦ç¸äºç«äºé£ç©åç¹æ®ç©ºé´ãå®ä»¬çç«äºæç»é å°±äºæ± å¡ççæºãè¿å°±æ¯æ± å¡æ¨¡åï¼å®çæ¬è´¨æ¯å¹³å°æ¨¡åã\n\nä½ å¾å®¹æçè§£å¹³å°å¬å¸çå¥½å¤ï¼å¼æ·å®åºçæªå¿èµé±ï¼ä½æ·å®å¹³å°æ¬èº«ä¸å®èµé±ãä½ï¼ä¸è¬äººä¹ æ¯äºå¨å«äººçå¹³å°ä¸æ´»å¨ï¼ä½å´æªæèè¿æè®¸å¯ä»¥å¶é ä¸ä¸ªèªå·±çå¹³å°ãä¸ºä»ä¹ï¼ä¸ä¸ªå¾éè¦çåå æ¯ï¼å¹³å°çèµ·æ¥å¤ªå¤§äºã\n\nä½æä»¬è¦æè¯å°ï¼å¹³å°ä¸ä»æ¯ä¸ä¸ªç»æï¼ä¹æ¯ä¸ç§æç»´ï¼å¤ªå¹³æ´åºç¶æ¯ä¸ä¸ªçæï¼å®¶é¨å£çå°æ± å¡ä¹æ¯ä¸ä¸ªçæã\n\nçææç»´åè¯ä½ ï¼ä¸è¦æç®åä»èç¦å¨ä¸ä¸ªäºç©ä¸ï¼èè¦è§å¯æèå®ççæï¼æ¢åæ¬å¨å´çç¯å¢ï¼ä¹åæ¬å®ä¸å¨å´äºç©çå³ç³»ãè¿ä¸æè·¯çæ¹åï¼å¸¸å¸¸è½è®©äººè±ç¶å¼æãå¤§æ¢¦åéã\n\næèï¼æ¸¸æä¸»æ­å¸¦è´§åºæ¯ï¼å½è¶æ¥è¶å¤çä¸»æ­å¸¦è´§æ¶ï¼æä¹åï¼\n\n\n# ç¬¬å­ç«  ç³»ç»æç»´\n\nå¨æ´é«çå±é¢ä¸è§£å³é®é¢\n\nå¨å¤æçæå¢ä¸­ï¼ä¼ ç»çå æå³ç³»è¢«é¢ è¦ï¼å¾®è§å±é¢çéæåå¤±æäºãä½ éè¦ç«å¨æ´é«çå±é¢ä¸ï¼ä»¥æ´å®è§çãç³»ç»çé«åº¦å»çå¾åè§£å³é®é¢ã\n\nç³»ç»æç»´åè¦æ±æä»¬æ¶å¸¸çæåä¸ªé¨åä¹é´çå³ç³»ï¼è®¤ä¸ºç³»ç»å¹¶ä¸ç­äºé¨åä¹åã\n\néæçäºç©çè§£èµ·æ¥æ´å®¹æä¸äºï¼ä½å¨æçç³»ç»ææ¯ä¸çé¢ç¹å±ç°åºçæ ·è²ã\n\nä»æ´å®è§çè§åº¦è§£å³é®é¢ï¼å©ç¨ç³»ç»æç»´ååºå¤§èçåå¸¸çå³å®ã\n\nè¯æ§å¾ªç¯æ¯æä¹æ ·æå»ºåºæ¥çï¼è®¾è®¡ç³»ç»ç»æï¼åä¸åªæ å½¢çå¤§æã\n\né¢ è¦çº¿æ§å æï¼ç³»ç»ç»æå¸¦æ¥åå¸¸è§çæºæ§ã\n\n\n# ç¬¬ä¸ç«  å¤§å¿æç»´\n\nä¸å®å¤§çè¶å¿ç¸æ¯ï¼ä¸ªäººçåéæ¯æ¸ºå°çï¼åªæåå©è¶å¿çåéæè½å¨äººçä¸­ä¹é£ç ´æµªãå¦ä½è¯å«è¶å¿å¹¶ç«å¨è¶å¿ä¹ä¸­ï¼æ¯æ¯ä¸ªæ³è¦æå°±èªå·±çäººæè¦å­¦ä¹ çéè¦è¯¾é¢ã\n\næ¶æ¥å¤©å°çååãçæ­£ä¼å¤§çåéæ¯æ¶ä»£çè¶å¿ã\n\nè¶å¿ï¼æ¯å ä¸ºæç§åå¨è§å¾èå¯¼è´çæªæ¥çå¤§æ¦çæèå¿ç¶èµ°åã\n\næä½è¶å¿çæ¬è´¨ï¼åç°è¶å¿ä¸æ¯ççï¼æ¯ææ¡è§å¾ãå¤§å¿æç»´æ¯å¯¹åç±»å®è§è§å¾çå·ä½è®¤ç¥ã\n\nè¶æ¯å¼ºå¤§ãæ·±å»çè§å¾ï¼å°±è¶è½é å°±å®å¤§çãç¡®å®æ§çè¶å¿ã\n\n 1. é©¬å¤ªæåº\n    * é©¬å¤ªæåºçåå®³ä¹å¤å¨äºï¼å®å¾å¾æ¯å¶ä»è§å¾æ´å å¼ºå¤§ãå½å®åå¶å®è§å¾èµ·å²çªçæ¶åï¼å¾å¾è½å¤è¦çãæ¨ç¿»å¶ä»è§å¾ã\n 2. äººå£åå\n    * äººæ¯ä¸åææä¸ç¤¾ä¼ç»æµæ´»å¨çæ ¹åºãå¦æè¯´ä»ä¹è§å¾è½å¤é å°±å¤§çº§å«çè¶å¿ï¼é£ä¹ä¸äººå£æå³çè§å¾å¿ç¶æ¯æä¸­ä¹ä¸ã\n    * ä¸äººå£æå³çè§å¾ä¹æ¯éå¸¸å¼ºå¤§ç---æ¯å¦äººå£æ°éä¸äººå£ç»æ---å½å®ä¸å¶ä»è§å¾å²çªçæ¶åï¼å¾å¾ä¹è½å¤æ¨ç¿»å¶ä»è§å¾èä¿è¯èªå·±ççå­ã\n    * æèï¼å¯ä»¥æèæ¥æ¬åå°åº¦çåå±è¶å¿ã\n\nå¤§çè¶å¿ï¼å¤§å®¶é½è½å¾å®¹æå¯è§å°ï¼æ¢ç¶å¤§å®¶é½ç¥éè¿ä»¶äºæ, é£æç¥éäºåè½æä¹æ ·å¢ï¼è½æä»ä¹æºä¼å¢ï¼\n\næ¯å¦äºèæ¿ç­ä¼è®©å©´å¹¼å¿ç¨åäº§ä¸å¤èï¼èé¾åè¶å¿åé å°±äºå»çåå»èè¡ä¸çæºä¼ï¼è¿äºç®åçç»è®ºå¾å¤äººé½ç¥éäºãé£ä¹ä½ è½å¤æ ¹æ®è¿ä¸ªè¶å¿å¾åºäºä»ä¹æ°çä¸è¥¿åï¼è¦å¤§å¤æ°äººæ³ä¸å°çæææºä¼ã\n\nè¿ä¸ªé®é¢ä¹æ¯é æå¾å¤äººä¸æ¿æå»å³æ³¨äººå£è¶å¿(ä»¥åå¶ä»è¶å¿)ååçéè¦åå ï¼ä»¥ä¸ºåªè½å¾å°ä¸äºå¤§å®¶é½ç¥éçãæ¾èæè§çç¥è¯ï¼æ²¡å¤ªå¤åºç¨ä»·å¼ãè¿ä¸ªé®é¢ï¼æ¯å¤§å¿æç»´å¨ç°å®çæ´»ä¸­å¾å°åºç¨ççæ­£ç¶é¢ã\n\näººä»¬å¾å®¹æçæä¸äºç®åçè§å¾ï¼ä½ä¸å¤ªå®¹æç»è¿ç²¾ç»çæç»´å å·¥æ¨å¯¼åºç¸å¯¹å¤æçè¡çç»è®ºãé£äºè¢«äººæ°å¹¿æ³ç¥éçç®åè§å¾åç¥è¯æ æ³å¸¦ç»ä½ ç¹æ®çä¼å¿ï¼åªæå°æ°äººéæçéçæè½è®©ä½ å¤ºå¾åæºã\n\nå¦æä½ æ³æèåºä¸è¬äººä¸ç¥éçç»è®ºï¼ä½ å°±éè¦ç¨å°å¤æçæç»´æ¹æ³äºã\n\nä»¥ä¸­å½çäººå£è§å¾ä¸ºä¾ãçå®ä¸­å½çäººå£å¹´é¾ç»æï¼åªè½æ³å°å©´å¿ç¨ååå»èå»çè¿äºè·¯äººçç¥çäºæï¼æ²¡å³ç³»ï¼æä»¬è¯ä¸è¯æå¤ç§æç»´æ¹æ³åäººå£è¶å¿ç»åèµ·æ¥ä½¿ç¨ï¼ççè½ä¸è½å¾å°ä»ä¹éè¦çï¼çæ­£è½æå¯¼ç°å®çæ´»çç»è®ºã\n\n * é©¬å¤ªæåºä¸äººå£è§å¾\n   * å°åéä¼è¶åç¼ºå°æ´»åï¼çè³ä¼äº§ç"èäººå"ã"èäººæ"ï¼ç±æ­¤å¸¦æ¥å°åéçæ¿äº§ä¼å¿«éè´¬å¼...\n * çææç»´ä¸äººå£è§å¾\n   * ä¸­å½çèå¹´äººè¶æ¥è¶å¤ï¼ä½å»èåå»çäº§ä¸çåå¥é¨æ§å¤ªé«ï¼æä»¬è¿æå¶ä»æºä¼åï¼\n   * åçäºä¸è¾å­çå¨èãä¿é©ä»¥åæ¿äº§å¢å¼ç­ï¼è¿äºèå¹´äººä¸ç¼ºé±ï¼é£ä»ä»¬çä¼é²å¨±ä¹æ¯å¦ä¼å¤ååï¼éº»å°ãå¹¿åºèãææ¸¸ï¼ä»¥ææ¸¸ä¸ºä¾ï¼60å²çèäººè¿è½æç²¾åå»ææ¸¸ï¼è70å²çèäººå¯è½æéè¦å»èæ¤çãä¹å°±æ¯è¯´ï¼èå¹´ææ¸¸çè³æ¯å»èæ¤çæ¥çæ´æ©ã\n * æ·éæ¨¡å\n   * å»èåå»çäº§ä¸çåå¥é¨æ§å¤ªé«ï¼ä½æä»¬å¯ä»¥ä»å¨è¾¹å¥æï¼å»èæ¤çåæ¬åºå°å»ºè®¾ãè®¾å¤è´­ä¹°ãæ¤çäººåæèå¹è®­ç­å¤ä¸ªé¨åãæ®éäººç©çæ¿åºå åä¸ä¸äº¿çèµéå¥åºï¼ä½å¯ä»¥ä»ä¸­æéä¸äºèµéæå¥è¾ä½çç¯èå¥æï¼å¦ï¼æ¤çäººåæèï¼å¯ä»¥éè¿å³å¡ä¸­ä»ãä»£çæèãä¸­ä½ç«¯çå¤´ç­å½¢å¼ãå¦æä½ å»åä¸ä¸ªæ¤çè¡ä¸çä¸ä¸æ§æèç½ç«æå³å¡å¬å¸ï¼ä½ å°±æäºå»èäº§ä¸å¤§å¬å¸çå¥½å¸®æï¼ä¸ä»ä»¬å±çã\n * é»è¾æç»´é¾ä¸äººå£è§å¾\n   * äºèæ¿ç­æ¾å¼åï¼è¿æ¥äºä¸æ¹æ°çå¿ãæä»¬è¯çéè¿5whyã5soæ³ç»¼åä½¿ç¨ï¼ççè½åç°å©´å¹¼å¿ç¨åå¸åºçåªäºæ°ç¹æ§ã\n   * ä¼åç°ï¼ç®åçæ°çå¿æå¾å¤æ¯æçè²æ³æ³çå¦å¥³çå­éæ¶åï¼è¿äºäººçè´¢å¯æ¯ä»¥åä¼æ´å¤ï¼æè²è§å¿µä¹ä¼æ´å¼º...\n   * å°±æ¯è¯´ï¼å©´å¹¼å¿çå¢éæ¯å¦ç¨³å®å°ä¸ç¡®å®ï¼éè¦æç»­å³æ³¨ï¼ä¸­é«ç«¯äº§åæ´åæ¬¢è¿ï¼ç§å­¦æå»ç¸å³è¡ä¸ä¼æå¾å¥½çåå±æºä¼ã\n\næèï¼å½ä¸aiçå¤§å¿æé¢èæ¥æ¶ï¼ä½ è½åç°ä»ä¹æºä¼å¢ï¼\n\n\n# ç¬¬å«ç«  åµæ³æç»´\n\näººçå¦æä»ï¼æä»è¦æåµæ³ãåµæ³æç»´è®²è¿°çæ¯è¿æ ·ä¸äºæç»´æ¨¡å¼ï¼å¦ä½è§é¿é£é©ï¼æææºä¼ï¼ææ¡ä¸»å¨æï¼ä»¥ç¡®ä¿å¨æ¼«é¿çäººçä¸­è·å¾æ»ä½ä¸æä¼çåå±ã\n\nä¸æ¬¡æ¬¡å¤§å¤§å°å°çæææ±èæäºè¿ä¸åºçå½çæäºãåµæ³æç»´ï¼é¦æ¨ãå­å­åµæ³ãã\n\nç»å¤§å¤æ°åµä¹¦é½æ¯è®²æäºçå·ä½ææ¯ï¼èãå­å­åµæ³ãåæ¯è®²æäºä¹"é"ãæä»¬å½è¿çæäºä¸æ¯æªæåé¨ï¼èæ¯å­¦ä¸ãäººèãæ±èãåä¸ç­ãè¿äºæäºéè¦çæ¯éï¼èéæ¯ãå³æä»¬ä¸ç¨æåæªè¿éæä¼ï¼èè¦å°æ·±å»çæºæ§åºç¨äºçæ´»ï¼è®¾è®¡èªå·±çäººçèè´æã\n\n * èåµåèèåæ±æï¼è´¥åµåç«èåæ±è\n   * ä½å¨æäºé¢åï¼å¦æèµãåä¸ç­ï¼è¦ç¡®å®å¿èæ¯ä¸å¯è½çãè¿æ¶åï¼æä»¬å¯ä»¥èèåå© å¯éå¬å¼\n * åæèï¼è´äººèä¸è´äºäºº\n   * è´äººèä¸è´äºäººï¼ç®åçè¯´å°±æ¯è¦ä¸»å¨ä¸è¦è¢«å¨\n * èå¯ç¥ï¼èä¸å¯ä¸ºä¹\n   * æºä¼æªå°æ¶ï¼ç§¯æåå¤åä¿è¯èªå·±çä¸è´¥ï¼ä½ä¸å¯å¦å¨ï¼æ¶æºå°æ¥æ¶ï¼è¦åç¡®è¯å«å¹¶æä½å®\n     * æèµçæå¥åä¹ï¼æé¾çä¸æ¯äº¤æï¼èæ¯ä¸äº¤æ\n\n\n# ç¬¬ä¹ç«  æ¢å³æ¯å¿«\n\nå¨è¿ä¸ªé¼å¹å°å¹´å¾å¿çæ¶ä»£éï¼å¯¹äºåºèº«å¹³å¡ãç¼ºä¹èµæºãæ²¡æèæ¯çäººæ¥è¯´ï¼ä¸æ³¨åå¥½ä¸ä»¶äºææ¯å¤§æ¦çççå­ç¥éãæ¢å³æ¯å¿«ï¼è¿æ¯ææ¯ï¼ä¹æ¯å¿æ³ã\n\n\n# ä¸ºä»ä¹éè¦ä¸æ³¨\n\næå¥åäº§åºï¼ä»æ¥é½ä¸æ¯ææ­£æ¯çãæä»¬è¦æè¯å°ï¼å¤§é¨åçæå¥é½æ¯ä¸è½äº§çç´æ¥ä»·å¼çã\n\n\n\nå¯ä»¥çå°ï¼å½ä½ æåæå¥ä¸äºèµæºçæ¶åï¼ä½ çè½åæ°´å¹³å¹¶æ²¡æå¾å°é£éæåï¼æ´æ æ³å æ­¤è·å¾æ¶å¥ãå³ä¾¿åæå¥ä¸ç¹èµæºè¿å¥å¿«éæååºé´ï¼è·å¾äºä¸å®çè½åæé¿åï¼å¶æ¶å¥æ°´å¹³ä¹éå¸¸ä¸è¬ãåªæå½æå¥äºå¤§éèµæºè¿å¥é«åæä»¥åï¼æ¶å¥æ°´å¹³æè½è¿æ¥çæ­£çå¤§å¹å¢é¿ã\n\nå¯¹äºé£äºæºåãç¥è¯ç§¯ç´¯ãææ¯æ°´å¹³ãäººèãèµéç­èµæºæ¬å°±ä¸åºä¼çäººæ¥è¯´ï¼å¦æä»ä»¬ææéçèµæºåæ£å°ä¸åçé¢åï¼é£ä¹æ¯ä¸ä¸ªé¢åé½ä¼åçå¨ä½éå¯å¨åºé´ï¼ä»å°æ°¸è¿é¢ä¸´è¾ä½æ¶å¥ï¼ä»¥åéä¹èæ¥çåç§ç¦æ¼ãæä»¥ï¼æ®éäººæå¥½çç­ç¥å°±æ¯ä¸æ³¨ï¼æææçåééä¸­å°ä¸ç¹ï¼å¨ä¸ä¸ªé¢åå²è¿è½åçé«ååºåï¼å¹¶å¾å°éé±ä¸çèªç±ãè¿æ¯ä¸æ¡å¯¹äºæ®éäººæ¥è¯´é£é©æä½ãæåçæé«çéè·¯ã\n\næ»ä¹ï¼å¯¹äºèµè´¨ãèæ¯é½å¾æ®éçäººæ¥è¯´ï¼ä¸æ³¨åªåæ¯æä½³ç­ç¥ãç¸åºå°ï¼å½ä½ çèµæºè¶ä¸°åãå¤©èµè¶é«æ¶ï¼ä½ è¿è¡èµæºæ´åãè·¨çåå±ãå¤ååç»è¥çç©ºé´ä¹å°±è¶å¤§ï¼æåçä¹å°±è¶é«---ä½ä¾ç¶ä¸å¯é«ä¼°ã\n\n\n# ä¸ºä»ä¹ä¸æ³¨å¾é¾åå°\n\nå¶ä¸­æä¸¤ä¸ªé®é¢ææå±æ§ï¼\n\n 1. å¦æèªå·±å¾å°½å¨åæå¥çå¤§æ¹åå°±æ¯éçæä¹åï¼\n    * éè¦åå©æ·±åº¦æç»´æ ¼å±ç¯æ¥å¸®å©ç¡®å®æ­£ç¡®æ¹å\n 2. å éæé¿æ«æçææ¯é¾åº¦\n    * éè¦åå©æ·±åº¦æç»´ææ¯ç¯æ¥å¸®å©çªç ´ææ¯é¾åº¦\n\n\n# ç²¾ç¥å¾è¾\n\nå¨è¿ä¸ªé¼å¹å°å¹´å¾å¿çæ¶ä»£ï¼ææ´åç±å¤§å¨ææã\n\nç²¾ç¥å¾è¾ --- å¤§æ°ææå¸é©¬æ¿ã\n\nå¹³åæ¥è®²ï¼äººçä¸çæ¯ä¸å¹´å°±ä¼æä¸æ¬¡æºä¼ã3å¹´è¿ä¸ªæ°æ®æ¯ç»è¿ç¤¾ä¼æ£éªçï¼å¦å·¥ä½2-3å¹´åï¼åçº§ç®¡çèä½æ¯ä¸æ¬¡æºä¼ï¼å·¥ä½3-4å¹´åï¼ä¸­çº§ç®¡çèä½æ¯ä¸æ¬¡æºä¼...\n\n\n\næ ¹æ®æ¦çå¬å¼ï¼æä»¬å¯ä»¥ç¥éï¼è¶å°åé¢ï¼æåçæ¦çè¶å¤§ãæ²¡æèµæºï¼ä¸æ¯å¤©æï¼ä½ çå½è¿æå¤§çèç®å¶å®å°±æ¯æ¦çåæ¶é´ã\n\nå¦æè¯´åªååæ¹æ³å¼å¯äºæå°±çå¯è½ï¼ä¸æ³¨è®©è¿ä¸ªå¯è½æäºä¸å®çæé«ï¼é£ä¹æ¼«é¿ççå½åæ¶é´åå°è¿ä¸ªæ¦çæé«å°äºå¯ä»¥æ¥åçç¨åº¦ï¼è®©ä½ ç¬¬ä¸æ¬¡æäºå¯¹æå½è¿çä¸»å¨æã',charsets:{cjk:!0}},{title:"ARCHITECTURE(æå®¢æ¶é´)æè¦",frontmatter:{title:"ARCHITECTURE(æå®¢æ¶é´)æè¦",date:"2020-04-13T00:00:00.000Z",description:"ARCHITECTURE(æå®¢æ¶é´)æè¦",permalink:null,categories:["blog","xnote"],tags:[null]},regularPath:"/blog/xnote/rnote_geekbang_architecture.html",relativePath:"blog/xnote/rnote_geekbang_architecture.md",key:"v-162635f9",path:"/blog/xnote/rnote_geekbang_architecture.html",headers:[{level:2,title:"ARCHITECTURE",slug:"architecture",normalizedTitle:"architecture",charIndex:2},{level:3,title:"æ¦åµ",slug:"æ¦åµ",normalizedTitle:"æ¦åµ",charIndex:128},{level:2,title:"ç®å½",slug:"ç®å½",normalizedTitle:"ç®å½",charIndex:760},{level:2,title:"å¼ç¯",slug:"å¼ç¯",normalizedTitle:"å¼ç¯",charIndex:797},{level:2,title:"01 | æ¶æå°åºæ¯æä»ä¹ï¼",slug:"_01-æ¶æå°åºæ¯æä»ä¹",normalizedTitle:"01 | æ¶æå°åºæ¯æä»ä¹ï¼",charIndex:803},{level:2,title:"02 | æ¶æè®¾è®¡çåå²èæ¯",slug:"_02-æ¶æè®¾è®¡çåå²èæ¯",normalizedTitle:"02 | æ¶æè®¾è®¡çåå²èæ¯",charIndex:821},{level:2,title:"03 | æ¶æè®¾è®¡çç®ç",slug:"_03-æ¶æè®¾è®¡çç®ç",normalizedTitle:"03 | æ¶æè®¾è®¡çç®ç",charIndex:839},{level:2,title:"04 | å¤æåº¦æ¥æºï¼é«æ§è½",slug:"_04-å¤æåº¦æ¥æº-é«æ§è½",normalizedTitle:"04 | å¤æåº¦æ¥æºï¼é«æ§è½",charIndex:855},{level:2,title:"05 | å¤æåº¦æ¥æºï¼é«å¯ç¨",slug:"_05-å¤æåº¦æ¥æº-é«å¯ç¨",normalizedTitle:"05 | å¤æåº¦æ¥æºï¼é«å¯ç¨",charIndex:873},{level:2,title:"06 | å¤æåº¦æ¥æºï¼å¯æ©å±æ§",slug:"_06-å¤æåº¦æ¥æº-å¯æ©å±æ§",normalizedTitle:"06 | å¤æåº¦æ¥æºï¼å¯æ©å±æ§",charIndex:891},{level:2,title:"07 | å¤æåº¦æ¥æºï¼ä½ææ¬ãå®å¨ãè§æ¨¡",slug:"_07-å¤æåº¦æ¥æº-ä½ææ¬ãå®å¨ãè§æ¨¡",normalizedTitle:"07 | å¤æåº¦æ¥æºï¼ä½ææ¬ãå®å¨ãè§æ¨¡",charIndex:910},{level:2,title:"08 | æ¶æè®¾è®¡ä¸åå",slug:"_08-æ¶æè®¾è®¡ä¸åå",normalizedTitle:"08 | æ¶æè®¾è®¡ä¸åå",charIndex:934},{level:2,title:"09 | æ¶æè®¾è®¡ååæ¡ä¾",slug:"_09-æ¶æè®¾è®¡ååæ¡ä¾",normalizedTitle:"09 | æ¶æè®¾è®¡ååæ¡ä¾",charIndex:950},{level:2,title:"10 | æ¶æè®¾è®¡æµç¨ï¼è¯å«å¤æåº¦",slug:"_10-æ¶æè®¾è®¡æµç¨-è¯å«å¤æåº¦",normalizedTitle:"10 | æ¶æè®¾è®¡æµç¨ï¼è¯å«å¤æåº¦",charIndex:967},{level:2,title:"11 | æ¶æè®¾è®¡æµç¨ï¼è®¾è®¡å¤éæ¹æ¡",slug:"_11-æ¶æè®¾è®¡æµç¨-è®¾è®¡å¤éæ¹æ¡",normalizedTitle:"11 | æ¶æè®¾è®¡æµç¨ï¼è®¾è®¡å¤éæ¹æ¡",charIndex:988},{level:2,title:"12 | æ¶æè®¾è®¡æµç¨ï¼è¯ä¼°åéæ©å¤éæ¹æ¡",slug:"_12-æ¶æè®¾è®¡æµç¨-è¯ä¼°åéæ©å¤éæ¹æ¡",normalizedTitle:"12 | æ¶æè®¾è®¡æµç¨ï¼è¯ä¼°åéæ©å¤éæ¹æ¡",charIndex:1010},{level:2,title:"13 | æ¶æè®¾è®¡æµç¨ï¼è¯¦ç»æ¹æ¡è®¾è®¡",slug:"_13-æ¶æè®¾è®¡æµç¨-è¯¦ç»æ¹æ¡è®¾è®¡",normalizedTitle:"13 | æ¶æè®¾è®¡æµç¨ï¼è¯¦ç»æ¹æ¡è®¾è®¡",charIndex:1035},{level:2,title:"14 | é«æ§è½æ°æ®åºéç¾¤ï¼è¯»ååç¦»",slug:"_14-é«æ§è½æ°æ®åºéç¾¤-è¯»ååç¦»",normalizedTitle:"14 | é«æ§è½æ°æ®åºéç¾¤ï¼è¯»ååç¦»",charIndex:1057},{level:2,title:"15 | é«æ§è½æ°æ®åºéç¾¤ï¼ååºåè¡¨",slug:"_15-é«æ§è½æ°æ®åºéç¾¤-ååºåè¡¨",normalizedTitle:"15 | é«æ§è½æ°æ®åºéç¾¤ï¼ååºåè¡¨",charIndex:1079},{level:2,title:"16 | é«æ§è½NoSQL",slug:"_16-é«æ§è½nosql",normalizedTitle:"16 | é«æ§è½nosql",charIndex:1101},{level:2,title:"17 | é«æ§è½ç¼å­æ¶æ",slug:"_17-é«æ§è½ç¼å­æ¶æ",normalizedTitle:"17 | é«æ§è½ç¼å­æ¶æ",charIndex:1118},{level:2,title:"18 | åæå¡å¨é«æ§è½æ¨¡å¼ï¼PPCä¸TPC",slug:"_18-åæå¡å¨é«æ§è½æ¨¡å¼-ppcä¸tpc",normalizedTitle:"18 | åæå¡å¨é«æ§è½æ¨¡å¼ï¼ppcä¸tpc",charIndex:1134},{level:2,title:"19 | åæå¡å¨é«æ§è½æ¨¡å¼ï¼Reactorä¸Proactor",slug:"_19-åæå¡å¨é«æ§è½æ¨¡å¼-reactorä¸proactor",normalizedTitle:"19 | åæå¡å¨é«æ§è½æ¨¡å¼ï¼reactorä¸proactor",charIndex:1160},{level:2,title:"20 | é«æ§è½è´è½½åè¡¡ï¼åç±»åæ¶æ",slug:"_20-é«æ§è½è´è½½åè¡¡-åç±»åæ¶æ",normalizedTitle:"20 | é«æ§è½è´è½½åè¡¡ï¼åç±»åæ¶æ",charIndex:1195},{level:2,title:"21 | é«æ§è½è´è½½åè¡¡ï¼ç®æ³",slug:"_21-é«æ§è½è´è½½åè¡¡-ç®æ³",normalizedTitle:"21 | é«æ§è½è´è½½åè¡¡ï¼ç®æ³",charIndex:1217},{level:2,title:"22 | æ³æä¸ºæ¶æå¸ï¼ä½ å¿é¡»ç¥éCAPçè®º",slug:"_22-æ³æä¸ºæ¶æå¸-ä½ å¿é¡»ç¥écapçè®º",normalizedTitle:"22 | æ³æä¸ºæ¶æå¸ï¼ä½ å¿é¡»ç¥écapçè®º",charIndex:1236},{level:2,title:"23 | æ³æä¸ºæ¶æå¸ï¼ä½ å¿é¡»ææ¡çCAPç»è",slug:"_23-æ³æä¸ºæ¶æå¸-ä½ å¿é¡»ææ¡çcapç»è",normalizedTitle:"23 | æ³æä¸ºæ¶æå¸ï¼ä½ å¿é¡»ææ¡çcapç»è",charIndex:1262},{level:2,title:"24 | FMEAæ¹æ³ï¼æé¤æ¶æå¯ç¨æ§éæ£çå©å¨",slug:"_24-fmeaæ¹æ³-æé¤æ¶æå¯ç¨æ§éæ£çå©å¨",normalizedTitle:"24 | fmeaæ¹æ³ï¼æé¤æ¶æå¯ç¨æ§éæ£çå©å¨",charIndex:1289},{level:2,title:"25 | é«å¯ç¨å­å¨æ¶æï¼åæºæ¶æ",slug:"_25-é«å¯ç¨å­å¨æ¶æ-åæºæ¶æ",normalizedTitle:"25 | é«å¯ç¨å­å¨æ¶æï¼åæºæ¶æ",charIndex:1317},{level:2,title:"26 | é«å¯ç¨å­å¨æ¶æï¼éç¾¤åååº",slug:"_26-é«å¯ç¨å­å¨æ¶æ-éç¾¤åååº",normalizedTitle:"26 | é«å¯ç¨å­å¨æ¶æï¼éç¾¤åååº",charIndex:1338},{level:2,title:"27 | å¦ä½è®¾è®¡è®¡ç®é«å¯ç¨æ¶æï¼",slug:"_27-å¦ä½è®¾è®¡è®¡ç®é«å¯ç¨æ¶æ",normalizedTitle:"27 | å¦ä½è®¾è®¡è®¡ç®é«å¯ç¨æ¶æï¼",charIndex:1360},{level:2,title:"28 | ä¸å¡é«å¯ç¨çä¿éï¼å¼å°å¤æ´»æ¶æ",slug:"_28-ä¸å¡é«å¯ç¨çä¿é-å¼å°å¤æ´»æ¶æ",normalizedTitle:"28 | ä¸å¡é«å¯ç¨çä¿éï¼å¼å°å¤æ´»æ¶æ",charIndex:1381},{level:2,title:"29 | å¼å°å¤æ´»è®¾è®¡4å¤§æå·§",slug:"_29-å¼å°å¤æ´»è®¾è®¡4å¤§æå·§",normalizedTitle:"29 | å¼å°å¤æ´»è®¾è®¡4å¤§æå·§",charIndex:1405},{level:2,title:"30 | å¼å°å¤æ´»è®¾è®¡4æ­¥èµ°",slug:"_30-å¼å°å¤æ´»è®¾è®¡4æ­¥èµ°",normalizedTitle:"30 | å¼å°å¤æ´»è®¾è®¡4æ­¥èµ°",charIndex:1424},{level:2,title:"31 | å¦ä½åºå¯¹æ¥å£çº§çæéï¼",slug:"_31-å¦ä½åºå¯¹æ¥å£çº§çæé",normalizedTitle:"31 | å¦ä½åºå¯¹æ¥å£çº§çæéï¼",charIndex:1442},{level:2,title:"32 | å¯æ©å±æ¶æçåºæ¬ææ³åæ¨¡å¼",slug:"_32-å¯æ©å±æ¶æçåºæ¬ææ³åæ¨¡å¼",normalizedTitle:"32 | å¯æ©å±æ¶æçåºæ¬ææ³åæ¨¡å¼",charIndex:1462},{level:2,title:"33 | ä¼ ç»çå¯æ©å±æ¶ææ¨¡å¼ï¼åå±æ¶æåSOA",slug:"_33-ä¼ ç»çå¯æ©å±æ¶ææ¨¡å¼-åå±æ¶æåsoa",normalizedTitle:"33 | ä¼ ç»çå¯æ©å±æ¶ææ¨¡å¼ï¼åå±æ¶æåsoa",charIndex:1484},{level:2,title:"34 | æ·±å¥çè§£å¾®æå¡æ¶æï¼é¶å¼¹ or ç¦æ²¹åï¼",slug:"_34-æ·±å¥çè§£å¾®æå¡æ¶æ-é¶å¼¹-or-ç¦æ²¹å",normalizedTitle:"34 | æ·±å¥çè§£å¾®æå¡æ¶æï¼é¶å¼¹ or ç¦æ²¹åï¼",charIndex:1512},{level:2,title:"35 | å¾®æå¡æ¶ææä½³å®è·µ - æ¹æ³ç¯",slug:"_35-å¾®æå¡æ¶ææä½³å®è·µ-æ¹æ³ç¯",normalizedTitle:"35 | å¾®æå¡æ¶ææä½³å®è·µ - æ¹æ³ç¯",charIndex:1541},{level:2,title:"36 | å¾®æå¡æ¶ææä½³å®è·µ - åºç¡è®¾æ½ç¯",slug:"_36-å¾®æå¡æ¶ææä½³å®è·µ-åºç¡è®¾æ½ç¯",normalizedTitle:"36 | å¾®æå¡æ¶ææä½³å®è·µ - åºç¡è®¾æ½ç¯",charIndex:1565},{level:2,title:"37 | å¾®åæ ¸æ¶æè¯¦è§£",slug:"_37-å¾®åæ ¸æ¶æè¯¦è§£",normalizedTitle:"37 | å¾®åæ ¸æ¶æè¯¦è§£",charIndex:1591},{level:2,title:"38 | æ¶æå¸åºè¯¥å¦ä½å¤æ­ææ¯æ¼è¿çæ¹åï¼",slug:"_38-æ¶æå¸åºè¯¥å¦ä½å¤æ­ææ¯æ¼è¿çæ¹å",normalizedTitle:"38 | æ¶æå¸åºè¯¥å¦ä½å¤æ­ææ¯æ¼è¿çæ¹åï¼",charIndex:1607},{level:2,title:"39 | äºèç½ææ¯æ¼è¿çæ¨¡å¼",slug:"_39-äºèç½ææ¯æ¼è¿çæ¨¡å¼",normalizedTitle:"39 | äºèç½ææ¯æ¼è¿çæ¨¡å¼",charIndex:1633},{level:2,title:"40 | äºèç½æ¶ææ¨¡æ¿ï¼âå­å¨å±âææ¯",slug:"_40-äºèç½æ¶ææ¨¡æ¿-å­å¨å±-ææ¯",normalizedTitle:"40 | äºèç½æ¶ææ¨¡æ¿ï¼âå­å¨å±âææ¯",charIndex:1652},{level:2,title:"41 | äºèç½æ¶ææ¨¡æ¿ï¼âå¼åå±âåâæå¡å±âææ¯",slug:"_41-äºèç½æ¶ææ¨¡æ¿-å¼åå±-å-æå¡å±-ææ¯",normalizedTitle:"41 | äºèç½æ¶ææ¨¡æ¿ï¼âå¼åå±âåâæå¡å±âææ¯",charIndex:1676},{level:2,title:"42 | äºèç½æ¶ææ¨¡æ¿ï¼âç½ç»å±âææ¯",slug:"_42-äºèç½æ¶ææ¨¡æ¿-ç½ç»å±-ææ¯",normalizedTitle:"42 | äºèç½æ¶ææ¨¡æ¿ï¼âç½ç»å±âææ¯",charIndex:1706},{level:2,title:"43 | äºèç½æ¶ææ¨¡æ¿ï¼âç¨æ·å±âåâä¸å¡å±âææ¯",slug:"_43-äºèç½æ¶ææ¨¡æ¿-ç¨æ·å±-å-ä¸å¡å±-ææ¯",normalizedTitle:"43 | äºèç½æ¶ææ¨¡æ¿ï¼âç¨æ·å±âåâä¸å¡å±âææ¯",charIndex:1730},{level:2,title:"44 | äºèç½æ¶ææ¨¡æ¿ï¼âå¹³å°âææ¯",slug:"_44-äºèç½æ¶ææ¨¡æ¿-å¹³å°-ææ¯",normalizedTitle:"44 | äºèç½æ¶ææ¨¡æ¿ï¼âå¹³å°âææ¯",charIndex:1760},{level:2,title:"45 | æ¶æéæååå¿æ³ç¬¬ä¸å¼ï¼æçæ¾ç¢",slug:"_45-æ¶æéæååå¿æ³ç¬¬ä¸å¼-æçæ¾ç¢",normalizedTitle:"45 | æ¶æéæååå¿æ³ç¬¬ä¸å¼ï¼æçæ¾ç¢",charIndex:1783},{level:2,title:"46 | æ¶æéæååå¿æ³ç¬¬äºå¼ï¼åçºµè¿æ¨ª",slug:"_46-æ¶æéæååå¿æ³ç¬¬äºå¼-åçºµè¿æ¨ª",normalizedTitle:"46 | æ¶æéæååå¿æ³ç¬¬äºå¼ï¼åçºµè¿æ¨ª",charIndex:1808},{level:2,title:"47 | æ¶æéæååå¿æ³ç¬¬ä¸å¼ï¼è¿ç­¹å¸·å¹",slug:"_47-æ¶æéæååå¿æ³ç¬¬ä¸å¼-è¿ç­¹å¸·å¹",normalizedTitle:"47 | æ¶æéæååå¿æ³ç¬¬ä¸å¼ï¼è¿ç­¹å¸·å¹",charIndex:1833},{level:2,title:"48 | åè°å¼æºé¡¹ç®ï¼å¦ä½éæ©ãä½¿ç¨ä»¥åäºæ¬¡å¼åï¼",slug:"_48-åè°å¼æºé¡¹ç®-å¦ä½éæ©ãä½¿ç¨ä»¥åäºæ¬¡å¼å",normalizedTitle:"48 | åè°å¼æºé¡¹ç®ï¼å¦ä½éæ©ãä½¿ç¨ä»¥åäºæ¬¡å¼åï¼",charIndex:1858},{level:2,title:"49 | è°è°Appæ¶æçæ¼è¿",slug:"_49-è°è°appæ¶æçæ¼è¿",normalizedTitle:"49 | è°è°appæ¶æçæ¼è¿",charIndex:1888},{level:2,title:"50 | æ¶æå®æï¼æ¶æè®¾è®¡ææ¡£æ¨¡æ¿",slug:"_50-æ¶æå®æ-æ¶æè®¾è®¡ææ¡£æ¨¡æ¿",normalizedTitle:"50 | æ¶æå®æï¼æ¶æè®¾è®¡ææ¡£æ¨¡æ¿",charIndex:1907},{level:2,title:"æ»ç»",slug:"æ»ç»",normalizedTitle:"æ»ç»",charIndex:1929},{level:2,title:"END",slug:"end",normalizedTitle:"end",charIndex:1935}],headersStr:"ARCHITECTURE æ¦åµ ç®å½ å¼ç¯ 01 | æ¶æå°åºæ¯æä»ä¹ï¼ 02 | æ¶æè®¾è®¡çåå²èæ¯ 03 | æ¶æè®¾è®¡çç®ç 04 | å¤æåº¦æ¥æºï¼é«æ§è½ 05 | å¤æåº¦æ¥æºï¼é«å¯ç¨ 06 | å¤æåº¦æ¥æºï¼å¯æ©å±æ§ 07 | å¤æåº¦æ¥æºï¼ä½ææ¬ãå®å¨ãè§æ¨¡ 08 | æ¶æè®¾è®¡ä¸åå 09 | æ¶æè®¾è®¡ååæ¡ä¾ 10 | æ¶æè®¾è®¡æµç¨ï¼è¯å«å¤æåº¦ 11 | æ¶æè®¾è®¡æµç¨ï¼è®¾è®¡å¤éæ¹æ¡ 12 | æ¶æè®¾è®¡æµç¨ï¼è¯ä¼°åéæ©å¤éæ¹æ¡ 13 | æ¶æè®¾è®¡æµç¨ï¼è¯¦ç»æ¹æ¡è®¾è®¡ 14 | é«æ§è½æ°æ®åºéç¾¤ï¼è¯»ååç¦» 15 | é«æ§è½æ°æ®åºéç¾¤ï¼ååºåè¡¨ 16 | é«æ§è½NoSQL 17 | é«æ§è½ç¼å­æ¶æ 18 | åæå¡å¨é«æ§è½æ¨¡å¼ï¼PPCä¸TPC 19 | åæå¡å¨é«æ§è½æ¨¡å¼ï¼Reactorä¸Proactor 20 | é«æ§è½è´è½½åè¡¡ï¼åç±»åæ¶æ 21 | é«æ§è½è´è½½åè¡¡ï¼ç®æ³ 22 | æ³æä¸ºæ¶æå¸ï¼ä½ å¿é¡»ç¥éCAPçè®º 23 | æ³æä¸ºæ¶æå¸ï¼ä½ å¿é¡»ææ¡çCAPç»è 24 | FMEAæ¹æ³ï¼æé¤æ¶æå¯ç¨æ§éæ£çå©å¨ 25 | é«å¯ç¨å­å¨æ¶æï¼åæºæ¶æ 26 | é«å¯ç¨å­å¨æ¶æï¼éç¾¤åååº 27 | å¦ä½è®¾è®¡è®¡ç®é«å¯ç¨æ¶æï¼ 28 | ä¸å¡é«å¯ç¨çä¿éï¼å¼å°å¤æ´»æ¶æ 29 | å¼å°å¤æ´»è®¾è®¡4å¤§æå·§ 30 | å¼å°å¤æ´»è®¾è®¡4æ­¥èµ° 31 | å¦ä½åºå¯¹æ¥å£çº§çæéï¼ 32 | å¯æ©å±æ¶æçåºæ¬ææ³åæ¨¡å¼ 33 | ä¼ ç»çå¯æ©å±æ¶ææ¨¡å¼ï¼åå±æ¶æåSOA 34 | æ·±å¥çè§£å¾®æå¡æ¶æï¼é¶å¼¹ or ç¦æ²¹åï¼ 35 | å¾®æå¡æ¶ææä½³å®è·µ - æ¹æ³ç¯ 36 | å¾®æå¡æ¶ææä½³å®è·µ - åºç¡è®¾æ½ç¯ 37 | å¾®åæ ¸æ¶æè¯¦è§£ 38 | æ¶æå¸åºè¯¥å¦ä½å¤æ­ææ¯æ¼è¿çæ¹åï¼ 39 | äºèç½ææ¯æ¼è¿çæ¨¡å¼ 40 | äºèç½æ¶ææ¨¡æ¿ï¼âå­å¨å±âææ¯ 41 | äºèç½æ¶ææ¨¡æ¿ï¼âå¼åå±âåâæå¡å±âææ¯ 42 | äºèç½æ¶ææ¨¡æ¿ï¼âç½ç»å±âææ¯ 43 | äºèç½æ¶ææ¨¡æ¿ï¼âç¨æ·å±âåâä¸å¡å±âææ¯ 44 | äºèç½æ¶ææ¨¡æ¿ï¼âå¹³å°âææ¯ 45 | æ¶æéæååå¿æ³ç¬¬ä¸å¼ï¼æçæ¾ç¢ 46 | æ¶æéæååå¿æ³ç¬¬äºå¼ï¼åçºµè¿æ¨ª 47 | æ¶æéæååå¿æ³ç¬¬ä¸å¼ï¼è¿ç­¹å¸·å¹ 48 | åè°å¼æºé¡¹ç®ï¼å¦ä½éæ©ãä½¿ç¨ä»¥åäºæ¬¡å¼åï¼ 49 | è°è°Appæ¶æçæ¼è¿ 50 | æ¶æå®æï¼æ¶æè®¾è®¡ææ¡£æ¨¡æ¿ æ»ç» END",content:"# ARCHITECTURE\n\n> Architecture is like teenage sexï¼ everybody talks about itï¼ nobody really knows what is itã\n\n> æ¶ææ¯ä¸é¨å¹³è¡¡çèºæ¯\n\n\n# æ¦åµ\n\n * ç®è¿°\n   * ä¸å¡é©±å¨ææ¯ï¼ææ¯è§£å³ä¸å¡é®é¢ã\n   * ä¸åçææ¯ï¼éè¿æ ç¶ç»æï¼ç»åå¨ä¸èµ·ï¼å½¢æäºä¸ä¸ªå®æ´çæ¶æè§£å³æ¹æ¡ï¼ææå®æä¸å¡çç®æ ã\n * æå©\n   * ææçæ¶æåæï¼é½åºè¯¥æ¯å½¢ææ ç¶çç»æ\n     * å ä¸ºï¼åååºæ¥çé¨åçè´è´£äººï¼å¯¹è¿ä¸ªé¨åçæå©åä¹å¡å¿é¡»æ¯å¯¹ç­çãæ¶æå¸æ²¡æè¯è¯­æï¼è¿æ¶ä»ä¹æ\n     * æ¶æå¸å¿é¡»æ¯ä¸ä¸ªç»ç»çé¢å¯¼äººï¼ææå©è°å¨è¿ä¸ªç»ç»çæ¶æï¼æè½å¤æ´å¥½çåæ¥æ¶æå¸çä½ç¨\n * è´£ä»»\n   * æ¾é®é¢\n     * æ¾åºé®é¢çä¸»ä½ï¼æ¯åæ¶æçé¦è¦é®é¢ãæ¶æå¸é½è¦æè¿ä¸ªèªè§ï¼åç°é®é¢æ°¸è¿é½æ¯è§£å³é®é¢æ¥çæ´å éè¦ã\n       * æä»¬ä¸å®è¦æç½ï¼ä»»ä½æ¾ä¸æ¶æå¸çé®é¢ï¼ç»å¯¹é½ä¸æ¯çæ­£çé®é¢ï¼å ä¸ºå¦ææ¯çæ­£çé®é¢çè¯ï¼æé®é¢çäººè¯å®é½è½å¤èªå·±è§£å³äº\n         * ä¸¤ä¸ªé®é¢ï¼å¦æé®é¢ä¸è§£å³ï¼ç©¶ç«è°ä¼æå©ççæå¤±ï¼å¦æé®é¢è§£å³äºï¼ç©¶ç«è°ä¼ææ¶çï¼è°çæ¶çæå¤§ï¼\n   * æ¾ææ¯\n     * åç¡®è¯å«éç¨ä»ä¹ææ¯çè½åï¼ä¹æ¯æ¶æå¸æè¦å·å¤çè½åä¹ä¸ã\n       * è¿å°±è¦æ±äºè§£è¿é¡¹ææ¯è§£å³çæ¯è°çé®é¢ï¼ä»ä¹é®é¢ï¼\n         * ä¾å­ï¼æ¯å¦å½æä»¬éè¦ä¸ä¸ªé¤å­æ¶ï¼æè¾¹æ­£å¥½æ²¡æï¼ä½æ¯å´æä¸åªé«è·éï¼åå¼ºä¹å¯ä»¥æ¿ä»£é¤å­ãä½æ¯é¿ææ¥çï¼è¿ä¹ç¨ä¸åç®ï¼å ä¸ºä»·æ ¼ãèç¨æ§ãç»´æ¤ææ¬ç¸å·®å¾å¤ã\n\n----------------------------------------\n\n\n\n\n\n# ç®å½\n\n * ARCHITECTURE\n   * æ¦åµ\n * ç®å½\n * å¼ç¯\n * 01 | æ¶æå°åºæ¯æä»ä¹ï¼\n * 02 | æ¶æè®¾è®¡çåå²èæ¯\n * 03 | æ¶æè®¾è®¡çç®ç\n * 04 | å¤æåº¦æ¥æºï¼é«æ§è½\n * 05 | å¤æåº¦æ¥æºï¼é«å¯ç¨\n * 06 | å¤æåº¦æ¥æºï¼å¯æ©å±æ§\n * 07 | å¤æåº¦æ¥æºï¼ä½ææ¬ãå®å¨ãè§æ¨¡\n * 08 | æ¶æè®¾è®¡ä¸åå\n * 09 | æ¶æè®¾è®¡ååæ¡ä¾\n * 10 | æ¶æè®¾è®¡æµç¨ï¼è¯å«å¤æåº¦\n * 11 | æ¶æè®¾è®¡æµç¨ï¼è®¾è®¡å¤éæ¹æ¡\n * 12 | æ¶æè®¾è®¡æµç¨ï¼è¯ä¼°åéæ©å¤éæ¹æ¡\n * 13 | æ¶æè®¾è®¡æµç¨ï¼è¯¦ç»æ¹æ¡è®¾è®¡\n * 14 | é«æ§è½æ°æ®åºéç¾¤ï¼è¯»ååç¦»\n * 15 | é«æ§è½æ°æ®åºéç¾¤ï¼ååºåè¡¨\n * 16 | é«æ§è½NoSQL\n * 17 | é«æ§è½ç¼å­æ¶æ\n * 18 | åæå¡å¨é«æ§è½æ¨¡å¼ï¼PPCä¸TPC\n * 19 | åæå¡å¨é«æ§è½æ¨¡å¼ï¼Reactorä¸Proactor\n * 20 | é«æ§è½è´è½½åè¡¡ï¼åç±»åæ¶æ\n * 21 | é«æ§è½è´è½½åè¡¡ï¼ç®æ³\n * 22 | æ³æä¸ºæ¶æå¸ï¼ä½ å¿é¡»ç¥éCAPçè®º\n * 23 | æ³æä¸ºæ¶æå¸ï¼ä½ å¿é¡»ææ¡çCAPç»è\n * 24 | FMEAæ¹æ³ï¼æé¤æ¶æå¯ç¨æ§éæ£çå©å¨\n * 25 | é«å¯ç¨å­å¨æ¶æï¼åæºæ¶æ\n * 26 | é«å¯ç¨å­å¨æ¶æï¼éç¾¤åååº\n * 27 | å¦ä½è®¾è®¡è®¡ç®é«å¯ç¨æ¶æï¼\n * 28 | ä¸å¡é«å¯ç¨çä¿éï¼å¼å°å¤æ´»æ¶æ\n * 29 | å¼å°å¤æ´»è®¾è®¡4å¤§æå·§\n * 30 | å¼å°å¤æ´»è®¾è®¡4æ­¥èµ°\n * 31 | å¦ä½åºå¯¹æ¥å£çº§çæéï¼\n * 32 | å¯æ©å±æ¶æçåºæ¬ææ³åæ¨¡å¼\n * 33 | ä¼ ç»çå¯æ©å±æ¶ææ¨¡å¼ï¼åå±æ¶æåSOA\n * 34 | æ·±å¥çè§£å¾®æå¡æ¶æï¼é¶å¼¹ or ç¦æ²¹åï¼\n * 35 | å¾®æå¡æ¶ææä½³å®è·µ - æ¹æ³ç¯\n * 36 | å¾®æå¡æ¶ææä½³å®è·µ - åºç¡è®¾æ½ç¯\n * 37 | å¾®åæ ¸æ¶æè¯¦è§£\n * 38 | æ¶æå¸åºè¯¥å¦ä½å¤æ­ææ¯æ¼è¿çæ¹åï¼\n * 39 | äºèç½ææ¯æ¼è¿çæ¨¡å¼\n * 40 | äºèç½æ¶ææ¨¡æ¿ï¼âå­å¨å±âææ¯\n * 41 | äºèç½æ¶ææ¨¡æ¿ï¼âå¼åå±âåâæå¡å±âææ¯\n * 42 | äºèç½æ¶ææ¨¡æ¿ï¼âç½ç»å±âææ¯\n * 43 | äºèç½æ¶ææ¨¡æ¿ï¼âç¨æ·å±âåâä¸å¡å±âææ¯\n * 44 | äºèç½æ¶ææ¨¡æ¿ï¼âå¹³å°âææ¯\n * 45 | æ¶æéæååå¿æ³ç¬¬ä¸å¼ï¼æçæ¾ç¢\n * 46 | æ¶æéæååå¿æ³ç¬¬äºå¼ï¼åçºµè¿æ¨ª\n * 47 | æ¶æéæååå¿æ³ç¬¬ä¸å¼ï¼è¿ç­¹å¸·å¹\n * 48 | åè°å¼æºé¡¹ç®ï¼å¦ä½éæ©ãä½¿ç¨ä»¥åäºæ¬¡å¼åï¼\n * 49 | è°è°Appæ¶æçæ¼è¿\n * 50 | æ¶æå®æï¼æ¶æè®¾è®¡ææ¡£æ¨¡æ¿\n * æ»ç»\n * END\n\n\n\n\né¡µé¦\n\n\n# å¼ç¯\n\n * æ¶æå¸çæ ¸å¿è½åè¿æ¯ææ¯è½åï¼è¿ç¡¬çææ¯ææ¯è¯å¥½æ²éçåºç¡\n * æ¶æè®¾è®¡çæç»´åç¨åºè®¾è®¡çæç»´å·®å¼å¾å¤§\n   * æ¶æè®¾è®¡çå³é®æç»´æ¯å¤æ­ååèï¼ç¨åºè®¾è®¡çå³é®æç»´æ¯é»è¾åå®ç°\n * æ¬è¯¾ç¨çç®ç\n   * æ¸æ¥å°çè§£æ¶æè®¾è®¡ç¸å³çæ¦å¿µãæ¬è´¨ãç®ç\n   * ææ¡éç¨çæ¶æè®¾è®¡åå\n   * ææ¡æ åçæ¶æè®¾è®¡æµç¨\n   * æ·±å¥çè§£å·²æçæ¶ææ¨¡å¼, çç»ä½¿ç¨å¹¶åæ°\n * æ¶æçä¸»è¦å¤ææ§\n   * é«å¯ç¨æ§ãé«æ§è½ãå¯ä¼¸ç¼©ãå¯æ©å±ãå®å¨æ§ãç¨³å®æ§ãå¯ç»´æ¤æ§ãå¥å£®æ§ç­\n\n\n\n\né¡µé¦\n\n\n# 01 | æ¶æå°åºæ¯æä»ä¹ï¼\n\n * ç³»ç»ä¸å­ç³»ç»ãæ¨¡åä¸ç»ä»¶ãæ¡æ¶ä¸æ¶æ\n   * ç³»ç»ä¸å­ç³»ç»\n     * äºèåªæ¯è§åº¦(è§æ¨¡)ä¸ä¸æ ·ï¼å­ç³»ç»æ¯ç³»ç»çä¸é¨å, ä¸ä¸ªç³»ç»å¯è½æ¯å¦ä¸ä¸ªæ´å¤§ç³»ç»çå­ç³»ç»\n       * ç³»ç»: ç±ä¸ç¾¤æå³èçä¸ªä½ç»æç, è¿äºä¸ªä½æç§æå®çè§åè¿ä½ï¼äº§çäºæ°çè½åã\n       * ä¾å¦ï¼æ±½è½¦è½å¤è½½éåè¿ï¼èåå¨æºãåéå¨ãä¼ å¨è½´ãè½¦è½®æ¬èº«é½ä¸å·å¤è¿æ ·çè½åã\n   * æ¨¡ååç»ä»¶\n     * ä¸¤ä¸ªæ¦å¿µå¨å®éå·¥ä½ä¸­å¾å®¹ææ··æ·, å¶å®å®ä»¬é½æ¯ç³»ç»çç»æé¨åï¼åªæ¯ä»ä¸åçè§åº¦æåç³»ç»èå·²\n       * æ¨¡å: ä»é»è¾çè§åº¦æ¥æåç³»ç»åï¼ååæ¨¡åçä¸»è¦ç®çæ¯ä¸å¡ä¸èè´£åç¦»\n       * ç»ä»¶: ä»ç©ççè§åº¦æ¥æåç³»ç»åï¼ååç»ä»¶çä¸»è¦ç®çæ¯ææ¯ä¸ååå¤ç¨ã\n         * å¶å®ï¼âç»ä»¶âçè±æ component ä¹å¯è¯ä¸ºâé¶ä»¶âï¼è¿æ ·æ´å®¹æçè§£ä¸äºï¼âé¶ä»¶âæ¯ä¸ä¸ªç©ççæ¦å¿µï¼å·å¤âç¬ç«ä¸å¯æ¿æ¢âçç¹ç¹ã\n   * æ¡æ¶ä¸æ¶æ\n     * æ¡æ¶(Framework)å³æ³¨çæ¯âè§èâï¼æ¶æ(Architecture)å³æ³¨çæ¯âç»æâãä»è±æåå­å¯ä»¥çåºä¸åä¹å¤ã\n       * æ¶æå¯ä»¥ä»¥ä¸åçè§åº¦è¿è¡åè§£ï¼å¦ï¼ä¸å¡é»è¾ãç©çé¨ç½²ãå¼åè§èç­ãè¿å°±æ¯ IBM ç RUP å°è½¯ä»¶æ¶æè§å¾åä¸ºèåçâ4+1 è§å¾âçåå ã\n         * ä¾å¦ï¼å¯ä»¥æèä¸ âå­¦çç®¡çç³»ç»â çæ¶æ\n           * ä¸å¡é»è¾ï¼ç»å½æ³¨åãä¸ªäººä¿¡æ¯ ä»¥å ä¸ªäººæç»©ï¼ç©çï¼nginxãwebæå¡å¨ ä»¥å æ°æ®åºï¼å¼åè§è: MVC æ¶æ\n       * ä½èå°æ¶æéæ°å®ä¹ä¸ºï¼è½¯ä»¶æ¶ææè½¯ä»¶ç³»ç»çé¡¶å±ç»æã\n         * æ¶æéè¦æç¡®: ä¸ç¾¤å³èä¸ªä½, ä»¥åä¸ªä½è¿ä½ååä½çè§åã\n     * çè§£\n       * æ¡æ¶æ¯ä¸ç§çº¦æï¼èæ¶æä¾§éäºæ¹åçæå¯¼\n       * æ¶æçç»ææ¯ç³»ç»ï¼ç³»ç»æ¯å©ç¨ä¸ç³»åä¸ªä½(å­ç³»ç»ãæ¨¡åç­)åè§åè¾¾å°æ¢å®ç®æ ã\n\n\n\n\né¡µé¦\n\n\n# 02 | æ¶æè®¾è®¡çåå²èæ¯\n\n * æ¶ææ¯ä¸ºäºè§£å³å¤ææ§\n   * æ¼åå²\n     * æºå¨è¯­è¨ -> æ±ç¼è¯­è¨ -> é«çº§è¯­è¨ -> ç¬¬ä¸æ¬¡è½¯ä»¶å±æºä¸ç»æåç¨åºè®¾è®¡ -> ç¬¬äºæ¬¡è½¯ä»¶å±æºä¸é¢åå¯¹è±¡ -> è½¯ä»¶æ¶æ\n   * èåªæè§æ¨¡è¾å¤§çè½¯ä»¶ç³»ç»æä¼é¢ä¸´è½¯ä»¶æ¶æç¸å³çé®é¢ï¼ä¾å¦ï¼ç³»ç»è§æ¨¡åºå¤§ï¼åé¨è¦åä¸¥éï¼å¼åæçä½ï¼åç»­ä¿®æ¹åæ©å±å°é¾, å®¹æåºé®é¢ä¸å¾é¾ææ¥åä¿®å¤ï¼\n   * éçè½¯ä»¶ç³»ç»è§æ¨¡çå¢å ï¼è®¡ç®ç¸å³çç®æ³åæ°æ®ç»æä¸åææä¸»è¦çè®¾è®¡é®é¢ï¼å½ç³»ç»ç±è®¸å¤é¨åç»ææ¶ï¼æ´ä¸ªç³»ç»çç»ç»ï¼ä¹å°±æ¯æè¯´çâè½¯ä»¶æ¶æâï¼å¯¼è´äºä¸ç³»åæ°çè®¾è®¡é®é¢ã\n * æèé¢\n   * ä¸ºä½ç»æåç¼ç¨ãé¢åå¯¹è±¡ç¼ç¨ãè½¯ä»¶å·¥ç¨ãæ¶æè®¾è®¡æåé½æ²¡ææä¸ºè½¯ä»¶é¢åçé¶å¼¹ï¼\n     * æè: å¯ä¸ä¸åçæ¯ååæ¬èº«, ä¸å¡ä¼éçæ¶é´è¶æ¥è¶å¤æ\n\n\n\n\né¡µé¦\n\n\n# 03 | æ¶æè®¾è®¡çç®ç\n\n * ç®ç\n   * è§£å³è½¯ä»¶ç³»ç»å¤æåº¦å¸¦æ¥çé®é¢\n     * å¤æåº¦åå«äºä¸å¡å¤æåº¦ãèµæºãææ¬ãè¿åº¦ãå¢éç¶æç­å ç´ ï¼å¹¶ä¸å°½ééå\n     * ä¸è¬çä¸ä¸ªæ¶æå¸ä¸è¬å¯ä»¥æ¯æ20äººä»¥ä¸çå¼åå¢é\n * ç®åçå¤æåº¦åææ¡ä¾\n   * è®¾è®¡ä¸ä¸ªå¤§å­¦çå­¦çç®¡çç³»ç»ï¼å¶åºæ¬åè½åæ¬ç»å½ãæ³¨åãæç»©ç®¡çãè¯¾ç¨ç®¡çç­ã\n * æèé¢\n   * æç§âæ¶æè®¾è®¡çä¸»è¦ç®çæ¯ä¸ºäºè§£å³è½¯ä»¶å¤æåº¦å¸¦æ¥çé®é¢âè¿ä¸ªæå¯¼ææ³æ¥åæä¸ä¸ä½ ç®åçä¸å¡ç³»ç»æ¶æ\n\n\n\n\né¡µé¦\n\n\n# 04 | å¤æåº¦æ¥æºï¼é«æ§è½\n\n * é«æ§è½å¸¦æ¥çå¤æåº¦ä¸»è¦ä½ç°å¨ä¸¤æ¹é¢\n   * åå°è®¡ç®æºåé¨ä¸ºäºé«æ§è½å¸¦æ¥çå¤æåº¦\n     * éè¦èèå¦å¤è¿ç¨ãå¤çº¿ç¨ãè¿ç¨é´éä¿¡ãå¤çº¿ç¨å¹¶åç­ææ¯ç¹\n       * ä¾å¦ï¼Nginx å¯ä»¥ç¨å¤è¿ç¨ä¹å¯ä»¥ç¨å¤çº¿ç¨ï¼JBoss éç¨çæ¯å¤çº¿ç¨ï¼Redis éç¨çæ¯åè¿ç¨ï¼Memcache éç¨çæ¯å¤çº¿ç¨ï¼è¿äºç³»ç»é½å®ç°äºé«æ§è½ï¼ä½åé¨å®ç°å·®å¼å´å¾å¤§ã\n   * å¤å°è®¡ç®æºéç¾¤ä¸ºäºé«æ§è½å¸¦æ¥çå¤æåº¦\n     * ä¾å¦ï¼æ·å®\"å11\"ï¼æ¥èå¾®ä¿¡çº¢åç­\n     * æ¹æ¡\n       * ä»»å¡åé\n         * éç¾¤ä¸­æ¯ä¸ªä¸»æºçå·¥ä½åå®¹ä¸æ ·ï¼é½æ¯å®æ´ä»»å¡æµç¨\n           * å½æµéç¹å«é«æ¶ï¼ä»»å¡åéå¨(å¦ï¼lvsãnginxãF5ç­)ä¹ä¼æä¸ºç¶é¢\n       * ä»»å¡åè§£\n         * å°å¤æä»»å¡æè§£åºå­ä»»å¡ï¼åå¯¹å­ä»»å¡åé«æ§è½\n           * æåç²åº¦è¿ç»ï¼ä¼å¸¦æ¥å¶ä»çå¤ææ§ãå¦ï¼è°ç¨é¾å¤ªé¿å½±åæ§è½ç­\n         * ä¼ç¹ï¼\n           * ç®åçç³»ç»æ´å å®¹æåå°é«æ§è½\n           * å¯ä»¥éå¯¹åä¸ªä»»å¡è¿è¡æ©å±ï¼æ´æéå¯¹æ§\n         * ä¾å¦\n           * å¾®ä¿¡åå°æ¶æä»é»è¾ä¸å°åä¸ªå­ä¸å¡è¿è¡äºæåï¼åæ¬ï¼æ¥å¥ãæ³¨åç»å½ãæ¶æ¯ãLBSãæä¸æãæ¼æµç¶ãå¶ä»ä¸å¡ï¼èå¤©ãè§é¢ãæååç­ï¼ã\n * æèé¢\n   * ä½ æå¨çä¸å¡ä½ç³»ä¸­ï¼é«æ§è½çç³»ç»éç¨çæ¯åªç§æ¹å¼ï¼ç®åæ¯å¦ææ¹è¿åæåçç©ºé´ï¼\n\n\n\n\né¡µé¦\n\n\n# 05 | å¤æåº¦æ¥æºï¼é«å¯ç¨\n\n * æ ¸å¿ï¼åä½å¤ä»½ä¸å¤±æè½¬ç§»\n   * ä¸»å¤ï¼å·å¤ãç­å¤ãæ¸©å¤\n   * å·ä½å®è·µçè¿ç¨ä¸­ï¼å­å¨ä¸ä¸ªæ¬è´¨ççç¾ï¼éè¿åä½æ¥å®ç°çé«å¯ç¨ç³»ç»ï¼ç¶æå³ç­æ¬è´¨ä¸å°±ä¸å¯è½åå°å®å¨æ­£ç¡®ã\n * åºæ¯\n   * è®¡ç®é«å¯ç¨\n     * æä¸ä¸ªç¹ç¹å°±æ¯æ è®ºå¨åªå°æºå¨ä¸è¿è¡è®¡ç®ï¼åæ ·çç®æ³åè¾å¥æ°æ®ï¼äº§åºçç»æé½æ¯ä¸æ ·ç\n   * å­å¨é«å¯ç¨\n     * é¾ç¹ä¸å¨äºå¦ä½å¤ä»½æ°æ®ï¼èå¨äºå¦ä½åå°æèè§é¿æ°æ®ä¸ä¸è´å¯¹ä¸å¡é æçå½±åã\n     * å­å¨ä¸è®¡ç®ç¸æ¯ï¼ä¸ä¸ªæ¬è´¨ä¸çåºå«ï¼å°æ°æ®ä»ä¸å°æºå¨æ¬å°å°å¦ä¸å°æºå¨ï¼éè¦ç»è¿çº¿è·¯è¿è¡ä¼ è¾ã\n       * çº¿è·¯ä¼ è¾çéåº¦æ¯æ¯«ç§çº§å«ï¼åä¸æºæ¿åé¨è½å¤åå°å æ¯«ç§ï¼åå¸å¨ä¸åå°æ¹çæºæ¿ï¼ä¼ è¾èæ¶éè¦å åçè³ä¸ç¾æ¯«ç§ã\n         * ä¾å¦ï¼ä»å¹¿å·æºæ¿å°åäº¬æºæ¿ï¼ç¨³å®æåµä¸ ping å»¶æ¶å¤§çº¦æ¯50msï¼ä¸ç¨³å®æåµä¸å¯è½è¾¾å° 1s çè³æ´å¤ã\n * é«å¯ç¨ç¶æå³ç­\n   * ç¬è£å¼\n   * ååå¼\n     * ååå¼å³ç­æçæ¯ä¸¤ä¸ªç¬ç«çä¸ªä½éè¿äº¤æµä¿¡æ¯ï¼ç¶åæ ¹æ®è§åè¿è¡å³ç­ï¼æå¸¸ç¨çååå¼å³ç­å°±æ¯ä¸»å¤å³ç­ã\n       * ååå¼å³ç­çæ¶æä¸å¤æï¼è§åä¹ä¸å¤æï¼å¶é¾ç¹å¨äºï¼å¦æå¦æä¸¤èçä¿¡æ¯äº¤æ¢åºç°é®é¢ï¼æ¯å¦ä¸»å¤è¿æ¥ä¸­æ­ï¼ï¼æ­¤æ¶ç¶æå³ç­åºè¯¥æä¹åã\n   * æ°ä¸»å¼\n     * æ°ä¸»å¼å³ç­æçæ¯å¤ä¸ªç¬ç«çä¸ªä½éè¿æç¥¨çæ¹å¼æ¥è¿è¡ç¶æå³ç­ãä¾å¦ï¼ZooKeeper éç¾¤å¨éä¸¾ leader æ¶å°±æ¯éç¨è¿ç§æ¹å¼\n       * å®¹æäº§çèè£ï¼ä¸éä¸¾ç®æ³å¤æ\n         * ä¸ºäºè§£å³èè£é®é¢ï¼æ°ä¸»å¼å³ç­çç³»ç»ä¸è¬é½éç¨âæç¥¨èç¹æ°å¿é¡»è¶è¿ç³»ç»æ»èç¹æ°ä¸åâè§åæ¥å¤çã\n           * è¿ç§æ¹å¼è½ç¶è§£å³äºèè£é®é¢ï¼ä½åæ¶éä½äºç³»ç»æ´ä½çå¯ç¨æ§ï¼å³å¦æç³»ç»ä¸æ¯å ä¸ºèè£é®é¢å¯¼è´æç¥¨èç¹æ°è¿å°ï¼èççæ¯å ä¸ºèç¹æéï¼æ­¤æ¶ç³»ç»ä¹ä¸ä¼éåºä¸»èç¹ï¼æ´ä¸ªç³»ç»å°±ç¸å½äºå®æºäº\n * æèé¢\n   * é«æ§è½åé«å¯ç¨æ¯å¾å¤ç³»ç»çæ ¸å¿å¤æåº¦ï¼ä½ è®¤ä¸ºåªä¸ªä¼æ´å¤æä¸äºï¼çç±æ¯ä»ä¹ï¼\n\n\n\n\né¡µé¦\n\n\n# 06 | å¤æåº¦æ¥æºï¼å¯æ©å±æ§\n\n * è®¾è®¡å·å¤è¯å¥½å¯æ©å±æ§çç³»ç»ï¼æä¸¤ä¸ªåºæ¬æ¡ä»¶ï¼æ­£ç¡®é¢æµååãå®ç¾å°è£åå\n * æ­£ç¡®é¢æµåå\n   * å¯ä¸ä¸åçæ¯åå\n   * å¤ææ§å¨äºï¼ä¸å¯è½æ¯ç¹é½èèå¯æ©å±æ§ï¼ä¹ä¸è½ä¸èèæ©å±æ§ï¼ææçé¢æµé½æåºéå¯è½æ§\n   * é¢æµæ´å¤çæ¯é èªå·±çç»éªãç´è§\n * åºå¯¹åå\n   * å°è£ååï¼éç¦»ä¸å\n     * è¿ä¹æ¯'è®¾è®¡æ¨¡å¼'çææ³, 'è§åå¼æ'äº¦æ¯å¦æ­¤\n     * å°è£ååå¸¸ç¨çæ¹å¼ï¼æç¼åºä¸ä¸ªâæ½è±¡å±âåä¸ä¸ªâå®ç°å±â, æ½è±¡å±å¯¹å¤æä¾ç¸å¯¹ç¨³å®çæ¥å£ï¼å®ç°å±æ ¹æ®å·ä½ä¸å¡å®å¶å¼åã\n   * æ³¨æï¼\n     * å¤ªçµæ´»ä¼é ææ··ä¹±\n * æèé¢\n   * ä½ å¨å·ä½ä»£ç ä¸­ä½¿ç¨è¿åªäºå¯æ©å±çææ¯ï¼æç»çææå¦ä½ï¼\n\n\n\n\né¡µé¦\n\n\n# 07 | å¤æåº¦æ¥æºï¼ä½ææ¬ãå®å¨ãè§æ¨¡\n\n * ä½ææ¬çå¤æåº¦ä½ç°å¨ï¼å¼å¥æ°ææ¯æåé æ°ææ¯\n   * å¼å¥æ°ææ¯ãä¸»è¦å¤æåº¦å¨äºéè¦å»çææ°ææ¯ï¼å¹¶ä¸å°æ°ææ¯ä¸å·²æææ¯ç»åï¼\n   * å¼åæ°ææ¯ãä¸»è¦å¤æåº¦å¨äºéè¦å»åé å¨æ°ççå¿µåææ¯ï¼æç»åç°æææ¯æå®å¨åæ°\n     * å¾å¾åªæâåæ°âæè½è¾¾å°ä½ææ¬ç®æ ï¼å¦ï¼\n       * Linkedin ä¸ºäºå¤çæ¯å¤© 5 åäº¿çäºä»¶ï¼å¼åäºé«æç Kafka æ¶æ¯ç³»ç»ã\n       * æ°æµªå¾®åå°ä¼ ç»ç Redis/MC + MySQL æ¹å¼ï¼æ©å±ä¸º Redis/MC + SSD Cache + MySQL æ¹å¼ï¼SSD Cache ä½ä¸º L2 ç¼å­ä½¿ç¨ï¼æ¢è§£å³äº MC/Redis ææ¬è¿é«ï¼å®¹éå°çé®é¢ï¼ä¹è§£å³äºç©¿é DB å¸¦æ¥çæ°æ®åºè®¿é®ååï¼æ¥æºï¼https://www.infoq.cn/article/weibo-platform-archietureï¼\n * å®å¨çå¤æåº¦ä½ç°å¨ï¼åè½å®å¨åæ¶æå®å¨\n   * åè½å®å¨(å¶å®å°±æ¯âé²å°å·â, æ¬è´¨æ¯æ¼æ´)\n     * å¸¸è§ç XSS æ»å»ãCSRF æ»å»ãSQL æ³¨å¥ãWindows æ¼æ´ãå¯ç ç ´è§£ç­ï¼æ¬è´¨ä¸æ¯å ä¸ºç³»ç»å®ç°ææ¼æ´ã\n   * æ¶æå®å¨(å¶å®å°±æ¯âé²å¼ºçâ, æ¬è´¨æ¯ææç ´å)\n     * å¦ DDOSãä¼ ç»çæ¶æå®å¨ä¸»è¦ä¾é é²ç«å¢ï¼é²ç«å¢æåºæ¬çåè½å°±æ¯éç¦»ç½ç»ï¼éè¿å°ç½ç»ååæä¸åçåºåï¼å¶å®åºä¸ååºåä¹é´çè®¿é®æ§ç­ç¥æ¥æ§å¶ä¸åä¿¡ä»»ç¨åº¦åºåé´ä¼ éçæ°æ®æµã\n * è§æ¨¡çå¤æåº¦ä½ç°å¨ï¼éåå¼èµ·è´¨å\n   * åè½è¶æ¥è¶å¤\n     * åè®¾ç³»ç»é´çåè½é½æ¯ä¸¤ä¸¤ç¸å³çï¼ç³»ç»çå¤æåº¦ = åè½æ°é + åè½ä¹é´çè¿æ¥æ°é. éçåè½çå¢å¤ï¼å¤æåº¦è¿ä¹ææ°çå¢é¿ã\n   * æ°æ®è¶æ¥è¶å¤\n     * MYSQLåè¡¨ä¸è¬æ¨èå¨ 5000 ä¸è¡å·¦å³ãå¦æå ä¸ºä¸å¡çåå±ï¼åè¡¨æ°æ®è¾¾å°äº 10 äº¿è¡ï¼å°±ä¼äº§çå¾å¤é®é¢ï¼ä¾å¦ï¼\n       * æ·»å ç´¢å¼ãä¿®æ¹è¡¨ç»æä¼å¾æ¢ï¼å¯è½éè¦å ä¸ªå°æ¶ï¼è¿å ä¸ªå°æ¶åæ°æ®åºè¡¨æ¯æ æ³æå¥æ°æ®çï¼ç¸å½äºä¸å¡åæºäºã\n       * å³ä½¿æç´¢å¼ï¼ç´¢å¼çæ§è½ä¹å¯è½ä¼å¾ä½ï¼å ä¸ºæ°æ®éå¤ªå¤§ã\n       * æ°æ®åºå¤ä»½èæ¶å¾é¿ã\n     * å¦ææè¡¨ï¼åä¼å¸¦æ¥ï¼æä¹æï¼æäºä¹åäºå¡åæ¥è¯¢ç­ä½¿ç¨æ¹å¼ï¼ç­å¤æåº¦\n * æèé¢\n   * å­¦ä¹ äº 6 å¤§å¤æåº¦æ¥æºåï¼ç»åä½ æå¨çä¸å¡ï¼åæä¸ä¸ä¸»è¦çå¤æåº¦æ¯è¿å¶ä¸­çåªäºé¨åï¼æ¯å¦è¿æå¶ä»å¤æåº¦åå ï¼\n\n\n\n\né¡µé¦\n\n\n# 08 | æ¶æè®¾è®¡ä¸åå\n\n * ä¸ååï¼åé > æ¼å > ç®å\n   * åéåå\n     * åéä¼äºä¸çé¢å\n     * çæ­£ä¼ç§çæ¶æé½æ¯å¨ä¼ä¸å½åäººåãæ¡ä»¶ãä¸å¡ç­åç§çº¦æä¸è®¾è®¡åºæ¥çï¼è½å¤åçå°å°èµæºæ´åå¨ä¸èµ·å¹¶åæ¥åºæå¤§åæï¼å¹¶ä¸è½å¤å¿«éè½å°ã\n     * å¸¸è§çå¤±è´¥åå \n       * æ²¡é£ä¹å¤äººï¼å´æ³å¹²é£ä¹å¤æ´»\n       * æ²¡æé£ä¹å¤ç§¯ç´¯ï¼å´æ³ä¸æ­¥ç»å¤©\n         * ä¸çé¢åçæ¹æ¡å¶å®é½æ¯âé¼âåºæ¥çï¼\n       * æ²¡æé£ä¹åè¶çä¸å¡åºæ¯ï¼å´å¹»æ³çµåä¸éªæä¸ºå¤©æ\n         * æ²¡æqqçç¨æ·éï¼å´æç§qqçä½éè¿è¡è®¾è®¡\n   * ç®ååå\n     * ç®åç±äºå¤æï¼\n       * è¶æ¥è¶ç²¾ç»ãè¶æ¥è¶å¤ææ¯æ­£å¸¸çæ¼åï¼ä½ä¸æ­¥å°ä½æ¶ä¼å¤§å¤§å¢å å¤æåº¦åä¸å¯æ§ç¨åº¦\n       * æ¶ææ¯å¨æå¯¼æ¼åæ¹ååèå´ï¼å°½å¯è½çç®åæ¶ä¼æ´å¥å£®\n     * ãUNIX ç¼ç¨èºæ¯ãæ»ç»ç KISSï¼Keep It Simple, Stupid!ï¼ååä¸æ ·éåºäºæ¶æè®¾è®¡ã\n   * æ¼ååå\n     * æ¼åä¼äºä¸æ­¥å°ä½\n     * æ ¹æ®ç¯å¢çååï¼æ¼åæ¶æè¿è¡éåºå½åé¶æ®µ\n * æèé¢\n   * è¿ä¸æ¡æ¶æè®¾è®¡ååæ¯å¦æ¯æ¬¡é½è¦å¨é¨éµå¾ªï¼æ¯å¦æä¼åçº§ï¼è°è°ä½ ççè§£ï¼å¹¶è¯´è¯´ä¸ºä»ä¹ã\n\n\n\n\né¡µé¦\n\n\n# 09 | æ¶æè®¾è®¡ååæ¡ä¾\n\n * æ¡ä¾\n   * æ·å®ç½ å QQ\n * æèé¢\n   * æç´¢ä¸ä¸ªäºèç½å¤§åï¼BATJãTMD ç­ï¼çæ¶æåå±æ¡ä¾ï¼åæä¸ä¸å¶åå±è¿ç¨ï¼ççåªäºå°æ¹ä½ç°äºè¿ä¸æ¡æ¶æè®¾è®¡ååã\n * reference\n   * <æ·å®ææ¯è¿åå¹´>\n\n\n\n\né¡µé¦\n\n\n# 10 | æ¶æè®¾è®¡æµç¨ï¼è¯å«å¤æåº¦\n\n * è¯å«å¤æåº¦\n   * å°ä¸»è¦çå¤æåº¦é®é¢ååºæ¥ï¼ç¶åæ ¹æ®ä¸å¡ãææ¯ãå¢éç­ç»¼åæåµè¿è¡æåºï¼ä¼åè§£å³å½åé¢ä¸´çæä¸»è¦çå¤æåº¦é®é¢ã\n     * è®¾è®¡çç®æ åºè¯¥ä»¥å³°å¼æ¥è®¡ç®ãå³°å¼ä¸è¬åå¹³åå¼ç 3 åã\n   * å¸¸è§ç³»ç»çæ§è½éçº§éè¦ççäºå¿\n     * ä¾å¦nginxè´è½½åè¡¡æ§è½æ¯3ä¸å·¦å³ï¼mcçè¯»åæ§è½5ä¸å·¦å³ï¼kafkaå·ç§°ç¾ä¸çº§ï¼zookeeperåå¥è¯»å2ä¸ä»¥ä¸ï¼httpè¯·æ±è®¿é®å¤§æ¦å¨2ä¸å·¦å³ã\n\n\n\n\né¡µé¦\n\n\n# 11 | æ¶æè®¾è®¡æµç¨ï¼è®¾è®¡å¤éæ¹æ¡\n\n * å¤éæ¹æ¡\n   * ä»¥3-5ä¸ªä¸ºä½³\n     * å°äº3ä¸ªï¼åæ¾å¾æè·¯ç­é(å¯ä»¥é²æ­¢æç»´ç­éï¼ç®åç­æµï¼æç»´ç²åºç­å³ç­é·é±); å¤äº5ä¸ªåæµªè´¹ç²¾å\n   * å¤éæ¹æ¡ä¹é´è¦å·®å¼ææ¾\n     * ä¾å¦ï¼ä¸»å¤æ¹æ¡åéç¾¤æ¹æ¡å·®å¼å°±å¾ææ¾ï¼æèåæ ·æ¯ä¸»å¤æ¹æ¡ï¼ç¨ ZooKeeper åä¸»å¤å³ç­åç¨ Keepalived åä¸»å¤å³ç­çå·®å¼ä¹å¾ææ¾ãä½æ¯é½ç¨ ZooKeeper åä¸»å¤å³ç­ï¼ä¸ä¸ªæ£æµå¨ææ¯ 1 åéï¼ä¸ä¸ªæ£æµå¨ææ¯ 5 åéï¼è¿å°±ä¸æ¯æ¶æä¸çå·®å¼ï¼èæ¯ç»èä¸çå·®å¼äºï¼ä¸éååæä¸¤ä¸ªæ¹æ¡ã\n   * å¤éæ¹æ¡çææ¯ä¸è¦å±éäºå·²ç»çæçææ¯æ¹æ¡\n     * è®¾è®¡æ¶ææ¶ï¼æ¶æå¸éè¦å°è§éæ¾å®½ï¼èèæ´å¤å¯è½æ§ã\n * å¤éæ¹æ¡ä¸å®è¿äºè¯¦ç»\n   * å¤éé¶æ®µå³æ³¨çæ¯ææ¯éåï¼èä¸æ¯ææ¯ç»èï¼ææ¯éåçå·®å¼è¦æ¯è¾ææ¾\n   * å¤éæ¹æ¡è¿äºè¯¦ç»çç¼ºç¹ï¼\n     * èè´¹äºå¤§éçæ¶é´åç²¾åã\n     * å°æ³¨æåéä¸­å°ç»èä¸­ï¼å¿½ç¥äºæ´ä½çææ¯è®¾è®¡ï¼å¯¼è´å¤éæ¹æ¡æ°éä¸å¤æèå·®å¼ä¸å¤§ã\n     * è¯å®¡çæ¶åå¶ä»äººä¼è¢«å¾å¤ç»èç»ç»è¿å»ï¼è¯å®¡ææå¾å·®ã\n\n\n\n\né¡µé¦\n\n\n# 12 | æ¶æè®¾è®¡æµç¨ï¼è¯ä¼°åéæ©å¤éæ¹æ¡\n\n * 360 åº¦ç¯è¯\n   * å·ä½çæä½æ¹å¼ä¸ºï¼ååºæä»¬éè¦å³æ³¨çè´¨éå±æ§ç¹ï¼ç¶ååå«ä»è¿äºè´¨éå±æ§çç»´åº¦å»è¯ä¼°æ¯ä¸ªæ¹æ¡ï¼åç»¼åæééåå½æ¶æåµçæä¼æ¹æ¡ã\n     * å¸¸è§çæ¹æ¡è´¨éå±æ§ç¹æï¼æ§è½ãå¯ç¨æ§ãç¡¬ä»¶ææ¬ãé¡¹ç®æå¥ãå¤æåº¦ãå®å¨æ§ãå¯æ©å±æ§ç­ã\n * æ¡ä¾: ä¸å¡æ¶æ¯çå¯é ä¼ è¾\n   * æ¹æ¡ç¯è¯\n   * ç»è®ºï¼æç»éæ©å¤éæ¹æ¡ 2ï¼åå æï¼ æé¤å¤éæ¹æ¡ 1 çä¸»è¦åå æ¯å¯è¿ç»´æ§; å¹¶ä¸ Kafka çä¸»è¦è®¾è®¡ç®æ æ¯é«æ§è½æ¥å¿ä¼ è¾ï¼èæä»¬çæ¶æ¯éåè®¾è®¡çä¸»è¦ç®æ æ¯ä¸å¡æ¶æ¯çå¯é ä¼ è¾ã æé¤å¤éæ¹æ¡ 3 çä¸»è¦åå æ¯å¤æåº¦ï¼ç®åå¢éææ¯å®ååäººåäººåè§æ¨¡ï¼æ»å± 6 äººï¼è¿æå¶ä»ä¸­é´ä»¶ç³»ç»éè¦å¼ååç»´æ¤ï¼ å¤éæ¹æ¡ 2 çä¼ç¹å°±æ¯å¤æåº¦ä¸é«ï¼ä¹å¯ä»¥å¾å¥½å°èå¥ç°æè¿ç»´ä½ç³»ï¼å¯é æ§ä¹æä¿éã\n   * æ¹æ¡äºç¼ºç¹ï¼\n     * æ§è½ãææ¬ãçèµ·æ¥ä¸ä¼é\n * æèé¢\n   * RocketMQ å Kafka æä»ä¹åºå«ï¼é¿éä¸ºä½éæ©äºRocketMQ ï¼\n\n\n\n\né¡µé¦\n\n\n# 13 | æ¶æè®¾è®¡æµç¨ï¼è¯¦ç»æ¹æ¡è®¾è®¡\n\n * è¯¦ç»æ¹æ¡è®¾è®¡å°±æ¯å°æ¹æ¡æ¶åçå³é®ææ¯ç»èç»ç¡®å®ä¸æ¥\n   * æ·±åº¦çè§£å³é®ç»èç¹ï¼é¿åå ä¸ºéæ¼äºæä¸ªå³é®ææ¯ç¹æèå³é®çè´¨éå±æ§é ææ¹æ¡çæ§è¡åºç°é®é¢\n   * éè¿åæ­¥éª¤ãåé¶æ®µãåç³»ç»ç­æ¹å¼ï¼å°½ééä½æ¹æ¡æ§è¡å¤æåº¦\n * æ¶æå¸éè¦ååªäºææ¯éªè¯ï¼æèç ç©¶å°ä»ä¹æ·±åº¦ä»¥åï¼æè½å¤æ­è¯¥ææ¯æ¯å¦éåå¢ï¼\n   * åºæ¬åçï¼ä¼ç¹ç¼ºç¹ï¼å³é®è®¾è®¡ç¹ï¼æ¶æå¸è³å°è¦å®è£è¿ï¼ç¼ådemoä½éªè¿ï¼ç¡®å®éååï¼è¦è¿è¡æ§è½åå¯ç¨æ§æµè¯ä¾å¦esçç´¢æ§è®¾è®¡å°±æ¯å³é®è®¾è®¡ç¹\n\n\n\n\né¡µé¦\n\n\n# 14 | é«æ§è½æ°æ®åºéç¾¤ï¼è¯»ååç¦»\n\n * é«æ§è½æ°æ®åºéç¾¤çä¸¤ç§æ¹å¼ï¼è¯»ååç¦»ãååºåè¡¨\n\n * è¯»ååç¦»\n   \n   * å®ç°\n     * æ­å»ºä¸»ä»éç¾¤ï¼ä¸»è´è´£è¯»åï¼ä»åªè´è´£è¯»ï¼éè¿å¤å¶ä¸»æºæ°æ®å°ä»èç¹å°è¾¾æ°æ®ä¸è´ã\n     * ä¸å¡æå¡å¨å°åæä½åéç»ä¸»èç¹ï¼è¯»æä½åæ£å°ä»èç¹ã\n     * æ³¨æï¼\n       * æ¯ä¸»ä»éç¾¤ï¼ä¸æ¯ä¸»å¤éç¾¤\n   * å¤æåº¦\n     * ä¸»ä»å¤å¶å»¶è¿\n       1. åæä½åçè¯»æä½æå®åç»æ°æ®åºä¸»æå¡å¨\n          * å¯¹ä¸å¡çä¾µå¥åå½±åè¾å¤§\n       2. è¯»ä»æºå¤±è´¥ååè¯»ä¸æ¬¡ä¸»æº(äºæ¬¡è¯»å)\n       3. å³é®ä¸å¡è¯»åæä½å¨é¨æåä¸»æºï¼éå³é®ä¸å¡éç¨è¯»ååç¦»\n     * åéæºå¶\n       * ç¨åºä»£ç å°è£\n         * ç¨åºä»£ç å°è£æå¨ä»£ç ä¸­æ½è±¡ä¸ä¸ªæ°æ®è®¿é®å±ï¼æä»¥æçæç« ä¹ç§°è¿ç§æ¹å¼ä¸ºâä¸­é´å±å°è£âï¼ï¼å®ç°è¯»åæä½åç¦»åæ°æ®åºæå¡å¨è¿æ¥çç®¡ç\n           * ç®åå¼æºçå®ç°æ¹æ¡ä¸­ï¼æ·å®ç TDDLï¼TTaobao Distributed Data Layerï¼å¤å·: å¤´é½å¤§äºï¼æ¯æ¯è¾æåçã\n       * ä¸­é´ä»¶å°è£\n         * ä¸­é´ä»¶å¯¹ä¸å¡æå¡å¨æä¾ SQL å¼å®¹çåè®®ï¼ä¸å¡æå¡å¨æ é¡»èªå·±è¿è¡è¯»ååç¦»ã\n         * å¯¹äºä¸å¡æå¡å¨æ¥è¯´ï¼è®¿é®ä¸­é´ä»¶åè®¿é®æ°æ®åºæ²¡æåºå«ï¼\n           * ç°å¨ MySQL å®æ¹æ¨è MySQL Router\n           * å¥è 360 å¬å¸ä¹å¼æºäºèªå·±çæ°æ®åºä¸­é´ä»¶ Atlasï¼Atlas æ¯åºäº MySQL Proxy å®ç°ç\n\n * ååºåè¡¨\n   \n   * è§ä¸èåå®¹\n\n * æèé¢\n   \n   * æ°æ®åºè¯»ååç¦»ä¸è¬åºç¨äºä»ä¹åºæ¯ï¼è½æ¯æå¤å¤§çä¸å¡è§æ¨¡ï¼\n     * è¯»ååç¦»éç¨åæºå¹¶åæ æ³æ¯æå¹¶ä¸è¯»çè¯·æ±æ´å¤çæå½¢ãå¨åæºæ°æ®åºæåµä¸ï¼è¡¨ä¸å ç´¢å¼ä¸è¬å¯¹æ¥è¯¢æä¼åä½ç¨å´å½±ååå¥éåº¦ï¼è¯»ååç¦»åå¯ä»¥åç¬å¯¹è¯»åºè¿è¡ä¼åï¼ååºä¸åå°ç´¢å¼ï¼å¯¹è¯»åçè½åé½ææåï¼ä¸è¯»çæåæ´å¤ä¸äºã\n     * ä¸éç¨çæåµ:\n       * 1 å¦æå¹¶ååå¥ç¹å«é«ï¼åæºåå¥æ æ³æ¯æï¼å°±ä¸éåè¿ç§æ¨¡å¼ã\n       * 2 éè¿ç¼å­ææ¯æèç¨åºä¼åè½å¤æ»¡è¶³è¦æ±\n\n\n\n\né¡µé¦\n\n\n# 15 | é«æ§è½æ°æ®åºéç¾¤ï¼ååºåè¡¨\n\n * ååºåè¡¨ï¼åå \n   * åä¸ªæ°æ®åºæå¡å¨å­å¨çæ°æ®éä¸è½å¤ªå¤§ã\n     * å½æ°æ®éè¾¾å°åä¸çè³ä¸äº¿æ¡çæ¶åï¼åå°æ°æ®åºæå¡å¨çå­å¨è½åä¼æä¸ºç³»ç»çç¶é¢ï¼ä¸»è¦ä½ç°å¨è¿å ä¸ªæ¹é¢ï¼\n       * æ°æ®éå¤ªå¤§ï¼è¯»åçæ§è½ä¼ä¸éï¼å³ä½¿æç´¢å¼ï¼ç´¢å¼ä¹ä¼åå¾å¾å¤§ï¼ï¼æ§è½åæ ·ä¼ä¸éã\n       * æ°æ®æä»¶ä¼åå¾å¾å¤§ï¼æ°æ®åºå¤ä»½åæ¢å¤éè¦èè´¹å¾é¿æ¶é´\n       * æ°æ®æä»¶è¶å¤§ï¼æç«¯æåµä¸ä¸¢å¤±æ°æ®çé£é©è¶é«ï¼ä¾å¦ï¼æºæ¿ç«ç¾å¯¼è´æ°æ®åºä¸»å¤æºé½åçæéï¼ã\n * ååº\n   * join æä½é®é¢ãäºå¡é®é¢ãææ¬é®é¢\n     * ä¸å¡ååºåï¼åæ¬å¨åä¸ä¸ªæ°æ®åºä¸­çè¡¨åæ£å°ä¸åæ°æ®åºä¸­ï¼å¯¼è´æ æ³ä½¿ç¨ SQL ç join æ¥è¯¢ã\n     * åæ¬å¨åä¸ä¸ªæ°æ®åºä¸­ä¸åçè¡¨å¯ä»¥å¨åä¸ä¸ªäºå¡ä¸­ä¿®æ¹ï¼ä¸å¡ååºåï¼è¡¨åæ£å°ä¸åçæ°æ®åºä¸­ï¼æ æ³éè¿äºå¡ç»ä¸ä¿®æ¹ãè½ç¶æ°æ®åºååæä¾äºä¸äºåå¸å¼äºå¡çè§£å³æ¹æ¡ï¼ä¾å¦ï¼MySQL ç XAï¼ï¼ä½æ§è½å®å¨å¤ªä½ï¼ä¸é«æ§è½å­å¨çç®æ æ¯ç¸è¿èçã\n * åè¡¨\n   * åç´åè¡¨\n     * åç´åè¡¨å¼å¥çå¤ææ§ä¸»è¦ä½ç°å¨è¡¨æä½çæ°éè¦å¢å ãåæ¥åªè¦ä¸æ¬¡æ¥è¯¢å°±å¯ä»¥çï¼ç°å¨è¦ä¸¤æ¬¡æèå¤æ¬¡æ¥è¯¢ã\n   * æ°´å¹³åè¡¨\n     * è·¯ç±ãjoinæä½ãcount()æä½ãorder by()æä½\n * å®ç°\n   * ååºåè¡¨å·ä½çå®ç°æ¹å¼ä¹æ¯âç¨åºä»£ç å°è£âåâä¸­é´ä»¶å°è£âï¼ä½å®ç°ä¼æ´å¤æã\n     * è¯»ååç¦»å®ç°æ¶åªè¦è¯å« SQL æä½æ¯è¯»æä½è¿æ¯åæä½ï¼éè¿ç®åçå¤æ­ SELECTãUPDATEãINSERTãDELETE å ä¸ªå³é®å­å°±å¯ä»¥åå°\n     * ååºåè¡¨çå®ç°é¤äºè¦å¤æ­æä½ç±»åå¤ï¼è¿è¦å¤æ­ SQL ä¸­å·ä½éè¦æä½çè¡¨ãæä½å½æ°ï¼ä¾å¦ count å½æ°)ãorder byãgroup by æä½ç­ï¼ç¶ååæ ¹æ®ä¸åçæä½è¿è¡ä¸åçå¤çã\n * æèé¢\n   * ä½ è®¤ä¸ºä»ä¹æ¶åå¼å¥ååºåè¡¨æ¯åéçï¼æ¯æ°æ®åºæ§è½ä¸å¤çæ¶åå°±å¼å§ååºåè¡¨ä¹ï¼\n * utility\n   * å¦æä½¿ç¨hashè¿è¡åè¡¨çè¯ï¼ä¸ºä»ä¹å¤§å¤æ¹æ¡æ¨è2çnæ¬¡æ¹ä½ä¸ºè¡¨çæ»æ°ï¼é¤äºæ¶ç¼©å®¹æè¿æä»ä¹å¥½å¤åï¼\n     * è¿ä¸ªæ¯hashå½æ°å®ç°çä¸ä¸ªæå·§ï¼å½è®¡ç®hashå¼çæ¶åï¼æ®éåæ³æ¯åä½æä½ï¼ä¾å¦h%lenï¼ä½å¦ælenæ¯2çNæ¬¡æ¹ï¼éè¿ä½æä½æ§è½æ´é«ï¼è®¡ç®æ¹å¼ä¸ºh & (len-1)\n   * éå¯¹mysqlï¼åç°å¦æå­æ®µæblobçå­æ®µï¼select ä¸åè¿ä¸ªå­æ®µï¼ååè¿ä¸ªå­æ®µï¼æçå·®å¼å¾å¤§ï¼è¿ä¸ªæ¯ä»ä¹åå ï¼\n     * blobçå­æ®µæ¯åè¡æ°æ®åå¼å­å¨çï¼èä¸ç£çä¸å¹¶ä¸æ¯è¿ç»­çï¼å æ­¤select blobå­æ®µä¼è®©ç£çè¿å¥éæºIOæ¨¡å¼\n\n\n\n\né¡µé¦\n\n\n# 16 | é«æ§è½NoSQL\n\n * NoSQL\n   * NoSQL != No SQLï¼èæ¯ NoSQL = Not Only SQL\n   * æ¬è´¨ä¸æ¯çºç² ACID ä¸­çæä¸ªæèæå ä¸ªç¹æ§ï¼å æ­¤æä»¬ä¸è½ç²ç®å°è¿·ä¿¡ NoSQL æ¯é¶å¼¹ï¼èåºè¯¥å° NoSQL ä½ä¸º SQL çä¸ä¸ªæåè¡¥åï¼\n * å¸¸è§ç NoSQL æ¹æ¡åä¸º 4 ç±»\n   * K-V å­å¨ï¼è§£å³å³ç³»æ°æ®åºæ æ³å­å¨æ°æ®ç»æçé®é¢ï¼ä»¥ Redis ä¸ºä»£è¡¨ã\n   * ææ¡£æ°æ®åºï¼è§£å³å³ç³»æ°æ®åºå¼º schema çº¦æçé®é¢ï¼ä»¥ MongoDB ä¸ºä»£è¡¨ã\n   * åå¼æ°æ®åºï¼è§£å³å³ç³»æ°æ®åºå¤§æ°æ®åºæ¯ä¸ç I/O é®é¢ï¼ä»¥ HBase ä¸ºä»£è¡¨ã\n   * å¨ææç´¢å¼æï¼è§£å³å³ç³»æ°æ®åºçå¨ææç´¢æ§è½é®é¢ï¼ä»¥ Elasticsearch ä¸ºä»£è¡¨ã\n     * ä¼ ç»çå³ç³»åæ°æ®åºéè¿ç´¢å¼æ¥è¾¾å°å¿«éæ¥è¯¢çç®çï¼ä½æ¯å¨å¨ææç´¢çä¸å¡åºæ¯ä¸ï¼ç´¢å¼ä¹æ è½ä¸ºåï¼ä¸»è¦ä½ç°å¨ï¼\n       * å¨ææç´¢çæ¡ä»¶å¯ä»¥éææåç»åï¼å¦æéè¿ç´¢å¼æ¥æ»¡è¶³ï¼åç´¢å¼çæ°éä¼éå¸¸å¤ã\n       * å¨ææç´¢çæ¨¡ç³å¹éæ¹å¼ï¼ç´¢å¼æ æ³æ»¡è¶³ï¼åªè½ç¨ like æ¥è¯¢ï¼like æ¥è¯¢æ¯æ´è¡¨æ«æï¼æçéå¸¸ä½ã\n\n\n\n\né¡µé¦\n\n\n# 17 | é«æ§è½ç¼å­æ¶æ\n\n * ç¼å­ç³»ç»\n   * ç¼å­ç©¿é: æ¥è¯¢ä¸å®ä¸å­å¨çæ°æ®æ¶, æ¥è¯¢åæºdbãæµéå¤§(å¤§éçä¸å­å¨æ°æ®è¯·æ±)æ¶dbè¢«åå®\n     * å¸éè¿æ»¤å¨ãç¼å­ç©ºå¼(çå½å¨æç­)\n   * ç¼å­å»ç©¿ï¼ç¼å­ä¸ç§éå¸¸âç­ç¹âçæ°æ®ï¼å¨æä¸ªæ¶é´ç¹è¿æçæ¶åï¼æ°å¥½å¨è¿ä¸ªæ¶é´ç¹å¯¹è¿ä¸ªKeyæå¤§éçå¹¶åè¯·æ±è¿æ¥ï¼ç¬é´æåç«¯DBåå®\n     * äºæ¥é(mutex key)ãä¸è¿æ(ä½åå°å¤çº¿ç¨å·æ°)\n   * ç¼å­éªå´©ï¼è®¾ç½®ç¼å­æ¶éç¨äºç¸åçè¿ææ¶é´ï¼å¯¼è´ç¼å­å¨æä¸æ¶å»åæ¶å¤±æï¼è¯·æ±å¨é¨è½¬åå°DBï¼DBç¬æ¶ååè¿ééªå´©\n     * å¤å¯æ¬ï¼å¹¶ä¸æ¯ä¸ªå¯æ¬è®¾ç½®ä¸åçè¿ææ¶é´(å¨æå®èå´åéæº)\n     * åkeyç­ç¥ï¼è¦ç¼å­çkeyè¿ææ¶é´æ¯tï¼key1æ²¡æè¿ææ¶é´ãå½è¯»åä¸å°keyæ¶å°±è¿åkey1çåå®¹ï¼ç¶åè§¦åä¸ä¸ªåæ¶æ´æ°keyåkey1çäºä»¶\n * ç¼å­çæ´æ°\n   * 1. åæ­¥å·æ°ç¼å­ï¼å½æ´æ°äºæäºä¿¡æ¯åï¼ç«å»è®©ç¼å­å¤±æã\n     * è¿ç§åæ³çä¼ç¹æ¯ç¨æ·ä½éªå¥½ï¼ç¼ºç¹æ¯ä¿®æ¹ä¸ä¸ªæ°æ®å¯è½éè¦è®©å¾å¤ç¼å­å¤±æ\n   * 2. éå½å®¹å¿ä¸ä¸è´ï¼ä¾å¦æä¸çååå°±æ¯è¿æ ·ï¼ææ¥è¯¢çæ¶åæ¾ç¤ºæè´§ï¼ä¸åçæ¶åæç¤ºææ²¡è´§äº\n   * 3. å³é®ä¿¡æ¯ä¸ç¼å­ï¼åºå­ï¼ä»·æ ¼ç­ä¸ç¼å­ï¼å ä¸ºè¿ç±»ä¿¡æ¯æ¥è¯¢ç®åï¼æçé«ï¼å³ç³»æ°æ®åºæ¥è¯¢æ§è½ä¹å¾é«\n * æèé¢\n   * åäº«ä¸ä¸ä½ æå¨çä¸å¡åçè¿åªäºå ä¸ºç¼å­å¯¼è´ççº¿ä¸é®é¢ï¼éåäºä»ä¹æ ·çè§£å³æ¹æ¡ï¼ææå¦ä½ï¼\n\n\n\n\né¡µé¦\n\n\n# 18 | åæå¡å¨é«æ§è½æ¨¡å¼ï¼PPCä¸TPC\n\n * åæå¡å¨é«æ§è½æ¨¡å¼ï¼PPC ä¸ TPC\n   * PPC æ¯ Process Per Connection çç¼©åï¼å¶å«ä¹æ¯ææ¯æ¬¡ææ°çè¿æ¥å°±æ°å»ºä¸ä¸ªè¿ç¨å»ä¸é¨å¤çè¿ä¸ªè¿æ¥çè¯·æ±ï¼è¿æ¯ä¼ ç»ç UNIX ç½ç»æå¡å¨æéç¨çæ¨¡åã\n     * ä¸è¬æåµä¸ï¼PPC æ¹æ¡è½å¤ççå¹¶åè¿æ¥æ°éæå¤§ä¹å°±å ç¾ã\n   * TPC æ¯ Thread Per Connection çç¼©åï¼å¶å«ä¹æ¯ææ¯æ¬¡ææ°çè¿æ¥å°±æ°å»ºä¸ä¸ªçº¿ç¨å»ä¸é¨å¤çè¿ä¸ªè¿æ¥çè¯·æ±ã\n * ä¸ºä»ä¹è¯´é¨æ·ç½ç«æ¯æµ·éè¿æ¥å¸¸éè¯·æ±çæåµï¼\n   * æµ·éè¿æ¥ï¼è¿æ¥çç¨æ·å¾å¤\n   * å¸¸éè¯·æ±ï¼æ¯ä¸ªç¨æ·è¯·æ±æ°éä¸å¤ï¼å¤§é¨åé½æ¯çå®ä¸ç¯æç« åå»ç¹å»å¦å¤çæç« \n * æèé¢\n   * ä»ä¹æ ·çç³»ç»æ¯è¾éåæ¬ææè®²çé«æ§è½æ¨¡å¼ï¼åå æ¯ä»ä¹ï¼\n     * å¸¸éè¿æ¥å¸¸éè¯·æ±ï¼ä¾å¦åé¨è¿è¥ç³»ç»ï¼ç®¡çç³»ç»\n\n\n\n\né¡µé¦\n\n\n# 19 | åæå¡å¨é«æ§è½æ¨¡å¼ï¼Reactorä¸Proactor\n\n * Reactorä¸Proactor\n   * IOæä½åä¸¤ä¸ªé¶æ®µ\n     * 1ãç­å¾æ°æ®åå¤å¥½(è¯»å°åæ ¸ç¼å­)\n     * 2ãå°æ°æ®ä»åæ ¸è¯»å°ç¨æ·ç©ºé´(è¿ç¨ç©ºé´)\n     * ä¸è¬æ¥è¯´1è±è´¹çæ¶é´è¿è¿å¤§äº2\n   * 1ä¸é»å¡2ä¸ä¹é»å¡çæ¯åæ­¥é»å¡IO\n   * 1ä¸éé»å¡2é»å¡çæ¯åæ­¥éé»å¡IOï¼è¿è®²è¯´çReactorå°±æ¯è¿ç§æ¨¡å\n   * 1ä¸éé»å¡2ä¸éé»å¡æ¯å¼æ­¥éé»å¡IOï¼è¿è®²è¯´çProactoræ¨¡åå°±æ¯è¿ç§æ¨¡å\n\n\n\n\né¡µé¦\n\n\n# 20 | é«æ§è½è´è½½åè¡¡ï¼åç±»åæ¶æ\n\n * é«æ§è½éç¾¤çå¤ææ§ä¸»è¦ä½ç°å¨:\n   * éè¦å¢å ä¸ä¸ªä»»å¡åéå¨ï¼ä»¥åä¸ºä»»å¡éæ©ä¸ä¸ªåéçä»»å¡åéç®æ³ã\n * è´è½½åè¡¡åç±»ï¼å¸¸è§çè´è½½åè¡¡ç³»ç»åæ¬ 3 ç§ï¼\n   * DNS è´è½½åè¡¡\n   * ç¡¬ä»¶è´è½½åè¡¡\n     * ç®åä¸çå¸åçç¡¬ä»¶è´è½½åè¡¡è®¾å¤æä¸¤æ¬¾ï¼F5 å A10ã\n     * ä¼ç¹\n       * åè½å¼ºå¤§ï¼å¨é¢æ¯æåå±çº§çè´è½½åè¡¡ï¼æ¯æå¨é¢çè´è½½åè¡¡ç®æ³ï¼æ¯æå¨å±è´è½½åè¡¡\n       * æ§è½å¼ºå¤§ï¼è½¯ä»¶è´è½½åè¡¡æ¯æå° 10 ä¸çº§å¹¶åå·²ç»å¾åå®³äºï¼ç¡¬ä»¶è´è½½åè¡¡å¯ä»¥æ¯æ 100 ä¸ä»¥ä¸çå¹¶åã\n       * ç¨³å®æ§é«ï¼\n       * æ¯æå®å¨é²æ¤ï¼\n     * ç¼ºç¹: è´µãæ©å±è½åå·®(å¯ä»¥éç½®ä½æ æ³å®å¶)\n   * è½¯ä»¶è´è½½åè¡¡ã\n     * å¸¸è§çæ Nginx å LVSãHaproxyï¼å¶ä¸­ Nginx æ¯è½¯ä»¶çç 7 å±è´è½½åè¡¡ï¼LVS æ¯ Linux åæ ¸ç 4 å±è´è½½åè¡¡\n       * Ngxin çæ§è½æ¯ä¸çº§ï¼ä¸è¬ç Linux æå¡å¨ä¸è£ä¸ä¸ªNginx å¤§æ¦è½å° 5 ä¸ / ç§ï¼LVS çæ§è½æ¯åä¸çº§ï¼æ®è¯´å¯è¾¾å° 80 ä¸ / ç§ï¼è F5 æ§è½æ¯ç¾ä¸çº§\n     * ä¼ç¹ï¼ç®åãä¾¿å®ãçµæ´»\n     * ç¼ºç¹ï¼æ§è½ä¸è¬\n * ç»åçåºæ¬ååä¸ºï¼\n   * DNS è´è½½åè¡¡ç¨äºå®ç°å°ççº§å«çè´è½½åè¡¡ï¼ç¡¬ä»¶è´è½½åè¡¡ç¨äºå®ç°éç¾¤çº§å«çè´è½½åè¡¡ï¼è½¯ä»¶è´è½½åè¡¡ç¨äºå®ç°æºå¨çº§å«çè´è½½åè¡¡ã\n * æèé¢\n   * åè®¾ä½ æ¥è®¾è®¡ä¸ä¸ªæ¥æ´»è·ç¨æ· 1000 ä¸çè®ºåçè´è½½åè¡¡éç¾¤ï¼ä½ çæ¹æ¡æ¯ä»ä¹ï¼è®¾è®¡çç±æ¯ä»ä¹ï¼\n     * dau --\x3e 10h/day + åç¨æ·è¯·æ± --\x3e qpsãtps --\x3e å³°å¼ ~ qps * (3-5) --\x3e ä»¥å³°å¼æ¥è®¾è®¡\n\n\n\n\né¡µé¦\n\n\n# 21 | é«æ§è½è´è½½åè¡¡ï¼ç®æ³\n\n * è´è½½åè¡¡ç®æ³ï¼\n   * è½®è¯¢\n   * å æè½®è¯¢\n     * è§£å³ä¸åæå¡å¨å¤çè½åæå·®å¼çé®é¢\n   * è´è½½æä½ä¼å\n     * ç«å¨æå¡å¨çè§åº¦æ¥è¿è¡åéç\n   * æ§è½æé«ä¼å\n     * ç«å¨å®¢æ·ç«¯çè§åº¦æ¥è¿è¡åéç\n * æèé¢\n   * å¾®ä¿¡æ¢çº¢åçé«å¹¶åæ¶æï¼åºè¯¥éåä»ä¹æ ·çè´è½½åè¡¡ç®æ³ï¼è°è°ä½ çåæåçè§£\n\n\n\n\né¡µé¦\n\n\n# 22 | æ³æä¸ºæ¶æå¸ï¼ä½ å¿é¡»ç¥éCAPçè®º\n\n * CAP\n   \n   * ConsistencyãAvailabilityãPartition Tolerance\n     * å¯¹æä¸ªæå®çå®¢æ·ç«¯æ¥è¯´ï¼è¯»æä½ä¿è¯è½å¤è¿åææ°çåæä½ç»æã\n     * éæéçèç¹å¨åççæ¶é´åè¿ååççååºï¼ä¸æ¯éè¯¯åè¶æ¶çååºï¼\n     * å½åºç°ç½ç»ååºåï¼ç³»ç»è½å¤ç»§ç»­âå±¥è¡èè´£â\n   * éåäºï¼æäºèåæ°æ®å±äº«çåå¸å¼ç³»ç»ãå³æ³¨çæ¯å¯¹æ°æ®çè¯»åæä½\n\n * note\n   \n   * åå¸å¼ç³»ç»çè®ºä¸ä¸å®ä¼å­å¨ Pï¼æä»¥ä¸å¯è½éæ© CA æ¶æï¼åªè½éæ© CP æè AP æ¶æ\n\n * æèé¢\n   \n   * åºäº Paxos ç®æ³æå»ºçåå¸å¼ç³»ç»ï¼å±äº CAP æ¶æä¸­çåªä¸ç§ï¼è°è°ä½ çåæåçè§£ã\n     * paxosç®æ³å®ç°çç³»ç»æ¯cpï¼æ ¹æ®Raftçè®ºææè¿°ï¼å·¥ç¨ä¸ç®åè¿æ²¡æå®å¨å®ç°paxosç®æ³çç³»ç»\n\n\n\n\né¡µé¦\n\n\n# 23 | æ³æä¸ºæ¶æå¸ï¼ä½ å¿é¡»ææ¡çCAPç»è\n\n * CAP å³é®ç»èç¹\n   \n   * CAP å³æ³¨çç²åº¦æ¯æ°æ®ï¼èä¸æ¯æ´ä¸ªç³»ç»ã\n     * C ä¸ A ä¹é´çåèå¯ä»¥å¨åä¸ç³»ç»åä»¥éå¸¸ç»å°çç²åº¦åå¤åçï¼èæ¯ä¸æ¬¡çå³ç­å¯è½å ä¸ºå·ä½çæä½ï¼ä¹è³å ä¸ºçµæ¶å°ç¹å®çæ°æ®æç¨æ·èææä¸åã\n   * CAP æ¯å¿½ç¥ç½ç»å»¶è¿çã\n   * æ­£å¸¸è¿è¡æåµä¸ï¼ä¸å­å¨ CP å AP çéæ©ï¼å¯ä»¥åæ¶æ»¡è¶³ CAã\n     * CAP çè®ºåè¯æä»¬åå¸å¼ç³»ç»åªè½éæ© CP æè APï¼ä½.å¶å®è¿éçåææ¯ç³»ç»åçäºâååºâç°è±¡ãå¦æç³»ç»æ²¡æåçååºç°è±¡ï¼ä¹å°±æ¯è¯´ P ä¸å­å¨çæ¶åï¼èç¹é´çç½ç»è¿æ¥ä¸åæ­£å¸¸ï¼ï¼æä»¬æ²¡æå¿è¦æ¾å¼ C æè Aï¼åºè¯¥ C å A é½å¯ä»¥ä¿è¯ï¼è¿å°±è¦æ±æ¶æè®¾è®¡çæ¶åæ¢è¦èèååºåçæ¶éæ© CP è¿æ¯ APï¼ä¹è¦èèååºæ²¡æåçæ¶å¦ä½ä¿è¯ CAã\n   * æ¾å¼å¹¶ä¸ç­äºä»ä¹é½ä¸åï¼éè¦ä¸ºååºæ¢å¤åååå¤ã\n\n * ACID æ¯æ°æ®åºç®¡çç³»ç»ä¸ºäºä¿è¯äºå¡çæ­£ç¡®æ§èæåºæ¥çä¸ä¸ªçè®ºï¼ACID åå«åä¸ªçº¦æï¼\n   \n   * Atomicityï¼åå­æ§ï¼\n     * ä¸ä¸ªäºå¡ä¸­çæææä½ï¼è¦ä¹å¨é¨å®æï¼è¦ä¹å¨é¨ä¸å®æï¼ä¸ä¼å¨ä¸­é´æä¸ªç¯èç»æ\n   * Consistencyï¼ä¸è´æ§ï¼\n     * å¨äºå¡å¼å§ä¹ååäºå¡ç»æä»¥åï¼æ°æ®åºçå®æ´æ§æ²¡æè¢«ç ´åã\n   * Isolationï¼éç¦»æ§ï¼\n     * æ°æ®åºåè®¸å¤ä¸ªå¹¶åäºå¡åæ¶å¯¹æ°æ®è¿è¡è¯»ååä¿®æ¹çè½åãéç¦»æ§å¯ä»¥é²æ­¢å¤ä¸ªäºå¡å¹¶åæ§è¡æ¶ç±äºäº¤åæ§è¡èå¯¼è´æ°æ®çä¸ä¸è´ãäºå¡éç¦»åä¸ºä¸åçº§å«ï¼åæ¬è¯»æªæäº¤ï¼Read uncommittedï¼ãè¯»æäº¤ï¼read committedï¼ãå¯éå¤è¯»ï¼repeatable readï¼åä¸²è¡åï¼Serializableï¼\n   * Durabilityï¼æä¹æ§ï¼\n     * äºå¡å¤çç»æåï¼å¯¹æ°æ®çä¿®æ¹å°±æ¯æ°¸ä¹çï¼å³ä¾¿ç³»ç»æéä¹ä¸ä¼ä¸¢å¤±ã\n\n * BASE æ ¸å¿ææ³æ¯å³ä½¿æ æ³åå°å¼ºä¸è´æ§ï¼CAP çä¸è´æ§å°±æ¯å¼ºä¸è´æ§ï¼ï¼ä½åºç¨å¯ä»¥éç¨éåçæ¹å¼è¾¾å°æç»ä¸è´æ§ã\n   \n   * BASE æ¯æåºæ¬å¯ç¨ï¼Basically Availableï¼\n     * åå¸å¼ç³»ç»å¨åºç°æéæ¶ï¼åè®¸æå¤±é¨åå¯ç¨æ§ï¼å³ä¿è¯æ ¸å¿å¯ç¨ã\n   * è½¯ç¶æï¼ Soft Stateï¼\n     * åè®¸ç³»ç»å­å¨ä¸­é´ç¶æï¼èè¯¥ä¸­é´ç¶æä¸ä¼å½±åç³»ç»æ´ä½å¯ç¨æ§ãè¿éçä¸­é´ç¶æå°±æ¯ CAP çè®ºä¸­çæ°æ®ä¸ä¸è´ã\n   * æç»ä¸è´æ§ï¼ Eventual Consistencyï¼\n     * ç³»ç»ä¸­çæææ°æ®å¯æ¬ç»è¿ä¸å®æ¶é´åï¼æç»è½å¤è¾¾å°ä¸è´çç¶æã\n   * note\n     * BASE çè®ºæ¬è´¨ä¸æ¯å¯¹ CAP çå»¶ä¼¸åè¡¥åï¼æ´å·ä½å°è¯´ï¼æ¯å¯¹ CAP ä¸­ AP æ¹æ¡çä¸ä¸ªè¡¥åã\n     * BASE çè®ºèèäºå»¶æ¶ï¼è¦æ±å¨ååºæé´çºç²ä¸è´æ§ï¼ä½ååºæéæ¢å¤åï¼ç³»ç»åºè¯¥è¾¾å°æç»ä¸è´æ§æ§\n\n * æèé¢\n   \n   * åå¦ä½ æ¥è®¾è®¡çµåç½ç«çé«å¯ç¨ç³»ç»ï¼æç§ CAP çè®ºçè¦æ±ï¼ä½ ä¼æä¹è®¾è®¡ï¼\n\n\n\n\né¡µé¦\n\n\n# 24 | FMEAæ¹æ³ï¼æé¤æ¶æå¯ç¨æ§éæ£çå©å¨\n\n * FMEA (Failure mode and effects analysis, æéæ¨¡å¼ä¸å½±ååæ)\n   * å¨æ¶æè®¾è®¡é¢åï¼FMEA çå·ä½åææ¹æ³æ¯ï¼\n     * ç»åºåå§çæ¶æè®¾è®¡å¾ã\n     * åè®¾æ¶æä¸­æä¸ªé¨ä»¶åçæéã\n     * åææ­¤æéå¯¹ç³»ç»åè½é æçå½±åã\n     * æ ¹æ®åæç»æï¼å¤æ­æ¶ææ¯å¦éè¦è¿è¡ä¼åã\n * FMEA åæçæ¹æ³å¶å®å¾ç®åï¼å°±æ¯ä¸ä¸ª FMEA åæè¡¨ï¼å¸¸è§ç FMEA åæè¡¨æ ¼åå«ä¸é¢é¨åã\n   * åè½ç¹\n     * æçæ¯ä»ç¨æ·è§åº¦æ¥ççï¼èä¸æ¯ä»ç³»ç»åä¸ªæ¨¡ååè½ç¹ååæ¥çç\n   * æéæ¨¡å¼\n     * æéæ¨¡å¼æçæ¯ç³»ç»ä¼åºç°ä»ä¹æ ·çæéï¼åæ¬æéç¹åæéå½¢å¼ãéè¦ç¹å«æ³¨æçæ¯ï¼è¿éçæéæ¨¡å¼å¹¶ä¸éè¦ç»åºçæ­£çæéåå ï¼ï¼æä»¬åªéè¦åè®¾åºç°æç§æéç°è±¡å³å¯ï¼ä¾å¦ MySQL ååºæ¶é´è¾¾å° 3 ç§ã\n     * æéæ¨¡å¼çæè¿°è¦å°½éç²¾ç¡®ï¼å¤ä½¿ç¨éåæè¿°ï¼é¿åä½¿ç¨æ³åçæè¿°ãä¾å¦ï¼æ¨èä½¿ç¨âMySQL ååºæ¶é´è¾¾å° 3 ç§âï¼èä¸æ¯âMySQL ååºæ¢âã\n   * æéå½±å\n     * å½åçæéæ¨¡å¼ä¸­æè¿°çæéæ¶ï¼åè½ç¹å·ä½ä¼åå°ä»ä¹å½±åãæéå½±åä¹éè¦å°½éåç¡®æè¿°ãä¾å¦ï¼æ¨èä½¿ç¨â20% çç¨æ·æ æ³ç»å½âï¼èä¸æ¯âå¤§é¨åç¨æ·æ æ³ç»å½âã\n   * ä¸¥éç¨åº¦\n     * ä¸¥éç¨åº¦æç«å¨ä¸å¡çè§åº¦æéçå½±åç¨åº¦ï¼ä¸è¬åä¸ºâè´å½ / é« / ä¸­ / ä½ / æ âäºä¸ªæ¡£æ¬¡ãä¸¥éç¨åº¦æç§è¿ä¸ªå¬å¼è¿è¡è¯ä¼°ï¼ä¸¥éç¨åº¦ = åè½ç¹éè¦ç¨åº¦ Ã æéå½±åèå´ Ã åè½ç¹åæç¨åº¦ã\n   * æéåå \n   * æéæ¦ç\n     * è¿éçæ¦çå°±æ¯ææä¸ªå·ä½æéåå åççæ¦çãä¸è¬åä¸ºâé« / ä¸­ / ä½âä¸æ¡£å³å¯\n   * é£é©ç¨åº¦\n     * é£é©ç¨åº¦å°±æ¯ç»¼åä¸¥éç¨åº¦åæéæ¦çæ¥ä¸èµ·å¤æ­æä¸ªæéçæç»ç­çº§ï¼é£é©ç¨åº¦ = ä¸¥éç¨åº¦ Ã æéæ¦çã\n   * å·²ææªæ½\n     * éå¯¹å·ä½çæéåå ï¼ç³»ç»ç°å¨æ¯å¦æä¾äºæäºæªæ½æ¥åºå¯¹ï¼åæ¬ï¼æ£æµåè­¦ãå®¹éãèªæ¢å¤ç­ã\n   * è§é¿æªæ½\n     * è§é¿æªæ½æä¸ºäºéä½æéåçæ¦çèåçä¸äºäºæï¼å¯ä»¥æ¯ææ¯ææ®µï¼ä¹å¯ä»¥æ¯ç®¡çææ®µãä¾å¦ï¼\n       * ææ¯ææ®µï¼ä¸ºäºé¿åæ°å¼å¥ç MongoDB ä¸¢å¤±æ°æ®ï¼å¨å¨ MySQL ä¸­åä½ä¸ä»½ã\n       * ç®¡çææ®µï¼ä¸ºäºéä½ç£çåéçæ¦çï¼å¼ºå¶ç»ä¸æ´æ¢æå¡æ¶é´è¶è¿ 2 å¹´çç£ç\n   * è§£å³æªæ½\n     * è§£å³æªæ½æä¸ºäºè½å¤è§£å³é®é¢èåçä¸äºäºæï¼ä¸è¬é½æ¯ææ¯ææ®µãä¾å¦ï¼\n       * ä¸ºäºè§£å³å¯ç æ´åç ´è§£ï¼å¢å å¯ç éè¯æ¬¡æ°éå¶ã\n       * ä¸ºäºè§£å³æåºå¯¼è´æ°æ®æ³é²ï¼å°æ°æ®åºä¸­çæææ°æ®å å¯ä¿å­ã\n       * ä¸ºäºè§£å³éæ³è®¿é®ï¼å¢å ç½ååæ§å¶ã\n   * åç»­è§å\n * FMEAå®è·µ\n   * åè®¾æä»¬è®¾è®¡ä¸ä¸ªæç®åçç¨æ·ç®¡çç³»ç»ï¼åå«ç»å½åæ³¨åä¸¤ä¸ªä¸¤ä¸ªåè½ï¼å¶åå§æ¶ææ¯ï¼\n     * MySQL è´è´£å­å¨ï¼Memcacheï¼ä»¥ä¸ç®ç§° MCï¼è´è´£ç¼å­ï¼Server è´è´£ä¸å¡å¤çã\n   * FMEA åæåï¼è½å¤æä»ä¹æ ·çåç°ï¼ä¸è¡¨æ¯åæçæ ·ä¾\n   * ç»è¿ä¸è¡¨ç FMEA åæï¼å°âåç»­è§åâåçåå®¹æ±æ»ä¸ä¸ï¼æä»¬æç»å¾å°äºä¸é¢å æ¡éè¦æ¹è¿çæªæ½ï¼\n     * MySQL å¢å å¤æºãMC ä»åæºæ©å±ä¸ºéç¾¤ãMySQL åç½å¡è¿æ¥ã\n * æèé¢ è¯·ä½¿ç¨ FMEA æ¹æ³åæä¸ä¸ HDFS ç³»ç»çæ¶æï¼çç HDFS æ¯å¦ä½åºå¯¹åç§æéçï¼å¹¶ä¸åæä¸ä¸ HDFS æ¯å¦å­å¨é«å¯ç¨é®é¢ã\n\n\n\n\né¡µé¦\n\n\n# 25 | é«å¯ç¨å­å¨æ¶æï¼åæºæ¶æ\n\n * åæºæ¶æï¼åæºå³å¯è§£å³æ°æ®å­å¨æåµä¸ï¼ä¿è¯é«å¯ç¨\n * å¤ææ§ä¸»è¦ä½ç°å¨å¦ä½åºå¯¹å¤å¶å»¶è¿åä¸­æ­å¯¼è´çæ°æ®ä¸ä¸è´é®é¢\n   * æ°æ®å¦ä½å¤å¶ï¼ åä¸ªèç¹çèè´£æ¯ä»ä¹ï¼ å¦ä½åºå¯¹å¤å¶å»¶è¿ å å¤å¶ä¸­æ­ï¼\n * åå»åæ¢ï¼è¦å®ç°ä¸ä¸ªå®åçåæ¢æ¹æ¡ï¼å¿é¡»èèè¿å ä¸ªå³é®çè®¾è®¡ç¹ï¼\n   * ä¸»å¤ç¶æå¤æ­\n     * ç¶æä¼ éçæ¸ é\n     * ç¶ææ£æ¥çåå®¹\n   * åæ¢å³ç­\n   * æ°æ®å²çªè§£å³\n * å¸¸è§æ¶æ:(æ ¹æ®ä¼ éæ¸ éä¸å)\n   * äºèå¼ãä¸­ä»å¼ãæ¨¡æå¼ãä¸»ä¸»å¤å¶\n\n\n\n\né¡µé¦\n\n\n# 26 | é«å¯ç¨å­å¨æ¶æï¼éç¾¤åååº\n\n * æ°æ®éä¸­éç¾¤\n   * ä¸ä¸»å¤å¤ãä¸ä¸»å¤ä»\n   * å¤æåº¦\n     * ä¸»æºå¦ä½å°æ°æ®å¤å¶ç»å¤æº\n       * ä¸»å¤åä¸»ä»æ¶æä¸­ï¼åªæä¸æ¡å¤å¶ééï¼èæ°æ®éä¸­éç¾¤æ¶æä¸­ï¼å­å¨å¤æ¡å¤å¶ééãå¤æ¡å¤å¶ééé¦åä¼å¢å¤§ä¸»æºå¤å¶çååï¼æäºåºæ¯ä¸æä»¬éè¦èèå¦ä½éä½ä¸»æºå¤å¶ååï¼æèéä½ä¸»æºå¤å¶ç»æ­£å¸¸è¯»åå¸¦æ¥çååã\n     * å¤æºå¦ä½æ£æµä¸»æºç¶æ\n       * å¨æ°æ®éä¸­éç¾¤æ¶æä¸­ï¼å¤å°å¤æºé½éè¦å¯¹ä¸»æºç¶æè¿è¡å¤æ­ï¼èä¸åçå¤æºå¤æ­çç»æå¯è½æ¯ä¸åçï¼å¦ä½å¤çä¸åå¤æºå¯¹ä¸»æºç¶æçä¸åå¤æ­ï¼æ¯ä¸ä¸ªå¤æçé®é¢ã\n     * ä¸»æºæéåï¼å¦ä½å³å®æ°çä¸»æº\n       * èå¨æ°æ®éä¸­éç¾¤æ¶æä¸­ï¼æå¤å°å¤æºé½å¯ä»¥åçº§ä¸ºä¸»æºï¼ä½å®éä¸åªè½åè®¸ä¸å°å¤æºåçº§ä¸ºä¸»æºï¼é£ä¹ç©¶ç«éæ©åªä¸å°å¤æºä½ä¸ºæ°çä¸»æºï¼å¤æºä¹é´å¦ä½åè°ï¼è¿ä¹æ¯ä¸ä¸ªå¤æçé®é¢ã\n * æ°æ®åæ£éç¾¤\n   * æ°æ®åæ£éç¾¤æå¤ä¸ªæå¡å¨ç»æä¸ä¸ªéç¾¤ï¼æ¯å°æå¡å¨åä¼å¤ä»½ä¸é¨åæ°æ®ã\n   * å¤æåº¦ï¼åè¡¡ãå®¹éãå¯ä¼¸ç¼©æ§\n * æ°æ®ååº\n   * åé¢æä»¬è®¨è®ºçä¸»è¦èèå½é¨åç¡¬ä»¶å¯è½æåçæåµä¸ç³»ç»åºè¯¥å¦ä½å¤çï¼ä½å¯¹äºä¸äºå½±åéå¸¸å¤§çç¾é¾æèäºææ¥è¯´ï¼æå¯è½ææçç¡¬ä»¶å¨é¨æéãä¾å¦ï¼æ°å¥¥å°è¯æ°´ç¾ãç¾å å¤§åçµï¼è¿æ¶åéè¦åºäºå°ççº§å«çæéæ¥è®¾è®¡é«å¯ç¨æ¶æï¼è¿å°±æ¯æ°æ®ååºæ¶æäº§ççèæ¯ã\n   * æ°æ®ååºçå¤ä»½æ¹å¼ï¼éä¸­å¼å¤ä»½ãäºå¤å¼ãç¬ç«å¼å¤ä»½\n\n\n\n\né¡µé¦\n\n\n# 27 | å¦ä½è®¾è®¡è®¡ç®é«å¯ç¨æ¶æï¼\n\n * å¤æåº¦ï¼ä»»å¡ç®¡ç\n * é«å¯ç¨æ¹å¼\n   * ä¸»ä»ãä¸»å¤ãéç¾¤(å¯¹ç§°éç¾¤ãéå¯¹ç§°éç¾¤)\n\n\n\n\né¡µé¦\n\n\n# 28 | ä¸å¡é«å¯ç¨çä¿éï¼å¼å°å¤æ´»æ¶æ\n\n * å¼å°å¤æ´»æ¶æå¯ä»¥åä¸ºï¼\n   * ååå¼åº\n   * è·¨åå¼å°\n     * å¼å¥äºä¸ä¸ªçä¼¼çç¾çå°æ¹ï¼æ°æ®ä¸ä¸è´ä¸å¡è¯å®ä¸ä¼æ­£å¸¸ï¼ä½è·¨åå¼å°è¯å®ä¼å¯¼è´æ°æ®ä¸ä¸è´ã\n       * éç¹è¿æ¯å¨âæ°æ®âä¸ï¼å³æ ¹æ®æ°æ®çç¹æ§æ¥åä¸åçæ¶æãå¦ææ¯å¼ºä¸è´æ§è¦æ±çæ°æ®ï¼ä¾å¦é¶è¡å­æ¬¾ä½é¢ãæ¯ä»å®ä½é¢ç­ï¼è¿.ç±»æ°æ®å®éä¸æ¯æ æ³åå°è·¨åå¼å°å¤æ´»çã\n   * è·¨å½å¼å°\n     * ä¸ºä¸åå°åºç¨æ·æä¾æå¡\n     * åªè¯»ç±»ä¸å¡åå¤æ´»\n       * ä¾å¦ï¼è°·æ­çæç´¢ä¸å¡ï¼ç±äºç¨æ·æç´¢èµææ¶ï¼è¿äºèµæé½å·²ç»å­å¨äºè°·æ­çæç´¢å¼æä¸é¢ï¼æ è®ºæ¯è®¿é®è±å½è°·æ­ï¼è¿æ¯è®¿é®ç¾å½è°·æ­ï¼æç´¢ç»æåºæ¬ç¸åï¼å¹¶ä¸å¯¹ç¨æ·æ¥è¯´ï¼ä¹ä¸éè¦æç´¢å°ææ°çå®æ¶èµæï¼è·¨å½å¼å°çå ç§éç½ç»å»¶è¿ï¼å¯¹æç´¢ç»ææ¯æ²¡æä»ä¹å½±åçã\n * æèé¢\n   * åè®¾æä»¬åäºåé¢æå°çé«å¯ç¨å­å¨æ¶æä¸­çæ°æ®ååºå¤ä»½ï¼åéè¿èªå¨åè¿ç»´è½å¤ä¿è¯ 1 åéå°±è½å°å¨é¨ç³»ç»æ­£å¸¸å¯å¨ï¼é£æ¯å¦æå³çæ²¡æå¿è¦åå¼å°å¤æ´»äºï¼\n     * å¤ä»½ç³»ç»å¹³å¸¸æ²¡ææµéï¼å¦æç´æ¥ä¸çº¿å¯è½è§¦åå¹³å¸¸æµè¯ä¸å°çæéã\n     * åå®æ¶çç³»ç»ä¹ä¼ææ°æ®å»¶æ¶ï¼å¦ææ¶åå°éèè¿ç§ç³»ç»ï¼ä»ç¶æ¯ä¸æ¢ç´æ¥åæ¢çã\n     * ç³»ç»è¿è¡è¿ç¨ä¸­ä¼æå¾å¤ä¸­é´æ°æ®ï¼ç¼å­æ°æ®ç­ãç³»ç»ä¸ç»è¿é¢ç­ç´æ¥ææµéåè¿æ¥ï¼å¤§æµéä¼ç´æ¥æç³»ç»æå®\n\n\n\n\né¡µé¦\n\n\n# 29 | å¼å°å¤æ´»è®¾è®¡4å¤§æå·§\n\n * æ ¸å¿\n   * éç¨å¤ç§ææ®µï¼ä¿è¯ç»å¤§é¨åç¨æ·çæ ¸å¿ä¸å¡å¼å°å¤æ´»ï¼\n * æå·§\n   * ä¿è¯æ ¸å¿ä¸å¡çå¼å°å¤æ´»\n   * ä¿è¯æ ¸å¿æ°æ®æç»ä¸è´æ§\n     * å æ­¤å¼å°å¤æ´»æ¶æé¢ä¸´ä¸ä¸ªæ æ³å½»åºè§£å³ççç¾ï¼ä¸å¡ä¸è¦æ±æ°æ®å¿«éåæ­¥ï¼ç©çä¸æ­£å¥½åä¸å°æ°æ®å¿«éåæ­¥ï¼å æ­¤æææ°æ®é½å®æ¶åæ­¥ï¼å®éä¸æ¯ä¸ä¸ªæ æ³è¾¾å°çç®æ ã\n       * å°½éåå°å¼å°å¤æ´»æºæ¿çè·ç¦»ï¼æ­å»ºé«éç½ç»\n       * å°½éåå°æ°æ®åæ­¥ï¼åªåæ­¥æ ¸å¿ä¸å¡ç¸å³çæ°æ®\n       * ä¿è¯æç»ä¸è´æ§ï¼ä¸ä¿è¯å®æ¶ä¸è´æ§\n   * éç¨å¤ç§ææ®µåæ­¥æ°æ®\n     * æ°æ®åæ­¥æ¯å¼å°å¤æ´»æ¶æè®¾è®¡çæ ¸å¿ï¼å¹¸è¿çæ¯åºæ¬ä¸å­å¨ç³»ç»æ¬èº«é½ä¼æåæ­¥çåè½ãä¾å¦ï¼MySQL çä¸»å¤å¤å¶ãRedis ç Cluster åè½ãElasticsearch çéç¾¤åè½ãä½ææ¶åä»ä½¿ç¨è¿äºåè½æ¯ä¸å¤çï¼éè¦æå¼æè·¯ã\n   * åªä¿è¯ç»å¤§é¨åç¨æ·çå¼å°å¤æ´»\n\n\n\n\né¡µé¦\n\n\n# 30 | å¼å°å¤æ´»è®¾è®¡4æ­¥èµ°\n\n * ä¸å¡åçº§\n   * æéåºæ ¸å¿çä¸å¡ï¼åªä¸ºæ ¸å¿ä¸å¡è®¾è®¡å¼å°å¤æ´»ï¼éä½æ¹æ¡æ´ä½å¤æåº¦åå®ç°ææ¬ã\n * æ°æ®åç±»\n   * å¯ä¸æ§ãå®æ¶æ§ãæ°æ®éãå¯ä¸¢æ§ãå¯æ¢å¤æ§ã\n * æ°æ®åæ­¥\n   * å­å¨ç³»ç»åæ­¥\n     * å ä¹ä¸»æµçå­å¨ç³»ç»é½ä¼æèªå·±çåæ­¥æ¹æ¡ï¼ç¼ºç¹æ¯è¿ç±»åæ­¥æ¹æ¡é½æ¯éç¨çï¼æ æ³éå¯¹ä¸å¡æ°æ®ç¹ç¹åå®å¶åçæ§å¶ã\n * å¼å¸¸å¤ç\n   * å¤ééåæ­¥\n   * åæ­¥åè®¿é®ç»å\n   * æ¥å¿è®°å½\n   * ç¨æ·è¡¥å¿\n\n\n\n\né¡µé¦\n\n\n# 31 | å¦ä½åºå¯¹æ¥å£çº§çæéï¼\n\n * æ ¸å¿ææ³ï¼ä¼åä¿è¯æ ¸å¿ä¸å¡åä¼åä¿è¯ç»å¤§é¨åç¨æ·\n * åºå¯¹ç­ç¥ï¼éçº§ãçæ­ãéæµãæé\n   * éçº§çç®çæ¯åºå¯¹ç³»ç»èªèº«çæéï¼èçæ­çç®çæ¯åºå¯¹ä¾èµçå¤é¨ç³»ç»æéçæåµ\n   * éæµåæ¯ä»ç¨æ·è®¿é®ååçè§åº¦æ¥èèå¦ä½åºå¯¹æéãéæµæåªåè®¸ç³»ç»è½å¤æ¿åçè®¿é®éè¿æ¥ï¼è¶åºç³»ç»è®¿é®è½åçè¯·æ±å°è¢«ä¸¢å¼ã\n * æèé¢\n   * å¦æä½ æ¥è®¾è®¡ä¸ä¸ªæ´ç¹ééç§æç³»ç»ï¼åæ¬ç»å½ãæ¢è´­ãæ¯ä»ï¼ä¾èµæ¯ä»å®ï¼ç­åè½ï¼ä½ ä¼å¦ä½è®¾è®¡æ¥å£çº§çæéåºå¯¹ææ®µï¼\n\n\n\n\né¡µé¦\n\n\n# 32 | å¯æ©å±æ¶æçåºæ¬ææ³åæ¨¡å¼\n\n * æ¶æå¯æ©å±æ¨¡å¼ï¼åæ¬åå±æ¶æãSOA æ¶æãå¾®æå¡åå¾®åæ ¸ç­\n   * å¦ä½é¿åæ©å±æ¶æ¹å¨èå´å¤ªå¤§ï¼æ¯è½¯ä»¶æ¶æå¯æ©å±æ§è®¾è®¡çä¸»è¦æèç¹\n * å¯æ©å±æ¨¡å¼çæ ¸å¿å°±æ¯æåï¼å¸¸è§çæåæè·¯æå¦ä¸ä¸ç§ã\n   * é¢åæµç¨æåï¼å°æ´ä¸ªä¸å¡æµç¨æåä¸ºå ä¸ªé¶æ®µï¼æ¯ä¸ªé¶æ®µä½ä¸ºä¸é¨åãåå±æ¶æã\n   * é¢åæå¡æåï¼å°ç³»ç»æä¾çæå¡æåï¼æ¯ä¸ªæå¡ä½ä¸ºä¸é¨åãSOAãå¾®æå¡ã\n   * é¢ååè½æåï¼å°ç³»ç»æä¾çåè½æåï¼æ¯ä¸ªåè½ä½ä¸ºä¸é¨åãå¾®åæ ¸æ¶æã\n\n\n\n\né¡µé¦\n\n\n# 33 | ä¼ ç»çå¯æ©å±æ¶ææ¨¡å¼ï¼åå±æ¶æåSOA\n\n * åå±æ¶æ\n   * ä¾å¦ï¼C/S æ¶æãB/S æ¶æï¼å¸¸è§çæ¯ 3 å±æ¶æï¼ä¾å¦ï¼ï¼MVCãMVP æ¶æï¼\n   * åå±æ¶æè®¾è®¡ææ ¸å¿çä¸ç¹å°±æ¯éè¦ä¿è¯åå±ä¹é´çå·®å¼è¶³å¤æ¸æ°ï¼è¾¹çè¶³å¤ææ¾\n   * åå±æ¶æä¹æä»¥è½å¤è¾å¥½å°æ¯æç³»ç»æ©å±ï¼æ¬è´¨å¨äºéç¦»å³æ³¨ç¹ï¼separation of concernsï¼ï¼å³æ¯ä¸ªå±ä¸­çç»ä»¶åªä¼å¤çæ¬å±çé»è¾ã\n   * åå±æ¶è¦ä¿è¯å±ä¸å±ä¹é´çä¾èµæ¯ç¨³å®çï¼æè½çæ­£æ¯æå¿«éæ©å±\n * SOA(Service Oriented Architecture)\n   * ä¸è¦ç´ ï¼æå¡ãESB(Enterprise Service Bus)ãæ¾è¦å\n   * SOA ä½¿ç¨ ESB æ¥å±è½å¼æç³»ç»å¯¹å¤æä¾åç§ä¸åçæ¥å£æ¹å¼ï¼ä»¥æ­¤æ¥è¾¾å°æå¡é´é«æçäºèäºéã\n   * SOA æ´å¤æ¯å¨ä¼ ç»ä¼ä¸ï¼ä¾å¦ï¼å¶é ä¸ãéèä¸ç­ï¼è½å°åæ¨å¹¿ï¼å¨äºèç½è¡ä¸å¹¶æ²¡æå¤§è§æ¨¡å°å®è·µåæ¨å¹¿ã\n     * SOA è§£å³äºä¼ ç» IT ç³»ç»éå¤å»ºè®¾åæ©å±æçä½çé®é¢ï¼ä½å¶æ¬èº«ä¹å¼å¥äºæ´å¤çå¤ææ§ãSOA æå¹¿ä¸ºäººè¯ççå°±æ¯ ESBï¼ESB éè¦å®ç°ä¸åç§ç³»ç»é´çåè®®è½¬æ¢ãæ°æ®è½¬æ¢ãéæçå¨æè·¯ç±ç­åè½ãesbéä¸­åçç®¡çå¸¦æ¥äºæ§è½ä¸ä½³ï¼åéç­é®é¢ã\n     * æ³ä¸ä¸ SOA çæåºèæ¯å°±å¯ä»¥åç°ï¼ä¼ä¸å¨åºç¨ SOA æ¶æ¶ï¼åç§å¼æç IT ç³»ç»é½å·²ç»å­å¨å¾å¤å¹´äºï¼å®å¨éåæèæç§ç»ä¸æ åè¿è¡æ¹é çææ¬æ¯éå¸¸å¤§çï¼åªè½éè¿ ESB æ¹å¼å»ééå·²ç»å­å¨çåç§å¼æç³»ç»ã\n * æèé¢\n   * ä¸ºä»ä¹äºèç½ä¼ä¸å¾å°éç¨ SOA æ¶æï¼\n\n\n\n\né¡µé¦\n\n\n# 34 | æ·±å¥çè§£å¾®æå¡æ¶æï¼é¶å¼¹ or ç¦æ²¹åï¼\n\n * SOA åå¾®æå¡å¯¹æ¯ï¼\n   * ä»ä»¥ä¸å æ¹é¢èèï¼æå¡ç²åº¦ãæå¡éä¿¡ãåºç¨åºæ¯\n * å¾®æå¡é·é±\n   * æå¡ååè¿ç»ï¼æå¡é´å³ç³»å¤æ\n   * æå¡æ°éå¤ªå¤ï¼å¢éæçæ¥å§ä¸é\n   * è°ç¨é¾å¤ªé¿ï¼æ§è½ä¸é\n   * è°ç¨é¾å¤ªé¿ï¼é®é¢å®ä½å°é¾\n   * æ²¡æèªå¨åæ¯æï¼æ æ³å¿«éäº¤ä»\n   * æ²¡ææå¡æ²»çï¼å¾®æå¡æ°éå¤äºåç®¡çæ··ä¹±\n     * ä¸»è¦è¡¨ç°å¨ï¼æå¡è·¯ç±ãæå¡æééç¦»ãæå¡æ³¨åååç°\n\n\n\n\né¡µé¦\n\n\n# 35 | å¾®æå¡æ¶ææä½³å®è·µ - æ¹æ³ç¯\n\n * æå¡ç²åº¦\n   * ä¸è¬æ¥è¯´ï¼3ä¸ªäººå¼åä¸ä¸ªæå¡ä¸ºä½³ï¼æ¢è½å¤å½¢æææçè®¨è®ºãä¹å¯ä»¥å½¢æä¸ä¸ªç¨³å®çå¢éå¤ä»½\n   * åºäºä¸è¿°ç­ç¥ï¼è®¡ç®åºæåååéçæå¡æ°é\n * æåæ¹æ³\n   * åºäºä¸å¡é»è¾æå\n   * åºäºå¯æ©å±æå\n     * æåæç¨³å®æå¡ååå¨æå¡ï¼å¯ä»¥æåé¡¹ç®å¿«éè¿­ä»£çæçï¼é¿åå¨å¼åçæ¶åï¼ä¸å°å¿å½±åäºå·²æçæçåè½å¯¼è´çº¿ä¸é®é¢ã\n   * åºäºå¯é æ§æå\n     * é¿åéæ ¸å¿æå¡æéå½±åæ ¸å¿æå¡\n     * æ ¸å¿æå¡é«å¯ç¨æ¹æ¡å¯ä»¥æ´ç®å\n     * è½å¤éä½é«å¯ç¨ææ¬\n   * åºäºæ§è½æå\n * åºç¡è®¾æ½ ![å¾®æå¡åºç¡è®¾æ½](./rsc/arch_meshsrv_ infrastructure.png)\n * æèé¢\n   * åèæç« ä¸­æå°çæ¹æ³ï¼æèä¸ä¸ä½ æå¨çä¸å¡å¾®æå¡æ¶ææ¯å¦è¿æå¯ä»¥æ¹è¿åæåçç©ºé´ï¼\n\n\n\n\né¡µé¦\n\n\n# 36 | å¾®æå¡æ¶ææä½³å®è·µ - åºç¡è®¾æ½ç¯\n\n * åºç¡è®¾æ½\n   * èªå¨åæµè¯\n     * æ¶µççèå´åæ¬ä»£ç çº§çååæµè¯ãåä¸ªç³»ç»çº§çéææµè¯ãç³»ç»é´çæ¥å£æµè¯ï¼ç³»ç»é´çæ¥å£æµè¯æ¯åºç¡ä¿éã\n   * éç½®ä¸­å¿\n   * æ¥å£æ¡æ¶\n     * å¾®æå¡æå¡è½»éçº§çéä¿¡æ¹å¼ï¼ä¸è¬éç¨ HTTP/REST æè RPC æ¹å¼ç»ä¸æ¥å£åè®®ãä½å¨å®è·µè¿ç¨ä¸­ï¼åç»ä¸æ¥å£åè®®è¿ä¸å¤ï¼è¿éè¦ç»ä¸æ¥å£ä¼ éçæ°æ®æ ¼å¼ã\n   * APIç½å³\n     * API ç½å³æ¯å¤é¨ç³»ç»è®¿é®çæ¥å£ï¼ææçå¤é¨ç³»ç»æ¥â¼ç³»ç»é½éè¦éè¿ API ç½å³ï¼ä¸»è¦åæ¬æ¥å¥é´æï¼æ¯å¦åè®¸æ¥å¥ï¼ãæéæ§å¶ï¼å¯ä»¥è®¿é®åªäºåè½ï¼ãä¼ è¾å å¯ãè¯·æ±è·¯ç±ãæµéæ§å¶ç­åè½ã\n   * æå¡åç°\n   * æå¡å®¹é\n     * å¸¸è§çæå¡å®¹éåæ¬è¯·æ±éè¯ãæµæ§åæå¡éç¦»ãéå¸¸æåµä¸ï¼æå¡å®¹éä¼éæå¨æå¡åç°åæå¡è·¯ç±ç³»ç»ä¸­ã\n   * æå¡çæ§\n     * å¾®æå¡èç¹çº§ççæ§åä¿¡æ¯æ¶é\n   * æå¡è¿½è¸ª\n     * æå¡å®æ´æµç¨è·è¸ªåæ\n     * ç»å¤§é¨åè¯·æ±è·è¸ªçå®ç°ææ¯é½åºäº Google ç Dapper è®ºæãDapper, a Large-Scale Distributed Systems Tracing Infrastructureãã\n   * æå¡å®å¨\n * æèé¢\n   * ç»ä½ ä¸ä¸ªç± 10 ä½ Java é«çº§è½¯ä»¶å·¥ç¨å¸ç»æçå¼åå¢éï¼éç¨èªç çæ¹å¼ï¼å®æææçå¾®æå¡åºç¡è®¾æ½å¼åï¼ä½ é¢æµéè¦å¤é¿æ¶é´ï¼çç±æ¯ä»ä¹å¢ï¼\n\n\n\n\né¡µé¦\n\n\n# 37 | å¾®åæ ¸æ¶æè¯¦è§£\n\n * å¾®åæ ¸æ¶æï¼Microkernel Architectureï¼ï¼ä¹è¢«ç§°ä¸ºæä»¶åæ¶æï¼Plug-in Architectureï¼ï¼æ¯ä¸ç§é¢ååè½è¿è¡æåçå¯æ©å±æ§æ¶æ\n * å¾®åæ ¸æ¶æåå«ä¸¤ç±»ç»ä»¶ï¼æ ¸å¿ç³»ç»ï¼core systemï¼åæä»¶æ¨¡åï¼plug-in modulesï¼\n   * å³é®ææ¯æï¼æä»¶ç®¡çãæä»¶è¿æ¥åæä»¶éä¿¡\n     * æä»¶è¿æ¥ææä»¶å¦ä½è¿æ¥å°æ ¸å¿ç³»ç»ãéå¸¸æ¥è¯´ï¼æ ¸å¿ç³»ç»å¿é¡»å¶å®æä»¶åæ ¸å¿ç³»ç»çè¿æ¥è§èï¼ç¶åæä»¶æç§è§èå®ç°ï¼æ ¸å¿ç³»ç»æç§è§èå è½½å³å¯ã\n * å¸¸è§çä¸¤ç§å¾®åæ ¸å·ä½å®ç°ï¼\n   * OSGi Open Services Gateway initiative æ¯ä¸ä¸ªæä»¶åçæ å\n   * è§åå¼æ\n     * æ§è¡å¼æè§£æéç½®å¥½çä¸å¡æµï¼æ§è¡å¶ä¸­çæ¡ä»¶åè§åï¼éè¿è¿ç§æ¹å¼æ¥æ¯æä¸å¡ççµæ´»å¤åãå¦ï¼Esperï¼Drools\n     * ä¸è¬æµç¨ï¼\n       * å¼åäººåå°ä¸å¡åè½åè§£æç¼ä¸ºå¤ä¸ªè§åï¼å°è§åä¿å­å¨è§ååºä¸­\n       * ä¸å¡äººåæ ¹æ®ä¸å¡éè¦ï¼éè¿å°è§åæåç»åï¼éç½®æä¸å¡æµç¨ï¼ä¿å­å¨ä¸å¡åºä¸­ã\n       * è§åå¼ææ§è¡ä¸å¡æµç¨å®ç°ä¸å¡åè½ã\n\n\n\n\né¡µé¦\n\n\n# 38 | æ¶æå¸åºè¯¥å¦ä½å¤æ­ææ¯æ¼è¿çæ¹åï¼\n\n * ææ¯æ¼è¿çæ¨¡å¼: åºäºä¸å¡åå±é¶æ®µè¿è¡å¤æ­\n * ææ¯åæ°ä¼æ¨å¨ä¸å¡åå±ï¼èä¸å¡åå±ä¹ä¼é¼è¿«ææ¯è¿æ­¥\n * reference\n   * <æ·å®ææ¯åå¹´>\n\n\n\n\né¡µé¦\n\n\n# 39 | äºèç½ææ¯æ¼è¿çæ¨¡å¼\n\n * äºèç½ä¸å¡åå±ä¸è¬åä¸ºå ä¸ªæ¶æ(ä¸åæ¶æçå·®å«ä¸»è¦ä½ç°å¨ä¸¤ä¸ªæ¹é¢ï¼å¤ææ§ãç¨æ·è§æ¨¡)ï¼\n   * ååæã\n     * äºèç½ä¸å¡åå¼å§ä¸è¬é½æ¯ä¸ä¸ªåæ°çä¸å¡ç¹ï¼è¿ä¸ªä¸å¡ç¹çéç¹ä¸å¨äºâå®åâï¼èå¨äºâåæ°âï¼åªæåæ°æè½å¸å¼ç¨æ·ï¼ååæçä¸å¡å¯¹ææ¯å°±ä¸ä¸ªè¦æ±ï¼âå¿«âï¼è½ä¹°å°±ä¹°ï¼æå¼æºçå°±ç¨å¼æºçã\n   * åå±æã\n     * å½ä¸å¡æ¨åºåç»è¿å¸åºéªè¯å¦ææ¯å¯è¡çï¼åå¸å¼çç¨æ·å°±ä¼è¶æ¥è¶å¤ï¼æ­¤æ¶åæ¥ä¸å®åçä¸å¡å°±è¿å¥äºä¸ä¸ªå¿«éåå±çæ¶æã\n     * å æ­¤ä¼æè¶æ¥è¶å¤çæ°åè½ä¸æ­å°å å¥å°ç³»ç»ä¸­ãä¸è¬ä¼æä»¥ä¸å ä¸ªé¶æ®µï¼å åè½æãä¼åæãæ¶ææ\n   * ç«äºæ\n     * å½ä¸å¡ç»§ç»­åå±ï¼å·²ç»å½¢æä¸å®è§æ¨¡åï¼ä¸å®ä¼æç«äºå¯¹æå¼å§å å¥è¡ä¸æ¥ç«äºï¼å½ç«äºå¯¹æå å¥åï¼å¤§å®¶äºç¸å­¦ä¹ åæ¨¡ä»¿ï¼ä¸å¡æ´å å®åï¼ä¹ä¸æ­ææ°çä¸å¡åæ°åºæ¥ï¼èä¸ç±äºç«äºçååï¼å¯¹ææ¯çè¦æ±æ¯æ´ä¸ä¸å±æ¥¼äºã\n     * å½ç³»ç»æ°éè¶æ¥è¶å¤ï¼å°äºä¸ä¸ªä¸´çç¹åå°±äº§çäºè´¨åï¼ä¸»è¦ä½ç°å¨ï¼éå¤é è½®å­ãç³»ç»äº¤äºä¸å¢ä¹±ï¼è§£å³æ¹æ¡å¦ä¸ï¼\n       * å¹³å°å: ç®çå¨äºè§£å³âéå¤é è½®å­âçé®é¢ã\n       * æå¡å: ç®çå¨äºè§£å³âç³»ç»äº¤äºâçé®é¢ï¼å¸¸è§çåæ³æ¯éè¿æ¶æ¯éåæ¥å®æç³»ç»é´çå¼æ­¥éç¥ï¼éè¿æå¡æ¡æ¶æ¥å®æç³»ç»é´åæ­¥è°ç¨\n   * æçæã\n     * ææ¯ä¸è½åçå¤§å¨ä½å¶å®ä¹ä¸å¤äºï¼æ´å¤çæ¯è¿è¡ä¼åã\n\n\n\n\né¡µé¦\n\n\n# 40 | äºèç½æ¶ææ¨¡æ¿ï¼âå­å¨å±âææ¯\n\n\n\n * äºèç½æ¶ææ¨¡æ¿ä¸­çå­å¨å±ææ¯\n   \n   * SQL\n     * åè¡¨\n     * ååºåè¡¨\n       * ä¸­é´ä»¶\n         * ææ¯è¦æ±å¾é«ï¼è¦å°ååºåè¡¨åå°èªå¨ååå¹³å°åï¼ä¸æ¯ä¸ä»¶å®¹æçäºæãæä»¥ä¸è¬æ¯è§æ¨¡å¾å¤§çå¬å¸æä¼èªå·±åãä¾å¦ç¾åº¦ç DBProxyãæ·å®ç TDDLãä¸­å°å¬å¸å»ºè®®ä½¿ç¨å¼æºæ¹æ¡ï¼ä¾å¦ MySQL å®æ¹æ¨èç MySQL Routerã360 å¼æºçæ°æ®åºä¸­é´ä»¶ Atlas\n     * å¹³å°å\n       * å½ SQL æå¡å¨è¶æ¥è¶å¤ï¼å¦ææ¯ä¸ªä¸å¡é½åºäºç»ä¸çæ°æ®åºä¸­é´ä»¶ç¬ç«é¨ç½²èªå·±ç SQL éç¾¤ï¼å°±ä¼å¯¼è´æ°çå¤æåº¦é®é¢ï¼å·ä½è¡¨ç°å¨ï¼\n         * æ°æ®åºèµæºä½¿ç¨çä¸é«ï¼æ¯è¾æµªè´¹ã\n         * å SQL éç¾¤åå¼ç»´æ¤ï¼æå¥çç»´æ¤ææ¬è¶æ¥è¶é«\n       * å¤§å¬å¸æ­¤æ¶ä¸è¬é½ä¼å¨ SQL éç¾¤ä¸æå»º SQL å­å¨å¹³å°ï¼ï¼ä»¥å¯¹ä¸å¡éæçå½¢å¼æä¾èµæºåéãæ°æ®å¤ä»½ãè¿ç§»ãå®¹ç¾ãè¯»ååç¦»ãååºåè¡¨ç­ä¸ç³»åæå¡ï¼ä¾å¦æ·å®ç UMPï¼Unified MySQL Platformï¼ç³»ç»ã\n   * NoSQL\n     * ååº\n     * NoSQLéç¾¤\n       * NoSQL æ¹æ¡ä¸è¬èªå·±æ¬èº«å°±æä¾éç¾¤çåè½ï¼ä¾å¦ Memcache çä¸è´æ§ Hash éç¾¤ãRedis 3.0 çéç¾¤ï¼\n     * å¹³å°å\n       * èµæºå¨ææéå¨æåéï¼\n       * èµæºèªå¨åç®¡çï¼ä¾å¦\n       * æéèªå¨åå¤ç\n   * å°æä»¶å­å¨\n     * ä¸è¬å¨1Mä»¥ä¸ï¼ä½æ°æ®éå·¨å¤§ãå¸åçå°æä»¶å­å¨æï¼æ·å®ç TFSãäº¬ä¸ JFSãFacebook ç Haystack\n   * å¤§æä»¶å­å¨\n     * åå«ä¸å¡ä¸çå¤§æ°æ®(youtubeçè§é¢åå®¹ç­)ãæµ·éçæ¥å¿æ°æ®\n       * è¯´å°å¤§æä»¶ï¼ç¹å«è¦æå° Google å Yahooï¼Google ç 3 ç¯å¤§æ°æ®è®ºæï¼Bigtable/Map- Reduce/GFSï¼å¼å¯äºä¸ä¸ªå¤§æ°æ®çæ¶ä»£ï¼èYahoo å¼æºç Hadoop ç³»åï¼HDFSãHBase ç­ï¼ï¼åºæ¬ä¸åæ­äºå¼æºççå¤§æ°æ®å¤ç\n   \n   \n\n * æèé¢\n   \n   * æ¢ç¶å­å¨ææ¯åå±å°æåé½æ¯å­å¨å¹³å°ï¼ä¸ºä½æ²¡æåºç°å­å¨å¹³å°çå¼æºæ¹æ¡ï¼ä½äºè®¡ç®å´é½æä¾äºå­å¨å¹³å°æ¹æ¡ï¼\n     * ä»£ä»·ãä»·å¼\n\n\n\n\né¡µé¦\n\n\n# 41 | äºèç½æ¶ææ¨¡æ¿ï¼âå¼åå±âåâæå¡å±âææ¯\n\n * å¼åå±ææ¯\n   * å¼åæ¡æ¶\n     * äºèç½å¬å¸ä¸è¬ä¼æå®ä¸ä¸ªå¤§çææ¯æ¹åï¼ç¶åä½¿ç¨ç»ä¸çå¼åæ¡æ¶ï¼è¿æ ·å¯ä»¥èçæ²éåå¢éåä½ææ¬ãä¾å¦ï¼Java ç¸å³çå¼åæ¡æ¶ SSHãSpringMVCãPlayï¼Ruby ç Ruby on Railsï¼PHP ç ThinkPHPï¼Python ç Django ç­ã\n   * webæå¡å¨\n   * å®¹å¨\n     * è¾è®¯ä¸å°è§æ¨¡ç Docker åºç¨å®è·µ\n     * æ°æµªå¾®åçº¢åçå¤§è§æ¨¡ Docker éç¾¤\n * æå¡å±ææ¯ï¼æå¡å±çä¸»è¦ç®æ å¶å®å°±æ¯ä¸ºäºéä½ç³»ç»é´ç¸äºå³èçå¤æåº¦ã\n   * éç½®ä¸­å¿\n     * å°ææéç½®éä¸­å¨ä¸ä¸ªå¹³å°æä½ï¼æçé«ï¼åæ¶å¯ä»¥å¶å®éç½®è§åæ£æ¥ï¼é¿åæè¯¯é ææå¤±\n     * å¸¸ç¨âç³»ç»æ è¯ + host + portâæ¥æ è¯å¯ä¸è¿è¡å®ä¾\n   * æå¡ä¸­å¿\n     * ä¸¤ç§å®ç°æ¹å¼ï¼æå¡åå­ç³»ç»ï¼Service Name Systemï¼ å æå¡æ»çº¿ç³»ç»ï¼Service Bus Systemï¼\n   * æ¶æ¯éå\n * æèé¢\n   * ä½¿ç¨ç»ä¸çå¼åæ¡æ¶åå¼åè¯­è¨å¯ä»¥è®©å¢éå¼åæçæ´é«ï¼ä½è¿æ ·åä¼å¸¦æ¥ä»ä¹é®é¢ï¼å¦ä½è§£å³ï¼\n     * å¼åæ¡æ¶åå¼åè¯­è¨ï¼é½æ¯æåºæ¯éå¶çï¼å°ºææç­ï¼å¯¸ææé¿\n     * å°ä¸å¡æå¡åï¼å¯¹å¤æä¾ç»ä¸çAPIæ¥å£\n     * å¨ä¸å¡è§æ¨¡å°çæ¶åéç¨åä¸è¯­è¨åä¸æ¡æ¶ï¼å½è§æ¨¡å¤§äºè¿æ¯åºè¯¥æä¸å®ççµæ´»æ§ï¼æä¸ä¸ªä¸»åçè¯­è¨åæ¡æ¶ï¼åéçå·¥ä½ç¨åéè¯­è¨åæ¡æ¶ï¼èå¾®æå¡æ¶æçæ¯è¾éåæ··åè¯­è¨åæ¶æçæ¨¡å¼\n\n\n\n\né¡µé¦\n\n\n# 42 | äºèç½æ¶ææ¨¡æ¿ï¼âç½ç»å±âææ¯\n\n * ç«å¨ç½ç»å±çè§åº¦æ´ä½è®¾è®¡æ¶æï¼èä¸æ¯æä¸ªå·ä½ç½ç»çæ­å»ºã\n   \n   * è´è½½åè¡¡\n     * DNSãNginx ãLVS ãF5\n   * å¤æºæ¿\n     * ååãè·¨åãè·¨å½\n     * ç®çï¼ç¾å¤\n   * å¤ä¸­å¿\n     \n     * è¦æ±é«ï¼è¦æ±æ¯ä¸ªä¸­å¿é½åæ¶å¯¹å¤æä¾æå¡ï¼ä¸ä¸å¡è½å¤èªå¨å¨å¤ä¸­å¿ä¹é´åæ¢ï¼æéåä¸éäººå·¥å¹²é¢æèå¾å°çäººå·¥å¹²é¢å°±è½èªå¨æ¢å¤ã\n       \n       * å¤ä¸­å¿è®¾è®¡çå³é®å°±å¨äºâæ°æ®ä¸è´æ§âåâæ°æ®äºå¡æ§âãç®åæ²¡æå¾æççä¸éç¨çè§£å³æ¹æ¡ï¼éè¦åºäºä¸å¡çç¹æ§è¿è¡è¯¦ç»åæåè®¾è®¡\n     \n     * æ­£å ä¸ºå¤ä¸­å¿è®¾è®¡çå¤ææ§ï¼ä¸ä¸å®ææä¸å¡é½è½å®ç°å¤ä¸­å¿ï¼ç®åå½åçé¶è¡ãæ¯ä»å®è¿ç±»ç³»ç»å°±æ²¡æå®å¨å®ç°å¤ä¸­å¿ï¼ä¸ç¶ä¹ä¸ä¼åºç°æææºä¸é²å­ä¸å»ï¼æ¯ä»å®ä¸­æ­ 4 å°æ¶çæéã\n\n * utility\n   \n   * ä¸¤å°ä¸ä¸­å¿ï¼æ¯æååä¸¤ä¸ªæºæ¿æ¯åæ´»ï¼å¼å°æºæ¿æ¯å¤ä»½ï¼å½ååä¸¤ä¸ªæºæ¿é½ææï¼å¼å°æºæ¿ä¸è½æ¥ç®¡ä¸å¡ï¼åªè½ç¨æ¥å¤ä»½æ¢å¤\n\n\n\n\né¡µé¦\n\n\n# 43 | äºèç½æ¶ææ¨¡æ¿ï¼âç¨æ·å±âåâä¸å¡å±âææ¯\n\n * ç¨æ·å±ææ¯\n   * ç¨æ·ç®¡ç\n     * åç¹ç»å½SSO(ç®åææççå¼æºåç¹ç»å½æ¹æ¡å½å± CAS)ãOAuth2.0\n   * æ¶æ¯æ¨é\n   * å­å¨äº å å¾çäº\n     * æ®éçæä»¶åºæ¬ä¸æä¾å­å¨åè®¿é®å°±å¤äºï¼èå¾çæ¶åçä¸å¡ä¼æ´å¤ï¼åæ¬è£åªãåç¼©ãç¾åãå®¡æ ¸ãæ°´å°ç­å¤çï¼å æ­¤éå¸¸æåµä¸å¾çäºä¼æåä¸ºç¬ç«çç³»ç»å¯¹ç¨æ·æä¾æå¡ã\n * ä¸å¡å±ææ¯\n   * ä¸»è¦ææï¼ç³»ç»è¶æ¥è¶åºå¤§ï¼ä¸å¡è¶æ¥è¶å¤ï¼ä¸å¡å±ä¼è¶æ¥è¶å¤æ\n   * æåãåå¹¶ï¼åä¹å¿åãåä¹å¿åï¼ç¬¦åé«åèä½è¦ååå\n * æèé¢\n   * èæä¸å¡åååçç²åº¦éè¦ç²ä¸äºè¿æ¯è¦ç»ä¸äºï¼ä½ å»ºè®®èæä¸å¡åçæ°éå¤§æ¦æ¯å¤å°ï¼çç±æ¯ä»ä¹ï¼\n\n\n\n\né¡µé¦\n\n\n# 44 | äºèç½æ¶ææ¨¡æ¿ï¼âå¹³å°âææ¯\n\n * è¿ç»´å¹³å°\n   * èè´£ï¼èµæºéç½®ãé¨ç½²ãçæ§ãåºæ¥\n   * æ ¸å¿è®¾è®¡è¦ç´ ï¼æ ååãå¹³å°åãèªå¨åãå¯è§å\n * æµè¯å¹³å°\n   * æµè¯å¹³å°çæ ¸å¿ç®çæ¯æåæµè¯æçï¼ä»èæåäº§åè´¨éï¼å¶è®¾è®¡å³é®å°±æ¯èªå¨å\n   * ç¨ä¾ç®¡ç\n     * ä¸ºäºè½å¤éå¤æ§è¡æµè¯ç¨ä¾ï¼æµè¯å¹³å°éè¦å°ç¨ä¾ç®¡çèµ·æ¥ï¼ç®¡ççç»´åº¦åæ¬ä¸å¡ãç³»ç»ãæµè¯ç±»åãç¨ä¾ä»£ç ãä¾å¦ï¼ç½è´­ä¸å¡çè®¢åç³»ç»çæ¥å£æµè¯ç¨ä¾ã\n   * èµæºç®¡ç\n     * ç®¡çæ§è¡æµè¯æéçè¿è¡ç¯å¢, åæ¬ç¡¬ä»¶ï¼æå¡å¨ãææºãå¹³æ¿çµèç­ï¼ãè½¯ä»¶ï¼æä½ç³»ç»ãæ°æ®åºãJava èææºç­ï¼ãä¸å¡ç³»ç»ï¼è¢«æµè¯çç³»ç»ï¼\n   * ä»»å¡ç®¡ç\n     * ä»»å¡ç®¡ççä¸»è¦èè´£æ¯å°æµè¯ç¨ä¾åéå°å·ä½çèµæºä¸æ§è¡ï¼è·è¸ªä»»å¡çæ§è¡æåµãä»»å¡ç®¡çæ¯æµè¯å¹³å°è®¾è®¡çæ ¸å¿ï¼å®å°æµè¯å¹³å°çåä¸ªé¨åä¸²èèµ·æ¥ä»èå®æèªå¨åæµè¯ã\n   * æ°æ®ç®¡ç æµè¯ä»»å¡æ§è¡å®æåï¼éè¦è®°å½åç§ç¸å³çæ°æ®ï¼ä¾å¦ï¼æ§è¡æ¶é´ãæ§è¡ç»æãç¨ä¾æ§è¡æé´ç CPUãåå­å ç¨æåµç­ï¼ï¼è¿äºæ°æ®å·å¤ä¸é¢è¿äºä½ç¨ï¼å±ç°å½åç¨ä¾çæ§è¡æåµãä½ä¸ºåå²æ°æ®ï¼æ¹ä¾¿åç»­çæµè¯ä¸åå²æ°æ®è¿è¡å¯¹æ¯ï¼ä»èåç°ææ¾çååè¶å¿ãä½ä¸ºå¤§æ°æ®çä¸é¨åï¼å¯ä»¥åºäºæµè¯çä»»å¡æ°æ®è¿è¡ä¸äºæ°æ®ææã\n * æ°æ®å¹³å°\n   * æ°æ®å¹³å°çæ ¸å¿èè´£ä¸»è¦åæ¬ä¸é¨åï¼æ°æ®ç®¡çãæ°æ®åæåæ°æ®åºç¨\n * ç®¡çå¹³å°\n   * ç®¡çå¹³å°çæ ¸å¿èè´£å°±æ¯æéç®¡çï¼ä¸»è¦åä¸ºä¸¤é¨åï¼èº«ä»½è®¤è¯ãæéæ§å¶ï¼\n * æèé¢\n   * è¿ç»´å¹³å°æèæµè¯å¹³å°ï¼æçå¬å¸æ¯ç±ä¸­é´ä»¶å¢éè´è´£å¼åï¼æçæ¯è¿ç»´åæµè¯å¢éèªå·±å¼åï¼ä½ è§å¾ä¸¤ç§æ¹å¼åæä»ä¹ä¼ç¼ºç¹ï¼åå«éç¨ä»ä¹åºæ¯å¢ï¼\n\njira+gitlab+jenkins+nexus+bearychat æç®åçDevOps å¹³å°ãå¦æå°çäº§ç¯å¢å®å¨äº¤ç»è¿ç»´å¢éçè¯ï¼ä¸ªäººè§å¾è¿ä¸ªåºè¯¥å¯ä»¥ç§°ä¸ºå¼åå¹³å°ãè¾å¥çæ¯éæ±ï¼è¾åºçæ¯åç§å·¥ä»¶ã\n\n\n\n\né¡µé¦\n\n\n# 45 | æ¶æéæååå¿æ³ç¬¬ä¸å¼ï¼æçæ¾ç¢\n\n * ç³»ç»çæ¶ææ¯ä¸æ­æ¼åçï¼å°é¨åæ¶ææ¼åå¯è½éè¦æ¨åéæ¥ï¼ä½ç»å¤§é¨åçæ¶ææ¼åé½æ¯éè¿æ¶æéææ¥å®ç°çãç¸æ¯å¨æ°çæ¶æè®¾è®¡æ¥è¯´ï¼æ¶æéæå¯¹æ¶æå¸çè¦æ±æ´é«ï¼ä¸»è¦ä½ç°å¨ï¼\n   * ä¸å¡å·²ç»ä¸çº¿ï¼ä¸è½åä¸æ¥\n   * å³èæ¹ä¼å¤ï¼çµä¸åå¨å¨èº«\n     * æ¶æéææ¶åçä¸å¡å³èæ¹å¾å¤ï¼ä¸åå³èæ¹çèµæºæå¥ç¨åº¦ãä¸å¡åå±éåº¦ãå¯¹æ¶æçç¹çææåº¦ç­æå¾å¤§å·®å¼ï¼å¦ä½å°½éåå°å¯¹å³èæ¹çå½±åï¼æèåè°å³èæ¹ç»ä¸è¡å¨ï¼æ¯ä¸é¡¹å¾å¤§çææï¼èå¦ææ¯æ°è®¾è®¡æ¶æï¼åå¨æ°æ¶æä¸çº¿åï¼å¯¹å³èæ¹æ²¡æå½±åã\n   * æ§æ¶æççº¦æ\n     * å¨æ§çæ¶æåºç¡ä¸è¿è¡ï¼ä¼éå¶æ¶æå¸çææ¯éæ©èå´ï¼æ°æ¶æå¿é¡»èèå¦ä½å°æ§æ¶æäº§ççæ°æ®è½¬æ¢è¿æ¥ã\n * ææéè¿æ¶æéææ¥è§£å³ææé®é¢å½ç¶æ¯ä¸ç°å®ç\n   * æä»¥æ¶æå¸çé¦è¦ä»»å¡æ¯ä»ä¸å¤§å çº·ç¹å¤æçé®é¢ä¸­è¯å«åºçæ­£è¦éè¿æ¶æéææ¥è§£å³çé®é¢ï¼éä¸­åéå¿«éè§£å³ï¼èä¸æ¯æ³çéè¿æ¶æéææ¥è§£å³ææçé®é¢ã\n   * å¯¹äºåæ¥æä¸ä¸ªæ°ç³»ç»çæ¶æå¸æèææ¯ä¸»ç®¡æ¥è¯´ï¼ä¸å®è¦æ§å¶ä½âæ°å®ä¸ä»»ä¸æç«âçå²å¨ï¼é¿åæå¤§é¥¼å¼æèè¿å¨å¼çéæåä¼åã\n * éç¹\n   * æ»ä¹ï¼æ¶æéæéè¦æ¶æå¸æ¢è¦è¯´å¾å¨èæ¿ï¼ä¹éå¾ä½åäºï¼æ¢è¦ææ¯æ»å³ï¼åè¦åè°èµæºï¼æ¢è¦ä¿è¯ä¸å¡æ­£å¸¸åå±ï¼åè¦å¨æå®æ¶é´åå®æç®æ â¦â¦æ»ä¹å°±æ¯åå«è¬æ­¦èºè¦æ ·æ ·ç²¾éã\n   * æ¶æå¸éè¦éè¿é®é¢è¡¨è±¡çå°é®é¢æ¬è´¨ï¼æ¾åºçæ­£éè¦éè¿æ¶æéæè§£å³çæ ¸å¿é®é¢ï¼ä»èåå°æçæ¾ç¢ï¼æ¢ä¸ä¼èè´¹å¤§éçäººååæ¶é´æå¥ï¼åè½å¤è§£å³æ ¸å¿é®é¢ã\n * æèé¢\n   * åæä¸ä¸ä½ ç®åå¼åçç³»ç»ï¼ä½ è§å¾éè¦æ¶æéæåï¼åå åçç±æ¯ä»ä¹ï¼\n\n\n\n\né¡µé¦\n\n\n# 46 | æ¶æéæååå¿æ³ç¬¬äºå¼ï¼åçºµè¿æ¨ª\n\n * ä¸ä¸æ¸¸æ²éåè°\n   * å¨æ²éåè°æ¶ï¼å°ææ¯è¯­è¨è½¬æ¢ä¸ºéä¿è¯­è¨ï¼ä»¥äºå®è¯´è¯ï¼ä»¥æ°æ®è¯´è¯ï¼æ¯æ²éçå³é®ï¼\n * å¶ä»ç¸å³æèéåçç³»ç»çæ²éåè°\n   * é®é¢ï¼ä¸»è¦çé»åæ¥èªâè¿å¯¹ææä»ä¹å¥½å¤âåâè¿é¨åæè¿è¾¹ç°å¨ä¸æ¥â\n   * è§£å³æ¹æ¡ï¼æ¢ä½æèãåä½åèµ¢ãå³æ³¨é¿æ\n\n\n\n\né¡µé¦\n\n\n# 47 | æ¶æéæååå¿æ³ç¬¬ä¸å¼ï¼è¿ç­¹å¸·å¹\n\n * é®é¢\n   * éå¸¸æåµä¸ï¼éè¦æ¶æéæçç³»ç»ï¼åºæ¬ä¸é½æ¯å ä¸ºåç§åå²åå ååå²é®é¢æ²¡æåæ¶å¤çï¼éçä¸æ¥éæ¸ç§¯ç´¯ï¼ç¶åå°äºä¸ä¸ªä¸´çç¹ï¼ï¼åç§é®é¢å¼å§äºç¸ä½ç¨ï¼éä¸­çåï¼å°äºçæ­£è¦å¼å§éæçæ¶åï¼æ¶æå¸è¯å«åºç³»ç»å³é®çå¤æåº¦é®é¢åï¼å¦æåªéå¯¹è¿ä¸ªå¤æåº¦é®é¢è¿è¡æ¶æéæï¼å¯è½ä¼åç°è¿æ¯æ æ³è½å°ï¼å ä¸ºå¾å¤æ¡ä»¶ä¸å·å¤æèæçé®é¢æ²¡è§£å³çæåµä¸å°±æ¯ä¸è½åæ¶æéæ\n * éæ: åæ®µå®æ½\n   * éæçåæ³ï¼å¶å®å°±æ¯âåæ®µå®æ½âï¼å°è¦è§£å³çé®é¢æ ¹æ®ä¼åçº§ãéè¦æ§ãå®æ½é¾åº¦ç­ååä¸ºä¸åçé¶æ®µï¼æ¯ä¸ªé¶æ®µèç¦äºä¸ä¸ªæ´ä½çç®æ ï¼éä¸­ç²¾ååèµæºè§£å³ä¸ç±»é®é¢ãè¿æ ·åæå ä¸ªå¥½å¤:\n     * æ¯ä¸ªé¶æ®µé½ææç¡®ç®æ ï¼åå®ä¹åææææ¾ï¼å¢éä¿¡å¿è¶³ï¼åç»­æ¨è¿æ´å å®¹æã\n     * æ¯ä¸ªé¶æ®µçå·¥ä½éä¸ä¼å¤ªå¤§ï¼å¯ä»¥åä¸å¡å¹¶è¡ã\n     * æ¯ä¸ªé¶æ®µçæ¹å¨ä¸ä¼å¤ªå¤§ï¼éä½äºæ»ä½é£é©ã\n   * ç­ç¥\n     * ä¼åçº§æåº\n     * é®é¢åç±»\n       * å°é®é¢æç§æ§è´¨åç±»ï¼æ¯ä¸ªé¶æ®µéä¸­è§£å³ä¸ç±»é®é¢ã\n     * åæåé¾\n       * å°é®é¢æç§æ§è´¨åç±»ï¼æ¯ä¸ªé¶æ®µéä¸­è§£å³ä¸ç±»é®é¢\n     * å¾ªåºæ¸è¿\n       * æ¯ä¸ªé¶æ®µçå®æ½ï¼æå° 1 ä¸ªæï¼æé¿ä¸è¦è¶è¿ 3 ä¸ªæ\n * æèé¢\n   * å¦æä¸ä¸ªæ¶æéæé¡¹ç®æåè§åè¦ 2 å¹´æå®æï¼ä½ ä¼æä¹å¤çï¼\n     * å¤ªä¹\n\n\n\n\né¡µé¦\n\n\n# 48 | åè°å¼æºé¡¹ç®ï¼å¦ä½éæ©ãä½¿ç¨ä»¥åäºæ¬¡å¼åï¼\n\nè½¯ä»¶å¼åé¢åæä¸ä¸ªæµè¡çååï¼DRYï¼Donât repeat yourselfã\n\n * éæ©\n   * èç¦æ¯å¦æ»¡è¶³ä¸å¡ã\n   * èç¦æ¯å¦æç\n     * çæ¬å·ãä½¿ç¨çå¬å¸æ°éãç¤¾åºæ´»è·ç¨åº¦\n   * èç¦è¿ç»´è½å\n     * å¼æºé¡¹ç®æ¥å¿æ¯å¦é½å¨ãæ¯å¦æç»´æ¤å·¥å·å¯ä»¥çå°ç³»ç»è¿è¡ç¶åµãæ¯å¦ææéæ£æµåæ¢å¤çè½å\n * ä½¿ç¨\n   * æ·±å¥ç ç©¶ï¼ä»ç»æµè¯\n     * éè¯»å¼æºé¡¹ç®çè®¾è®¡ææ¡£æèç½ç®ä¹¦ï¼äºè§£å¶è®¾è®¡åçã\n     * æ ¸å¯¹æ¯ä¸ªéç½®é¡¹çä½ç¨åå½±åï¼è¯å«åºå³é®éç½®é¡¹ã\n     * è¿è¡å¤ç§åºæ¯çæ§è½æµè¯\n     * è¿è¡ååæµè¯ï¼è¿ç»­è·å å¤©ï¼è§å¯ CPUãåå­ãç£ç I/O ç­ææ æ³¢å¨\n     * è¿è¡æéæµè¯ï¼killãæ­çµãæç½çº¿ãéå¯ 100 æ¬¡ä»¥ä¸ãåæ¢ç­\n   * å°å¿åºç¨ï¼ç°åº¦åå¸\n   * åå¥½åºæ¥ï¼ä»¥é²ä¸ä¸\n * äºæ¬¡å¼å\n   * ä¿æçº¯æ´ï¼å ä»¥åè£\n     * åå¤å¨æ¹çç¼ºç¹ï¼æå¥å¤ªå¤§ãå¤±å»äºè·éåé¡¹ç®æ¼è¿çè½å(å·®å¼å¤ªå¤§å¯¼è´æºé¡¹ç®çæ¹å¨æ æ³åå¹¶å°èªå·±çåæ¯)\n   * åæä½ è¦çè½®å­\n     * æ²¡æå®å¨éåä½ çè½®å­ï¼\n\n\n\n\né¡µé¦\n\n\n# 49 | è°è°Appæ¶æçæ¼è¿\n\n * å¤ä¹ ä¸ä¸æçä¸æ æè®²è¿°çæ¶æè®¾è®¡çå¿µ\n   * æ¶ææ¯ç³»ç»çé¡¶å±ç»æ\n   * æ¶æè®¾è®¡çä¸»è¦ç®çæ¯ä¸ºäºè§£å³è½¯ä»¶ç³»ç»å¤æåº¦å¸¦æ¥çé®é¢ã\n   * æ¶æè®¾è®¡éè¦éµå¾ªä¸ä¸ªä¸»è¦ååï¼åéååãç®åååãæ¼åååã\n   * æ¶æè®¾è®¡é¦åè¦ææ¡ä¸çå·²ç»æççåç§æ¶ææ¨¡å¼ï¼ç¶ååè¿è¡ä¼åãè°æ´ãåæ°ã\n * Appæ¶ææ¼è¿\n   * web appãåçAppãHybrid Appãç»ä»¶å & å®¹å¨åãè·¨å¹³å° App\n     * ç»ä»¶å & å®¹å¨å\n       * å¾®ä¿¡ Android å®¢æ·ç«¯æ¶ææ¼è¿ä¹è·¯\n       * Atlasï¼ææ· Native å®¹å¨åæ¡æ¶åæè\n     * è·¨å¹³å°\n       * Flutter\n * æèé¢\n   * ä½ è®¤ä¸º App æ¶ææ¥ä¸æ¥ä¼å¦ä½æ¼è¿ï¼è°è°ä½ çæèååæã\n\n\n\n\né¡µé¦\n\n\n# 50 | æ¶æå®æï¼æ¶æè®¾è®¡ææ¡£æ¨¡æ¿\n\n * å¤éæ¹æ¡æ¨¡æ¿ï¼ç®çæ¯ä¾éæ©ä¸ä¸ªæ¹æ¡è½å°å®æ½\n   * éæ±ä»ç»ï¼ä¸»è¦æè¿°éæ±çèæ¯ãç®æ ãèå´ç­\n   * éæ±åæï¼ä¸»è¦å¨æ¹ä½å°æè¿°éæ±ç¸å³çä¿¡æ¯\n     * 5W: Who(å©çå¹²ç³»äºº)ãWhenãWhat(äº§åº)ãWhy(éè¦è§£å³çé®é¢)ãWhere(åºç¨åºæ¯)\n     * 1Hï¼å³é®ä¸å¡æµç¨ã\n     * 8C: æçæ¯ 8 ä¸ªçº¦æåéå¶ï¼Constraintsï¼åæ¬æ§è½ Performanceãææ¬ Costãæ¶é´ Timeãå¯é æ§ Reliabilityãå®å¨æ§ Securityãåè§æ§ Complianceãææ¯æ§ Technologyãå¼å®¹æ§ Compatibility\n   * å¤æåº¦åæï¼åå«é«å¯ç¨ãé«æ§è½ãå¯æ©å±ç­\n   * å¤éæ¹æ¡ï¼è³å° 3 ä¸ªå¤éæ¹æ¡ï¼æ¯ä¸ªå¤éæ¹æ¡éè¦æè¿°å³é®çå®ç°ï¼æ é¡»æè¿°å·ä½çå®ç°ç»è\n   * å¤éæ¹æ¡è¯ä¼°: å¤éæ¹æ¡ 360 åº¦ç¯è¯, æ³¨æå¤éæ¹æ¡è¯ä¼°çåå®¹ä¼æ ¹æ®è¯ä¼°ä¼è®®çç»æè¿è¡ä¿®æ¹\n * æ¶æè®¾è®¡æ¨¡æ¿ï¼ç®çæ¯è¯¦ç»æè¿°ç»åæ¹æ¡\n   * æ»ä½æ¹æ¡\n     * æ»ä½æ¹æ¡éè¦ä»æ´ä½ä¸æè¿°æ¹æ¡çç»æï¼å¶æ ¸å¿åå®¹å°±æ¯æ¶æå¾ï¼ä»¥åéå¯¹æ¶æå¾çæè¿°ï¼åæ¬æ¨¡åæèå­ç³»ç»çèè´£æè¿°ãæ ¸å¿æµç¨\n   * æ¶ææ»è§\n     * æ¶ææ»è§ç»åºæ¶æå¾ä»¥åæ¶æçæè¿°\n   * æ ¸å¿æµç¨\n   * è¯¦ç»è®¾è®¡\n     * è¯¦ç»è®¾è®¡éè¦æè¿°å·ä½çå®ç°ç»è\n     * é«å¯ç¨ãé«æ§è½ãé«å¯æ©å±\n     * å®å¨è®¾è®¡\n     * å¶ä»è®¾è®¡\n       * å¶ä»è®¾è®¡åæ¬ä¸è¿°ä»¥å¤çå¶ä»è®¾è®¡èèç¹ï¼ä¾å¦æå®å¼åè¯­è¨ãç¬¦åå¬å¸çæäºæ åç­ï¼å¦æç¯å¹è¾é¿ï¼ä¹å¯ä»¥ç¬ç«è¿è¡æè¿°]\n     * é¨ç½²æ¹æ¡\n       * é¨ç½²æ¹æ¡ä¸»è¦åæ¬ç¡¬ä»¶è¦æ±ãæå¡å¨é¨ç½²æ¹å¼ãç»ç½æ¹å¼ç­\n   * æ¶ææ¼è¿è§å\n     * éå¸¸æåµä¸ï¼è§ååè®¾è®¡çéæ±æ¯è¾å®åï¼ä½å¦æä¸æ¬¡æ§å¨é¨åå®ï¼é¡¹ç®å¨æå¯è½ä¼å¾é¿ï¼å æ­¤å¯ä»¥éååé¶æ®µå®æ½ï¼å³ï¼ç¬¬ä¸æåä»ä¹ãç¬¬äºæåä»ä¹ï¼ä»¥æ­¤ç±»æ¨\n\n\n\n\né¡µé¦\n\n\n# æ»ç»\n\n> å³äºå¦ä½å¨ä¸ä¸é¢ååæåï¼èåçâ10000 å°æ¶å®å¾â åææ¢¦æ³ãåæå­¦ä¹ ãåæ(æç»­)è¾åº\n\n * æ¶æå¸çååä¸»è¦åå«ä¸é¨åï¼å¤æ­åãæ§è¡åãåæ°å\n   * å¤æ­åï¼è½å¤åç¡®å¤æ­ç³»ç»çå¤æåº¦å¨åªéï¼å°±åæ­¦ä¾ é«æä¸æ ·ï¼è½åç¡®å°çåºå¯¹æçç ´ç»½åå¼±ç¹ã\n   * æ§è¡åï¼è½å¤ä½¿ç¨åéçæ¹æ¡è§£å³å¤æåº¦é®é¢ï¼å°±åæ­¦ä¾ é«æä¸æ ·ï¼è½éæ©åéçæå¼æèæ¹æ³æè´¥å¯¹æã\n   * åæ°åï¼è½å¤åé æ°çè§£å³æ¹æ¡è§£å³å¤æåº¦é®é¢ï¼å°±åæ­¦ä¾ ä¸çéï¼å°ä¸äºçåæ°æ¯åæ°æå¼ï¼èæ­¦å­¦å®å¸è½å¤åç«æ°çæ­¦å­¦æèå¿æ³\n * ä»ç¨åºåå°æ¶æå¸çæé¿ä¹è·¯ï¼æ»çæå¯¼ååæ¯(ä»¥ä¸ä¸æ¹é¢çè½åä¸»è¦æ¥æº)ï¼ç»éªãè§éãæè\n * ææ¯æé¿ä¹è·¯åä¸ºï¼\n   * å·¥ç¨å¸\n     * å¨å«äººçæå¯¼ä¸å®æå¼åï¼åºç¡æè½ç§¯ç´¯é¶æ®µ\n   * é«çº§å·¥ç¨å¸\n     * ç¬ç«å®æå¼åï¼åæ¬éæ±åæãæ¹æ¡è®¾è®¡ãç¼ç å®ç°ï¼å¶ä¸­éæ±åæåæ¹æ¡è®¾è®¡å·²ç»åå«äºâå¤æ­âåâéæ©âï¼åªæ¯èå´ç¸å¯¹æ¥è¯´å°ä¸äºï¼æ´å¤æ¯å¨å·²ææ¶æä¸è¿è¡è®¾è®¡ã\n     * ç§¯ç´¯æ¹æ¡è®¾è®¡ç»éªï¼ç®åæ¥è¯´å°±æ¯ä¸å¡å½åç¨å°çç¸å³ææ¯çè®¾è®¡ç»éªã\n     * é«çº§å·¥ç¨å¸é¶æ®µç¸æ¯å·¥ç¨å¸é¶æ®µï¼æä¸¤ä¸ªå¸åçå·®å¼ï¼æ·±åº¦(how -> why)ãçè®º(æççè®¾è®¡ç»éª)\n   * ææ¯ä¸å®¶\n     * æä¸ªé¢åçä¸å®¶ï¼éä¿å°è®²ï¼åªè¦æ¯è¿ä¸ªé¢åçé®é¢ï¼ææ¯ä¸å®¶é½å¯ä»¥è§£å³ã\n     * ææ¯ä¸å®¶ä¸é«çº§å·¥ç¨å¸çä¸ä¸ªå¸ååºå«å°±æ¯ï¼é«çº§å·¥ç¨å¸ä¸»è¦æ¯å¨å·²æçæ¶ææ¡æ¶ä¸å®æè®¾è®¡ï¼èææ¯ä¸å®¶ä¼æ ¹æ®éè¦ä¿®æ¹ãæ©å±ãæ©å±ãä¼åæ¶æã\n     * ä»é«çº§å·¥ç¨å¸æé¿ä¸ºææ¯ä¸å®¶ï¼ä¸»è¦éè¦âæå±ææ¯å®½åº¦âï¼å ä¸ºä¸ä¸ªâé¢åâå¿ç¶ä¼æ¶åä¼å¤çææ¯é¢ãå¸¸è§çæå±ææ¯å®½åº¦çæ¹æ³æï¼\n       * å­¦ä¹ ä¸çæççå¼æºæ¹æ¡ãç ç©¶ä¸ççç»éªåäº«\n     * éè¦æ³¨æçæ¯ï¼æå±ææ¯å®½åº¦å¹¶ä¸æå³çä»ä»åªæ¯ç¥éä¸ä¸ªææ¯åè¯ï¼èæ¯è¦æ·±å¥å»çè§£æ¯ä¸ªææ¯çåçãä¼ç¼ºç¹ãåºç¨åºæ¯\n   * åçº§æ¶æå¸\n     * å¸åç¹å¾å°±æ¯è½å¤âç¬ç«å®æä¸ä¸ªç³»ç»çæ¶æè®¾è®¡âï¼å¯ä»¥æ¯ä» ä» 0 å° 1 è®¾è®¡ä¸ä¸ªæ°ç³»ç»ï¼ä¹å¯ä»¥æ¯å°æ¶æä» 1.0 éæå° 2.0ã\n     * åçº§æ¶æå¸åææ¯ä¸å®¶çå¸ååºå«æ¯ï¼æ¶æå¸æ¯åºäºå®åçæ¶æè®¾è®¡æ¹æ³è®ºçæå¯¼æ¥è¿è¡æ¶æè®¾è®¡ï¼èææ¯ä¸å®¶æ´å¤çæ¯åºäºç»éªè¿è¡æ¶æè®¾è®¡ã\n       * ç®åæ¥è¯´ï¼å³ä½¿æ¯åæ ·ä¸ä¸ªæ¹æ¡ï¼åçº§æ¶æå¸è½å¤æ¸æ°å°éè¿°æ¶æè®¾è®¡ççç±ååå ï¼èææ¯ä¸å®¶å¯è½å°±æ¯å ä¸ºèªå·±æ¾ç»è¿æ ·åè¿ï¼æèçå°å«äººè¿æ ·åè¿èéæ©è®¾è®¡æ¹æ¡ã\n   * ä»ææ¯ä¸å®¶æé¿ä¸ºåçº§æ¶æå¸ï¼æä¸»è¦çæ¯å½¢æèªå·±çâæ¶æè®¾è®¡æ¹æ³è®º\".ä¸»è¦çææ®µæï¼\n     * ç³»ç»å­¦ä¹ æ¶æè®¾è®¡æ¹æ³è®ºï¼åæ¬è®¢éä¸æ æèéè¯»ä¹¦ç±ç­\n     * æ·±å¥ç ç©¶æçå¼æºç³»ç»çæ¶æè®¾è®¡ï¼è¿ä¸ªææ®µå¨ææ¯ä¸å®¶é¶æ®µä¹ä¼ç¨å°ï¼ä½å³æ³¨ç¹ä¸ä¸æ ·ï¼åæ ·æ¯ç ç©¶å¼æºç³»ç»ï¼ææ¯ä¸å®¶é¶æ®µèç¦äºå¦ä½æ´å¥½å°åºç¨å¼æºé¡¹ç®ï¼åçº§æ¶æå¸é¶æ®µèç¦äºå­¦ä¹ å¶æ¶æè®¾è®¡åçåææ³ï¼ä¾å¦ Kafka çææ¡£ä¸­å°±æå³äºæ¶æ¯éåæ¶æè®¾è®¡çåæååèã\n     * ç»åæ¶æè®¾è®¡æ¹æ³è®ºï¼åæåæ»ç»èªå·±å¢éçè³å¬å¸çåç§ç³»ç»çæ¶æè®¾è®¡ä¼ç¼ºç¹ï¼å°è¯æèæ¶æéææ¹æ¡ã\n   * ä¸­çº§æ¶æå¸\n     * å¸åç¹å¾æ¯âè½å¤å®æå¤æç³»ç»çæ¶æè®¾è®¡âï¼åå«é«æ§è½ãé«å¯ç¨ãå¯æ©å±ãæµ·éå­å¨ç­å¤æç³»ç»ï¼ä¾å¦è®¾è®¡ä¸ä¸ªå Kafka æ§è½å¹æçæ¶æ¯éåç³»ç»ãå°ä¸å¡æ¹é ä¸ºå¼å°å¤æ´»ãè®¾è®¡ä¸ä¸ªæ»å± 100 äººåä¸å¼åçä¸å¡ç³»ç»ç­ã\n     * ä¸­çº§æ¶æå¸ä¸åçº§æ¶æå¸çå¸ååºå«å¨äºç³»ç»å¤æåº¦çä¸åï¼\n     * ä»åçº§æ¶æå¸æé¿ä¸ºä¸­çº§æ¶æå¸ï¼æå³é®çæ¯âææ¯æ·±åº¦åææ¯çè®ºçç§¯ç´¯âï¼\n   * é«çº§æ¶æå¸\n     * å¸åç¹å¾æ¯âåé æ°çæ¶ææ¨¡å¼â\n     * é«çº§æ¶æå¸ä¸ä¸­çº§æ¶æå¸ç¸æ¯ï¼å¸ååºå«å¨äºâåé æ§âï¼é«çº§æ¶æå¸è½å¤åé æ°çæ¶ææ¨¡å¼ï¼å¼åæ°çææ¯æ½®æµã\n\n\n\n\né¡µé¦\n\n\n# END\n\n * recommend\n   * ãunixç½ç»ç¼ç¨å·1ããtcp/ipåè®®å·1ããunixé«çº§ç¼ç¨ããlinuxç³»ç»ç¼ç¨ããé«æ§è½mysqlã\n * ä¸¤ç§é«æçæå¡å¨è®¾è®¡æ¨¡åï¼\n   * ReactoråProactoræ¨¡å\n * SSO(Single Sign On)æµç¨\n   * https://www.cnblogs.com/ywlaker/p/6113927.html\n * MVC\n   * https://draveness.me/mvx\n * å¾®æå¡\n   * å¾®æå¡æ¶æççè®ºåºç¡ - åº·å¨å®å¾\n * æ¶æå¸çæ ¸å¿è½åï¼\n   * æ½è±¡ï¼æç¼ï¼ææ¡å³é®ï¼é¢æµæªæ¥ï¼å½ç¶è¿ææ²éï¼æé¼ï¼ð\n * å­¦ä¹ å¼æºé¡¹ç®ï¼ä»¥æå­¦ä¹  Elasticsearch ä¸ºä¾ï¼å·ä½çåæ³æ¯ï¼\n   * æ­å»ºä¸ä¸ªåæºä¼ªéç¾¤ï¼æ­å»ºå®æåççå®è£è·¯å¾ä¸çæä»¶åç®å½ï¼ççéç½®æä»¶æåªäºéç½®é¡¹ï¼ä¸åçéç½®é¡¹ä¼æä»ä¹æ ·çå½±åã\n   * æ§è¡å¸¸ç¨çæä½ï¼ä¾å¦åå»ºç´¢å¼ï¼æå¥ãå é¤ãæ¥è¯¢ææ¡£ï¼æ¥çä¸ä¸åç§è¾åº\n   * ç ç©¶å¶åºæ¬åçï¼ä¾å¦ç´¢å¼ãåçãå¯æ¬ç­ï¼ç ç©¶çæ¶åè¦å¤æèï¼ä¾å¦ç´¢å¼åºè¯¥å¦ä½å»ºï¼åçæ°éåå¯æ¬æ°éå¯¹ç³»ç»æä»ä¹å½±åç­ã\n   * åå¶ä»ç±»ä¼¼ç³»ç»å¯¹æ¯ï¼ä¾å¦ SolrãSphinxï¼ç ç©¶å¶ä¼ç¹ãç¼ºç¹ãéç¨åºæ¯ã\n   * æ¨¡æä¸ä¸ªæ¡ä¾ççæä¹åºç¨ãä¾å¦ï¼åè®¾æç¨ Elasticsearch æ¥å­å¨æ·å®çååä¿¡æ¯ï¼æåºè¯¥å¦ä½è®¾è®¡ç´¢å¼ååçã\n   * æ¥çä¸çä½¿ç¨çæ¡ä¾ï¼æèä¸ä¸å«äººä¸ºä½è¿ä¹ç¨ï¼ççå«äººæµè¯çç»æï¼å¤§æ¦äºè§£æ§è½èå´ã\n   * å¦ææé¨åç¹å«æå´è¶£æèå¾å³é®ï¼å¯è½å»çæºç ï¼ä¾å¦ Elasticsearch çéä¸¾ç®æ³\n   * å¦æç¡®å®è¦å¼å¥ï¼ä¼è¿è¡æ§è½åå¯ç¨æ§æµè¯ã",normalizedContent:"# architecture\n\n> architecture is like teenage sexï¼ everybody talks about itï¼ nobody really knows what is itã\n\n> æ¶ææ¯ä¸é¨å¹³è¡¡çèºæ¯\n\n\n# æ¦åµ\n\n * ç®è¿°\n   * ä¸å¡é©±å¨ææ¯ï¼ææ¯è§£å³ä¸å¡é®é¢ã\n   * ä¸åçææ¯ï¼éè¿æ ç¶ç»æï¼ç»åå¨ä¸èµ·ï¼å½¢æäºä¸ä¸ªå®æ´çæ¶æè§£å³æ¹æ¡ï¼ææå®æä¸å¡çç®æ ã\n * æå©\n   * ææçæ¶æåæï¼é½åºè¯¥æ¯å½¢ææ ç¶çç»æ\n     * å ä¸ºï¼åååºæ¥çé¨åçè´è´£äººï¼å¯¹è¿ä¸ªé¨åçæå©åä¹å¡å¿é¡»æ¯å¯¹ç­çãæ¶æå¸æ²¡æè¯è¯­æï¼è¿æ¶ä»ä¹æ\n     * æ¶æå¸å¿é¡»æ¯ä¸ä¸ªç»ç»çé¢å¯¼äººï¼ææå©è°å¨è¿ä¸ªç»ç»çæ¶æï¼æè½å¤æ´å¥½çåæ¥æ¶æå¸çä½ç¨\n * è´£ä»»\n   * æ¾é®é¢\n     * æ¾åºé®é¢çä¸»ä½ï¼æ¯åæ¶æçé¦è¦é®é¢ãæ¶æå¸é½è¦æè¿ä¸ªèªè§ï¼åç°é®é¢æ°¸è¿é½æ¯è§£å³é®é¢æ¥çæ´å éè¦ã\n       * æä»¬ä¸å®è¦æç½ï¼ä»»ä½æ¾ä¸æ¶æå¸çé®é¢ï¼ç»å¯¹é½ä¸æ¯çæ­£çé®é¢ï¼å ä¸ºå¦ææ¯çæ­£çé®é¢çè¯ï¼æé®é¢çäººè¯å®é½è½å¤èªå·±è§£å³äº\n         * ä¸¤ä¸ªé®é¢ï¼å¦æé®é¢ä¸è§£å³ï¼ç©¶ç«è°ä¼æå©ççæå¤±ï¼å¦æé®é¢è§£å³äºï¼ç©¶ç«è°ä¼ææ¶çï¼è°çæ¶çæå¤§ï¼\n   * æ¾ææ¯\n     * åç¡®è¯å«éç¨ä»ä¹ææ¯çè½åï¼ä¹æ¯æ¶æå¸æè¦å·å¤çè½åä¹ä¸ã\n       * è¿å°±è¦æ±äºè§£è¿é¡¹ææ¯è§£å³çæ¯è°çé®é¢ï¼ä»ä¹é®é¢ï¼\n         * ä¾å­ï¼æ¯å¦å½æä»¬éè¦ä¸ä¸ªé¤å­æ¶ï¼æè¾¹æ­£å¥½æ²¡æï¼ä½æ¯å´æä¸åªé«è·éï¼åå¼ºä¹å¯ä»¥æ¿ä»£é¤å­ãä½æ¯é¿ææ¥çï¼è¿ä¹ç¨ä¸åç®ï¼å ä¸ºä»·æ ¼ãèç¨æ§ãç»´æ¤ææ¬ç¸å·®å¾å¤ã\n\n----------------------------------------\n\n\n\n\n\n# ç®å½\n\n * architecture\n   * æ¦åµ\n * ç®å½\n * å¼ç¯\n * 01 | æ¶æå°åºæ¯æä»ä¹ï¼\n * 02 | æ¶æè®¾è®¡çåå²èæ¯\n * 03 | æ¶æè®¾è®¡çç®ç\n * 04 | å¤æåº¦æ¥æºï¼é«æ§è½\n * 05 | å¤æåº¦æ¥æºï¼é«å¯ç¨\n * 06 | å¤æåº¦æ¥æºï¼å¯æ©å±æ§\n * 07 | å¤æåº¦æ¥æºï¼ä½ææ¬ãå®å¨ãè§æ¨¡\n * 08 | æ¶æè®¾è®¡ä¸åå\n * 09 | æ¶æè®¾è®¡ååæ¡ä¾\n * 10 | æ¶æè®¾è®¡æµç¨ï¼è¯å«å¤æåº¦\n * 11 | æ¶æè®¾è®¡æµç¨ï¼è®¾è®¡å¤éæ¹æ¡\n * 12 | æ¶æè®¾è®¡æµç¨ï¼è¯ä¼°åéæ©å¤éæ¹æ¡\n * 13 | æ¶æè®¾è®¡æµç¨ï¼è¯¦ç»æ¹æ¡è®¾è®¡\n * 14 | é«æ§è½æ°æ®åºéç¾¤ï¼è¯»ååç¦»\n * 15 | é«æ§è½æ°æ®åºéç¾¤ï¼ååºåè¡¨\n * 16 | é«æ§è½nosql\n * 17 | é«æ§è½ç¼å­æ¶æ\n * 18 | åæå¡å¨é«æ§è½æ¨¡å¼ï¼ppcä¸tpc\n * 19 | åæå¡å¨é«æ§è½æ¨¡å¼ï¼reactorä¸proactor\n * 20 | é«æ§è½è´è½½åè¡¡ï¼åç±»åæ¶æ\n * 21 | é«æ§è½è´è½½åè¡¡ï¼ç®æ³\n * 22 | æ³æä¸ºæ¶æå¸ï¼ä½ å¿é¡»ç¥écapçè®º\n * 23 | æ³æä¸ºæ¶æå¸ï¼ä½ å¿é¡»ææ¡çcapç»è\n * 24 | fmeaæ¹æ³ï¼æé¤æ¶æå¯ç¨æ§éæ£çå©å¨\n * 25 | é«å¯ç¨å­å¨æ¶æï¼åæºæ¶æ\n * 26 | é«å¯ç¨å­å¨æ¶æï¼éç¾¤åååº\n * 27 | å¦ä½è®¾è®¡è®¡ç®é«å¯ç¨æ¶æï¼\n * 28 | ä¸å¡é«å¯ç¨çä¿éï¼å¼å°å¤æ´»æ¶æ\n * 29 | å¼å°å¤æ´»è®¾è®¡4å¤§æå·§\n * 30 | å¼å°å¤æ´»è®¾è®¡4æ­¥èµ°\n * 31 | å¦ä½åºå¯¹æ¥å£çº§çæéï¼\n * 32 | å¯æ©å±æ¶æçåºæ¬ææ³åæ¨¡å¼\n * 33 | ä¼ ç»çå¯æ©å±æ¶ææ¨¡å¼ï¼åå±æ¶æåsoa\n * 34 | æ·±å¥çè§£å¾®æå¡æ¶æï¼é¶å¼¹ or ç¦æ²¹åï¼\n * 35 | å¾®æå¡æ¶ææä½³å®è·µ - æ¹æ³ç¯\n * 36 | å¾®æå¡æ¶ææä½³å®è·µ - åºç¡è®¾æ½ç¯\n * 37 | å¾®åæ ¸æ¶æè¯¦è§£\n * 38 | æ¶æå¸åºè¯¥å¦ä½å¤æ­ææ¯æ¼è¿çæ¹åï¼\n * 39 | äºèç½ææ¯æ¼è¿çæ¨¡å¼\n * 40 | äºèç½æ¶ææ¨¡æ¿ï¼âå­å¨å±âææ¯\n * 41 | äºèç½æ¶ææ¨¡æ¿ï¼âå¼åå±âåâæå¡å±âææ¯\n * 42 | äºèç½æ¶ææ¨¡æ¿ï¼âç½ç»å±âææ¯\n * 43 | äºèç½æ¶ææ¨¡æ¿ï¼âç¨æ·å±âåâä¸å¡å±âææ¯\n * 44 | äºèç½æ¶ææ¨¡æ¿ï¼âå¹³å°âææ¯\n * 45 | æ¶æéæååå¿æ³ç¬¬ä¸å¼ï¼æçæ¾ç¢\n * 46 | æ¶æéæååå¿æ³ç¬¬äºå¼ï¼åçºµè¿æ¨ª\n * 47 | æ¶æéæååå¿æ³ç¬¬ä¸å¼ï¼è¿ç­¹å¸·å¹\n * 48 | åè°å¼æºé¡¹ç®ï¼å¦ä½éæ©ãä½¿ç¨ä»¥åäºæ¬¡å¼åï¼\n * 49 | è°è°appæ¶æçæ¼è¿\n * 50 | æ¶æå®æï¼æ¶æè®¾è®¡ææ¡£æ¨¡æ¿\n * æ»ç»\n * end\n\n\n\n\né¡µé¦\n\n\n# å¼ç¯\n\n * æ¶æå¸çæ ¸å¿è½åè¿æ¯ææ¯è½åï¼è¿ç¡¬çææ¯ææ¯è¯å¥½æ²éçåºç¡\n * æ¶æè®¾è®¡çæç»´åç¨åºè®¾è®¡çæç»´å·®å¼å¾å¤§\n   * æ¶æè®¾è®¡çå³é®æç»´æ¯å¤æ­ååèï¼ç¨åºè®¾è®¡çå³é®æç»´æ¯é»è¾åå®ç°\n * æ¬è¯¾ç¨çç®ç\n   * æ¸æ¥å°çè§£æ¶æè®¾è®¡ç¸å³çæ¦å¿µãæ¬è´¨ãç®ç\n   * ææ¡éç¨çæ¶æè®¾è®¡åå\n   * ææ¡æ åçæ¶æè®¾è®¡æµç¨\n   * æ·±å¥çè§£å·²æçæ¶ææ¨¡å¼, çç»ä½¿ç¨å¹¶åæ°\n * æ¶æçä¸»è¦å¤ææ§\n   * é«å¯ç¨æ§ãé«æ§è½ãå¯ä¼¸ç¼©ãå¯æ©å±ãå®å¨æ§ãç¨³å®æ§ãå¯ç»´æ¤æ§ãå¥å£®æ§ç­\n\n\n\n\né¡µé¦\n\n\n# 01 | æ¶æå°åºæ¯æä»ä¹ï¼\n\n * ç³»ç»ä¸å­ç³»ç»ãæ¨¡åä¸ç»ä»¶ãæ¡æ¶ä¸æ¶æ\n   * ç³»ç»ä¸å­ç³»ç»\n     * äºèåªæ¯è§åº¦(è§æ¨¡)ä¸ä¸æ ·ï¼å­ç³»ç»æ¯ç³»ç»çä¸é¨å, ä¸ä¸ªç³»ç»å¯è½æ¯å¦ä¸ä¸ªæ´å¤§ç³»ç»çå­ç³»ç»\n       * ç³»ç»: ç±ä¸ç¾¤æå³èçä¸ªä½ç»æç, è¿äºä¸ªä½æç§æå®çè§åè¿ä½ï¼äº§çäºæ°çè½åã\n       * ä¾å¦ï¼æ±½è½¦è½å¤è½½éåè¿ï¼èåå¨æºãåéå¨ãä¼ å¨è½´ãè½¦è½®æ¬èº«é½ä¸å·å¤è¿æ ·çè½åã\n   * æ¨¡ååç»ä»¶\n     * ä¸¤ä¸ªæ¦å¿µå¨å®éå·¥ä½ä¸­å¾å®¹ææ··æ·, å¶å®å®ä»¬é½æ¯ç³»ç»çç»æé¨åï¼åªæ¯ä»ä¸åçè§åº¦æåç³»ç»èå·²\n       * æ¨¡å: ä»é»è¾çè§åº¦æ¥æåç³»ç»åï¼ååæ¨¡åçä¸»è¦ç®çæ¯ä¸å¡ä¸èè´£åç¦»\n       * ç»ä»¶: ä»ç©ççè§åº¦æ¥æåç³»ç»åï¼ååç»ä»¶çä¸»è¦ç®çæ¯ææ¯ä¸ååå¤ç¨ã\n         * å¶å®ï¼âç»ä»¶âçè±æ component ä¹å¯è¯ä¸ºâé¶ä»¶âï¼è¿æ ·æ´å®¹æçè§£ä¸äºï¼âé¶ä»¶âæ¯ä¸ä¸ªç©ççæ¦å¿µï¼å·å¤âç¬ç«ä¸å¯æ¿æ¢âçç¹ç¹ã\n   * æ¡æ¶ä¸æ¶æ\n     * æ¡æ¶(framework)å³æ³¨çæ¯âè§èâï¼æ¶æ(architecture)å³æ³¨çæ¯âç»æâãä»è±æåå­å¯ä»¥çåºä¸åä¹å¤ã\n       * æ¶æå¯ä»¥ä»¥ä¸åçè§åº¦è¿è¡åè§£ï¼å¦ï¼ä¸å¡é»è¾ãç©çé¨ç½²ãå¼åè§èç­ãè¿å°±æ¯ ibm ç rup å°è½¯ä»¶æ¶æè§å¾åä¸ºèåçâ4+1 è§å¾âçåå ã\n         * ä¾å¦ï¼å¯ä»¥æèä¸ âå­¦çç®¡çç³»ç»â çæ¶æ\n           * ä¸å¡é»è¾ï¼ç»å½æ³¨åãä¸ªäººä¿¡æ¯ ä»¥å ä¸ªäººæç»©ï¼ç©çï¼nginxãwebæå¡å¨ ä»¥å æ°æ®åºï¼å¼åè§è: mvc æ¶æ\n       * ä½èå°æ¶æéæ°å®ä¹ä¸ºï¼è½¯ä»¶æ¶ææè½¯ä»¶ç³»ç»çé¡¶å±ç»æã\n         * æ¶æéè¦æç¡®: ä¸ç¾¤å³èä¸ªä½, ä»¥åä¸ªä½è¿ä½ååä½çè§åã\n     * çè§£\n       * æ¡æ¶æ¯ä¸ç§çº¦æï¼èæ¶æä¾§éäºæ¹åçæå¯¼\n       * æ¶æçç»ææ¯ç³»ç»ï¼ç³»ç»æ¯å©ç¨ä¸ç³»åä¸ªä½(å­ç³»ç»ãæ¨¡åç­)åè§åè¾¾å°æ¢å®ç®æ ã\n\n\n\n\né¡µé¦\n\n\n# 02 | æ¶æè®¾è®¡çåå²èæ¯\n\n * æ¶ææ¯ä¸ºäºè§£å³å¤ææ§\n   * æ¼åå²\n     * æºå¨è¯­è¨ -> æ±ç¼è¯­è¨ -> é«çº§è¯­è¨ -> ç¬¬ä¸æ¬¡è½¯ä»¶å±æºä¸ç»æåç¨åºè®¾è®¡ -> ç¬¬äºæ¬¡è½¯ä»¶å±æºä¸é¢åå¯¹è±¡ -> è½¯ä»¶æ¶æ\n   * èåªæè§æ¨¡è¾å¤§çè½¯ä»¶ç³»ç»æä¼é¢ä¸´è½¯ä»¶æ¶æç¸å³çé®é¢ï¼ä¾å¦ï¼ç³»ç»è§æ¨¡åºå¤§ï¼åé¨è¦åä¸¥éï¼å¼åæçä½ï¼åç»­ä¿®æ¹åæ©å±å°é¾, å®¹æåºé®é¢ä¸å¾é¾ææ¥åä¿®å¤ï¼\n   * éçè½¯ä»¶ç³»ç»è§æ¨¡çå¢å ï¼è®¡ç®ç¸å³çç®æ³åæ°æ®ç»æä¸åææä¸»è¦çè®¾è®¡é®é¢ï¼å½ç³»ç»ç±è®¸å¤é¨åç»ææ¶ï¼æ´ä¸ªç³»ç»çç»ç»ï¼ä¹å°±æ¯æè¯´çâè½¯ä»¶æ¶æâï¼å¯¼è´äºä¸ç³»åæ°çè®¾è®¡é®é¢ã\n * æèé¢\n   * ä¸ºä½ç»æåç¼ç¨ãé¢åå¯¹è±¡ç¼ç¨ãè½¯ä»¶å·¥ç¨ãæ¶æè®¾è®¡æåé½æ²¡ææä¸ºè½¯ä»¶é¢åçé¶å¼¹ï¼\n     * æè: å¯ä¸ä¸åçæ¯ååæ¬èº«, ä¸å¡ä¼éçæ¶é´è¶æ¥è¶å¤æ\n\n\n\n\né¡µé¦\n\n\n# 03 | æ¶æè®¾è®¡çç®ç\n\n * ç®ç\n   * è§£å³è½¯ä»¶ç³»ç»å¤æåº¦å¸¦æ¥çé®é¢\n     * å¤æåº¦åå«äºä¸å¡å¤æåº¦ãèµæºãææ¬ãè¿åº¦ãå¢éç¶æç­å ç´ ï¼å¹¶ä¸å°½ééå\n     * ä¸è¬çä¸ä¸ªæ¶æå¸ä¸è¬å¯ä»¥æ¯æ20äººä»¥ä¸çå¼åå¢é\n * ç®åçå¤æåº¦åææ¡ä¾\n   * è®¾è®¡ä¸ä¸ªå¤§å­¦çå­¦çç®¡çç³»ç»ï¼å¶åºæ¬åè½åæ¬ç»å½ãæ³¨åãæç»©ç®¡çãè¯¾ç¨ç®¡çç­ã\n * æèé¢\n   * æç§âæ¶æè®¾è®¡çä¸»è¦ç®çæ¯ä¸ºäºè§£å³è½¯ä»¶å¤æåº¦å¸¦æ¥çé®é¢âè¿ä¸ªæå¯¼ææ³æ¥åæä¸ä¸ä½ ç®åçä¸å¡ç³»ç»æ¶æ\n\n\n\n\né¡µé¦\n\n\n# 04 | å¤æåº¦æ¥æºï¼é«æ§è½\n\n * é«æ§è½å¸¦æ¥çå¤æåº¦ä¸»è¦ä½ç°å¨ä¸¤æ¹é¢\n   * åå°è®¡ç®æºåé¨ä¸ºäºé«æ§è½å¸¦æ¥çå¤æåº¦\n     * éè¦èèå¦å¤è¿ç¨ãå¤çº¿ç¨ãè¿ç¨é´éä¿¡ãå¤çº¿ç¨å¹¶åç­ææ¯ç¹\n       * ä¾å¦ï¼nginx å¯ä»¥ç¨å¤è¿ç¨ä¹å¯ä»¥ç¨å¤çº¿ç¨ï¼jboss éç¨çæ¯å¤çº¿ç¨ï¼redis éç¨çæ¯åè¿ç¨ï¼memcache éç¨çæ¯å¤çº¿ç¨ï¼è¿äºç³»ç»é½å®ç°äºé«æ§è½ï¼ä½åé¨å®ç°å·®å¼å´å¾å¤§ã\n   * å¤å°è®¡ç®æºéç¾¤ä¸ºäºé«æ§è½å¸¦æ¥çå¤æåº¦\n     * ä¾å¦ï¼æ·å®\"å11\"ï¼æ¥èå¾®ä¿¡çº¢åç­\n     * æ¹æ¡\n       * ä»»å¡åé\n         * éç¾¤ä¸­æ¯ä¸ªä¸»æºçå·¥ä½åå®¹ä¸æ ·ï¼é½æ¯å®æ´ä»»å¡æµç¨\n           * å½æµéç¹å«é«æ¶ï¼ä»»å¡åéå¨(å¦ï¼lvsãnginxãf5ç­)ä¹ä¼æä¸ºç¶é¢\n       * ä»»å¡åè§£\n         * å°å¤æä»»å¡æè§£åºå­ä»»å¡ï¼åå¯¹å­ä»»å¡åé«æ§è½\n           * æåç²åº¦è¿ç»ï¼ä¼å¸¦æ¥å¶ä»çå¤ææ§ãå¦ï¼è°ç¨é¾å¤ªé¿å½±åæ§è½ç­\n         * ä¼ç¹ï¼\n           * ç®åçç³»ç»æ´å å®¹æåå°é«æ§è½\n           * å¯ä»¥éå¯¹åä¸ªä»»å¡è¿è¡æ©å±ï¼æ´æéå¯¹æ§\n         * ä¾å¦\n           * å¾®ä¿¡åå°æ¶æä»é»è¾ä¸å°åä¸ªå­ä¸å¡è¿è¡äºæåï¼åæ¬ï¼æ¥å¥ãæ³¨åç»å½ãæ¶æ¯ãlbsãæä¸æãæ¼æµç¶ãå¶ä»ä¸å¡ï¼èå¤©ãè§é¢ãæååç­ï¼ã\n * æèé¢\n   * ä½ æå¨çä¸å¡ä½ç³»ä¸­ï¼é«æ§è½çç³»ç»éç¨çæ¯åªç§æ¹å¼ï¼ç®åæ¯å¦ææ¹è¿åæåçç©ºé´ï¼\n\n\n\n\né¡µé¦\n\n\n# 05 | å¤æåº¦æ¥æºï¼é«å¯ç¨\n\n * æ ¸å¿ï¼åä½å¤ä»½ä¸å¤±æè½¬ç§»\n   * ä¸»å¤ï¼å·å¤ãç­å¤ãæ¸©å¤\n   * å·ä½å®è·µçè¿ç¨ä¸­ï¼å­å¨ä¸ä¸ªæ¬è´¨ççç¾ï¼éè¿åä½æ¥å®ç°çé«å¯ç¨ç³»ç»ï¼ç¶æå³ç­æ¬è´¨ä¸å°±ä¸å¯è½åå°å®å¨æ­£ç¡®ã\n * åºæ¯\n   * è®¡ç®é«å¯ç¨\n     * æä¸ä¸ªç¹ç¹å°±æ¯æ è®ºå¨åªå°æºå¨ä¸è¿è¡è®¡ç®ï¼åæ ·çç®æ³åè¾å¥æ°æ®ï¼äº§åºçç»æé½æ¯ä¸æ ·ç\n   * å­å¨é«å¯ç¨\n     * é¾ç¹ä¸å¨äºå¦ä½å¤ä»½æ°æ®ï¼èå¨äºå¦ä½åå°æèè§é¿æ°æ®ä¸ä¸è´å¯¹ä¸å¡é æçå½±åã\n     * å­å¨ä¸è®¡ç®ç¸æ¯ï¼ä¸ä¸ªæ¬è´¨ä¸çåºå«ï¼å°æ°æ®ä»ä¸å°æºå¨æ¬å°å°å¦ä¸å°æºå¨ï¼éè¦ç»è¿çº¿è·¯è¿è¡ä¼ è¾ã\n       * çº¿è·¯ä¼ è¾çéåº¦æ¯æ¯«ç§çº§å«ï¼åä¸æºæ¿åé¨è½å¤åå°å æ¯«ç§ï¼åå¸å¨ä¸åå°æ¹çæºæ¿ï¼ä¼ è¾èæ¶éè¦å åçè³ä¸ç¾æ¯«ç§ã\n         * ä¾å¦ï¼ä»å¹¿å·æºæ¿å°åäº¬æºæ¿ï¼ç¨³å®æåµä¸ ping å»¶æ¶å¤§çº¦æ¯50msï¼ä¸ç¨³å®æåµä¸å¯è½è¾¾å° 1s çè³æ´å¤ã\n * é«å¯ç¨ç¶æå³ç­\n   * ç¬è£å¼\n   * ååå¼\n     * ååå¼å³ç­æçæ¯ä¸¤ä¸ªç¬ç«çä¸ªä½éè¿äº¤æµä¿¡æ¯ï¼ç¶åæ ¹æ®è§åè¿è¡å³ç­ï¼æå¸¸ç¨çååå¼å³ç­å°±æ¯ä¸»å¤å³ç­ã\n       * ååå¼å³ç­çæ¶æä¸å¤æï¼è§åä¹ä¸å¤æï¼å¶é¾ç¹å¨äºï¼å¦æå¦æä¸¤èçä¿¡æ¯äº¤æ¢åºç°é®é¢ï¼æ¯å¦ä¸»å¤è¿æ¥ä¸­æ­ï¼ï¼æ­¤æ¶ç¶æå³ç­åºè¯¥æä¹åã\n   * æ°ä¸»å¼\n     * æ°ä¸»å¼å³ç­æçæ¯å¤ä¸ªç¬ç«çä¸ªä½éè¿æç¥¨çæ¹å¼æ¥è¿è¡ç¶æå³ç­ãä¾å¦ï¼zookeeper éç¾¤å¨éä¸¾ leader æ¶å°±æ¯éç¨è¿ç§æ¹å¼\n       * å®¹æäº§çèè£ï¼ä¸éä¸¾ç®æ³å¤æ\n         * ä¸ºäºè§£å³èè£é®é¢ï¼æ°ä¸»å¼å³ç­çç³»ç»ä¸è¬é½éç¨âæç¥¨èç¹æ°å¿é¡»è¶è¿ç³»ç»æ»èç¹æ°ä¸åâè§åæ¥å¤çã\n           * è¿ç§æ¹å¼è½ç¶è§£å³äºèè£é®é¢ï¼ä½åæ¶éä½äºç³»ç»æ´ä½çå¯ç¨æ§ï¼å³å¦æç³»ç»ä¸æ¯å ä¸ºèè£é®é¢å¯¼è´æç¥¨èç¹æ°è¿å°ï¼èççæ¯å ä¸ºèç¹æéï¼æ­¤æ¶ç³»ç»ä¹ä¸ä¼éåºä¸»èç¹ï¼æ´ä¸ªç³»ç»å°±ç¸å½äºå®æºäº\n * æèé¢\n   * é«æ§è½åé«å¯ç¨æ¯å¾å¤ç³»ç»çæ ¸å¿å¤æåº¦ï¼ä½ è®¤ä¸ºåªä¸ªä¼æ´å¤æä¸äºï¼çç±æ¯ä»ä¹ï¼\n\n\n\n\né¡µé¦\n\n\n# 06 | å¤æåº¦æ¥æºï¼å¯æ©å±æ§\n\n * è®¾è®¡å·å¤è¯å¥½å¯æ©å±æ§çç³»ç»ï¼æä¸¤ä¸ªåºæ¬æ¡ä»¶ï¼æ­£ç¡®é¢æµååãå®ç¾å°è£åå\n * æ­£ç¡®é¢æµåå\n   * å¯ä¸ä¸åçæ¯åå\n   * å¤ææ§å¨äºï¼ä¸å¯è½æ¯ç¹é½èèå¯æ©å±æ§ï¼ä¹ä¸è½ä¸èèæ©å±æ§ï¼ææçé¢æµé½æåºéå¯è½æ§\n   * é¢æµæ´å¤çæ¯é èªå·±çç»éªãç´è§\n * åºå¯¹åå\n   * å°è£ååï¼éç¦»ä¸å\n     * è¿ä¹æ¯'è®¾è®¡æ¨¡å¼'çææ³, 'è§åå¼æ'äº¦æ¯å¦æ­¤\n     * å°è£ååå¸¸ç¨çæ¹å¼ï¼æç¼åºä¸ä¸ªâæ½è±¡å±âåä¸ä¸ªâå®ç°å±â, æ½è±¡å±å¯¹å¤æä¾ç¸å¯¹ç¨³å®çæ¥å£ï¼å®ç°å±æ ¹æ®å·ä½ä¸å¡å®å¶å¼åã\n   * æ³¨æï¼\n     * å¤ªçµæ´»ä¼é ææ··ä¹±\n * æèé¢\n   * ä½ å¨å·ä½ä»£ç ä¸­ä½¿ç¨è¿åªäºå¯æ©å±çææ¯ï¼æç»çææå¦ä½ï¼\n\n\n\n\né¡µé¦\n\n\n# 07 | å¤æåº¦æ¥æºï¼ä½ææ¬ãå®å¨ãè§æ¨¡\n\n * ä½ææ¬çå¤æåº¦ä½ç°å¨ï¼å¼å¥æ°ææ¯æåé æ°ææ¯\n   * å¼å¥æ°ææ¯ãä¸»è¦å¤æåº¦å¨äºéè¦å»çææ°ææ¯ï¼å¹¶ä¸å°æ°ææ¯ä¸å·²æææ¯ç»åï¼\n   * å¼åæ°ææ¯ãä¸»è¦å¤æåº¦å¨äºéè¦å»åé å¨æ°ççå¿µåææ¯ï¼æç»åç°æææ¯æå®å¨åæ°\n     * å¾å¾åªæâåæ°âæè½è¾¾å°ä½ææ¬ç®æ ï¼å¦ï¼\n       * linkedin ä¸ºäºå¤çæ¯å¤© 5 åäº¿çäºä»¶ï¼å¼åäºé«æç kafka æ¶æ¯ç³»ç»ã\n       * æ°æµªå¾®åå°ä¼ ç»ç redis/mc + mysql æ¹å¼ï¼æ©å±ä¸º redis/mc + ssd cache + mysql æ¹å¼ï¼ssd cache ä½ä¸º l2 ç¼å­ä½¿ç¨ï¼æ¢è§£å³äº mc/redis ææ¬è¿é«ï¼å®¹éå°çé®é¢ï¼ä¹è§£å³äºç©¿é db å¸¦æ¥çæ°æ®åºè®¿é®ååï¼æ¥æºï¼https://www.infoq.cn/article/weibo-platform-archietureï¼\n * å®å¨çå¤æåº¦ä½ç°å¨ï¼åè½å®å¨åæ¶æå®å¨\n   * åè½å®å¨(å¶å®å°±æ¯âé²å°å·â, æ¬è´¨æ¯æ¼æ´)\n     * å¸¸è§ç xss æ»å»ãcsrf æ»å»ãsql æ³¨å¥ãwindows æ¼æ´ãå¯ç ç ´è§£ç­ï¼æ¬è´¨ä¸æ¯å ä¸ºç³»ç»å®ç°ææ¼æ´ã\n   * æ¶æå®å¨(å¶å®å°±æ¯âé²å¼ºçâ, æ¬è´¨æ¯ææç ´å)\n     * å¦ ddosãä¼ ç»çæ¶æå®å¨ä¸»è¦ä¾é é²ç«å¢ï¼é²ç«å¢æåºæ¬çåè½å°±æ¯éç¦»ç½ç»ï¼éè¿å°ç½ç»ååæä¸åçåºåï¼å¶å®åºä¸ååºåä¹é´çè®¿é®æ§ç­ç¥æ¥æ§å¶ä¸åä¿¡ä»»ç¨åº¦åºåé´ä¼ éçæ°æ®æµã\n * è§æ¨¡çå¤æåº¦ä½ç°å¨ï¼éåå¼èµ·è´¨å\n   * åè½è¶æ¥è¶å¤\n     * åè®¾ç³»ç»é´çåè½é½æ¯ä¸¤ä¸¤ç¸å³çï¼ç³»ç»çå¤æåº¦ = åè½æ°é + åè½ä¹é´çè¿æ¥æ°é. éçåè½çå¢å¤ï¼å¤æåº¦è¿ä¹ææ°çå¢é¿ã\n   * æ°æ®è¶æ¥è¶å¤\n     * mysqlåè¡¨ä¸è¬æ¨èå¨ 5000 ä¸è¡å·¦å³ãå¦æå ä¸ºä¸å¡çåå±ï¼åè¡¨æ°æ®è¾¾å°äº 10 äº¿è¡ï¼å°±ä¼äº§çå¾å¤é®é¢ï¼ä¾å¦ï¼\n       * æ·»å ç´¢å¼ãä¿®æ¹è¡¨ç»æä¼å¾æ¢ï¼å¯è½éè¦å ä¸ªå°æ¶ï¼è¿å ä¸ªå°æ¶åæ°æ®åºè¡¨æ¯æ æ³æå¥æ°æ®çï¼ç¸å½äºä¸å¡åæºäºã\n       * å³ä½¿æç´¢å¼ï¼ç´¢å¼çæ§è½ä¹å¯è½ä¼å¾ä½ï¼å ä¸ºæ°æ®éå¤ªå¤§ã\n       * æ°æ®åºå¤ä»½èæ¶å¾é¿ã\n     * å¦ææè¡¨ï¼åä¼å¸¦æ¥ï¼æä¹æï¼æäºä¹åäºå¡åæ¥è¯¢ç­ä½¿ç¨æ¹å¼ï¼ç­å¤æåº¦\n * æèé¢\n   * å­¦ä¹ äº 6 å¤§å¤æåº¦æ¥æºåï¼ç»åä½ æå¨çä¸å¡ï¼åæä¸ä¸ä¸»è¦çå¤æåº¦æ¯è¿å¶ä¸­çåªäºé¨åï¼æ¯å¦è¿æå¶ä»å¤æåº¦åå ï¼\n\n\n\n\né¡µé¦\n\n\n# 08 | æ¶æè®¾è®¡ä¸åå\n\n * ä¸ååï¼åé > æ¼å > ç®å\n   * åéåå\n     * åéä¼äºä¸çé¢å\n     * çæ­£ä¼ç§çæ¶æé½æ¯å¨ä¼ä¸å½åäººåãæ¡ä»¶ãä¸å¡ç­åç§çº¦æä¸è®¾è®¡åºæ¥çï¼è½å¤åçå°å°èµæºæ´åå¨ä¸èµ·å¹¶åæ¥åºæå¤§åæï¼å¹¶ä¸è½å¤å¿«éè½å°ã\n     * å¸¸è§çå¤±è´¥åå \n       * æ²¡é£ä¹å¤äººï¼å´æ³å¹²é£ä¹å¤æ´»\n       * æ²¡æé£ä¹å¤ç§¯ç´¯ï¼å´æ³ä¸æ­¥ç»å¤©\n         * ä¸çé¢åçæ¹æ¡å¶å®é½æ¯âé¼âåºæ¥çï¼\n       * æ²¡æé£ä¹åè¶çä¸å¡åºæ¯ï¼å´å¹»æ³çµåä¸éªæä¸ºå¤©æ\n         * æ²¡æqqçç¨æ·éï¼å´æç§qqçä½éè¿è¡è®¾è®¡\n   * ç®ååå\n     * ç®åç±äºå¤æï¼\n       * è¶æ¥è¶ç²¾ç»ãè¶æ¥è¶å¤ææ¯æ­£å¸¸çæ¼åï¼ä½ä¸æ­¥å°ä½æ¶ä¼å¤§å¤§å¢å å¤æåº¦åä¸å¯æ§ç¨åº¦\n       * æ¶ææ¯å¨æå¯¼æ¼åæ¹ååèå´ï¼å°½å¯è½çç®åæ¶ä¼æ´å¥å£®\n     * ãunix ç¼ç¨èºæ¯ãæ»ç»ç kissï¼keep it simple, stupid!ï¼ååä¸æ ·éåºäºæ¶æè®¾è®¡ã\n   * æ¼ååå\n     * æ¼åä¼äºä¸æ­¥å°ä½\n     * æ ¹æ®ç¯å¢çååï¼æ¼åæ¶æè¿è¡éåºå½åé¶æ®µ\n * æèé¢\n   * è¿ä¸æ¡æ¶æè®¾è®¡ååæ¯å¦æ¯æ¬¡é½è¦å¨é¨éµå¾ªï¼æ¯å¦æä¼åçº§ï¼è°è°ä½ ççè§£ï¼å¹¶è¯´è¯´ä¸ºä»ä¹ã\n\n\n\n\né¡µé¦\n\n\n# 09 | æ¶æè®¾è®¡ååæ¡ä¾\n\n * æ¡ä¾\n   * æ·å®ç½ å qq\n * æèé¢\n   * æç´¢ä¸ä¸ªäºèç½å¤§åï¼batjãtmd ç­ï¼çæ¶æåå±æ¡ä¾ï¼åæä¸ä¸å¶åå±è¿ç¨ï¼ççåªäºå°æ¹ä½ç°äºè¿ä¸æ¡æ¶æè®¾è®¡ååã\n * reference\n   * <æ·å®ææ¯è¿åå¹´>\n\n\n\n\né¡µé¦\n\n\n# 10 | æ¶æè®¾è®¡æµç¨ï¼è¯å«å¤æåº¦\n\n * è¯å«å¤æåº¦\n   * å°ä¸»è¦çå¤æåº¦é®é¢ååºæ¥ï¼ç¶åæ ¹æ®ä¸å¡ãææ¯ãå¢éç­ç»¼åæåµè¿è¡æåºï¼ä¼åè§£å³å½åé¢ä¸´çæä¸»è¦çå¤æåº¦é®é¢ã\n     * è®¾è®¡çç®æ åºè¯¥ä»¥å³°å¼æ¥è®¡ç®ãå³°å¼ä¸è¬åå¹³åå¼ç 3 åã\n   * å¸¸è§ç³»ç»çæ§è½éçº§éè¦ççäºå¿\n     * ä¾å¦nginxè´è½½åè¡¡æ§è½æ¯3ä¸å·¦å³ï¼mcçè¯»åæ§è½5ä¸å·¦å³ï¼kafkaå·ç§°ç¾ä¸çº§ï¼zookeeperåå¥è¯»å2ä¸ä»¥ä¸ï¼httpè¯·æ±è®¿é®å¤§æ¦å¨2ä¸å·¦å³ã\n\n\n\n\né¡µé¦\n\n\n# 11 | æ¶æè®¾è®¡æµç¨ï¼è®¾è®¡å¤éæ¹æ¡\n\n * å¤éæ¹æ¡\n   * ä»¥3-5ä¸ªä¸ºä½³\n     * å°äº3ä¸ªï¼åæ¾å¾æè·¯ç­é(å¯ä»¥é²æ­¢æç»´ç­éï¼ç®åç­æµï¼æç»´ç²åºç­å³ç­é·é±); å¤äº5ä¸ªåæµªè´¹ç²¾å\n   * å¤éæ¹æ¡ä¹é´è¦å·®å¼ææ¾\n     * ä¾å¦ï¼ä¸»å¤æ¹æ¡åéç¾¤æ¹æ¡å·®å¼å°±å¾ææ¾ï¼æèåæ ·æ¯ä¸»å¤æ¹æ¡ï¼ç¨ zookeeper åä¸»å¤å³ç­åç¨ keepalived åä¸»å¤å³ç­çå·®å¼ä¹å¾ææ¾ãä½æ¯é½ç¨ zookeeper åä¸»å¤å³ç­ï¼ä¸ä¸ªæ£æµå¨ææ¯ 1 åéï¼ä¸ä¸ªæ£æµå¨ææ¯ 5 åéï¼è¿å°±ä¸æ¯æ¶æä¸çå·®å¼ï¼èæ¯ç»èä¸çå·®å¼äºï¼ä¸éååæä¸¤ä¸ªæ¹æ¡ã\n   * å¤éæ¹æ¡çææ¯ä¸è¦å±éäºå·²ç»çæçææ¯æ¹æ¡\n     * è®¾è®¡æ¶ææ¶ï¼æ¶æå¸éè¦å°è§éæ¾å®½ï¼èèæ´å¤å¯è½æ§ã\n * å¤éæ¹æ¡ä¸å®è¿äºè¯¦ç»\n   * å¤éé¶æ®µå³æ³¨çæ¯ææ¯éåï¼èä¸æ¯ææ¯ç»èï¼ææ¯éåçå·®å¼è¦æ¯è¾ææ¾\n   * å¤éæ¹æ¡è¿äºè¯¦ç»çç¼ºç¹ï¼\n     * èè´¹äºå¤§éçæ¶é´åç²¾åã\n     * å°æ³¨æåéä¸­å°ç»èä¸­ï¼å¿½ç¥äºæ´ä½çææ¯è®¾è®¡ï¼å¯¼è´å¤éæ¹æ¡æ°éä¸å¤æèå·®å¼ä¸å¤§ã\n     * è¯å®¡çæ¶åå¶ä»äººä¼è¢«å¾å¤ç»èç»ç»è¿å»ï¼è¯å®¡ææå¾å·®ã\n\n\n\n\né¡µé¦\n\n\n# 12 | æ¶æè®¾è®¡æµç¨ï¼è¯ä¼°åéæ©å¤éæ¹æ¡\n\n * 360 åº¦ç¯è¯\n   * å·ä½çæä½æ¹å¼ä¸ºï¼ååºæä»¬éè¦å³æ³¨çè´¨éå±æ§ç¹ï¼ç¶ååå«ä»è¿äºè´¨éå±æ§çç»´åº¦å»è¯ä¼°æ¯ä¸ªæ¹æ¡ï¼åç»¼åæééåå½æ¶æåµçæä¼æ¹æ¡ã\n     * å¸¸è§çæ¹æ¡è´¨éå±æ§ç¹æï¼æ§è½ãå¯ç¨æ§ãç¡¬ä»¶ææ¬ãé¡¹ç®æå¥ãå¤æåº¦ãå®å¨æ§ãå¯æ©å±æ§ç­ã\n * æ¡ä¾: ä¸å¡æ¶æ¯çå¯é ä¼ è¾\n   * æ¹æ¡ç¯è¯\n   * ç»è®ºï¼æç»éæ©å¤éæ¹æ¡ 2ï¼åå æï¼ æé¤å¤éæ¹æ¡ 1 çä¸»è¦åå æ¯å¯è¿ç»´æ§; å¹¶ä¸ kafka çä¸»è¦è®¾è®¡ç®æ æ¯é«æ§è½æ¥å¿ä¼ è¾ï¼èæä»¬çæ¶æ¯éåè®¾è®¡çä¸»è¦ç®æ æ¯ä¸å¡æ¶æ¯çå¯é ä¼ è¾ã æé¤å¤éæ¹æ¡ 3 çä¸»è¦åå æ¯å¤æåº¦ï¼ç®åå¢éææ¯å®ååäººåäººåè§æ¨¡ï¼æ»å± 6 äººï¼è¿æå¶ä»ä¸­é´ä»¶ç³»ç»éè¦å¼ååç»´æ¤ï¼ å¤éæ¹æ¡ 2 çä¼ç¹å°±æ¯å¤æåº¦ä¸é«ï¼ä¹å¯ä»¥å¾å¥½å°èå¥ç°æè¿ç»´ä½ç³»ï¼å¯é æ§ä¹æä¿éã\n   * æ¹æ¡äºç¼ºç¹ï¼\n     * æ§è½ãææ¬ãçèµ·æ¥ä¸ä¼é\n * æèé¢\n   * rocketmq å kafka æä»ä¹åºå«ï¼é¿éä¸ºä½éæ©äºrocketmq ï¼\n\n\n\n\né¡µé¦\n\n\n# 13 | æ¶æè®¾è®¡æµç¨ï¼è¯¦ç»æ¹æ¡è®¾è®¡\n\n * è¯¦ç»æ¹æ¡è®¾è®¡å°±æ¯å°æ¹æ¡æ¶åçå³é®ææ¯ç»èç»ç¡®å®ä¸æ¥\n   * æ·±åº¦çè§£å³é®ç»èç¹ï¼é¿åå ä¸ºéæ¼äºæä¸ªå³é®ææ¯ç¹æèå³é®çè´¨éå±æ§é ææ¹æ¡çæ§è¡åºç°é®é¢\n   * éè¿åæ­¥éª¤ãåé¶æ®µãåç³»ç»ç­æ¹å¼ï¼å°½ééä½æ¹æ¡æ§è¡å¤æåº¦\n * æ¶æå¸éè¦ååªäºææ¯éªè¯ï¼æèç ç©¶å°ä»ä¹æ·±åº¦ä»¥åï¼æè½å¤æ­è¯¥ææ¯æ¯å¦éåå¢ï¼\n   * åºæ¬åçï¼ä¼ç¹ç¼ºç¹ï¼å³é®è®¾è®¡ç¹ï¼æ¶æå¸è³å°è¦å®è£è¿ï¼ç¼ådemoä½éªè¿ï¼ç¡®å®éååï¼è¦è¿è¡æ§è½åå¯ç¨æ§æµè¯ä¾å¦esçç´¢æ§è®¾è®¡å°±æ¯å³é®è®¾è®¡ç¹\n\n\n\n\né¡µé¦\n\n\n# 14 | é«æ§è½æ°æ®åºéç¾¤ï¼è¯»ååç¦»\n\n * é«æ§è½æ°æ®åºéç¾¤çä¸¤ç§æ¹å¼ï¼è¯»ååç¦»ãååºåè¡¨\n\n * è¯»ååç¦»\n   \n   * å®ç°\n     * æ­å»ºä¸»ä»éç¾¤ï¼ä¸»è´è´£è¯»åï¼ä»åªè´è´£è¯»ï¼éè¿å¤å¶ä¸»æºæ°æ®å°ä»èç¹å°è¾¾æ°æ®ä¸è´ã\n     * ä¸å¡æå¡å¨å°åæä½åéç»ä¸»èç¹ï¼è¯»æä½åæ£å°ä»èç¹ã\n     * æ³¨æï¼\n       * æ¯ä¸»ä»éç¾¤ï¼ä¸æ¯ä¸»å¤éç¾¤\n   * å¤æåº¦\n     * ä¸»ä»å¤å¶å»¶è¿\n       1. åæä½åçè¯»æä½æå®åç»æ°æ®åºä¸»æå¡å¨\n          * å¯¹ä¸å¡çä¾µå¥åå½±åè¾å¤§\n       2. è¯»ä»æºå¤±è´¥ååè¯»ä¸æ¬¡ä¸»æº(äºæ¬¡è¯»å)\n       3. å³é®ä¸å¡è¯»åæä½å¨é¨æåä¸»æºï¼éå³é®ä¸å¡éç¨è¯»ååç¦»\n     * åéæºå¶\n       * ç¨åºä»£ç å°è£\n         * ç¨åºä»£ç å°è£æå¨ä»£ç ä¸­æ½è±¡ä¸ä¸ªæ°æ®è®¿é®å±ï¼æä»¥æçæç« ä¹ç§°è¿ç§æ¹å¼ä¸ºâä¸­é´å±å°è£âï¼ï¼å®ç°è¯»åæä½åç¦»åæ°æ®åºæå¡å¨è¿æ¥çç®¡ç\n           * ç®åå¼æºçå®ç°æ¹æ¡ä¸­ï¼æ·å®ç tddlï¼ttaobao distributed data layerï¼å¤å·: å¤´é½å¤§äºï¼æ¯æ¯è¾æåçã\n       * ä¸­é´ä»¶å°è£\n         * ä¸­é´ä»¶å¯¹ä¸å¡æå¡å¨æä¾ sql å¼å®¹çåè®®ï¼ä¸å¡æå¡å¨æ é¡»èªå·±è¿è¡è¯»ååç¦»ã\n         * å¯¹äºä¸å¡æå¡å¨æ¥è¯´ï¼è®¿é®ä¸­é´ä»¶åè®¿é®æ°æ®åºæ²¡æåºå«ï¼\n           * ç°å¨ mysql å®æ¹æ¨è mysql router\n           * å¥è 360 å¬å¸ä¹å¼æºäºèªå·±çæ°æ®åºä¸­é´ä»¶ atlasï¼atlas æ¯åºäº mysql proxy å®ç°ç\n\n * ååºåè¡¨\n   \n   * è§ä¸èåå®¹\n\n * æèé¢\n   \n   * æ°æ®åºè¯»ååç¦»ä¸è¬åºç¨äºä»ä¹åºæ¯ï¼è½æ¯æå¤å¤§çä¸å¡è§æ¨¡ï¼\n     * è¯»ååç¦»éç¨åæºå¹¶åæ æ³æ¯æå¹¶ä¸è¯»çè¯·æ±æ´å¤çæå½¢ãå¨åæºæ°æ®åºæåµä¸ï¼è¡¨ä¸å ç´¢å¼ä¸è¬å¯¹æ¥è¯¢æä¼åä½ç¨å´å½±ååå¥éåº¦ï¼è¯»ååç¦»åå¯ä»¥åç¬å¯¹è¯»åºè¿è¡ä¼åï¼ååºä¸åå°ç´¢å¼ï¼å¯¹è¯»åçè½åé½ææåï¼ä¸è¯»çæåæ´å¤ä¸äºã\n     * ä¸éç¨çæåµ:\n       * 1 å¦æå¹¶ååå¥ç¹å«é«ï¼åæºåå¥æ æ³æ¯æï¼å°±ä¸éåè¿ç§æ¨¡å¼ã\n       * 2 éè¿ç¼å­ææ¯æèç¨åºä¼åè½å¤æ»¡è¶³è¦æ±\n\n\n\n\né¡µé¦\n\n\n# 15 | é«æ§è½æ°æ®åºéç¾¤ï¼ååºåè¡¨\n\n * ååºåè¡¨ï¼åå \n   * åä¸ªæ°æ®åºæå¡å¨å­å¨çæ°æ®éä¸è½å¤ªå¤§ã\n     * å½æ°æ®éè¾¾å°åä¸çè³ä¸äº¿æ¡çæ¶åï¼åå°æ°æ®åºæå¡å¨çå­å¨è½åä¼æä¸ºç³»ç»çç¶é¢ï¼ä¸»è¦ä½ç°å¨è¿å ä¸ªæ¹é¢ï¼\n       * æ°æ®éå¤ªå¤§ï¼è¯»åçæ§è½ä¼ä¸éï¼å³ä½¿æç´¢å¼ï¼ç´¢å¼ä¹ä¼åå¾å¾å¤§ï¼ï¼æ§è½åæ ·ä¼ä¸éã\n       * æ°æ®æä»¶ä¼åå¾å¾å¤§ï¼æ°æ®åºå¤ä»½åæ¢å¤éè¦èè´¹å¾é¿æ¶é´\n       * æ°æ®æä»¶è¶å¤§ï¼æç«¯æåµä¸ä¸¢å¤±æ°æ®çé£é©è¶é«ï¼ä¾å¦ï¼æºæ¿ç«ç¾å¯¼è´æ°æ®åºä¸»å¤æºé½åçæéï¼ã\n * ååº\n   * join æä½é®é¢ãäºå¡é®é¢ãææ¬é®é¢\n     * ä¸å¡ååºåï¼åæ¬å¨åä¸ä¸ªæ°æ®åºä¸­çè¡¨åæ£å°ä¸åæ°æ®åºä¸­ï¼å¯¼è´æ æ³ä½¿ç¨ sql ç join æ¥è¯¢ã\n     * åæ¬å¨åä¸ä¸ªæ°æ®åºä¸­ä¸åçè¡¨å¯ä»¥å¨åä¸ä¸ªäºå¡ä¸­ä¿®æ¹ï¼ä¸å¡ååºåï¼è¡¨åæ£å°ä¸åçæ°æ®åºä¸­ï¼æ æ³éè¿äºå¡ç»ä¸ä¿®æ¹ãè½ç¶æ°æ®åºååæä¾äºä¸äºåå¸å¼äºå¡çè§£å³æ¹æ¡ï¼ä¾å¦ï¼mysql ç xaï¼ï¼ä½æ§è½å®å¨å¤ªä½ï¼ä¸é«æ§è½å­å¨çç®æ æ¯ç¸è¿èçã\n * åè¡¨\n   * åç´åè¡¨\n     * åç´åè¡¨å¼å¥çå¤ææ§ä¸»è¦ä½ç°å¨è¡¨æä½çæ°éè¦å¢å ãåæ¥åªè¦ä¸æ¬¡æ¥è¯¢å°±å¯ä»¥çï¼ç°å¨è¦ä¸¤æ¬¡æèå¤æ¬¡æ¥è¯¢ã\n   * æ°´å¹³åè¡¨\n     * è·¯ç±ãjoinæä½ãcount()æä½ãorder by()æä½\n * å®ç°\n   * ååºåè¡¨å·ä½çå®ç°æ¹å¼ä¹æ¯âç¨åºä»£ç å°è£âåâä¸­é´ä»¶å°è£âï¼ä½å®ç°ä¼æ´å¤æã\n     * è¯»ååç¦»å®ç°æ¶åªè¦è¯å« sql æä½æ¯è¯»æä½è¿æ¯åæä½ï¼éè¿ç®åçå¤æ­ selectãupdateãinsertãdelete å ä¸ªå³é®å­å°±å¯ä»¥åå°\n     * ååºåè¡¨çå®ç°é¤äºè¦å¤æ­æä½ç±»åå¤ï¼è¿è¦å¤æ­ sql ä¸­å·ä½éè¦æä½çè¡¨ãæä½å½æ°ï¼ä¾å¦ count å½æ°)ãorder byãgroup by æä½ç­ï¼ç¶ååæ ¹æ®ä¸åçæä½è¿è¡ä¸åçå¤çã\n * æèé¢\n   * ä½ è®¤ä¸ºä»ä¹æ¶åå¼å¥ååºåè¡¨æ¯åéçï¼æ¯æ°æ®åºæ§è½ä¸å¤çæ¶åå°±å¼å§ååºåè¡¨ä¹ï¼\n * utility\n   * å¦æä½¿ç¨hashè¿è¡åè¡¨çè¯ï¼ä¸ºä»ä¹å¤§å¤æ¹æ¡æ¨è2çnæ¬¡æ¹ä½ä¸ºè¡¨çæ»æ°ï¼é¤äºæ¶ç¼©å®¹æè¿æä»ä¹å¥½å¤åï¼\n     * è¿ä¸ªæ¯hashå½æ°å®ç°çä¸ä¸ªæå·§ï¼å½è®¡ç®hashå¼çæ¶åï¼æ®éåæ³æ¯åä½æä½ï¼ä¾å¦h%lenï¼ä½å¦ælenæ¯2çnæ¬¡æ¹ï¼éè¿ä½æä½æ§è½æ´é«ï¼è®¡ç®æ¹å¼ä¸ºh & (len-1)\n   * éå¯¹mysqlï¼åç°å¦æå­æ®µæblobçå­æ®µï¼select ä¸åè¿ä¸ªå­æ®µï¼ååè¿ä¸ªå­æ®µï¼æçå·®å¼å¾å¤§ï¼è¿ä¸ªæ¯ä»ä¹åå ï¼\n     * blobçå­æ®µæ¯åè¡æ°æ®åå¼å­å¨çï¼èä¸ç£çä¸å¹¶ä¸æ¯è¿ç»­çï¼å æ­¤select blobå­æ®µä¼è®©ç£çè¿å¥éæºioæ¨¡å¼\n\n\n\n\né¡µé¦\n\n\n# 16 | é«æ§è½nosql\n\n * nosql\n   * nosql != no sqlï¼èæ¯ nosql = not only sql\n   * æ¬è´¨ä¸æ¯çºç² acid ä¸­çæä¸ªæèæå ä¸ªç¹æ§ï¼å æ­¤æä»¬ä¸è½ç²ç®å°è¿·ä¿¡ nosql æ¯é¶å¼¹ï¼èåºè¯¥å° nosql ä½ä¸º sql çä¸ä¸ªæåè¡¥åï¼\n * å¸¸è§ç nosql æ¹æ¡åä¸º 4 ç±»\n   * k-v å­å¨ï¼è§£å³å³ç³»æ°æ®åºæ æ³å­å¨æ°æ®ç»æçé®é¢ï¼ä»¥ redis ä¸ºä»£è¡¨ã\n   * ææ¡£æ°æ®åºï¼è§£å³å³ç³»æ°æ®åºå¼º schema çº¦æçé®é¢ï¼ä»¥ mongodb ä¸ºä»£è¡¨ã\n   * åå¼æ°æ®åºï¼è§£å³å³ç³»æ°æ®åºå¤§æ°æ®åºæ¯ä¸ç i/o é®é¢ï¼ä»¥ hbase ä¸ºä»£è¡¨ã\n   * å¨ææç´¢å¼æï¼è§£å³å³ç³»æ°æ®åºçå¨ææç´¢æ§è½é®é¢ï¼ä»¥ elasticsearch ä¸ºä»£è¡¨ã\n     * ä¼ ç»çå³ç³»åæ°æ®åºéè¿ç´¢å¼æ¥è¾¾å°å¿«éæ¥è¯¢çç®çï¼ä½æ¯å¨å¨ææç´¢çä¸å¡åºæ¯ä¸ï¼ç´¢å¼ä¹æ è½ä¸ºåï¼ä¸»è¦ä½ç°å¨ï¼\n       * å¨ææç´¢çæ¡ä»¶å¯ä»¥éææåç»åï¼å¦æéè¿ç´¢å¼æ¥æ»¡è¶³ï¼åç´¢å¼çæ°éä¼éå¸¸å¤ã\n       * å¨ææç´¢çæ¨¡ç³å¹éæ¹å¼ï¼ç´¢å¼æ æ³æ»¡è¶³ï¼åªè½ç¨ like æ¥è¯¢ï¼like æ¥è¯¢æ¯æ´è¡¨æ«æï¼æçéå¸¸ä½ã\n\n\n\n\né¡µé¦\n\n\n# 17 | é«æ§è½ç¼å­æ¶æ\n\n * ç¼å­ç³»ç»\n   * ç¼å­ç©¿é: æ¥è¯¢ä¸å®ä¸å­å¨çæ°æ®æ¶, æ¥è¯¢åæºdbãæµéå¤§(å¤§éçä¸å­å¨æ°æ®è¯·æ±)æ¶dbè¢«åå®\n     * å¸éè¿æ»¤å¨ãç¼å­ç©ºå¼(çå½å¨æç­)\n   * ç¼å­å»ç©¿ï¼ç¼å­ä¸ç§éå¸¸âç­ç¹âçæ°æ®ï¼å¨æä¸ªæ¶é´ç¹è¿æçæ¶åï¼æ°å¥½å¨è¿ä¸ªæ¶é´ç¹å¯¹è¿ä¸ªkeyæå¤§éçå¹¶åè¯·æ±è¿æ¥ï¼ç¬é´æåç«¯dbåå®\n     * äºæ¥é(mutex key)ãä¸è¿æ(ä½åå°å¤çº¿ç¨å·æ°)\n   * ç¼å­éªå´©ï¼è®¾ç½®ç¼å­æ¶éç¨äºç¸åçè¿ææ¶é´ï¼å¯¼è´ç¼å­å¨æä¸æ¶å»åæ¶å¤±æï¼è¯·æ±å¨é¨è½¬åå°dbï¼dbç¬æ¶ååè¿ééªå´©\n     * å¤å¯æ¬ï¼å¹¶ä¸æ¯ä¸ªå¯æ¬è®¾ç½®ä¸åçè¿ææ¶é´(å¨æå®èå´åéæº)\n     * åkeyç­ç¥ï¼è¦ç¼å­çkeyè¿ææ¶é´æ¯tï¼key1æ²¡æè¿ææ¶é´ãå½è¯»åä¸å°keyæ¶å°±è¿åkey1çåå®¹ï¼ç¶åè§¦åä¸ä¸ªåæ¶æ´æ°keyåkey1çäºä»¶\n * ç¼å­çæ´æ°\n   * 1. åæ­¥å·æ°ç¼å­ï¼å½æ´æ°äºæäºä¿¡æ¯åï¼ç«å»è®©ç¼å­å¤±æã\n     * è¿ç§åæ³çä¼ç¹æ¯ç¨æ·ä½éªå¥½ï¼ç¼ºç¹æ¯ä¿®æ¹ä¸ä¸ªæ°æ®å¯è½éè¦è®©å¾å¤ç¼å­å¤±æ\n   * 2. éå½å®¹å¿ä¸ä¸è´ï¼ä¾å¦æä¸çååå°±æ¯è¿æ ·ï¼ææ¥è¯¢çæ¶åæ¾ç¤ºæè´§ï¼ä¸åçæ¶åæç¤ºææ²¡è´§äº\n   * 3. å³é®ä¿¡æ¯ä¸ç¼å­ï¼åºå­ï¼ä»·æ ¼ç­ä¸ç¼å­ï¼å ä¸ºè¿ç±»ä¿¡æ¯æ¥è¯¢ç®åï¼æçé«ï¼å³ç³»æ°æ®åºæ¥è¯¢æ§è½ä¹å¾é«\n * æèé¢\n   * åäº«ä¸ä¸ä½ æå¨çä¸å¡åçè¿åªäºå ä¸ºç¼å­å¯¼è´ççº¿ä¸é®é¢ï¼éåäºä»ä¹æ ·çè§£å³æ¹æ¡ï¼ææå¦ä½ï¼\n\n\n\n\né¡µé¦\n\n\n# 18 | åæå¡å¨é«æ§è½æ¨¡å¼ï¼ppcä¸tpc\n\n * åæå¡å¨é«æ§è½æ¨¡å¼ï¼ppc ä¸ tpc\n   * ppc æ¯ process per connection çç¼©åï¼å¶å«ä¹æ¯ææ¯æ¬¡ææ°çè¿æ¥å°±æ°å»ºä¸ä¸ªè¿ç¨å»ä¸é¨å¤çè¿ä¸ªè¿æ¥çè¯·æ±ï¼è¿æ¯ä¼ ç»ç unix ç½ç»æå¡å¨æéç¨çæ¨¡åã\n     * ä¸è¬æåµä¸ï¼ppc æ¹æ¡è½å¤ççå¹¶åè¿æ¥æ°éæå¤§ä¹å°±å ç¾ã\n   * tpc æ¯ thread per connection çç¼©åï¼å¶å«ä¹æ¯ææ¯æ¬¡ææ°çè¿æ¥å°±æ°å»ºä¸ä¸ªçº¿ç¨å»ä¸é¨å¤çè¿ä¸ªè¿æ¥çè¯·æ±ã\n * ä¸ºä»ä¹è¯´é¨æ·ç½ç«æ¯æµ·éè¿æ¥å¸¸éè¯·æ±çæåµï¼\n   * æµ·éè¿æ¥ï¼è¿æ¥çç¨æ·å¾å¤\n   * å¸¸éè¯·æ±ï¼æ¯ä¸ªç¨æ·è¯·æ±æ°éä¸å¤ï¼å¤§é¨åé½æ¯çå®ä¸ç¯æç« åå»ç¹å»å¦å¤çæç« \n * æèé¢\n   * ä»ä¹æ ·çç³»ç»æ¯è¾éåæ¬ææè®²çé«æ§è½æ¨¡å¼ï¼åå æ¯ä»ä¹ï¼\n     * å¸¸éè¿æ¥å¸¸éè¯·æ±ï¼ä¾å¦åé¨è¿è¥ç³»ç»ï¼ç®¡çç³»ç»\n\n\n\n\né¡µé¦\n\n\n# 19 | åæå¡å¨é«æ§è½æ¨¡å¼ï¼reactorä¸proactor\n\n * reactorä¸proactor\n   * ioæä½åä¸¤ä¸ªé¶æ®µ\n     * 1ãç­å¾æ°æ®åå¤å¥½(è¯»å°åæ ¸ç¼å­)\n     * 2ãå°æ°æ®ä»åæ ¸è¯»å°ç¨æ·ç©ºé´(è¿ç¨ç©ºé´)\n     * ä¸è¬æ¥è¯´1è±è´¹çæ¶é´è¿è¿å¤§äº2\n   * 1ä¸é»å¡2ä¸ä¹é»å¡çæ¯åæ­¥é»å¡io\n   * 1ä¸éé»å¡2é»å¡çæ¯åæ­¥éé»å¡ioï¼è¿è®²è¯´çreactorå°±æ¯è¿ç§æ¨¡å\n   * 1ä¸éé»å¡2ä¸éé»å¡æ¯å¼æ­¥éé»å¡ioï¼è¿è®²è¯´çproactoræ¨¡åå°±æ¯è¿ç§æ¨¡å\n\n\n\n\né¡µé¦\n\n\n# 20 | é«æ§è½è´è½½åè¡¡ï¼åç±»åæ¶æ\n\n * é«æ§è½éç¾¤çå¤ææ§ä¸»è¦ä½ç°å¨:\n   * éè¦å¢å ä¸ä¸ªä»»å¡åéå¨ï¼ä»¥åä¸ºä»»å¡éæ©ä¸ä¸ªåéçä»»å¡åéç®æ³ã\n * è´è½½åè¡¡åç±»ï¼å¸¸è§çè´è½½åè¡¡ç³»ç»åæ¬ 3 ç§ï¼\n   * dns è´è½½åè¡¡\n   * ç¡¬ä»¶è´è½½åè¡¡\n     * ç®åä¸çå¸åçç¡¬ä»¶è´è½½åè¡¡è®¾å¤æä¸¤æ¬¾ï¼f5 å a10ã\n     * ä¼ç¹\n       * åè½å¼ºå¤§ï¼å¨é¢æ¯æåå±çº§çè´è½½åè¡¡ï¼æ¯æå¨é¢çè´è½½åè¡¡ç®æ³ï¼æ¯æå¨å±è´è½½åè¡¡\n       * æ§è½å¼ºå¤§ï¼è½¯ä»¶è´è½½åè¡¡æ¯æå° 10 ä¸çº§å¹¶åå·²ç»å¾åå®³äºï¼ç¡¬ä»¶è´è½½åè¡¡å¯ä»¥æ¯æ 100 ä¸ä»¥ä¸çå¹¶åã\n       * ç¨³å®æ§é«ï¼\n       * æ¯æå®å¨é²æ¤ï¼\n     * ç¼ºç¹: è´µãæ©å±è½åå·®(å¯ä»¥éç½®ä½æ æ³å®å¶)\n   * è½¯ä»¶è´è½½åè¡¡ã\n     * å¸¸è§çæ nginx å lvsãhaproxyï¼å¶ä¸­ nginx æ¯è½¯ä»¶çç 7 å±è´è½½åè¡¡ï¼lvs æ¯ linux åæ ¸ç 4 å±è´è½½åè¡¡\n       * ngxin çæ§è½æ¯ä¸çº§ï¼ä¸è¬ç linux æå¡å¨ä¸è£ä¸ä¸ªnginx å¤§æ¦è½å° 5 ä¸ / ç§ï¼lvs çæ§è½æ¯åä¸çº§ï¼æ®è¯´å¯è¾¾å° 80 ä¸ / ç§ï¼è f5 æ§è½æ¯ç¾ä¸çº§\n     * ä¼ç¹ï¼ç®åãä¾¿å®ãçµæ´»\n     * ç¼ºç¹ï¼æ§è½ä¸è¬\n * ç»åçåºæ¬ååä¸ºï¼\n   * dns è´è½½åè¡¡ç¨äºå®ç°å°ççº§å«çè´è½½åè¡¡ï¼ç¡¬ä»¶è´è½½åè¡¡ç¨äºå®ç°éç¾¤çº§å«çè´è½½åè¡¡ï¼è½¯ä»¶è´è½½åè¡¡ç¨äºå®ç°æºå¨çº§å«çè´è½½åè¡¡ã\n * æèé¢\n   * åè®¾ä½ æ¥è®¾è®¡ä¸ä¸ªæ¥æ´»è·ç¨æ· 1000 ä¸çè®ºåçè´è½½åè¡¡éç¾¤ï¼ä½ çæ¹æ¡æ¯ä»ä¹ï¼è®¾è®¡çç±æ¯ä»ä¹ï¼\n     * dau --\x3e 10h/day + åç¨æ·è¯·æ± --\x3e qpsãtps --\x3e å³°å¼ ~ qps * (3-5) --\x3e ä»¥å³°å¼æ¥è®¾è®¡\n\n\n\n\né¡µé¦\n\n\n# 21 | é«æ§è½è´è½½åè¡¡ï¼ç®æ³\n\n * è´è½½åè¡¡ç®æ³ï¼\n   * è½®è¯¢\n   * å æè½®è¯¢\n     * è§£å³ä¸åæå¡å¨å¤çè½åæå·®å¼çé®é¢\n   * è´è½½æä½ä¼å\n     * ç«å¨æå¡å¨çè§åº¦æ¥è¿è¡åéç\n   * æ§è½æé«ä¼å\n     * ç«å¨å®¢æ·ç«¯çè§åº¦æ¥è¿è¡åéç\n * æèé¢\n   * å¾®ä¿¡æ¢çº¢åçé«å¹¶åæ¶æï¼åºè¯¥éåä»ä¹æ ·çè´è½½åè¡¡ç®æ³ï¼è°è°ä½ çåæåçè§£\n\n\n\n\né¡µé¦\n\n\n# 22 | æ³æä¸ºæ¶æå¸ï¼ä½ å¿é¡»ç¥écapçè®º\n\n * cap\n   \n   * consistencyãavailabilityãpartition tolerance\n     * å¯¹æä¸ªæå®çå®¢æ·ç«¯æ¥è¯´ï¼è¯»æä½ä¿è¯è½å¤è¿åææ°çåæä½ç»æã\n     * éæéçèç¹å¨åççæ¶é´åè¿ååççååºï¼ä¸æ¯éè¯¯åè¶æ¶çååºï¼\n     * å½åºç°ç½ç»ååºåï¼ç³»ç»è½å¤ç»§ç»­âå±¥è¡èè´£â\n   * éåäºï¼æäºèåæ°æ®å±äº«çåå¸å¼ç³»ç»ãå³æ³¨çæ¯å¯¹æ°æ®çè¯»åæä½\n\n * note\n   \n   * åå¸å¼ç³»ç»çè®ºä¸ä¸å®ä¼å­å¨ pï¼æä»¥ä¸å¯è½éæ© ca æ¶æï¼åªè½éæ© cp æè ap æ¶æ\n\n * æèé¢\n   \n   * åºäº paxos ç®æ³æå»ºçåå¸å¼ç³»ç»ï¼å±äº cap æ¶æä¸­çåªä¸ç§ï¼è°è°ä½ çåæåçè§£ã\n     * paxosç®æ³å®ç°çç³»ç»æ¯cpï¼æ ¹æ®raftçè®ºææè¿°ï¼å·¥ç¨ä¸ç®åè¿æ²¡æå®å¨å®ç°paxosç®æ³çç³»ç»\n\n\n\n\né¡µé¦\n\n\n# 23 | æ³æä¸ºæ¶æå¸ï¼ä½ å¿é¡»ææ¡çcapç»è\n\n * cap å³é®ç»èç¹\n   \n   * cap å³æ³¨çç²åº¦æ¯æ°æ®ï¼èä¸æ¯æ´ä¸ªç³»ç»ã\n     * c ä¸ a ä¹é´çåèå¯ä»¥å¨åä¸ç³»ç»åä»¥éå¸¸ç»å°çç²åº¦åå¤åçï¼èæ¯ä¸æ¬¡çå³ç­å¯è½å ä¸ºå·ä½çæä½ï¼ä¹è³å ä¸ºçµæ¶å°ç¹å®çæ°æ®æç¨æ·èææä¸åã\n   * cap æ¯å¿½ç¥ç½ç»å»¶è¿çã\n   * æ­£å¸¸è¿è¡æåµä¸ï¼ä¸å­å¨ cp å ap çéæ©ï¼å¯ä»¥åæ¶æ»¡è¶³ caã\n     * cap çè®ºåè¯æä»¬åå¸å¼ç³»ç»åªè½éæ© cp æè apï¼ä½.å¶å®è¿éçåææ¯ç³»ç»åçäºâååºâç°è±¡ãå¦æç³»ç»æ²¡æåçååºç°è±¡ï¼ä¹å°±æ¯è¯´ p ä¸å­å¨çæ¶åï¼èç¹é´çç½ç»è¿æ¥ä¸åæ­£å¸¸ï¼ï¼æä»¬æ²¡æå¿è¦æ¾å¼ c æè aï¼åºè¯¥ c å a é½å¯ä»¥ä¿è¯ï¼è¿å°±è¦æ±æ¶æè®¾è®¡çæ¶åæ¢è¦èèååºåçæ¶éæ© cp è¿æ¯ apï¼ä¹è¦èèååºæ²¡æåçæ¶å¦ä½ä¿è¯ caã\n   * æ¾å¼å¹¶ä¸ç­äºä»ä¹é½ä¸åï¼éè¦ä¸ºååºæ¢å¤åååå¤ã\n\n * acid æ¯æ°æ®åºç®¡çç³»ç»ä¸ºäºä¿è¯äºå¡çæ­£ç¡®æ§èæåºæ¥çä¸ä¸ªçè®ºï¼acid åå«åä¸ªçº¦æï¼\n   \n   * atomicityï¼åå­æ§ï¼\n     * ä¸ä¸ªäºå¡ä¸­çæææä½ï¼è¦ä¹å¨é¨å®æï¼è¦ä¹å¨é¨ä¸å®æï¼ä¸ä¼å¨ä¸­é´æä¸ªç¯èç»æ\n   * consistencyï¼ä¸è´æ§ï¼\n     * å¨äºå¡å¼å§ä¹ååäºå¡ç»æä»¥åï¼æ°æ®åºçå®æ´æ§æ²¡æè¢«ç ´åã\n   * isolationï¼éç¦»æ§ï¼\n     * æ°æ®åºåè®¸å¤ä¸ªå¹¶åäºå¡åæ¶å¯¹æ°æ®è¿è¡è¯»ååä¿®æ¹çè½åãéç¦»æ§å¯ä»¥é²æ­¢å¤ä¸ªäºå¡å¹¶åæ§è¡æ¶ç±äºäº¤åæ§è¡èå¯¼è´æ°æ®çä¸ä¸è´ãäºå¡éç¦»åä¸ºä¸åçº§å«ï¼åæ¬è¯»æªæäº¤ï¼read uncommittedï¼ãè¯»æäº¤ï¼read committedï¼ãå¯éå¤è¯»ï¼repeatable readï¼åä¸²è¡åï¼serializableï¼\n   * durabilityï¼æä¹æ§ï¼\n     * äºå¡å¤çç»æåï¼å¯¹æ°æ®çä¿®æ¹å°±æ¯æ°¸ä¹çï¼å³ä¾¿ç³»ç»æéä¹ä¸ä¼ä¸¢å¤±ã\n\n * base æ ¸å¿ææ³æ¯å³ä½¿æ æ³åå°å¼ºä¸è´æ§ï¼cap çä¸è´æ§å°±æ¯å¼ºä¸è´æ§ï¼ï¼ä½åºç¨å¯ä»¥éç¨éåçæ¹å¼è¾¾å°æç»ä¸è´æ§ã\n   \n   * base æ¯æåºæ¬å¯ç¨ï¼basically availableï¼\n     * åå¸å¼ç³»ç»å¨åºç°æéæ¶ï¼åè®¸æå¤±é¨åå¯ç¨æ§ï¼å³ä¿è¯æ ¸å¿å¯ç¨ã\n   * è½¯ç¶æï¼ soft stateï¼\n     * åè®¸ç³»ç»å­å¨ä¸­é´ç¶æï¼èè¯¥ä¸­é´ç¶æä¸ä¼å½±åç³»ç»æ´ä½å¯ç¨æ§ãè¿éçä¸­é´ç¶æå°±æ¯ cap çè®ºä¸­çæ°æ®ä¸ä¸è´ã\n   * æç»ä¸è´æ§ï¼ eventual consistencyï¼\n     * ç³»ç»ä¸­çæææ°æ®å¯æ¬ç»è¿ä¸å®æ¶é´åï¼æç»è½å¤è¾¾å°ä¸è´çç¶æã\n   * note\n     * base çè®ºæ¬è´¨ä¸æ¯å¯¹ cap çå»¶ä¼¸åè¡¥åï¼æ´å·ä½å°è¯´ï¼æ¯å¯¹ cap ä¸­ ap æ¹æ¡çä¸ä¸ªè¡¥åã\n     * base çè®ºèèäºå»¶æ¶ï¼è¦æ±å¨ååºæé´çºç²ä¸è´æ§ï¼ä½ååºæéæ¢å¤åï¼ç³»ç»åºè¯¥è¾¾å°æç»ä¸è´æ§æ§\n\n * æèé¢\n   \n   * åå¦ä½ æ¥è®¾è®¡çµåç½ç«çé«å¯ç¨ç³»ç»ï¼æç§ cap çè®ºçè¦æ±ï¼ä½ ä¼æä¹è®¾è®¡ï¼\n\n\n\n\né¡µé¦\n\n\n# 24 | fmeaæ¹æ³ï¼æé¤æ¶æå¯ç¨æ§éæ£çå©å¨\n\n * fmea (failure mode and effects analysis, æéæ¨¡å¼ä¸å½±ååæ)\n   * å¨æ¶æè®¾è®¡é¢åï¼fmea çå·ä½åææ¹æ³æ¯ï¼\n     * ç»åºåå§çæ¶æè®¾è®¡å¾ã\n     * åè®¾æ¶æä¸­æä¸ªé¨ä»¶åçæéã\n     * åææ­¤æéå¯¹ç³»ç»åè½é æçå½±åã\n     * æ ¹æ®åæç»æï¼å¤æ­æ¶ææ¯å¦éè¦è¿è¡ä¼åã\n * fmea åæçæ¹æ³å¶å®å¾ç®åï¼å°±æ¯ä¸ä¸ª fmea åæè¡¨ï¼å¸¸è§ç fmea åæè¡¨æ ¼åå«ä¸é¢é¨åã\n   * åè½ç¹\n     * æçæ¯ä»ç¨æ·è§åº¦æ¥ççï¼èä¸æ¯ä»ç³»ç»åä¸ªæ¨¡ååè½ç¹ååæ¥çç\n   * æéæ¨¡å¼\n     * æéæ¨¡å¼æçæ¯ç³»ç»ä¼åºç°ä»ä¹æ ·çæéï¼åæ¬æéç¹åæéå½¢å¼ãéè¦ç¹å«æ³¨æçæ¯ï¼è¿éçæéæ¨¡å¼å¹¶ä¸éè¦ç»åºçæ­£çæéåå ï¼ï¼æä»¬åªéè¦åè®¾åºç°æç§æéç°è±¡å³å¯ï¼ä¾å¦ mysql ååºæ¶é´è¾¾å° 3 ç§ã\n     * æéæ¨¡å¼çæè¿°è¦å°½éç²¾ç¡®ï¼å¤ä½¿ç¨éåæè¿°ï¼é¿åä½¿ç¨æ³åçæè¿°ãä¾å¦ï¼æ¨èä½¿ç¨âmysql ååºæ¶é´è¾¾å° 3 ç§âï¼èä¸æ¯âmysql ååºæ¢âã\n   * æéå½±å\n     * å½åçæéæ¨¡å¼ä¸­æè¿°çæéæ¶ï¼åè½ç¹å·ä½ä¼åå°ä»ä¹å½±åãæéå½±åä¹éè¦å°½éåç¡®æè¿°ãä¾å¦ï¼æ¨èä½¿ç¨â20% çç¨æ·æ æ³ç»å½âï¼èä¸æ¯âå¤§é¨åç¨æ·æ æ³ç»å½âã\n   * ä¸¥éç¨åº¦\n     * ä¸¥éç¨åº¦æç«å¨ä¸å¡çè§åº¦æéçå½±åç¨åº¦ï¼ä¸è¬åä¸ºâè´å½ / é« / ä¸­ / ä½ / æ âäºä¸ªæ¡£æ¬¡ãä¸¥éç¨åº¦æç§è¿ä¸ªå¬å¼è¿è¡è¯ä¼°ï¼ä¸¥éç¨åº¦ = åè½ç¹éè¦ç¨åº¦ Ã æéå½±åèå´ Ã åè½ç¹åæç¨åº¦ã\n   * æéåå \n   * æéæ¦ç\n     * è¿éçæ¦çå°±æ¯ææä¸ªå·ä½æéåå åççæ¦çãä¸è¬åä¸ºâé« / ä¸­ / ä½âä¸æ¡£å³å¯\n   * é£é©ç¨åº¦\n     * é£é©ç¨åº¦å°±æ¯ç»¼åä¸¥éç¨åº¦åæéæ¦çæ¥ä¸èµ·å¤æ­æä¸ªæéçæç»ç­çº§ï¼é£é©ç¨åº¦ = ä¸¥éç¨åº¦ Ã æéæ¦çã\n   * å·²ææªæ½\n     * éå¯¹å·ä½çæéåå ï¼ç³»ç»ç°å¨æ¯å¦æä¾äºæäºæªæ½æ¥åºå¯¹ï¼åæ¬ï¼æ£æµåè­¦ãå®¹éãèªæ¢å¤ç­ã\n   * è§é¿æªæ½\n     * è§é¿æªæ½æä¸ºäºéä½æéåçæ¦çèåçä¸äºäºæï¼å¯ä»¥æ¯ææ¯ææ®µï¼ä¹å¯ä»¥æ¯ç®¡çææ®µãä¾å¦ï¼\n       * ææ¯ææ®µï¼ä¸ºäºé¿åæ°å¼å¥ç mongodb ä¸¢å¤±æ°æ®ï¼å¨å¨ mysql ä¸­åä½ä¸ä»½ã\n       * ç®¡çææ®µï¼ä¸ºäºéä½ç£çåéçæ¦çï¼å¼ºå¶ç»ä¸æ´æ¢æå¡æ¶é´è¶è¿ 2 å¹´çç£ç\n   * è§£å³æªæ½\n     * è§£å³æªæ½æä¸ºäºè½å¤è§£å³é®é¢èåçä¸äºäºæï¼ä¸è¬é½æ¯ææ¯ææ®µãä¾å¦ï¼\n       * ä¸ºäºè§£å³å¯ç æ´åç ´è§£ï¼å¢å å¯ç éè¯æ¬¡æ°éå¶ã\n       * ä¸ºäºè§£å³æåºå¯¼è´æ°æ®æ³é²ï¼å°æ°æ®åºä¸­çæææ°æ®å å¯ä¿å­ã\n       * ä¸ºäºè§£å³éæ³è®¿é®ï¼å¢å ç½ååæ§å¶ã\n   * åç»­è§å\n * fmeaå®è·µ\n   * åè®¾æä»¬è®¾è®¡ä¸ä¸ªæç®åçç¨æ·ç®¡çç³»ç»ï¼åå«ç»å½åæ³¨åä¸¤ä¸ªä¸¤ä¸ªåè½ï¼å¶åå§æ¶ææ¯ï¼\n     * mysql è´è´£å­å¨ï¼memcacheï¼ä»¥ä¸ç®ç§° mcï¼è´è´£ç¼å­ï¼server è´è´£ä¸å¡å¤çã\n   * fmea åæåï¼è½å¤æä»ä¹æ ·çåç°ï¼ä¸è¡¨æ¯åæçæ ·ä¾\n   * ç»è¿ä¸è¡¨ç fmea åæï¼å°âåç»­è§åâåçåå®¹æ±æ»ä¸ä¸ï¼æä»¬æç»å¾å°äºä¸é¢å æ¡éè¦æ¹è¿çæªæ½ï¼\n     * mysql å¢å å¤æºãmc ä»åæºæ©å±ä¸ºéç¾¤ãmysql åç½å¡è¿æ¥ã\n * æèé¢ è¯·ä½¿ç¨ fmea æ¹æ³åæä¸ä¸ hdfs ç³»ç»çæ¶æï¼çç hdfs æ¯å¦ä½åºå¯¹åç§æéçï¼å¹¶ä¸åæä¸ä¸ hdfs æ¯å¦å­å¨é«å¯ç¨é®é¢ã\n\n\n\n\né¡µé¦\n\n\n# 25 | é«å¯ç¨å­å¨æ¶æï¼åæºæ¶æ\n\n * åæºæ¶æï¼åæºå³å¯è§£å³æ°æ®å­å¨æåµä¸ï¼ä¿è¯é«å¯ç¨\n * å¤ææ§ä¸»è¦ä½ç°å¨å¦ä½åºå¯¹å¤å¶å»¶è¿åä¸­æ­å¯¼è´çæ°æ®ä¸ä¸è´é®é¢\n   * æ°æ®å¦ä½å¤å¶ï¼ åä¸ªèç¹çèè´£æ¯ä»ä¹ï¼ å¦ä½åºå¯¹å¤å¶å»¶è¿ å å¤å¶ä¸­æ­ï¼\n * åå»åæ¢ï¼è¦å®ç°ä¸ä¸ªå®åçåæ¢æ¹æ¡ï¼å¿é¡»èèè¿å ä¸ªå³é®çè®¾è®¡ç¹ï¼\n   * ä¸»å¤ç¶æå¤æ­\n     * ç¶æä¼ éçæ¸ é\n     * ç¶ææ£æ¥çåå®¹\n   * åæ¢å³ç­\n   * æ°æ®å²çªè§£å³\n * å¸¸è§æ¶æ:(æ ¹æ®ä¼ éæ¸ éä¸å)\n   * äºèå¼ãä¸­ä»å¼ãæ¨¡æå¼ãä¸»ä¸»å¤å¶\n\n\n\n\né¡µé¦\n\n\n# 26 | é«å¯ç¨å­å¨æ¶æï¼éç¾¤åååº\n\n * æ°æ®éä¸­éç¾¤\n   * ä¸ä¸»å¤å¤ãä¸ä¸»å¤ä»\n   * å¤æåº¦\n     * ä¸»æºå¦ä½å°æ°æ®å¤å¶ç»å¤æº\n       * ä¸»å¤åä¸»ä»æ¶æä¸­ï¼åªæä¸æ¡å¤å¶ééï¼èæ°æ®éä¸­éç¾¤æ¶æä¸­ï¼å­å¨å¤æ¡å¤å¶ééãå¤æ¡å¤å¶ééé¦åä¼å¢å¤§ä¸»æºå¤å¶çååï¼æäºåºæ¯ä¸æä»¬éè¦èèå¦ä½éä½ä¸»æºå¤å¶ååï¼æèéä½ä¸»æºå¤å¶ç»æ­£å¸¸è¯»åå¸¦æ¥çååã\n     * å¤æºå¦ä½æ£æµä¸»æºç¶æ\n       * å¨æ°æ®éä¸­éç¾¤æ¶æä¸­ï¼å¤å°å¤æºé½éè¦å¯¹ä¸»æºç¶æè¿è¡å¤æ­ï¼èä¸åçå¤æºå¤æ­çç»æå¯è½æ¯ä¸åçï¼å¦ä½å¤çä¸åå¤æºå¯¹ä¸»æºç¶æçä¸åå¤æ­ï¼æ¯ä¸ä¸ªå¤æçé®é¢ã\n     * ä¸»æºæéåï¼å¦ä½å³å®æ°çä¸»æº\n       * èå¨æ°æ®éä¸­éç¾¤æ¶æä¸­ï¼æå¤å°å¤æºé½å¯ä»¥åçº§ä¸ºä¸»æºï¼ä½å®éä¸åªè½åè®¸ä¸å°å¤æºåçº§ä¸ºä¸»æºï¼é£ä¹ç©¶ç«éæ©åªä¸å°å¤æºä½ä¸ºæ°çä¸»æºï¼å¤æºä¹é´å¦ä½åè°ï¼è¿ä¹æ¯ä¸ä¸ªå¤æçé®é¢ã\n * æ°æ®åæ£éç¾¤\n   * æ°æ®åæ£éç¾¤æå¤ä¸ªæå¡å¨ç»æä¸ä¸ªéç¾¤ï¼æ¯å°æå¡å¨åä¼å¤ä»½ä¸é¨åæ°æ®ã\n   * å¤æåº¦ï¼åè¡¡ãå®¹éãå¯ä¼¸ç¼©æ§\n * æ°æ®ååº\n   * åé¢æä»¬è®¨è®ºçä¸»è¦èèå½é¨åç¡¬ä»¶å¯è½æåçæåµä¸ç³»ç»åºè¯¥å¦ä½å¤çï¼ä½å¯¹äºä¸äºå½±åéå¸¸å¤§çç¾é¾æèäºææ¥è¯´ï¼æå¯è½ææçç¡¬ä»¶å¨é¨æéãä¾å¦ï¼æ°å¥¥å°è¯æ°´ç¾ãç¾å å¤§åçµï¼è¿æ¶åéè¦åºäºå°ççº§å«çæéæ¥è®¾è®¡é«å¯ç¨æ¶æï¼è¿å°±æ¯æ°æ®ååºæ¶æäº§ççèæ¯ã\n   * æ°æ®ååºçå¤ä»½æ¹å¼ï¼éä¸­å¼å¤ä»½ãäºå¤å¼ãç¬ç«å¼å¤ä»½\n\n\n\n\né¡µé¦\n\n\n# 27 | å¦ä½è®¾è®¡è®¡ç®é«å¯ç¨æ¶æï¼\n\n * å¤æåº¦ï¼ä»»å¡ç®¡ç\n * é«å¯ç¨æ¹å¼\n   * ä¸»ä»ãä¸»å¤ãéç¾¤(å¯¹ç§°éç¾¤ãéå¯¹ç§°éç¾¤)\n\n\n\n\né¡µé¦\n\n\n# 28 | ä¸å¡é«å¯ç¨çä¿éï¼å¼å°å¤æ´»æ¶æ\n\n * å¼å°å¤æ´»æ¶æå¯ä»¥åä¸ºï¼\n   * ååå¼åº\n   * è·¨åå¼å°\n     * å¼å¥äºä¸ä¸ªçä¼¼çç¾çå°æ¹ï¼æ°æ®ä¸ä¸è´ä¸å¡è¯å®ä¸ä¼æ­£å¸¸ï¼ä½è·¨åå¼å°è¯å®ä¼å¯¼è´æ°æ®ä¸ä¸è´ã\n       * éç¹è¿æ¯å¨âæ°æ®âä¸ï¼å³æ ¹æ®æ°æ®çç¹æ§æ¥åä¸åçæ¶æãå¦ææ¯å¼ºä¸è´æ§è¦æ±çæ°æ®ï¼ä¾å¦é¶è¡å­æ¬¾ä½é¢ãæ¯ä»å®ä½é¢ç­ï¼è¿.ç±»æ°æ®å®éä¸æ¯æ æ³åå°è·¨åå¼å°å¤æ´»çã\n   * è·¨å½å¼å°\n     * ä¸ºä¸åå°åºç¨æ·æä¾æå¡\n     * åªè¯»ç±»ä¸å¡åå¤æ´»\n       * ä¾å¦ï¼è°·æ­çæç´¢ä¸å¡ï¼ç±äºç¨æ·æç´¢èµææ¶ï¼è¿äºèµæé½å·²ç»å­å¨äºè°·æ­çæç´¢å¼æä¸é¢ï¼æ è®ºæ¯è®¿é®è±å½è°·æ­ï¼è¿æ¯è®¿é®ç¾å½è°·æ­ï¼æç´¢ç»æåºæ¬ç¸åï¼å¹¶ä¸å¯¹ç¨æ·æ¥è¯´ï¼ä¹ä¸éè¦æç´¢å°ææ°çå®æ¶èµæï¼è·¨å½å¼å°çå ç§éç½ç»å»¶è¿ï¼å¯¹æç´¢ç»ææ¯æ²¡æä»ä¹å½±åçã\n * æèé¢\n   * åè®¾æä»¬åäºåé¢æå°çé«å¯ç¨å­å¨æ¶æä¸­çæ°æ®ååºå¤ä»½ï¼åéè¿èªå¨åè¿ç»´è½å¤ä¿è¯ 1 åéå°±è½å°å¨é¨ç³»ç»æ­£å¸¸å¯å¨ï¼é£æ¯å¦æå³çæ²¡æå¿è¦åå¼å°å¤æ´»äºï¼\n     * å¤ä»½ç³»ç»å¹³å¸¸æ²¡ææµéï¼å¦æç´æ¥ä¸çº¿å¯è½è§¦åå¹³å¸¸æµè¯ä¸å°çæéã\n     * åå®æ¶çç³»ç»ä¹ä¼ææ°æ®å»¶æ¶ï¼å¦ææ¶åå°éèè¿ç§ç³»ç»ï¼ä»ç¶æ¯ä¸æ¢ç´æ¥åæ¢çã\n     * ç³»ç»è¿è¡è¿ç¨ä¸­ä¼æå¾å¤ä¸­é´æ°æ®ï¼ç¼å­æ°æ®ç­ãç³»ç»ä¸ç»è¿é¢ç­ç´æ¥ææµéåè¿æ¥ï¼å¤§æµéä¼ç´æ¥æç³»ç»æå®\n\n\n\n\né¡µé¦\n\n\n# 29 | å¼å°å¤æ´»è®¾è®¡4å¤§æå·§\n\n * æ ¸å¿\n   * éç¨å¤ç§ææ®µï¼ä¿è¯ç»å¤§é¨åç¨æ·çæ ¸å¿ä¸å¡å¼å°å¤æ´»ï¼\n * æå·§\n   * ä¿è¯æ ¸å¿ä¸å¡çå¼å°å¤æ´»\n   * ä¿è¯æ ¸å¿æ°æ®æç»ä¸è´æ§\n     * å æ­¤å¼å°å¤æ´»æ¶æé¢ä¸´ä¸ä¸ªæ æ³å½»åºè§£å³ççç¾ï¼ä¸å¡ä¸è¦æ±æ°æ®å¿«éåæ­¥ï¼ç©çä¸æ­£å¥½åä¸å°æ°æ®å¿«éåæ­¥ï¼å æ­¤æææ°æ®é½å®æ¶åæ­¥ï¼å®éä¸æ¯ä¸ä¸ªæ æ³è¾¾å°çç®æ ã\n       * å°½éåå°å¼å°å¤æ´»æºæ¿çè·ç¦»ï¼æ­å»ºé«éç½ç»\n       * å°½éåå°æ°æ®åæ­¥ï¼åªåæ­¥æ ¸å¿ä¸å¡ç¸å³çæ°æ®\n       * ä¿è¯æç»ä¸è´æ§ï¼ä¸ä¿è¯å®æ¶ä¸è´æ§\n   * éç¨å¤ç§ææ®µåæ­¥æ°æ®\n     * æ°æ®åæ­¥æ¯å¼å°å¤æ´»æ¶æè®¾è®¡çæ ¸å¿ï¼å¹¸è¿çæ¯åºæ¬ä¸å­å¨ç³»ç»æ¬èº«é½ä¼æåæ­¥çåè½ãä¾å¦ï¼mysql çä¸»å¤å¤å¶ãredis ç cluster åè½ãelasticsearch çéç¾¤åè½ãä½ææ¶åä»ä½¿ç¨è¿äºåè½æ¯ä¸å¤çï¼éè¦æå¼æè·¯ã\n   * åªä¿è¯ç»å¤§é¨åç¨æ·çå¼å°å¤æ´»\n\n\n\n\né¡µé¦\n\n\n# 30 | å¼å°å¤æ´»è®¾è®¡4æ­¥èµ°\n\n * ä¸å¡åçº§\n   * æéåºæ ¸å¿çä¸å¡ï¼åªä¸ºæ ¸å¿ä¸å¡è®¾è®¡å¼å°å¤æ´»ï¼éä½æ¹æ¡æ´ä½å¤æåº¦åå®ç°ææ¬ã\n * æ°æ®åç±»\n   * å¯ä¸æ§ãå®æ¶æ§ãæ°æ®éãå¯ä¸¢æ§ãå¯æ¢å¤æ§ã\n * æ°æ®åæ­¥\n   * å­å¨ç³»ç»åæ­¥\n     * å ä¹ä¸»æµçå­å¨ç³»ç»é½ä¼æèªå·±çåæ­¥æ¹æ¡ï¼ç¼ºç¹æ¯è¿ç±»åæ­¥æ¹æ¡é½æ¯éç¨çï¼æ æ³éå¯¹ä¸å¡æ°æ®ç¹ç¹åå®å¶åçæ§å¶ã\n * å¼å¸¸å¤ç\n   * å¤ééåæ­¥\n   * åæ­¥åè®¿é®ç»å\n   * æ¥å¿è®°å½\n   * ç¨æ·è¡¥å¿\n\n\n\n\né¡µé¦\n\n\n# 31 | å¦ä½åºå¯¹æ¥å£çº§çæéï¼\n\n * æ ¸å¿ææ³ï¼ä¼åä¿è¯æ ¸å¿ä¸å¡åä¼åä¿è¯ç»å¤§é¨åç¨æ·\n * åºå¯¹ç­ç¥ï¼éçº§ãçæ­ãéæµãæé\n   * éçº§çç®çæ¯åºå¯¹ç³»ç»èªèº«çæéï¼èçæ­çç®çæ¯åºå¯¹ä¾èµçå¤é¨ç³»ç»æéçæåµ\n   * éæµåæ¯ä»ç¨æ·è®¿é®ååçè§åº¦æ¥èèå¦ä½åºå¯¹æéãéæµæåªåè®¸ç³»ç»è½å¤æ¿åçè®¿é®éè¿æ¥ï¼è¶åºç³»ç»è®¿é®è½åçè¯·æ±å°è¢«ä¸¢å¼ã\n * æèé¢\n   * å¦æä½ æ¥è®¾è®¡ä¸ä¸ªæ´ç¹ééç§æç³»ç»ï¼åæ¬ç»å½ãæ¢è´­ãæ¯ä»ï¼ä¾èµæ¯ä»å®ï¼ç­åè½ï¼ä½ ä¼å¦ä½è®¾è®¡æ¥å£çº§çæéåºå¯¹ææ®µï¼\n\n\n\n\né¡µé¦\n\n\n# 32 | å¯æ©å±æ¶æçåºæ¬ææ³åæ¨¡å¼\n\n * æ¶æå¯æ©å±æ¨¡å¼ï¼åæ¬åå±æ¶æãsoa æ¶æãå¾®æå¡åå¾®åæ ¸ç­\n   * å¦ä½é¿åæ©å±æ¶æ¹å¨èå´å¤ªå¤§ï¼æ¯è½¯ä»¶æ¶æå¯æ©å±æ§è®¾è®¡çä¸»è¦æèç¹\n * å¯æ©å±æ¨¡å¼çæ ¸å¿å°±æ¯æåï¼å¸¸è§çæåæè·¯æå¦ä¸ä¸ç§ã\n   * é¢åæµç¨æåï¼å°æ´ä¸ªä¸å¡æµç¨æåä¸ºå ä¸ªé¶æ®µï¼æ¯ä¸ªé¶æ®µä½ä¸ºä¸é¨åãåå±æ¶æã\n   * é¢åæå¡æåï¼å°ç³»ç»æä¾çæå¡æåï¼æ¯ä¸ªæå¡ä½ä¸ºä¸é¨åãsoaãå¾®æå¡ã\n   * é¢ååè½æåï¼å°ç³»ç»æä¾çåè½æåï¼æ¯ä¸ªåè½ä½ä¸ºä¸é¨åãå¾®åæ ¸æ¶æã\n\n\n\n\né¡µé¦\n\n\n# 33 | ä¼ ç»çå¯æ©å±æ¶ææ¨¡å¼ï¼åå±æ¶æåsoa\n\n * åå±æ¶æ\n   * ä¾å¦ï¼c/s æ¶æãb/s æ¶æï¼å¸¸è§çæ¯ 3 å±æ¶æï¼ä¾å¦ï¼ï¼mvcãmvp æ¶æï¼\n   * åå±æ¶æè®¾è®¡ææ ¸å¿çä¸ç¹å°±æ¯éè¦ä¿è¯åå±ä¹é´çå·®å¼è¶³å¤æ¸æ°ï¼è¾¹çè¶³å¤ææ¾\n   * åå±æ¶æä¹æä»¥è½å¤è¾å¥½å°æ¯æç³»ç»æ©å±ï¼æ¬è´¨å¨äºéç¦»å³æ³¨ç¹ï¼separation of concernsï¼ï¼å³æ¯ä¸ªå±ä¸­çç»ä»¶åªä¼å¤çæ¬å±çé»è¾ã\n   * åå±æ¶è¦ä¿è¯å±ä¸å±ä¹é´çä¾èµæ¯ç¨³å®çï¼æè½çæ­£æ¯æå¿«éæ©å±\n * soa(service oriented architecture)\n   * ä¸è¦ç´ ï¼æå¡ãesb(enterprise service bus)ãæ¾è¦å\n   * soa ä½¿ç¨ esb æ¥å±è½å¼æç³»ç»å¯¹å¤æä¾åç§ä¸åçæ¥å£æ¹å¼ï¼ä»¥æ­¤æ¥è¾¾å°æå¡é´é«æçäºèäºéã\n   * soa æ´å¤æ¯å¨ä¼ ç»ä¼ä¸ï¼ä¾å¦ï¼å¶é ä¸ãéèä¸ç­ï¼è½å°åæ¨å¹¿ï¼å¨äºèç½è¡ä¸å¹¶æ²¡æå¤§è§æ¨¡å°å®è·µåæ¨å¹¿ã\n     * soa è§£å³äºä¼ ç» it ç³»ç»éå¤å»ºè®¾åæ©å±æçä½çé®é¢ï¼ä½å¶æ¬èº«ä¹å¼å¥äºæ´å¤çå¤ææ§ãsoa æå¹¿ä¸ºäººè¯ççå°±æ¯ esbï¼esb éè¦å®ç°ä¸åç§ç³»ç»é´çåè®®è½¬æ¢ãæ°æ®è½¬æ¢ãéæçå¨æè·¯ç±ç­åè½ãesbéä¸­åçç®¡çå¸¦æ¥äºæ§è½ä¸ä½³ï¼åéç­é®é¢ã\n     * æ³ä¸ä¸ soa çæåºèæ¯å°±å¯ä»¥åç°ï¼ä¼ä¸å¨åºç¨ soa æ¶æ¶ï¼åç§å¼æç it ç³»ç»é½å·²ç»å­å¨å¾å¤å¹´äºï¼å®å¨éåæèæç§ç»ä¸æ åè¿è¡æ¹é çææ¬æ¯éå¸¸å¤§çï¼åªè½éè¿ esb æ¹å¼å»ééå·²ç»å­å¨çåç§å¼æç³»ç»ã\n * æèé¢\n   * ä¸ºä»ä¹äºèç½ä¼ä¸å¾å°éç¨ soa æ¶æï¼\n\n\n\n\né¡µé¦\n\n\n# 34 | æ·±å¥çè§£å¾®æå¡æ¶æï¼é¶å¼¹ or ç¦æ²¹åï¼\n\n * soa åå¾®æå¡å¯¹æ¯ï¼\n   * ä»ä»¥ä¸å æ¹é¢èèï¼æå¡ç²åº¦ãæå¡éä¿¡ãåºç¨åºæ¯\n * å¾®æå¡é·é±\n   * æå¡ååè¿ç»ï¼æå¡é´å³ç³»å¤æ\n   * æå¡æ°éå¤ªå¤ï¼å¢éæçæ¥å§ä¸é\n   * è°ç¨é¾å¤ªé¿ï¼æ§è½ä¸é\n   * è°ç¨é¾å¤ªé¿ï¼é®é¢å®ä½å°é¾\n   * æ²¡æèªå¨åæ¯æï¼æ æ³å¿«éäº¤ä»\n   * æ²¡ææå¡æ²»çï¼å¾®æå¡æ°éå¤äºåç®¡çæ··ä¹±\n     * ä¸»è¦è¡¨ç°å¨ï¼æå¡è·¯ç±ãæå¡æééç¦»ãæå¡æ³¨åååç°\n\n\n\n\né¡µé¦\n\n\n# 35 | å¾®æå¡æ¶ææä½³å®è·µ - æ¹æ³ç¯\n\n * æå¡ç²åº¦\n   * ä¸è¬æ¥è¯´ï¼3ä¸ªäººå¼åä¸ä¸ªæå¡ä¸ºä½³ï¼æ¢è½å¤å½¢æææçè®¨è®ºãä¹å¯ä»¥å½¢æä¸ä¸ªç¨³å®çå¢éå¤ä»½\n   * åºäºä¸è¿°ç­ç¥ï¼è®¡ç®åºæåååéçæå¡æ°é\n * æåæ¹æ³\n   * åºäºä¸å¡é»è¾æå\n   * åºäºå¯æ©å±æå\n     * æåæç¨³å®æå¡ååå¨æå¡ï¼å¯ä»¥æåé¡¹ç®å¿«éè¿­ä»£çæçï¼é¿åå¨å¼åçæ¶åï¼ä¸å°å¿å½±åäºå·²æçæçåè½å¯¼è´çº¿ä¸é®é¢ã\n   * åºäºå¯é æ§æå\n     * é¿åéæ ¸å¿æå¡æéå½±åæ ¸å¿æå¡\n     * æ ¸å¿æå¡é«å¯ç¨æ¹æ¡å¯ä»¥æ´ç®å\n     * è½å¤éä½é«å¯ç¨ææ¬\n   * åºäºæ§è½æå\n * åºç¡è®¾æ½ ![å¾®æå¡åºç¡è®¾æ½](./rsc/arch_meshsrv_ infrastructure.png)\n * æèé¢\n   * åèæç« ä¸­æå°çæ¹æ³ï¼æèä¸ä¸ä½ æå¨çä¸å¡å¾®æå¡æ¶ææ¯å¦è¿æå¯ä»¥æ¹è¿åæåçç©ºé´ï¼\n\n\n\n\né¡µé¦\n\n\n# 36 | å¾®æå¡æ¶ææä½³å®è·µ - åºç¡è®¾æ½ç¯\n\n * åºç¡è®¾æ½\n   * èªå¨åæµè¯\n     * æ¶µççèå´åæ¬ä»£ç çº§çååæµè¯ãåä¸ªç³»ç»çº§çéææµè¯ãç³»ç»é´çæ¥å£æµè¯ï¼ç³»ç»é´çæ¥å£æµè¯æ¯åºç¡ä¿éã\n   * éç½®ä¸­å¿\n   * æ¥å£æ¡æ¶\n     * å¾®æå¡æå¡è½»éçº§çéä¿¡æ¹å¼ï¼ä¸è¬éç¨ http/rest æè rpc æ¹å¼ç»ä¸æ¥å£åè®®ãä½å¨å®è·µè¿ç¨ä¸­ï¼åç»ä¸æ¥å£åè®®è¿ä¸å¤ï¼è¿éè¦ç»ä¸æ¥å£ä¼ éçæ°æ®æ ¼å¼ã\n   * apiç½å³\n     * api ç½å³æ¯å¤é¨ç³»ç»è®¿é®çæ¥å£ï¼ææçå¤é¨ç³»ç»æ¥â¼ç³»ç»é½éè¦éè¿ api ç½å³ï¼ä¸»è¦åæ¬æ¥å¥é´æï¼æ¯å¦åè®¸æ¥å¥ï¼ãæéæ§å¶ï¼å¯ä»¥è®¿é®åªäºåè½ï¼ãä¼ è¾å å¯ãè¯·æ±è·¯ç±ãæµéæ§å¶ç­åè½ã\n   * æå¡åç°\n   * æå¡å®¹é\n     * å¸¸è§çæå¡å®¹éåæ¬è¯·æ±éè¯ãæµæ§åæå¡éç¦»ãéå¸¸æåµä¸ï¼æå¡å®¹éä¼éæå¨æå¡åç°åæå¡è·¯ç±ç³»ç»ä¸­ã\n   * æå¡çæ§\n     * å¾®æå¡èç¹çº§ççæ§åä¿¡æ¯æ¶é\n   * æå¡è¿½è¸ª\n     * æå¡å®æ´æµç¨è·è¸ªåæ\n     * ç»å¤§é¨åè¯·æ±è·è¸ªçå®ç°ææ¯é½åºäº google ç dapper è®ºæãdapper, a large-scale distributed systems tracing infrastructureãã\n   * æå¡å®å¨\n * æèé¢\n   * ç»ä½ ä¸ä¸ªç± 10 ä½ java é«çº§è½¯ä»¶å·¥ç¨å¸ç»æçå¼åå¢éï¼éç¨èªç çæ¹å¼ï¼å®æææçå¾®æå¡åºç¡è®¾æ½å¼åï¼ä½ é¢æµéè¦å¤é¿æ¶é´ï¼çç±æ¯ä»ä¹å¢ï¼\n\n\n\n\né¡µé¦\n\n\n# 37 | å¾®åæ ¸æ¶æè¯¦è§£\n\n * å¾®åæ ¸æ¶æï¼microkernel architectureï¼ï¼ä¹è¢«ç§°ä¸ºæä»¶åæ¶æï¼plug-in architectureï¼ï¼æ¯ä¸ç§é¢ååè½è¿è¡æåçå¯æ©å±æ§æ¶æ\n * å¾®åæ ¸æ¶æåå«ä¸¤ç±»ç»ä»¶ï¼æ ¸å¿ç³»ç»ï¼core systemï¼åæä»¶æ¨¡åï¼plug-in modulesï¼\n   * å³é®ææ¯æï¼æä»¶ç®¡çãæä»¶è¿æ¥åæä»¶éä¿¡\n     * æä»¶è¿æ¥ææä»¶å¦ä½è¿æ¥å°æ ¸å¿ç³»ç»ãéå¸¸æ¥è¯´ï¼æ ¸å¿ç³»ç»å¿é¡»å¶å®æä»¶åæ ¸å¿ç³»ç»çè¿æ¥è§èï¼ç¶åæä»¶æç§è§èå®ç°ï¼æ ¸å¿ç³»ç»æç§è§èå è½½å³å¯ã\n * å¸¸è§çä¸¤ç§å¾®åæ ¸å·ä½å®ç°ï¼\n   * osgi open services gateway initiative æ¯ä¸ä¸ªæä»¶åçæ å\n   * è§åå¼æ\n     * æ§è¡å¼æè§£æéç½®å¥½çä¸å¡æµï¼æ§è¡å¶ä¸­çæ¡ä»¶åè§åï¼éè¿è¿ç§æ¹å¼æ¥æ¯æä¸å¡ççµæ´»å¤åãå¦ï¼esperï¼drools\n     * ä¸è¬æµç¨ï¼\n       * å¼åäººåå°ä¸å¡åè½åè§£æç¼ä¸ºå¤ä¸ªè§åï¼å°è§åä¿å­å¨è§ååºä¸­\n       * ä¸å¡äººåæ ¹æ®ä¸å¡éè¦ï¼éè¿å°è§åæåç»åï¼éç½®æä¸å¡æµç¨ï¼ä¿å­å¨ä¸å¡åºä¸­ã\n       * è§åå¼ææ§è¡ä¸å¡æµç¨å®ç°ä¸å¡åè½ã\n\n\n\n\né¡µé¦\n\n\n# 38 | æ¶æå¸åºè¯¥å¦ä½å¤æ­ææ¯æ¼è¿çæ¹åï¼\n\n * ææ¯æ¼è¿çæ¨¡å¼: åºäºä¸å¡åå±é¶æ®µè¿è¡å¤æ­\n * ææ¯åæ°ä¼æ¨å¨ä¸å¡åå±ï¼èä¸å¡åå±ä¹ä¼é¼è¿«ææ¯è¿æ­¥\n * reference\n   * <æ·å®ææ¯åå¹´>\n\n\n\n\né¡µé¦\n\n\n# 39 | äºèç½ææ¯æ¼è¿çæ¨¡å¼\n\n * äºèç½ä¸å¡åå±ä¸è¬åä¸ºå ä¸ªæ¶æ(ä¸åæ¶æçå·®å«ä¸»è¦ä½ç°å¨ä¸¤ä¸ªæ¹é¢ï¼å¤ææ§ãç¨æ·è§æ¨¡)ï¼\n   * ååæã\n     * äºèç½ä¸å¡åå¼å§ä¸è¬é½æ¯ä¸ä¸ªåæ°çä¸å¡ç¹ï¼è¿ä¸ªä¸å¡ç¹çéç¹ä¸å¨äºâå®åâï¼èå¨äºâåæ°âï¼åªæåæ°æè½å¸å¼ç¨æ·ï¼ååæçä¸å¡å¯¹ææ¯å°±ä¸ä¸ªè¦æ±ï¼âå¿«âï¼è½ä¹°å°±ä¹°ï¼æå¼æºçå°±ç¨å¼æºçã\n   * åå±æã\n     * å½ä¸å¡æ¨åºåç»è¿å¸åºéªè¯å¦ææ¯å¯è¡çï¼åå¸å¼çç¨æ·å°±ä¼è¶æ¥è¶å¤ï¼æ­¤æ¶åæ¥ä¸å®åçä¸å¡å°±è¿å¥äºä¸ä¸ªå¿«éåå±çæ¶æã\n     * å æ­¤ä¼æè¶æ¥è¶å¤çæ°åè½ä¸æ­å°å å¥å°ç³»ç»ä¸­ãä¸è¬ä¼æä»¥ä¸å ä¸ªé¶æ®µï¼å åè½æãä¼åæãæ¶ææ\n   * ç«äºæ\n     * å½ä¸å¡ç»§ç»­åå±ï¼å·²ç»å½¢æä¸å®è§æ¨¡åï¼ä¸å®ä¼æç«äºå¯¹æå¼å§å å¥è¡ä¸æ¥ç«äºï¼å½ç«äºå¯¹æå å¥åï¼å¤§å®¶äºç¸å­¦ä¹ åæ¨¡ä»¿ï¼ä¸å¡æ´å å®åï¼ä¹ä¸æ­ææ°çä¸å¡åæ°åºæ¥ï¼èä¸ç±äºç«äºçååï¼å¯¹ææ¯çè¦æ±æ¯æ´ä¸ä¸å±æ¥¼äºã\n     * å½ç³»ç»æ°éè¶æ¥è¶å¤ï¼å°äºä¸ä¸ªä¸´çç¹åå°±äº§çäºè´¨åï¼ä¸»è¦ä½ç°å¨ï¼éå¤é è½®å­ãç³»ç»äº¤äºä¸å¢ä¹±ï¼è§£å³æ¹æ¡å¦ä¸ï¼\n       * å¹³å°å: ç®çå¨äºè§£å³âéå¤é è½®å­âçé®é¢ã\n       * æå¡å: ç®çå¨äºè§£å³âç³»ç»äº¤äºâçé®é¢ï¼å¸¸è§çåæ³æ¯éè¿æ¶æ¯éåæ¥å®æç³»ç»é´çå¼æ­¥éç¥ï¼éè¿æå¡æ¡æ¶æ¥å®æç³»ç»é´åæ­¥è°ç¨\n   * æçæã\n     * ææ¯ä¸è½åçå¤§å¨ä½å¶å®ä¹ä¸å¤äºï¼æ´å¤çæ¯è¿è¡ä¼åã\n\n\n\n\né¡µé¦\n\n\n# 40 | äºèç½æ¶ææ¨¡æ¿ï¼âå­å¨å±âææ¯\n\n\n\n * äºèç½æ¶ææ¨¡æ¿ä¸­çå­å¨å±ææ¯\n   \n   * sql\n     * åè¡¨\n     * ååºåè¡¨\n       * ä¸­é´ä»¶\n         * ææ¯è¦æ±å¾é«ï¼è¦å°ååºåè¡¨åå°èªå¨ååå¹³å°åï¼ä¸æ¯ä¸ä»¶å®¹æçäºæãæä»¥ä¸è¬æ¯è§æ¨¡å¾å¤§çå¬å¸æä¼èªå·±åãä¾å¦ç¾åº¦ç dbproxyãæ·å®ç tddlãä¸­å°å¬å¸å»ºè®®ä½¿ç¨å¼æºæ¹æ¡ï¼ä¾å¦ mysql å®æ¹æ¨èç mysql routerã360 å¼æºçæ°æ®åºä¸­é´ä»¶ atlas\n     * å¹³å°å\n       * å½ sql æå¡å¨è¶æ¥è¶å¤ï¼å¦ææ¯ä¸ªä¸å¡é½åºäºç»ä¸çæ°æ®åºä¸­é´ä»¶ç¬ç«é¨ç½²èªå·±ç sql éç¾¤ï¼å°±ä¼å¯¼è´æ°çå¤æåº¦é®é¢ï¼å·ä½è¡¨ç°å¨ï¼\n         * æ°æ®åºèµæºä½¿ç¨çä¸é«ï¼æ¯è¾æµªè´¹ã\n         * å sql éç¾¤åå¼ç»´æ¤ï¼æå¥çç»´æ¤ææ¬è¶æ¥è¶é«\n       * å¤§å¬å¸æ­¤æ¶ä¸è¬é½ä¼å¨ sql éç¾¤ä¸æå»º sql å­å¨å¹³å°ï¼ï¼ä»¥å¯¹ä¸å¡éæçå½¢å¼æä¾èµæºåéãæ°æ®å¤ä»½ãè¿ç§»ãå®¹ç¾ãè¯»ååç¦»ãååºåè¡¨ç­ä¸ç³»åæå¡ï¼ä¾å¦æ·å®ç umpï¼unified mysql platformï¼ç³»ç»ã\n   * nosql\n     * ååº\n     * nosqléç¾¤\n       * nosql æ¹æ¡ä¸è¬èªå·±æ¬èº«å°±æä¾éç¾¤çåè½ï¼ä¾å¦ memcache çä¸è´æ§ hash éç¾¤ãredis 3.0 çéç¾¤ï¼\n     * å¹³å°å\n       * èµæºå¨ææéå¨æåéï¼\n       * èµæºèªå¨åç®¡çï¼ä¾å¦\n       * æéèªå¨åå¤ç\n   * å°æä»¶å­å¨\n     * ä¸è¬å¨1mä»¥ä¸ï¼ä½æ°æ®éå·¨å¤§ãå¸åçå°æä»¶å­å¨æï¼æ·å®ç tfsãäº¬ä¸ jfsãfacebook ç haystack\n   * å¤§æä»¶å­å¨\n     * åå«ä¸å¡ä¸çå¤§æ°æ®(youtubeçè§é¢åå®¹ç­)ãæµ·éçæ¥å¿æ°æ®\n       * è¯´å°å¤§æä»¶ï¼ç¹å«è¦æå° google å yahooï¼google ç 3 ç¯å¤§æ°æ®è®ºæï¼bigtable/map- reduce/gfsï¼å¼å¯äºä¸ä¸ªå¤§æ°æ®çæ¶ä»£ï¼èyahoo å¼æºç hadoop ç³»åï¼hdfsãhbase ç­ï¼ï¼åºæ¬ä¸åæ­äºå¼æºççå¤§æ°æ®å¤ç\n   \n   \n\n * æèé¢\n   \n   * æ¢ç¶å­å¨ææ¯åå±å°æåé½æ¯å­å¨å¹³å°ï¼ä¸ºä½æ²¡æåºç°å­å¨å¹³å°çå¼æºæ¹æ¡ï¼ä½äºè®¡ç®å´é½æä¾äºå­å¨å¹³å°æ¹æ¡ï¼\n     * ä»£ä»·ãä»·å¼\n\n\n\n\né¡µé¦\n\n\n# 41 | äºèç½æ¶ææ¨¡æ¿ï¼âå¼åå±âåâæå¡å±âææ¯\n\n * å¼åå±ææ¯\n   * å¼åæ¡æ¶\n     * äºèç½å¬å¸ä¸è¬ä¼æå®ä¸ä¸ªå¤§çææ¯æ¹åï¼ç¶åä½¿ç¨ç»ä¸çå¼åæ¡æ¶ï¼è¿æ ·å¯ä»¥èçæ²éåå¢éåä½ææ¬ãä¾å¦ï¼java ç¸å³çå¼åæ¡æ¶ sshãspringmvcãplayï¼ruby ç ruby on railsï¼php ç thinkphpï¼python ç django ç­ã\n   * webæå¡å¨\n   * å®¹å¨\n     * è¾è®¯ä¸å°è§æ¨¡ç docker åºç¨å®è·µ\n     * æ°æµªå¾®åçº¢åçå¤§è§æ¨¡ docker éç¾¤\n * æå¡å±ææ¯ï¼æå¡å±çä¸»è¦ç®æ å¶å®å°±æ¯ä¸ºäºéä½ç³»ç»é´ç¸äºå³èçå¤æåº¦ã\n   * éç½®ä¸­å¿\n     * å°ææéç½®éä¸­å¨ä¸ä¸ªå¹³å°æä½ï¼æçé«ï¼åæ¶å¯ä»¥å¶å®éç½®è§åæ£æ¥ï¼é¿åæè¯¯é ææå¤±\n     * å¸¸ç¨âç³»ç»æ è¯ + host + portâæ¥æ è¯å¯ä¸è¿è¡å®ä¾\n   * æå¡ä¸­å¿\n     * ä¸¤ç§å®ç°æ¹å¼ï¼æå¡åå­ç³»ç»ï¼service name systemï¼ å æå¡æ»çº¿ç³»ç»ï¼service bus systemï¼\n   * æ¶æ¯éå\n * æèé¢\n   * ä½¿ç¨ç»ä¸çå¼åæ¡æ¶åå¼åè¯­è¨å¯ä»¥è®©å¢éå¼åæçæ´é«ï¼ä½è¿æ ·åä¼å¸¦æ¥ä»ä¹é®é¢ï¼å¦ä½è§£å³ï¼\n     * å¼åæ¡æ¶åå¼åè¯­è¨ï¼é½æ¯æåºæ¯éå¶çï¼å°ºææç­ï¼å¯¸ææé¿\n     * å°ä¸å¡æå¡åï¼å¯¹å¤æä¾ç»ä¸çapiæ¥å£\n     * å¨ä¸å¡è§æ¨¡å°çæ¶åéç¨åä¸è¯­è¨åä¸æ¡æ¶ï¼å½è§æ¨¡å¤§äºè¿æ¯åºè¯¥æä¸å®ççµæ´»æ§ï¼æä¸ä¸ªä¸»åçè¯­è¨åæ¡æ¶ï¼åéçå·¥ä½ç¨åéè¯­è¨åæ¡æ¶ï¼èå¾®æå¡æ¶æçæ¯è¾éåæ··åè¯­è¨åæ¶æçæ¨¡å¼\n\n\n\n\né¡µé¦\n\n\n# 42 | äºèç½æ¶ææ¨¡æ¿ï¼âç½ç»å±âææ¯\n\n * ç«å¨ç½ç»å±çè§åº¦æ´ä½è®¾è®¡æ¶æï¼èä¸æ¯æä¸ªå·ä½ç½ç»çæ­å»ºã\n   \n   * è´è½½åè¡¡\n     * dnsãnginx ãlvs ãf5\n   * å¤æºæ¿\n     * ååãè·¨åãè·¨å½\n     * ç®çï¼ç¾å¤\n   * å¤ä¸­å¿\n     \n     * è¦æ±é«ï¼è¦æ±æ¯ä¸ªä¸­å¿é½åæ¶å¯¹å¤æä¾æå¡ï¼ä¸ä¸å¡è½å¤èªå¨å¨å¤ä¸­å¿ä¹é´åæ¢ï¼æéåä¸éäººå·¥å¹²é¢æèå¾å°çäººå·¥å¹²é¢å°±è½èªå¨æ¢å¤ã\n       \n       * å¤ä¸­å¿è®¾è®¡çå³é®å°±å¨äºâæ°æ®ä¸è´æ§âåâæ°æ®äºå¡æ§âãç®åæ²¡æå¾æççä¸éç¨çè§£å³æ¹æ¡ï¼éè¦åºäºä¸å¡çç¹æ§è¿è¡è¯¦ç»åæåè®¾è®¡\n     \n     * æ­£å ä¸ºå¤ä¸­å¿è®¾è®¡çå¤ææ§ï¼ä¸ä¸å®ææä¸å¡é½è½å®ç°å¤ä¸­å¿ï¼ç®åå½åçé¶è¡ãæ¯ä»å®è¿ç±»ç³»ç»å°±æ²¡æå®å¨å®ç°å¤ä¸­å¿ï¼ä¸ç¶ä¹ä¸ä¼åºç°æææºä¸é²å­ä¸å»ï¼æ¯ä»å®ä¸­æ­ 4 å°æ¶çæéã\n\n * utility\n   \n   * ä¸¤å°ä¸ä¸­å¿ï¼æ¯æååä¸¤ä¸ªæºæ¿æ¯åæ´»ï¼å¼å°æºæ¿æ¯å¤ä»½ï¼å½ååä¸¤ä¸ªæºæ¿é½ææï¼å¼å°æºæ¿ä¸è½æ¥ç®¡ä¸å¡ï¼åªè½ç¨æ¥å¤ä»½æ¢å¤\n\n\n\n\né¡µé¦\n\n\n# 43 | äºèç½æ¶ææ¨¡æ¿ï¼âç¨æ·å±âåâä¸å¡å±âææ¯\n\n * ç¨æ·å±ææ¯\n   * ç¨æ·ç®¡ç\n     * åç¹ç»å½sso(ç®åææççå¼æºåç¹ç»å½æ¹æ¡å½å± cas)ãoauth2.0\n   * æ¶æ¯æ¨é\n   * å­å¨äº å å¾çäº\n     * æ®éçæä»¶åºæ¬ä¸æä¾å­å¨åè®¿é®å°±å¤äºï¼èå¾çæ¶åçä¸å¡ä¼æ´å¤ï¼åæ¬è£åªãåç¼©ãç¾åãå®¡æ ¸ãæ°´å°ç­å¤çï¼å æ­¤éå¸¸æåµä¸å¾çäºä¼æåä¸ºç¬ç«çç³»ç»å¯¹ç¨æ·æä¾æå¡ã\n * ä¸å¡å±ææ¯\n   * ä¸»è¦ææï¼ç³»ç»è¶æ¥è¶åºå¤§ï¼ä¸å¡è¶æ¥è¶å¤ï¼ä¸å¡å±ä¼è¶æ¥è¶å¤æ\n   * æåãåå¹¶ï¼åä¹å¿åãåä¹å¿åï¼ç¬¦åé«åèä½è¦ååå\n * æèé¢\n   * èæä¸å¡åååçç²åº¦éè¦ç²ä¸äºè¿æ¯è¦ç»ä¸äºï¼ä½ å»ºè®®èæä¸å¡åçæ°éå¤§æ¦æ¯å¤å°ï¼çç±æ¯ä»ä¹ï¼\n\n\n\n\né¡µé¦\n\n\n# 44 | äºèç½æ¶ææ¨¡æ¿ï¼âå¹³å°âææ¯\n\n * è¿ç»´å¹³å°\n   * èè´£ï¼èµæºéç½®ãé¨ç½²ãçæ§ãåºæ¥\n   * æ ¸å¿è®¾è®¡è¦ç´ ï¼æ ååãå¹³å°åãèªå¨åãå¯è§å\n * æµè¯å¹³å°\n   * æµè¯å¹³å°çæ ¸å¿ç®çæ¯æåæµè¯æçï¼ä»èæåäº§åè´¨éï¼å¶è®¾è®¡å³é®å°±æ¯èªå¨å\n   * ç¨ä¾ç®¡ç\n     * ä¸ºäºè½å¤éå¤æ§è¡æµè¯ç¨ä¾ï¼æµè¯å¹³å°éè¦å°ç¨ä¾ç®¡çèµ·æ¥ï¼ç®¡ççç»´åº¦åæ¬ä¸å¡ãç³»ç»ãæµè¯ç±»åãç¨ä¾ä»£ç ãä¾å¦ï¼ç½è´­ä¸å¡çè®¢åç³»ç»çæ¥å£æµè¯ç¨ä¾ã\n   * èµæºç®¡ç\n     * ç®¡çæ§è¡æµè¯æéçè¿è¡ç¯å¢, åæ¬ç¡¬ä»¶ï¼æå¡å¨ãææºãå¹³æ¿çµèç­ï¼ãè½¯ä»¶ï¼æä½ç³»ç»ãæ°æ®åºãjava èææºç­ï¼ãä¸å¡ç³»ç»ï¼è¢«æµè¯çç³»ç»ï¼\n   * ä»»å¡ç®¡ç\n     * ä»»å¡ç®¡ççä¸»è¦èè´£æ¯å°æµè¯ç¨ä¾åéå°å·ä½çèµæºä¸æ§è¡ï¼è·è¸ªä»»å¡çæ§è¡æåµãä»»å¡ç®¡çæ¯æµè¯å¹³å°è®¾è®¡çæ ¸å¿ï¼å®å°æµè¯å¹³å°çåä¸ªé¨åä¸²èèµ·æ¥ä»èå®æèªå¨åæµè¯ã\n   * æ°æ®ç®¡ç æµè¯ä»»å¡æ§è¡å®æåï¼éè¦è®°å½åç§ç¸å³çæ°æ®ï¼ä¾å¦ï¼æ§è¡æ¶é´ãæ§è¡ç»æãç¨ä¾æ§è¡æé´ç cpuãåå­å ç¨æåµç­ï¼ï¼è¿äºæ°æ®å·å¤ä¸é¢è¿äºä½ç¨ï¼å±ç°å½åç¨ä¾çæ§è¡æåµãä½ä¸ºåå²æ°æ®ï¼æ¹ä¾¿åç»­çæµè¯ä¸åå²æ°æ®è¿è¡å¯¹æ¯ï¼ä»èåç°ææ¾çååè¶å¿ãä½ä¸ºå¤§æ°æ®çä¸é¨åï¼å¯ä»¥åºäºæµè¯çä»»å¡æ°æ®è¿è¡ä¸äºæ°æ®ææã\n * æ°æ®å¹³å°\n   * æ°æ®å¹³å°çæ ¸å¿èè´£ä¸»è¦åæ¬ä¸é¨åï¼æ°æ®ç®¡çãæ°æ®åæåæ°æ®åºç¨\n * ç®¡çå¹³å°\n   * ç®¡çå¹³å°çæ ¸å¿èè´£å°±æ¯æéç®¡çï¼ä¸»è¦åä¸ºä¸¤é¨åï¼èº«ä»½è®¤è¯ãæéæ§å¶ï¼\n * æèé¢\n   * è¿ç»´å¹³å°æèæµè¯å¹³å°ï¼æçå¬å¸æ¯ç±ä¸­é´ä»¶å¢éè´è´£å¼åï¼æçæ¯è¿ç»´åæµè¯å¢éèªå·±å¼åï¼ä½ è§å¾ä¸¤ç§æ¹å¼åæä»ä¹ä¼ç¼ºç¹ï¼åå«éç¨ä»ä¹åºæ¯å¢ï¼\n\njira+gitlab+jenkins+nexus+bearychat æç®åçdevops å¹³å°ãå¦æå°çäº§ç¯å¢å®å¨äº¤ç»è¿ç»´å¢éçè¯ï¼ä¸ªäººè§å¾è¿ä¸ªåºè¯¥å¯ä»¥ç§°ä¸ºå¼åå¹³å°ãè¾å¥çæ¯éæ±ï¼è¾åºçæ¯åç§å·¥ä»¶ã\n\n\n\n\né¡µé¦\n\n\n# 45 | æ¶æéæååå¿æ³ç¬¬ä¸å¼ï¼æçæ¾ç¢\n\n * ç³»ç»çæ¶ææ¯ä¸æ­æ¼åçï¼å°é¨åæ¶ææ¼åå¯è½éè¦æ¨åéæ¥ï¼ä½ç»å¤§é¨åçæ¶ææ¼åé½æ¯éè¿æ¶æéææ¥å®ç°çãç¸æ¯å¨æ°çæ¶æè®¾è®¡æ¥è¯´ï¼æ¶æéæå¯¹æ¶æå¸çè¦æ±æ´é«ï¼ä¸»è¦ä½ç°å¨ï¼\n   * ä¸å¡å·²ç»ä¸çº¿ï¼ä¸è½åä¸æ¥\n   * å³èæ¹ä¼å¤ï¼çµä¸åå¨å¨èº«\n     * æ¶æéææ¶åçä¸å¡å³èæ¹å¾å¤ï¼ä¸åå³èæ¹çèµæºæå¥ç¨åº¦ãä¸å¡åå±éåº¦ãå¯¹æ¶æçç¹çææåº¦ç­æå¾å¤§å·®å¼ï¼å¦ä½å°½éåå°å¯¹å³èæ¹çå½±åï¼æèåè°å³èæ¹ç»ä¸è¡å¨ï¼æ¯ä¸é¡¹å¾å¤§çææï¼èå¦ææ¯æ°è®¾è®¡æ¶æï¼åå¨æ°æ¶æä¸çº¿åï¼å¯¹å³èæ¹æ²¡æå½±åã\n   * æ§æ¶æççº¦æ\n     * å¨æ§çæ¶æåºç¡ä¸è¿è¡ï¼ä¼éå¶æ¶æå¸çææ¯éæ©èå´ï¼æ°æ¶æå¿é¡»èèå¦ä½å°æ§æ¶æäº§ççæ°æ®è½¬æ¢è¿æ¥ã\n * ææéè¿æ¶æéææ¥è§£å³ææé®é¢å½ç¶æ¯ä¸ç°å®ç\n   * æä»¥æ¶æå¸çé¦è¦ä»»å¡æ¯ä»ä¸å¤§å çº·ç¹å¤æçé®é¢ä¸­è¯å«åºçæ­£è¦éè¿æ¶æéææ¥è§£å³çé®é¢ï¼éä¸­åéå¿«éè§£å³ï¼èä¸æ¯æ³çéè¿æ¶æéææ¥è§£å³ææçé®é¢ã\n   * å¯¹äºåæ¥æä¸ä¸ªæ°ç³»ç»çæ¶æå¸æèææ¯ä¸»ç®¡æ¥è¯´ï¼ä¸å®è¦æ§å¶ä½âæ°å®ä¸ä»»ä¸æç«âçå²å¨ï¼é¿åæå¤§é¥¼å¼æèè¿å¨å¼çéæåä¼åã\n * éç¹\n   * æ»ä¹ï¼æ¶æéæéè¦æ¶æå¸æ¢è¦è¯´å¾å¨èæ¿ï¼ä¹éå¾ä½åäºï¼æ¢è¦ææ¯æ»å³ï¼åè¦åè°èµæºï¼æ¢è¦ä¿è¯ä¸å¡æ­£å¸¸åå±ï¼åè¦å¨æå®æ¶é´åå®æç®æ â¦â¦æ»ä¹å°±æ¯åå«è¬æ­¦èºè¦æ ·æ ·ç²¾éã\n   * æ¶æå¸éè¦éè¿é®é¢è¡¨è±¡çå°é®é¢æ¬è´¨ï¼æ¾åºçæ­£éè¦éè¿æ¶æéæè§£å³çæ ¸å¿é®é¢ï¼ä»èåå°æçæ¾ç¢ï¼æ¢ä¸ä¼èè´¹å¤§éçäººååæ¶é´æå¥ï¼åè½å¤è§£å³æ ¸å¿é®é¢ã\n * æèé¢\n   * åæä¸ä¸ä½ ç®åå¼åçç³»ç»ï¼ä½ è§å¾éè¦æ¶æéæåï¼åå åçç±æ¯ä»ä¹ï¼\n\n\n\n\né¡µé¦\n\n\n# 46 | æ¶æéæååå¿æ³ç¬¬äºå¼ï¼åçºµè¿æ¨ª\n\n * ä¸ä¸æ¸¸æ²éåè°\n   * å¨æ²éåè°æ¶ï¼å°ææ¯è¯­è¨è½¬æ¢ä¸ºéä¿è¯­è¨ï¼ä»¥äºå®è¯´è¯ï¼ä»¥æ°æ®è¯´è¯ï¼æ¯æ²éçå³é®ï¼\n * å¶ä»ç¸å³æèéåçç³»ç»çæ²éåè°\n   * é®é¢ï¼ä¸»è¦çé»åæ¥èªâè¿å¯¹ææä»ä¹å¥½å¤âåâè¿é¨åæè¿è¾¹ç°å¨ä¸æ¥â\n   * è§£å³æ¹æ¡ï¼æ¢ä½æèãåä½åèµ¢ãå³æ³¨é¿æ\n\n\n\n\né¡µé¦\n\n\n# 47 | æ¶æéæååå¿æ³ç¬¬ä¸å¼ï¼è¿ç­¹å¸·å¹\n\n * é®é¢\n   * éå¸¸æåµä¸ï¼éè¦æ¶æéæçç³»ç»ï¼åºæ¬ä¸é½æ¯å ä¸ºåç§åå²åå ååå²é®é¢æ²¡æåæ¶å¤çï¼éçä¸æ¥éæ¸ç§¯ç´¯ï¼ç¶åå°äºä¸ä¸ªä¸´çç¹ï¼ï¼åç§é®é¢å¼å§äºç¸ä½ç¨ï¼éä¸­çåï¼å°äºçæ­£è¦å¼å§éæçæ¶åï¼æ¶æå¸è¯å«åºç³»ç»å³é®çå¤æåº¦é®é¢åï¼å¦æåªéå¯¹è¿ä¸ªå¤æåº¦é®é¢è¿è¡æ¶æéæï¼å¯è½ä¼åç°è¿æ¯æ æ³è½å°ï¼å ä¸ºå¾å¤æ¡ä»¶ä¸å·å¤æèæçé®é¢æ²¡è§£å³çæåµä¸å°±æ¯ä¸è½åæ¶æéæ\n * éæ: åæ®µå®æ½\n   * éæçåæ³ï¼å¶å®å°±æ¯âåæ®µå®æ½âï¼å°è¦è§£å³çé®é¢æ ¹æ®ä¼åçº§ãéè¦æ§ãå®æ½é¾åº¦ç­ååä¸ºä¸åçé¶æ®µï¼æ¯ä¸ªé¶æ®µèç¦äºä¸ä¸ªæ´ä½çç®æ ï¼éä¸­ç²¾ååèµæºè§£å³ä¸ç±»é®é¢ãè¿æ ·åæå ä¸ªå¥½å¤:\n     * æ¯ä¸ªé¶æ®µé½ææç¡®ç®æ ï¼åå®ä¹åææææ¾ï¼å¢éä¿¡å¿è¶³ï¼åç»­æ¨è¿æ´å å®¹æã\n     * æ¯ä¸ªé¶æ®µçå·¥ä½éä¸ä¼å¤ªå¤§ï¼å¯ä»¥åä¸å¡å¹¶è¡ã\n     * æ¯ä¸ªé¶æ®µçæ¹å¨ä¸ä¼å¤ªå¤§ï¼éä½äºæ»ä½é£é©ã\n   * ç­ç¥\n     * ä¼åçº§æåº\n     * é®é¢åç±»\n       * å°é®é¢æç§æ§è´¨åç±»ï¼æ¯ä¸ªé¶æ®µéä¸­è§£å³ä¸ç±»é®é¢ã\n     * åæåé¾\n       * å°é®é¢æç§æ§è´¨åç±»ï¼æ¯ä¸ªé¶æ®µéä¸­è§£å³ä¸ç±»é®é¢\n     * å¾ªåºæ¸è¿\n       * æ¯ä¸ªé¶æ®µçå®æ½ï¼æå° 1 ä¸ªæï¼æé¿ä¸è¦è¶è¿ 3 ä¸ªæ\n * æèé¢\n   * å¦æä¸ä¸ªæ¶æéæé¡¹ç®æåè§åè¦ 2 å¹´æå®æï¼ä½ ä¼æä¹å¤çï¼\n     * å¤ªä¹\n\n\n\n\né¡µé¦\n\n\n# 48 | åè°å¼æºé¡¹ç®ï¼å¦ä½éæ©ãä½¿ç¨ä»¥åäºæ¬¡å¼åï¼\n\nè½¯ä»¶å¼åé¢åæä¸ä¸ªæµè¡çååï¼dryï¼donât repeat yourselfã\n\n * éæ©\n   * èç¦æ¯å¦æ»¡è¶³ä¸å¡ã\n   * èç¦æ¯å¦æç\n     * çæ¬å·ãä½¿ç¨çå¬å¸æ°éãç¤¾åºæ´»è·ç¨åº¦\n   * èç¦è¿ç»´è½å\n     * å¼æºé¡¹ç®æ¥å¿æ¯å¦é½å¨ãæ¯å¦æç»´æ¤å·¥å·å¯ä»¥çå°ç³»ç»è¿è¡ç¶åµãæ¯å¦ææéæ£æµåæ¢å¤çè½å\n * ä½¿ç¨\n   * æ·±å¥ç ç©¶ï¼ä»ç»æµè¯\n     * éè¯»å¼æºé¡¹ç®çè®¾è®¡ææ¡£æèç½ç®ä¹¦ï¼äºè§£å¶è®¾è®¡åçã\n     * æ ¸å¯¹æ¯ä¸ªéç½®é¡¹çä½ç¨åå½±åï¼è¯å«åºå³é®éç½®é¡¹ã\n     * è¿è¡å¤ç§åºæ¯çæ§è½æµè¯\n     * è¿è¡ååæµè¯ï¼è¿ç»­è·å å¤©ï¼è§å¯ cpuãåå­ãç£ç i/o ç­ææ æ³¢å¨\n     * è¿è¡æéæµè¯ï¼killãæ­çµãæç½çº¿ãéå¯ 100 æ¬¡ä»¥ä¸ãåæ¢ç­\n   * å°å¿åºç¨ï¼ç°åº¦åå¸\n   * åå¥½åºæ¥ï¼ä»¥é²ä¸ä¸\n * äºæ¬¡å¼å\n   * ä¿æçº¯æ´ï¼å ä»¥åè£\n     * åå¤å¨æ¹çç¼ºç¹ï¼æå¥å¤ªå¤§ãå¤±å»äºè·éåé¡¹ç®æ¼è¿çè½å(å·®å¼å¤ªå¤§å¯¼è´æºé¡¹ç®çæ¹å¨æ æ³åå¹¶å°èªå·±çåæ¯)\n   * åæä½ è¦çè½®å­\n     * æ²¡æå®å¨éåä½ çè½®å­ï¼\n\n\n\n\né¡µé¦\n\n\n# 49 | è°è°appæ¶æçæ¼è¿\n\n * å¤ä¹ ä¸ä¸æçä¸æ æè®²è¿°çæ¶æè®¾è®¡çå¿µ\n   * æ¶ææ¯ç³»ç»çé¡¶å±ç»æ\n   * æ¶æè®¾è®¡çä¸»è¦ç®çæ¯ä¸ºäºè§£å³è½¯ä»¶ç³»ç»å¤æåº¦å¸¦æ¥çé®é¢ã\n   * æ¶æè®¾è®¡éè¦éµå¾ªä¸ä¸ªä¸»è¦ååï¼åéååãç®åååãæ¼åååã\n   * æ¶æè®¾è®¡é¦åè¦ææ¡ä¸çå·²ç»æççåç§æ¶ææ¨¡å¼ï¼ç¶ååè¿è¡ä¼åãè°æ´ãåæ°ã\n * appæ¶ææ¼è¿\n   * web appãåçappãhybrid appãç»ä»¶å & å®¹å¨åãè·¨å¹³å° app\n     * ç»ä»¶å & å®¹å¨å\n       * å¾®ä¿¡ android å®¢æ·ç«¯æ¶ææ¼è¿ä¹è·¯\n       * atlasï¼ææ· native å®¹å¨åæ¡æ¶åæè\n     * è·¨å¹³å°\n       * flutter\n * æèé¢\n   * ä½ è®¤ä¸º app æ¶ææ¥ä¸æ¥ä¼å¦ä½æ¼è¿ï¼è°è°ä½ çæèååæã\n\n\n\n\né¡µé¦\n\n\n# 50 | æ¶æå®æï¼æ¶æè®¾è®¡ææ¡£æ¨¡æ¿\n\n * å¤éæ¹æ¡æ¨¡æ¿ï¼ç®çæ¯ä¾éæ©ä¸ä¸ªæ¹æ¡è½å°å®æ½\n   * éæ±ä»ç»ï¼ä¸»è¦æè¿°éæ±çèæ¯ãç®æ ãèå´ç­\n   * éæ±åæï¼ä¸»è¦å¨æ¹ä½å°æè¿°éæ±ç¸å³çä¿¡æ¯\n     * 5w: who(å©çå¹²ç³»äºº)ãwhenãwhat(äº§åº)ãwhy(éè¦è§£å³çé®é¢)ãwhere(åºç¨åºæ¯)\n     * 1hï¼å³é®ä¸å¡æµç¨ã\n     * 8c: æçæ¯ 8 ä¸ªçº¦æåéå¶ï¼constraintsï¼åæ¬æ§è½ performanceãææ¬ costãæ¶é´ timeãå¯é æ§ reliabilityãå®å¨æ§ securityãåè§æ§ complianceãææ¯æ§ technologyãå¼å®¹æ§ compatibility\n   * å¤æåº¦åæï¼åå«é«å¯ç¨ãé«æ§è½ãå¯æ©å±ç­\n   * å¤éæ¹æ¡ï¼è³å° 3 ä¸ªå¤éæ¹æ¡ï¼æ¯ä¸ªå¤éæ¹æ¡éè¦æè¿°å³é®çå®ç°ï¼æ é¡»æè¿°å·ä½çå®ç°ç»è\n   * å¤éæ¹æ¡è¯ä¼°: å¤éæ¹æ¡ 360 åº¦ç¯è¯, æ³¨æå¤éæ¹æ¡è¯ä¼°çåå®¹ä¼æ ¹æ®è¯ä¼°ä¼è®®çç»æè¿è¡ä¿®æ¹\n * æ¶æè®¾è®¡æ¨¡æ¿ï¼ç®çæ¯è¯¦ç»æè¿°ç»åæ¹æ¡\n   * æ»ä½æ¹æ¡\n     * æ»ä½æ¹æ¡éè¦ä»æ´ä½ä¸æè¿°æ¹æ¡çç»æï¼å¶æ ¸å¿åå®¹å°±æ¯æ¶æå¾ï¼ä»¥åéå¯¹æ¶æå¾çæè¿°ï¼åæ¬æ¨¡åæèå­ç³»ç»çèè´£æè¿°ãæ ¸å¿æµç¨\n   * æ¶ææ»è§\n     * æ¶ææ»è§ç»åºæ¶æå¾ä»¥åæ¶æçæè¿°\n   * æ ¸å¿æµç¨\n   * è¯¦ç»è®¾è®¡\n     * è¯¦ç»è®¾è®¡éè¦æè¿°å·ä½çå®ç°ç»è\n     * é«å¯ç¨ãé«æ§è½ãé«å¯æ©å±\n     * å®å¨è®¾è®¡\n     * å¶ä»è®¾è®¡\n       * å¶ä»è®¾è®¡åæ¬ä¸è¿°ä»¥å¤çå¶ä»è®¾è®¡èèç¹ï¼ä¾å¦æå®å¼åè¯­è¨ãç¬¦åå¬å¸çæäºæ åç­ï¼å¦æç¯å¹è¾é¿ï¼ä¹å¯ä»¥ç¬ç«è¿è¡æè¿°]\n     * é¨ç½²æ¹æ¡\n       * é¨ç½²æ¹æ¡ä¸»è¦åæ¬ç¡¬ä»¶è¦æ±ãæå¡å¨é¨ç½²æ¹å¼ãç»ç½æ¹å¼ç­\n   * æ¶ææ¼è¿è§å\n     * éå¸¸æåµä¸ï¼è§ååè®¾è®¡çéæ±æ¯è¾å®åï¼ä½å¦æä¸æ¬¡æ§å¨é¨åå®ï¼é¡¹ç®å¨æå¯è½ä¼å¾é¿ï¼å æ­¤å¯ä»¥éååé¶æ®µå®æ½ï¼å³ï¼ç¬¬ä¸æåä»ä¹ãç¬¬äºæåä»ä¹ï¼ä»¥æ­¤ç±»æ¨\n\n\n\n\né¡µé¦\n\n\n# æ»ç»\n\n> å³äºå¦ä½å¨ä¸ä¸é¢ååæåï¼èåçâ10000 å°æ¶å®å¾â åææ¢¦æ³ãåæå­¦ä¹ ãåæ(æç»­)è¾åº\n\n * æ¶æå¸çååä¸»è¦åå«ä¸é¨åï¼å¤æ­åãæ§è¡åãåæ°å\n   * å¤æ­åï¼è½å¤åç¡®å¤æ­ç³»ç»çå¤æåº¦å¨åªéï¼å°±åæ­¦ä¾ é«æä¸æ ·ï¼è½åç¡®å°çåºå¯¹æçç ´ç»½åå¼±ç¹ã\n   * æ§è¡åï¼è½å¤ä½¿ç¨åéçæ¹æ¡è§£å³å¤æåº¦é®é¢ï¼å°±åæ­¦ä¾ é«æä¸æ ·ï¼è½éæ©åéçæå¼æèæ¹æ³æè´¥å¯¹æã\n   * åæ°åï¼è½å¤åé æ°çè§£å³æ¹æ¡è§£å³å¤æåº¦é®é¢ï¼å°±åæ­¦ä¾ ä¸çéï¼å°ä¸äºçåæ°æ¯åæ°æå¼ï¼èæ­¦å­¦å®å¸è½å¤åç«æ°çæ­¦å­¦æèå¿æ³\n * ä»ç¨åºåå°æ¶æå¸çæé¿ä¹è·¯ï¼æ»çæå¯¼ååæ¯(ä»¥ä¸ä¸æ¹é¢çè½åä¸»è¦æ¥æº)ï¼ç»éªãè§éãæè\n * ææ¯æé¿ä¹è·¯åä¸ºï¼\n   * å·¥ç¨å¸\n     * å¨å«äººçæå¯¼ä¸å®æå¼åï¼åºç¡æè½ç§¯ç´¯é¶æ®µ\n   * é«çº§å·¥ç¨å¸\n     * ç¬ç«å®æå¼åï¼åæ¬éæ±åæãæ¹æ¡è®¾è®¡ãç¼ç å®ç°ï¼å¶ä¸­éæ±åæåæ¹æ¡è®¾è®¡å·²ç»åå«äºâå¤æ­âåâéæ©âï¼åªæ¯èå´ç¸å¯¹æ¥è¯´å°ä¸äºï¼æ´å¤æ¯å¨å·²ææ¶æä¸è¿è¡è®¾è®¡ã\n     * ç§¯ç´¯æ¹æ¡è®¾è®¡ç»éªï¼ç®åæ¥è¯´å°±æ¯ä¸å¡å½åç¨å°çç¸å³ææ¯çè®¾è®¡ç»éªã\n     * é«çº§å·¥ç¨å¸é¶æ®µç¸æ¯å·¥ç¨å¸é¶æ®µï¼æä¸¤ä¸ªå¸åçå·®å¼ï¼æ·±åº¦(how -> why)ãçè®º(æççè®¾è®¡ç»éª)\n   * ææ¯ä¸å®¶\n     * æä¸ªé¢åçä¸å®¶ï¼éä¿å°è®²ï¼åªè¦æ¯è¿ä¸ªé¢åçé®é¢ï¼ææ¯ä¸å®¶é½å¯ä»¥è§£å³ã\n     * ææ¯ä¸å®¶ä¸é«çº§å·¥ç¨å¸çä¸ä¸ªå¸ååºå«å°±æ¯ï¼é«çº§å·¥ç¨å¸ä¸»è¦æ¯å¨å·²æçæ¶ææ¡æ¶ä¸å®æè®¾è®¡ï¼èææ¯ä¸å®¶ä¼æ ¹æ®éè¦ä¿®æ¹ãæ©å±ãæ©å±ãä¼åæ¶æã\n     * ä»é«çº§å·¥ç¨å¸æé¿ä¸ºææ¯ä¸å®¶ï¼ä¸»è¦éè¦âæå±ææ¯å®½åº¦âï¼å ä¸ºä¸ä¸ªâé¢åâå¿ç¶ä¼æ¶åä¼å¤çææ¯é¢ãå¸¸è§çæå±ææ¯å®½åº¦çæ¹æ³æï¼\n       * å­¦ä¹ ä¸çæççå¼æºæ¹æ¡ãç ç©¶ä¸ççç»éªåäº«\n     * éè¦æ³¨æçæ¯ï¼æå±ææ¯å®½åº¦å¹¶ä¸æå³çä»ä»åªæ¯ç¥éä¸ä¸ªææ¯åè¯ï¼èæ¯è¦æ·±å¥å»çè§£æ¯ä¸ªææ¯çåçãä¼ç¼ºç¹ãåºç¨åºæ¯\n   * åçº§æ¶æå¸\n     * å¸åç¹å¾å°±æ¯è½å¤âç¬ç«å®æä¸ä¸ªç³»ç»çæ¶æè®¾è®¡âï¼å¯ä»¥æ¯ä» ä» 0 å° 1 è®¾è®¡ä¸ä¸ªæ°ç³»ç»ï¼ä¹å¯ä»¥æ¯å°æ¶æä» 1.0 éæå° 2.0ã\n     * åçº§æ¶æå¸åææ¯ä¸å®¶çå¸ååºå«æ¯ï¼æ¶æå¸æ¯åºäºå®åçæ¶æè®¾è®¡æ¹æ³è®ºçæå¯¼æ¥è¿è¡æ¶æè®¾è®¡ï¼èææ¯ä¸å®¶æ´å¤çæ¯åºäºç»éªè¿è¡æ¶æè®¾è®¡ã\n       * ç®åæ¥è¯´ï¼å³ä½¿æ¯åæ ·ä¸ä¸ªæ¹æ¡ï¼åçº§æ¶æå¸è½å¤æ¸æ°å°éè¿°æ¶æè®¾è®¡ççç±ååå ï¼èææ¯ä¸å®¶å¯è½å°±æ¯å ä¸ºèªå·±æ¾ç»è¿æ ·åè¿ï¼æèçå°å«äººè¿æ ·åè¿èéæ©è®¾è®¡æ¹æ¡ã\n   * ä»ææ¯ä¸å®¶æé¿ä¸ºåçº§æ¶æå¸ï¼æä¸»è¦çæ¯å½¢æèªå·±çâæ¶æè®¾è®¡æ¹æ³è®º\".ä¸»è¦çææ®µæï¼\n     * ç³»ç»å­¦ä¹ æ¶æè®¾è®¡æ¹æ³è®ºï¼åæ¬è®¢éä¸æ æèéè¯»ä¹¦ç±ç­\n     * æ·±å¥ç ç©¶æçå¼æºç³»ç»çæ¶æè®¾è®¡ï¼è¿ä¸ªææ®µå¨ææ¯ä¸å®¶é¶æ®µä¹ä¼ç¨å°ï¼ä½å³æ³¨ç¹ä¸ä¸æ ·ï¼åæ ·æ¯ç ç©¶å¼æºç³»ç»ï¼ææ¯ä¸å®¶é¶æ®µèç¦äºå¦ä½æ´å¥½å°åºç¨å¼æºé¡¹ç®ï¼åçº§æ¶æå¸é¶æ®µèç¦äºå­¦ä¹ å¶æ¶æè®¾è®¡åçåææ³ï¼ä¾å¦ kafka çææ¡£ä¸­å°±æå³äºæ¶æ¯éåæ¶æè®¾è®¡çåæååèã\n     * ç»åæ¶æè®¾è®¡æ¹æ³è®ºï¼åæåæ»ç»èªå·±å¢éçè³å¬å¸çåç§ç³»ç»çæ¶æè®¾è®¡ä¼ç¼ºç¹ï¼å°è¯æèæ¶æéææ¹æ¡ã\n   * ä¸­çº§æ¶æå¸\n     * å¸åç¹å¾æ¯âè½å¤å®æå¤æç³»ç»çæ¶æè®¾è®¡âï¼åå«é«æ§è½ãé«å¯ç¨ãå¯æ©å±ãæµ·éå­å¨ç­å¤æç³»ç»ï¼ä¾å¦è®¾è®¡ä¸ä¸ªå kafka æ§è½å¹æçæ¶æ¯éåç³»ç»ãå°ä¸å¡æ¹é ä¸ºå¼å°å¤æ´»ãè®¾è®¡ä¸ä¸ªæ»å± 100 äººåä¸å¼åçä¸å¡ç³»ç»ç­ã\n     * ä¸­çº§æ¶æå¸ä¸åçº§æ¶æå¸çå¸ååºå«å¨äºç³»ç»å¤æåº¦çä¸åï¼\n     * ä»åçº§æ¶æå¸æé¿ä¸ºä¸­çº§æ¶æå¸ï¼æå³é®çæ¯âææ¯æ·±åº¦åææ¯çè®ºçç§¯ç´¯âï¼\n   * é«çº§æ¶æå¸\n     * å¸åç¹å¾æ¯âåé æ°çæ¶ææ¨¡å¼â\n     * é«çº§æ¶æå¸ä¸ä¸­çº§æ¶æå¸ç¸æ¯ï¼å¸ååºå«å¨äºâåé æ§âï¼é«çº§æ¶æå¸è½å¤åé æ°çæ¶ææ¨¡å¼ï¼å¼åæ°çææ¯æ½®æµã\n\n\n\n\né¡µé¦\n\n\n# end\n\n * recommend\n   * ãunixç½ç»ç¼ç¨å·1ããtcp/ipåè®®å·1ããunixé«çº§ç¼ç¨ããlinuxç³»ç»ç¼ç¨ããé«æ§è½mysqlã\n * ä¸¤ç§é«æçæå¡å¨è®¾è®¡æ¨¡åï¼\n   * reactoråproactoræ¨¡å\n * sso(single sign on)æµç¨\n   * https://www.cnblogs.com/ywlaker/p/6113927.html\n * mvc\n   * https://draveness.me/mvx\n * å¾®æå¡\n   * å¾®æå¡æ¶æççè®ºåºç¡ - åº·å¨å®å¾\n * æ¶æå¸çæ ¸å¿è½åï¼\n   * æ½è±¡ï¼æç¼ï¼ææ¡å³é®ï¼é¢æµæªæ¥ï¼å½ç¶è¿ææ²éï¼æé¼ï¼ð\n * å­¦ä¹ å¼æºé¡¹ç®ï¼ä»¥æå­¦ä¹  elasticsearch ä¸ºä¾ï¼å·ä½çåæ³æ¯ï¼\n   * æ­å»ºä¸ä¸ªåæºä¼ªéç¾¤ï¼æ­å»ºå®æåççå®è£è·¯å¾ä¸çæä»¶åç®å½ï¼ççéç½®æä»¶æåªäºéç½®é¡¹ï¼ä¸åçéç½®é¡¹ä¼æä»ä¹æ ·çå½±åã\n   * æ§è¡å¸¸ç¨çæä½ï¼ä¾å¦åå»ºç´¢å¼ï¼æå¥ãå é¤ãæ¥è¯¢ææ¡£ï¼æ¥çä¸ä¸åç§è¾åº\n   * ç ç©¶å¶åºæ¬åçï¼ä¾å¦ç´¢å¼ãåçãå¯æ¬ç­ï¼ç ç©¶çæ¶åè¦å¤æèï¼ä¾å¦ç´¢å¼åºè¯¥å¦ä½å»ºï¼åçæ°éåå¯æ¬æ°éå¯¹ç³»ç»æä»ä¹å½±åç­ã\n   * åå¶ä»ç±»ä¼¼ç³»ç»å¯¹æ¯ï¼ä¾å¦ solrãsphinxï¼ç ç©¶å¶ä¼ç¹ãç¼ºç¹ãéç¨åºæ¯ã\n   * æ¨¡æä¸ä¸ªæ¡ä¾ççæä¹åºç¨ãä¾å¦ï¼åè®¾æç¨ elasticsearch æ¥å­å¨æ·å®çååä¿¡æ¯ï¼æåºè¯¥å¦ä½è®¾è®¡ç´¢å¼ååçã\n   * æ¥çä¸çä½¿ç¨çæ¡ä¾ï¼æèä¸ä¸å«äººä¸ºä½è¿ä¹ç¨ï¼ççå«äººæµè¯çç»æï¼å¤§æ¦äºè§£æ§è½èå´ã\n   * å¦ææé¨åç¹å«æå´è¶£æèå¾å³é®ï¼å¯è½å»çæºç ï¼ä¾å¦ elasticsearch çéä¸¾ç®æ³\n   * å¦æç¡®å®è¦å¼å¥ï¼ä¼è¿è¡æ§è½åå¯ç¨æ§æµè¯ã",charsets:{cjk:!0}},{title:"æç»­äº¤ä»(æå®¢æ¶é´)æè¦",frontmatter:{title:"æç»­äº¤ä»(æå®¢æ¶é´)æè¦",date:"2020-04-13T00:00:00.000Z",description:"Devops æç»­äº¤ä»(æå®¢æ¶é´)æè¦",permalink:null,categories:["blog","xnote"],tags:[null]},regularPath:"/blog/xnote/rnote_geekbang_devops.html",relativePath:"blog/xnote/rnote_geekbang_devops.md",key:"v-680803e5",path:"/blog/xnote/rnote_geekbang_devops.html",headers:[{level:2,title:"ç¬¬01è®² æç»­äº¤ä»å°åºæä»ä¹ä»·å¼ï¼",slug:"ç¬¬01è®²-æç»­äº¤ä»å°åºæä»ä¹ä»·å¼",normalizedTitle:"ç¬¬01è®² æç»­äº¤ä»å°åºæä»ä¹ä»·å¼ï¼",charIndex:18},{level:2,title:"ç¬¬02è®² å½±åæç»­äº¤ä»çå ç´ æåªäºï¼",slug:"ç¬¬02è®²-å½±åæç»­äº¤ä»çå ç´ æåªäº",normalizedTitle:"ç¬¬02è®² å½±åæç»­äº¤ä»çå ç´ æåªäºï¼",charIndex:303},{level:2,title:"ç¬¬03è®² æç»­äº¤ä»åDevOpsæ¯ä¸å¯¹å¥½åºå",slug:"ç¬¬03è®²-æç»­äº¤ä»ådevopsæ¯ä¸å¯¹å¥½åºå",normalizedTitle:"ç¬¬03è®² æç»­äº¤ä»ådevopsæ¯ä¸å¯¹å¥½åºå",charIndex:394},{level:2,title:"ç¬¬04è®² ä¸åçæºå¤´ï¼ä»£ç åæ¯ç­ç¥çéæ©",slug:"ç¬¬04è®²-ä¸åçæºå¤´-ä»£ç åæ¯ç­ç¥çéæ©",normalizedTitle:"ç¬¬04è®² ä¸åçæºå¤´ï¼ä»£ç åæ¯ç­ç¥çéæ©",charIndex:637},{level:2,title:"ç¬¬05è®² ææææä½ ä¾èµç®¡ç",slug:"ç¬¬05è®²-ææææä½ ä¾èµç®¡ç",normalizedTitle:"ç¬¬05è®² ææææä½ ä¾èµç®¡ç",charIndex:1178},{level:2,title:"ç¬¬06è®² ä»£ç åæ»ï¼ä½ çççè§£åï¼",slug:"ç¬¬06è®²-ä»£ç åæ»-ä½ çççè§£å",normalizedTitle:"ç¬¬06è®² ä»£ç åæ»ï¼ä½ çççè§£åï¼",charIndex:1399},{level:2,title:"ç¬¬07è®² âä¸¤ä¸ªæ«è¨âå¢éçä»£ç ç®¡çå®éæ¡ä¾",slug:"ç¬¬07è®²-ä¸¤ä¸ªæ«è¨-å¢éçä»£ç ç®¡çå®éæ¡ä¾",normalizedTitle:"ç¬¬07è®² âä¸¤ä¸ªæ«è¨âå¢éçä»£ç ç®¡çå®éæ¡ä¾",charIndex:1493},{level:2,title:"ç¬¬08è®² æµè¯ç¯å¢è¦å¤å°ï¼ä»ç°å®éæ±è¯´èµ·",slug:"ç¬¬08è®²-æµè¯ç¯å¢è¦å¤å°-ä»ç°å®éæ±è¯´èµ·",normalizedTitle:"ç¬¬08è®² æµè¯ç¯å¢è¦å¤å°ï¼ä»ç°å®éæ±è¯´èµ·",charIndex:1695},{level:2,title:"ç¬¬09è®² æµè¯ç¯å¢è¦å¤å°ï¼ä»ææ¬ä¸æçè¯´èµ·",slug:"ç¬¬09è®²-æµè¯ç¯å¢è¦å¤å°-ä»ææ¬ä¸æçè¯´èµ·",normalizedTitle:"ç¬¬09è®² æµè¯ç¯å¢è¦å¤å°ï¼ä»ææ¬ä¸æçè¯´èµ·",charIndex:1982},{level:2,title:"ç¬¬10è®² è®©ç¯å¢èªå·±è¯´è¯ï¼è®ºç¯å¢èªæè¿°çéè¦æ§",slug:"ç¬¬10è®²-è®©ç¯å¢èªå·±è¯´è¯-è®ºç¯å¢èªæè¿°çéè¦æ§",normalizedTitle:"ç¬¬10è®² è®©ç¯å¢èªå·±è¯´è¯ï¼è®ºç¯å¢èªæè¿°çéè¦æ§",charIndex:2122},{level:2,title:"ç¬¬11è®² âéç½®âæ¯æåååï¼å¸¦ä½ äºè§£åç§éç½®æ¹æ³",slug:"ç¬¬11è®²-éç½®-æ¯æååå-å¸¦ä½ äºè§£åç§éç½®æ¹æ³",normalizedTitle:"ç¬¬11è®² âéç½®âæ¯æåååï¼å¸¦ä½ äºè§£åç§éç½®æ¹æ³",charIndex:2277},{level:2,title:"ç¬¬12è®² æéææï¼å¦ä½åå°åéçº§æ­å»ºç¯å¢ï¼",slug:"ç¬¬12è®²-æéææ-å¦ä½åå°åéçº§æ­å»ºç¯å¢",normalizedTitle:"ç¬¬12è®² æéææï¼å¦ä½åå°åéçº§æ­å»ºç¯å¢ï¼",charIndex:2429},{level:2,title:"ç¬¬13è®² å®¹å¨ææ¯ççæ¯ç¯å¢ç®¡ççææåï¼",slug:"ç¬¬13è®²-å®¹å¨ææ¯ççæ¯ç¯å¢ç®¡ççææå",normalizedTitle:"ç¬¬13è®² å®¹å¨ææ¯ççæ¯ç¯å¢ç®¡ççææåï¼",charIndex:2512},{level:2,title:"ç¬¬14è®² å¦ä½åå°æå»ºçæéï¼åæéï¼",slug:"ç¬¬14è®²-å¦ä½åå°æå»ºçæé-åæé",normalizedTitle:"ç¬¬14è®² å¦ä½åå°æå»ºçæéï¼åæéï¼",charIndex:2778},{level:2,title:"ç¬¬15è®² æå»ºæ£æµï¼æ è§ç©ä¸ææ¹å",slug:"ç¬¬15è®²-æå»ºæ£æµ-æ è§ç©ä¸ææ¹å",normalizedTitle:"ç¬¬15è®² æå»ºæ£æµï¼æ è§ç©ä¸ææ¹å",charIndex:3113},{level:2,title:"ç¬¬16è®² æå»ºèµæºçå¼¹æ§ä¼¸ç¼©",slug:"ç¬¬16è®²-æå»ºèµæºçå¼¹æ§ä¼¸ç¼©",normalizedTitle:"ç¬¬16è®² æå»ºèµæºçå¼¹æ§ä¼¸ç¼©",charIndex:3192},{level:2,title:"ç¬¬17è®² å®¹å¨éåæå»ºçé£äºäºå¿",slug:"ç¬¬17è®²-å®¹å¨éåæå»ºçé£äºäºå¿",normalizedTitle:"ç¬¬17è®² å®¹å¨éåæå»ºçé£äºäºå¿",charIndex:3546},{level:2,title:"ç¬¬18è®² å¦ä½åå¥½å®¹å¨éåçä¸ªæ§åååè§æ£æ¥ï¼",slug:"ç¬¬18è®²-å¦ä½åå¥½å®¹å¨éåçä¸ªæ§åååè§æ£æ¥",normalizedTitle:"ç¬¬18è®² å¦ä½åå¥½å®¹å¨éåçä¸ªæ§åååè§æ£æ¥ï¼",charIndex:3738},{level:2,title:"ç¬¬19è®² åå¸æ¯æç»­äº¤ä»çæåä¸å¬é",slug:"ç¬¬19è®²-åå¸æ¯æç»­äº¤ä»çæåä¸å¬é",normalizedTitle:"ç¬¬19è®² åå¸æ¯æç»­äº¤ä»çæåä¸å¬é",charIndex:3930},{level:2,title:"ç¬¬20è®² Immutableï¼ä»»ä½åæ´é½éè¦åå¸",slug:"ç¬¬20è®²-immutable-ä»»ä½åæ´é½éè¦åå¸",normalizedTitle:"ç¬¬20è®² immutableï¼ä»»ä½åæ´é½éè¦åå¸",charIndex:4566},{level:2,title:"ç¬¬21è®² åå¸ç³»ç»ä¸å®è¦æ³¨æç¨æ·ä½éª",slug:"ç¬¬21è®²-åå¸ç³»ç»ä¸å®è¦æ³¨æç¨æ·ä½éª",normalizedTitle:"ç¬¬21è®² åå¸ç³»ç»ä¸å®è¦æ³¨æç¨æ·ä½éª",charIndex:4699},{level:2,title:"ç¬¬22è®² åå¸ç³»ç»çæ ¸å¿æ¶æååè½è®¾è®¡",slug:"ç¬¬22è®²-åå¸ç³»ç»çæ ¸å¿æ¶æååè½è®¾è®¡",normalizedTitle:"ç¬¬22è®² åå¸ç³»ç»çæ ¸å¿æ¶æååè½è®¾è®¡",charIndex:5013},{level:2,title:"ç¬¬23è®² ä¸å¡åç³»ç»æ¶æå¯¹åå¸çå½±å",slug:"ç¬¬23è®²-ä¸å¡åç³»ç»æ¶æå¯¹åå¸çå½±å",normalizedTitle:"ç¬¬23è®² ä¸å¡åç³»ç»æ¶æå¯¹åå¸çå½±å",charIndex:5150},{level:2,title:"ç¬¬24è®² å¦ä½å©ç¨çæ§ä¿éåå¸è´¨éï¼",slug:"ç¬¬24è®²-å¦ä½å©ç¨çæ§ä¿éåå¸è´¨é",normalizedTitle:"ç¬¬24è®² å¦ä½å©ç¨çæ§ä¿éåå¸è´¨éï¼",charIndex:5347},{level:2,title:"ç¬¬25è®² ä»£ç éææ£æ¥å®è·µ",slug:"ç¬¬25è®²-ä»£ç éææ£æ¥å®è·µ",normalizedTitle:"ç¬¬25è®² ä»£ç éææ£æ¥å®è·µ",charIndex:5526},{level:2,title:"ç¬¬26è®² è¶æ¥è¶éè¦çç ´åæ§æµè¯",slug:"ç¬¬26è®²-è¶æ¥è¶éè¦çç ´åæ§æµè¯",normalizedTitle:"ç¬¬26è®² è¶æ¥è¶éè¦çç ´åæ§æµè¯",charIndex:5657},{level:2,title:"ç¬¬27è®² å©ç¨Mockä¸åæ¾ææ¯å©åèªå¨ååå½",slug:"ç¬¬27è®²-å©ç¨mockä¸åæ¾ææ¯å©åèªå¨ååå½",normalizedTitle:"ç¬¬27è®² å©ç¨mockä¸åæ¾ææ¯å©åèªå¨ååå½",charIndex:5756},{level:2,title:"ç¬¬28è®² æç»­äº¤ä»ä¸ºä»ä¹è¦å¹³å°åè®¾è®¡ï¼",slug:"ç¬¬28è®²-æç»­äº¤ä»ä¸ºä»ä¹è¦å¹³å°åè®¾è®¡",normalizedTitle:"ç¬¬28è®² æç»­äº¤ä»ä¸ºä»ä¹è¦å¹³å°åè®¾è®¡ï¼",charIndex:6381},{level:2,title:"ç¬¬29è®² è®¡ç®èµæºä¹æ¯äº¤ä»çåå®¹",slug:"ç¬¬29è®²-è®¡ç®èµæºä¹æ¯äº¤ä»çåå®¹",normalizedTitle:"ç¬¬29è®² è®¡ç®èµæºä¹æ¯äº¤ä»çåå®¹",charIndex:6729},{level:2,title:"ç¬¬30è®² æç»­äº¤ä»ä¸­æåªäºå®è´µæ°æ®ï¼",slug:"ç¬¬30è®²-æç»­äº¤ä»ä¸­æåªäºå®è´µæ°æ®",normalizedTitle:"ç¬¬30è®² æç»­äº¤ä»ä¸­æåªäºå®è´µæ°æ®ï¼",charIndex:6758},{level:2,title:"ç¬¬31è®² äºè§£ç§»å¨Appçæç»­äº¤ä»çå½å¨æ",slug:"ç¬¬31è®²-äºè§£ç§»å¨appçæç»­äº¤ä»çå½å¨æ",normalizedTitle:"ç¬¬31è®² äºè§£ç§»å¨appçæç»­äº¤ä»çå½å¨æ",charIndex:6860},{level:2,title:"ç¬¬32è®² ç»è°ç§»å¨APPçäº¤ä»æµæ°´çº¿ï¼pipelineï¼",slug:"ç¬¬32è®²-ç»è°ç§»å¨appçäº¤ä»æµæ°´çº¿-pipeline",normalizedTitle:"ç¬¬32è®² ç»è°ç§»å¨appçäº¤ä»æµæ°´çº¿ï¼pipelineï¼",charIndex:6886},{level:2,title:"ç¬¬33è®² è¿é¶ï¼å¦ä½è¿ä¸æ­¥æåç§»å¨APPçäº¤ä»æçï¼",slug:"ç¬¬33è®²-è¿é¶-å¦ä½è¿ä¸æ­¥æåç§»å¨appçäº¤ä»æç",normalizedTitle:"ç¬¬33è®² è¿é¶ï¼å¦ä½è¿ä¸æ­¥æåç§»å¨appçäº¤ä»æçï¼",charIndex:6940},{level:2,title:"ç¬¬34è®² å¿«éæå»ºæç»­äº¤ä»ç³»ç»ï¼ä¸ï¼ï¼éæ±åæ",slug:"ç¬¬34è®²-å¿«éæå»ºæç»­äº¤ä»ç³»ç»-ä¸-éæ±åæ",normalizedTitle:"ç¬¬34è®² å¿«éæå»ºæç»­äº¤ä»ç³»ç»ï¼ä¸ï¼ï¼éæ±åæ",charIndex:7064},{level:2,title:"ç¬¬35è®² å¿«éæå»ºæç»­äº¤ä»ç³»ç»ï¼äºï¼ï¼GitLab è§£å³ä»£ç ç®¡çé®é¢",slug:"ç¬¬35è®²-å¿«éæå»ºæç»­äº¤ä»ç³»ç»-äº-gitlab-è§£å³ä»£ç ç®¡çé®é¢",normalizedTitle:"ç¬¬35è®² å¿«éæå»ºæç»­äº¤ä»ç³»ç»ï¼äºï¼ï¼gitlab è§£å³ä»£ç ç®¡çé®é¢",charIndex:7283},{level:2,title:"ç¬¬36è®² å¿«éæå»ºæç»­äº¤ä»ç³»ç»ï¼ä¸ï¼ï¼Jenkins è§£å³éææåé®é¢",slug:"ç¬¬36è®²-å¿«éæå»ºæç»­äº¤ä»ç³»ç»-ä¸-jenkins-è§£å³éææåé®é¢",normalizedTitle:"ç¬¬36è®² å¿«éæå»ºæç»­äº¤ä»ç³»ç»ï¼ä¸ï¼ï¼jenkins è§£å³éææåé®é¢",charIndex:7425},{level:2,title:"ç¬¬37è®² å¿«éæå»ºæç»­äº¤ä»ç³»ç»ï¼åï¼ï¼Ansible è§£å³èªå¨é¨ç½²é®é¢",slug:"ç¬¬37è®²-å¿«éæå»ºæç»­äº¤ä»ç³»ç»-å-ansible-è§£å³èªå¨é¨ç½²é®é¢",normalizedTitle:"ç¬¬37è®² å¿«éæå»ºæç»­äº¤ä»ç³»ç»ï¼åï¼ï¼ansible è§£å³èªå¨é¨ç½²é®é¢",charIndex:7517},{level:2,title:"ç¬¬38è®² æç»­äº¤ä»ä¸æ ç¹å«æ¾é | ç­çè§£æ",slug:"ç¬¬38è®²-æç»­äº¤ä»ä¸æ ç¹å«æ¾é-ç­çè§£æ",normalizedTitle:"ç¬¬38è®² æç»­äº¤ä»ä¸æ ç¹å«æ¾é | ç­çè§£æ",charIndex:7734},{level:2,title:"ç¬¬39è®² æç»­äº¤ä»ä¸æ ç¹å«æ¾é | é«æå­¦ä¹ æå",slug:"ç¬¬39è®²-æç»­äº¤ä»ä¸æ ç¹å«æ¾é-é«æå­¦ä¹ æå",normalizedTitle:"ç¬¬39è®² æç»­äº¤ä»ä¸æ ç¹å«æ¾é | é«æå­¦ä¹ æå",charIndex:8003},{level:2,title:"ç¬¬40è®² ç»æè¯­ | è¶çè¦çäºï¼è¶è¦ç»å¸¸å",slug:"ç¬¬40è®²-ç»æè¯­-è¶çè¦çäº-è¶è¦ç»å¸¸å",normalizedTitle:"ç¬¬40è®² ç»æè¯­ | è¶çè¦çäºï¼è¶è¦ç»å¸¸å",charIndex:8205},{level:2,title:"END",slug:"end",normalizedTitle:"end",charIndex:8446}],headersStr:"ç¬¬01è®² æç»­äº¤ä»å°åºæä»ä¹ä»·å¼ï¼ ç¬¬02è®² å½±åæç»­äº¤ä»çå ç´ æåªäºï¼ ç¬¬03è®² æç»­äº¤ä»åDevOpsæ¯ä¸å¯¹å¥½åºå ç¬¬04è®² ä¸åçæºå¤´ï¼ä»£ç åæ¯ç­ç¥çéæ© ç¬¬05è®² ææææä½ ä¾èµç®¡ç ç¬¬06è®² ä»£ç åæ»ï¼ä½ çççè§£åï¼ ç¬¬07è®² âä¸¤ä¸ªæ«è¨âå¢éçä»£ç ç®¡çå®éæ¡ä¾ ç¬¬08è®² æµè¯ç¯å¢è¦å¤å°ï¼ä»ç°å®éæ±è¯´èµ· ç¬¬09è®² æµè¯ç¯å¢è¦å¤å°ï¼ä»ææ¬ä¸æçè¯´èµ· ç¬¬10è®² è®©ç¯å¢èªå·±è¯´è¯ï¼è®ºç¯å¢èªæè¿°çéè¦æ§ ç¬¬11è®² âéç½®âæ¯æåååï¼å¸¦ä½ äºè§£åç§éç½®æ¹æ³ ç¬¬12è®² æéææï¼å¦ä½åå°åéçº§æ­å»ºç¯å¢ï¼ ç¬¬13è®² å®¹å¨ææ¯ççæ¯ç¯å¢ç®¡ççææåï¼ ç¬¬14è®² å¦ä½åå°æå»ºçæéï¼åæéï¼ ç¬¬15è®² æå»ºæ£æµï¼æ è§ç©ä¸ææ¹å ç¬¬16è®² æå»ºèµæºçå¼¹æ§ä¼¸ç¼© ç¬¬17è®² å®¹å¨éåæå»ºçé£äºäºå¿ ç¬¬18è®² å¦ä½åå¥½å®¹å¨éåçä¸ªæ§åååè§æ£æ¥ï¼ ç¬¬19è®² åå¸æ¯æç»­äº¤ä»çæåä¸å¬é ç¬¬20è®² Immutableï¼ä»»ä½åæ´é½éè¦åå¸ ç¬¬21è®² åå¸ç³»ç»ä¸å®è¦æ³¨æç¨æ·ä½éª ç¬¬22è®² åå¸ç³»ç»çæ ¸å¿æ¶æååè½è®¾è®¡ ç¬¬23è®² ä¸å¡åç³»ç»æ¶æå¯¹åå¸çå½±å ç¬¬24è®² å¦ä½å©ç¨çæ§ä¿éåå¸è´¨éï¼ ç¬¬25è®² ä»£ç éææ£æ¥å®è·µ ç¬¬26è®² è¶æ¥è¶éè¦çç ´åæ§æµè¯ ç¬¬27è®² å©ç¨Mockä¸åæ¾ææ¯å©åèªå¨ååå½ ç¬¬28è®² æç»­äº¤ä»ä¸ºä»ä¹è¦å¹³å°åè®¾è®¡ï¼ ç¬¬29è®² è®¡ç®èµæºä¹æ¯äº¤ä»çåå®¹ ç¬¬30è®² æç»­äº¤ä»ä¸­æåªäºå®è´µæ°æ®ï¼ ç¬¬31è®² äºè§£ç§»å¨Appçæç»­äº¤ä»çå½å¨æ ç¬¬32è®² ç»è°ç§»å¨APPçäº¤ä»æµæ°´çº¿ï¼pipelineï¼ ç¬¬33è®² è¿é¶ï¼å¦ä½è¿ä¸æ­¥æåç§»å¨APPçäº¤ä»æçï¼ ç¬¬34è®² å¿«éæå»ºæç»­äº¤ä»ç³»ç»ï¼ä¸ï¼ï¼éæ±åæ ç¬¬35è®² å¿«éæå»ºæç»­äº¤ä»ç³»ç»ï¼äºï¼ï¼GitLab è§£å³ä»£ç ç®¡çé®é¢ ç¬¬36è®² å¿«éæå»ºæç»­äº¤ä»ç³»ç»ï¼ä¸ï¼ï¼Jenkins è§£å³éææåé®é¢ ç¬¬37è®² å¿«éæå»ºæç»­äº¤ä»ç³»ç»ï¼åï¼ï¼Ansible è§£å³èªå¨é¨ç½²é®é¢ ç¬¬38è®² æç»­äº¤ä»ä¸æ ç¹å«æ¾é | ç­çè§£æ ç¬¬39è®² æç»­äº¤ä»ä¸æ ç¹å«æ¾é | é«æå­¦ä¹ æå ç¬¬40è®² ç»æè¯­ | è¶çè¦çäºï¼è¶è¦ç»å¸¸å END",content:"# Devops æç»­äº¤ä»\n\n\n# ç¬¬01è®² æç»­äº¤ä»å°åºæä»ä¹ä»·å¼ï¼\n\n * å®ä¹\n   * æç»­éæ : ä»ç¼ç å°æå»ºåå°æµè¯çåå¤æç»­è¿ç¨\n   * æç»­é¨ç½² : å°å¯äº¤ä»äº§åï¼å¿«éä¸å®å¨å°äº¤ä»ç¨æ·ä½¿ç¨çä¸å¥æ¹æ³åç³»ç»\n   * æç»­äº¤ä» : åå« æç»­éæãæµè¯èªå¨å ä»¥å æç»­é¨ç½²ï¼åæ¬ å¼åãæµè¯ãé¨ç½²ãè¿ç»´ãè¿è¥ ç­ç­\n * æç»­äº¤ä»çéæ§ä»·å¼\n   * å¯¹ï¼ctoãteam leaderãäº§åç»çãç¨åºå èè¨\n     * ææ¯éåãæ åè½å°ãé¨é¨åä½ãç¥è¯ä¼ æ¿ãå³æ³¨ä¸å¡ãèå¥å¹³ç¨³ãæé«å·¥ä½æçåè´¨é\n * å¦ä½è¯ä¼°æç»­äº¤ä»çä»·å¼\n * å¸¸è§çæç»­äº¤ä»å¹³å°æ¶æ\n   * \n\n\n# ç¬¬02è®² å½±åæç»­äº¤ä»çå ç´ æåªäºï¼\n\n * å½±åå ç´ \n   * ç»ç»åæåå ç´ \n   * æµç¨å ç´ \n   * æ¶æå ç´ \n\n    åº·å¨å®å¾ï¼ç»ç»ç»æå³å®è½¯ä»¶æ¶æ\n\n\n1\n\n\n\n# ç¬¬03è®² æç»­äº¤ä»åDevOpsæ¯ä¸å¯¹å¥½åºå\n\n * è®¤è¯ DevOps\n   * ä¸ç»ææ¯\n     * åæ¬èªå¨åè¿ç»´ãæç»­äº¤ä»ãé«é¢é¨ç½²ãDocker ç­åå®¹\n     * Dockerï¼å°±æ¯ä¸ºäºè§£å³ DevOps ææå¡çâåºç¡è®¾æ½å³ä»£ç â\n   * ä¸ä¸ªèè½\n   * ä¸ç§æå\n   * ä¸ç§ç»ç»æ¶æ\n * æ»ç»\n   * DevOpsæ¬è´¨å¶å®æ¯ä¸ç§é¼å±åä½çç åæå\n   * æç»­äº¤ä»ä¸ DevOps æè¿½æ±çæç»ç®æ æ¯ä¸è´çï¼å³å¿«éåç¨æ·äº¤ä»é«è´¨éçè½¯ä»¶äº§å\n\n\n# ç¬¬04è®² ä¸åçæºå¤´ï¼ä»£ç åæ¯ç­ç¥çéæ©\n\n * åæ¯ç­ç¥\n   * ä¸»å¹²å¼åï¼Trunk Based Developmentï¼ç®ç§° TBDï¼\n     * Google å Facebook é½å¨ç¨ä¸»å¹²å¼å\n     * ç¹æ§\n       * æ²¡æ feature branchï¼æä»¥é½å¨ä¸»å¹²å¼åï¼åå°åæ¯åå¹¶çéº»ç¦\n       * ä½¿ç¨ feature toggle(ç¹æ§åæ¢) ä¿è¯ä¸æçåè½ä¸ä¼è¢«åå¸\n         * ç¹æ§åæ¢å¤ªå¤ä¼å¯¼è´é»è¾æ··ä¹±ãä»£ç æ´èå¼±ï¼æ´é¾æµè¯ãçè§£åç»´æ¤ãæ´é¾æä¾ææ¯æ¯æï¼èä¸æ´ä¸å®å¨ã\n           * ä»£ç æ´èå¼±ï¼ç¹æ§åæ¢ä¼å° æªç»æµè¯çä»£ç å¼å¥çäº§ç¯å¢ å®ä»¬å¼åçé®é¢å¯è½ä¼å¨æ æé´æ´é²åºæ¥\n       * å¯è½ä¼åºç° ä¸ç²èé¼ å±åäºä¸éç²¥ çç°è±¡\n     * éææçé«ï¼å²çªå°ï¼ä½å¯¹å¢éä¸ªäººçå¼åè½åæè¾é«è¦æ±\n   * åæ¯å¼å(branch model)\n     * Git Flow(hotfixãrelease) -> Github Flow(pull request) -> Gitlab Flow(çäº§ãç¯å¢ä»¥ååå¸åæ¯)\n     * æå©äºå¹¶è¡å¼åï¼éè¦ä¸å®çæµç¨ä¿è¯ï¼è½ä¿è¯ä¸»å¹²ä»£ç è´¨é\n\n\n# ç¬¬05è®² ææææä½ ä¾èµç®¡ç\n\n * ä¸¾ä¾\n   * æä½ç³»ç»çä¾èµç®¡çå·¥å·ï¼\n     * æ¯å¦ CentOS ç yumï¼Debian ç aptï¼Arch ç Packmanï¼macOS ç Homebrewï¼\n   * ç¼ç¨è¯­è¨çä¾èµç®¡çå·¥å·ï¼\n     * æ¯å¦ Java ç Mavenï¼.Net ç nugetï¼Node.js ç npmï¼Golang ç go getï¼Python ç pipï¼Ruby ç Gem\n\n\n# ç¬¬06è®² ä»£ç åæ»ï¼ä½ çççè§£åï¼\n\n * æ¹å¼\n   * roll back å°è¿å»çæä¸ªçæ¬\n   * æ°å¢commitï¼ç§»é¤å¯¹åºåè½\n * reset --hard çä½¿ç¨\n\n\n# ç¬¬07è®² âä¸¤ä¸ªæ«è¨âå¢éçä»£ç ç®¡çå®éæ¡ä¾\n\n * âä¸¤ä¸ªæ«è¨âå¢é\n   * å¨äºé©¬éåé¨ææè°çâä¸¤ä¸ªæ«è¨âå¢é\n   * æçæ¯å¢éçäººæ°ä¸è½å¤å°ä¸¤ä¸ªæ«è¨é¥¼è¿ä¸å¤åçå°æ­¥\n   * å°±æ¯è¯´ï¼å¢éè¦å°å°è®©æ¯ä¸ªæåé½è½ååºæ¾èè´¡ç®ï¼å¹¶ä¸ç¸äºä¾èµï¼æå±åç®æ ï¼ä»¥åç»ä¸çæåæ åï¼è¿æ ·å¢éçå·¥ä½æçæä¼é«ã\n * ä½¿ç¨ gitlab---issue---feature branch å¼åæ¨¡å¼\n\n\n# ç¬¬08è®² æµè¯ç¯å¢è¦å¤å°ï¼ä»ç°å®éæ±è¯´èµ·\n\n * é®é¢\n   * æµè¯ç¯å¢ç»æ\n   * å¥½çæµè¯ç¯å¢æ å\n * ç¯å¢æ¨¡å(äºå¥ç¯å¢)\n   * å¼åç¯å¢\n     * userï¼å¼å\n   * åè½æµè¯ç¯å¢\n     * userï¼æµè¯\n   * éªæ¶æµè¯ç¯å¢\n     * userï¼äº§åç»çãæµè¯\n   * é¢åå¸ç¯å¢\n     * userï¼æµè¯ãè¿ç»´\n     * ç¹ç¹: åºç¨å·²ç»è¿å¥äºçäº§ç½ç»ï¼åçå®ççäº§åºç¨å±äº«åä¸å¥æ°æ®åºç­ç­åºç¡è®¾æ½ã\n     * æ¹å¼ï¼a: éä¸éåå¸ï¼ä½¿ç¨çå®æµéæºå¨; b: ä¸ç»ä¸æ¥å¥çå®æµéçæºå¨\n   * çäº§ç¯å¢\n\n\n# ç¬¬09è®² æµè¯ç¯å¢è¦å¤å°ï¼ä»ææ¬ä¸æçè¯´èµ·\n\n * ææ¬\n   * æºå¨èµæºææ¬\n   * ç®¡çææ¬ï¼éç½®ãæµè¯æ°æ®ç­\n   * æµç¨æåï¼æ²éææ¬ãæµè¯ææ¬ç­\n * æç\n   * å¨æ½è±¡å¬å±ç¯å¢çåºç¡ä¹ä¸ï¼å¯ä»¥éè¿æ³³éçæ¹å¼éç¦»ç¸å³æµè¯åºç¨\n   * éä½éç½®å¤æåº¦\n\n\n# ç¬¬10è®² è®©ç¯å¢èªå·±è¯´è¯ï¼è®ºç¯å¢èªæè¿°çéè¦æ§\n\n * é®é¢\n   * ç¯å¢éç½®æ¯éå¸¸å¤æçï¼ç´æ¥å½±åä½ çç¯å¢æ²»çè½åï¼èç¯å¢æ²»çè½ååç´æ¥å½±åçæç»­äº¤ä»çè½åã\n * èªæè¿°\n   * éè¿ç¯å¢æ ååï¼å©ç¨ç¯å¢çèªæè¿°æä»¶ï¼è®©ç¯å¢è½è®²æ¸æ¥èªå·±çä½ç¨ãä¾èµï¼ä»¥åç¶æï¼èä¸æ¯ç±å¤é¨éç½®æ¥è§£éè¿äºåå®¹ã\n\n\n# ç¬¬11è®² âéç½®âæ¯æåååï¼å¸¦ä½ äºè§£åç§éç½®æ¹æ³\n\n * åç§éç½®\n   * æå»ºæ¶éç½®\n   * æåæ¶éç½®\n   * è¿è¡æ¶éç½®\n     * éç½®ä¸­å¿\n       * apollo ï¼https://github.com/ctripcorp/apollo\n * ç\n   * åæ»éç½®\n\n\n# ç¬¬12è®² æéææï¼å¦ä½åå°åéçº§æ­å»ºç¯å¢ï¼\n\nå¸åºä¸ä¸»æµçå¼æºéç½®ç®¡çå·¥å·æ PuppetãChefãAnsibleãSaltStack ç­ å¹¶è¡ãç¼å­æ± \n\n\n# ç¬¬13è®² å®¹å¨ææ¯ççæ¯ç¯å¢ç®¡ççææåï¼\n\n * å®¹å¨ä¼ç¹\n   * å¸®æä»¬éæ°å®ä¹äºäº¤ä»æ åï¼ å®¹å¨ææ¯ç»ä¸äºè½¯ä»¶ç¯å¢åè½¯ä»¶ä»£ç ï¼äº¤ä»äº§ç©ä¸­æ¢åæ¬äºè½¯ä»¶ç¯å¢ï¼ååæ¬äºè½¯ä»¶ä»£ç ã\n * ä¸å¯ååºç¡è®¾æ½ï¼Immutable Infrastructureï¼\n   * çå¿µï¼\n     * å¯¹äºå®¹å¨æ¥è¯´ï¼éµå¾ªçæ¯ä¸å¯ååºç¡è®¾æ½ççå¿µï¼ä¹å°±æ¯è¯´ä»»ä½ååï¼åæ¬ä»£ç ãç¯å¢ãéç½®çåæ´ï¼é½éè¦éæ°å¶ä½éåï¼äº§çä¸ä¸ªæ°ççæ¬ã\n   * é®é¢ï¼\n     * ä¼å°åæ¬ç®åçä¿®æ¹ï¼å¤æåï¼å¦ï¼åªæ¯æ³å®è£curlï¼ä½æ¯å´è¦éæ°çäº§éå\n\n\n# ç¬¬14è®² å¦ä½åå°æå»ºçæéï¼åæéï¼\n\n * æ¹æ³\n   * åçº§ç¡¬ä»¶èµæº\n   * æ­å»ºç§æä»åº\n     * ä½¿ç¨ createrepo æ­å»º CentOS ç yum ä»åºï¼\n     * ä½¿ç¨ Nexus æ­å»º Java ç Maven ä»åºï¼\n     * ä½¿ç¨ cnpm æ­å»º NodeJS ç npm ä»åºï¼\n     * ä½¿ç¨ pypiserver æ­å»º Python ç pip ä»åºï¼\n     * ä½¿ç¨ GitLab æ­å»ºä»£ç ä»åºï¼\n     * ä½¿ç¨ Harbor æ­å»º Docker éåä»åº\n   * ä½¿ç¨æ¬å°ç¼å­\n   * è§èæå»ºæµç¨ï¼éè¿å¼æ­¥æ¹å¼è§£å³ææ¯æµç¨çæ§è¡ï¼\n   * åç¨æå»ºå·¥å·ï¼æ ¹æ®å®éæåµåçåæ¥çå·¥å·ç¹æ§ã\n\n\n# ç¬¬15è®² æå»ºæ£æµï¼æ è§ç©ä¸ææ¹å\n\n * æ£æµ\n   * ç¯å¢ï¼è½¯ä»¶çæ¬ãç¼è¯å·¥å·çæ¬ãæä½ç³»ç»ç­\n   * ä¾èµï¼ä¾èµå³ç³»æ£æ¥\n   * ...\n\n\n# ç¬¬16è®² æå»ºèµæºçå¼¹æ§ä¼¸ç¼©\n\n * æç»­éæå·¥å·\n   * Travis CIãCircle CIãJenkins CI\n * Jenkins Master é«å¯ç¨æ¶æç\n   * åä¸ª Jenkins Master\n     * ç®åæ®éç Jenkins æ­å»ºæ¹æ¡æ¯ï¼ä¸ä¸ª Jenkins Master æ­éå¤ä¸ª Jenkins Slaveã\n     * åä¸ª Jenkins Master å¨ä»»å¡éå¤§æ¶ï¼ä¼æä¸ºç³»ç»ä¸­çç¶é¢\n   * å¤ä¸ª Jenkins Master\n     * å¯¹jenkinså°è£ï¼èªå®ä¹é«å¯ç¨å¤masteræ¶æ\n * Jenkins Slave å¼¹æ§ä¼¸ç¼©æ¹æ¡\n   * æå»ºç¯å¢ï¼å®¹å¨å\n   * èµæºä¼¸ç¼©\n     * éè¿å®¹å¨åï¼ä¸kubernetes ç»å\n\n\n# ç¬¬17è®² å®¹å¨éåæå»ºçé£äºäºå¿\n\n * docker hub\n   * https://hub.docker.com/\n * ç¨å®¹å¨æ¥æå»ºå®¹å¨éåæä¸¤ç§æ¹å¼ï¼(ä¸»è¦ä¾æ®ï¼ä½¿ç¨å®¿ä¸»çdocker daemon è¿æ¯å®¹å¨åç¬ç« docker daemon)\n   * Docker Out Of Dockerï¼DooDï¼\n   * Docker In Dockerï¼DinDï¼\n\n\n# ç¬¬18è®² å¦ä½åå¥½å®¹å¨éåçä¸ªæ§åååè§æ£æ¥ï¼\n\n * å®¹å¨éåä¸ªæ§å +æ»ç»äºä»¥ä¸ä¸ç§æ¹æ³ï¼ èªå®ä¹ç¯å¢èæ¬ï¼ å¹³å°åç¯å¢éé¡¹ä¸æå¡éå¸ï¼ èªå®ä¹éååå¸ã\n * åè§æ£æ¥\n   * æ¯å¯¹åä¸ª layerï¼æ¯å¦æå®æ¹baseéåçlayer\n   * å·¥å·ï¼\n     * CoreOS Clairï¼Docker Security Scanningï¼Drydockï¼...\n\n\n# ç¬¬19è®² åå¸æ¯æç»­äº¤ä»çæåä¸å¬é\n\n * é¨ç½² å åå¸\n   * åºç¨è¢«é¨ç½²ï¼å¹¶ä¸ä»£è¡¨å°±æ¯åå¸äºï¼æ¯å¦æè·¯è¿è¡ï¼dark launchï¼æ¹å¼\n   * åå¸ï¼rolloutï¼é¨ç½²ï¼deploy\n * åå¸ç³»ç»ææ\n   * ä¸ä¸ªæç¨ãå¿«éãç¨³å®ãå®¹éåå¼ºï¼å¿è¦æ¶æè½åè¿éåæ»\n * åèç¹é¨ç½²æµç¨\n   * download: ä¸è½½æ°ççæ¬ï¼ä¸æ§è¡è¦çï¼\n   * markdown: éç¥ä¸æ¸¸è°ç¨æ¹ï¼èªå·±ç°å¨ä¸ºæåæå¡ç¶æï¼\n   * install : è¿è¡å½ä»¤ load åæ´éå¯æå¡ï¼\n   * verify : éªè¯æå¡çå¥åº·ç¶åµä»¥åé¢ç­ï¼\n   * markup : éç¥ä¸æ¸¸è°ç¨æ¹ï¼èªå·±æå¡æ¢å¤æ­£å¸¸ã\n * éç¾¤é¨ç½²æ¹å¼ï¼\n   * ç°åº¦åå¸\n     * èç»¿åå¸\n       * åå¸æ°çæ¬å°ä¸å¥æ°çéç¾¤ï¼éªè¯éè¿åï¼æµæ§å¤çææµéå¼å¥æ°æºå¨ï¼å¾å¨é¨æµéåæ¢å®æï¼ç­å¾ä¸æ®µæ¶é´æ²¡æå¼å¸¸çè¯ï¼èçæ¬æå¡å¨ä¸çº¿ã\n     * æ»å¨åå¸\n       * ä»éç¾¤æå¡å¨ä¸­æéä¸æ¹ï¼åæ­¢ä¸é¢çæå¡å¹¶æ´æ°ä¸ºæ°çæ¬ï¼è¿è¡éªè¯ï¼éªè¯å®æ¯åæ¥å¥æµéãéå¤æ­¤æ­¥éª¤ï¼ç´å°éåå®æææºå¨ã\n     * éä¸éåå¸\n       * ä»éç¾¤ä¸­æéç¹å®æå¡å¨æä¸å°æ¹ç¬¦åè¦æ±çç¹å¾ç¨æ·ï¼å¯¹å¶è¿è¡çæ¬æ´æ°åéªè¯ï¼éåéæ­¥æ´æ°å©ä½æå¡å¨ã\n   * ç°åº¦åå¸ç³»ç»ï¼\n     * Tars : https://github.com/ctripcorp/tars\n\n\n# ç¬¬20è®² Immutableï¼ä»»ä½åæ´é½éè¦åå¸\n\n * ä¸å¯ååºç¡è®¾æ½(Immutable Infrastructure)\n   * åæï¼æ ç¶æ\n   * ä¿è¯: ç¯å¢ãé¡ºåºãéç½®è¿äºåºç¡è®¾æ½å¨æµè¯ç¯èåçäº§ç¯èçä¸è´æ§\n   * ä¸èææºçæ¬è´¨å·®å¼ç¹\n\n\n# ç¬¬21è®² åå¸ç³»ç»ä¸å®è¦æ³¨æç¨æ·ä½éª\n\n * åå¸ç³»ç»ç»æï¼\n   * 1 å¼ é¡µé¢å±ç¤ºåå¸ä¿¡æ¯\n     * è½å¤å±ç¤ºåå¸å½æ¶çç»å¤§å¤æ°ä¿¡æ¯ãæ°æ®ååå®¹ï¼è¿ä¸ªé¡µé¢æ¢è¦å¨é¢ï¼åè¦ç²¾å\n   * 2 ä¸ªæä½æé®ç®åä½¿ç¨\n     * é¡µé¢ä¸æå¤åæ¶å±ç¤ºä¸¤ä¸ªæé®ï¼åå¸ãä¸­æ­ãéè¯\n   * 3 ç§åå¸ç»æ\n     * æåãå¤±è´¥ãä¸­æ­\n   * 4 ç±»æä½éæ©\n     * å¼å§åå¸ãåæ­¢åå¸ãåå¸åéãåå¸éè¯\n   * 5 ä¸ªåå¸æ­¥éª¤\n     * åç¬¬19è®²ä¸­ç'åèç¹é¨ç½²æµç¨'\n   * 6 å¤§é¡µé¢ä¸»è¦åå®¹\n     * éç¾¤ãå®ä¾ãåå¸æ¥å¿ãåå¸åå²ãåå¸æ¹æ¬¡(åæ¹æ¬¡åå¸)ãåå¸æä½(æä½æé®éä¸­çåºå)\n\n\n# ç¬¬22è®² åå¸ç³»ç»çæ ¸å¿æ¶æååè½è®¾è®¡\n\n * æ ¸å¿\n   * DeploymentConfig\n   * Deployment\n   * DeployBatch\n   * DeployTarget\n   * åå¸ç¶ææµè½¬\n * åè½\n   * æå¡éçº§ãçæ­æºå¶\n\n\n# ç¬¬23è®² ä¸å¡åç³»ç»æ¶æå¯¹åå¸çå½±å\n\n * å½±å\n   * åæºååºç¨è¿æ¯åæºå¤åºç¨ï¼\n   * å¢éåå¸è¿æ¯å¨éåå¸ï¼\n   * å¦ä½æ§å¶æå¡ç Markup å Markdownï¼\n   * æ£æ¥ãé¢ç­åç¹ç«æºå¶(ç¹ç«ï¼verifyæµç¨çèªå¨å)\n   * å¦ä½ä¿è¯å ¡åæµéï¼\n     * è½¯è´è½½ + headerä¸­éå å ¡åæ è®°ï¼ä¿è¯å ¡åæºçæµéåªå¨ä¸ä¸æ¸¸æå¡çå ¡åæºä¸­æµè½¬ã\n\n\n# ç¬¬24è®² å¦ä½å©ç¨çæ§ä¿éåå¸è´¨éï¼\n\n * çæ§\n   * ç¨æ·ä¾§çæ§ï¼å³æ³¨çæ¯ç¨æ·çæ­£æåå°çè®¿é®éåº¦åç»æï¼\n   * ç½ç»çæ§ï¼å³ CDN ä¸æ ¸å¿ç½ç»ççæ§ï¼\n   * ä¸å¡çæ§ï¼å³æ³¨çæ¯æ ¸å¿ä¸å¡ææ çæ³¢å¨ï¼\n   * åºç¨çæ§ï¼å³æå¡è°ç¨é¾ççæ§ï¼ä¸è¬å¨æ¡æ¶å±é¢ç»ä¸å®ä¹è§£å³æ¹æ¡ï¼\n   * ç³»ç»çæ§ï¼å³åºç¡è®¾æ½ãèææºåæä½ç³»ç»ççæ§ã\n\n\n# ç¬¬25è®² ä»£ç éææ£æ¥å®è·µ\n\n * æµè¯ç®¡ç\n   * ä»£ç éææ£æ¥\n   * ç ´åæ§æµè¯\n   * Mock ä¸ åæ¾\n * éææ£æ¥å¹³å°\n   * SonarQube\n * éææ£æ¥å·¥å·\n   * FindBugsãPMD å Checkstyle\n\n\n# ç¬¬26è®² è¶æ¥è¶éè¦çç ´åæ§æµè¯\n\n * ç»´åº¦\n   * åç¹ç»´åº¦ï¼\n   * ç³»ç»ç»´åº¦ï¼åæµãæ´åæµè¯ãé»æ­é¾è·¯ç­\n * æ··æ²å·¥ç¨\n   * Netflix : Chaos Monkey\n\n\n# ç¬¬27è®² å©ç¨Mockä¸åæ¾ææ¯å©åèªå¨ååå½\n\n * æç»­äº¤ä»ä¸­çæµè¯é¾ç¹\n   * æµè¯æ°æ®çåå¤ä¸æ¸ç\n   * åå¸å¼ç³»ç»çä¾èµ\n   * æµè¯ç¨ä¾çé«åº¦ä»¿ç\n * æ¹æ¡\n   * Mock\n     * è¯´æ\n       * å¦ææä¸ªå¯¹è±¡å¨æµè¯è¿ç¨ä¸­ä¾èµäºå¦ä¸ä¸ªå¤æå¯¹è±¡ï¼èè¿ä¸ªå¤æå¯¹è±¡åå¾é¾è¢«ä»æµè¯è¿ç¨ä¸­å¥ç¦»åºæ¥ï¼é£ä¹å°±å¯ä»¥å©ç¨ Mock å»æ¨¡æå¹¶ä»£æ¿è¿ä¸ªå¤æå¯¹è±¡ã\n     * åºäºå¯¹è±¡åç±»ç Mock\n       * Mockito æè EasyMockã\n       * éå¸¸ç¨å¨ååæµè¯é¶æ®µ\n     * åºäºå¾®æå¡ç Mock\n       * Weir Mock å Mock Server\n   * åæ¾\n     * è¯´æ\n       * è®°å½å®éç¨æ·å¨çäº§ç¯å¢çæä½ï¼ç¶åå¨æµè¯ç¯å¢ä¸­åæ¾ã\n     * æ¦æªè®°å½ç¨æ·æä½æ¹æ¡ï¼\n       * å¨ç»ä¸ç SLB ä¸åç»ä¸çæ¦æªåå¤å¶è½¬åå¤çã\n         * å®¹æå½±åèªèº«è·¯ç±æå¡\n       * å¨éç¾¤ä¸­æ©å®¹ä¸å°æå¡å¨ï¼å¨è¯¥æå¡å¨ä¸å¯å¨ä¸ä¸ªè½¯äº¤æ¢è´è´£å¤å¶åè½¬åç¨æ·è¯·æ±ï¼èçæ­£çç¨æ·è¯·æ±ï¼ä»ç±è¯¥æå¡å¨è¿è¡å¤çã\n         * ç»åäºå¹³å°ï¼ä½¿ç¨æ¶ç³è¯·æå¡å¨ï¼ä¸éè¦æ¶éæ¾ï¼é£é©ä½\n     * æ¹æ¡\n       * æç§æ­£å¸¸çæä½è®°å½æ¶é´é´éï¼æè®°å½é¡ºåºåæ¾\n       * åç¼©æä½è®°å½çæ¶é´é´éï¼æè®°å½é¡ºåºï¼å½¢æåååæ¾\n\n\n# ç¬¬28è®² æç»­äº¤ä»ä¸ºä»ä¹è¦å¹³å°åè®¾è®¡ï¼\n\n * æç»­äº¤ä»ææ ¸å¿çäºå¤§é¨ååå®¹ï¼åæ¬ï¼\n   * éç½®ç®¡çãç¯å¢ç®¡çãæå»ºéæãåå¸åçæ§ãæµè¯ç®¡çã\n * å¹³å°å\n   * èªå·±æ­å°ï¼è®©å¶ä»äººå±æ\n * æç»­äº¤ä»å¹³å°æ ¸å¿æ¨¡å\n   * ä»£ç ç®¡ç\n     * å¸¸ä¸ä»£ç å®¡æ ¸ãéææ«æååæ¯ç®¡çç­æ¨¡åç¸èç³»ï¼\n   * éæç¼è¯\n     * å¸¸ä¸ä¾èµç®¡çãååæµè¯ãå å¯æåç­æ¨¡åç¸èç³»ï¼\n   * ç¯å¢ç®¡ç\n     * å¸¸ä¸èµæºç³è¯·ãéç½®ç®¡çãè·¯ç±ç®¡çç­æ¨¡åç¸èç³»ï¼\n   * åå¸é¨ç½²\n     * éè¦çæ§æ¨¡ååæµæ§æ¨¡åçæ¯æ\n * æ ååè¡\n   * ç åä»»ä½ç³»ç»ï¼é¦åè¦è®°ä½ä¸å¥è¯ï¼âæ ååè¡â\n   * å¯¹æç»­äº¤ä»å¹³å°çè®¾è®¡æ¥è¯´ï¼æéè¦çæ åæ¯å®ä¹åä¸ªæ¨¡åäº¤ä»äº§ç©çæ åã\n\n\n# ç¬¬29è®² è®¡ç®èµæºä¹æ¯äº¤ä»çåå®¹\n\n * äºè®¡ç®\n\n\n# ç¬¬30è®² æç»­äº¤ä»ä¸­æåªäºå®è´µæ°æ®ï¼\n\n * ç³»ç»ä¼å\n   * æ°æ®è¯´è¯ï¼ä»æ°æ®è§åº¦åææ¾å°ä¼åæ¹å\n * ç³»ç»ææ \n   * ç¨³å®æ§ææ \n   * æ§è½ææ \n   * æç»­äº¤ä»è½åæçåº¦ææ \n\n\n# ç¬¬31è®² äºè§£ç§»å¨Appçæç»­äº¤ä»çå½å¨æ\n\n\n# ç¬¬32è®² ç»è°ç§»å¨APPçäº¤ä»æµæ°´çº¿ï¼pipelineï¼\n\n * åå¸å¿«è½¦æ¨¡å¼\n   * å®æåè½¦\n\n\n# ç¬¬33è®² è¿é¶ï¼å¦ä½è¿ä¸æ­¥æåç§»å¨APPçäº¤ä»æçï¼\n\n * ä¼åäº¤ä»æµç¨ï¼éå¯¹å¼åãæå»ºãæµè¯ãåå¸è¿è¡ä¼å\n * ä¼åæå»ºæ¹å¼ï¼\n   * æå¹³åä¾èµç®¡ç\n   * äºè¿å¶äº¤ä»\n * ä¼ååå¸æ¹å¼:\n   * æµè¯ç¨æ·éï¼éè¦å®ææ´æ¢\n\n\n# ç¬¬34è®² å¿«éæå»ºæç»­äº¤ä»ç³»ç»ï¼ä¸ï¼ï¼éæ±åæ\n\n * å¯¹åä¸ªä¸»è¦æ¨¡åçå·ä½éæ±ï¼\n   * ä»£ç ä¸éç½®ï¼éè¦ code reviewï¼ä»¥åéæä»£ç æ«æï¼\n   * æå»ºä¸éæï¼è½åæ¶æ¯æ JarãWarãDockerï¼ä»¥å Appï¼çæ¬ç®¡çå¯è¿½æº¯ï¼æ¯æé«å¹¶åï¼\n   * æåä¸åå¸ï¼åæ¶æ¯æ JarãWarãDockerãApp çåå¸ï¼ä»¥åç»ä¸çé¨ç½²æ åï¼\n   * èªå¨åæµè¯ï¼éè¿ TestNG é©±å¨ï¼å®ç°å¨èªå¨æµè¯ã\n\n\n# ç¬¬35è®² å¿«éæå»ºæç»­äº¤ä»ç³»ç»ï¼äºï¼ï¼GitLab è§£å³ä»£ç ç®¡çé®é¢\n\n * gitlib å®è£\n   * ä½¿ç¨å®æ¹ç Docker éåæä¸é®å®è£å Omnibus å®è£ GitLab\n * ç®ç\n   * èªå·±å¨æå®éæ­å»ºä¸å¥ GitLabï¼ä»¥åéå¥ç Sonar æå¡\n\n\n# ç¬¬36è®² å¿«éæå»ºæç»­äº¤ä»ç³»ç»ï¼ä¸ï¼ï¼Jenkins è§£å³éææåé®é¢\n\n * jenkins å®è£\n   * gitlab\n   * maven\n   * pipeline\n\n\n# ç¬¬37è®² å¿«éæå»ºæç»­äº¤ä»ç³»ç»ï¼åï¼ï¼Ansible è§£å³èªå¨é¨ç½²é®é¢\n\n * éç½®ç®¡çå·¥å·\n   * AnsibleãChefãPuppetãSalt\n   * Ansible Tower : ä¸ä¸ªå¯è§åå·¥å·ï¼å¯ä»¥å¸®å©æ´å¥½å°ç®¡çæ´ä¸ªé¨ç½²è¿ç¨\n * æç»­äº¤ä»å¹³å°\n   * ç´æ¥èèæ­å»ºæç»­äº¤ä»å¹³å° Spinnaker\n   * Spinnaker æ¯ Netflix çå¼æºé¡¹ç®ï¼è´åäºè§£é¤æç»­äº¤ä»å¹³å°åäºå¹³å°ä¹é´çè¦åã\n\n\n# ç¬¬38è®² æç»­äº¤ä»ä¸æ ç¹å«æ¾é | ç­çè§£æ\n\n * å¦ä½å¤çæ°æ®åºåå¸ååæ»ï¼\n   * å¯¹æ°æ®åºåæ´æ»¡è¶³ä»¥ä¸è¦æ±æ¶ï¼åºæ¬ä¸å°±æ²¡æåæ»éè¦äºï¼\n     * ç¬¬ä¸ï¼ä¸ä¸å¡ç¸å³çï¼åªè½æ°å¢å­æ®µï¼ä¸è½å é¤å­æ®µï¼ä¹ä¸è½ä¿®æ¹å·²æå­æ®µçå®ä¹ï¼å¹¶ä¸æ°å¢å­æ®µå¿é¡»æé»è®¤å¼ã\n     * ç¬¬äºï¼å¯¹äºå¿é¡»è¦ä¿®æ¹åææ°æ®åºç»æçåºæ¯ï¼åå¿é¡»ç± DBA æä½ï¼ä¸çº³å¥æç»­äº¤ä»æµç¨ã\n * Immutable\n   * k8s + docker\n * ç ´åæ§æµè¯\n   * DRæ¼ç»(ç¾é¾æ¢å¤)\n * GitLab HA\n   * Sharding\n\n\n# ç¬¬39è®² æç»­äº¤ä»ä¸æ ç¹å«æ¾é | é«æå­¦ä¹ æå\n\n * æ¨è\n   * æç»­äº¤ä»ï¼åå¸å¯é è½¯ä»¶çç³»ç»æ¹æ³\n   * å¤å°é¡¹ç®\n   * å®æ¹ææ¡£ãè¿éææä¸ä¸ªå»ºè®®ï¼å°±æ¯å¨å­¦ä¹ åè¿ç¨å¼æºç³»ç»åå·¥å·æ¶ï¼è¦åéè¯»å®æ¹ææ¡£ãè¿äºææ¡£é½æ¯ä½èå¿è¡åæºæ§çç»æ¶ï¼ä»ä¸­ä½ å®å¯ä»¥æ¶è·é¢ä¸°ã\n * å»ºè®®\n   * æç»­äº¤ä»ä½ç³»ä¸­æ¶åå°å¾å¤å¼æºè½¯ä»¶ï¼å¦æä½ æ³åå¥½æç»­äº¤ä»ï¼é£å°±ä¸å®è¦å»çè§£å®ä»¬ï¼èä¸åªæ¯ä½¿ç¨å®ä»¬ã\n\n\n# ç¬¬40è®² ç»æè¯­ | è¶çè¦çäºï¼è¶è¦ç»å¸¸å\n\n * è¶çè¦çäºï¼è¶è¦ç»å¸¸å\n   * ç¬¬ä¸çï¼è¦æ¯æ¶æå¸æå¾å¤\n   * ç¬¬äºçï¼è¦æ¯å¼åäººåå¨ä½å¿«\n   * ç¬¬ä¸çï¼è¦æ¯ QA å¢éç¼çå°\n   * ç¬¬åçï¼è¦æ¯è¿è¥äººåâå¿èå¤§â\n     * é¡¶å¾ä½ååãåå¾ä½å§å±\n   * ç¬¬äºçï¼è¦æ¯äº§åç»çè¿ä¼âå¹â\n     * åæç»­äº¤ä»ï¼ççè¦è¶³å¤ä¼åè£èªå·±ãå ä¸ºä½ è¦æ¨å¹¿ä½ çç³»ç»ãè¦æ¾å°ä½ çç§å­ç¨æ·ï¼ä½ è¦è®²éçãè®²ææ¯ãåæ¼ç¤ºï¼è®² PPTãè¿äºæè½ï¼ççæ¯ç¼ºä¸ä¸å¯ã\n\n\n# END\n\n * reference\n   * ä¾èµæ²»çãç°åº¦åå¸ãæéæ¼ç»ï¼é¿éçµåæéæ¼ç»ç³»ç»çè®¾è®¡ä¸å®æç»éª\n   * åæµ1\n   * åæµ2",normalizedContent:"# devops æç»­äº¤ä»\n\n\n# ç¬¬01è®² æç»­äº¤ä»å°åºæä»ä¹ä»·å¼ï¼\n\n * å®ä¹\n   * æç»­éæ : ä»ç¼ç å°æå»ºåå°æµè¯çåå¤æç»­è¿ç¨\n   * æç»­é¨ç½² : å°å¯äº¤ä»äº§åï¼å¿«éä¸å®å¨å°äº¤ä»ç¨æ·ä½¿ç¨çä¸å¥æ¹æ³åç³»ç»\n   * æç»­äº¤ä» : åå« æç»­éæãæµè¯èªå¨å ä»¥å æç»­é¨ç½²ï¼åæ¬ å¼åãæµè¯ãé¨ç½²ãè¿ç»´ãè¿è¥ ç­ç­\n * æç»­äº¤ä»çéæ§ä»·å¼\n   * å¯¹ï¼ctoãteam leaderãäº§åç»çãç¨åºå èè¨\n     * ææ¯éåãæ åè½å°ãé¨é¨åä½ãç¥è¯ä¼ æ¿ãå³æ³¨ä¸å¡ãèå¥å¹³ç¨³ãæé«å·¥ä½æçåè´¨é\n * å¦ä½è¯ä¼°æç»­äº¤ä»çä»·å¼\n * å¸¸è§çæç»­äº¤ä»å¹³å°æ¶æ\n   * \n\n\n# ç¬¬02è®² å½±åæç»­äº¤ä»çå ç´ æåªäºï¼\n\n * å½±åå ç´ \n   * ç»ç»åæåå ç´ \n   * æµç¨å ç´ \n   * æ¶æå ç´ \n\n    åº·å¨å®å¾ï¼ç»ç»ç»æå³å®è½¯ä»¶æ¶æ\n\n\n1\n\n\n\n# ç¬¬03è®² æç»­äº¤ä»ådevopsæ¯ä¸å¯¹å¥½åºå\n\n * è®¤è¯ devops\n   * ä¸ç»ææ¯\n     * åæ¬èªå¨åè¿ç»´ãæç»­äº¤ä»ãé«é¢é¨ç½²ãdocker ç­åå®¹\n     * dockerï¼å°±æ¯ä¸ºäºè§£å³ devops ææå¡çâåºç¡è®¾æ½å³ä»£ç â\n   * ä¸ä¸ªèè½\n   * ä¸ç§æå\n   * ä¸ç§ç»ç»æ¶æ\n * æ»ç»\n   * devopsæ¬è´¨å¶å®æ¯ä¸ç§é¼å±åä½çç åæå\n   * æç»­äº¤ä»ä¸ devops æè¿½æ±çæç»ç®æ æ¯ä¸è´çï¼å³å¿«éåç¨æ·äº¤ä»é«è´¨éçè½¯ä»¶äº§å\n\n\n# ç¬¬04è®² ä¸åçæºå¤´ï¼ä»£ç åæ¯ç­ç¥çéæ©\n\n * åæ¯ç­ç¥\n   * ä¸»å¹²å¼åï¼trunk based developmentï¼ç®ç§° tbdï¼\n     * google å facebook é½å¨ç¨ä¸»å¹²å¼å\n     * ç¹æ§\n       * æ²¡æ feature branchï¼æä»¥é½å¨ä¸»å¹²å¼åï¼åå°åæ¯åå¹¶çéº»ç¦\n       * ä½¿ç¨ feature toggle(ç¹æ§åæ¢) ä¿è¯ä¸æçåè½ä¸ä¼è¢«åå¸\n         * ç¹æ§åæ¢å¤ªå¤ä¼å¯¼è´é»è¾æ··ä¹±ãä»£ç æ´èå¼±ï¼æ´é¾æµè¯ãçè§£åç»´æ¤ãæ´é¾æä¾ææ¯æ¯æï¼èä¸æ´ä¸å®å¨ã\n           * ä»£ç æ´èå¼±ï¼ç¹æ§åæ¢ä¼å° æªç»æµè¯çä»£ç å¼å¥çäº§ç¯å¢ å®ä»¬å¼åçé®é¢å¯è½ä¼å¨æ æé´æ´é²åºæ¥\n       * å¯è½ä¼åºç° ä¸ç²èé¼ å±åäºä¸éç²¥ çç°è±¡\n     * éææçé«ï¼å²çªå°ï¼ä½å¯¹å¢éä¸ªäººçå¼åè½åæè¾é«è¦æ±\n   * åæ¯å¼å(branch model)\n     * git flow(hotfixãrelease) -> github flow(pull request) -> gitlab flow(çäº§ãç¯å¢ä»¥ååå¸åæ¯)\n     * æå©äºå¹¶è¡å¼åï¼éè¦ä¸å®çæµç¨ä¿è¯ï¼è½ä¿è¯ä¸»å¹²ä»£ç è´¨é\n\n\n# ç¬¬05è®² ææææä½ ä¾èµç®¡ç\n\n * ä¸¾ä¾\n   * æä½ç³»ç»çä¾èµç®¡çå·¥å·ï¼\n     * æ¯å¦ centos ç yumï¼debian ç aptï¼arch ç packmanï¼macos ç homebrewï¼\n   * ç¼ç¨è¯­è¨çä¾èµç®¡çå·¥å·ï¼\n     * æ¯å¦ java ç mavenï¼.net ç nugetï¼node.js ç npmï¼golang ç go getï¼python ç pipï¼ruby ç gem\n\n\n# ç¬¬06è®² ä»£ç åæ»ï¼ä½ çççè§£åï¼\n\n * æ¹å¼\n   * roll back å°è¿å»çæä¸ªçæ¬\n   * æ°å¢commitï¼ç§»é¤å¯¹åºåè½\n * reset --hard çä½¿ç¨\n\n\n# ç¬¬07è®² âä¸¤ä¸ªæ«è¨âå¢éçä»£ç ç®¡çå®éæ¡ä¾\n\n * âä¸¤ä¸ªæ«è¨âå¢é\n   * å¨äºé©¬éåé¨ææè°çâä¸¤ä¸ªæ«è¨âå¢é\n   * æçæ¯å¢éçäººæ°ä¸è½å¤å°ä¸¤ä¸ªæ«è¨é¥¼è¿ä¸å¤åçå°æ­¥\n   * å°±æ¯è¯´ï¼å¢éè¦å°å°è®©æ¯ä¸ªæåé½è½ååºæ¾èè´¡ç®ï¼å¹¶ä¸ç¸äºä¾èµï¼æå±åç®æ ï¼ä»¥åç»ä¸çæåæ åï¼è¿æ ·å¢éçå·¥ä½æçæä¼é«ã\n * ä½¿ç¨ gitlab---issue---feature branch å¼åæ¨¡å¼\n\n\n# ç¬¬08è®² æµè¯ç¯å¢è¦å¤å°ï¼ä»ç°å®éæ±è¯´èµ·\n\n * é®é¢\n   * æµè¯ç¯å¢ç»æ\n   * å¥½çæµè¯ç¯å¢æ å\n * ç¯å¢æ¨¡å(äºå¥ç¯å¢)\n   * å¼åç¯å¢\n     * userï¼å¼å\n   * åè½æµè¯ç¯å¢\n     * userï¼æµè¯\n   * éªæ¶æµè¯ç¯å¢\n     * userï¼äº§åç»çãæµè¯\n   * é¢åå¸ç¯å¢\n     * userï¼æµè¯ãè¿ç»´\n     * ç¹ç¹: åºç¨å·²ç»è¿å¥äºçäº§ç½ç»ï¼åçå®ççäº§åºç¨å±äº«åä¸å¥æ°æ®åºç­ç­åºç¡è®¾æ½ã\n     * æ¹å¼ï¼a: éä¸éåå¸ï¼ä½¿ç¨çå®æµéæºå¨; b: ä¸ç»ä¸æ¥å¥çå®æµéçæºå¨\n   * çäº§ç¯å¢\n\n\n# ç¬¬09è®² æµè¯ç¯å¢è¦å¤å°ï¼ä»ææ¬ä¸æçè¯´èµ·\n\n * ææ¬\n   * æºå¨èµæºææ¬\n   * ç®¡çææ¬ï¼éç½®ãæµè¯æ°æ®ç­\n   * æµç¨æåï¼æ²éææ¬ãæµè¯ææ¬ç­\n * æç\n   * å¨æ½è±¡å¬å±ç¯å¢çåºç¡ä¹ä¸ï¼å¯ä»¥éè¿æ³³éçæ¹å¼éç¦»ç¸å³æµè¯åºç¨\n   * éä½éç½®å¤æåº¦\n\n\n# ç¬¬10è®² è®©ç¯å¢èªå·±è¯´è¯ï¼è®ºç¯å¢èªæè¿°çéè¦æ§\n\n * é®é¢\n   * ç¯å¢éç½®æ¯éå¸¸å¤æçï¼ç´æ¥å½±åä½ çç¯å¢æ²»çè½åï¼èç¯å¢æ²»çè½ååç´æ¥å½±åçæç»­äº¤ä»çè½åã\n * èªæè¿°\n   * éè¿ç¯å¢æ ååï¼å©ç¨ç¯å¢çèªæè¿°æä»¶ï¼è®©ç¯å¢è½è®²æ¸æ¥èªå·±çä½ç¨ãä¾èµï¼ä»¥åç¶æï¼èä¸æ¯ç±å¤é¨éç½®æ¥è§£éè¿äºåå®¹ã\n\n\n# ç¬¬11è®² âéç½®âæ¯æåååï¼å¸¦ä½ äºè§£åç§éç½®æ¹æ³\n\n * åç§éç½®\n   * æå»ºæ¶éç½®\n   * æåæ¶éç½®\n   * è¿è¡æ¶éç½®\n     * éç½®ä¸­å¿\n       * apollo ï¼https://github.com/ctripcorp/apollo\n * ç\n   * åæ»éç½®\n\n\n# ç¬¬12è®² æéææï¼å¦ä½åå°åéçº§æ­å»ºç¯å¢ï¼\n\nå¸åºä¸ä¸»æµçå¼æºéç½®ç®¡çå·¥å·æ puppetãchefãansibleãsaltstack ç­ å¹¶è¡ãç¼å­æ± \n\n\n# ç¬¬13è®² å®¹å¨ææ¯ççæ¯ç¯å¢ç®¡ççææåï¼\n\n * å®¹å¨ä¼ç¹\n   * å¸®æä»¬éæ°å®ä¹äºäº¤ä»æ åï¼ å®¹å¨ææ¯ç»ä¸äºè½¯ä»¶ç¯å¢åè½¯ä»¶ä»£ç ï¼äº¤ä»äº§ç©ä¸­æ¢åæ¬äºè½¯ä»¶ç¯å¢ï¼ååæ¬äºè½¯ä»¶ä»£ç ã\n * ä¸å¯ååºç¡è®¾æ½ï¼immutable infrastructureï¼\n   * çå¿µï¼\n     * å¯¹äºå®¹å¨æ¥è¯´ï¼éµå¾ªçæ¯ä¸å¯ååºç¡è®¾æ½ççå¿µï¼ä¹å°±æ¯è¯´ä»»ä½ååï¼åæ¬ä»£ç ãç¯å¢ãéç½®çåæ´ï¼é½éè¦éæ°å¶ä½éåï¼äº§çä¸ä¸ªæ°ççæ¬ã\n   * é®é¢ï¼\n     * ä¼å°åæ¬ç®åçä¿®æ¹ï¼å¤æåï¼å¦ï¼åªæ¯æ³å®è£curlï¼ä½æ¯å´è¦éæ°çäº§éå\n\n\n# ç¬¬14è®² å¦ä½åå°æå»ºçæéï¼åæéï¼\n\n * æ¹æ³\n   * åçº§ç¡¬ä»¶èµæº\n   * æ­å»ºç§æä»åº\n     * ä½¿ç¨ createrepo æ­å»º centos ç yum ä»åºï¼\n     * ä½¿ç¨ nexus æ­å»º java ç maven ä»åºï¼\n     * ä½¿ç¨ cnpm æ­å»º nodejs ç npm ä»åºï¼\n     * ä½¿ç¨ pypiserver æ­å»º python ç pip ä»åºï¼\n     * ä½¿ç¨ gitlab æ­å»ºä»£ç ä»åºï¼\n     * ä½¿ç¨ harbor æ­å»º docker éåä»åº\n   * ä½¿ç¨æ¬å°ç¼å­\n   * è§èæå»ºæµç¨ï¼éè¿å¼æ­¥æ¹å¼è§£å³ææ¯æµç¨çæ§è¡ï¼\n   * åç¨æå»ºå·¥å·ï¼æ ¹æ®å®éæåµåçåæ¥çå·¥å·ç¹æ§ã\n\n\n# ç¬¬15è®² æå»ºæ£æµï¼æ è§ç©ä¸ææ¹å\n\n * æ£æµ\n   * ç¯å¢ï¼è½¯ä»¶çæ¬ãç¼è¯å·¥å·çæ¬ãæä½ç³»ç»ç­\n   * ä¾èµï¼ä¾èµå³ç³»æ£æ¥\n   * ...\n\n\n# ç¬¬16è®² æå»ºèµæºçå¼¹æ§ä¼¸ç¼©\n\n * æç»­éæå·¥å·\n   * travis ciãcircle ciãjenkins ci\n * jenkins master é«å¯ç¨æ¶æç\n   * åä¸ª jenkins master\n     * ç®åæ®éç jenkins æ­å»ºæ¹æ¡æ¯ï¼ä¸ä¸ª jenkins master æ­éå¤ä¸ª jenkins slaveã\n     * åä¸ª jenkins master å¨ä»»å¡éå¤§æ¶ï¼ä¼æä¸ºç³»ç»ä¸­çç¶é¢\n   * å¤ä¸ª jenkins master\n     * å¯¹jenkinså°è£ï¼èªå®ä¹é«å¯ç¨å¤masteræ¶æ\n * jenkins slave å¼¹æ§ä¼¸ç¼©æ¹æ¡\n   * æå»ºç¯å¢ï¼å®¹å¨å\n   * èµæºä¼¸ç¼©\n     * éè¿å®¹å¨åï¼ä¸kubernetes ç»å\n\n\n# ç¬¬17è®² å®¹å¨éåæå»ºçé£äºäºå¿\n\n * docker hub\n   * https://hub.docker.com/\n * ç¨å®¹å¨æ¥æå»ºå®¹å¨éåæä¸¤ç§æ¹å¼ï¼(ä¸»è¦ä¾æ®ï¼ä½¿ç¨å®¿ä¸»çdocker daemon è¿æ¯å®¹å¨åç¬ç« docker daemon)\n   * docker out of dockerï¼doodï¼\n   * docker in dockerï¼dindï¼\n\n\n# ç¬¬18è®² å¦ä½åå¥½å®¹å¨éåçä¸ªæ§åååè§æ£æ¥ï¼\n\n * å®¹å¨éåä¸ªæ§å +æ»ç»äºä»¥ä¸ä¸ç§æ¹æ³ï¼ èªå®ä¹ç¯å¢èæ¬ï¼ å¹³å°åç¯å¢éé¡¹ä¸æå¡éå¸ï¼ èªå®ä¹éååå¸ã\n * åè§æ£æ¥\n   * æ¯å¯¹åä¸ª layerï¼æ¯å¦æå®æ¹baseéåçlayer\n   * å·¥å·ï¼\n     * coreos clairï¼docker security scanningï¼drydockï¼...\n\n\n# ç¬¬19è®² åå¸æ¯æç»­äº¤ä»çæåä¸å¬é\n\n * é¨ç½² å åå¸\n   * åºç¨è¢«é¨ç½²ï¼å¹¶ä¸ä»£è¡¨å°±æ¯åå¸äºï¼æ¯å¦æè·¯è¿è¡ï¼dark launchï¼æ¹å¼\n   * åå¸ï¼rolloutï¼é¨ç½²ï¼deploy\n * åå¸ç³»ç»ææ\n   * ä¸ä¸ªæç¨ãå¿«éãç¨³å®ãå®¹éåå¼ºï¼å¿è¦æ¶æè½åè¿éåæ»\n * åèç¹é¨ç½²æµç¨\n   * download: ä¸è½½æ°ççæ¬ï¼ä¸æ§è¡è¦çï¼\n   * markdown: éç¥ä¸æ¸¸è°ç¨æ¹ï¼èªå·±ç°å¨ä¸ºæåæå¡ç¶æï¼\n   * install : è¿è¡å½ä»¤ load åæ´éå¯æå¡ï¼\n   * verify : éªè¯æå¡çå¥åº·ç¶åµä»¥åé¢ç­ï¼\n   * markup : éç¥ä¸æ¸¸è°ç¨æ¹ï¼èªå·±æå¡æ¢å¤æ­£å¸¸ã\n * éç¾¤é¨ç½²æ¹å¼ï¼\n   * ç°åº¦åå¸\n     * èç»¿åå¸\n       * åå¸æ°çæ¬å°ä¸å¥æ°çéç¾¤ï¼éªè¯éè¿åï¼æµæ§å¤çææµéå¼å¥æ°æºå¨ï¼å¾å¨é¨æµéåæ¢å®æï¼ç­å¾ä¸æ®µæ¶é´æ²¡æå¼å¸¸çè¯ï¼èçæ¬æå¡å¨ä¸çº¿ã\n     * æ»å¨åå¸\n       * ä»éç¾¤æå¡å¨ä¸­æéä¸æ¹ï¼åæ­¢ä¸é¢çæå¡å¹¶æ´æ°ä¸ºæ°çæ¬ï¼è¿è¡éªè¯ï¼éªè¯å®æ¯åæ¥å¥æµéãéå¤æ­¤æ­¥éª¤ï¼ç´å°éåå®æææºå¨ã\n     * éä¸éåå¸\n       * ä»éç¾¤ä¸­æéç¹å®æå¡å¨æä¸å°æ¹ç¬¦åè¦æ±çç¹å¾ç¨æ·ï¼å¯¹å¶è¿è¡çæ¬æ´æ°åéªè¯ï¼éåéæ­¥æ´æ°å©ä½æå¡å¨ã\n   * ç°åº¦åå¸ç³»ç»ï¼\n     * tars : https://github.com/ctripcorp/tars\n\n\n# ç¬¬20è®² immutableï¼ä»»ä½åæ´é½éè¦åå¸\n\n * ä¸å¯ååºç¡è®¾æ½(immutable infrastructure)\n   * åæï¼æ ç¶æ\n   * ä¿è¯: ç¯å¢ãé¡ºåºãéç½®è¿äºåºç¡è®¾æ½å¨æµè¯ç¯èåçäº§ç¯èçä¸è´æ§\n   * ä¸èææºçæ¬è´¨å·®å¼ç¹\n\n\n# ç¬¬21è®² åå¸ç³»ç»ä¸å®è¦æ³¨æç¨æ·ä½éª\n\n * åå¸ç³»ç»ç»æï¼\n   * 1 å¼ é¡µé¢å±ç¤ºåå¸ä¿¡æ¯\n     * è½å¤å±ç¤ºåå¸å½æ¶çç»å¤§å¤æ°ä¿¡æ¯ãæ°æ®ååå®¹ï¼è¿ä¸ªé¡µé¢æ¢è¦å¨é¢ï¼åè¦ç²¾å\n   * 2 ä¸ªæä½æé®ç®åä½¿ç¨\n     * é¡µé¢ä¸æå¤åæ¶å±ç¤ºä¸¤ä¸ªæé®ï¼åå¸ãä¸­æ­ãéè¯\n   * 3 ç§åå¸ç»æ\n     * æåãå¤±è´¥ãä¸­æ­\n   * 4 ç±»æä½éæ©\n     * å¼å§åå¸ãåæ­¢åå¸ãåå¸åéãåå¸éè¯\n   * 5 ä¸ªåå¸æ­¥éª¤\n     * åç¬¬19è®²ä¸­ç'åèç¹é¨ç½²æµç¨'\n   * 6 å¤§é¡µé¢ä¸»è¦åå®¹\n     * éç¾¤ãå®ä¾ãåå¸æ¥å¿ãåå¸åå²ãåå¸æ¹æ¬¡(åæ¹æ¬¡åå¸)ãåå¸æä½(æä½æé®éä¸­çåºå)\n\n\n# ç¬¬22è®² åå¸ç³»ç»çæ ¸å¿æ¶æååè½è®¾è®¡\n\n * æ ¸å¿\n   * deploymentconfig\n   * deployment\n   * deploybatch\n   * deploytarget\n   * åå¸ç¶ææµè½¬\n * åè½\n   * æå¡éçº§ãçæ­æºå¶\n\n\n# ç¬¬23è®² ä¸å¡åç³»ç»æ¶æå¯¹åå¸çå½±å\n\n * å½±å\n   * åæºååºç¨è¿æ¯åæºå¤åºç¨ï¼\n   * å¢éåå¸è¿æ¯å¨éåå¸ï¼\n   * å¦ä½æ§å¶æå¡ç markup å markdownï¼\n   * æ£æ¥ãé¢ç­åç¹ç«æºå¶(ç¹ç«ï¼verifyæµç¨çèªå¨å)\n   * å¦ä½ä¿è¯å ¡åæµéï¼\n     * è½¯è´è½½ + headerä¸­éå å ¡åæ è®°ï¼ä¿è¯å ¡åæºçæµéåªå¨ä¸ä¸æ¸¸æå¡çå ¡åæºä¸­æµè½¬ã\n\n\n# ç¬¬24è®² å¦ä½å©ç¨çæ§ä¿éåå¸è´¨éï¼\n\n * çæ§\n   * ç¨æ·ä¾§çæ§ï¼å³æ³¨çæ¯ç¨æ·çæ­£æåå°çè®¿é®éåº¦åç»æï¼\n   * ç½ç»çæ§ï¼å³ cdn ä¸æ ¸å¿ç½ç»ççæ§ï¼\n   * ä¸å¡çæ§ï¼å³æ³¨çæ¯æ ¸å¿ä¸å¡ææ çæ³¢å¨ï¼\n   * åºç¨çæ§ï¼å³æå¡è°ç¨é¾ççæ§ï¼ä¸è¬å¨æ¡æ¶å±é¢ç»ä¸å®ä¹è§£å³æ¹æ¡ï¼\n   * ç³»ç»çæ§ï¼å³åºç¡è®¾æ½ãèææºåæä½ç³»ç»ççæ§ã\n\n\n# ç¬¬25è®² ä»£ç éææ£æ¥å®è·µ\n\n * æµè¯ç®¡ç\n   * ä»£ç éææ£æ¥\n   * ç ´åæ§æµè¯\n   * mock ä¸ åæ¾\n * éææ£æ¥å¹³å°\n   * sonarqube\n * éææ£æ¥å·¥å·\n   * findbugsãpmd å checkstyle\n\n\n# ç¬¬26è®² è¶æ¥è¶éè¦çç ´åæ§æµè¯\n\n * ç»´åº¦\n   * åç¹ç»´åº¦ï¼\n   * ç³»ç»ç»´åº¦ï¼åæµãæ´åæµè¯ãé»æ­é¾è·¯ç­\n * æ··æ²å·¥ç¨\n   * netflix : chaos monkey\n\n\n# ç¬¬27è®² å©ç¨mockä¸åæ¾ææ¯å©åèªå¨ååå½\n\n * æç»­äº¤ä»ä¸­çæµè¯é¾ç¹\n   * æµè¯æ°æ®çåå¤ä¸æ¸ç\n   * åå¸å¼ç³»ç»çä¾èµ\n   * æµè¯ç¨ä¾çé«åº¦ä»¿ç\n * æ¹æ¡\n   * mock\n     * è¯´æ\n       * å¦ææä¸ªå¯¹è±¡å¨æµè¯è¿ç¨ä¸­ä¾èµäºå¦ä¸ä¸ªå¤æå¯¹è±¡ï¼èè¿ä¸ªå¤æå¯¹è±¡åå¾é¾è¢«ä»æµè¯è¿ç¨ä¸­å¥ç¦»åºæ¥ï¼é£ä¹å°±å¯ä»¥å©ç¨ mock å»æ¨¡æå¹¶ä»£æ¿è¿ä¸ªå¤æå¯¹è±¡ã\n     * åºäºå¯¹è±¡åç±»ç mock\n       * mockito æè easymockã\n       * éå¸¸ç¨å¨ååæµè¯é¶æ®µ\n     * åºäºå¾®æå¡ç mock\n       * weir mock å mock server\n   * åæ¾\n     * è¯´æ\n       * è®°å½å®éç¨æ·å¨çäº§ç¯å¢çæä½ï¼ç¶åå¨æµè¯ç¯å¢ä¸­åæ¾ã\n     * æ¦æªè®°å½ç¨æ·æä½æ¹æ¡ï¼\n       * å¨ç»ä¸ç slb ä¸åç»ä¸çæ¦æªåå¤å¶è½¬åå¤çã\n         * å®¹æå½±åèªèº«è·¯ç±æå¡\n       * å¨éç¾¤ä¸­æ©å®¹ä¸å°æå¡å¨ï¼å¨è¯¥æå¡å¨ä¸å¯å¨ä¸ä¸ªè½¯äº¤æ¢è´è´£å¤å¶åè½¬åç¨æ·è¯·æ±ï¼èçæ­£çç¨æ·è¯·æ±ï¼ä»ç±è¯¥æå¡å¨è¿è¡å¤çã\n         * ç»åäºå¹³å°ï¼ä½¿ç¨æ¶ç³è¯·æå¡å¨ï¼ä¸éè¦æ¶éæ¾ï¼é£é©ä½\n     * æ¹æ¡\n       * æç§æ­£å¸¸çæä½è®°å½æ¶é´é´éï¼æè®°å½é¡ºåºåæ¾\n       * åç¼©æä½è®°å½çæ¶é´é´éï¼æè®°å½é¡ºåºï¼å½¢æåååæ¾\n\n\n# ç¬¬28è®² æç»­äº¤ä»ä¸ºä»ä¹è¦å¹³å°åè®¾è®¡ï¼\n\n * æç»­äº¤ä»ææ ¸å¿çäºå¤§é¨ååå®¹ï¼åæ¬ï¼\n   * éç½®ç®¡çãç¯å¢ç®¡çãæå»ºéæãåå¸åçæ§ãæµè¯ç®¡çã\n * å¹³å°å\n   * èªå·±æ­å°ï¼è®©å¶ä»äººå±æ\n * æç»­äº¤ä»å¹³å°æ ¸å¿æ¨¡å\n   * ä»£ç ç®¡ç\n     * å¸¸ä¸ä»£ç å®¡æ ¸ãéææ«æååæ¯ç®¡çç­æ¨¡åç¸èç³»ï¼\n   * éæç¼è¯\n     * å¸¸ä¸ä¾èµç®¡çãååæµè¯ãå å¯æåç­æ¨¡åç¸èç³»ï¼\n   * ç¯å¢ç®¡ç\n     * å¸¸ä¸èµæºç³è¯·ãéç½®ç®¡çãè·¯ç±ç®¡çç­æ¨¡åç¸èç³»ï¼\n   * åå¸é¨ç½²\n     * éè¦çæ§æ¨¡ååæµæ§æ¨¡åçæ¯æ\n * æ ååè¡\n   * ç åä»»ä½ç³»ç»ï¼é¦åè¦è®°ä½ä¸å¥è¯ï¼âæ ååè¡â\n   * å¯¹æç»­äº¤ä»å¹³å°çè®¾è®¡æ¥è¯´ï¼æéè¦çæ åæ¯å®ä¹åä¸ªæ¨¡åäº¤ä»äº§ç©çæ åã\n\n\n# ç¬¬29è®² è®¡ç®èµæºä¹æ¯äº¤ä»çåå®¹\n\n * äºè®¡ç®\n\n\n# ç¬¬30è®² æç»­äº¤ä»ä¸­æåªäºå®è´µæ°æ®ï¼\n\n * ç³»ç»ä¼å\n   * æ°æ®è¯´è¯ï¼ä»æ°æ®è§åº¦åææ¾å°ä¼åæ¹å\n * ç³»ç»ææ \n   * ç¨³å®æ§ææ \n   * æ§è½ææ \n   * æç»­äº¤ä»è½åæçåº¦ææ \n\n\n# ç¬¬31è®² äºè§£ç§»å¨appçæç»­äº¤ä»çå½å¨æ\n\n\n# ç¬¬32è®² ç»è°ç§»å¨appçäº¤ä»æµæ°´çº¿ï¼pipelineï¼\n\n * åå¸å¿«è½¦æ¨¡å¼\n   * å®æåè½¦\n\n\n# ç¬¬33è®² è¿é¶ï¼å¦ä½è¿ä¸æ­¥æåç§»å¨appçäº¤ä»æçï¼\n\n * ä¼åäº¤ä»æµç¨ï¼éå¯¹å¼åãæå»ºãæµè¯ãåå¸è¿è¡ä¼å\n * ä¼åæå»ºæ¹å¼ï¼\n   * æå¹³åä¾èµç®¡ç\n   * äºè¿å¶äº¤ä»\n * ä¼ååå¸æ¹å¼:\n   * æµè¯ç¨æ·éï¼éè¦å®ææ´æ¢\n\n\n# ç¬¬34è®² å¿«éæå»ºæç»­äº¤ä»ç³»ç»ï¼ä¸ï¼ï¼éæ±åæ\n\n * å¯¹åä¸ªä¸»è¦æ¨¡åçå·ä½éæ±ï¼\n   * ä»£ç ä¸éç½®ï¼éè¦ code reviewï¼ä»¥åéæä»£ç æ«æï¼\n   * æå»ºä¸éæï¼è½åæ¶æ¯æ jarãwarãdockerï¼ä»¥å appï¼çæ¬ç®¡çå¯è¿½æº¯ï¼æ¯æé«å¹¶åï¼\n   * æåä¸åå¸ï¼åæ¶æ¯æ jarãwarãdockerãapp çåå¸ï¼ä»¥åç»ä¸çé¨ç½²æ åï¼\n   * èªå¨åæµè¯ï¼éè¿ testng é©±å¨ï¼å®ç°å¨èªå¨æµè¯ã\n\n\n# ç¬¬35è®² å¿«éæå»ºæç»­äº¤ä»ç³»ç»ï¼äºï¼ï¼gitlab è§£å³ä»£ç ç®¡çé®é¢\n\n * gitlib å®è£\n   * ä½¿ç¨å®æ¹ç docker éåæä¸é®å®è£å omnibus å®è£ gitlab\n * ç®ç\n   * èªå·±å¨æå®éæ­å»ºä¸å¥ gitlabï¼ä»¥åéå¥ç sonar æå¡\n\n\n# ç¬¬36è®² å¿«éæå»ºæç»­äº¤ä»ç³»ç»ï¼ä¸ï¼ï¼jenkins è§£å³éææåé®é¢\n\n * jenkins å®è£\n   * gitlab\n   * maven\n   * pipeline\n\n\n# ç¬¬37è®² å¿«éæå»ºæç»­äº¤ä»ç³»ç»ï¼åï¼ï¼ansible è§£å³èªå¨é¨ç½²é®é¢\n\n * éç½®ç®¡çå·¥å·\n   * ansibleãchefãpuppetãsalt\n   * ansible tower : ä¸ä¸ªå¯è§åå·¥å·ï¼å¯ä»¥å¸®å©æ´å¥½å°ç®¡çæ´ä¸ªé¨ç½²è¿ç¨\n * æç»­äº¤ä»å¹³å°\n   * ç´æ¥èèæ­å»ºæç»­äº¤ä»å¹³å° spinnaker\n   * spinnaker æ¯ netflix çå¼æºé¡¹ç®ï¼è´åäºè§£é¤æç»­äº¤ä»å¹³å°åäºå¹³å°ä¹é´çè¦åã\n\n\n# ç¬¬38è®² æç»­äº¤ä»ä¸æ ç¹å«æ¾é | ç­çè§£æ\n\n * å¦ä½å¤çæ°æ®åºåå¸ååæ»ï¼\n   * å¯¹æ°æ®åºåæ´æ»¡è¶³ä»¥ä¸è¦æ±æ¶ï¼åºæ¬ä¸å°±æ²¡æåæ»éè¦äºï¼\n     * ç¬¬ä¸ï¼ä¸ä¸å¡ç¸å³çï¼åªè½æ°å¢å­æ®µï¼ä¸è½å é¤å­æ®µï¼ä¹ä¸è½ä¿®æ¹å·²æå­æ®µçå®ä¹ï¼å¹¶ä¸æ°å¢å­æ®µå¿é¡»æé»è®¤å¼ã\n     * ç¬¬äºï¼å¯¹äºå¿é¡»è¦ä¿®æ¹åææ°æ®åºç»æçåºæ¯ï¼åå¿é¡»ç± dba æä½ï¼ä¸çº³å¥æç»­äº¤ä»æµç¨ã\n * immutable\n   * k8s + docker\n * ç ´åæ§æµè¯\n   * dræ¼ç»(ç¾é¾æ¢å¤)\n * gitlab ha\n   * sharding\n\n\n# ç¬¬39è®² æç»­äº¤ä»ä¸æ ç¹å«æ¾é | é«æå­¦ä¹ æå\n\n * æ¨è\n   * æç»­äº¤ä»ï¼åå¸å¯é è½¯ä»¶çç³»ç»æ¹æ³\n   * å¤å°é¡¹ç®\n   * å®æ¹ææ¡£ãè¿éææä¸ä¸ªå»ºè®®ï¼å°±æ¯å¨å­¦ä¹ åè¿ç¨å¼æºç³»ç»åå·¥å·æ¶ï¼è¦åéè¯»å®æ¹ææ¡£ãè¿äºææ¡£é½æ¯ä½èå¿è¡åæºæ§çç»æ¶ï¼ä»ä¸­ä½ å®å¯ä»¥æ¶è·é¢ä¸°ã\n * å»ºè®®\n   * æç»­äº¤ä»ä½ç³»ä¸­æ¶åå°å¾å¤å¼æºè½¯ä»¶ï¼å¦æä½ æ³åå¥½æç»­äº¤ä»ï¼é£å°±ä¸å®è¦å»çè§£å®ä»¬ï¼èä¸åªæ¯ä½¿ç¨å®ä»¬ã\n\n\n# ç¬¬40è®² ç»æè¯­ | è¶çè¦çäºï¼è¶è¦ç»å¸¸å\n\n * è¶çè¦çäºï¼è¶è¦ç»å¸¸å\n   * ç¬¬ä¸çï¼è¦æ¯æ¶æå¸æå¾å¤\n   * ç¬¬äºçï¼è¦æ¯å¼åäººåå¨ä½å¿«\n   * ç¬¬ä¸çï¼è¦æ¯ qa å¢éç¼çå°\n   * ç¬¬åçï¼è¦æ¯è¿è¥äººåâå¿èå¤§â\n     * é¡¶å¾ä½ååãåå¾ä½å§å±\n   * ç¬¬äºçï¼è¦æ¯äº§åç»çè¿ä¼âå¹â\n     * åæç»­äº¤ä»ï¼ççè¦è¶³å¤ä¼åè£èªå·±ãå ä¸ºä½ è¦æ¨å¹¿ä½ çç³»ç»ãè¦æ¾å°ä½ çç§å­ç¨æ·ï¼ä½ è¦è®²éçãè®²ææ¯ãåæ¼ç¤ºï¼è®² pptãè¿äºæè½ï¼ççæ¯ç¼ºä¸ä¸å¯ã\n\n\n# end\n\n * reference\n   * ä¾èµæ²»çãç°åº¦åå¸ãæéæ¼ç»ï¼é¿éçµåæéæ¼ç»ç³»ç»çè®¾è®¡ä¸å®æç»éª\n   * åæµ1\n   * åæµ2",charsets:{cjk:!0}},{title:"Google æè½è¯åå¡",frontmatter:{title:"Google æè½è¯åå¡",date:"2020-04-03T00:00:00.000Z",categories:["skill"],keywords:["skill level"],description:"Google æè½è¯åå¡",permalink:null,tags:[null]},regularPath:"/blog/xnote/rnote_google_skill_level.html",relativePath:"blog/xnote/rnote_google_skill_level.md",key:"v-155cc502",path:"/blog/xnote/rnote_google_skill_level.html",headersStr:null,content:"# Google æè½è¯åå¡\n\n0. You are unfamiliar with the subject area.\n    - ä½ å¯¹é¢åä¸äºè§£ã\n\n1. You can read/understand the most fundamental aspects of the subject area.\n    - ä½ è½å¤éè¯»åçè§£é¢åçæåºæ¬æ¹é¢ã\n\n2. Ability to implement small changes, understand basic principles and able to figure out additional details with minimal help.\n    - è½å¤å®æ½å°çåæ´ï¼çè§£åºæ¬ååï¼å¹¶ä¸è½å¤å¨æå°çå¸®å©ä¸æ¾åºæ´å¤ç»èã\n\n3. Basic proficiency in a subject area without relying on help.\n    - å¨ä¸ä¾èµå¸®å©çæåµä¸å¯¹é¢åæåºæ¬ççç»ç¨åº¦ã\n\n4. You are comfirtable with the subject area and all routine work on it: For software areas - ability to develop medium programs using all basic language features w/o book, awareness of more esoteric feature(with book).\nFor systems areas - understanding of many fundamentals of networking and systems administration, ability to run a small network of system including recovery, debugging and nontrivial troubleshooting that relies on the knowledge of internals.\n    - ä½ å¯¹é¢ååæææ¥å¸¸å·¥ä½é½å¾çæï¼å¯¹äºè½¯ä»¶ï¼è½å¤å¨ä¸åèä¹¦æ¬çæåµä¸ä½¿ç¨åºæ¬çè¯­è¨ç¹æ§å¼åä¸­åç¨åºï¼è½å¤éè¿ä¹¦æ¬äºè§£æ´æ·±å¥¥çç¹æ§ã\nå¯¹äºç³»ç»ï¼çè§£ç½ç»åç³»ç»ç®¡ççè®¸å¤åºç¡ç¥è¯ï¼è½å¤ä¾èµåå¨ç¥è¯è¿è½¬å°åç³»ç»ç½ç»ï¼åæ¬æ¢å¤ãè°è¯ãæé¤éè¦æéã\n\n5. An even lower degree of reliance on reference materials. Deeper skills in a field or specific technology in the subject area.\n    - å¯¹åèææçä¾èµç¨åº¦æ´ä½ãå¯¹é¢åçæä¸é¨å/ç¹å®ææ¯å·å¤æ·±åº¦çæè½ã\n\n6. Ability to develop large programs and systems from scratch. Understanding of low level details and internals. Ability to design / deploy most large, distributed systems from scratch.\n    - è½å¤ä»é¶å¼åå¤§åç¨åºåç³»ç»ãçè§£åºå±ååé¨ç»èãè½å¤ä»é¶è®¾è®¡åé¨ç½²å¤§å¤æ°å¤§ååå¸å¼ç³»ç»ã\n\n7. You understand and make use of most lesser known language features, technologies, and associated internals. Ability to automate significant amounts of systems administration.\n    - ä½ çè§£å¹¶åºç¨å¤§å¤æ°é²ä¸ºäººç¥çè¯­è¨ç¹æ§ãææ¯åç¸å³çåé¨ç¥è¯ãè½å¤èªå¨åå¤§éç³»ç»ç®¡çã\n\n8. Deep understanding of corner cases, esoteric features, protocols and systems including âtheory of operationâ. Demonstrated ability to design, deploy and own very critical or large infrastructure, build accompanying automation.\n    - æ·±åº¦çè§£è§è½æ¡ä¾ãæ·±å¥¥ç¹æ§ãåè®®åç³»ç»ï¼åæ¬è¿äºè¡ä¸ºèåçåç(ç¥å¶æä»¥ç¶)ãå·å¤è®¾è®¡ãé¨ç½²ãç®¡çå³é®æèå¤§ååºç¡æ¶æè½åï¼å¹¶æå»º\nç¸åºçèªå¨åã\n\n9. Could have written the book about the subject area but didnât; works with standards committees on defining new standards and methodologies.\n    - è½å¤æ°åé¢åä¹¦ç±ï¼ä½æ¯å°æªä»è¯¸è¡å¨(æ°åä¹¦ç±)ãè½å¤ä¸æ åå§åä¼ä¸èµ·å¶å®æ°çæ ååæ¹æ³ã\n\n10. Wrote the book on the subject area(there actually has to be a book). Recognized industry expert in the field, might have invented it\n    - åè¿é¢ååçä¹¦ç±(å®éä¸å¿é¡»åºçäºä¹¦ç±)ãé¢ååå¬è®¤çä¸å®¶ï¼ä¹è®¸å·²ç»å¨é¢ååææåæ°ã\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n\n\n----------------------------------------\n\n * Subject Areas:\n\n    TCP/IP Networking (OSI stack, DNS etc)\n    Unix/Linux internals\n    Unix/Linux Systems administration\n    Algorithms and Data Structures\n    C\n    C++\n    Python\n    Java\n    Perl\n    Go\n    Shell Scripting (sh, Bash, ksh, csh)\n    SQL and/or Database Admin\n    Scripting language of your choice (not already mentioned) \n    People Management\n    Project Management\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n",normalizedContent:"# google æè½è¯åå¡\n\n0. you are unfamiliar with the subject area.\n    - ä½ å¯¹é¢åä¸äºè§£ã\n\n1. you can read/understand the most fundamental aspects of the subject area.\n    - ä½ è½å¤éè¯»åçè§£é¢åçæåºæ¬æ¹é¢ã\n\n2. ability to implement small changes, understand basic principles and able to figure out additional details with minimal help.\n    - è½å¤å®æ½å°çåæ´ï¼çè§£åºæ¬ååï¼å¹¶ä¸è½å¤å¨æå°çå¸®å©ä¸æ¾åºæ´å¤ç»èã\n\n3. basic proficiency in a subject area without relying on help.\n    - å¨ä¸ä¾èµå¸®å©çæåµä¸å¯¹é¢åæåºæ¬ççç»ç¨åº¦ã\n\n4. you are comfirtable with the subject area and all routine work on it: for software areas - ability to develop medium programs using all basic language features w/o book, awareness of more esoteric feature(with book).\nfor systems areas - understanding of many fundamentals of networking and systems administration, ability to run a small network of system including recovery, debugging and nontrivial troubleshooting that relies on the knowledge of internals.\n    - ä½ å¯¹é¢ååæææ¥å¸¸å·¥ä½é½å¾çæï¼å¯¹äºè½¯ä»¶ï¼è½å¤å¨ä¸åèä¹¦æ¬çæåµä¸ä½¿ç¨åºæ¬çè¯­è¨ç¹æ§å¼åä¸­åç¨åºï¼è½å¤éè¿ä¹¦æ¬äºè§£æ´æ·±å¥¥çç¹æ§ã\nå¯¹äºç³»ç»ï¼çè§£ç½ç»åç³»ç»ç®¡ççè®¸å¤åºç¡ç¥è¯ï¼è½å¤ä¾èµåå¨ç¥è¯è¿è½¬å°åç³»ç»ç½ç»ï¼åæ¬æ¢å¤ãè°è¯ãæé¤éè¦æéã\n\n5. an even lower degree of reliance on reference materials. deeper skills in a field or specific technology in the subject area.\n    - å¯¹åèææçä¾èµç¨åº¦æ´ä½ãå¯¹é¢åçæä¸é¨å/ç¹å®ææ¯å·å¤æ·±åº¦çæè½ã\n\n6. ability to develop large programs and systems from scratch. understanding of low level details and internals. ability to design / deploy most large, distributed systems from scratch.\n    - è½å¤ä»é¶å¼åå¤§åç¨åºåç³»ç»ãçè§£åºå±ååé¨ç»èãè½å¤ä»é¶è®¾è®¡åé¨ç½²å¤§å¤æ°å¤§ååå¸å¼ç³»ç»ã\n\n7. you understand and make use of most lesser known language features, technologies, and associated internals. ability to automate significant amounts of systems administration.\n    - ä½ çè§£å¹¶åºç¨å¤§å¤æ°é²ä¸ºäººç¥çè¯­è¨ç¹æ§ãææ¯åç¸å³çåé¨ç¥è¯ãè½å¤èªå¨åå¤§éç³»ç»ç®¡çã\n\n8. deep understanding of corner cases, esoteric features, protocols and systems including âtheory of operationâ. demonstrated ability to design, deploy and own very critical or large infrastructure, build accompanying automation.\n    - æ·±åº¦çè§£è§è½æ¡ä¾ãæ·±å¥¥ç¹æ§ãåè®®åç³»ç»ï¼åæ¬è¿äºè¡ä¸ºèåçåç(ç¥å¶æä»¥ç¶)ãå·å¤è®¾è®¡ãé¨ç½²ãç®¡çå³é®æèå¤§ååºç¡æ¶æè½åï¼å¹¶æå»º\nç¸åºçèªå¨åã\n\n9. could have written the book about the subject area but didnât; works with standards committees on defining new standards and methodologies.\n    - è½å¤æ°åé¢åä¹¦ç±ï¼ä½æ¯å°æªä»è¯¸è¡å¨(æ°åä¹¦ç±)ãè½å¤ä¸æ åå§åä¼ä¸èµ·å¶å®æ°çæ ååæ¹æ³ã\n\n10. wrote the book on the subject area(there actually has to be a book). recognized industry expert in the field, might have invented it\n    - åè¿é¢ååçä¹¦ç±(å®éä¸å¿é¡»åºçäºä¹¦ç±)ãé¢ååå¬è®¤çä¸å®¶ï¼ä¹è®¸å·²ç»å¨é¢ååææåæ°ã\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n\n\n----------------------------------------\n\n * subject areas:\n\n    tcp/ip networking (osi stack, dns etc)\n    unix/linux internals\n    unix/linux systems administration\n    algorithms and data structures\n    c\n    c++\n    python\n    java\n    perl\n    go\n    shell scripting (sh, bash, ksh, csh)\n    sql and/or database admin\n    scripting language of your choice (not already mentioned) \n    people management\n    project management\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n",charsets:{cjk:!0}},{title:"Home",frontmatter:{home:!0,heroText:"Jiao's blog",tagline:"ç¥è¡åä¸ --- ææ¯åå®¢ï¼ä»£ç ä¸­çç¹ç¹æ»´æ»´",features:[{title:"è¯­è¨",details:"PythonãC/C++ãGo ç­è¯­è¨",link:"/blog/lang/",imgUrl:"/img/icon_lang.png"},{title:"åæ²¿",details:"AIãå¾åå¤çç­ç¸å³ææ¯",link:"/blog/skills/",imgUrl:"/img/icon_ai.png"},{title:"å¶ä»",details:"ææ¡£ãæå·§ãæ»ç»ç­æç« ",link:"/blog/xnote/",imgUrl:"/img/icon_write.png"}],postList:"simple",simplePostListLength:15},regularPath:"/",relativePath:"index.md",key:"v-16de7e50",path:"/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2022/03/31, 13:54:53",lastUpdatedTimestamp:1648734893e3},{title:"æ´å¤",frontmatter:{title:"æ´å¤",date:"2020-12-25T00:00:00.000Z",permalink:"/more/",sidebar:!1,article:!1},regularPath:"/more/",relativePath:"more/README.md",key:"v-02e3228c",path:"/more/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2022/03/31, 13:54:53",lastUpdatedTimestamp:1648734893e3},{title:"å³äº",frontmatter:{title:"å³äº",date:"2020-12-25T00:00:00.000Z",permalink:"/more/about/",sidebar:!1,article:!1},regularPath:"/more/about.html",relativePath:"more/about.md",key:"v-4bfbd5e5",path:"/more/about/",headers:[{level:2,title:"ðBlog",slug:"ðblog",normalizedTitle:"ðblog",charIndex:2},{level:2,title:"ð¨Theme",slug:"ð¨theme",normalizedTitle:"ð¨theme",charIndex:88},{level:2,title:"ð¼Me",slug:"ð¼me",normalizedTitle:"ð¼me",charIndex:130},{level:2,title:"âï¸ èç³»",slug:"èç³»",normalizedTitle:"âï¸ èç³»",charIndex:148}],headersStr:"ðBlog ð¨Theme ð¼Me âï¸ èç³»",content:"# ðBlog\n\nè¿æ¯ä¸ä¸ªå¼å·åå®¢æç« ãç¥è¯ç®¡çãææ¡£æ¥æ¾çä¸ªäººç½ç«ï¼æ¬¢è¿äº¤æ¢åé¾ ( â¢Ì Ï â¢Ì )â§\n\næç¤º\n\næç« åå®¹ä»æ¯æä¸ªäººçå°æ»ç»ï¼å¦æè¯¯è¿è¯·ææ­£ã\n\n\n# ð¨Theme\n\næ¬ç«ä½¿ç¨vuepress-theme-vdoingæ­å»ºâ§\n\n\n# ð¼Me\n\n\n\næ¬äººâââ\n\n\n# âï¸ èç³»\n\n * WeChat or QQ: 929843628\n * Email: 929843628@qq.com\n * GitHub: https://github.com/joyous-x\n\nððâ¨æ¬¢è¿ä¸æ èç³»â å±åè¿æ­¥ Blog Source",normalizedContent:"# ðblog\n\nè¿æ¯ä¸ä¸ªå¼å·åå®¢æç« ãç¥è¯ç®¡çãææ¡£æ¥æ¾çä¸ªäººç½ç«ï¼æ¬¢è¿äº¤æ¢åé¾ ( â¢ Ï â¢ )â§\n\næç¤º\n\næç« åå®¹ä»æ¯æä¸ªäººçå°æ»ç»ï¼å¦æè¯¯è¿è¯·ææ­£ã\n\n\n# ð¨theme\n\næ¬ç«ä½¿ç¨vuepress-theme-vdoingæ­å»ºâ§\n\n\n# ð¼me\n\n\n\næ¬äººâââ\n\n\n# âï¸ èç³»\n\n * wechat or qq: 929843628\n * email: 929843628@qq.com\n * github: https://github.com/joyous-x\n\nððâ¨æ¬¢è¿ä¸æ èç³»â å±åè¿æ­¥ blog source",charsets:{cjk:!0},lastUpdated:"2022/03/31, 13:54:53",lastUpdatedTimestamp:1648734893e3},{title:"æ¶èå¤¹",frontmatter:{title:"æ¶èå¤¹",date:"2021-01-19T00:00:00.000Z",permalink:"/more/favorites/",article:!1},regularPath:"/more/favorites.html",relativePath:"more/favorites.md",key:"v-19beb85e",path:"/more/favorites/",headers:[{level:2,title:"ç¤¾åº",slug:"ç¤¾åº",normalizedTitle:"ç¤¾åº",charIndex:35},{level:2,title:"å¾åº & å£çº¸",slug:"å¾åº-å£çº¸",normalizedTitle:"å¾åº &amp; å£çº¸",charIndex:null},{level:3,title:"ç¢éå¾(Icon)",slug:"ç¢éå¾-icon",normalizedTitle:"ç¢éå¾(icon)",charIndex:386},{level:3,title:"Logo",slug:"logo",normalizedTitle:"logo",charIndex:605},{level:3,title:"å¾çå·¥å·",slug:"å¾çå·¥å·",normalizedTitle:"å¾çå·¥å·",charIndex:758},{level:2,title:"è®¾è®¡",slug:"è®¾è®¡",normalizedTitle:"è®¾è®¡",charIndex:978},{level:3,title:"éè²",slug:"éè²",normalizedTitle:"éè²",charIndex:1262},{level:2,title:"äº§å",slug:"äº§å",normalizedTitle:"äº§å",charIndex:1432},{level:3,title:"äº¤äº",slug:"äº¤äº",normalizedTitle:"äº¤äº",charIndex:1078},{level:2,title:"å¨çº¿å·¥å·",slug:"å¨çº¿å·¥å·",normalizedTitle:"å¨çº¿å·¥å·",charIndex:1641},{level:3,title:"å®ç¨",slug:"å®ç¨",normalizedTitle:"å®ç¨",charIndex:1650},{level:3,title:"CSS",slug:"css",normalizedTitle:"css",charIndex:1770},{level:3,title:"Emojiè¡¨æ",slug:"emojiè¡¨æ",normalizedTitle:"emojiè¡¨æ",charIndex:2e3},{level:3,title:"ç§å­¦ä¸ç½",slug:"ç§å­¦ä¸ç½",normalizedTitle:"ç§å­¦ä¸ç½",charIndex:2100},{level:3,title:"CDNå é",slug:"cdnå é",normalizedTitle:"cdnå é",charIndex:2159},{level:2,title:"æè¶£",slug:"æè¶£",normalizedTitle:"æè¶£",charIndex:214}],excerpt:'<div class="custom-block tip"><p class="custom-block-title">æç¤º</p>\n<p>æ¶éä¸äºå¸¸ç¨çé¡µé¢ï¼æç»­æ´çä¸­...</p>\n</div>\n<h1 id="æ¶èå¤¹"><a class="header-anchor" href="#æ¶èå¤¹">#</a> æ¶èå¤¹</h1>\n',headersStr:"ç¤¾åº å¾åº & å£çº¸ ç¢éå¾(Icon) Logo å¾çå·¥å· è®¾è®¡ éè² äº§å äº¤äº å¨çº¿å·¥å· å®ç¨ CSS Emojiè¡¨æ ç§å­¦ä¸ç½ CDNå é æè¶£",content:"æç¤º\n\næ¶éä¸äºå¸¸ç¨çé¡µé¢ï¼æç»­æ´çä¸­...\n\n\n# æ¶èå¤¹\n\n\n# ç¤¾åº\n\n * æé ä¸ä¸ªå¸®å©å¼åèæé¿çç¤¾åº\n * ç®ä¹¦ æå¾å¤é¢éçåä½ç¤¾åº\n * æå¦ è§£å³ææ¯é®é¢çç¤¾åº\n * stack overflow åä¸ï¼å¤ç½ç\n * InfoQ\n * V2EX\n * é±¼å¡ç­æ¦ åæ°´ç½ç«ï¼æ¶éäºå¾å¤ç½ç«ï¼å½å¤©ç­é¨æç« \n * Github followers å¨çæå\n * çæ²¹æç¤é¢å - å¬ç¡è°·ä»ä¸äººåè°è®ºç§æè¶å¿åå¶ä»æè¶£çè¯é¢\n\n\n# å¾åº & å£çº¸\n\n * wallhaven å£çº¸ç½ç«-\n * freepik banner å¾åº\n * è§åç´ ä¸å¤©åè´¹ä¸è½½åå¼  psd\n * èå Ps å­¦ä¹ æç¨\n * pexels é«æ¸åè´¹å¾ç\n * pixabay é«æ¸åè´¹å¾ç\n * alphacoders ææºå£çº¸\n * konachan é«è´¨éäºæ¬¡åå¾ç\n\n\n# ç¢éå¾(Icon)\n\n * Pngtree\n * Icons8\n * Iconfinder\n * iconfactory\n * feather ç¢éå¾æ (open source)\n * iconfont ç¢éå¾æ (é¿éå·´å·´)\n * easyicon easyiconå¾æ åº\n * Undraw åè´¹çç¢éæç»\n * icomoon ç¢éå¾æ åº\n * cssicon ææç icon é½æ¯çº¯ css ç»ç ç¼ºç¹ï¼icon ä¸å¤å¤\n\n\n# Logo\n\n * Logojoy ai å¨çº¿å¶ä½ logoï¼ååºæ¥ç logo è´¨éè¿ä¸é\n * brandmark å¨çº¿å¶ä½ logo ç½ç«\n * instant å¨çº¿å¶ä½ logo ç½ç«\n * namecheap å¨çº¿å¶ä½ logo ç½ç«\n * logo-maker å¨çº¿å¶ä½ logo ç½ç«\n\n\n# å¾çå·¥å·\n\n * tinypngå¾çåç¼© åç¼©pngå¾æç¨\n * Squoosh è°·æ­åºåå¨çº¿åè´¹å¾çåç¼©å·¥å·\n * iloveimg å¨çº¿ç¼è¾å¾çï¼ç¼©æ¾ãåªè£ãåç¼©\n * waifu2x éè¿å·ç§¯ç½ç»æ¾å¤§å¾ç(githubå¼æº)\n * vectormagic è½¬æ¢ç¢éå¾\n * vectorizer çæ­£ç png è½¬ svg ç¥å¨\n * å¨çº¿AIå¾çå¤ç é»ç½ä¿®å¤ãæ ææ¾å¤§ãå¨æ¼«åãéç¬ç»ç­ã\n * remove AIæ å¾\n * ç¨¿å®è®¾è®¡ é®å¼è®¾è®¡å·¥å·+æºè½æ å¾\n * vectorizer çæ­£ç png è½¬ svg ç¥å¨\n\n\n# è®¾è®¡\n\n * åé å¸å¯¼èª\n * è®¾è®¡å¸ç½åå¯¼èª\n * uimovement è½ä»è¿ä¸ªç½ç«æ¾å°ä¸å°å¨ç»äº¤äºççµæ\n * awwwardsæ¯ä¸ä¸ªä¸ä¸ªä¸é¨ä¸ºè®¾è®¡ç²¾ç¾çç½ç«ä»¥åå¯æåæçç½ç«é¢å¥çç½ç«\n * dribbble ç»å¸¸è½å¨ä¸é¢æ¾å°å¾å¤æåæå¥½çç gif æèå¾ç\n * designcap å¨çº¿æµ·æ¥è®¾è®¡\n * design.youzan æèµè®¾è®¡åå\n\n * Canva å¯ç» çææç»ãå°é¢ãæµ·æ¥ãå¤´åç­\n\n * æå®è®¾è®¡ å¯ä»¥æ å¾\n * UI ä¸­å½\n\n\n# éè²\n\n * uigradients æ¸åè²çæå·¥å·\n * Flat UI è²è¡¨ Flat UI è²è¡¨\n * 0to255 é¢è²æ¢¯åº¦\n * colorhunt å¦ä¸ä¸ªéè²ç½ç«\n * uigradients æ¸åè²ç½ç«\n * coolors å¸®ä½ å¨çº¿éè²çç½ç« ä½ è½æ¾å°ä¸å°éè²çµæ\n * colorkitty ä»ä½ çå¾çä¸­æåéè²\n\n\n# äº§å\n\n * äº§åå¤§ç ä»ä¹æå¾å¤å®æ´çäº§åååå¯ä»¥åé´\n * ç£¨å å¿«éåº ui åå\n\n\n# äº¤äº\n\n * Can't Unsee å¼ºçå»ºè®®åç«¯ãå®¢æ·ç«¯ãUI å¼åçåå­¦ç©ä¸ï¼æ£æ¥ä¸ä¸èªå·±å¯¹è®¾è®¡ç¨¿çææåº¦æä¹æ ·\n * å¾®äº¤äº éé¢æ¶éäºå¸é¢ä¸å¾å¤å¾å¥½çå¾®äº¤äºä¾å­ å¼å¾å­¦ä¹ \n * Little Big Details åä¸ï¼ä¸ä¸ªå½å¤å¾®äº¤äºæ±éç½ç«\n * cruip ç»å½é¡µçåç§é¡µé¢è®¾è®¡ï¼å¯ä»¥åè´¹ä¸è½½æ¨¡æ¿\n\n\n# å¨çº¿å·¥å·\n\n\n# å®ç¨\n\n * æ­£åå¯è§å\n * Linuxå½ä»¤æå\n * ä»£ç å¾ççæå¨\n * Github shields å¾½ç« å¾æ \n * å¤§åç ç¾åº¦ç½çæç´¢\n * æ¥ç»è§é¢ åå PPT ä¸æ ·åç­è§é¢\n * ä¼å PPT\n * æ¯æ ¼ PPT\n\n\n# CSS\n\n * CSS Tricks CSSæå·§æ¶éä¸æ¼ç¤º\n * CSSçæå¨\n * CSSæ¸åçæå¨\n * CSS3-Box Shadow(é´å½±)\n * 3Då­ä½\n * css-tricks cssæå·§æç« \n * You-need-to-know-css CSSçåç§DEMOï¼å¾å¨\n * CSS triangle generator å¸®ä½ å¿«éç¨ css ååºä¸è§å½¢\n * clippy å¨çº¿å¸®ä½ ä½¿ç¨ css clip-path ååºåç§å½¢ç¶çå¾å½¢\n\n\n# Emojiè¡¨æ\n\n * emojiè¡¨æ\n * emojiè¡¨æå¤å¿å½\n * gitmoji éè¿ emoji è¡¨è¾¾ git çæä½åå®¹\n\n> windowsç³»ç»ä¸æWin+.å¿«éæå¼è¡¨æéæ©æ¡\n\n\n# ç§å­¦ä¸ç½\n\n * è°·æ­chromeååºè®¿é®å©æ\n * è°·æ­äº(GCP)ä¸é®æ­å»º V2Ray è®©ä½ çå¿«ç§å­¦ä¸ç½\n\n\n# CDNå é\n\n * jsDelivr å½å¤çä¸å®¶ä¼ç§çå¬å± CDN æå¡æä¾å\n * unpkg cdn æå¡\n\n\n# æè¶£\n\n * awesome-comment éé¢æ¶éäºå¾å¤æè¶£çä»£ç æ³¨é\n * text-img é½å°å¾çè½¬åä¸º ascii ç¨æ¥åæ³¨é\n * weird-fonts å°æ®éå­æ¯è½¬åä¸º ç¹æ® unicode\n * magi ai æç´¢ç¥å¨ï¼è¶å±\n * Comixify ä¸ä¸ªæ³¢å°å¢éåäºéå¸¸å¥½ç©çå·¥å·ï¼å¯ä»¥æè§é¢èªå¨è½¬ææ¼«ç»ï¼ä¸å¾æ¯ä»ä»¬æä¾ç demoï¼ææå¾æ£ã",normalizedContent:"æç¤º\n\næ¶éä¸äºå¸¸ç¨çé¡µé¢ï¼æç»­æ´çä¸­...\n\n\n# æ¶èå¤¹\n\n\n# ç¤¾åº\n\n * æé ä¸ä¸ªå¸®å©å¼åèæé¿çç¤¾åº\n * ç®ä¹¦ æå¾å¤é¢éçåä½ç¤¾åº\n * æå¦ è§£å³ææ¯é®é¢çç¤¾åº\n * stack overflow åä¸ï¼å¤ç½ç\n * infoq\n * v2ex\n * é±¼å¡ç­æ¦ åæ°´ç½ç«ï¼æ¶éäºå¾å¤ç½ç«ï¼å½å¤©ç­é¨æç« \n * github followers å¨çæå\n * çæ²¹æç¤é¢å - å¬ç¡è°·ä»ä¸äººåè°è®ºç§æè¶å¿åå¶ä»æè¶£çè¯é¢\n\n\n# å¾åº & å£çº¸\n\n * wallhaven å£çº¸ç½ç«-\n * freepik banner å¾åº\n * è§åç´ ä¸å¤©åè´¹ä¸è½½åå¼  psd\n * èå ps å­¦ä¹ æç¨\n * pexels é«æ¸åè´¹å¾ç\n * pixabay é«æ¸åè´¹å¾ç\n * alphacoders ææºå£çº¸\n * konachan é«è´¨éäºæ¬¡åå¾ç\n\n\n# ç¢éå¾(icon)\n\n * pngtree\n * icons8\n * iconfinder\n * iconfactory\n * feather ç¢éå¾æ (open source)\n * iconfont ç¢éå¾æ (é¿éå·´å·´)\n * easyicon easyiconå¾æ åº\n * undraw åè´¹çç¢éæç»\n * icomoon ç¢éå¾æ åº\n * cssicon ææç icon é½æ¯çº¯ css ç»ç ç¼ºç¹ï¼icon ä¸å¤å¤\n\n\n# logo\n\n * logojoy ai å¨çº¿å¶ä½ logoï¼ååºæ¥ç logo è´¨éè¿ä¸é\n * brandmark å¨çº¿å¶ä½ logo ç½ç«\n * instant å¨çº¿å¶ä½ logo ç½ç«\n * namecheap å¨çº¿å¶ä½ logo ç½ç«\n * logo-maker å¨çº¿å¶ä½ logo ç½ç«\n\n\n# å¾çå·¥å·\n\n * tinypngå¾çåç¼© åç¼©pngå¾æç¨\n * squoosh è°·æ­åºåå¨çº¿åè´¹å¾çåç¼©å·¥å·\n * iloveimg å¨çº¿ç¼è¾å¾çï¼ç¼©æ¾ãåªè£ãåç¼©\n * waifu2x éè¿å·ç§¯ç½ç»æ¾å¤§å¾ç(githubå¼æº)\n * vectormagic è½¬æ¢ç¢éå¾\n * vectorizer çæ­£ç png è½¬ svg ç¥å¨\n * å¨çº¿aiå¾çå¤ç é»ç½ä¿®å¤ãæ ææ¾å¤§ãå¨æ¼«åãéç¬ç»ç­ã\n * remove aiæ å¾\n * ç¨¿å®è®¾è®¡ é®å¼è®¾è®¡å·¥å·+æºè½æ å¾\n * vectorizer çæ­£ç png è½¬ svg ç¥å¨\n\n\n# è®¾è®¡\n\n * åé å¸å¯¼èª\n * è®¾è®¡å¸ç½åå¯¼èª\n * uimovement è½ä»è¿ä¸ªç½ç«æ¾å°ä¸å°å¨ç»äº¤äºççµæ\n * awwwardsæ¯ä¸ä¸ªä¸ä¸ªä¸é¨ä¸ºè®¾è®¡ç²¾ç¾çç½ç«ä»¥åå¯æåæçç½ç«é¢å¥çç½ç«\n * dribbble ç»å¸¸è½å¨ä¸é¢æ¾å°å¾å¤æåæå¥½çç gif æèå¾ç\n * designcap å¨çº¿æµ·æ¥è®¾è®¡\n * design.youzan æèµè®¾è®¡åå\n\n * canva å¯ç» çææç»ãå°é¢ãæµ·æ¥ãå¤´åç­\n\n * æå®è®¾è®¡ å¯ä»¥æ å¾\n * ui ä¸­å½\n\n\n# éè²\n\n * uigradients æ¸åè²çæå·¥å·\n * flat ui è²è¡¨ flat ui è²è¡¨\n * 0to255 é¢è²æ¢¯åº¦\n * colorhunt å¦ä¸ä¸ªéè²ç½ç«\n * uigradients æ¸åè²ç½ç«\n * coolors å¸®ä½ å¨çº¿éè²çç½ç« ä½ è½æ¾å°ä¸å°éè²çµæ\n * colorkitty ä»ä½ çå¾çä¸­æåéè²\n\n\n# äº§å\n\n * äº§åå¤§ç ä»ä¹æå¾å¤å®æ´çäº§åååå¯ä»¥åé´\n * ç£¨å å¿«éåº ui åå\n\n\n# äº¤äº\n\n * can't unsee å¼ºçå»ºè®®åç«¯ãå®¢æ·ç«¯ãui å¼åçåå­¦ç©ä¸ï¼æ£æ¥ä¸ä¸èªå·±å¯¹è®¾è®¡ç¨¿çææåº¦æä¹æ ·\n * å¾®äº¤äº éé¢æ¶éäºå¸é¢ä¸å¾å¤å¾å¥½çå¾®äº¤äºä¾å­ å¼å¾å­¦ä¹ \n * little big details åä¸ï¼ä¸ä¸ªå½å¤å¾®äº¤äºæ±éç½ç«\n * cruip ç»å½é¡µçåç§é¡µé¢è®¾è®¡ï¼å¯ä»¥åè´¹ä¸è½½æ¨¡æ¿\n\n\n# å¨çº¿å·¥å·\n\n\n# å®ç¨\n\n * æ­£åå¯è§å\n * linuxå½ä»¤æå\n * ä»£ç å¾ççæå¨\n * github shields å¾½ç« å¾æ \n * å¤§åç ç¾åº¦ç½çæç´¢\n * æ¥ç»è§é¢ åå ppt ä¸æ ·åç­è§é¢\n * ä¼å ppt\n * æ¯æ ¼ ppt\n\n\n# css\n\n * css tricks cssæå·§æ¶éä¸æ¼ç¤º\n * cssçæå¨\n * cssæ¸åçæå¨\n * css3-box shadow(é´å½±)\n * 3då­ä½\n * css-tricks cssæå·§æç« \n * you-need-to-know-css cssçåç§demoï¼å¾å¨\n * css triangle generator å¸®ä½ å¿«éç¨ css ååºä¸è§å½¢\n * clippy å¨çº¿å¸®ä½ ä½¿ç¨ css clip-path ååºåç§å½¢ç¶çå¾å½¢\n\n\n# emojiè¡¨æ\n\n * emojiè¡¨æ\n * emojiè¡¨æå¤å¿å½\n * gitmoji éè¿ emoji è¡¨è¾¾ git çæä½åå®¹\n\n> windowsç³»ç»ä¸æwin+.å¿«éæå¼è¡¨æéæ©æ¡\n\n\n# ç§å­¦ä¸ç½\n\n * è°·æ­chromeååºè®¿é®å©æ\n * è°·æ­äº(gcp)ä¸é®æ­å»º v2ray è®©ä½ çå¿«ç§å­¦ä¸ç½\n\n\n# cdnå é\n\n * jsdelivr å½å¤çä¸å®¶ä¼ç§çå¬å± cdn æå¡æä¾å\n * unpkg cdn æå¡\n\n\n# æè¶£\n\n * awesome-comment éé¢æ¶éäºå¾å¤æè¶£çä»£ç æ³¨é\n * text-img é½å°å¾çè½¬åä¸º ascii ç¨æ¥åæ³¨é\n * weird-fonts å°æ®éå­æ¯è½¬åä¸º ç¹æ® unicode\n * magi ai æç´¢ç¥å¨ï¼è¶å±\n * comixify ä¸ä¸ªæ³¢å°å¢éåäºéå¸¸å¥½ç©çå·¥å·ï¼å¯ä»¥æè§é¢èªå¨è½¬ææ¼«ç»ï¼ä¸å¾æ¯ä»ä»¬æä¾ç demoï¼ææå¾æ£ã",charsets:{cjk:!0},lastUpdated:"2022/03/31, 13:54:53",lastUpdatedTimestamp:1648734893e3},{title:"åæé¾æ¥",frontmatter:{title:"åæé¾æ¥",date:"2020-12-25T00:00:00.000Z",permalink:"/more/friends/",article:!1,sidebar:!1},regularPath:"/more/friends.html",relativePath:"more/friends.md",key:"v-5b31b7d6",path:"/more/friends/",headers:[{level:3,title:"åé¾ç³è¯·",slug:"åé¾ç³è¯·",normalizedTitle:"åé¾ç³è¯·",charIndex:539}],headersStr:"åé¾ç³è¯·",content:"éºé¹¿é²å\n\nå¤§éè³ç®ï¼ç¥æè¡é¾\n\nXAOXUU\n\n#IOS #Volantisä¸»é¢ä½è\n\n- name: éºé¹¿é²å\n  desc: å¤§éè³ç®ï¼ç¥æè¡é¾\n  avatar: https://cdn.jsdelivr.net/gh/xugaoyi/image_store/blog/20200122153807.jpg # å¯é\n  link: https://www.cnblogs.com/miluluyo/ # å¯é\n  bgColor: '#CBEAFA' # å¯éï¼é»è®¤var(--bodyBg)ãé¢è²å¼æ#å·æ¶è¯·æ·»å åå¼å·\n  textColor: '#6854A1' # å¯éï¼é»è®¤var(--textColor)\n- name: XAOXUU\n  desc: '#IOS #Volantisä¸»é¢ä½è'\n  avatar: https://cdn.jsdelivr.net/gh/xaoxuu/assets@master/avatar/avatar.png\n  link: https://xaoxuu.com\n  bgColor: '#B9D59C'\n  textColor: '#3B551F'\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# åé¾ç³è¯·\n\nä¸æ èç³» æè å¨æ¬é¡µé¢è¯è®ºåºçè¨æ¨çåé¾ä¿¡æ¯ï¼æ ¼å¼ï¼(ç¹å»ä»£ç åå³ä¸è§ä¸é®å¤å¶)\n\n- name: Jiao's blog # æµç§°\n  desc: ç¥è¡åä¸ # ä»ç»\n  avatar: '/img/avatar.png' # å¤´å\n  link: https://.com/  # é¾æ¥\n\n\n1\n2\n3\n4\n\n\nç³è¯·åè®°å¾åæ·»å æ¬ç«å¦~",normalizedContent:"éºé¹¿é²å\n\nå¤§éè³ç®ï¼ç¥æè¡é¾\n\nxaoxuu\n\n#ios #volantisä¸»é¢ä½è\n\n- name: éºé¹¿é²å\n  desc: å¤§éè³ç®ï¼ç¥æè¡é¾\n  avatar: https://cdn.jsdelivr.net/gh/xugaoyi/image_store/blog/20200122153807.jpg # å¯é\n  link: https://www.cnblogs.com/miluluyo/ # å¯é\n  bgcolor: '#cbeafa' # å¯éï¼é»è®¤var(--bodybg)ãé¢è²å¼æ#å·æ¶è¯·æ·»å åå¼å·\n  textcolor: '#6854a1' # å¯éï¼é»è®¤var(--textcolor)\n- name: xaoxuu\n  desc: '#ios #volantisä¸»é¢ä½è'\n  avatar: https://cdn.jsdelivr.net/gh/xaoxuu/assets@master/avatar/avatar.png\n  link: https://xaoxuu.com\n  bgcolor: '#b9d59c'\n  textcolor: '#3b551f'\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# åé¾ç³è¯·\n\nä¸æ èç³» æè å¨æ¬é¡µé¢è¯è®ºåºçè¨æ¨çåé¾ä¿¡æ¯ï¼æ ¼å¼ï¼(ç¹å»ä»£ç åå³ä¸è§ä¸é®å¤å¶)\n\n- name: jiao's blog # æµç§°\n  desc: ç¥è¡åä¸ # ä»ç»\n  avatar: '/img/avatar.png' # å¤´å\n  link: https://.com/  # é¾æ¥\n\n\n1\n2\n3\n4\n\n\nç³è¯·åè®°å¾åæ·»å æ¬ç«å¦~",charsets:{cjk:!0},lastUpdated:"2022/03/31, 13:54:53",lastUpdatedTimestamp:1648734893e3}],themeConfig:{nav:[{text:"é¦é¡µ",link:"/"},{text:"Blog",link:"/blog/",items:[{text:"è¯­è¨",link:"/blog/lang/",items:[{text:"Language",link:"/blog/lang/"}]},{text:"è®¾è®¡",link:"/blog/design/",items:[{text:"Design",link:"/blog/design/"}]},{text:"ç½ç»",link:"/blog/network/",items:[{text:"Network",link:"/blog/network/"}]},{text:"æ°æ®åº",link:"/blog/database/",items:[{text:"Database",link:"/blog/database/"}]},{text:"å¹³å°",link:"/blog/platform/",items:[{text:"Platform",link:"/blog/platform/"}]},{text:"æè½",link:"/blog/skills/",items:[{text:"Devops",link:"/blog/skills/##Devops"},{text:"AI",link:"/blog/skills/##Ai"}]},{text:"åºç¨",link:"/blog/utilization/",items:[{text:"Utilization",link:"/blog/utilization/"}]},{text:"æé¡¹",link:"/blog/utility/",items:[{text:"ReadNote",link:"/blog/utility/##Rnote"},{text:"Tools",link:"/blog/utility/##Tools"}]}]},{text:"æ´å¤",link:"/more/",items:[{text:"å³äº",link:"/more/about/"},{text:"åæé¾æ¥",link:"/more/friends/"},{text:"æ¶è",link:"/more/favorites/",items:[{text:"favorites",link:"/more/favorites/"}]}]},{text:"ç´¢å¼",link:"/index/",items:[{text:"åç±»",link:"/index/categories/"},{text:"æ ç­¾",link:"/index/tags/"},{text:"å½æ¡£",link:"/index/archives/"}]}],sidebarDepth:2,logo:"/img/web_logo.png",repo:"joyous-x/blog",searchMaxSuggestions:10,lastUpdated:"ä¸æ¬¡æ´æ°",docsDir:"docs",editLinks:!1,editLinkText:"ç¼è¾",sidebar:{},author:{name:"Jiao",link:"https://github.com/joyous-x"},blogger:{avatar:"/img/avatar.png",name:"Jiao",slogan:"ç¥è¡åä¸"},social:{icons:[{iconClass:"icon-youjian",title:"åé®ä»¶",link:"mailto:929843628@qq.com"},{iconClass:"icon-github",title:"GitHub",link:"https://github.com/joyous-x"},{iconClass:"icon-erji",title:"å¬é³ä¹",link:"https://music.163.com"}]},footer:{createYear:2020,copyrightInfo:'Jiao | <a href="https://github.com/joyous-x/blog/blob/master/LICENSE" target="_blank">MIT License</a>'},htmlModules:{homeSidebarB:'\x3c!-- çºµåèªéåº --\x3e\n    <ins class="adsbygoogle"\n        style="display:block;padding: 0.95rem;"\n        data-ad-client="ca-pub-7828333725993554"\n        data-ad-slot="7802654582"\n        data-ad-format="auto"\n        data-full-width-responsive="true"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    <\/script>',sidebarB:'\x3c!-- æ­£æ¹å½¢ --\x3e\n      <ins class="adsbygoogle"\n          style="display:block"\n          data-ad-client="ca-pub-7828333725993554"\n          data-ad-slot="3508773082"\n          data-ad-format="auto"\n          data-full-width-responsive="true"></ins>\n      <script>\n          (adsbygoogle = window.adsbygoogle || []).push({});\n      <\/script>',pageT:'\x3c!-- åºå®100% * 90pxå¯æ¾ç¤ºï¼max-height:90pxæªè§æ¾ç¤º--\x3e\n     <ins class="adsbygoogle"\n          style="display:inline-block;width:100%;max-height:90px"\n          data-ad-client="ca-pub-7828333725993554"\n          data-ad-slot="6625304284"></ins>\n      <script>\n          (adsbygoogle = window.adsbygoogle || []).push({});\n      <\/script>',pageB:'\x3c!-- æ¨ªåèªéåº --\x3e\n      <ins class="adsbygoogle"\n          style="display:block"\n          data-ad-client="ca-pub-7828333725993554"\n          data-ad-slot="6620245489"\n          data-ad-format="auto"\n          data-full-width-responsive="true"></ins>\n      <script>\n          (adsbygoogle = window.adsbygoogle || []).push({});\n      <\/script>',windowRB:'\x3c!-- åºå®160*160px --\x3e\n      <ins class="adsbygoogle"\n          style="display:inline-block;max-width:160px;max-height:160px"\n          data-ad-client="ca-pub-7828333725993554"\n          data-ad-slot="8377369658"></ins>\n      <script>\n          (adsbygoogle = window.adsbygoogle || []).push({});\n      <\/script>\n      '}}},Zs=(t(133),t(205),t(144),t(216)),Js=t(217),nl=(t(368),t(228),t(43));var el={computed:{$filterPosts:function(){return this.$site.pages.filter((function(n){var e=n.frontmatter,t=e.pageComponent,r=e.article,o=e.home;return!(t||!1===r||!0===o)}))},$sortPosts:function(){return(n=this.$filterPosts).sort((function(n,e){var t=n.frontmatter.sticky,r=e.frontmatter.sticky;return t&&r?t==r?Object(nl.a)(n,e):t-r:t&&!r?-1:!t&&r?1:Object(nl.a)(n,e)})),n;var n},$sortPostsByDate:function(){return(n=this.$filterPosts).sort((function(n,e){return Object(nl.a)(n,e)})),n;var n},$groupPosts:function(){return function(n){for(var e={},t={},r=function(r,o){var a=n[r].frontmatter,i=a.categories,s=a.tags;"array"===Object(nl.n)(i)&&i.forEach((function(t){t&&(e[t]||(e[t]=[]),e[t].push(n[r]))})),"array"===Object(nl.n)(s)&&s.forEach((function(e){e&&(t[e]||(t[e]=[]),t[e].push(n[r]))}))},o=0,a=n.length;o<a;o++)r(o);return{categories:e,tags:t}}(this.$sortPosts)},$categoriesAndTags:function(){return function(n){var e=[],t=[];for(var r in n.categories)e.push({key:r,length:n.categories[r].length});for(var o in n.tags)t.push({key:o,length:n.tags[o].length});return{categories:e,tags:t}}(this.$groupPosts)}}};Ro.component(Zs.default),Ro.component(Js.default);function tl(n){return n.toString().padStart(2,"0")}t(373);Ro.component("Badge",(function(){return Promise.all([t.e(0),t.e(12)]).then(t.bind(null,728))})),Ro.component("CodeBlock",(function(){return Promise.resolve().then(t.bind(null,216))})),Ro.component("CodeGroup",(function(){return Promise.resolve().then(t.bind(null,217))}));t(374),t(136),t(375),t(376);var rl,ol,al=t(39),il=(t(379),t(134),t(215)),sl=t.n(il),ll=t(100);"valine"===(ol="gitalk")?t.e(105).then(t.t.bind(null,625,7)).then((function(n){return n.default})):"gitalk"===ol&&Promise.all([t.e(0),t.e(104)]).then(t.t.bind(null,626,7)).then((function(){return t.e(102).then(t.t.bind(null,627,7))})).then((function(n){return rl=n.default}));function cl(n,e){var t={};return Reflect.ownKeys(n).forEach((function(r){if("string"==typeof n[r])try{t[r]=sl.a.render(n[r],e)}catch(e){console.warn('Comment config option error at key named "'.concat(r,'"')),console.warn("More info: ".concat(e.message)),t[r]=n[r]}else t[r]=n[r]})),t}console.log('How to use "'.concat("gitalk",'" in ').concat(ll.name,"@v").concat(ll.version,":"),ll.homepage);var dl={render:function(n,e){var t=document.createElement("div");t.id=e,document.querySelector("main.page").appendChild(t),new rl(cl({clientID:"874ae7777f9ba6ae4dc8",clientSecret:"8c75a7494bc02652016bd5d0ccef60717a383b5d",repo:"blog_comment",owner:"joyous-x",admin:["joyous-x"],pagerDirection:"last",id:"<%- (frontmatter.permalink || frontmatter.to.path).slice(-16) %>",title:"ãè¯è®ºã<%- frontmatter.title %>",labels:["Gitalk","Comment"],body:"é¡µé¢ï¼<%- window.location.origin + (frontmatter.to.path || window.location.pathname) %>"},{frontmatter:n})).render(e)},clear:function(n){var e=document.querySelector("#".concat(n));return e&&e.remove(),!0}},pl=null;function ul(n){return dl.clear("vuepress-plugin-comment")}function ml(n){return!1!==n.comment&&!1!==n.comments}function fl(n){if(clearTimeout(pl),document.querySelector("main.page"))return dl.render(n,"vuepress-plugin-comment");pl=setTimeout((function(){return fl(n)}),200)}var hl={mounted:function(){var n=this;pl=setTimeout((function(){var e=Object(al.a)({to:{},from:{}},n.$frontmatter);ul()&&ml(e)&&fl(e)}),1e3),this.$router.afterEach((function(e,t){if(!e||!t||e.path!==t.path){var r=Object(al.a)({to:e,from:t},n.$frontmatter);ul()&&ml(r)&&fl(r)}}))}},gl=Object(Ks.a)(hl,(function(){var n=this.$createElement;return(this._self._c||n)("div")}),[],!1,null,null,null).exports,vl=(t(384),{props:{color:{required:!1,default:"rgb(66, 185, 131)"}}}),bl=(t(385),Object(Ks.a)(vl,(function(){var n=this.$createElement;return(this._self._c||n)("div",{staticClass:"spinner",style:{background:this.color}})}),[],!1,null,"1bbcb91a",null).exports),yl={name:"Mermaid",props:{id:{type:String,required:!1,default:function(){return"diagram_"+Date.now()}},graph:{type:String,required:!1}},data:function(){return{svg:void 0}},computed:{graphData:function(){return this.graph?this.graph:this.$slots.default[0].text}},render:function(n){return void 0===this.svg?n("Loading"):n("div",{class:["mermaid-diagram"],domProps:{innerHTML:this.svg,style:"width: 100%"}})},mounted:function(){var n=this;t.e(103).then(t.t.bind(null,628,7)).then((function(e){e.initialize(Object(al.a)({startOnLoad:!0},{})),e.render(n.id,n.graphData,(function(e){n.svg=e}))}))},components:{Loading:bl}},xl=[function(n){n.Vue,n.options,n.router,n.siteData},function(n){var e=n.Vue,t=(n.options,n.router,n.siteData);t.pages.map((function(n){var e=n.frontmatter,r=e.date,o=e.author;"string"==typeof r&&"Z"===r.charAt(r.length-1)&&(n.frontmatter.date=function(n){n instanceof Date||(n=new Date(n));return"".concat(n.getUTCFullYear(),"-").concat(tl(n.getUTCMonth()+1),"-").concat(tl(n.getUTCDate())," ").concat(tl(n.getUTCHours()),":").concat(tl(n.getUTCMinutes()),":").concat(tl(n.getUTCSeconds()))}(r)),o?n.author=o:t.themeConfig.author&&(n.author=t.themeConfig.author)})),e.mixin(el)},{},function(n){n.Vue.mixin({computed:{$dataBlock:function(){return this.$options.__data__block__}}})},{},{},function(n){n.router;"undefined"!=typeof window&&function(){var n=document.createElement("script"),e=window.location.protocol.split(":")[0];n.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(n,t)}()},{},function(n){n.Vue.component("Comment",gl)},function(n){n.Vue.component(yl.name,yl)}],_l=["Comment"];t(137);t(209);function kl(n,e){return(kl=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(n,e)}t(210);function wl(n){return(wl=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function Tl(n,e){if(e&&("object"===Ci(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}function Sl(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=wl(n);if(e){var o=wl(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return Tl(this,t)}}var Pl=function(n){!function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&kl(n,e)}(t,n);var e=Sl(t);function t(){return ps(this,t),e.apply(this,arguments)}return ms(t)}(function(){function n(){ps(this,n),this.store=new Ro({data:{state:{}}})}return ms(n,[{key:"$get",value:function(n){return this.store.state[n]}},{key:"$set",value:function(n,e){Ro.set(this.store.state,n,e)}},{key:"$emit",value:function(){var n;(n=this.store).$emit.apply(n,arguments)}},{key:"$on",value:function(){var n;(n=this.store).$on.apply(n,arguments)}}]),n}());Object.assign(Pl.prototype,{getPageAsyncComponent:Gi,getLayoutAsyncComponent:Hi,getAsyncComponent:Vi,getVueComponent:$i});var Cl={install:function(n){var e=new Pl;n.$vuepress=e,n.prototype.$vuepress=e}};function Il(n){n.beforeEach((function(e,t,r){if(El(n,e.path))r();else if(/(\/|\.html)$/.test(e.path))if(/\/$/.test(e.path)){var o=e.path.replace(/\/$/,"")+".html";El(n,o)?r(o):r()}else r();else{var a=e.path+"/",i=e.path+".html";El(n,i)?r(i):El(n,a)?r(a):r()}}))}function El(n,e){var t=e.toLowerCase();return n.options.routes.some((function(n){return n.path.toLowerCase()===t}))}var Al={props:{pageKey:String,slotKey:{type:String,default:"default"}},render:function(n){var e=this.pageKey||this.$parent.$page.key;return Ki("pageKey",e),Ro.component(e)||Ro.component(e,Gi(e)),Ro.component(e)?n(e):n("")}},Dl={functional:!0,props:{slotKey:String,required:!0},render:function(n,e){var t=e.props,r=e.slots;return n("div",{class:["content__".concat(t.slotKey)]},r()[t.slotKey])}},Ol={computed:{openInNewWindowTitle:function(){return this.$themeLocaleConfig.openNewWindowText||"(opens new window)"}}},Ll=(t(387),t(388),Object(Ks.a)(Ol,(function(){var n=this.$createElement,e=this._self._c||n;return e("span",[e("svg",{staticClass:"icon outbound",attrs:{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15"}},[e("path",{attrs:{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}}),this._v(" "),e("polygon",{attrs:{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"}})]),this._v(" "),e("span",{staticClass:"sr-only"},[this._v(this._s(this.openInNewWindowTitle))])])}),[],!1,null,null,null).exports);function jl(){return(jl=o(regeneratorRuntime.mark((function n(e){var t,r,o,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t="undefined"!=typeof window&&window.__VUEPRESS_ROUTER_BASE__?window.__VUEPRESS_ROUTER_BASE__:Ys.routerBase||Ys.base,Il(r=new Si({base:t,mode:"history",fallback:!1,routes:Qs,scrollBehavior:function(n,e,t){return t||(n.hash?!Ro.$vuepress.$get("disableScrollBehavior")&&{selector:decodeURIComponent(n.hash)}:{x:0,y:0})}})),o={},n.prev=4,n.next=7,Promise.all(xl.filter((function(n){return"function"==typeof n})).map((function(n){return n({Vue:Ro,options:o,router:r,siteData:Ys,isServer:e})})));case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(4),console.error(n.t0);case 12:return a=new Ro(Object.assign(o,{router:r,render:function(n){return n("div",{attrs:{id:"app"}},[n("RouterView",{ref:"layout"}),n("div",{class:"global-ui"},_l.map((function(e){return n(e)})))])}})),n.abrupt("return",{app:a,router:r});case 14:case"end":return n.stop()}}),n,null,[[4,9]])})))).apply(this,arguments)}Ro.config.productionTip=!1,Ro.use(Si),Ro.use(Cl),Ro.mixin(function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ro;Pi(e),t.$vuepress.$set("siteData",e);var r=n(t.$vuepress.$get("siteData")),o=new r,a=Object.getOwnPropertyDescriptors(Object.getPrototypeOf(o)),i={};return Object.keys(a).reduce((function(n,e){return e.startsWith("$")&&(n[e]=a[e].get),n}),i),{computed:i}}((function(n){return function(){function e(){ps(this,e)}return ms(e,[{key:"setPage",value:function(n){this.__page=n}},{key:"$site",get:function(){return n}},{key:"$themeConfig",get:function(){return this.$site.themeConfig}},{key:"$frontmatter",get:function(){return this.$page.frontmatter}},{key:"$localeConfig",get:function(){var n,e,t=this.$site.locales,r=void 0===t?{}:t;for(var o in r)"/"===o?e=r[o]:0===this.$page.path.indexOf(o)&&(n=r[o]);return n||e||{}}},{key:"$siteTitle",get:function(){return this.$localeConfig.title||this.$site.title||""}},{key:"$canonicalUrl",get:function(){var n=this.$page.frontmatter.canonicalUrl;return"string"==typeof n&&n}},{key:"$title",get:function(){var n=this.$page,e=this.$page.frontmatter.metaTitle;if("string"==typeof e)return e;var t=this.$siteTitle,r=n.frontmatter.home?null:n.frontmatter.title||n.title;return t?r?r+" | "+t:t:r||"VuePress"}},{key:"$description",get:function(){var n=function(n){if(n){var e=n.filter((function(n){return"description"===n.name}))[0];if(e)return e.content}}(this.$page.frontmatter.meta);return n||(this.$page.frontmatter.description||this.$localeConfig.description||this.$site.description||"")}},{key:"$lang",get:function(){return this.$page.frontmatter.lang||this.$localeConfig.lang||"en-US"}},{key:"$localePath",get:function(){return this.$localeConfig.path||"/"}},{key:"$themeLocaleConfig",get:function(){return(this.$site.themeConfig.locales||{})[this.$localePath]||{}}},{key:"$page",get:function(){return this.__page?this.__page:function(n,e){for(var t=0;t<n.length;t++){var r=n[t];if(r.path.toLowerCase()===e.toLowerCase())return r}return{path:"",frontmatter:{}}}(this.$site.pages,this.$route.path)}}]),e}()}),Ys)),Ro.component("Content",Al),Ro.component("ContentSlotsDistributor",Dl),Ro.component("OutboundLink",Ll),Ro.component("ClientOnly",{functional:!0,render:function(n,e){var t=e.parent,r=e.children;if(t._isMounted)return r;t.$once("hook:mounted",(function(){t.$forceUpdate()}))}}),Ro.component("Layout",Hi("Layout")),Ro.component("NotFound",Hi("NotFound")),Ro.prototype.$withBase=function(n){var e=this.$site.base;return"/"===n.charAt(0)?e+n.slice(1):n},window.__VUEPRESS__={version:"1.9.7",hash:"70f2ba7"},function(n){return jl.apply(this,arguments)}(!1).then((function(n){var e=n.app;n.router.onReady((function(){e.$mount("#app")}))}))}]);