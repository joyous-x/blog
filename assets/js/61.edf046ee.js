(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{578:function(l,s,e){"use strict";e.r(s);var i=e(14),t=Object(i.a)({},(function(){var l=this,s=l.$createElement,e=l._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":l.$parent.slotKey}},[e("h2",{attrs:{id:"common"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#common"}},[l._v("#")]),l._v(" Common")]),l._v(" "),e("ul",[e("li",[l._v("grep的查找，sed的编辑，awk在分析\n"),e("ul",[e("li",[l._v('grep -ar "select" ./conf')]),l._v(" "),e("li",[l._v("awk '{arr[$3]++}END{for(i in arr) print substr(i,0,length(i)-1)}'")])])]),l._v(" "),e("li",[l._v("truss、strace或ltrace : strace -p 34542 -s 128 -T")]),l._v(" "),e("li",[l._v("lsof\n"),e("ul",[e("li",[l._v("lsof | grep -i delete")])])]),l._v(" "),e("li",[l._v("dos2unix")]),l._v(" "),e("li",[l._v("tcpdump\n"),e("ul",[e("li",[l._v("tcpdump -i any -Xxns0 -c 100 host xx.xx.xx.xx and port xxxx")])])]),l._v(" "),e("li",[l._v("iftop")]),l._v(" "),e("li",[l._v("pstree\n"),e("ul",[e("li",[l._v("pstree -c -a > pstree.log")])])]),l._v(" "),e("li",[l._v("perf\n"),e("ul",[e("li",[l._v("perf top -p {pid}")])])]),l._v(" "),e("li",[l._v("top\n"),e("ul",[e("li",[l._v("内存排序 : top -a -n 1 -c")]),l._v(" "),e("li",[l._v("CPU排序  : top -n 1 -c")])])]),l._v(" "),e("li",[l._v("sudo nohup xxx &")]),l._v(" "),e("li",[l._v("pig\n"),e("ul",[e("li",[l._v("本地执行：pig -x local xxx.pig")])])]),l._v(" "),e("li",[l._v("xargs\n"),e("ul",[e("li",[l._v("管道是实现“将前面的标准输出作为后面的标准输入”")]),l._v(" "),e("li",[l._v("xargs是实现“将标准输入作为命令的参数”")]),l._v(" "),e("li",[l._v("可以试试运行："),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[l._v('echo "--help"|cat\necho "--help"|xargs cat\n')])]),l._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[l._v("1")]),e("br"),e("span",{staticClass:"line-number"},[l._v("2")]),e("br")])])]),l._v(" "),e("li",[l._v("注：参数：-I 必须指定替换字符, -i\n是否指定替换字符-可选")]),l._v(" "),e("li",[l._v("ps -ef | pgrep %s | xargs -I {} kill -9 {}")])])]),l._v(" "),e("li",[l._v("ulimit\n"),e("ul",[e("li",[l._v("ulimit [type: -H/-S] [cmd: -a/...] [arg: 0/unlimited/...]")])])]),l._v(" "),e("li",[l._v("gdb\n"),e("ul",[e("li",[l._v("gdb [bin] core_dump")]),l._v(" "),e("li",[l._v("gdb attach [pid]\n"),e("ul",[e("li",[l._v("c : continue")])])])])]),l._v(" "),e("li",[l._v("memcache"),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[l._v("memcache:\n\ttelnet host port\n\t\t强制退出：ctrl + ']'\n\tstats\n\tstats cachedump slabs_id limit_num\n")])]),l._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[l._v("1")]),e("br"),e("span",{staticClass:"line-number"},[l._v("2")]),e("br"),e("span",{staticClass:"line-number"},[l._v("3")]),e("br"),e("span",{staticClass:"line-number"},[l._v("4")]),e("br"),e("span",{staticClass:"line-number"},[l._v("5")]),e("br")])])]),l._v(" "),e("li",[l._v("自启动"),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[l._v("# 下面任务可以在 chkconfig 配置自启动\n/etc/init.d/*\n\n# 直接写到脚本里面\n/etc/rc.local\n\n# 查看某个服务（下面以redis为例）是否自启动\nchkconfig --list|grep redis\n# 如果 3，4，5为 off则不会自启动\n")])]),l._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[l._v("1")]),e("br"),e("span",{staticClass:"line-number"},[l._v("2")]),e("br"),e("span",{staticClass:"line-number"},[l._v("3")]),e("br"),e("span",{staticClass:"line-number"},[l._v("4")]),e("br"),e("span",{staticClass:"line-number"},[l._v("5")]),e("br"),e("span",{staticClass:"line-number"},[l._v("6")]),e("br"),e("span",{staticClass:"line-number"},[l._v("7")]),e("br"),e("span",{staticClass:"line-number"},[l._v("8")]),e("br"),e("span",{staticClass:"line-number"},[l._v("9")]),e("br")])])]),l._v(" "),e("li",[l._v("没有配置host时，函数 gethostbyname 会返回空：\n"),e("ul",[e("li",[l._v("修改：/etc/hosts")]),l._v(" "),e("li",[l._v("修改(重启后依然生效)：/etc/sysconfig/network")]),l._v(" "),e("li",[l._v("执行(当次生效)：hostname xxx")])])]),l._v(" "),e("li",[l._v("zookeeper\n"),e("ul",[e("li",[l._v("获取头文件、库文件\n"),e("ul",[e("li",[l._v("解压后，进入src/c目录，执行：./configure && make && make install")]),l._v(" "),e("li",[l._v("头/库文件在：/usr/local/include/zookeeper、/usr/local/lib")])])]),l._v(" "),e("li",[l._v("c api使用/命名\n"),e("ul",[e("li",[l._v("一般以 zoo_ 、zookeeper_ 开头，有个函数 zerror")]),l._v(" "),e("li",[l._v("zookeeper_init 会注册全局回调，其中会接受session的断开和连接消息")]),l._v(" "),e("li",[l._v("操作前会有 a或者w或者aw，a表示会注册 xxx_completion_t 回调，w表示会注册 watcher_fn 回调")]),l._v(" "),e("li",[l._v("函数参数 int watch ，表示，是否触发全局回调")])])]),l._v(" "),e("li",[l._v("除了全局回调，其他回调都是一次性的")]),l._v(" "),e("li",[l._v("add 和 del 的结点必须是叶子结点：\n"),e("ul",[e("li",[l._v('add 如：在路径 "/" 上添加 "/xxx/leaf" 会失败')]),l._v(" "),e("li",[l._v('del 如：在路径 "/xxx/sub/leaf" 上删除 "/xxx/sub" 会失败')])])]),l._v(" "),e("li",[l._v("zookeeper_init 的连接过程是异步的，需要等待连接成功消息")])])]),l._v(" "),e("li",[l._v("redis\n"),e("ul",[e("li",[l._v("库/头文件\n"),e("ul",[e("li",[l._v("以源码安装后生成在：/usr/local/include/hiredis/和/usr/local/lib/")])])]),l._v(" "),e("li",[l._v('以默认配置启动服务："./src/redis-server redis.conf"')]),l._v(" "),e("li",[l._v('启动客户端测试程序："./src/redis-cli"')])])]),l._v(" "),e("li",[l._v("Makefile\n"),e("ul",[e("li",[l._v("静态库：-L[lib_dir] -l[lib(libname)] ：注意，gcc在查找库的时候会自动添加式lib前缀再查找")]),l._v(" "),e("li",[l._v("多线程：-lpthread ：注意，编译多线程时，需要链接pthread")])])]),l._v(" "),e("li",[l._v("条件变量是 GNU/Linux 提供的第三种同步工具(第一互斥体、第二这信号量)")]),l._v(" "),e("li",[l._v("crontab\n"),e("ul",[e("li",[l._v("用户 : /var/spool/cron/*")]),l._v(" "),e("li",[l._v("系统 : /etc/crontab、/etc/cron.d")]),l._v(" "),e("li",[l._v("不常用 : /etc/[cron.hourly、cron.daily、cron.weekly、cron.monthly]")])])]),l._v(" "),e("li",[l._v("hadoop\n"),e("ul",[e("li",[l._v("HADOOP_USER_NAME=hdfs hdfs dfs -rmr")])])]),l._v(" "),e("li",[l._v("pyspark\n"),e("ul",[e("li",[l._v("提交任务 &"),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[l._v("sudo -u news_db spark-submit --master local[*] --conf spark.ui.port=12399 --queue offline --py-files pyspark_dashboard_util.py pyspark_dashboard.py\n")])]),l._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[l._v("1")]),e("br")])])]),l._v(" "),e("li",[l._v("打开文件\n"),e("ul",[e("li",[l._v('sc.textFile("file://[absolute path]")')]),l._v(" "),e("li",[l._v('sc.textFile("hdfs://url:port/[path]")')])])])])])]),l._v(" "),e("h2",{attrs:{id:"systemctl"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#systemctl"}},[l._v("#")]),l._v(" systemctl")]),l._v(" "),e("ul",[e("li",[l._v("CentOS 7\n"),e("ul",[e("li",[l._v("位置：服务systemctl脚本存放在：(配置文件优先级依次从低到高)\n"),e("ul",[e("li",[l._v("/usr/lib/systemd/，有系统 system 和用户 user 之分，即：/usr/lib/systemd/system 和 /usr/lib/systemd/user")]),l._v(" "),e("li",[l._v("/run/systemd/system")]),l._v(" "),e("li",[l._v("/etc/systemd/system")])])]),l._v(" "),e("li",[l._v("开机启动\n"),e("ul",[e("li",[l._v("systemctl enable [service, 如：nginx.service]")])])]),l._v(" "),e("li",[l._v("关机/重启\n"),e("ul",[e("li",[l._v("systemctl poweroff")]),l._v(" "),e("li",[l._v("systemctl reboot")])])])])])]),l._v(" "),e("h2",{attrs:{id:"git"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#git"}},[l._v("#")]),l._v(" Git")]),l._v(" "),e("ul",[e("li",[l._v("create\n"),e("ul",[e("li",[l._v("local\n"),e("ul",[e("li",[l._v("git checkout -b "),e("branch",[l._v(" [origin/"),e("branch",[l._v("]\n"),e("ul",[e("li",[l._v("默认是基于本地HEAD创建分支")])])])],1)],1)])]),l._v(" "),e("li",[l._v("remote\n"),e("ul",[e("li",[l._v("git push A B:C\n"),e("ul",[e("li",[e("em",[l._v("其中A和C是分别remote端的一个repository的名字和branch的名字，B是本地端branch的名字")])]),l._v(" "),e("li",[l._v("意思是把本地的B推送到remotes/A/C下")]),l._v(" "),e("li",[l._v("当B==C时可以直接省略为：git push A B")])])])])])])]),l._v(" "),e("li",[l._v("delete\n"),e("ul",[e("li",[l._v("remote\n"),e("ul",[e("li",[l._v("git push origin :A\n"),e("ul",[e("li",[l._v("推送一个空分支到远程分支，就相当于删除远程分支")])])]),l._v(" "),e("li",[l._v("git push origin --delete A")])])]),l._v(" "),e("li",[l._v("local\n"),e("ul",[e("li",[l._v("git branch -D dev")])])])])]),l._v(" "),e("li",[l._v("tag\n"),e("ul",[e("li",[l._v("git tag -a v0.0.1 -m 'tag message to describe this version'")]),l._v(" "),e("li",[l._v("git push origin v0.0.1")])])])]),l._v(" "),e("h2",{attrs:{id:"problems"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#problems"}},[l._v("#")]),l._v(" Problems")]),l._v(" "),e("ol",[e("li",[l._v("在 ubuntu 中移动 50000 张图片的图片的时候遇到如下问题："),e("em",[l._v("-bash: /bin/mv: Argument list too long")]),l._v(" "),e("ul",[e("li",[l._v("使用 "),e("code",[l._v('find sourcePath/ -type f -name "*.*" -exec mv {} targetPath/ \\;')]),l._v(" 可以解决，注意不能缺少结尾的 "),e("strong",[l._v(";")])])])])])])}),[],!1,null,null,null);s.default=t.exports}}]);